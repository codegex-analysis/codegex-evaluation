[
  {
    "sha": "74a38395a2ce6fc19ec77c053e6202b65ae140ac",
    "filename": "pom.xml",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/ConnectionMaster/agents/blob/d49ebd4b4f248869f80f127b289a9990cf821cd3/pom.xml",
    "raw_url": "https://github.com/ConnectionMaster/agents/raw/d49ebd4b4f248869f80f127b289a9990cf821cd3/pom.xml",
    "contents_url": "https://api.github.com/repos/ConnectionMaster/agents/contents/pom.xml?ref=d49ebd4b4f248869f80f127b289a9990cf821cd3",
    "patch": "@@ -9,7 +9,7 @@\n \n     <groupId>org.whitesource</groupId>\n     <artifactId>wss-agent-parent</artifactId>\n-    <version>2.9.9.64-SNAPSHOT</version>\n+    <version>2.9.9.65-SNAPSHOT</version>\n     <packaging>pom</packaging>\n \n     <name>White Source agent API</name>"
  },
  {
    "sha": "d6bfafecb3136b01d6d9be13d9e97c51018c9d2e",
    "filename": "wss-agent-api/pom.xml",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/ConnectionMaster/agents/blob/d49ebd4b4f248869f80f127b289a9990cf821cd3/wss-agent-api/pom.xml",
    "raw_url": "https://github.com/ConnectionMaster/agents/raw/d49ebd4b4f248869f80f127b289a9990cf821cd3/wss-agent-api/pom.xml",
    "contents_url": "https://api.github.com/repos/ConnectionMaster/agents/contents/wss-agent-api/pom.xml?ref=d49ebd4b4f248869f80f127b289a9990cf821cd3",
    "patch": "@@ -4,7 +4,7 @@\n     <parent>\n         <groupId>org.whitesource</groupId>\n         <artifactId>wss-agent-parent</artifactId>\n-        <version>2.9.9.64-SNAPSHOT</version>\n+        <version>2.9.9.65-SNAPSHOT</version>\n     </parent>\n     <artifactId>wss-agent-api</artifactId>\n     <packaging>jar</packaging>"
  },
  {
    "sha": "e5017522f287cbbf69e14902d9519b611e39c73c",
    "filename": "wss-agent-api/src/main/java/org/whitesource/agent/api/model/AnalysisInputs.java",
    "status": "added",
    "additions": 53,
    "deletions": 0,
    "changes": 53,
    "blob_url": "https://github.com/ConnectionMaster/agents/blob/d49ebd4b4f248869f80f127b289a9990cf821cd3/wss-agent-api/src/main/java/org/whitesource/agent/api/model/AnalysisInputs.java",
    "raw_url": "https://github.com/ConnectionMaster/agents/raw/d49ebd4b4f248869f80f127b289a9990cf821cd3/wss-agent-api/src/main/java/org/whitesource/agent/api/model/AnalysisInputs.java",
    "contents_url": "https://api.github.com/repos/ConnectionMaster/agents/contents/wss-agent-api/src/main/java/org/whitesource/agent/api/model/AnalysisInputs.java?ref=d49ebd4b4f248869f80f127b289a9990cf821cd3",
    "patch": "@@ -0,0 +1,53 @@\n+package org.whitesource.agent.api.model;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+/**\n+ * This class holds all information necessary for the Effective Usage Analysis to run successfully.\n+ *\n+ * @author noam.dolovich\n+ */\n+public class AnalysisInputs {\n+    private Map<String, String> modulesToPaths;\n+    private String euaArtifactId;\n+    private boolean emptyDependency;\n+\n+    public AnalysisInputs() {\n+    }\n+\n+    public AnalysisInputs(String euaArtifactId) {\n+        this.euaArtifactId = euaArtifactId;\n+    }\n+\n+    public Map<String, String> getModulesToPaths() {\n+        if (modulesToPaths == null) {\n+            modulesToPaths = new HashMap<>();\n+        }\n+        return modulesToPaths;\n+    }\n+\n+    public void setModulesToPaths(Map<String, String> modulesToPaths) {\n+        this.modulesToPaths = modulesToPaths;\n+    }\n+\n+    public void addDependencyModulesToPaths(String key, String value) {\n+        getModulesToPaths().put(key, value);\n+    }\n+\n+    public String getEuaArtifactId() {\n+        return euaArtifactId;\n+    }\n+\n+    public void setEuaArtifactId(String euaArtifactId) {\n+        this.euaArtifactId = euaArtifactId;\n+    }\n+\n+    public boolean isEmptyDependency() {\n+        return emptyDependency;\n+    }\n+\n+    public void setEmptyDependency(boolean emptyDependency) {\n+        this.emptyDependency = emptyDependency;\n+    }\n+}"
  },
  {
    "sha": "78a41393f89ac62e53fb9fb2e4ee5e15331e956c",
    "filename": "wss-agent-api/src/main/java/org/whitesource/agent/api/model/DependencyInfo.java",
    "status": "modified",
    "additions": 61,
    "deletions": 61,
    "changes": 122,
    "blob_url": "https://github.com/ConnectionMaster/agents/blob/d49ebd4b4f248869f80f127b289a9990cf821cd3/wss-agent-api/src/main/java/org/whitesource/agent/api/model/DependencyInfo.java",
    "raw_url": "https://github.com/ConnectionMaster/agents/raw/d49ebd4b4f248869f80f127b289a9990cf821cd3/wss-agent-api/src/main/java/org/whitesource/agent/api/model/DependencyInfo.java",
    "contents_url": "https://api.github.com/repos/ConnectionMaster/agents/contents/wss-agent-api/src/main/java/org/whitesource/agent/api/model/DependencyInfo.java?ref=d49ebd4b4f248869f80f127b289a9990cf821cd3",
    "patch": "@@ -66,29 +66,29 @@\n     private String architecture;\n     private String languageVersion;\n     private boolean deduped;\n-    private Map<String, String> dependencyModulesToPaths;\n-    private String euaArtifactId;\n     private OSInfo osInfo;\n+    private AnalysisInputs analysisInputs;\n \n     /* --- Constructors --- */\n \n     /**\n      * Default constructor\n      */\n-    public DependencyInfo() {}\n+    public DependencyInfo() {\n+    }\n \n     /**\n      * Constructor\n      *\n-     * @param groupId - the dependency groupId\n+     * @param groupId    - the dependency groupId\n      * @param artifactId - the dependency artifactId\n-     * @param version - the dependency version\n+     * @param version    - the dependency version\n      */\n     public DependencyInfo(String groupId, String artifactId, String version) {\n         this();\n         this.groupId = groupId;\n         this.version = version;\n-        this.setArtifactId(artifactId);\n+        this.artifactId = artifactId;\n     }\n \n     /**\n@@ -104,7 +104,7 @@ public DependencyInfo(String sha1) {\n     /**\n      * Constructor\n      *\n-     * @param sha1 - the dependency sha1\n+     * @param sha1     - the dependency sha1\n      * @param fullHash - the dependency fullHash\n      */\n     public DependencyInfo(String sha1, String fullHash) {\n@@ -115,9 +115,9 @@ public DependencyInfo(String sha1, String fullHash) {\n     /**\n      * Constructor\n      *\n-     * @param sha1 - the dependency sha1\n-     * @param fullHash - the dependency fullHash\n-     * @param mostSigBitsHash - the dependency mostSigBitsHash\n+     * @param sha1             - the dependency sha1\n+     * @param fullHash         - the dependency fullHash\n+     * @param mostSigBitsHash  - the dependency mostSigBitsHash\n      * @param leastSigBitsHash - the dependency leastSigBitsHash\n      */\n     public DependencyInfo(String sha1, String fullHash, String mostSigBitsHash, String leastSigBitsHash) {\n@@ -201,32 +201,6 @@ public int hashCode() {\n \n     /* --- Public methods --- */\n \n-    /**\n-     * This method was created in WSE-5514 task which will help decrease the size of the update-request file,\n-     * by removing all the empty initialized objects.\n-     * This method runs recursively on a dependencyInfo object and its children and reset all the initialized object\n-     * which contains no elements (empty collections)\n-     */\n-    public void resetUnusedCollections() {\n-        if (dependencyModulesToPaths != null && dependencyModulesToPaths.size() == 0) {\n-            dependencyModulesToPaths = null;\n-        }\n-\n-        if (checksums != null && checksums.size() == 0) {\n-            checksums = null;\n-        }\n-\n-        if (children != null && children.size() == 0) {\n-            children = null;\n-        }\n-\n-        // recursive call\n-        if (children != null) {\n-            for (DependencyInfo child : children) {\n-                child.resetUnusedCollections();\n-            }\n-        }\n-    }\n \n     public String getGroupId() {\n         return groupId;\n@@ -242,7 +216,6 @@ public String getArtifactId() {\n \n     public void setArtifactId(String artifactId) {\n         this.artifactId = artifactId;\n-        this.euaArtifactId = artifactId;\n     }\n \n     public String getVersion() {\n@@ -518,42 +491,69 @@ public void setDeduped(boolean deduped) {\n         this.deduped = deduped;\n     }\n \n+    public OSInfo getOsInfo() {\n+        return osInfo;\n+    }\n \n-    public Map<String, String> getDependencyModulesToPaths() {\n-        if (dependencyModulesToPaths == null) {\n-            dependencyModulesToPaths = new HashMap<>();\n-        }\n-        return dependencyModulesToPaths;\n+    public void setOsInfo(OSInfo osInfo) {\n+        this.osInfo = osInfo;\n     }\n \n-    public void setDependencyModulesToPaths(Map<String, String> dependencyModulesToPaths) {\n-        this.dependencyModulesToPaths = dependencyModulesToPaths;\n+    public AnalysisInputs getAnalysisInputs() { return analysisInputs; }\n+\n+    public void setAnalysisInputs(AnalysisInputs analysisInputs) {\n+        this.analysisInputs = analysisInputs;\n     }\n \n-    public void addDependencyModulesToPaths(String key, String value) {\n-        if (dependencyModulesToPaths == null) {\n-            dependencyModulesToPaths = new HashMap<>();\n+    /* --- Utility methods --- */\n+\n+    /**\n+     * This method initializes the analysis inputs only if it's null.\n+     * Otherwise, nothing will happen.\n+     *\n+     * The artifactId is copied to the analysisInputs object.\n+     */\n+    public void initAnalysisInputs() {\n+        if (analysisInputs == null) {\n+            analysisInputs = new AnalysisInputs(artifactId);\n         }\n-        dependencyModulesToPaths.put(key, value);\n     }\n \n-    public boolean hasDependencyModulesToPaths() {\n-        return dependencyModulesToPaths != null && dependencyModulesToPaths.size() != 0;\n+    /**\n+     * This method initializes the analysisInputs only if it's null.\n+     * Otherwise, nothing will happen.\n+     *\n+     * @param euaArtifactId to be set inside the analysisInputs object\n+     */\n+    public void initAnalysisInputs(String euaArtifactId) {\n+        if (analysisInputs == null) {\n+            analysisInputs = new AnalysisInputs(euaArtifactId);\n+        }\n     }\n \n-    public String getEuaArtifactId() {\n-        return euaArtifactId;\n-    }\n+    /**\n+     * This method was created in WSE-5514 task which will help decrease the size of the update-request file,\n+     * by removing all the empty initialized objects.\n+     * This method runs recursively on a dependencyInfo object and its children and reset all the initialized object\n+     * which contains no elements (empty collections)\n+     * In addition the analysisInputs object is set to null, as it is not needed in the update-request.\n+     */\n+    public void resetUnusedFields() {\n+        analysisInputs = null;\n \n-    public void setEuaArtifactId(String euaArtifactId) {\n-        this.euaArtifactId = euaArtifactId;\n-    }\n+        if (checksums != null && checksums.size() == 0) {\n+            checksums = null;\n+        }\n \n-    public OSInfo getOsInfo() {\n-        return osInfo;\n-    }\n+        if (children != null && children.size() == 0) {\n+            children = null;\n+        }\n \n-    public void setOsInfo(OSInfo osInfo) {\n-        this.osInfo = osInfo;\n+        // recursive call\n+        if (children != null) {\n+            for (DependencyInfo child : children) {\n+                child.resetUnusedFields();\n+            }\n+        }\n     }\n }"
  },
  {
    "sha": "bbabf9a48adc7a66a3e8bef9ddc43454ec1fc1f4",
    "filename": "wss-agent-api/src/test/java/org/whitesource/agent/api/model/DependencyInfoTest.java",
    "status": "modified",
    "additions": 17,
    "deletions": 18,
    "changes": 35,
    "blob_url": "https://github.com/ConnectionMaster/agents/blob/d49ebd4b4f248869f80f127b289a9990cf821cd3/wss-agent-api/src/test/java/org/whitesource/agent/api/model/DependencyInfoTest.java",
    "raw_url": "https://github.com/ConnectionMaster/agents/raw/d49ebd4b4f248869f80f127b289a9990cf821cd3/wss-agent-api/src/test/java/org/whitesource/agent/api/model/DependencyInfoTest.java",
    "contents_url": "https://api.github.com/repos/ConnectionMaster/agents/contents/wss-agent-api/src/test/java/org/whitesource/agent/api/model/DependencyInfoTest.java?ref=d49ebd4b4f248869f80f127b289a9990cf821cd3",
    "patch": "@@ -14,13 +14,12 @@\n     public void dependencyInfoWithEmptyArgumentsTest() {\n         DependencyInfo depInfo = new DependencyInfo();\n \n-        Assert.assertEquals(null, depInfo.getVersion());\n-        Assert.assertEquals(null, depInfo.getArtifactId());\n-        Assert.assertEquals(null, depInfo.getGroupId());\n-        Assert.assertEquals(false, depInfo.getOptional());\n+        Assert.assertNull(depInfo.getVersion());\n+        Assert.assertNull(depInfo.getArtifactId());\n+        Assert.assertNull(depInfo.getGroupId());\n+        Assert.assertFalse(depInfo.getOptional());\n         Assert.assertEquals(new LinkedList<>(), depInfo.getChildren());\n         Assert.assertEquals(new TreeMap<>(), depInfo.getChecksums());\n-        Assert.assertEquals(new HashMap<>(), depInfo.getDependencyModulesToPaths());\n     }\n \n     @Test\n@@ -30,10 +29,9 @@ public void dependencyInfoWithArgumentsTest() {\n         Assert.assertEquals(\"1.0.0\", depInfo.getVersion());\n         Assert.assertEquals(\"bbbb\", depInfo.getArtifactId());\n         Assert.assertEquals(\"aaaa\", depInfo.getGroupId());\n-        Assert.assertEquals(false, depInfo.getOptional());\n+        Assert.assertFalse(depInfo.getOptional());\n         Assert.assertEquals(new LinkedList<>(), depInfo.getChildren());\n         Assert.assertEquals(new TreeMap<>(), depInfo.getChecksums());\n-        Assert.assertEquals(new HashMap<>(), depInfo.getDependencyModulesToPaths());\n     }\n \n     @Test\n@@ -44,15 +42,16 @@ public void checkArgumentsWithoutCallingTheGetMethodTest() throws NoSuchFieldExc\n         childrenField.setAccessible(true);\n         Field checksumsField = DependencyInfo.class.getDeclaredField(\"checksums\");\n         checksumsField.setAccessible(true);\n-        Field dependencyModulesToPathsField = DependencyInfo.class.getDeclaredField(\"dependencyModulesToPaths\");\n-        dependencyModulesToPathsField.setAccessible(true);\n+        Field analysisInfoField = DependencyInfo.class.getDeclaredField(\"analysisInputs\");\n+        analysisInfoField.setAccessible(true);\n \n-        Assert.assertEquals(null, childrenField.get(depInfo));\n-        Assert.assertEquals(null,  checksumsField.get(depInfo));\n-        Assert.assertEquals(null,  dependencyModulesToPathsField.get(depInfo));\n+        Assert.assertNull(childrenField.get(depInfo));\n+        Assert.assertNull(checksumsField.get(depInfo));\n+        Assert.assertNull(analysisInfoField.get(depInfo));\n     }\n \n     @Test\n+    @SuppressWarnings(\"unchecked\")\n     public void checkAddChecksumTest() throws NoSuchFieldException, IllegalAccessException {\n         DependencyInfo depInfo = new DependencyInfo();\n \n@@ -61,12 +60,12 @@ public void checkAddChecksumTest() throws NoSuchFieldException, IllegalAccessExc\n \n         ChecksumType type = ChecksumType.ADDITIONAL_SHA1;\n         depInfo.addChecksum(type, \"\");\n-        Assert.assertEquals(null,  checksumsField.get(depInfo));\n+        Assert.assertNull(checksumsField.get(depInfo));\n \n         String additionalSha1 = \"blablablablabla\";\n         depInfo.addChecksum(type, additionalSha1);\n         Map<ChecksumType, String> csf = (Map<ChecksumType, String>) checksumsField.get(depInfo);\n-        Assert.assertTrue(csf != null);\n+        Assert.assertNotNull(csf);\n         Assert.assertEquals(1, csf.size());\n         Assert.assertEquals(additionalSha1, csf.get(type));\n \n@@ -89,8 +88,8 @@ public void getChecksumTest() throws NoSuchFieldException, IllegalAccessExceptio\n         Field checksumsField = DependencyInfo.class.getDeclaredField(\"checksums\");\n         checksumsField.setAccessible(true);\n \n-        Assert.assertEquals(null,  checksumsField.get(depInfo));\n-        Assert.assertTrue(depInfo.getChecksums() != null);\n+        Assert.assertNull(checksumsField.get(depInfo));\n+        Assert.assertNotNull(depInfo.getChecksums());\n         Assert.assertEquals(0, depInfo.getChecksums().size());\n     }\n \n@@ -101,8 +100,8 @@ public void childrenTest() throws NoSuchFieldException, IllegalAccessException {\n         Field childrenField = DependencyInfo.class.getDeclaredField(\"children\");\n         childrenField.setAccessible(true);\n \n-        Assert.assertEquals(null,  childrenField.get(depInfo));\n-        Assert.assertTrue(depInfo.getChildren() != null);\n+        Assert.assertNull(childrenField.get(depInfo));\n+        Assert.assertNotNull(depInfo.getChildren());\n         Assert.assertEquals(0, depInfo.getChildren().size());\n \n         DependencyInfo childDep = new DependencyInfo();"
  },
  {
    "sha": "aa09c15010b3ef47dd316645a6156aa84c20df54",
    "filename": "wss-agent-client/pom.xml",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/ConnectionMaster/agents/blob/d49ebd4b4f248869f80f127b289a9990cf821cd3/wss-agent-client/pom.xml",
    "raw_url": "https://github.com/ConnectionMaster/agents/raw/d49ebd4b4f248869f80f127b289a9990cf821cd3/wss-agent-client/pom.xml",
    "contents_url": "https://api.github.com/repos/ConnectionMaster/agents/contents/wss-agent-client/pom.xml?ref=d49ebd4b4f248869f80f127b289a9990cf821cd3",
    "patch": "@@ -4,7 +4,7 @@\n     <parent>\n         <artifactId>wss-agent-parent</artifactId>\n         <groupId>org.whitesource</groupId>\n-        <version>2.9.9.64-SNAPSHOT</version>\n+        <version>2.9.9.65-SNAPSHOT</version>\n     </parent>\n \n     <artifactId>wss-agent-api-client</artifactId>"
  },
  {
    "sha": "ef7b7ce9a866fc0d234b7a8fb01ad39deb2429f8",
    "filename": "wss-agent-hash-calculator/pom.xml",
    "status": "modified",
    "additions": 2,
    "deletions": 2,
    "changes": 4,
    "blob_url": "https://github.com/ConnectionMaster/agents/blob/d49ebd4b4f248869f80f127b289a9990cf821cd3/wss-agent-hash-calculator/pom.xml",
    "raw_url": "https://github.com/ConnectionMaster/agents/raw/d49ebd4b4f248869f80f127b289a9990cf821cd3/wss-agent-hash-calculator/pom.xml",
    "contents_url": "https://api.github.com/repos/ConnectionMaster/agents/contents/wss-agent-hash-calculator/pom.xml?ref=d49ebd4b4f248869f80f127b289a9990cf821cd3",
    "patch": "@@ -5,12 +5,12 @@\n     <parent>\n         <groupId>org.whitesource</groupId>\n         <artifactId>wss-agent-parent</artifactId>\n-        <version>2.9.9.64-SNAPSHOT</version>\n+        <version>2.9.9.65-SNAPSHOT</version>\n     </parent>\n \n     <groupId>org.whitesource</groupId>\n     <artifactId>wss-agent-hash-calculator</artifactId>\n-    <version>2.9.9.64-SNAPSHOT</version>\n+    <version>2.9.9.65-SNAPSHOT</version>\n \n     <dependencies>\n         <dependency>"
  },
  {
    "sha": "d32c7d85fdc6c9aab64a63a83a64e6c59be8d7cc",
    "filename": "wss-agent-report/pom.xml",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/ConnectionMaster/agents/blob/d49ebd4b4f248869f80f127b289a9990cf821cd3/wss-agent-report/pom.xml",
    "raw_url": "https://github.com/ConnectionMaster/agents/raw/d49ebd4b4f248869f80f127b289a9990cf821cd3/wss-agent-report/pom.xml",
    "contents_url": "https://api.github.com/repos/ConnectionMaster/agents/contents/wss-agent-report/pom.xml?ref=d49ebd4b4f248869f80f127b289a9990cf821cd3",
    "patch": "@@ -5,7 +5,7 @@\n     <parent>\n         <groupId>org.whitesource</groupId>\n         <artifactId>wss-agent-parent</artifactId>\n-        <version>2.9.9.64-SNAPSHOT</version>\n+        <version>2.9.9.65-SNAPSHOT</version>\n     </parent>\n \n     <artifactId>wss-agent-report</artifactId>"
  },
  {
    "sha": "0e01f3454bb06e7cccb541999e766c1b3cc65069",
    "filename": "wss-agent-utils/pom.xml",
    "status": "modified",
    "additions": 2,
    "deletions": 2,
    "changes": 4,
    "blob_url": "https://github.com/ConnectionMaster/agents/blob/d49ebd4b4f248869f80f127b289a9990cf821cd3/wss-agent-utils/pom.xml",
    "raw_url": "https://github.com/ConnectionMaster/agents/raw/d49ebd4b4f248869f80f127b289a9990cf821cd3/wss-agent-utils/pom.xml",
    "contents_url": "https://api.github.com/repos/ConnectionMaster/agents/contents/wss-agent-utils/pom.xml?ref=d49ebd4b4f248869f80f127b289a9990cf821cd3",
    "patch": "@@ -5,12 +5,12 @@\n     <parent>\n         <groupId>org.whitesource</groupId>\n         <artifactId>wss-agent-parent</artifactId>\n-        <version>2.9.9.64-SNAPSHOT</version>\n+        <version>2.9.9.65-SNAPSHOT</version>\n     </parent>\n \n     <groupId>org.whitesource</groupId>\n     <artifactId>wss-agent-utils</artifactId>\n-    <version>2.9.9.64-SNAPSHOT</version>\n+    <version>2.9.9.65-SNAPSHOT</version>\n \n     <dependencies>\n         <dependency>"
  },
  {
    "sha": "4815072f17263fca5b655ae5a25a920dd29d0ddb",
    "filename": "wss-agent-via-api/pom.xml",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/ConnectionMaster/agents/blob/d49ebd4b4f248869f80f127b289a9990cf821cd3/wss-agent-via-api/pom.xml",
    "raw_url": "https://github.com/ConnectionMaster/agents/raw/d49ebd4b4f248869f80f127b289a9990cf821cd3/wss-agent-via-api/pom.xml",
    "contents_url": "https://api.github.com/repos/ConnectionMaster/agents/contents/wss-agent-via-api/pom.xml?ref=d49ebd4b4f248869f80f127b289a9990cf821cd3",
    "patch": "@@ -3,7 +3,7 @@\n     <parent>\n         <artifactId>wss-agent-parent</artifactId>\n         <groupId>org.whitesource</groupId>\n-        <version>2.9.9.64-SNAPSHOT</version>\n+        <version>2.9.9.65-SNAPSHOT</version>\n     </parent>\n     <modelVersion>4.0.0</modelVersion>\n "
  }
]
