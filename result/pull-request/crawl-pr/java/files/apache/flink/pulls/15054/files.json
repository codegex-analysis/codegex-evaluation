[
  {
    "sha": "c2064319c2c3e8cc55e213e4823ffe1f81775489",
    "filename": "docs/content/docs/ops/debugging/flame_graphs.md",
    "status": "added",
    "additions": 82,
    "deletions": 0,
    "changes": 82,
    "blob_url": "https://github.com/apache/flink/blob/de5180a21e4f51384895bee7e2527677aa8092c1/docs/content/docs/ops/debugging/flame_graphs.md",
    "raw_url": "https://github.com/apache/flink/raw/de5180a21e4f51384895bee7e2527677aa8092c1/docs/content/docs/ops/debugging/flame_graphs.md",
    "contents_url": "https://api.github.com/repos/apache/flink/contents/docs/content/docs/ops/debugging/flame_graphs.md?ref=de5180a21e4f51384895bee7e2527677aa8092c1",
    "patch": "@@ -0,0 +1,82 @@\n+---\n+title: \"Flame Graphs\"\n+weight: 3\n+type: docs\n+aliases:\n+  - /ops/debugging/flame_graphs.html\n+  - /ops/debugging/flame_graphs\n+---\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+\n+# Flame Graphs\n+\n+[Flame Graphs](http://www.brendangregg.com/flamegraphs.html) are a visualization that effectively surfaces answers to questions like:\n+- Which methods are currently consuming CPU resources?\n+- How does consumption by one method compare to the others?\n+- Which series of calls on the stack led to executing a particular method?\n+\n+{{< img src=\"/fig/flame_graph_on_cpu.png\" class=\"img-fluid\" width=\"90%\" >}}\n+{{% center %}}\n+Flame Graph\n+{{% /center %}}\n+\n+Flame Graphs are constructed by sampling stack traces a number of times. Each method call is presented by a bar, where the length of the bar is proportional to the number of times it is present in the samples.\n+\n+Starting with Flink 1.13, Flame Graphs are natively supported in Flink. In order to produce a Flame Graph, navigate to the job graph of a running job, select an operator of interest and in the menu to the right click on the Flame Graph tab:  \n+\n+{{< img src=\"/fig/flame_graph_operator.png\" class=\"img-fluid\" width=\"90%\" >}}\n+{{% center %}}\n+Operator's On-CPU Flame Graph\n+{{% /center %}}\n+\n+Apart from the On-CPU Flame Graphs, [Off-CPU](http://www.brendangregg.com/FlameGraphs/offcpuflamegraphs.html) and Mixed visualizations are available and can be switched between by using the selector at the top of the pane:\n+\n+{{< img src=\"/fig/flame_graph_selector.png\" class=\"img-fluid\" width=\"30%\" >}}\n+\n+The Off-CPU Flame Graph visualizes blocking calls found in the samples. A distinction is made as follows:\n+- On-CPU: `Thread.State` in **[RUNNABLE, NEW]**\n+- Off-CPU: `Thread.State` in **[TIMED_WAITING, WAITING, BLOCKED]**\n+\n+{{< img src=\"/fig/flame_graph_off_cpu.png\" class=\"img-fluid\" width=\"90%\" >}}\n+{{% center %}}\n+Off-CPU Flame Graph\n+{{% /center %}}\n+\n+Mixed mode Flame Graphs are constructed from stack traces of threads in all possible states.\n+\n+{{< img src=\"/fig/flame_graph_mixed.png\" class=\"img-fluid\" width=\"90%\" >}}\n+{{% center %}}\n+Flame Graph in Mixed Mode\n+{{% /center %}}\n+\n+##  Sampling process\n+\n+The collection of stack traces is done purely within the JVM, so only method calls within the Java runtime are visible (no system calls).\n+\n+Flame Graph construction is performed at the level of an individual [operator]({{< ref \"docs/concepts/glossary\" >}}#operator), i.e. all [task]({{< ref \"docs/concepts/glossary\" >}}#task) threads of that operator are sampled in parallel and their stack traces are combined. \n+\n+\n+\n+{{< hint info >}}\n+**Note:** \n+Stack trace samples from all threads of an operator are combined together. If a method call consumes 100% of the resources in one of the parallel tasks but none in the others, the bottleneck might be obscured by being averaged out.   \n+\n+There are plans to address this limitation in the future by providing \"drill down\" visualizations to the task level.\n+{{< /hint >}}"
  },
  {
    "sha": "93ca2cecf4a39ae7e6d9397c81b2a8e6e56bb44b",
    "filename": "docs/layouts/shortcodes/generated/rest_v1_dispatcher.html",
    "status": "modified",
    "additions": 200,
    "deletions": 0,
    "changes": 200,
    "blob_url": "https://github.com/apache/flink/blob/de5180a21e4f51384895bee7e2527677aa8092c1/docs/layouts/shortcodes/generated/rest_v1_dispatcher.html",
    "raw_url": "https://github.com/apache/flink/raw/de5180a21e4f51384895bee7e2527677aa8092c1/docs/layouts/shortcodes/generated/rest_v1_dispatcher.html",
    "contents_url": "https://api.github.com/repos/apache/flink/contents/docs/layouts/shortcodes/generated/rest_v1_dispatcher.html?ref=de5180a21e4f51384895bee7e2527677aa8092c1",
    "patch": "@@ -3397,6 +3397,16 @@\n         </ul>\n       </td>\n     </tr>\n+    <tr>\n+      <td colspan=\"2\">Query parameters</td>\n+    </tr>\n+    <tr>\n+      <td colspan=\"2\">\n+        <ul>\n+<li><code>type</code> (optional): String value that specifies the Flame Graph type. Supported options are: \"[FULL, ON_CPU, OFF_CPU]\".</li>\n+        </ul>\n+      </td>\n+    </tr>\n     <tr>\n       <td colspan=\"2\">\n       <div class=\"book-expand\">\n@@ -3547,6 +3557,16 @@\n         </ul>\n       </td>\n     </tr>\n+    <tr>\n+      <td colspan=\"2\">Query parameters</td>\n+    </tr>\n+    <tr>\n+      <td colspan=\"2\">\n+        <ul>\n+<li><code>type</code> (optional): String value that specifies the Flame Graph type. Supported options are: \"[FULL, ON_CPU, OFF_CPU]\".</li>\n+        </ul>\n+      </td>\n+    </tr>\n     <tr>\n       <td colspan=\"2\">\n       <div class=\"book-expand\">\n@@ -3636,6 +3656,16 @@\n         </ul>\n       </td>\n     </tr>\n+    <tr>\n+      <td colspan=\"2\">Query parameters</td>\n+    </tr>\n+    <tr>\n+      <td colspan=\"2\">\n+        <ul>\n+<li><code>type</code> (optional): String value that specifies the Flame Graph type. Supported options are: \"[FULL, ON_CPU, OFF_CPU]\".</li>\n+        </ul>\n+      </td>\n+    </tr>\n     <tr>\n       <td colspan=\"2\">\n       <div class=\"book-expand\">\n@@ -3717,6 +3747,106 @@\n     </tr>\n   </tbody>\n </table>\n+<table class=\"rest-api table table-bordered\">\n+  <tbody>\n+    <tr>\n+      <td class=\"text-left\" colspan=\"2\"><h5><strong>/jobs/:jobid/vertices/:vertexid/flamegraph</strong></h5></td>\n+    </tr>\n+    <tr>\n+      <td class=\"text-left\" style=\"width: 20%\">Verb: <code>GET</code></td>\n+      <td class=\"text-left\">Response code: <code>200 OK</code></td>\n+    </tr>\n+    <tr>\n+      <td colspan=\"2\">Returns flame graph information for a job, and may initiate flame graph sampling if necessary.</td>\n+    </tr>\n+    <tr>\n+      <td colspan=\"2\">Path parameters</td>\n+    </tr>\n+    <tr>\n+      <td colspan=\"2\">\n+        <ul>\n+<li><code>jobid</code> - 32-character hexadecimal string value that identifies a job.</li>\n+<li><code>vertexid</code> - 32-character hexadecimal string value that identifies a job vertex.</li>\n+        </ul>\n+      </td>\n+    </tr>\n+    <tr>\n+      <td colspan=\"2\">Query parameters</td>\n+    </tr>\n+    <tr>\n+      <td colspan=\"2\">\n+        <ul>\n+<li><code>type</code> (optional): String value that specifies the Flame Graph type. Supported options are: \"[FULL, ON_CPU, OFF_CPU]\".</li>\n+        </ul>\n+      </td>\n+    </tr>\n+    <tr>\n+      <td colspan=\"2\">\n+      <div class=\"book-expand\">\n+        <label>\n+          <div class=\"book-expand-head flex justify-between\">\n+            <span>Request</span>\n+            &nbsp;            <span>▾</span>\n+          </div>\n+          <input type=\"checkbox\" class=\"hidden\">\n+          <div class=\"book-expand-content markdown-inner\">\n+          <pre>\n+            <code>\n+{}            </code>\n+          </pre>\n+          </div>\n+        </label>\n+      </div>\n+      </td>\n+    </tr>\n+    <tr>\n+      <td colspan=\"2\">\n+      <div class=\"book-expand\">\n+        <label>\n+          <div class=\"book-expand-head flex justify-between\">\n+            <span>Response</span>\n+            &nbsp;            <span>▾</span>\n+          </div>\n+          <input type=\"checkbox\" class=\"hidden\">\n+          <div class=\"book-expand-content markdown-inner\">\n+          <pre>\n+            <code>\n+{\n+  \"type\" : \"object\",\n+  \"id\" : \"urn:jsonschema:org:apache:flink:runtime:rest:messages:JobVertexFlameGraphInfo\",\n+  \"properties\" : {\n+    \"data\" : {\n+      \"type\" : \"object\",\n+      \"id\" : \"urn:jsonschema:org:apache:flink:runtime:webmonitor:threadinfo:OperatorFlameGraph:Node\",\n+      \"properties\" : {\n+        \"children\" : {\n+          \"type\" : \"array\",\n+          \"items\" : {\n+            \"type\" : \"object\",\n+            \"$ref\" : \"urn:jsonschema:org:apache:flink:runtime:webmonitor:threadinfo:OperatorFlameGraph:Node\"\n+          }\n+        },\n+        \"name\" : {\n+          \"type\" : \"string\"\n+        },\n+        \"value\" : {\n+          \"type\" : \"integer\"\n+        }\n+      }\n+    },\n+    \"end-timestamp\" : {\n+      \"type\" : \"integer\"\n+    }\n+  }\n+}            </code>\n+          </pre>\n+          </div>\n+        </label>\n+      </div>\n+      </td>\n+    </tr>\n+  </tbody>\n+</table>\n <table class=\"rest-api table table-bordered\">\n   <tbody>\n     <tr>\n@@ -3815,6 +3945,16 @@\n         </ul>\n       </td>\n     </tr>\n+    <tr>\n+      <td colspan=\"2\">Query parameters</td>\n+    </tr>\n+    <tr>\n+      <td colspan=\"2\">\n+        <ul>\n+<li><code>type</code> (optional): String value that specifies the Flame Graph type. Supported options are: \"[FULL, ON_CPU, OFF_CPU]\".</li>\n+        </ul>\n+      </td>\n+    </tr>\n     <tr>\n       <td colspan=\"2\">\n       <div class=\"book-expand\">\n@@ -4003,6 +4143,16 @@\n         </ul>\n       </td>\n     </tr>\n+    <tr>\n+      <td colspan=\"2\">Query parameters</td>\n+    </tr>\n+    <tr>\n+      <td colspan=\"2\">\n+        <ul>\n+<li><code>type</code> (optional): String value that specifies the Flame Graph type. Supported options are: \"[FULL, ON_CPU, OFF_CPU]\".</li>\n+        </ul>\n+      </td>\n+    </tr>\n     <tr>\n       <td colspan=\"2\">\n       <div class=\"book-expand\">\n@@ -4131,6 +4281,16 @@\n         </ul>\n       </td>\n     </tr>\n+    <tr>\n+      <td colspan=\"2\">Query parameters</td>\n+    </tr>\n+    <tr>\n+      <td colspan=\"2\">\n+        <ul>\n+<li><code>type</code> (optional): String value that specifies the Flame Graph type. Supported options are: \"[FULL, ON_CPU, OFF_CPU]\".</li>\n+        </ul>\n+      </td>\n+    </tr>\n     <tr>\n       <td colspan=\"2\">\n       <div class=\"book-expand\">\n@@ -4259,6 +4419,16 @@\n         </ul>\n       </td>\n     </tr>\n+    <tr>\n+      <td colspan=\"2\">Query parameters</td>\n+    </tr>\n+    <tr>\n+      <td colspan=\"2\">\n+        <ul>\n+<li><code>type</code> (optional): String value that specifies the Flame Graph type. Supported options are: \"[FULL, ON_CPU, OFF_CPU]\".</li>\n+        </ul>\n+      </td>\n+    </tr>\n     <tr>\n       <td colspan=\"2\">\n       <div class=\"book-expand\">\n@@ -4430,6 +4600,16 @@\n         </ul>\n       </td>\n     </tr>\n+    <tr>\n+      <td colspan=\"2\">Query parameters</td>\n+    </tr>\n+    <tr>\n+      <td colspan=\"2\">\n+        <ul>\n+<li><code>type</code> (optional): String value that specifies the Flame Graph type. Supported options are: \"[FULL, ON_CPU, OFF_CPU]\".</li>\n+        </ul>\n+      </td>\n+    </tr>\n     <tr>\n       <td colspan=\"2\">\n       <div class=\"book-expand\">\n@@ -4531,6 +4711,16 @@\n         </ul>\n       </td>\n     </tr>\n+    <tr>\n+      <td colspan=\"2\">Query parameters</td>\n+    </tr>\n+    <tr>\n+      <td colspan=\"2\">\n+        <ul>\n+<li><code>type</code> (optional): String value that specifies the Flame Graph type. Supported options are: \"[FULL, ON_CPU, OFF_CPU]\".</li>\n+        </ul>\n+      </td>\n+    </tr>\n     <tr>\n       <td colspan=\"2\">\n       <div class=\"book-expand\">\n@@ -4672,6 +4862,16 @@\n         </ul>\n       </td>\n     </tr>\n+    <tr>\n+      <td colspan=\"2\">Query parameters</td>\n+    </tr>\n+    <tr>\n+      <td colspan=\"2\">\n+        <ul>\n+<li><code>type</code> (optional): String value that specifies the Flame Graph type. Supported options are: \"[FULL, ON_CPU, OFF_CPU]\".</li>\n+        </ul>\n+      </td>\n+    </tr>\n     <tr>\n       <td colspan=\"2\">\n       <div class=\"book-expand\">"
  },
  {
    "sha": "9641fa6cc22de5a452a5298c9ebdf3391cf8e5c2",
    "filename": "docs/static/fig/flame_graph_mixed.png",
    "status": "added",
    "additions": 0,
    "deletions": 0,
    "changes": 0,
    "blob_url": "https://github.com/apache/flink/blob/de5180a21e4f51384895bee7e2527677aa8092c1/docs/static/fig/flame_graph_mixed.png",
    "raw_url": "https://github.com/apache/flink/raw/de5180a21e4f51384895bee7e2527677aa8092c1/docs/static/fig/flame_graph_mixed.png",
    "contents_url": "https://api.github.com/repos/apache/flink/contents/docs/static/fig/flame_graph_mixed.png?ref=de5180a21e4f51384895bee7e2527677aa8092c1"
  },
  {
    "sha": "b27c9dfc27de3f3008ad1bf782b08b347fc7f824",
    "filename": "docs/static/fig/flame_graph_off_cpu.png",
    "status": "added",
    "additions": 0,
    "deletions": 0,
    "changes": 0,
    "blob_url": "https://github.com/apache/flink/blob/de5180a21e4f51384895bee7e2527677aa8092c1/docs/static/fig/flame_graph_off_cpu.png",
    "raw_url": "https://github.com/apache/flink/raw/de5180a21e4f51384895bee7e2527677aa8092c1/docs/static/fig/flame_graph_off_cpu.png",
    "contents_url": "https://api.github.com/repos/apache/flink/contents/docs/static/fig/flame_graph_off_cpu.png?ref=de5180a21e4f51384895bee7e2527677aa8092c1"
  },
  {
    "sha": "39a5038cf6510bab579411a324223c2cf677f029",
    "filename": "docs/static/fig/flame_graph_on_cpu.png",
    "status": "added",
    "additions": 0,
    "deletions": 0,
    "changes": 0,
    "blob_url": "https://github.com/apache/flink/blob/de5180a21e4f51384895bee7e2527677aa8092c1/docs/static/fig/flame_graph_on_cpu.png",
    "raw_url": "https://github.com/apache/flink/raw/de5180a21e4f51384895bee7e2527677aa8092c1/docs/static/fig/flame_graph_on_cpu.png",
    "contents_url": "https://api.github.com/repos/apache/flink/contents/docs/static/fig/flame_graph_on_cpu.png?ref=de5180a21e4f51384895bee7e2527677aa8092c1"
  },
  {
    "sha": "a2bb363c58fa5a804303f2ce90251a6802fd5fd8",
    "filename": "docs/static/fig/flame_graph_operator.png",
    "status": "added",
    "additions": 0,
    "deletions": 0,
    "changes": 0,
    "blob_url": "https://github.com/apache/flink/blob/de5180a21e4f51384895bee7e2527677aa8092c1/docs/static/fig/flame_graph_operator.png",
    "raw_url": "https://github.com/apache/flink/raw/de5180a21e4f51384895bee7e2527677aa8092c1/docs/static/fig/flame_graph_operator.png",
    "contents_url": "https://api.github.com/repos/apache/flink/contents/docs/static/fig/flame_graph_operator.png?ref=de5180a21e4f51384895bee7e2527677aa8092c1"
  },
  {
    "sha": "a13a7773b54a7a35d402dbf6cb45906973ca2b05",
    "filename": "docs/static/fig/flame_graph_selector.png",
    "status": "added",
    "additions": 0,
    "deletions": 0,
    "changes": 0,
    "blob_url": "https://github.com/apache/flink/blob/de5180a21e4f51384895bee7e2527677aa8092c1/docs/static/fig/flame_graph_selector.png",
    "raw_url": "https://github.com/apache/flink/raw/de5180a21e4f51384895bee7e2527677aa8092c1/docs/static/fig/flame_graph_selector.png",
    "contents_url": "https://api.github.com/repos/apache/flink/contents/docs/static/fig/flame_graph_selector.png?ref=de5180a21e4f51384895bee7e2527677aa8092c1"
  },
  {
    "sha": "738c96f35cf25c39c23caa4e5d2afa82eab4bc86",
    "filename": "flink-core/src/main/java/org/apache/flink/configuration/WebOptions.java",
    "status": "modified",
    "additions": 42,
    "deletions": 0,
    "changes": 42,
    "blob_url": "https://github.com/apache/flink/blob/de5180a21e4f51384895bee7e2527677aa8092c1/flink-core/src/main/java/org/apache/flink/configuration/WebOptions.java",
    "raw_url": "https://github.com/apache/flink/raw/de5180a21e4f51384895bee7e2527677aa8092c1/flink-core/src/main/java/org/apache/flink/configuration/WebOptions.java",
    "contents_url": "https://api.github.com/repos/apache/flink/contents/flink-core/src/main/java/org/apache/flink/configuration/WebOptions.java?ref=de5180a21e4f51384895bee7e2527677aa8092c1",
    "patch": "@@ -156,6 +156,48 @@\n                     .withDeprecatedKeys(\"jobmanager.web.backpressure.delay-between-samples\")\n                     .withDescription(\"This config option is no longer used\");\n \n+    /** Time, in milliseconds, after which cached stats are cleaned up if not accessed. */\n+    public static final ConfigOption<Integer> FLAMEGRAPH_CLEANUP_INTERVAL =\n+            key(\"web.flamegraph.cleanup-interval\")\n+                    .intType()\n+                    .defaultValue(10 * 60 * 1000)\n+                    .withDescription(\n+                            \"Time, in milliseconds, after which cached stats are cleaned up if not accessed.\");\n+\n+    /**\n+     * Time, in milliseconds, after which available stats are deprecated and need to be refreshed\n+     * (by resampling).\n+     */\n+    public static final ConfigOption<Integer> FLAMEGRAPH_REFRESH_INTERVAL =\n+            key(\"web.flamegraph.refresh-interval\")\n+                    .intType()\n+                    .defaultValue(60 * 1000)\n+                    .withDescription(\n+                            \"Time, in milliseconds, after which available stats are deprecated and need to be refreshed\"\n+                                    + \" (by resampling).\");\n+\n+    /** Number of samples to take to build a FlameGraph. */\n+    public static final ConfigOption<Integer> FLAMEGRAPH_NUM_SAMPLES =\n+            key(\"web.flamegraph.num-samples\")\n+                    .intType()\n+                    .defaultValue(100)\n+                    .withDescription(\"Number of samples to take to build a FlameGraph.\");\n+\n+    /** Delay between samples to build a FlameGraph in milliseconds. */\n+    public static final ConfigOption<Integer> FLAMEGRAPH_DELAY =\n+            key(\"web.flamegraph.delay-between-samples\")\n+                    .intType()\n+                    .defaultValue(50)\n+                    .withDescription(\n+                            \"Delay between samples to build a FlameGraph in milliseconds.\");\n+\n+    /** Maximum depth of stack traces used to create FlameGraphs. */\n+    public static final ConfigOption<Integer> FLAMEGRAPH_STACK_TRACE_DEPTH =\n+            key(\"web.flamegraph.stack-depth\")\n+                    .intType()\n+                    .defaultValue(100)\n+                    .withDescription(\"Maximum depth of stack traces used to create FlameGraphs.\");\n+\n     /** Timeout for asynchronous operations by the web monitor in milliseconds. */\n     public static final ConfigOption<Long> TIMEOUT =\n             key(\"web.timeout\")"
  },
  {
    "sha": "c96f330380cdd2f6a65f59649e3534a4bff669f7",
    "filename": "flink-runtime-web/src/test/resources/rest_api_v1.snapshot",
    "status": "modified",
    "additions": 89,
    "deletions": 10,
    "changes": 99,
    "blob_url": "https://github.com/apache/flink/blob/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/src/test/resources/rest_api_v1.snapshot",
    "raw_url": "https://github.com/apache/flink/raw/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/src/test/resources/rest_api_v1.snapshot",
    "contents_url": "https://api.github.com/repos/apache/flink/contents/flink-runtime-web/src/test/resources/rest_api_v1.snapshot?ref=de5180a21e4f51384895bee7e2527677aa8092c1",
    "patch": "@@ -1875,7 +1875,10 @@\n       } ]\n     },\n     \"query-parameters\" : {\n-      \"queryParameters\" : [ ]\n+      \"queryParameters\" : [ {\n+        \"key\" : \"type\",\n+        \"mandatory\" : false\n+      } ]\n     },\n     \"request\" : {\n       \"type\" : \"any\"\n@@ -1981,7 +1984,10 @@\n       } ]\n     },\n     \"query-parameters\" : {\n-      \"queryParameters\" : [ ]\n+      \"queryParameters\" : [ {\n+        \"key\" : \"type\",\n+        \"mandatory\" : false\n+      } ]\n     },\n     \"request\" : {\n       \"type\" : \"any\"\n@@ -2026,7 +2032,10 @@\n       } ]\n     },\n     \"query-parameters\" : {\n-      \"queryParameters\" : [ ]\n+      \"queryParameters\" : [ {\n+        \"key\" : \"type\",\n+        \"mandatory\" : false\n+      } ]\n     },\n     \"request\" : {\n       \"type\" : \"any\"\n@@ -2073,6 +2082,55 @@\n         }\n       }\n     }\n+  }, {\n+    \"url\" : \"/jobs/:jobid/vertices/:vertexid/flamegraph\",\n+    \"method\" : \"GET\",\n+    \"status-code\" : \"200 OK\",\n+    \"file-upload\" : false,\n+    \"path-parameters\" : {\n+      \"pathParameters\" : [ {\n+        \"key\" : \"jobid\"\n+      }, {\n+        \"key\" : \"vertexid\"\n+      } ]\n+    },\n+    \"query-parameters\" : {\n+      \"queryParameters\" : [ {\n+        \"key\" : \"type\",\n+        \"mandatory\" : false\n+      } ]\n+    },\n+    \"request\" : {\n+      \"type\" : \"any\"\n+    },\n+    \"response\" : {\n+      \"type\" : \"object\",\n+      \"id\" : \"urn:jsonschema:org:apache:flink:runtime:rest:messages:JobVertexFlameGraphInfo\",\n+      \"properties\" : {\n+        \"end-timestamp\" : {\n+          \"type\" : \"integer\"\n+        },\n+        \"data\" : {\n+          \"type\" : \"object\",\n+          \"id\" : \"urn:jsonschema:org:apache:flink:runtime:webmonitor:threadinfo:OperatorFlameGraph:Node\",\n+          \"properties\" : {\n+            \"name\" : {\n+              \"type\" : \"string\"\n+            },\n+            \"value\" : {\n+              \"type\" : \"integer\"\n+            },\n+            \"children\" : {\n+              \"type\" : \"array\",\n+              \"items\" : {\n+                \"type\" : \"object\",\n+                \"$ref\" : \"urn:jsonschema:org:apache:flink:runtime:webmonitor:threadinfo:OperatorFlameGraph:Node\"\n+              }\n+            }\n+          }\n+        }\n+      }\n+    }\n   }, {\n     \"url\" : \"/jobs/:jobid/vertices/:vertexid/metrics\",\n     \"method\" : \"GET\",\n@@ -2110,7 +2168,10 @@\n       } ]\n     },\n     \"query-parameters\" : {\n-      \"queryParameters\" : [ ]\n+      \"queryParameters\" : [ {\n+        \"key\" : \"type\",\n+        \"mandatory\" : false\n+      } ]\n     },\n     \"request\" : {\n       \"type\" : \"any\"\n@@ -2208,7 +2269,10 @@\n       } ]\n     },\n     \"query-parameters\" : {\n-      \"queryParameters\" : [ ]\n+      \"queryParameters\" : [ {\n+        \"key\" : \"type\",\n+        \"mandatory\" : false\n+      } ]\n     },\n     \"request\" : {\n       \"type\" : \"any\"\n@@ -2294,7 +2358,10 @@\n       } ]\n     },\n     \"query-parameters\" : {\n-      \"queryParameters\" : [ ]\n+      \"queryParameters\" : [ {\n+        \"key\" : \"type\",\n+        \"mandatory\" : false\n+      } ]\n     },\n     \"request\" : {\n       \"type\" : \"any\"\n@@ -2380,7 +2447,10 @@\n       } ]\n     },\n     \"query-parameters\" : {\n-      \"queryParameters\" : [ ]\n+      \"queryParameters\" : [ {\n+        \"key\" : \"type\",\n+        \"mandatory\" : false\n+      } ]\n     },\n     \"request\" : {\n       \"type\" : \"any\"\n@@ -2457,7 +2527,10 @@\n       } ]\n     },\n     \"query-parameters\" : {\n-      \"queryParameters\" : [ ]\n+      \"queryParameters\" : [ {\n+        \"key\" : \"type\",\n+        \"mandatory\" : false\n+      } ]\n     },\n     \"request\" : {\n       \"type\" : \"any\"\n@@ -2514,7 +2587,10 @@\n       } ]\n     },\n     \"query-parameters\" : {\n-      \"queryParameters\" : [ ]\n+      \"queryParameters\" : [ {\n+        \"key\" : \"type\",\n+        \"mandatory\" : false\n+      } ]\n     },\n     \"request\" : {\n       \"type\" : \"any\"\n@@ -2611,7 +2687,10 @@\n       } ]\n     },\n     \"query-parameters\" : {\n-      \"queryParameters\" : [ ]\n+      \"queryParameters\" : [ {\n+        \"key\" : \"type\",\n+        \"mandatory\" : false\n+      } ]\n     },\n     \"request\" : {\n       \"type\" : \"any\""
  },
  {
    "sha": "f430507a7c8ebadaa730b717d6475cbcc8bda8c4",
    "filename": "flink-runtime-web/web-dashboard/package-lock.json",
    "status": "modified",
    "additions": 15087,
    "deletions": 47,
    "changes": 15134,
    "blob_url": "https://github.com/apache/flink/blob/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/package-lock.json",
    "raw_url": "https://github.com/apache/flink/raw/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/package-lock.json",
    "contents_url": "https://api.github.com/repos/apache/flink/contents/flink-runtime-web/web-dashboard/package-lock.json?ref=de5180a21e4f51384895bee7e2527677aa8092c1"
  },
  {
    "sha": "5148a1ed462735d00c91e9dcf8eff7b54bef1e97",
    "filename": "flink-runtime-web/web-dashboard/package.json",
    "status": "modified",
    "additions": 4,
    "deletions": 2,
    "changes": 6,
    "blob_url": "https://github.com/apache/flink/blob/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/package.json",
    "raw_url": "https://github.com/apache/flink/raw/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/package.json",
    "contents_url": "https://api.github.com/repos/apache/flink/contents/flink-runtime-web/web-dashboard/package.json?ref=de5180a21e4f51384895bee7e2527677aa8092c1",
    "patch": "@@ -22,6 +22,8 @@\n     \"@antv/g2\": \"^3.4.10\",\n     \"core-js\": \"^2.5.4\",\n     \"d3\": \"^5.9.1\",\n+    \"d3-flame-graph\": \"^4.0.6\",\n+    \"d3-tip\": \"^0.9.1\",\n     \"dagre\": \"^0.8.4\",\n     \"monaco-editor\": \"^0.16.0\",\n     \"ng-zorro-antd\": \"^7.2.0\",\n@@ -43,11 +45,11 @@\n     \"husky\": \"^1.3.1\",\n     \"jasmine-core\": \"~2.99.1\",\n     \"jasmine-spec-reporter\": \"~4.2.1\",\n+    \"karma\": \"~4.0.0\",\n     \"karma-chrome-launcher\": \"~2.2.0\",\n     \"karma-coverage-istanbul-reporter\": \"~2.0.1\",\n-    \"karma-jasmine-html-reporter\": \"^0.2.2\",\n     \"karma-jasmine\": \"~1.1.2\",\n-    \"karma\": \"~4.0.0\",\n+    \"karma-jasmine-html-reporter\": \"^0.2.2\",\n     \"lint-staged\": \"^8.1.5\",\n     \"prettier\": \"^1.16.4\",\n     \"protractor\": \"~5.4.0\","
  },
  {
    "sha": "e9ccde4a2016e0e93210f19695dfaccb758a5b85",
    "filename": "flink-runtime-web/web-dashboard/src/@types/d3-flame-graph/index.d.ts",
    "status": "added",
    "additions": 91,
    "deletions": 0,
    "changes": 91,
    "blob_url": "https://github.com/apache/flink/blob/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/src/@types/d3-flame-graph/index.d.ts",
    "raw_url": "https://github.com/apache/flink/raw/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/src/@types/d3-flame-graph/index.d.ts",
    "contents_url": "https://api.github.com/repos/apache/flink/contents/flink-runtime-web/web-dashboard/src/@types/d3-flame-graph/index.d.ts?ref=de5180a21e4f51384895bee7e2527677aa8092c1",
    "patch": "@@ -0,0 +1,91 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+declare module 'd3-flame-graph' {\n+  type ColorMapper = (node: any, originalColor: string) => string;\n+\n+  export function flamegraph(): FlameGraph;\n+  export const offCpuColorMapper: ColorMapper;\n+  export function defaultFlamegraphTooltip(): any;\n+\n+  export interface StackFrame {\n+    name: string;\n+    value: number;\n+    children: StackFrame[];\n+  }\n+\n+  type LabelHandler = (node: any) => string;\n+  type ClickHandler = (node: any) => void;\n+  type DetailsHandler = (node: any) => void;\n+  type SearchHandler = (results: any, sum: any, totalValue: any) => void;\n+  type SearchMatch = (node: any, term: string) => boolean;\n+\n+  interface FlameGraph {\n+    (selection: any): any;\n+\n+    selfValue(val: boolean): FlameGraph;\n+    selfValue(): boolean;\n+    width(val: number): FlameGraph;\n+    width(): number;\n+    height(val: number): FlameGraph;\n+    height(): number;\n+    cellHeight(val: number): FlameGraph;\n+    cellHeight(): number;\n+    minFrameSize(val: number): FlameGraph;\n+    minFrameSize(): number;\n+    title(val: string): FlameGraph;\n+    title(): string;\n+    tooltip(val: boolean): FlameGraph;\n+    tooltip(): boolean;\n+    tooltip(any: tip): boolean;\n+    transitionDuration(val: number): FlameGraph;\n+    transitionDuration(): number;\n+    transitionEase(val: string): FlameGraph;\n+    transitionEase(): string;\n+    label(val: LabelHandler): FlameGraph;\n+    label(): LabelHandler;\n+    sort(val: boolean): FlameGraph;\n+    sort(): boolean;\n+    inverted(val: boolean): FlameGraph;\n+    inverted(): boolean;\n+    computeDelta(val: boolean): FlameGraph;\n+    computeDelta(): boolean;\n+\n+    resetZoom(): void;\n+    onClick(val: ClickHandler): FlameGraph;\n+    onClick(): ClickHandler;\n+    setDetailsElement(val: HTMLElement | null): FlameGraph;\n+    setDetailsElement(): HTMLElement | null;\n+    setDetailsHandler(val: DetailsHandler): FlameGraph;\n+    setDetailsHandler(): FlameGraph;\n+    setSearchHandler(val: SearchHandler): FlameGraph;\n+    setSearchHandler(): FlameGraph;\n+    setColorMapper(val: ColorMapper): FlameGraph;\n+    setColorMapper(): FlameGraph;\n+    setColorHue(val: string): FlameGraph;\n+    setColorHue(): FlameGraph;\n+    setSearchMatch(val: SearchMatch): FlameGraph;\n+    setSearchMatch(): FlameGraph;\n+\n+    search(term: string): void;\n+    clear(): void;\n+    merge(node: StackFrame): void;\n+    update(node: StackFrame): void;\n+    destroy(): void;\n+  }\n+}"
  },
  {
    "sha": "a79645f5727f1d2846544a5ceaa9a8ff233e219e",
    "filename": "flink-runtime-web/web-dashboard/src/@types/d3-tip/index.d.ts",
    "status": "added",
    "additions": 1,
    "deletions": 0,
    "changes": 1,
    "blob_url": "https://github.com/apache/flink/blob/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/src/@types/d3-tip/index.d.ts",
    "raw_url": "https://github.com/apache/flink/raw/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/src/@types/d3-tip/index.d.ts",
    "contents_url": "https://api.github.com/repos/apache/flink/contents/flink-runtime-web/web-dashboard/src/@types/d3-tip/index.d.ts?ref=de5180a21e4f51384895bee7e2527677aa8092c1",
    "patch": "@@ -0,0 +1 @@\n+declare module 'd3-tip';"
  },
  {
    "sha": "9701a6c978929b493195d0fda73eaf015088e08e",
    "filename": "flink-runtime-web/web-dashboard/src/app/interfaces/job-flamegraph.ts",
    "status": "added",
    "additions": 29,
    "deletions": 0,
    "changes": 29,
    "blob_url": "https://github.com/apache/flink/blob/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/src/app/interfaces/job-flamegraph.ts",
    "raw_url": "https://github.com/apache/flink/raw/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/src/app/interfaces/job-flamegraph.ts",
    "contents_url": "https://api.github.com/repos/apache/flink/contents/flink-runtime-web/web-dashboard/src/app/interfaces/job-flamegraph.ts?ref=de5180a21e4f51384895bee7e2527677aa8092c1",
    "patch": "@@ -0,0 +1,29 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+export interface JobFlameGraphInterface {\n+  'end-timestamp': number;\n+  data: JobFlameGraphNodeInterface;\n+  graphType: string;\n+}\n+\n+export interface JobFlameGraphNodeInterface {\n+  name: string;\n+  value: number;\n+  children: JobFlameGraphNodeInterface[];\n+}"
  },
  {
    "sha": "3aedb4e6d115125d0477fab5e4cfcf86110f20d9",
    "filename": "flink-runtime-web/web-dashboard/src/app/interfaces/public-api.ts",
    "status": "modified",
    "additions": 1,
    "deletions": 0,
    "changes": 1,
    "blob_url": "https://github.com/apache/flink/blob/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/src/app/interfaces/public-api.ts",
    "raw_url": "https://github.com/apache/flink/raw/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/src/app/interfaces/public-api.ts",
    "contents_url": "https://api.github.com/repos/apache/flink/contents/flink-runtime-web/web-dashboard/src/app/interfaces/public-api.ts?ref=de5180a21e4f51384895bee7e2527677aa8092c1",
    "patch": "@@ -27,6 +27,7 @@ export * from './job-vertex-task-manager';\n export * from './job-checkpoint';\n export * from './job-subtask';\n export * from './job-backpressure';\n+export * from './job-flamegraph';\n export * from './plan';\n export * from './overview';\n export * from './task-manager';"
  },
  {
    "sha": "78218737100021fed07159ca2a581d0a2204c57a",
    "filename": "flink-runtime-web/web-dashboard/src/app/pages/job/overview/drawer/job-overview-drawer.component.less",
    "status": "modified",
    "additions": 0,
    "deletions": 1,
    "changes": 1,
    "blob_url": "https://github.com/apache/flink/blob/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/src/app/pages/job/overview/drawer/job-overview-drawer.component.less",
    "raw_url": "https://github.com/apache/flink/raw/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/src/app/pages/job/overview/drawer/job-overview-drawer.component.less",
    "contents_url": "https://api.github.com/repos/apache/flink/contents/flink-runtime-web/web-dashboard/src/app/pages/job/overview/drawer/job-overview-drawer.component.less?ref=de5180a21e4f51384895bee7e2527677aa8092c1",
    "patch": "@@ -16,7 +16,6 @@\n  * limitations under the License.\n  */\n \n-\n @import \"theme\";\n \n :host {"
  },
  {
    "sha": "450c42c8e4ea6513e1e2f11e9f020431d5258075",
    "filename": "flink-runtime-web/web-dashboard/src/app/pages/job/overview/drawer/job-overview-drawer.component.ts",
    "status": "modified",
    "additions": 2,
    "deletions": 1,
    "changes": 3,
    "blob_url": "https://github.com/apache/flink/blob/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/src/app/pages/job/overview/drawer/job-overview-drawer.component.ts",
    "raw_url": "https://github.com/apache/flink/raw/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/src/app/pages/job/overview/drawer/job-overview-drawer.component.ts",
    "contents_url": "https://api.github.com/repos/apache/flink/contents/flink-runtime-web/web-dashboard/src/app/pages/job/overview/drawer/job-overview-drawer.component.ts?ref=de5180a21e4f51384895bee7e2527677aa8092c1",
    "patch": "@@ -54,7 +54,8 @@ export class JobOverviewDrawerComponent implements OnInit, OnDestroy {\n     { title: 'Watermarks', path: 'watermarks' },\n     { title: 'Accumulators', path: 'accumulators' },\n     { title: 'BackPressure', path: 'backpressure' },\n-    { title: 'Metrics', path: 'metrics' }\n+    { title: 'Metrics', path: 'metrics' },\n+    { title: 'FlameGraph', path: 'flamegraph' }\n   ];\n   fullScreen = false;\n   private cachePath = this.listOfNavigation[0].path;"
  },
  {
    "sha": "8cd5cadf043e3c72b6d23f7f939ba424eb65a497",
    "filename": "flink-runtime-web/web-dashboard/src/app/pages/job/overview/flamegraph/job-overview-drawer-flamegraph.component.html",
    "status": "added",
    "additions": 46,
    "deletions": 0,
    "changes": 46,
    "blob_url": "https://github.com/apache/flink/blob/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/src/app/pages/job/overview/flamegraph/job-overview-drawer-flamegraph.component.html",
    "raw_url": "https://github.com/apache/flink/raw/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/src/app/pages/job/overview/flamegraph/job-overview-drawer-flamegraph.component.html",
    "contents_url": "https://api.github.com/repos/apache/flink/contents/flink-runtime-web/web-dashboard/src/app/pages/job/overview/flamegraph/job-overview-drawer-flamegraph.component.html?ref=de5180a21e4f51384895bee7e2527677aa8092c1",
    "patch": "@@ -0,0 +1,46 @@\n+<!--\n+  ~ Licensed to the Apache Software Foundation (ASF) under one\n+  ~ or more contributor license agreements.  See the NOTICE file\n+  ~ distributed with this work for additional information\n+  ~ regarding copyright ownership.  The ASF licenses this file\n+  ~ to you under the Apache License, Version 2.0 (the\n+  ~ \"License\"); you may not use this file except in compliance\n+  ~ with the License.  You may obtain a copy of the License at\n+  ~\n+  ~     http://www.apache.org/licenses/LICENSE-2.0\n+  ~\n+  ~ Unless required by applicable law or agreed to in writing, software\n+  ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n+  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+  ~ See the License for the specific language governing permissions and\n+  ~ limitations under the License.\n+  -->\n+\n+\n+<span *ngIf=\"selectedVertex?.detail?.status !== 'RUNNING'\">\n+          Operator is not running. Cannot sample back pressure.\n+</span>\n+\n+Type:\n+<nz-radio-group [(ngModel)]=\"graphType\" nzButtonStyle=\"solid\">\n+  <label nz-radio-button nzValue=\"on_cpu\" (click)=\"selectFrameGraphType()\" title=\"Includes Thread.State.[RUNNABLE, NEW]\">On-CPU</label>\n+  <label nz-radio-button nzValue=\"off_cpu\" (click)=\"selectFrameGraphType()\" title=\"Includes Thread.State.[WAITING, TIMED_WAITING, BLOCKED]\">Off-CPU</label>\n+  <label nz-radio-button nzValue=\"full\" (click)=\"selectFrameGraphType()\" title=\"Includes stack traces of threads in all states\">Mixed</label>\n+</nz-radio-group>\n+\n+Measurement:\n+<span *ngIf=\"flameGraph['end-timestamp']\">\n+  {{ (now - flameGraph['end-timestamp']) | humanizeDuration }} ago\n+</span>\n+\n+<div class=\"flame-graph-area\">\n+  <flink-flame-graph [data]=\"flameGraph['data']\" [graphType]=\"graphType\"></flink-flame-graph>\n+</div>\n+\n+<div style=\"padding-top: 100px\">\n+  <nz-spin *ngIf=\"isLoading\"></nz-spin>\n+</div>\n+\n+\n+\n+"
  },
  {
    "sha": "adcb4e9cf9e3d23bea4052bce0af15c1f5d0c941",
    "filename": "flink-runtime-web/web-dashboard/src/app/pages/job/overview/flamegraph/job-overview-drawer-flamegraph.component.less",
    "status": "added",
    "additions": 31,
    "deletions": 0,
    "changes": 31,
    "blob_url": "https://github.com/apache/flink/blob/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/src/app/pages/job/overview/flamegraph/job-overview-drawer-flamegraph.component.less",
    "raw_url": "https://github.com/apache/flink/raw/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/src/app/pages/job/overview/flamegraph/job-overview-drawer-flamegraph.component.less",
    "contents_url": "https://api.github.com/repos/apache/flink/contents/flink-runtime-web/web-dashboard/src/app/pages/job/overview/flamegraph/job-overview-drawer-flamegraph.component.less?ref=de5180a21e4f51384895bee7e2527677aa8092c1",
    "patch": "@@ -0,0 +1,31 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+\n+nz-select {\n+  width: 300px;\n+}\n+\n+.metric-selector {\n+  text-align: center;\n+}\n+\n+:host {\n+  padding: 16px;\n+  display: block;\n+}\n\\ No newline at end of file"
  },
  {
    "sha": "bda4c3b1ff241f47ed86cf3d805871812efb073a",
    "filename": "flink-runtime-web/web-dashboard/src/app/pages/job/overview/flamegraph/job-overview-drawer-flamegraph.component.ts",
    "status": "added",
    "additions": 82,
    "deletions": 0,
    "changes": 82,
    "blob_url": "https://github.com/apache/flink/blob/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/src/app/pages/job/overview/flamegraph/job-overview-drawer-flamegraph.component.ts",
    "raw_url": "https://github.com/apache/flink/raw/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/src/app/pages/job/overview/flamegraph/job-overview-drawer-flamegraph.component.ts",
    "contents_url": "https://api.github.com/repos/apache/flink/contents/flink-runtime-web/web-dashboard/src/app/pages/job/overview/flamegraph/job-overview-drawer-flamegraph.component.ts?ref=de5180a21e4f51384895bee7e2527677aa8092c1",
    "patch": "@@ -0,0 +1,82 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+import { Component, OnInit, ChangeDetectionStrategy, OnDestroy, ChangeDetectorRef } from '@angular/core';\n+import { Subject } from 'rxjs';\n+import { flatMap, takeUntil, tap } from 'rxjs/operators';\n+import { JobFlameGraphInterface, NodesItemCorrectInterface } from 'interfaces';\n+import { JobService } from 'services';\n+\n+@Component({\n+  selector: 'flink-job-overview-drawer-flamegraph',\n+  templateUrl: './job-overview-drawer-flamegraph.component.html',\n+  changeDetection: ChangeDetectionStrategy.OnPush,\n+  styleUrls: ['./job-overview-drawer-flamegraph.component.less']\n+})\n+export class JobOverviewDrawerFlameGraphComponent implements OnInit, OnDestroy {\n+  destroy$ = new Subject();\n+  isLoading = true;\n+  now = Date.now();\n+  selectedVertex: NodesItemCorrectInterface | null;\n+  flameGraph = {} as JobFlameGraphInterface;\n+\n+  graphType = 'on_cpu';\n+\n+  constructor(private jobService: JobService, private cdr: ChangeDetectorRef) {}\n+\n+  ngOnInit() {\n+    this.requestFlameGraph();\n+  }\n+\n+  private requestFlameGraph() {\n+    this.jobService.jobWithVertex$\n+      .pipe(\n+        takeUntil(this.destroy$),\n+        tap(data => (this.selectedVertex = data.vertex)),\n+        flatMap(data => this.jobService.loadOperatorFlameGraph(data.job.jid, data.vertex!.id, this.graphType))\n+      )\n+      .subscribe(\n+        data => {\n+          this.now = Date.now();\n+          if (this.flameGraph['end-timestamp'] !== data['end-timestamp']) {\n+            this.isLoading = false;\n+            this.flameGraph = data;\n+            this.flameGraph.graphType = this.graphType;\n+          }\n+          this.cdr.markForCheck();\n+        },\n+        () => {\n+          this.isLoading = false;\n+          this.cdr.markForCheck();\n+        }\n+      );\n+  }\n+\n+  selectFrameGraphType() {\n+    this.destroy$.next();\n+    this.destroy$.complete();\n+    this.destroy$ = new Subject();\n+    this.flameGraph = {} as JobFlameGraphInterface;\n+    this.requestFlameGraph();\n+  }\n+\n+  ngOnDestroy() {\n+    this.destroy$.next();\n+    this.destroy$.complete();\n+  }\n+}"
  },
  {
    "sha": "5a01f5d316e24d102cbf60096958f7629a4bef64",
    "filename": "flink-runtime-web/web-dashboard/src/app/pages/job/overview/job-overview-routing.module.ts",
    "status": "modified",
    "additions": 8,
    "deletions": 0,
    "changes": 8,
    "blob_url": "https://github.com/apache/flink/blob/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/src/app/pages/job/overview/job-overview-routing.module.ts",
    "raw_url": "https://github.com/apache/flink/raw/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/src/app/pages/job/overview/job-overview-routing.module.ts",
    "contents_url": "https://api.github.com/repos/apache/flink/contents/flink-runtime-web/web-dashboard/src/app/pages/job/overview/job-overview-routing.module.ts?ref=de5180a21e4f51384895bee7e2527677aa8092c1",
    "patch": "@@ -20,6 +20,7 @@ import { NgModule } from '@angular/core';\n import { Routes, RouterModule } from '@angular/router';\n import { JobOverviewDrawerAccumulatorsComponent } from './accumulators/job-overview-drawer-accumulators.component';\n import { JobOverviewDrawerBackpressureComponent } from './backpressure/job-overview-drawer-backpressure.component';\n+import { JobOverviewDrawerFlameGraphComponent } from './flamegraph/job-overview-drawer-flamegraph.component';\n import { JobOverviewDrawerChartComponent } from './chart/job-overview-drawer-chart.component';\n import { JobOverviewDrawerDetailComponent } from './detail/job-overview-drawer-detail.component';\n import { JobOverviewDrawerComponent } from './drawer/job-overview-drawer.component';\n@@ -85,6 +86,13 @@ const routes: Routes = [\n             data: {\n               path: 'backpressure'\n             }\n+          },\n+          {\n+            path: 'flamegraph',\n+            component: JobOverviewDrawerFlameGraphComponent,\n+            data: {\n+              path: 'flamegraph'\n+            }\n           }\n         ]\n       }"
  },
  {
    "sha": "0b76685efdb38aa2c58eb0531334e812f0f2b849",
    "filename": "flink-runtime-web/web-dashboard/src/app/pages/job/overview/job-overview.component.less",
    "status": "modified",
    "additions": 1,
    "deletions": 0,
    "changes": 1,
    "blob_url": "https://github.com/apache/flink/blob/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/src/app/pages/job/overview/job-overview.component.less",
    "raw_url": "https://github.com/apache/flink/raw/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/src/app/pages/job/overview/job-overview.component.less",
    "contents_url": "https://api.github.com/repos/apache/flink/contents/flink-runtime-web/web-dashboard/src/app/pages/job/overview/job-overview.component.less?ref=de5180a21e4f51384895bee7e2527677aa8092c1",
    "patch": "@@ -59,3 +59,4 @@ flink-job-overview-drawer {\n   display: block;\n   position: relative;\n }\n+"
  },
  {
    "sha": "2ad4aba71b68f3d3733696ab456ae729f03f5bd4",
    "filename": "flink-runtime-web/web-dashboard/src/app/pages/job/overview/job-overview.module.ts",
    "status": "modified",
    "additions": 3,
    "deletions": 1,
    "changes": 4,
    "blob_url": "https://github.com/apache/flink/blob/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/src/app/pages/job/overview/job-overview.module.ts",
    "raw_url": "https://github.com/apache/flink/raw/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/src/app/pages/job/overview/job-overview.module.ts",
    "contents_url": "https://api.github.com/repos/apache/flink/contents/flink-runtime-web/web-dashboard/src/app/pages/job/overview/job-overview.module.ts?ref=de5180a21e4f51384895bee7e2527677aa8092c1",
    "patch": "@@ -22,6 +22,7 @@ import { FormsModule } from '@angular/forms';\n import { ShareModule } from 'share/share.module';\n import { JobOverviewDrawerAccumulatorsComponent } from './accumulators/job-overview-drawer-accumulators.component';\n import { JobOverviewDrawerBackpressureComponent } from './backpressure/job-overview-drawer-backpressure.component';\n+import { JobOverviewDrawerFlameGraphComponent } from './flamegraph/job-overview-drawer-flamegraph.component';\n import { JobOverviewDrawerChartComponent } from './chart/job-overview-drawer-chart.component';\n import { JobOverviewDrawerDetailComponent } from './detail/job-overview-drawer-detail.component';\n import { JobOverviewDrawerComponent } from './drawer/job-overview-drawer.component';\n@@ -44,7 +45,8 @@ import { JobOverviewDrawerWatermarksComponent } from './watermarks/job-overview-\n     JobOverviewDrawerChartComponent,\n     JobOverviewDrawerWatermarksComponent,\n     JobOverviewDrawerAccumulatorsComponent,\n-    JobOverviewDrawerBackpressureComponent\n+    JobOverviewDrawerBackpressureComponent,\n+    JobOverviewDrawerFlameGraphComponent\n   ]\n })\n export class JobOverviewModule {}"
  },
  {
    "sha": "4838bd07259f90f33a5452945c907b96e95aabd4",
    "filename": "flink-runtime-web/web-dashboard/src/app/services/job.service.ts",
    "status": "modified",
    "additions": 13,
    "deletions": 0,
    "changes": 13,
    "blob_url": "https://github.com/apache/flink/blob/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/src/app/services/job.service.ts",
    "raw_url": "https://github.com/apache/flink/raw/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/src/app/services/job.service.ts",
    "contents_url": "https://api.github.com/repos/apache/flink/contents/flink-runtime-web/web-dashboard/src/app/services/job.service.ts?ref=de5180a21e4f51384895bee7e2527677aa8092c1",
    "patch": "@@ -28,6 +28,7 @@ import {\n   JobDetailCorrectInterface,\n   JobDetailInterface,\n   JobExceptionInterface,\n+  JobFlameGraphInterface,\n   JobOverviewInterface,\n   JobSubTaskInterface,\n   JobSubTaskTimeInterface,\n@@ -171,6 +172,18 @@ export class JobService {\n     return this.httpClient.get<JobBackpressureInterface>(`${BASE_URL}/jobs/${jobId}/vertices/${vertexId}/backpressure`);\n   }\n \n+  /**\n+   * Get vertex flame graph\n+   * @param jobId\n+   * @param vertexId\n+   * @param type\n+   */\n+  loadOperatorFlameGraph(jobId: string, vertexId: string, type: string) {\n+    return this.httpClient.get<JobFlameGraphInterface>(\n+      `${BASE_URL}/jobs/${jobId}/vertices/${vertexId}/flamegraph?type=${type}`\n+    );\n+  }\n+\n   /**\n    * Get vertex subtask\n    * @param jobId"
  },
  {
    "sha": "43da3db20a88aadb28245159674fe08b7663f770",
    "filename": "flink-runtime-web/web-dashboard/src/app/share/customize/flame-graph/flame-graph.component.html",
    "status": "added",
    "additions": 23,
    "deletions": 0,
    "changes": 23,
    "blob_url": "https://github.com/apache/flink/blob/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/src/app/share/customize/flame-graph/flame-graph.component.html",
    "raw_url": "https://github.com/apache/flink/raw/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/src/app/share/customize/flame-graph/flame-graph.component.html",
    "contents_url": "https://api.github.com/repos/apache/flink/contents/flink-runtime-web/web-dashboard/src/app/share/customize/flame-graph/flame-graph.component.html?ref=de5180a21e4f51384895bee7e2527677aa8092c1",
    "patch": "@@ -0,0 +1,23 @@\n+<!--\n+  ~ Licensed to the Apache Software Foundation (ASF) under one\n+  ~ or more contributor license agreements.  See the NOTICE file\n+  ~ distributed with this work for additional information\n+  ~ regarding copyright ownership.  The ASF licenses this file\n+  ~ to you under the Apache License, Version 2.0 (the\n+  ~ \"License\"); you may not use this file except in compliance\n+  ~ with the License.  You may obtain a copy of the License at\n+  ~\n+  ~     http://www.apache.org/licenses/LICENSE-2.0\n+  ~\n+  ~ Unless required by applicable law or agreed to in writing, software\n+  ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n+  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+  ~ See the License for the specific language governing permissions and\n+  ~ limitations under the License.\n+  -->\n+\n+<div class=\"background\">\n+  <div #flameGraphContainer>\n+  </div>\n+  {{ draw() }}\n+</div>"
  },
  {
    "sha": "dbfccd151b413f76ed58fb6ab1bdad652c720b9a",
    "filename": "flink-runtime-web/web-dashboard/src/app/share/customize/flame-graph/flame-graph.component.ts",
    "status": "added",
    "additions": 69,
    "deletions": 0,
    "changes": 69,
    "blob_url": "https://github.com/apache/flink/blob/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/src/app/share/customize/flame-graph/flame-graph.component.ts",
    "raw_url": "https://github.com/apache/flink/raw/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/src/app/share/customize/flame-graph/flame-graph.component.ts",
    "contents_url": "https://api.github.com/repos/apache/flink/contents/flink-runtime-web/web-dashboard/src/app/share/customize/flame-graph/flame-graph.component.ts?ref=de5180a21e4f51384895bee7e2527677aa8092c1",
    "patch": "@@ -0,0 +1,69 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+import { Component, ChangeDetectionStrategy, ElementRef, Input, ViewChild } from '@angular/core';\n+import { JobFlameGraphNodeInterface } from 'interfaces';\n+import { select } from 'd3-selection';\n+import { format } from 'd3-format';\n+import { flamegraph, offCpuColorMapper } from 'd3-flame-graph';\n+\n+import * as _d3 from 'd3';\n+import _d3Tip from 'd3-tip';\n+\n+@Component({\n+  selector: 'flink-flame-graph',\n+  templateUrl: './flame-graph.component.html',\n+  styleUrls: [],\n+  changeDetection: ChangeDetectionStrategy.OnPush\n+})\n+export class FlameGraphComponent {\n+  @ViewChild('flameGraphContainer') flameGraphContainer: ElementRef<Element>;\n+  @Input() data: JobFlameGraphNodeInterface;\n+  @Input() graphType: String;\n+\n+  draw() {\n+    if (this.data) {\n+      const element = this.flameGraphContainer.nativeElement;\n+      const chart = flamegraph().width(element.clientWidth);\n+\n+      const d3 = { ..._d3, tip: _d3Tip };\n+\n+      var tip = d3\n+        .tip()\n+        .direction('s')\n+        .offset([8, 0])\n+        .attr('class', 'd3-flame-graph-tip')\n+        .html(function(d: { data: { name: string; value: string }; x1: number; x0: number }) {\n+          return d.data.name + ' (' + format('.3f')(100 * (d.x1 - d.x0)) + '%, ' + d.data.value + ' samples)';\n+        });\n+\n+      chart.tooltip(tip);\n+\n+      if (this.graphType == 'off_cpu') {\n+        chart.setColorMapper(offCpuColorMapper);\n+      }\n+\n+      select(element)\n+        .selectAll('*')\n+        .remove();\n+      select(element)\n+        .datum(this.data)\n+        .call(chart);\n+    }\n+  }\n+}"
  },
  {
    "sha": "22b865e40c2223cb268c5c5afcc4c4f6a70f8371",
    "filename": "flink-runtime-web/web-dashboard/src/app/share/share.module.ts",
    "status": "modified",
    "additions": 5,
    "deletions": 2,
    "changes": 7,
    "blob_url": "https://github.com/apache/flink/blob/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/src/app/share/share.module.ts",
    "raw_url": "https://github.com/apache/flink/raw/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/src/app/share/share.module.ts",
    "contents_url": "https://api.github.com/repos/apache/flink/contents/flink-runtime-web/web-dashboard/src/app/share/share.module.ts?ref=de5180a21e4f51384895bee7e2527677aa8092c1",
    "patch": "@@ -32,6 +32,7 @@ import { JobListComponent } from 'share/customize/job-list/job-list.component';\n import { TaskBadgeComponent } from 'share/customize/task-badge/task-badge.component';\n import { RefreshDownloadComponent } from 'share/customize/refresh-download/refresh-download.component';\n import { BackpressureBadgeComponent } from './customize/backpressure-badge/backpressure-badge.component';\n+import { FlameGraphComponent } from './customize/flame-graph/flame-graph.component';\n \n @NgModule({\n   imports: [CommonModule, NgZorroAntdModule, PipeModule, DagreModule],\n@@ -46,7 +47,8 @@ import { BackpressureBadgeComponent } from './customize/backpressure-badge/backp\n     ResizeComponent,\n     JobChartComponent,\n     CheckpointBadgeComponent,\n-    BackpressureBadgeComponent\n+    BackpressureBadgeComponent,\n+    FlameGraphComponent\n   ],\n   exports: [\n     JobListComponent,\n@@ -62,7 +64,8 @@ import { BackpressureBadgeComponent } from './customize/backpressure-badge/backp\n     ResizeComponent,\n     JobChartComponent,\n     CheckpointBadgeComponent,\n-    BackpressureBadgeComponent\n+    BackpressureBadgeComponent,\n+    FlameGraphComponent\n   ]\n })\n export class ShareModule {}"
  },
  {
    "sha": "f14f4a91bbeb5941321a2f92aa41282c0fbcf690",
    "filename": "flink-runtime-web/web-dashboard/src/styles/index.less",
    "status": "modified",
    "additions": 14,
    "deletions": 0,
    "changes": 14,
    "blob_url": "https://github.com/apache/flink/blob/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/src/styles/index.less",
    "raw_url": "https://github.com/apache/flink/raw/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/src/styles/index.less",
    "contents_url": "https://api.github.com/repos/apache/flink/contents/flink-runtime-web/web-dashboard/src/styles/index.less?ref=de5180a21e4f51384895bee7e2527677aa8092c1",
    "patch": "@@ -16,8 +16,22 @@\n  * limitations under the License.\n  */\n \n+@import \"../../node_modules/d3-flame-graph/dist/d3-flamegraph.css\";\n @import \"../../node_modules/ng-zorro-antd/ng-zorro-antd.less\";\n @import \"./base\";\n @import \"./global\";\n @import \"./theme\";\n @import \"./rewrite\";\n+\n+\n+.d3-flame-graph-tip {\n+  line-height: 1;\n+  font-family: Verdana;\n+  font-size: 14px;\n+  padding: 12px;\n+  background: rgba(0, 0, 0, 0.8);\n+  color: #fff;\n+  border-radius: 2px;\n+  pointer-events: none;\n+  z-index: 1000;\n+}\n\\ No newline at end of file"
  },
  {
    "sha": "9756812f6d7d1fc0cff1c5ebef99b2ba234e93e8",
    "filename": "flink-runtime-web/web-dashboard/tsconfig.json",
    "status": "modified",
    "additions": 8,
    "deletions": 22,
    "changes": 30,
    "blob_url": "https://github.com/apache/flink/blob/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/tsconfig.json",
    "raw_url": "https://github.com/apache/flink/raw/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime-web/web-dashboard/tsconfig.json",
    "contents_url": "https://api.github.com/repos/apache/flink/contents/flink-runtime-web/web-dashboard/tsconfig.json?ref=de5180a21e4f51384895bee7e2527677aa8092c1",
    "patch": "@@ -3,21 +3,12 @@\n   \"compilerOptions\": {\n     \"baseUrl\": \"./\",\n     \"paths\": {\n-      \"services\": [\n-        \"src/app/services\"\n-      ],\n-      \"config\": [\n-        \"src/app/app.config.ts\"\n-      ],\n-      \"interfaces\": [\n-        \"src/app/interfaces\"\n-      ],\n-      \"utils\": [\n-        \"src/app/utils\"\n-      ],\n-      \"share/*\": [\n-        \"src/app/share/*\"\n-      ]\n+      \"*\": [\"src/@types/*\"],\n+      \"services\": [\"src/app/services\"],\n+      \"config\": [\"src/app/app.config.ts\"],\n+      \"interfaces\": [\"src/app/interfaces\"],\n+      \"utils\": [\"src/app/utils\"],\n+      \"share/*\": [\"src/app/share/*\"]\n     },\n     \"outDir\": \"./dist/out-tsc\",\n     \"sourceMap\": true,\n@@ -28,13 +19,8 @@\n     \"experimentalDecorators\": true,\n     \"importHelpers\": true,\n     \"target\": \"es5\",\n-    \"typeRoots\": [\n-      \"node_modules/@types\"\n-    ],\n-    \"lib\": [\n-      \"es2018\",\n-      \"dom\"\n-    ],\n+    \"typeRoots\": [\"node_modules/@types\"],\n+    \"lib\": [\"es2018\", \"dom\"],\n     \"noUnusedParameters\": true,\n     \"noUnusedLocals\": true,\n     \"noImplicitAny\": true,"
  },
  {
    "sha": "f01888a241b83cfb51404c62151f345fdad4a3a8",
    "filename": "flink-runtime/src/main/java/org/apache/flink/runtime/executiongraph/ArchivedExecutionJobVertex.java",
    "status": "modified",
    "additions": 18,
    "deletions": 0,
    "changes": 18,
    "blob_url": "https://github.com/apache/flink/blob/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime/src/main/java/org/apache/flink/runtime/executiongraph/ArchivedExecutionJobVertex.java",
    "raw_url": "https://github.com/apache/flink/raw/de5180a21e4f51384895bee7e2527677aa8092c1/flink-runtime/src/main/java/org/apache/flink/runtime/executiongraph/ArchivedExecutionJobVertex.java",
    "contents_url": "https://api.github.com/repos/apache/flink/contents/flink-runtime/src/main/java/org/apache/flink/runtime/executiongraph/ArchivedExecutionJobVertex.java?ref=de5180a21e4f51384895bee7e2527677aa8092c1",
    "patch": "@@ -23,6 +23,7 @@\n import org.apache.flink.runtime.jobgraph.JobVertexID;\n \n import java.io.Serializable;\n+import java.util.Objects;\n \n import static org.apache.flink.runtime.executiongraph.ExecutionJobVertex.getAggregateJobVertexState;\n \n@@ -127,4 +128,21 @@ public ExecutionState getAggregateState() {\n     public StringifiedAccumulatorResult[] getAggregatedUserAccumulatorsStringified() {\n         return archivedUserAccumulators;\n     }\n+\n+    @Override\n+    public boolean equals(Object o) {\n+        if (this == o) {\n+            return true;\n+        }\n+        if (o == null || getClass() != o.getClass()) {\n+            return false;\n+        }\n+        ArchivedExecutionJobVertex that = (ArchivedExecutionJobVertex) o;\n+        return Objects.equals(id, that.id);\n+    }\n+\n+    @Override\n+    public int hashCode() {\n+        return id.hashCode();\n+    }\n }"
  }
]
