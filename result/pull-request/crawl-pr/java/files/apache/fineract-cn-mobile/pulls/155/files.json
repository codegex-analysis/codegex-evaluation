[
  {
    "sha": "dc1f54b4038b6403ebfb28ec78873ea03391ed27",
    "filename": "app/src/main/java/org/apache/fineract/ui/online/groups/grouplist/GroupListFragment.kt",
    "status": "modified",
    "additions": 25,
    "deletions": 4,
    "changes": 29,
    "blob_url": "https://github.com/apache/fineract-cn-mobile/blob/0b1af662117882933f4e919daff7adf57297daa4/app/src/main/java/org/apache/fineract/ui/online/groups/grouplist/GroupListFragment.kt",
    "raw_url": "https://github.com/apache/fineract-cn-mobile/raw/0b1af662117882933f4e919daff7adf57297daa4/app/src/main/java/org/apache/fineract/ui/online/groups/grouplist/GroupListFragment.kt",
    "contents_url": "https://api.github.com/repos/apache/fineract-cn-mobile/contents/app/src/main/java/org/apache/fineract/ui/online/groups/grouplist/GroupListFragment.kt?ref=0b1af662117882933f4e919daff7adf57297daa4",
    "patch": "@@ -10,9 +10,11 @@ import androidx.appcompat.widget.SearchView\n import androidx.lifecycle.Observer\n import androidx.lifecycle.ViewModelProviders\n import androidx.recyclerview.widget.LinearLayoutManager\n+import androidx.swiperefreshlayout.widget.SwipeRefreshLayout\n import butterknife.ButterKnife\n import butterknife.OnClick\n import kotlinx.android.synthetic.main.fragment_group_list.*\n+import kotlinx.android.synthetic.main.fragment_group_list.swipeContainer\n import org.apache.fineract.R\n import org.apache.fineract.data.models.Group\n import org.apache.fineract.ui.adapters.GroupsAdapter\n@@ -30,7 +32,8 @@ import javax.inject.Inject\n  * Created by saksham on 15/June/2019\n */\n \n-class GroupListFragment : FineractBaseFragment(), OnItemClickListener {\n+class GroupListFragment : FineractBaseFragment(), SwipeRefreshLayout.OnRefreshListener,\n+        OnItemClickListener {\n \n     lateinit var rootView: View\n \n@@ -44,6 +47,8 @@ class GroupListFragment : FineractBaseFragment(), OnItemClickListener {\n \n     lateinit var groupList: ArrayList<Group>\n \n+    var searchView :SearchView? = null\n+\n     val searchedGroup: (ArrayList<Group>) -> Unit = { groups ->\n         adapter.setGroupList(groups)\n     }\n@@ -85,18 +90,30 @@ class GroupListFragment : FineractBaseFragment(), OnItemClickListener {\n                     groupList = it\n                     adapter.setGroupList(it)\n                 })\n+        swipeContainer.setOnRefreshListener(this)\n+    }\n+\n+    override fun onRefresh() {\n+        if (searchView!!.query.toString().isEmpty()){\n+            viewModel.getGroups()\n+            adapter.setGroupList(groupList)\n+            adapter.notifyDataSetChanged()\n+        } else {\n+            viewModel.searchGroup(groupList, searchView?.query.toString(), searchedGroup)\n+        }\n+        hideProgressbar()\n     }\n \n     override fun onCreateOptionsMenu(menu: Menu, inflater: MenuInflater) {\n         super.onCreateOptionsMenu(menu, inflater)\n         inflater.inflate(R.menu.menu_group_search, menu)\n \n         val searchManager = activity?.getSystemService(Context.SEARCH_SERVICE) as SearchManager\n-        val searchView = menu.findItem(R.id.group_search).actionView as SearchView\n+        searchView = menu.findItem(R.id.group_search).actionView as SearchView\n \n-        searchView.setSearchableInfo(searchManager.getSearchableInfo(activity?.componentName))\n+        searchView!!.setSearchableInfo(searchManager.getSearchableInfo(activity?.componentName))\n \n-        searchView.setOnQueryTextListener(object : SearchView.OnQueryTextListener {\n+        searchView!!.setOnQueryTextListener(object : SearchView.OnQueryTextListener {\n             override fun onQueryTextSubmit(query: String): Boolean {\n                 viewModel.searchGroup(groupList, query, searchedGroup)\n                 return false\n@@ -130,4 +147,8 @@ class GroupListFragment : FineractBaseFragment(), OnItemClickListener {\n         startActivity(intent)\n     }\n \n+    fun hideProgressbar() {\n+        rootView.findViewById<SwipeRefreshLayout>(R.id.swipeContainer).isRefreshing = false\n+    }\n+\n }\n\\ No newline at end of file"
  },
  {
    "sha": "fff69674ff4de36853f2b1696dd45fc46158d2f7",
    "filename": "app/src/main/res/layout/fragment_group_list.xml",
    "status": "modified",
    "additions": 15,
    "deletions": 4,
    "changes": 19,
    "blob_url": "https://github.com/apache/fineract-cn-mobile/blob/0b1af662117882933f4e919daff7adf57297daa4/app/src/main/res/layout/fragment_group_list.xml",
    "raw_url": "https://github.com/apache/fineract-cn-mobile/raw/0b1af662117882933f4e919daff7adf57297daa4/app/src/main/res/layout/fragment_group_list.xml",
    "contents_url": "https://api.github.com/repos/apache/fineract-cn-mobile/contents/app/src/main/res/layout/fragment_group_list.xml?ref=0b1af662117882933f4e919daff7adf57297daa4",
    "patch": "@@ -5,10 +5,21 @@\n     android:layout_width=\"match_parent\"\n     android:layout_height=\"match_parent\">\n \n-    <androidx.recyclerview.widget.RecyclerView\n-        android:id=\"@+id/rvGroups\"\n-        android:layout_width=\"match_parent\"\n-        android:layout_height=\"match_parent\" />\n+    <androidx.swiperefreshlayout.widget.SwipeRefreshLayout\n+        android:id=\"@+id/swipeContainer\"\n+        android:layout_height=\"match_parent\"\n+        android:layout_width=\"match_parent\">\n+\n+        <androidx.recyclerview.widget.RecyclerView\n+            android:id=\"@+id/rvGroups\"\n+            android:layout_centerHorizontal=\"true\"\n+            android:layout_height=\"0dp\"\n+            android:layout_marginBottom=\"@dimen/layout_padding_30dp\"\n+            android:layout_weight=\"1\"\n+            android:layout_width=\"wrap_content\"\n+            android:scrollbars=\"vertical\" />\n+\n+    </androidx.swiperefreshlayout.widget.SwipeRefreshLayout>\n \n     <com.google.android.material.floatingactionbutton.FloatingActionButton\n         android:id=\"@+id/fabAddGroup\""
  }
]
