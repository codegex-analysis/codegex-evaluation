[
  {
    "sha": "dee4365b780ccf747b305f7ce95d71b773214aa6",
    "filename": "app/src/main/java/org/apache/fineract/ui/online/customers/customerprofile/CustomerProfileActivity.java",
    "status": "modified",
    "additions": 15,
    "deletions": 2,
    "changes": 17,
    "blob_url": "https://github.com/apache/fineract-cn-mobile/blob/0bc2c475c8671c71cf68dee8ab44a0a8d66e1818/app/src/main/java/org/apache/fineract/ui/online/customers/customerprofile/CustomerProfileActivity.java",
    "raw_url": "https://github.com/apache/fineract-cn-mobile/raw/0bc2c475c8671c71cf68dee8ab44a0a8d66e1818/app/src/main/java/org/apache/fineract/ui/online/customers/customerprofile/CustomerProfileActivity.java",
    "contents_url": "https://api.github.com/repos/apache/fineract-cn-mobile/contents/app/src/main/java/org/apache/fineract/ui/online/customers/customerprofile/CustomerProfileActivity.java?ref=0bc2c475c8671c71cf68dee8ab44a0a8d66e1818",
    "patch": "@@ -25,6 +25,7 @@\n import org.apache.fineract.ui.base.Toaster;\n import org.apache.fineract.ui.online.customers.customerprofile.editcustomerprofilebottomsheet\n         .EditCustomerProfileBottomSheet;\n+import org.apache.fineract.ui.online.customers.customerprofile.editcustomerprofilebottomsheet.EditCustomerProfileContract;\n import org.apache.fineract.ui.refreshcallback.RefreshProfileImage;\n import org.apache.fineract.utils.CheckSelfPermissionAndRequest;\n import org.apache.fineract.utils.ConstantKeys;\n@@ -51,6 +52,8 @@\n \n     private String customerIdentifier;\n \n+    EditCustomerProfileContract.View editProfileListener;\n+\n     @Override\n     protected void onCreate(Bundle savedInstanceState) {\n         super.onCreate(savedInstanceState);\n@@ -83,6 +86,7 @@ public boolean onOptionsItemSelected(MenuItem item) {\n                 profileBottomSheet.setRefreshProfileImage(this);\n                 profileBottomSheet.show(getSupportFragmentManager(),\n                         getString(R.string.customer_image));\n+                setEditProfileListener(profileBottomSheet);\n                 return true;\n             case R.id.menu_customer_profile_share:\n                 checkCameraPermission();\n@@ -92,6 +96,10 @@ public boolean onOptionsItemSelected(MenuItem item) {\n         }\n     }\n \n+    public void setEditProfileListener(EditCustomerProfileContract.View editProfileListener) {\n+        this.editProfileListener = editProfileListener;\n+    }\n+\n     public void shareImage() {\n         Uri bitmapUri = getImageUri(this, getBitmapFromView(ivCustomerProfile));\n         Intent shareIntent = new Intent(Intent.ACTION_SEND);\n@@ -156,15 +164,20 @@ public void loadCustomerPortrait() {\n     public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions,\n                                            @NonNull int[] grantResults) {\n         switch (requestCode) {\n-            case ConstantKeys.PERMISSIONS_REQUEST_CAMERA: {\n+            case ConstantKeys.PERMISSIONS_REQUEST_CAMERA:\n                 if (grantResults.length > 0\n                         && grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n                     shareImage();\n                 } else {\n                     Toaster.show(findViewById(android.R.id.content),\n                             getString(R.string.permission_denied_write));\n                 }\n-            }\n+                break;\n+            case ConstantKeys.PERMISSION_REQUEST_ALL:\n+            case ConstantKeys.PERMISSION_REQUEST_READ_EXTERNAL_STORAGE:\n+                editProfileListener.requestedPermissionResult(requestCode,\n+                        permissions, grantResults);\n+                break;\n         }\n     }\n "
  },
  {
    "sha": "e5e57f9da55cb9fe364f5161f27f59987976ca18",
    "filename": "app/src/main/java/org/apache/fineract/ui/online/customers/customerprofile/editcustomerprofilebottomsheet/EditCustomerProfileBottomSheet.java",
    "status": "modified",
    "additions": 26,
    "deletions": 26,
    "changes": 52,
    "blob_url": "https://github.com/apache/fineract-cn-mobile/blob/0bc2c475c8671c71cf68dee8ab44a0a8d66e1818/app/src/main/java/org/apache/fineract/ui/online/customers/customerprofile/editcustomerprofilebottomsheet/EditCustomerProfileBottomSheet.java",
    "raw_url": "https://github.com/apache/fineract-cn-mobile/raw/0bc2c475c8671c71cf68dee8ab44a0a8d66e1818/app/src/main/java/org/apache/fineract/ui/online/customers/customerprofile/editcustomerprofilebottomsheet/EditCustomerProfileBottomSheet.java",
    "contents_url": "https://api.github.com/repos/apache/fineract-cn-mobile/contents/app/src/main/java/org/apache/fineract/ui/online/customers/customerprofile/editcustomerprofilebottomsheet/EditCustomerProfileBottomSheet.java?ref=0bc2c475c8671c71cf68dee8ab44a0a8d66e1818",
    "patch": "@@ -117,6 +117,32 @@ public Dialog onCreateDialog(Bundle savedInstanceState) {\n         return dialog;\n     }\n \n+    @Override\n+    public void requestedPermissionResult(int requestCode, @NonNull String[] permissions,\n+                                          @NonNull int[] grantResults) {\n+        switch (requestCode) {\n+            case ConstantKeys.PERMISSION_REQUEST_ALL:\n+                if (grantResults.length > 0\n+                        && grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n+                    openCamera();\n+                } else {\n+                    String permissionDeniedMessage = getString(R.string.permission_denied_write) +\n+                            getString(R.string.permission_denied_camera);\n+                    Toaster.show(rootView, permissionDeniedMessage);\n+                }\n+                break;\n+\n+            case ConstantKeys.PERMISSION_REQUEST_READ_EXTERNAL_STORAGE:\n+                if (grantResults.length > 0\n+                        && grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n+                    viewGallery();\n+                } else {\n+                    Toaster.show(rootView, getString(R.string.permission_denied_read));\n+                }\n+                break;\n+        }\n+    }\n+\n     @Override\n     public void showUserInterface() {\n         llCamera.setOnClickListener(this);\n@@ -252,32 +278,6 @@ public void showMessage(String message) {\n         Toaster.show(rootView, message);\n     }\n \n-    @Override\n-    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions,\n-            @NonNull int[] grantResults) {\n-        switch (requestCode) {\n-            case ConstantKeys.PERMISSION_REQUEST_ALL:\n-                if (grantResults.length > 0\n-                        && grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n-                    openCamera();\n-                } else {\n-                    String permissionDeniedMessage = getString(R.string.permission_denied_write) +\n-                            getString(R.string.permission_denied_camera);\n-                    Toaster.show(rootView, permissionDeniedMessage);\n-                }\n-                break;\n-\n-            case ConstantKeys.PERMISSION_REQUEST_READ_EXTERNAL_STORAGE:\n-                if (grantResults.length > 0\n-                        && grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n-                    viewGallery();\n-                } else {\n-                    Toaster.show(rootView, getString(R.string.permission_denied_read));\n-                }\n-                break;\n-        }\n-    }\n-\n     @OnClick(R.id.btn_cancel)\n     void onCancel() {\n         dismiss();"
  },
  {
    "sha": "651550519a578462a8b30f811f5e6ef4bc980858",
    "filename": "app/src/main/java/org/apache/fineract/ui/online/customers/customerprofile/editcustomerprofilebottomsheet/EditCustomerProfileContract.java",
    "status": "modified",
    "additions": 5,
    "deletions": 0,
    "changes": 5,
    "blob_url": "https://github.com/apache/fineract-cn-mobile/blob/0bc2c475c8671c71cf68dee8ab44a0a8d66e1818/app/src/main/java/org/apache/fineract/ui/online/customers/customerprofile/editcustomerprofilebottomsheet/EditCustomerProfileContract.java",
    "raw_url": "https://github.com/apache/fineract-cn-mobile/raw/0bc2c475c8671c71cf68dee8ab44a0a8d66e1818/app/src/main/java/org/apache/fineract/ui/online/customers/customerprofile/editcustomerprofilebottomsheet/EditCustomerProfileContract.java",
    "contents_url": "https://api.github.com/repos/apache/fineract-cn-mobile/contents/app/src/main/java/org/apache/fineract/ui/online/customers/customerprofile/editcustomerprofilebottomsheet/EditCustomerProfileContract.java?ref=0bc2c475c8671c71cf68dee8ab44a0a8d66e1818",
    "patch": "@@ -1,5 +1,7 @@\n package org.apache.fineract.ui.online.customers.customerprofile.editcustomerprofilebottomsheet;\n \n+import androidx.annotation.NonNull;\n+\n import org.apache.fineract.ui.base.MvpView;\n import org.apache.fineract.ui.refreshcallback.RefreshProfileImage;\n \n@@ -13,6 +15,9 @@\n \n     interface View extends MvpView {\n \n+        void requestedPermissionResult(int requestCode, @NonNull String[] permissions,\n+                                       @NonNull int[] grantResults);\n+\n         void showUserInterface();\n \n         void setCustomerIdentifier(String customerIdentifier);"
  }
]
