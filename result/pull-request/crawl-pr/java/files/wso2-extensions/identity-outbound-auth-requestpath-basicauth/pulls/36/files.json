[
  {
    "sha": "2238f5b856cb105bc4e45a86d370b26e940aff94",
    "filename": "components/org.wso2.carbon.identity.application.authenticator.requestpath.basicauth/pom.xml",
    "status": "modified",
    "additions": 8,
    "deletions": 1,
    "changes": 9,
    "blob_url": "https://github.com/wso2-extensions/identity-outbound-auth-requestpath-basicauth/blob/edc55f7be18860150a429f3d0624bd8f734d2ab4/components/org.wso2.carbon.identity.application.authenticator.requestpath.basicauth/pom.xml",
    "raw_url": "https://github.com/wso2-extensions/identity-outbound-auth-requestpath-basicauth/raw/edc55f7be18860150a429f3d0624bd8f734d2ab4/components/org.wso2.carbon.identity.application.authenticator.requestpath.basicauth/pom.xml",
    "contents_url": "https://api.github.com/repos/wso2-extensions/identity-outbound-auth-requestpath-basicauth/contents/components/org.wso2.carbon.identity.application.authenticator.requestpath.basicauth/pom.xml?ref=edc55f7be18860150a429f3d0624bd8f734d2ab4",
    "patch": "@@ -95,6 +95,10 @@\n             <groupId>org.wso2.carbon.identity.framework</groupId>\n             <artifactId>org.wso2.carbon.identity.testutil</artifactId>\n         </dependency>\n+        <dependency>\n+            <groupId>org.wso2.carbon.identity.framework</groupId>\n+            <artifactId>org.wso2.carbon.identity.multi.attribute.login.mgt</artifactId>\n+        </dependency>\n     </dependencies>\n     <build>\n         <plugins>\n@@ -128,7 +132,10 @@\n                             org.wso2.carbon.user.api; version=\"${carbon.user.api.imp.pkg.version.range}\",\n                             org.wso2.carbon.user.core; version=\"${carbon.kernel.package.import.version.range}\",\n                             org.wso2.carbon.user.core.service; version=\"${carbon.kernel.package.import.version.range}\",\n-                            org.wso2.carbon.utils.multitenancy; version=\"${carbon.kernel.package.import.version.range}\"\n+                            org.wso2.carbon.utils.multitenancy; version=\"${carbon.kernel.package.import.version.range}\",\n+                            org.wso2.carbon.identity.multi.attribute.login.mgt.*;\n+                            version=\"${carbon.identity.framework.imp.pkg.version.range}\",\n+                            org.wso2.carbon.user.core.*; version=\"${carbon.kernel.package.import.version.range}\",\n                         </Import-Package>\n                         <Export-Package>\n                             !org.wso2.carbon.identity.application.authenticator.requestpath.basicauth.internal,"
  },
  {
    "sha": "66a5ea772739fb514cf7dc52316b5a639f8f16e9",
    "filename": "components/org.wso2.carbon.identity.application.authenticator.requestpath.basicauth/src/main/java/org/wso2/carbon/identity/application/authenticator/requestpath/basicauth/BasicAuthRequestPathAuthenticator.java",
    "status": "modified",
    "additions": 9,
    "deletions": 2,
    "changes": 11,
    "blob_url": "https://github.com/wso2-extensions/identity-outbound-auth-requestpath-basicauth/blob/edc55f7be18860150a429f3d0624bd8f734d2ab4/components/org.wso2.carbon.identity.application.authenticator.requestpath.basicauth/src/main/java/org/wso2/carbon/identity/application/authenticator/requestpath/basicauth/BasicAuthRequestPathAuthenticator.java",
    "raw_url": "https://github.com/wso2-extensions/identity-outbound-auth-requestpath-basicauth/raw/edc55f7be18860150a429f3d0624bd8f734d2ab4/components/org.wso2.carbon.identity.application.authenticator.requestpath.basicauth/src/main/java/org/wso2/carbon/identity/application/authenticator/requestpath/basicauth/BasicAuthRequestPathAuthenticator.java",
    "contents_url": "https://api.github.com/repos/wso2-extensions/identity-outbound-auth-requestpath-basicauth/contents/components/org.wso2.carbon.identity.application.authenticator.requestpath.basicauth/src/main/java/org/wso2/carbon/identity/application/authenticator/requestpath/basicauth/BasicAuthRequestPathAuthenticator.java?ref=edc55f7be18860150a429f3d0624bd8f734d2ab4",
    "patch": "@@ -32,7 +32,9 @@\n import org.wso2.carbon.identity.application.common.model.User;\n import org.wso2.carbon.identity.base.IdentityRuntimeException;\n import org.wso2.carbon.identity.core.util.IdentityTenantUtil;\n+import org.wso2.carbon.identity.multi.attribute.login.mgt.ResolvedUserResult;\n import org.wso2.carbon.user.core.UserStoreManager;\n+import org.wso2.carbon.user.core.util.UserCoreUtil;\n import org.wso2.carbon.utils.multitenancy.MultitenantUtils;\n \n import javax.servlet.http.HttpServletRequest;\n@@ -92,7 +94,13 @@ protected void processAuthenticationResponse(HttpServletRequest request,\n             throw new AuthenticationFailedException(\"username and password cannot be empty\", User.getUserFromUserName\n                     (username));\n         }\n-\n+        String tenantDomain = MultitenantUtils.getTenantDomain(username);\n+        ResolvedUserResult resolvedUserResult = FrameworkUtils.processMultiAttributeLoginIdentification(\n+                MultitenantUtils.getTenantAwareUsername(username), tenantDomain);\n+        if (resolvedUserResult != null && ResolvedUserResult.UserResolvedStatus.SUCCESS.\n+                equals(resolvedUserResult.getResolvedStatus())) {\n+            username = UserCoreUtil.addTenantDomainToEntry(resolvedUserResult.getUser().getUsername() , tenantDomain);\n+        }\n         try {\n             int tenantId = IdentityTenantUtil.getTenantIdOfUser(username);\n             UserStoreManager userStoreManager = (UserStoreManager) BasicAuthRequestPathAuthenticatorServiceComponent.\n@@ -107,7 +115,6 @@ protected void processAuthenticationResponse(HttpServletRequest request,\n             }\n \n             Map<String, Object> authProperties = context.getProperties();\n-            String tenantDomain = MultitenantUtils.getTenantDomain(username);\n \n             if (authProperties == null) {\n                 authProperties = new HashMap<String, Object>();"
  },
  {
    "sha": "2c9c8a156c9ea9f2246bf3db0ba1c71d2b0d34d0",
    "filename": "components/org.wso2.carbon.identity.application.authenticator.requestpath.basicauth/src/test/java/org/wso2/carbon/identity/application/authenticator/requestpath/basicauth/BasicAuthRequestPathAuthenticatorTest.java",
    "status": "modified",
    "additions": 8,
    "deletions": 1,
    "changes": 9,
    "blob_url": "https://github.com/wso2-extensions/identity-outbound-auth-requestpath-basicauth/blob/edc55f7be18860150a429f3d0624bd8f734d2ab4/components/org.wso2.carbon.identity.application.authenticator.requestpath.basicauth/src/test/java/org/wso2/carbon/identity/application/authenticator/requestpath/basicauth/BasicAuthRequestPathAuthenticatorTest.java",
    "raw_url": "https://github.com/wso2-extensions/identity-outbound-auth-requestpath-basicauth/raw/edc55f7be18860150a429f3d0624bd8f734d2ab4/components/org.wso2.carbon.identity.application.authenticator.requestpath.basicauth/src/test/java/org/wso2/carbon/identity/application/authenticator/requestpath/basicauth/BasicAuthRequestPathAuthenticatorTest.java",
    "contents_url": "https://api.github.com/repos/wso2-extensions/identity-outbound-auth-requestpath-basicauth/contents/components/org.wso2.carbon.identity.application.authenticator.requestpath.basicauth/src/test/java/org/wso2/carbon/identity/application/authenticator/requestpath/basicauth/BasicAuthRequestPathAuthenticatorTest.java?ref=edc55f7be18860150a429f3d0624bd8f734d2ab4",
    "patch": "@@ -49,6 +49,7 @@\n import org.wso2.carbon.identity.application.common.model.User;\n import org.wso2.carbon.identity.core.util.IdentityTenantUtil;\n import org.wso2.carbon.identity.core.util.IdentityUtil;\n+import org.wso2.carbon.identity.multi.attribute.login.mgt.ResolvedUserResult;\n import org.wso2.carbon.identity.testutil.powermock.PowerMockIdentityBaseTest;\n import org.wso2.carbon.user.api.UserRealm;\n import org.wso2.carbon.user.api.UserStoreException;\n@@ -171,6 +172,10 @@ public void processAuthenticationResponseTestCaseInvalidCredentialsException() t\n         when(mockRealmService.getTenantUserRealm(dummyTenantId)).thenReturn(mockUserRealm);\n         when(mockUserRealm.getUserStoreManager()).thenReturn(mockUserStoreManager);\n \n+        mockStatic(FrameworkUtils.class);\n+        ResolvedUserResult resolvedUserResult = new ResolvedUserResult(ResolvedUserResult.UserResolvedStatus.FAIL);\n+        when(FrameworkUtils.processMultiAttributeLoginIdentification(dummyUserName,\n+                MultitenantUtils.getTenantDomain(dummyUserName))).thenReturn(resolvedUserResult);\n         mockStatic(User.class);\n         mockStatic(MultitenantUtils.class);\n         when(User.getUserFromUserName(dummyUserName)).thenReturn(new User());\n@@ -220,7 +225,9 @@ public void processAuthenticationResponseTestCaseAuthProperties(Object authPropM\n \n         mockStatic(FrameworkUtils.class);\n         when(FrameworkUtils.prependUserStoreDomainToName(dummyUserName)).thenReturn(dummyUserName);\n-\n+        ResolvedUserResult resolvedUserResult = new ResolvedUserResult(ResolvedUserResult.UserResolvedStatus.FAIL);\n+        when(FrameworkUtils.processMultiAttributeLoginIdentification(dummyUserName,\n+                MultitenantUtils.getTenantDomain(dummyUserName))).thenReturn(resolvedUserResult);\n         doAnswer(new Answer<Object>() {\n             @Override\n             public Object answer(InvocationOnMock invocation) throws Throwable {"
  },
  {
    "sha": "242be8059ab7fc548ab0e12da4e79d5da065d227",
    "filename": "pom.xml",
    "status": "modified",
    "additions": 6,
    "deletions": 1,
    "changes": 7,
    "blob_url": "https://github.com/wso2-extensions/identity-outbound-auth-requestpath-basicauth/blob/edc55f7be18860150a429f3d0624bd8f734d2ab4/pom.xml",
    "raw_url": "https://github.com/wso2-extensions/identity-outbound-auth-requestpath-basicauth/raw/edc55f7be18860150a429f3d0624bd8f734d2ab4/pom.xml",
    "contents_url": "https://api.github.com/repos/wso2-extensions/identity-outbound-auth-requestpath-basicauth/contents/pom.xml?ref=edc55f7be18860150a429f3d0624bd8f734d2ab4",
    "patch": "@@ -173,6 +173,11 @@\n                 <artifactId>org.wso2.carbon.identity.application.common</artifactId>\n                 <version>${carbon.identity.framework.version}</version>\n             </dependency>\n+            <dependency>\n+                <groupId>org.wso2.carbon.identity.framework</groupId>\n+                <artifactId>org.wso2.carbon.identity.multi.attribute.login.mgt</artifactId>\n+                <version>${carbon.identity.framework.version}</version>\n+            </dependency>\n             <dependency>\n                 <groupId>org.jacoco</groupId>\n                 <artifactId>org.jacoco.agent</artifactId>\n@@ -305,7 +310,7 @@\n         <carbon.kernel.version>4.6.0</carbon.kernel.version>\n         <carbon.kernel.feature.version>4.6.0</carbon.kernel.feature.version>\n \n-        <carbon.identity.framework.version>5.14.67</carbon.identity.framework.version>\n+        <carbon.identity.framework.version>5.19.45</carbon.identity.framework.version>\n         <imp.pkg.version.javax.servlet>[2.6.0, 3.0.0)</imp.pkg.version.javax.servlet>\n         <axiom.osgi.version.range>[1.2.11, 2.0.0)</axiom.osgi.version.range>\n         <commons-logging.osgi.version.range>[1.2,2.0)</commons-logging.osgi.version.range>"
  }
]
