[
  {
    "sha": "61091d4b18540fe899a6fc521bc88321595314b3",
    "filename": "man/signal-cli-dbus.5.adoc",
    "status": "added",
    "additions": 205,
    "deletions": 0,
    "changes": 205,
    "blob_url": "https://github.com/AsamK/signal-cli/blob/139385c121885b9f5555bfebf7b8d63a4242ef58/man/signal-cli-dbus.5.adoc",
    "raw_url": "https://github.com/AsamK/signal-cli/raw/139385c121885b9f5555bfebf7b8d63a4242ef58/man/signal-cli-dbus.5.adoc",
    "contents_url": "https://api.github.com/repos/AsamK/signal-cli/contents/man/signal-cli-dbus.5.adoc?ref=139385c121885b9f5555bfebf7b8d63a4242ef58",
    "patch": "@@ -0,0 +1,205 @@\n+/////\n+vim:set ts=4 sw=4 tw=82 noet:\n+/////\n+:quotes.~:\n+\n+= signal-cli-dbus (5)\n+\n+== Name\n+\n+DBus API for signal-cli - A commandline and dbus interface for the Signal messenger\n+\n+== Synopsis\n+\n+*signal-cli* [--config CONFIG] daemon --dbus-system\n+\n+*dbus-send* --system --type=method_call --print-reply --dest=\"org.asamk.Signal\" /org/asamk/Signal org.asamk.Signal.<method> [string:<string argument>] [array:<type>:<array argument>]\n+\n+\n+== Description\n+\n+See signal-cli (1) for details on the application.\n+\n+This documentation handles the supported methods when running signal-cli as a DBus daemon.\n+\n+The method are described as follows:\n+\n+method(arg1<type>, arg2<type>, ...) -> return<type>\n+\n+Where <type> is according to DBus specification:\n+\n+* <s>   : String\n+* <ay>  : Byte Array\n+* <aay> : Array of Byte Arrays\n+* <as>  : String Array\n+* <b>   : Boolean (0|1)\n+* <x>   : Signed 64 bit integer\n+* <>    : no return value\n+\n+Exceptions are the names of the Java Exceptions returned in the body field. They typically contain an additional message with details. All Exceptions begin with \"org.asamk.Signal.Error.\" which is omitted here for better readability.\n+\n+Phone numbers always have the format +<countrycode><regional number>\n+\n+== Methods\n+\n+updateGroup(groupId<ay>, newName<s>, members<as>, avatar<s>) -> groupId<ay>::\n+* groupId  : Byte array representing the internal group identifier\n+* newName  : New name of group (empty if unchanged)\n+* members  : String array of new members to be invited to group\n+* avatar   : Filename of avatar picture to be set for group (empty if none)\n+\n+Exceptions: AttachmentInvalid, Failure, InvalidNumber, GroupNotFound\n+\n+updateProfile(newName<s>, about <s>, aboutEmoji <s>, avatar<s>, remove<b>) -> <>::\n+* newName     : New name for your own profile (empty if unchanged)\n+* about       : About message for profile (empty if unchanged)\n+* aboutEmoji  : Emoji for profile (empty if unchanged)\n+* avatar      : Filename of avatar picutre for profile (empty if unchanged)\n+* remove      : Set to 1 if the existing avatar picture should be removed\n+\n+Exceptions: Failure\n+\n+setContactBlocked(number<s>, block<b>) -> <>::\n+* number  : Phone number affected by method\n+* block   : 0=remove block , 1=blocked\n+\n+Messages from blocked numbers will no longer be forwarded via DBus.\n+\n+Exceptions: InvalidNumber\n+\n+setGroupBlocked(groupId<ay>, block<b>) -> <>::\n+* groupId : Byte array representing the internal group identifier\n+* block   : 0=remove block , 1=blocked\n+\n+Messages from blocked groups will no longer be forwarded via DBus.\n+\n+Exceptions: GroupNotFound\n+\n+joinGroup(inviteURI<s>) -> <>::\n+* inviteURI : String starting with https://signal.group which is generated when you share a group link via Signal App\n+\n+Exceptions: Failure\n+\n+quitGroup(groupId<ay>) -> <>::\n+* groupId : Byte array representing the internal group identifier\n+\n+Note that quitting a group will not remove the group from the getGroupIds command, but set it inactive which can be tested with isMember()\n+\n+Exceptions: GroupNotFound, Failure\n+\n+isMember(groupId<ay>) -> active<b>::\n+* groupId : Byte array representing the internal group identifier\n+\n+Note that this method not raise an Exception for a non-existing/unknown group but will simply return 0 (false)\n+\n+sendEndSessionMessage(recipients<as>) -> <>::\n+* recipients : Array of phone numbers \n+\n+Exceptions: Failure, InvalidNumber, UntrustedIdentity\n+\n+sendGroupMessage(message<s>, attachments<as>, groupId<a>) -> timestamp<x>::\n+* message     : Text to send (can be UTF8)\n+* attachments : String array of filenames to send as attachments (passed as filename, so need to be readable by the user signal-cli is running under)\n+* groupId     : Byte array representing the internal group identifier\n+* timestamp   : Can be used to identify the corresponding signal reply\n+\n+Exceptions: GroupNotFound, Failure, AttachmentInvalid\n+\n+sendNoteToSelfMessage(message<s>, attachments<as>) -> timestamp<x>::\n+* message     : Text to send (can be UTF8)\n+* attachments : String array of filenames to send as attachments (passed as filename, so need to be readable by the user signal-cli is running under)\n+* timestamp   : Can be used to identify the corresponding signal reply\n+\n+Exceptions: Failure, AttachmentInvalid\n+\n+sendMessage(message<s>, attachments<as>, recipient<s) -> timestamp<x>::\n+sendMessage(message<s>, attachments<as>, recipients<as>) -> timestamp<x>::\n+* message     : Text to send (can be UTF8)\n+* attachments : String array of filenames to send as attachments (passed as filename, so need to be readable by the user signal-cli is running under)\n+* recipient   : Phone number of a single recipient\n+* recipients  : Array of phone numbers \n+* timestamp   : Can be used to identify the corresponding signal reply\n+\n+Depending on the type of the recipient field this sends a message to one or multiple recipients.\n+\n+Expections: AttachmentInvalid, Failure, InvalidNumber, UntrustedIdentity\n+\n+getContactName(number<s>) -> name<s>::\n+* number  : Phone number\n+* name    : Name set in contacts (setContacts) or if not set the profile name \n+\n+setContactName(number<s>,name<>) -> <>::\n+* number  : Phone number\n+* name    : Name to be set in contacts (in local storage with signal-cli)\n+\n+getGroupIds() -> groupList<aay>::\n+groupList : Array of Byte arrays representing the internal group identifiers\n+\n+All groups known are returned, regardsless of their active or blocked status. To query that use isMember() and isGroupBlocked()\n+\n+getGroupName(groupId<ay>) -> groupName<s>::\n+groupName : The display name of the group \n+groupId   : Byte array representing the internal group identifier\n+\n+Exceptions: None, if the group name is not found an empty string is returned\n+\n+getGroupMembers(groupId<ay>) -> members<as>::\n+members   : String array with the phone numbers of all active members of a group\n+groupId   : Byte array representing the internal group identifier\n+\n+Exceptions: None, if the group name is not found an empty array is returned\n+\n+listNumbers() -> numbers<as>::\n+numbers : String array of all known numbers\n+\n+This is a concatenated list of all defined contacts as well of profiles known (e.g. peer group members or sender of received messages)\n+\n+getContactNumber(name<s>) -> numbers<as>::\n+* numbers : Array of phone number\n+* name    : Contact or profile name (\"firstname lastname\")\n+\n+Searches contacts and know profiles for a given name and returns the list of all known names. May result in e.g. two entries if a contact and profile name is set.\n+\n+isContactBlocked(number<s>) -> state<b>::\n+* number  : Phone number\n+* state   : 1=blocked, 0=not blocked\n+\n+Exceptions: None, for unknown numbers 0 (false) is returned\n+\n+isGroupBlocked(groupId<ay>) -> state<b>::\n+* groupId : Byte array representing the internal group identifier\n+* state   : 1=blocked, 0=not blocked\n+\n+Exceptions: None, for unknown groups 0 (false) is returned\n+\n+version() -> version<s>::\n+* version : Version string of signal-cli\n+\n+isRegistred -> result<b>::\n+* result : Currently always returns 1=true\n+\n+== Signals\n+\n+SyncMessageReceived (timestamp<x>, sender<s>, destination<s>, groupId<ay>,message<s>, attachments<as>)::\n+The sync message is received when the user sends a message from a linked device.\n+\n+ReceiptReceived (timestamp<x>, sender<s>)::\n+* timestamp : Integer value that can be used to associate this e.g. with a sendMessage()\n+* sender    : Phone number of the sender\n+\n+This signal is sent by each recipient (e.g. each group member) after the message was successfully delivered to the device\n+\n+MessageReceived(timestamp<x>, sender<s>, groupId<ay>, message<s>, attachments<as>)::\n+* timestamp   : Integer value that is used by the system to send a ReceiptReceived reply\n+* sender      : Phone number of the sender\n+* groupId     : Byte array representing the internal group identifier (empty when private message)\n+* message     : Message text\n+* attachments : String array of filenames for the attachments. These files are located in the signal-cli storage and the current user needs to have read access there\n+\n+This signal is received whenever we get a private message or a message is posted in a group we are an active member\n+\n+== Authors\n+\n+Maintained by AsamK <asamk@gmx.de>, who is assisted by other open source contributors.\n+For more information about signal-cli development, see\n+<https://github.com/AsamK/signal-cli>."
  }
]
