[
  {
    "sha": "0ec026ff6edb085a74f32bbafc764485c468f422",
    "filename": ".github/ISSUE_TEMPLATE/------.md",
    "status": "removed",
    "additions": 0,
    "deletions": 10,
    "changes": 10,
    "blob_url": "https://github.com/Dimlitter/BILIBILI-HELPER/blob/989b729d275a0b27c4dd521730b31cd56561c962/.github/ISSUE_TEMPLATE/------.md",
    "raw_url": "https://github.com/Dimlitter/BILIBILI-HELPER/raw/989b729d275a0b27c4dd521730b31cd56561c962/.github/ISSUE_TEMPLATE/------.md",
    "contents_url": "https://api.github.com/repos/Dimlitter/BILIBILI-HELPER/contents/.github/ISSUE_TEMPLATE/------.md?ref=989b729d275a0b27c4dd521730b31cd56561c962",
    "patch": "@@ -1,10 +0,0 @@\n----\n-name: 其他问题报告\n-about: Describe this issue template's purpose here.\n-title: ''\n-labels: ''\n-assignees: ''\n-\n----\n-\n-"
  },
  {
    "sha": "f4cf1ce5a348fc4bc17cce97699fdae5f1d140e7",
    "filename": ".github/ISSUE_TEMPLATE/bug--.md",
    "status": "removed",
    "additions": 0,
    "deletions": 29,
    "changes": 29,
    "blob_url": "https://github.com/Dimlitter/BILIBILI-HELPER/blob/989b729d275a0b27c4dd521730b31cd56561c962/.github/ISSUE_TEMPLATE/bug--.md",
    "raw_url": "https://github.com/Dimlitter/BILIBILI-HELPER/raw/989b729d275a0b27c4dd521730b31cd56561c962/.github/ISSUE_TEMPLATE/bug--.md",
    "contents_url": "https://api.github.com/repos/Dimlitter/BILIBILI-HELPER/contents/.github/ISSUE_TEMPLATE/bug--.md?ref=989b729d275a0b27c4dd521730b31cd56561c962",
    "patch": "@@ -1,29 +0,0 @@\n----\n-name: Bug报告\n-about: Create a report to help us improve\n-title: ''\n-labels: ''\n-assignees: ''\n-\n----\n-\n----\n-name: \"[Bug Report]BUG反馈\"\n-about: 将你所遇到的BUG反馈给我们\n-title: \"[BUG]\"\n-labels: ''\n-assignees: ''\n-\n----\n-\n-### 错误描述\n-> 你所遇到的错误是怎么样的?\n-\n-### 错误提示和日志内容\n-> 最好提供错误格式和日志，如果不熟悉编程语言，请提供完整的日志。\n-\n-### 使用的版本信息\n-> 提供出现这个问题的程序版本号，或着git hash\n-\n-### 使用环境\n-> 是在什么环境下出现的这个问题，Actions，Linux还是windows或者其他"
  },
  {
    "sha": "f4cf1ce5a348fc4bc17cce97699fdae5f1d140e7",
    "filename": ".github/ISSUE_TEMPLATE/bug_report.md",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/Dimlitter/BILIBILI-HELPER/blob/407eea783c780fd69d7f84d54745d3297770a7ff/.github/ISSUE_TEMPLATE/bug_report.md",
    "raw_url": "https://github.com/Dimlitter/BILIBILI-HELPER/raw/407eea783c780fd69d7f84d54745d3297770a7ff/.github/ISSUE_TEMPLATE/bug_report.md",
    "contents_url": "https://api.github.com/repos/Dimlitter/BILIBILI-HELPER/contents/.github/ISSUE_TEMPLATE/bug_report.md?ref=407eea783c780fd69d7f84d54745d3297770a7ff",
    "patch": "@@ -1,5 +1,5 @@\n ---\n-name: Bug report\n+name: Bug报告\n about: Create a report to help us improve\n title: ''\n labels: ''"
  },
  {
    "sha": "48d5f81fa422964dd1eea360efdecfc5dc9a6c87",
    "filename": ".github/ISSUE_TEMPLATE/custom.md",
    "status": "removed",
    "additions": 0,
    "deletions": 10,
    "changes": 10,
    "blob_url": "https://github.com/Dimlitter/BILIBILI-HELPER/blob/989b729d275a0b27c4dd521730b31cd56561c962/.github/ISSUE_TEMPLATE/custom.md",
    "raw_url": "https://github.com/Dimlitter/BILIBILI-HELPER/raw/989b729d275a0b27c4dd521730b31cd56561c962/.github/ISSUE_TEMPLATE/custom.md",
    "contents_url": "https://api.github.com/repos/Dimlitter/BILIBILI-HELPER/contents/.github/ISSUE_TEMPLATE/custom.md?ref=989b729d275a0b27c4dd521730b31cd56561c962",
    "patch": "@@ -1,10 +0,0 @@\n----\n-name: Custom issue template\n-about: Describe this issue template's purpose here.\n-title: ''\n-labels: ''\n-assignees: ''\n-\n----\n-\n-"
  },
  {
    "sha": "93124a458eacaf1e81a76fde5a91d646cfe1c9c2",
    "filename": ".github/workflows/auto_task_bilili.yml",
    "status": "modified",
    "additions": 3,
    "deletions": 1,
    "changes": 4,
    "blob_url": "https://github.com/Dimlitter/BILIBILI-HELPER/blob/407eea783c780fd69d7f84d54745d3297770a7ff/.github/workflows/auto_task_bilili.yml",
    "raw_url": "https://github.com/Dimlitter/BILIBILI-HELPER/raw/407eea783c780fd69d7f84d54745d3297770a7ff/.github/workflows/auto_task_bilili.yml",
    "contents_url": "https://api.github.com/repos/Dimlitter/BILIBILI-HELPER/contents/.github/workflows/auto_task_bilili.yml?ref=407eea783c780fd69d7f84d54745d3297770a7ff",
    "patch": "@@ -36,7 +36,9 @@ jobs:\n           DEDEUSERID: ${{ secrets.DEDEUSERID }}\n           SESSDATA: ${{ secrets.SESSDATA }}\n           SERVERPUSHKEY: ${{ secrets.SERVERPUSHKEY }}\n+          TELEGRAMBOTTOKEN: ${{ secrets.TELEGRAMBOTTOKEN }}\n+          TELEGRAMCHATID: ${{ secrets.TELEGRAMCHATID }}\n           TZ: Asia/Shanghai\n           # 时区配置为Asia/Shanghai\n         run:\n-          mvn compile exec:java -Dexec.mainClass=\"top.misec.BiliMain\" -Dexec.args=\"${DEDEUSERID} ${SESSDATA} ${BILI_JCT} ${SERVERPUSHKEY}\"\n+          mvn compile exec:java -Dexec.mainClass=\"top.misec.BiliMain\" -Dexec.args=\"${DEDEUSERID} ${SESSDATA} ${BILI_JCT} ${SERVERPUSHKEY} ${TELEGRAMBOTTOKEN} ${TELEGRAMCHATID}\""
  },
  {
    "sha": "302e5f6637886dd5a1b64e07af4e1d24551c7b87",
    "filename": "README.md",
    "status": "modified",
    "additions": 195,
    "deletions": 125,
    "changes": 320,
    "blob_url": "https://github.com/Dimlitter/BILIBILI-HELPER/blob/407eea783c780fd69d7f84d54745d3297770a7ff/README.md",
    "raw_url": "https://github.com/Dimlitter/BILIBILI-HELPER/raw/407eea783c780fd69d7f84d54745d3297770a7ff/README.md",
    "contents_url": "https://api.github.com/repos/Dimlitter/BILIBILI-HELPER/contents/README.md?ref=407eea783c780fd69d7f84d54745d3297770a7ff",
    "patch": "@@ -8,94 +8,93 @@ BILIBILI-HELPER\n [![GitHub issues](https://img.shields.io/github/issues/JunzhouLiu/BILIBILI-HELPER?style=flat-square)](https://github.com/JunzhouLiu/BILIBILI-HELPER/issues)\n [![GitHub license](https://img.shields.io/github/license/JunzhouLiu/BILIBILI-HELPER?style=flat-square)](https://github.com/JunzhouLiu/BILIBILI-HELPER/blob/main/LICENSE) \n [![GitHub All Releases](https://img.shields.io/github/downloads/JunzhouLiu/BILIBILI-HELPER/total?style=flat-square)](https://github.com/JunzhouLiu/BILIBILI-HELPER/releases)\n+[![Docker Pulls](https://img.shields.io/docker/pulls/superng6/bilibili-helper?style=flat-square)](https://hub.docker.com/r/superng6/bilibili-helper)\n [![GitHub contributors](https://img.shields.io/github/contributors/JunzhouLiu/BILIBILI-HELPER?style=flat-square)](https://github.com/JunzhouLiu/BILIBILI-HELPER/graphs/contributors)\n ![GitHub release (latest SemVer)](https://img.shields.io/github/v/release/JunzhouLiu/BILIBILI-HELPER?style=flat-square)\n+[![FOSSA Status](https://app.fossa.com/api/projects/git%2Bgithub.com%2FJunzhouLiu%2FBILIBILI-HELPER.svg?type=flat-square)](https://app.fossa.com/projects/git%2Bgithub.com%2FJunzhouLiu%2FBILIBILI-HELPER?ref=badge_shield)\n \n </div>\n \n-# 工具简介\n+## 工具简介\n \n-这是一个利用 Linux Crontab , GitHub Action 等方式实现哔哩哔哩（Bilibili）每日任务投币，点赞，分享视频，直播签到，银瓜子兑换硬币，漫画每日签到，简单配置即可每日轻松获取 65 经验值，快来和我一起成为 Lv6 吧~~~~\n+这是一个利用 Linux Crontab , GitHub Action 等方式实现哔哩哔哩（Bilibili）每日任务投币，点赞，分享视频，直播签到，银瓜子兑换硬币，漫画每日签到，简单配置即可每日轻松获取 65 经验值，快来和我一起成为 Lv6 吧\\~\\~\\~\\~\n \n **如果觉得好用，顺手点个 Star 吧 ❤**\n \n **仓库地址：[JunzhouLiu/BILIBILI-HELPER](https://github.com/JunzhouLiu/BILIBILI-HELPER)**\n \n-**本项目不会增加类似于自动转发抽奖，秒杀，下载版权受限视频等侵犯UP主/B站权益的功能，开发这个应用的目的是单纯的技术分享。下游分支开发者/使用者也请不要滥用相关功能。**\n+**B站赛事预测助手已发布，每天自动参与KPL，LPL赛事预测，赚取硬币。**\n \n-**本项目欢迎其他开发者参与贡献，基于本工具的二次开发，使用其他语言重写都没有什么问题，能在技术上给你带来帮助和收获就很好**\n+**仓库地址：[JunzhouLiu/bilibili-match-prediction](https://github.com/JunzhouLiu/bilibili-match-prediction)**\n \n **请不要滥用相关API，让我们一起爱护B站 ❤**\n \n ## 功能列表\n \n * [x] 每天上午 9 点 10 分自动开始任务。*【运行时间可自定义】*\n-* [x] 哔哩哔哩漫画每日自动签到 。\n+* [x] 哔哩哔哩漫画每日自动签到，自动阅读1章节 。\n * [x] 每日自动从热门视频中随机观看 1 个视频，分享一个视频。\n-* [x] 每日从热门视频中选取 5 个进行智能投币 *【如果投币不能获得经验，默认不投币】*\n+* [x] 每日从热门视频中选取 5 个进行智能投币 *【如果投币不能获得经验了，则不会投币】*\n * [x] 投币支持下次一定啦，可自定义每日投币数量。*【如果检测到你已经投过币了，则不会投币】*\n-* [x] 大会员月底使用快到期的 B币券，给自己充电，一点也不会浪费哦，默认开启。*【可配置】*\n-* [x] 大会员月初 1 号自动领取每月 5 张 B币券 和福利。\n+* [x] 大会员月底使用快到期的 B币券，给自己充电，一点也不会浪费哦，默认开启。*【已支持给指定UP充电】*\n+* [x] 大会员月初 1 号自动领取每月 5 张 B 币券和福利。\n * [x] 每日哔哩哔哩直播自动签到，领取签到奖励。*【直播你可以不看，但是奖励咱们一定要领】*\n-* [x] 通过server酱推送执行结果到微信。\n * [x] Linux用户支持自定义配置了。\n * [x] 投币策略更新可配置投币喜好。*【可配置优先给关注的up投币】*\n-  \n-[点此查看更新日志](https://github.com/JunzhouLiu/BILIBILI-HELPER/blob/main/SECURITY.md)\n+* [x] 自动送出即将过期的礼物。 *【默认开启，未更新到新版本的用户默认关闭】*\n+* [x] 支持推送执行结果到微信，钉钉，飞书等\n \n [点击快速开始使用](#使用说明)\n \n [点击快速查看自定义功能配置](#自定义功能配置)\n \n # 目录\n \n-- [工具简介](#工具简介)\n-  - [功能列表](#功能列表)\n - [目录](#目录)\n-- [使用说明](#使用说明)\n-  - [一、Actions 方式](#一actions-方式)\n-    - [查看 Actions 运行日志](#查看-actions-运行日志)\n-  - [二、使用 Docker](#二使用-docker)\n-  - [三、使用 Linux Crontab 方式](#三使用-linux-crontab-方式)\n-    - [运行效果](#运行效果)\n-  - [四、使用 Windows10](#四使用-windows10)\n-  - [自定义功能配置](#自定义功能配置)\n-- [微信订阅通知](#微信订阅通知)\n-  - [订阅执行结果](#订阅执行结果)\n-- [快速更新](#快速更新)\n-  - [使用 Github Actions 自动同步源仓库代码](#使用-github-actions-自动同步源仓库代码)\n-  - [手动拉取最新代码](#手动拉取最新代码)\n-  - [使用pull app](#使用pull-app)\n-  - [常见问题解答](#常见问题解答)\n-  - [Stargazers over time](#stargazers-over-time)\n-- [免责声明](#免责声明)\n-- [致谢](#致谢)\n-- [API 参考列表](#api-参考列表)\n-- [基于本项目的衍生项目](#基于本项目的衍生项目)\n-\n-# 使用说明\n-\n-## 一、Actions 方式\n+    - [使用说明](#使用说明)\n+        - [一、Actions 方式](#一actions-方式)\n+        - [二、使用 Docker](#二使用-docker)\n+        - [三、使用 Linux Crontab 方式](#三使用-linux-crontab-方式)\n+        - [自定义功能配置](#自定义功能配置)\n+    - [订阅执行结果](#订阅执行结果)\n+        - [Server酱Turbo版](#server酱turbo版)\n+        - [Telegram订阅执行结果](#telegram订阅执行结果)\n+    - [更新和帮助](#更新和帮助)\n+        - [使用 Github Actions 自动同步源仓库代码](#使用-github-actions-自动同步源仓库代码)\n+        - [手动拉取最新代码](#手动拉取最新代码)\n+        - [使用Pull APP［推荐］](#使用pull-app推荐)\n+        - [常见问题解答](#常见问题解答)\n+    - [免责声明](#免责声明)\n+    - [API 参考列表](#api-参考列表)\n+    - [基于本项目的衍生项目](#基于本项目的衍生项目)\n+    - [致谢](#致谢)\n+    - [License](#license)\n+    - [Stargazers over time](#stargazers-over-time)\n+\n+## 使用说明\n+\n+### 一、Actions 方式\n \n 1. **Fork 本项目**\n 2. **获取 Bilibili Cookies**\n-- 浏览器打开并登录 [bilibili 网站](https://www.bilibili.com/)\n-- 按 F12 打开 「开发者工具」 找到 应用程序/Application -> 存储 -> Cookies\n-- 找到 `bili_jct` `SESSDATA` `DEDEUSERID` 三项，并复制值，创建对应的 GitHub Secrets。\n+3. 浏览器打开并登录 [bilibili 网站]()\n+4. 按 F12 打开 「开发者工具」 找到 应用程序/Application -\\> 存储 -\\> Cookies\n+5. 找到 `bili_jct` `SESSDATA` `DEDEUSERID` 三项，并复制值，创建对应的 GitHub Secrets。\n \n ![图示](docs/IMG/20201012001307.png)\n \n-3. **点击项目 Settings -> Secrets -> New Secrets 添加以下 3 个 Secrets。**\n+1. **点击项目 Settings -\\> Secrets -\\> New Secrets 添加以下 3 个 Secrets，其中server酱微信推送的sckey可参阅[微信订阅通知](#微信订阅通知)**\n \n-| Name       | Value            |\n-| ---------- | ---------------- |\n-| DEDEUSERID | 从 Cookie 中获取 |\n-| SESSDATA   | 从 Cookie 中获取 |\n-| BILI_JCT   | 从 Cookie 中获取 |\n+| Name          | Value                                |\n+| ------------- | ------------------------------------ |\n+| DEDEUSERID    | 从 Cookie 中获取                     |\n+| SESSDATA      | 从 Cookie 中获取                     |\n+| BILI\\_JCT     | 从 Cookie 中获取                     |\n+| SERVERPUSHKEY | server酱推送的sckey（兼容Turbo版本） |\n \n ![图示](docs/IMG/20201013210000.png)\n \n-4. **开启 Actions 并触发每日自动执行**\n+1. **开启 Actions 并触发每日自动执行**\n \n **Github Actions 默认处于关闭状态，还大家请手动开启 Actions ，执行一次工作流，验证是否可以正常工作。**\n \n@@ -110,12 +109,31 @@ BILIBILI-HELPER\n }\n ```\n \n+**由于[issues/313](https://github.com/JunzhouLiu/BILIBILI-HELPER/issues/313)中反馈接收到了B站的警告，所以跳过每日任务选项默认开启(也就是默认不执行每日任务)，如需关闭，请将`src/main/resources/config.json`中的`skipDailyTask`值改为`false`**\n+\n+```patch\n+{\n+  \"numberOfCoins\": 5,\n+  \"reserveCoins\": 50,\n+  \"selectLike\": 0,\n+  \"monthEndAutoCharge\": true,\n+  \"giveGift\": true,\n+  \"upLive\": \"0\",\n+  \"chargeForLove\": \"0\",\n+  \"devicePlatform\": \"ios\",\n+  \"coinAddPriority\": 1,\n+- \"skipDailyTask\": true,\n++ \"skipDailyTask\": false,\n+  \"userAgent\": \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.0 Safari/605.1.15\"\n+}\n+```\n+\n 如果需要修改每日任务执行的时间，请修改 `.github/workflows/auto_task_bilili.yml`，在第 12 行左右位置找到下如下配置。\n \n ```yml\n   schedule:\n     - cron: '30 10 * * *'\n-    # cron表达式，Actions时区是UTC时间，所以下午18点要往前推8个小时。\n+    # cron表达式，Actions时区是国际时间，国际时间10点的时候，国内时间是18点。\n     # 示例： 每天晚上22点30执行 '30 14 * * *'\n ```\n \n@@ -127,167 +145,219 @@ BILIBILI-HELPER\n \n **Please be sure to abide by the Github terms when using Actions. Do not abuse the Actions service.**\n \n-\n-### 查看 Actions 运行日志\n-\n-*展开 `Build With Maven` 通过 `DEBUG` 标签快速过滤日志，查看运行状态*  \n+**查看 Actions 运行日志**\n \n [Actions 运行日志详细查看教程](https://github.com/JunzhouLiu/BILIBILI-HELPER/issues/21)\n \n [日志示例](https://github.com/JunzhouLiu/BILIBILI-HELPER/runs/1256484004?check_suite_focus=true#step:4:5069)\n \n-![图示](docs/IMG/debug1.png)\n-![图示](docs/IMG/debug2.png)\n-\n-## 二、使用 Docker\n+### 二、使用 Docker\n \n-请自行参阅 [Issues/75#issuecomment-731705657](https://github.com/JunzhouLiu/BILIBILI-HELPER/issues/75#issuecomment-731705657) 和[基于本项目的衍生项目](#基于本项目的衍生项目) 。\n+请自行参阅 [Issues/75#issuecomment-731705657][28] 和[基于本项目的衍生项目](#基于本项目的衍生项目)。\n \n+[28]:    https://github.com/JunzhouLiu/BILIBILI-HELPER/issues/75#issuecomment-731705657\n \n-## 三、使用 Linux Crontab 方式\n+### 三、使用 Linux Crontab 方式\n \n+1. 在linux shell环境执行以下命令，并按照提示输入SESSDATA，DEDEUSERID，BILI\\_JCT，SCKEY四个参数\n \n-1. 在linux shell环境执行以下命令，并按照提示输入SESSDATA，DEDEUSERID，BILI_JCT，SCKEY四个参数\n ```\n wget https://raw.githubusercontent.com/JunzhouLiu/BILIBILI-HELPER/main/setup.sh && chmod +x ./setup.sh && sudo ./setup.sh\n ```\n \n-**ps：注意，如果使用自定义配置，请将`config.json`和jar包放置在同一目录(使用setup.sh安装则需要将`config.json`放置到`{HOME}/BILIBILI-HELPER`)，`v1.2.2`之后的版本`release`中都会携带一份`config.json`。**\n+**ps：注意，如果使用自定义配置，请将`config.json`和jar包放置在同一目录(使用setup.sh安装则需要将`config.json`放置到`{HOME}/BILIBILI-HELPER`)，`v1.2.2`\n+之后的版本`release`中都会携带一份`config.json`。**\n \n-2. 除此之外，也可以通过点击 [BILIBILI-HELPER/release](https://github.com/JunzhouLiu/BILIBILI-HELPER/releases/latest)，下载已发布的版本，解压后将jar包手动上传到Linux服务器，使用crontab完成定时执行。\n+2. 除此之外，也可以通过点击 [BILIBILI-HELPER/release][30]，下载已发布的版本，解压后将jar包手动上传到Linux服务器，使用crontab完成定时执行，如果使用`crontab`\n+   请记得`source /etc/profile`和`source ~/.bashrc`,建议直接使用仓库提供的[`start.sh`][31]脚本,注意修改脚本的jar包路径和cookies参数。\n \n+[30]:    https://github.com/JunzhouLiu/BILIBILI-HELPER/releases/latest\n \n-**命令格式解释：**\n+[31]:    https://github.com/JunzhouLiu/BILIBILI-HELPER/blob/main/start.sh\n \n-`30 10 * * * java -jar /home/BILIBILI-HELP.jar DEDEUSERID SESSDATA BILI_JCT SCKEY>/var/log/cron.log &`\n \n-| args                               | 说明                                                                                                       |\n-| ---------------------------------- | ---------------------------------------------------------------------------------------------------------- |\n-| 30 10 * * *                        | cron 定时时间                                                                                              |\n-| java -jar                          | 执行jar包                                                                                                  |\n-| /home/BILIBILI-HELP.jar            | jar包路径                                                                                                  |\n-| DEDEUSERID SESSDATA BILI_JCT SCKEY | 传入参数的顺序，参数含义请见上文,SCKEY可为空（用于server酱推送日志，等同actions任务配置中的SERVERPUSHKEY） |\n-| >/var/log/cron.log &               | 日志写入的路径                                                                                             |\n+**crontab命令示例**\n \n+`30 10 * * * sh /home/start.sh`\n \n-**命令示例：**\n+| args              | 说明               |\n+| ----------------- | ------------------ |\n+| 30 10 \\* \\* \\*    | `crontab` 定时时间 |\n+| sh /home/start.sh | `start.sh`的路径   |\n \n ```shell\n-# *如果Cookies参数中包含特殊字符，例如`%`请使用`\\`转义*\n-# m h  dom mon dow   command\n-30 10 * * * java -jar /home/BILIBILI-HELP.jar DEDEUSERID SESSDATA BILI_JCT >/var/log/cron.log &\n+#!/bin/bash\n+source /etc/profile \n+source ~/.bashrc \n+source ~/.zshrc #其他终端请自行引入环境变量\n+echo $PATH\n+java -jar /home/BILIBILI-HELPER.jar DEDEUSERID SESSDATA BILI_JCT SCKEY >> /var/log/bilibili-help.log\n+# 注意将jar包路径替换为实际路径。将参数修改该你自己的参数，cookies中含有等特殊字符需要转义。\n ```\n \n-### 运行效果\n \n-![图示](docs/IMG/liunxImg.png)\n+**命令示例：**\n \n-## 四、使用 Windows10\n+```shell\n+# *如果Cookies参数中包含特殊字符，例如`%`请使用`\\`转义*,如果不执行可在命令前增加 source /etc/profile\n+# m h  dom mon dow   command\n+30 10 * * * java -jar /home/BILIBILI-HELP.jar DEDEUSERID SESSDATA BILI_JCT >/var/log/cron.log &\n+```\n \n+### 自定义功能配置\n \n-1. 点击 [BILIBILI-HELPER/release](https://github.com/JunzhouLiu/BILIBILI-HELPER/releases/latest)，下载已发布的版本。解压，在解压后的目录打开 `Powershell` 需要装有 Java 运行环境，添加到计划任务即可。\n-   \n-2. 执行 `java -jar /home/BILIBILI-HELP.jar DEDEUSERID SESSDATA BILI_JCT `\n+**Actions任务配置文件位于 `src/main/resources/config.json`**\n \n-![图示](docs/IMG/powershell.png)\n+配置文件示例：\n \n+```json\n+{\n+  \"numberOfCoins\": 5,\n+  \"reserveCoins\": 50,\n+  \"selectLike\": 0,\n+  \"monthEndAutoCharge\": true,\n+  \"giveGift\": true,\n+  \"upLive\": \"0\",\n+  \"chargeForLove\": \"0\",\n+  \"devicePlatform\": \"ios\",\n+  \"coinAddPriority\": 1,\n+  \"skipDailyTask\": true,\n+  \"userAgent\": \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.0 Safari/605.1.15\"\n+}\n+```\n \n-## 自定义功能配置\n+**Windows/Linux 用户使用jar包时，`release`包中会包含一份`config.json`配置文件，只需将其和`BILIBILI-HELP.jar`放在同一目录即可，执行时优先加载外部配置文件**\n \n \n-**Actions任务配置文件位于 `src/main/resources/config.json`**\n+配置文件参数示意\n \n-**Windows/Linux 用户使用jar包时，最新的release包中包含一份`config.json`配置文件，只需将其和`BILIBILI-HELP.jar`放在同一目录即可，执行时优先加载外部配置文件**\n+| Key                | Value             | 说明                                                                    |\n+| ------------------ | ----------------- | ----------------------------------------------------------------------- |\n+| numberOfCoins      | [0,5]             | 每日投币数量,默认 5 ,为0时则不投币                                      |\n+| reserveCoins       | [0,4000]          | 预留的硬币数，当硬币余额小于这个值时，不会进行投币任务，默认值为50      |\n+| selectLike         | [0,1]             | 投币时是否点赞，默认 0, 0：否 1：是                                     |\n+| monthEndAutoCharge | [false,true]      | 年度大会员月底是否用 B币券给自己充电，默认 `true`，即充电对象是你本人。 |\n+| giveGift           | [false,true]      | 直播送出即将过期的礼物，默认开启，如需关闭请改为false                   |\n+| upLive             | [0,送礼up主的uid] | 直播送出即将过期的礼物，指定up主，为0时则随随机选取一个up主             |\n+| chargeForLove      | [0,充电对象的uid] | 给指定up主充电，值为0或者充电对象的uid，默认为0，即给自己充电。         |\n+| devicePlatform     | [ios,android]     | 手机端漫画签到时的平台，建议选择你设备的平台 ，默认 `ios`               |\n+| coinAddPriority    | [0,1]             | 0：优先给热榜视频投币，1：优先给关注的up投币                            |\n+| userAgent          | 浏览器UA          | 用户可根据部署平台配置，可根据userAgent参数列表自由选取                 |\n+| skipDailyTask      | [false,true]      | 是否跳过每日任务，默认`true`,如果关闭跳过每日任务，请改为`false`        |\n \n+**tips:如果你没有上传过视频并开启充电计划，充电会失败，B币券会浪费。此时建议配置为给指定的up主充电。欢迎给即将秃头的我充电 uid：[14602398][32] **\n \n-参数示意\n+[32]:    https://space.bilibili.com/14602398\n \n-| Key                | Value         | 说明                                                                                                          |\n-| ------------------ | ------------- | ------------------------------------------------------------------------------------------------------------- |\n-| numberOfCoins      | [0,5]         | 每日投币数量,默认 5 ,为0时则不投币                                                                            |\n-| selectLike         | [0,1]         | 投币时是否点赞，默认 0, 0：否 1：是                                                                           |\n-| monthEndAutoCharge | [false,true]  | 年度大会员月底是否用 B币券 给自己充电，默认 `true`                                                            |\n-| devicePlatform     | [ios,android] | 手机端漫画签到时的平台，建议选择你设备的平台 ，默认 `ios`                                                     |\n-| coinAddPriority    | [0,1]         | 0：优先给热榜视频投币，1：优先给关注的up投币                                                                  |\n-| userAgent          | 浏览器UA      | 用户可根据部署平台配置，可根据userAgent参数列表自由选取，如果触发了HTTP/1.1 412 Precondition Failed也请修改UA |\n-| skipDailyTask      | [0,1]         | 是否跳过每日任务，如果需要临时关闭每日任务，此项改为1即可，开启则改为0即可                                    |\n \n userAgent可选参数列表\n+\n | 平台      | 浏览器         | userAgent                                                                                                                           |\n | --------- | -------------- | ----------------------------------------------------------------------------------------------------------------------------------- |\n | Windows10 | EDGE(chromium) | Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.198 Safari/537.36 Edg/86.0.622.69 |\n | Windows10 | Chrome         | Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.198 Safari/537.36                 |\n-| masOS     | safari         | Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.0 Safari/605.1.15               |\n+| masOS     | safari         | Mozilla/5.0 (Macintosh; Intel Mac OS X 10\\_15\\_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.0 Safari/605.1.15             |\n | macOS     | Firefox        | Mozilla/5.0 (Macintosh; Intel Mac OS X 10.12; rv:65.0) Gecko/20100101 Firefox/65.0                                                  |\n-| macOS     | Chrome         | Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.75 Safari/537.36            |\n+| macOS     | Chrome         | Mozilla/5.0 (Macintosh; Intel Mac OS X 10\\_12\\_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.75 Safari/537.36          |\n \n *ps：如果尝试给关注的 up 投币十次后（保不准你关注的是年更up主），还没完成每日投币任务，则切换成热榜模式，给热榜视频投币*\n \n *投币数量代码做了处理，如果本日投币不能获得经验了，则不会投币，每天只投能获得经验的硬币。假设你设置每日投币 3 个，早上 7 点你自己投了 2 个硬币，则十点半时，程序只会投 1 个）*\n \n+## 订阅执行结果\n \n-# 微信订阅通知\n+### Server酱Turbo版\n \n-## 订阅执行结果\n+目前Turbo版本的消息通道支持以下渠道\n \n-1. 前往 [sc.ftqq.com](http://sc.ftqq.com/3.version) 点击登入，创建账号（建议使用 GitHub 登录）。\n-2. 点击点[发送消息](http://sc.ftqq.com/?c=code) ，生成一个 Key。将其增加到 Github Secrets 中，变量名为 `SERVERPUSHKEY`\n-3. [绑定微信账号](http://sc.ftqq.com/?c=wechat&a=bind) ，开启微信推送。\n-![图示](docs/IMG/serverpush.png)\n+- 企业微信应用消息\n+- Android，\n+- Bark iOS，\n+- 企业微信群机器人\n+- 钉钉群机器人\n+- 飞书群机器人\n+- 自定义微信测试号\n+- 方糖服务号\n+\n+1. 前往 [sct.ftqq.com](https://sct.ftqq.com/sendkey)点击登入，创建账号。\n+2. 点击点[SendKey](https://sct.ftqq.com/sendkey) ，生成一个 Key。将其增加到 Github Secrets 中，变量名为 `SERVERPUSHKEY`\n+3. [配置消息通道](https://sct.ftqq.com/forward) ，选择方糖服务号，保存即可。\n 4. 推送效果展示\n-![图示](docs/IMG/wechatMsgPush.png)\n+   ![图示](docs/IMG/wechatMsgPush.png)\n+\n+**旧版推送渠道[sc.ftqq.com](http://sc.ftqq.com/9.version]即将与4月底下线，请前往[sct.ftqq.com](https://sct.ftqq.com/sendkey)生成`Turbo`版本的`Key`，注意，申请Turbo版Key后请配置消息通道，如果想沿用以前的推送方式，选择方糖服务号即可**\n+\n+### Telegram订阅执行结果\n \n+1.在Telegram中添加BotFather这个账号，然后依次发送/start /newbot 按照提示即可创建一个新的机器人。记下来给你生成的token。\n \n-# 快速更新\n+2.搜索刚刚创建的机器人的名字，并给它发送一条消息。\n \n-## 使用 Github Actions 自动同步源仓库代码\n+*特别注意：需要先与机器人之间创建会话，机器人才能下发消息，否则机器人无法主动发送消息，切记！*\n+\n+3.在Telegram中搜索userinfobot，并给它发送一条消息，它会返回给你chatid。\n+\n+4.在Github Secrets中删除SERVERPUSHKEY，添加TELEGRAMBOTTOKEN，TELEGRAMCHATID。\n+\n+\n+\n+## 更新和帮助\n+\n+### 使用 Github Actions 自动同步源仓库代码\n \n 参阅[Issue8 使用GitHub Actions任务自动同步源仓库代码](https://github.com/JunzhouLiu/BILIBILI-HELPER/issues/8)\n \n-## 手动拉取最新代码\n+### 手动拉取最新代码\n \n 参阅[Issues4 手动拉取最新代码](https://github.com/JunzhouLiu/BILIBILI-HELPER/issues/4)\n \n-## 使用pull app\n+### 使用Pull APP［推荐］\n \n 参阅 [Pull APP](https://github.com/apps/pull)\n \n-## 常见问题解答\n+### 常见问题解答\n \n 请参阅[常见问题解答](https://github.com/JunzhouLiu/BILIBILI-HELPER/issues/4)\n \n-## Stargazers over time\n-\n-[![Stargazers over time](https://starchart.cc/JunzhouLiu/BILIBILI-HELPER.svg)](https://starchart.cc/JunzhouLiu/BILIBILI-HELPER)\n-\n-# 免责声明\n+## 免责声明\n \n 1. 本工具不会记录你的任何敏感信息，也不会上传到任何服务器上。（例如用户的cookies数据，cookies数据均存在Actions Secrets中或者用户自己的设备上）\n 2. 本工具不会记录任何执行过程中来自b站的数据信息，也不会上传到任何服务器上。（例如av号，bv号，用户uid等）。\n 3. 本工具执行过程中产生的日志，仅会在使用者自行配置推送渠道后进行推送。日志中不包含任何用户敏感信息。\n 4. 如果有人修改了本项目（或者直接使用本项目）盈利恰饭，那和我肯定没关系，我开源的目的单纯是技术分享。\n 5. 如果你使用了第三方修改的，打包的本工具代码，那你可得注意了，指不定人就把你的数据上传到他自己的服务器了，这可和我没关系。（**网络安全教育普及任重而道远**）\n-6. 本工具源码仅在[JunzhouLiu/BILIBILI-HELPER](https://github.com/JunzhouLiu/BILIBILI-HELPER)开源，其余的地方的代码均不是我提交的，可能是抄我的，借鉴我的，但绝对不是我发布的，出问题和我也没关系。 \n-7. 我开源本工具的代码仅仅是技术分享，没有任何丝毫的盈利赚钱目的，我连赞赏都移除了（因为挂半个月压根没人给我赞赏），如果你非要给我打赏，那我就是网络乞丐，咱俩可没任何py交易啊。\n-8. 本项目遵守[MIT License](https://github.com/JunzhouLiu/BILIBILI-HELPER/blob/main/LICENSE) ，请各位知悉。\n-\n-\n-# 致谢\n-感谢 JetBrains 对本项目的支持。\n-\n-[![JetBrains](docs/IMG/jetbrains.svg)](https://www.jetbrains.com/?from=BILIBILI-HELPER)\n+6. 本工具源码仅在[JunzhouLiu/BILIBILI-HELPER](https://github.com/JunzhouLiu/BILIBILI-HELPER)开源，其余的地方的代码均不是我提交的，可能是抄我的，借鉴我的，但绝对不是我发布的，出问题和我也没关系。\n+7. 我开源本工具的代码仅仅是技术分享，没有任何丝毫的盈利赚钱目的，如果你非要给我打赏/充电，那我就是网络乞丐，咱们不构成任何雇佣，购买关系的交易。\n+8. 本项目不会增加类似于自动转发抽奖，秒杀，下载版权受限视频等侵犯UP主/B站权益的功能，开发这个应用的目的是单纯的技术分享。下游分支开发者/使用者也请不要滥用相关功能。\n+9. 本项目欢迎其他开发者参与贡献，基于本工具的二次开发，使用其他语言重写都没有什么问题，能在技术上给你带来帮助和收获就很好.\n+10. 本项目遵守[MIT License](https://github.com/JunzhouLiu/BILIBILI-HELPER/blob/main/LICENSE)，请各位知悉。\n \n-# API 参考列表\n+## API 参考列表\n \n - [SocialSisterYi/bilibili-API-collect](https://github.com/SocialSisterYi/bilibili-API-collect)\n - [happy888888/BiliExp](https://github.com/happy888888/BiliExp)\n \n-# 基于本项目的衍生项目\n+## 基于本项目的衍生项目\n \n - **基于本项目的docker封装项目：[SuperNG6/docker-bilibili-helper](https://github.com/SuperNG6/docker-bilibili-helper)**\n \n - **基于本项目的docker镜像：[superng6/bilibili-helper](https://hub.docker.com/r/superng6/bilibili-helper)**\n- \n+\n - **基于本项目的runer项目：[KurenaiRyu/bilibili-helper-runer](https://github.com/KurenaiRyu/bilibili-helper-runer)**\n \n - **基于本项目的k8s项目：[yangyang0507/k8s-bilibili-helper](https://github.com/yangyang0507/k8s-bilibili-helper)**\n+\n+## 致谢\n+\n+感谢 JetBrains 对本项目的支持。\n+\n+[![JetBrains](docs/IMG/jetbrains.svg)](https://www.jetbrains.com/?from=BILIBILI-HELPER)\n+\n+## License\n+\n+[![FOSSA Status](https://app.fossa.com/api/projects/git%2Bgithub.com%2FJunzhouLiu%2FBILIBILI-HELPER.svg?type=large)](https://app.fossa.com/projects/git%2Bgithub.com%2FJunzhouLiu%2FBILIBILI-HELPER?ref=badge_large)\n+\n+## Stargazers over time\n+\n+[![Stargazers over time](https://starchart.cc/JunzhouLiu/BILIBILI-HELPER.svg)](https://starchart.cc/JunzhouLiu/BILIBILI-HELPER)\n+"
  },
  {
    "sha": "38d5fdea207b07cb34c2dce171d626b2148b883f",
    "filename": "SECURITY.md",
    "status": "removed",
    "additions": 0,
    "deletions": 13,
    "changes": 13,
    "blob_url": "https://github.com/Dimlitter/BILIBILI-HELPER/blob/989b729d275a0b27c4dd521730b31cd56561c962/SECURITY.md",
    "raw_url": "https://github.com/Dimlitter/BILIBILI-HELPER/raw/989b729d275a0b27c4dd521730b31cd56561c962/SECURITY.md",
    "contents_url": "https://api.github.com/repos/Dimlitter/BILIBILI-HELPER/contents/SECURITY.md?ref=989b729d275a0b27c4dd521730b31cd56561c962",
    "patch": "@@ -1,13 +0,0 @@\n-# Security Policy\n-\n-## Versions History\n-\n-\n-| Date       | Version | Supported                                                        |\n-| ---------- | ------- | ---------------------------------------------------------------- |\n-| 2020-11-23 | v1.2.1  | 1.标题中出现'&'导致server酱推送被截断 (#135)                     |\n-| 2020-11-22 | v1.1.9  | 1.增加docker版本指路链接</br>2.@NatsuSai 优化任务相关代码        |\n-| 2020-11-21 | v1.1.8  | 1.解决412 Precondition Failed</br>2.更优雅的日志。               |\n-| 2020-11-12 | v1.1.6  | 1.支持优先投币给关注的up主投币                                   |\n-| 2020-11-09 | v1.1.4  | 1.支持jar包从外部文件读取配置 </br>2.使用新api和优化升级时间提示 |\n-"
  },
  {
    "sha": "3d8fcb299ee3285496ae84c1525fbad9cc84965d",
    "filename": "docs/IMG/debug1.png",
    "status": "removed",
    "additions": 0,
    "deletions": 0,
    "changes": 0,
    "blob_url": "https://github.com/Dimlitter/BILIBILI-HELPER/blob/989b729d275a0b27c4dd521730b31cd56561c962/docs/IMG/debug1.png",
    "raw_url": "https://github.com/Dimlitter/BILIBILI-HELPER/raw/989b729d275a0b27c4dd521730b31cd56561c962/docs/IMG/debug1.png",
    "contents_url": "https://api.github.com/repos/Dimlitter/BILIBILI-HELPER/contents/docs/IMG/debug1.png?ref=989b729d275a0b27c4dd521730b31cd56561c962"
  },
  {
    "sha": "30ba2b5c56d2a3a9bd1b41cdcc7918d161152b91",
    "filename": "docs/IMG/debug2.png",
    "status": "removed",
    "additions": 0,
    "deletions": 0,
    "changes": 0,
    "blob_url": "https://github.com/Dimlitter/BILIBILI-HELPER/blob/989b729d275a0b27c4dd521730b31cd56561c962/docs/IMG/debug2.png",
    "raw_url": "https://github.com/Dimlitter/BILIBILI-HELPER/raw/989b729d275a0b27c4dd521730b31cd56561c962/docs/IMG/debug2.png",
    "contents_url": "https://api.github.com/repos/Dimlitter/BILIBILI-HELPER/contents/docs/IMG/debug2.png?ref=989b729d275a0b27c4dd521730b31cd56561c962"
  },
  {
    "sha": "cca12b6cadbd25dbeccd655589760a4fa483db0b",
    "filename": "docs/IMG/liunxImg.png",
    "status": "removed",
    "additions": 0,
    "deletions": 0,
    "changes": 0,
    "blob_url": "https://github.com/Dimlitter/BILIBILI-HELPER/blob/989b729d275a0b27c4dd521730b31cd56561c962/docs/IMG/liunxImg.png",
    "raw_url": "https://github.com/Dimlitter/BILIBILI-HELPER/raw/989b729d275a0b27c4dd521730b31cd56561c962/docs/IMG/liunxImg.png",
    "contents_url": "https://api.github.com/repos/Dimlitter/BILIBILI-HELPER/contents/docs/IMG/liunxImg.png?ref=989b729d275a0b27c4dd521730b31cd56561c962"
  },
  {
    "sha": "58907bbd4cbce4b70c2df8ecc43ec5e0daa6192f",
    "filename": "docs/IMG/powershell.png",
    "status": "removed",
    "additions": 0,
    "deletions": 0,
    "changes": 0,
    "blob_url": "https://github.com/Dimlitter/BILIBILI-HELPER/blob/989b729d275a0b27c4dd521730b31cd56561c962/docs/IMG/powershell.png",
    "raw_url": "https://github.com/Dimlitter/BILIBILI-HELPER/raw/989b729d275a0b27c4dd521730b31cd56561c962/docs/IMG/powershell.png",
    "contents_url": "https://api.github.com/repos/Dimlitter/BILIBILI-HELPER/contents/docs/IMG/powershell.png?ref=989b729d275a0b27c4dd521730b31cd56561c962"
  },
  {
    "sha": "8653651f2c6666e0fdb08fbd6c24221a4dcbf85c",
    "filename": "pom.xml",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/Dimlitter/BILIBILI-HELPER/blob/407eea783c780fd69d7f84d54745d3297770a7ff/pom.xml",
    "raw_url": "https://github.com/Dimlitter/BILIBILI-HELPER/raw/407eea783c780fd69d7f84d54745d3297770a7ff/pom.xml",
    "contents_url": "https://api.github.com/repos/Dimlitter/BILIBILI-HELPER/contents/pom.xml?ref=407eea783c780fd69d7f84d54745d3297770a7ff",
    "patch": "@@ -6,7 +6,7 @@\n \n     <groupId>top.misec</groupId>\n     <artifactId>BILIBILI-HELPER</artifactId>\n-    <version>1.2.7</version>\n+    <version>1.3.8</version>\n     <properties>\n         <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n     </properties>"
  },
  {
    "sha": "251d577973126a9a19592038b5f99ef62d7c254c",
    "filename": "setup.sh",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/Dimlitter/BILIBILI-HELPER/blob/407eea783c780fd69d7f84d54745d3297770a7ff/setup.sh",
    "raw_url": "https://github.com/Dimlitter/BILIBILI-HELPER/raw/407eea783c780fd69d7f84d54745d3297770a7ff/setup.sh",
    "contents_url": "https://api.github.com/repos/Dimlitter/BILIBILI-HELPER/contents/setup.sh?ref=407eea783c780fd69d7f84d54745d3297770a7ff",
    "patch": "@@ -1,5 +1,5 @@\n #!/bin/bash\n-version=\"1.2.7\"\n+version=\"1.3.8\"\n \n function installJava(){\n   command -v apt >/dev/null 2>&1 && (apt-get update; apt-get install openjdk-8-jdk -y; return;)"
  },
  {
    "sha": "54ee2303bb2b71929314acb9d5cf92556a479811",
    "filename": "src/main/java/top/misec/BiliMain.java",
    "status": "modified",
    "additions": 8,
    "deletions": 4,
    "changes": 12,
    "blob_url": "https://github.com/Dimlitter/BILIBILI-HELPER/blob/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/java/top/misec/BiliMain.java",
    "raw_url": "https://github.com/Dimlitter/BILIBILI-HELPER/raw/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/java/top/misec/BiliMain.java",
    "contents_url": "https://api.github.com/repos/Dimlitter/BILIBILI-HELPER/contents/src/main/java/top/misec/BiliMain.java?ref=407eea783c780fd69d7f84d54745d3297770a7ff",
    "patch": "@@ -5,6 +5,7 @@\n import top.misec.login.ServerVerify;\n import top.misec.login.Verify;\n import top.misec.task.DailyTask;\n+import top.misec.task.ServerPush;\n import top.misec.utils.VersionInfo;\n \n \n@@ -15,7 +16,6 @@\n \n @Log4j2\n public class BiliMain {\n-\n     public static void main(String[] args) {\n \n         if (args.length < 3) {\n@@ -25,18 +25,22 @@ public static void main(String[] args) {\n         //读取环境变量\n         Verify.verifyInit(args[0], args[1], args[2]);\n \n-        if (args.length > 3) {\n+        if (args.length > 4) {\n+            ServerVerify.verifyInit(args[3], args[4]);\n+        } else if (args.length > 3) {\n             ServerVerify.verifyInit(args[3]);\n         }\n \n+\n         VersionInfo.printVersionInfo();\n         //每日任务65经验\n         Config.getInstance().configInit();\n-        if (Config.getInstance().getSkipDailyTask() == 0) {\n+        if (!Config.getInstance().isSkipDailyTask()) {\n             DailyTask dailyTask = new DailyTask();\n             dailyTask.doDailyTask();\n         } else {\n-            log.info(\"自定义配置中开启了跳过本日任务，本日任务跳过，如果需要取消跳过，请将skipDailyTask值改为0\");\n+            log.info(\"已开启了跳过本日任务，本日任务跳过（不会发起任何网络请求），如果需要取消跳过，请将skipDailyTask值改为false\");\n+            ServerPush.doServerPush();\n         }\n     }\n "
  },
  {
    "sha": "fc4dae128a0652c4d1d9b359f134d1215a205d8f",
    "filename": "src/main/java/top/misec/apiquery/ApiList.java",
    "status": "modified",
    "additions": 9,
    "deletions": 0,
    "changes": 9,
    "blob_url": "https://github.com/Dimlitter/BILIBILI-HELPER/blob/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/java/top/misec/apiquery/ApiList.java",
    "raw_url": "https://github.com/Dimlitter/BILIBILI-HELPER/raw/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/java/top/misec/apiquery/ApiList.java",
    "contents_url": "https://api.github.com/repos/Dimlitter/BILIBILI-HELPER/contents/src/main/java/top/misec/apiquery/ApiList.java?ref=407eea783c780fd69d7f84d54745d3297770a7ff",
    "patch": "@@ -7,6 +7,8 @@\n public class ApiList {\n \n     public static String ServerPush = \"https://sc.ftqq.com/\";\n+    public static String ServerPushV2 = \"https://sctapi.ftqq.com/\";\n+    public static String ServerPushTelegram = \"https://api.telegram.org/bot\";\n     public static String LOGIN = \"https://api.bilibili.com/x/web-interface/nav\";\n     public static String Manga = \"https://manga.bilibili.com/twirp/activity.v1.Activity/ClockIn\";\n     public static String AvShare = \"https://api.bilibili.com/x/web-interface/share/add\";\n@@ -55,6 +57,8 @@\n \n     public static String chargeQuery = \"https://api.bilibili.com/x/ugcpay/web/v2/trade/elec/panel\";\n \n+    public static String queryUserName = \"https://api.bilibili.com/x/space/acc/info\";\n+\n     /**\n      * 领取大会员福利\n      */\n@@ -72,4 +76,9 @@\n     public static String queryDynamicNew = \"https://api.vc.bilibili.com/dynamic_svr/v1/dynamic_svr/dynamic_new\";\n \n     public static String videoView = \"https://api.bilibili.com/x/web-interface/view\";\n+\n+    /**\n+     *\n+     */\n+    public static String mangaRead = \"https://manga.bilibili.com/twirp/bookshelf.v1.Bookshelf/AddHistory\";\n }"
  },
  {
    "sha": "06bea9b2576dcbb560a1f6f96f9adc840b4fea35",
    "filename": "src/main/java/top/misec/apiquery/oftenAPI.java",
    "status": "modified",
    "additions": 27,
    "deletions": 8,
    "changes": 35,
    "blob_url": "https://github.com/Dimlitter/BILIBILI-HELPER/blob/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/java/top/misec/apiquery/oftenAPI.java",
    "raw_url": "https://github.com/Dimlitter/BILIBILI-HELPER/raw/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/java/top/misec/apiquery/oftenAPI.java",
    "contents_url": "https://api.github.com/repos/Dimlitter/BILIBILI-HELPER/contents/src/main/java/top/misec/apiquery/oftenAPI.java?ref=407eea783c780fd69d7f84d54745d3297770a7ff",
    "patch": "@@ -1,19 +1,22 @@\n package top.misec.apiquery;\n \n import com.google.gson.JsonObject;\n+import lombok.extern.log4j.Log4j2;\n import org.apache.logging.log4j.LogManager;\n-import org.apache.logging.log4j.core.Logger;\n+import top.misec.config.Config;\n import top.misec.login.Verify;\n import top.misec.utils.HttpUtil;\n \n+import java.util.Collections;\n+\n /**\n  * 部分API简单封装。\n  *\n  * @author Junzhou Liu\n  * @create 2020/10/14 14:27\n  */\n+@Log4j2\n public class oftenAPI {\n-    static Logger logger = (Logger) LogManager.getLogger(oftenAPI.class.getName());\n \n     /**\n      * @return 返回主站查询到的硬币余额，查询失败返回0.0\n@@ -31,7 +34,7 @@ public static Double getCoinBalance() {\n                 return dataObject.get(\"money\").getAsDouble();\n             }\n         } else {\n-            logger.debug(\"请求硬币余额接口错误，请稍后重试。错误请求信息：\" + responseJson);\n+            log.debug(\"请求硬币余额接口错误，请稍后重试。错误请求信息：\" + responseJson);\n             return 0.0;\n         }\n     }\n@@ -46,13 +49,13 @@ public static void vipPrivilege(int type) {\n         int responseCode = jsonObject.get(\"code\").getAsInt();\n         if (responseCode == 0) {\n             if (type == 1) {\n-                logger.info(\"领取年度大会员每月赠送的B币券成功\");\n+                log.info(\"领取年度大会员每月赠送的B币券成功\");\n             } else if (type == 2) {\n-                logger.info(\"领取大会员福利/权益成功\");\n+                log.info(\"领取大会员福利/权益成功\");\n             }\n \n         } else {\n-            logger.debug(\"领取年度大会员每月赠送的B币券/大会员福利失败，原因: \" + jsonObject.get(\"message\").getAsString());\n+            log.debug(\"领取年度大会员每月赠送的B币券/大会员福利失败，原因: \" + jsonObject.get(\"message\").getAsString());\n         }\n     }\n \n@@ -71,12 +74,28 @@ public static String videoTitle(String bvid) {\n             title += jsonObject.getAsJsonObject(\"data\").get(\"title\").getAsString();\n         } else {\n             title = \"未能获取标题\";\n-            logger.info(title);\n-            logger.debug(jsonObject.get(\"message\").getAsString());\n+            log.info(title);\n+            log.debug(jsonObject.get(\"message\").getAsString());\n         }\n \n         return title.replace(\"&\", \"-\");\n     }\n \n+    /**\n+     * @param uid 用户uid\n+     * @return userName 查询到的用户名，为1则未查询到用户\n+     */\n+    public static String queryUserName(String uid) {\n+        String urlParameter = \"?mid=\" + uid + \"&jsonp=jsonp\";\n+        String userName = \"1\";\n+        JsonObject jsonObject = HttpUtil.doGet(ApiList.queryUserName + urlParameter);\n+        if (jsonObject.get(\"code\").getAsInt() == 0) {\n+            userName = jsonObject.getAsJsonObject(\"data\").get(\"name\").getAsString();\n+        } else {\n+            log.info(\"查询充电对象的用户名失败，原因：{}\", jsonObject);\n+        }\n+        return userName;\n+    }\n+\n \n }"
  },
  {
    "sha": "d63137b266082b2a3fc8f3f5a3f16b3fdd954f74",
    "filename": "src/main/java/top/misec/config/Config.java",
    "status": "modified",
    "additions": 38,
    "deletions": 14,
    "changes": 52,
    "blob_url": "https://github.com/Dimlitter/BILIBILI-HELPER/blob/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/java/top/misec/config/Config.java",
    "raw_url": "https://github.com/Dimlitter/BILIBILI-HELPER/raw/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/java/top/misec/config/Config.java",
    "contents_url": "https://api.github.com/repos/Dimlitter/BILIBILI-HELPER/contents/src/main/java/top/misec/config/Config.java?ref=407eea783c780fd69d7f84d54745d3297770a7ff",
    "patch": "@@ -2,8 +2,7 @@\n \n import com.google.gson.Gson;\n import lombok.Data;\n-import org.apache.logging.log4j.LogManager;\n-import org.apache.logging.log4j.core.Logger;\n+import lombok.extern.log4j.Log4j2;\n import top.misec.utils.HttpUtil;\n import top.misec.utils.LoadFileResource;\n \n@@ -13,12 +12,10 @@\n  * @author Junzhou Liu\n  * @create 2020/10/13 17:11\n  */\n-\n+@Log4j2\n @Data\n public class Config {\n \n-    static Logger logger = (Logger) LogManager.getLogger(Config.class.getName());\n-\n     /**\n      * 每日设定的投币数 [0,5]\n      */\n@@ -34,6 +31,17 @@\n      */\n     private boolean monthEndAutoCharge;\n \n+    /**\n+     * 自动打赏快过期礼物[false,true]\n+     */\n+    private boolean giveGift;\n+\n+    /**\n+     * 打赏快过期礼物对象，为http://live.bilibili.com/后的数字\n+     * 填0表示随机打赏。\n+     */\n+    private String upLive;\n+\n     /**\n      * 执行客户端操作时的平台 [ios,android]\n      */\n@@ -45,11 +53,9 @@\n      */\n     private int coinAddPriority;\n     private String userAgent;\n-    private int skipDailyTask;\n-\n-    public int getSkipDailyTask() {\n-        return skipDailyTask;\n-    }\n+    private boolean skipDailyTask;\n+    private String chargeForLove;\n+    private int reserveCoins;\n \n \n     private static Config CONFIG = new Config();\n@@ -85,14 +91,32 @@ public void configInit() {\n         String outConfig = LoadFileResource.loadConfigJsonFromFile();\n         if (outConfig != null) {\n             configJson = outConfig;\n-            logger.info(\"读取外部配置文件成功\");\n+            log.info(\"读取外部配置文件成功\");\n         } else {\n-            configJson = LoadFileResource.loadJsonFromAsset(\"config.json\");\n-            logger.info(\"读取配置文件成功\");\n+            String temp = LoadFileResource.loadJsonFromAsset(\"config.json\");\n+            /**\n+             *兼容旧配置文件\n+             * \"skipDailyTask\": 0 -> \"skipDailyTask\": false\n+             * \"skipDailyTask\": 1 -> \"skipDailyTask\": true\n+             */\n+            String target0 = \"\\\"skipDailyTask\\\": 0\";\n+            String target1 = \"\\\"skipDailyTask\\\": 1\";\n+            if (temp.contains(target0)) {\n+                log.debug(\"兼容旧配置文件，skipDailyTask的值由0变更为false\");\n+                configJson = temp.replaceAll(target0, \"\\\"skipDailyTask\\\": false\");\n+            } else if (temp.contains(target1)) {\n+                log.debug(\"兼容旧配置文件，skipDailyTask的值由1变更为true\");\n+                configJson = temp.replaceAll(target1, \"\\\"skipDailyTask\\\": true\");\n+            } else {\n+                log.debug(\"使用的是最新格式的配置文件，无需执行兼容性转换\");\n+                configJson = temp;\n+            }\n+\n+            log.info(\"读取配置文件成功\");\n         }\n \n         Config.CONFIG = new Gson().fromJson(configJson, Config.class);\n         HttpUtil.setUserAgent(Config.getInstance().getUserAgent());\n-        logger.info(Config.getInstance().toString());\n+        log.info(Config.getInstance().toString());\n     }\n }"
  },
  {
    "sha": "39ae1ab1a3472d51233ab10efad1a7b0bf646b73",
    "filename": "src/main/java/top/misec/login/ServerVerify.java",
    "status": "modified",
    "additions": 9,
    "deletions": 4,
    "changes": 13,
    "blob_url": "https://github.com/Dimlitter/BILIBILI-HELPER/blob/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/java/top/misec/login/ServerVerify.java",
    "raw_url": "https://github.com/Dimlitter/BILIBILI-HELPER/raw/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/java/top/misec/login/ServerVerify.java",
    "contents_url": "https://api.github.com/repos/Dimlitter/BILIBILI-HELPER/contents/src/main/java/top/misec/login/ServerVerify.java?ref=407eea783c780fd69d7f84d54745d3297770a7ff",
    "patch": "@@ -6,22 +6,27 @@\n  * @author Junzhou Liu\n  * @create 2020/10/21 19:57\n  */\n+@Getter\n public class ServerVerify {\n \n-    @Getter\n     private static String FTKEY = null;\n-\n-\n+    private static String CHATID = null;\n     private final static ServerVerify SERVER_VERIFY = new ServerVerify();\n \n     public static void verifyInit(String ftKey) {\n         ServerVerify.FTKEY = ftKey;\n     }\n-\n+    public static void verifyInit(String ftKey, String chatId) {\n+        ServerVerify.FTKEY = ftKey;\n+        ServerVerify.CHATID = chatId;\n+    }\n     public static String getFtkey() {\n         return FTKEY;\n     }\n \n+    public static String getChatId() {\n+        return CHATID;\n+    }\n     public static ServerVerify getInstance() {\n         return SERVER_VERIFY;\n     }"
  },
  {
    "sha": "6c56e2f6c9f67c3a979d68938de97267a00864a6",
    "filename": "src/main/java/top/misec/login/Verify.java",
    "status": "modified",
    "additions": 1,
    "deletions": 0,
    "changes": 1,
    "blob_url": "https://github.com/Dimlitter/BILIBILI-HELPER/blob/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/java/top/misec/login/Verify.java",
    "raw_url": "https://github.com/Dimlitter/BILIBILI-HELPER/raw/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/java/top/misec/login/Verify.java",
    "contents_url": "https://api.github.com/repos/Dimlitter/BILIBILI-HELPER/contents/src/main/java/top/misec/login/Verify.java?ref=407eea783c780fd69d7f84d54745d3297770a7ff",
    "patch": "@@ -1,5 +1,6 @@\n package top.misec.login;\n \n+\n /**\n  * @author Junzhou Liu\n  * @create 2020/10/11 16:49"
  },
  {
    "sha": "e0de74d6c34507d23422be0095de53490e166885",
    "filename": "src/main/java/top/misec/task/ChargeMe.java",
    "status": "modified",
    "additions": 36,
    "deletions": 25,
    "changes": 61,
    "blob_url": "https://github.com/Dimlitter/BILIBILI-HELPER/blob/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/java/top/misec/task/ChargeMe.java",
    "raw_url": "https://github.com/Dimlitter/BILIBILI-HELPER/raw/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/java/top/misec/task/ChargeMe.java",
    "contents_url": "https://api.github.com/repos/Dimlitter/BILIBILI-HELPER/contents/src/main/java/top/misec/task/ChargeMe.java?ref=407eea783c780fd69d7f84d54745d3297770a7ff",
    "patch": "@@ -1,15 +1,16 @@\n package top.misec.task;\n \n import com.google.gson.JsonObject;\n-import org.apache.logging.log4j.LogManager;\n-import org.apache.logging.log4j.core.Logger;\n+import lombok.extern.log4j.Log4j2;\n import top.misec.apiquery.ApiList;\n import top.misec.apiquery.oftenAPI;\n import top.misec.config.Config;\n import top.misec.login.Verify;\n+import top.misec.utils.HelpUtil;\n import top.misec.utils.HttpUtil;\n \n import java.util.Calendar;\n+import java.util.Collections;\n import java.util.TimeZone;\n \n import static top.misec.task.TaskInfoHolder.*;\n@@ -22,37 +23,47 @@\n  * @author @JunzhouLiu @Kurenai\n  * @since 2020-11-22 5:43\n  */\n-\n+@Log4j2\n public class ChargeMe implements Task {\n \n-    static Logger logger = (Logger) LogManager.getLogger(HttpUtil.class.getName());\n-\n-    private final String taskName = \"给自己充电\";\n+    private final String taskName = \"大会员月底B币券充电和月初大会员权益领取\";\n \n     @Override\n     public void run() {\n         Calendar cal = Calendar.getInstance(TimeZone.getTimeZone(\"GMT+8\"));\n         int day = cal.get(Calendar.DATE);\n         //被充电用户的userID\n         String userId = Verify.getInstance().getUserId();\n+        String configChargeUserId = Config.getInstance().getChargeForLove();\n+\n         //B币券余额\n         double couponBalance;\n         //大会员类型\n         int vipType = queryVipStatusType();\n \n-        if (day == 1 && vipType == 2) {\n-            oftenAPI.vipPrivilege(1);\n-            oftenAPI.vipPrivilege(2);\n-        }\n-\n         if (vipType == 0 || vipType == 1) {\n-            logger.info(\"普通会员和月度大会员每月不赠送B币券，所以没法给自己充电哦\");\n+            log.info(\"普通会员和月度大会员每月不赠送B币券，所以没法给自己充电哦\");\n             return;\n         }\n+\n         if (!Config.getInstance().isMonthEndAutoCharge()) {\n-            logger.info(\"未开启月底给自己充电功能\");\n+            log.info(\"未开启月底给自己充电功能\");\n             return;\n         }\n+\n+        if (!\"0\".equals(configChargeUserId)) {\n+            String userName = oftenAPI.queryUserName(configChargeUserId);\n+            if (\"1\".equals(userName)) {\n+                userId = Verify.getInstance().getUserId();\n+                log.info(\"充电对象已置为你本人\");\n+            } else {\n+                userId = Config.getInstance().getChargeForLove();\n+                log.info(\"你配置的充电对象非本人而是: {}\", HelpUtil.userNameEncode(userName));\n+            }\n+        } else {\n+            log.info(\"你配置的充电对象是你本人没错了！\");\n+        }\n+\n         if (userInfo != null) {\n             couponBalance = userInfo.getWallet().getCoupon_balance();\n         } else {\n@@ -63,7 +74,7 @@ public void run() {\n         /*\n           判断条件 是月底&&是年大会员&&b币券余额大于2&&配置项允许自动充电\n          */\n-        if (day == 28 && couponBalance >= 2 &&\n+        if (day >= 28 && couponBalance >= 2 &&\n                 Config.getInstance().isMonthEndAutoCharge()) {\n             String requestBody = \"bp_num=\" + couponBalance\n                     + \"&is_bp_remains_prior=true\"\n@@ -74,28 +85,28 @@ public void run() {\n \n             JsonObject jsonObject = HttpUtil.doPost(ApiList.autoCharge, requestBody);\n \n-            int resultCode = jsonObject.get(statusCodeStr).getAsInt();\n+            int resultCode = jsonObject.get(STATUS_CODE_STR).getAsInt();\n             if (resultCode == 0) {\n                 JsonObject dataJson = jsonObject.get(\"data\").getAsJsonObject();\n                 int statusCode = dataJson.get(\"status\").getAsInt();\n                 if (statusCode == 4) {\n-                    logger.info(\"月底了，给自己充电成功啦，送的B币券没有浪费哦\");\n-                    logger.info(\"本次充值使用了: \" + couponBalance + \"个B币券\");\n+                    log.info(\"月底了，给自己充电成功啦，送的B币券没有浪费哦\");\n+                    log.info(\"本次充值使用了: \" + couponBalance + \"个B币券\");\n                     //获取充电留言token\n                     String orderNo = dataJson.get(\"order_no\").getAsString();\n                     chargeComments(orderNo);\n                 } else {\n-                    logger.debug(\"充电失败了啊 原因: \" + jsonObject);\n+                    log.debug(\"充电失败了啊 原因: \" + jsonObject);\n                 }\n \n             } else {\n-                logger.debug(\"充电失败了啊 原因: \" + jsonObject);\n+                log.debug(\"充电失败了啊 原因: \" + jsonObject);\n             }\n         } else {\n-            if (day == 28) {\n-                logger.info(\"B币券余额不足,充电至少需要2B币券\");\n+            if (day < 28) {\n+                log.info(\"今天是本月的第: \" + day + \"天，还没到充电日子呢\");\n             } else {\n-                logger.info(\"今天是本月的第: \" + day + \"天，还没到给自己充电日子呢\");\n+                log.info(\"本月已经充过电了，睿总送咱的B币券已经没有啦，下月再充啦\");\n             }\n \n         }\n@@ -108,10 +119,10 @@ private void chargeComments(String token) {\n                 + \"&csrf=\" + Verify.getInstance().getBiliJct();\n         JsonObject jsonObject = HttpUtil.doPost(ApiList.chargeComment, requestBody);\n \n-        if (jsonObject.get(statusCodeStr).getAsInt() == 0) {\n-            logger.info(\"充电留言成功\");\n+        if (jsonObject.get(STATUS_CODE_STR).getAsInt() == 0) {\n+            log.info(\"充电留言成功\");\n         } else {\n-            logger.debug(jsonObject.get(\"message\").getAsString());\n+            log.debug(jsonObject.get(\"message\").getAsString());\n         }\n \n     }"
  },
  {
    "sha": "18750b265eeb53d09aa9f6992a1f19cce07f8303",
    "filename": "src/main/java/top/misec/task/CoinAdd.java",
    "status": "modified",
    "additions": 19,
    "deletions": 4,
    "changes": 23,
    "blob_url": "https://github.com/Dimlitter/BILIBILI-HELPER/blob/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/java/top/misec/task/CoinAdd.java",
    "raw_url": "https://github.com/Dimlitter/BILIBILI-HELPER/raw/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/java/top/misec/task/CoinAdd.java",
    "contents_url": "https://api.github.com/repos/Dimlitter/BILIBILI-HELPER/contents/src/main/java/top/misec/task/CoinAdd.java?ref=407eea783c780fd69d7f84d54745d3297770a7ff",
    "patch": "@@ -8,18 +8,19 @@\n import top.misec.login.Verify;\n import top.misec.utils.HttpUtil;\n \n+import java.util.HashMap;\n+import java.util.Map;\n import java.util.Random;\n \n import static top.misec.task.TaskInfoHolder.getVideoId;\n-import static top.misec.task.TaskInfoHolder.statusCodeStr;\n+import static top.misec.task.TaskInfoHolder.STATUS_CODE_STR;\n \n /**\n  * 投币任务\n  *\n  * @author @JunzhouLiu @Kurenai\n  * @since 2020-11-22 5:28\n  */\n-\n @Log4j2\n public class CoinAdd implements Task {\n \n@@ -34,6 +35,9 @@ public void run() {\n         final int maxNumberOfCoins = 5;\n         //获取自定义配置投币数 配置写在src/main/resources/config.json中\n         int setCoin = Config.getInstance().getNumberOfCoins();\n+        // 预留硬币数\n+        int reserveCoins = Config.getInstance().getReserveCoins();\n+\n         //已投的硬币\n         int useCoin = TaskInfoHolder.expConfirm();\n         //投币策略\n@@ -53,8 +57,10 @@ public void run() {\n         Double beforeAddCoinBalance = oftenAPI.getCoinBalance();\n         int coinBalance = (int) Math.floor(beforeAddCoinBalance);\n \n+\n         if (needCoins <= 0) {\n             log.info(\"已完成设定的投币任务，今日无需再投币了\");\n+            // return;\n         } else {\n             log.info(\"投币数调整为: \" + needCoins + \"枚\");\n             //投币数大于余额时，按余额投\n@@ -65,6 +71,12 @@ public void run() {\n             }\n         }\n \n+        if (coinBalance < reserveCoins) {\n+            log.info(\"剩余硬币数为{},低于预留硬币数{},今日不再投币\", beforeAddCoinBalance, reserveCoins);\n+            log.info(\"tips: 当硬币余额少于你配置的预留硬币数时，则会暂停当日投币任务\");\n+            return;\n+        }\n+\n         log.info(\"投币前余额为 : \" + beforeAddCoinBalance);\n         /*\n          * 开始投币\n@@ -116,8 +128,11 @@ private boolean coinAdd(String bvid, int multiply, int selectLike) {\n         String videoTitle = oftenAPI.videoTitle(bvid);\n         //判断曾经是否对此av投币过\n         if (!isCoin(bvid)) {\n-            JsonObject jsonObject = HttpUtil.doPost(ApiList.CoinAdd, requestBody);\n-            if (jsonObject.get(statusCodeStr).getAsInt() == 0) {\n+            Map<String, String> headers = new HashMap<>();\n+            headers.put(\"Referer\", \"https://www.bilibili.com/video/\" + bvid);\n+            headers.put(\"Origin\", \"https://www.bilibili.com\");\n+            JsonObject jsonObject = HttpUtil.doPost(ApiList.CoinAdd, requestBody, headers);\n+            if (jsonObject.get(STATUS_CODE_STR).getAsInt() == 0) {\n \n                 log.info(\"为 \" + videoTitle + \" 投币成功\");\n                 return true;"
  },
  {
    "sha": "5b1ad76308183391637c3ba2aaba100df40be433",
    "filename": "src/main/java/top/misec/task/DailyTask.java",
    "status": "modified",
    "additions": 15,
    "deletions": 6,
    "changes": 21,
    "blob_url": "https://github.com/Dimlitter/BILIBILI-HELPER/blob/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/java/top/misec/task/DailyTask.java",
    "raw_url": "https://github.com/Dimlitter/BILIBILI-HELPER/raw/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/java/top/misec/task/DailyTask.java",
    "contents_url": "https://api.github.com/repos/Dimlitter/BILIBILI-HELPER/contents/src/main/java/top/misec/task/DailyTask.java?ref=407eea783c780fd69d7f84d54745d3297770a7ff",
    "patch": "@@ -12,7 +12,7 @@\n import java.util.Random;\n \n import static top.misec.task.TaskInfoHolder.calculateUpgradeDays;\n-import static top.misec.task.TaskInfoHolder.statusCodeStr;\n+import static top.misec.task.TaskInfoHolder.STATUS_CODE_STR;\n \n /**\n  * @author @JunzhouLiu @Kurenai\n@@ -21,17 +21,26 @@\n @Log4j2\n public class DailyTask {\n \n-    private final List<Task> dailyTasks =\n-            Arrays.asList(new UserCheck(), new VideoWatch(), new MangaSign(), new CoinAdd(), new Silver2coin(), new LiveCheckin(), new ChargeMe(), new GetMangaVipReward());\n+    private final List<Task> dailyTasks = Arrays.asList(\n+            new UserCheck(),\n+            new VideoWatch(),\n+            new MangaSign(),\n+            new CoinAdd(),\n+            new Silver2coin(),\n+            new LiveCheckin(),\n+            new GiveGift(),\n+            new ChargeMe(),\n+            new GetVipPrivilege()\n+    );\n \n     public void doDailyTask() {\n         try {\n             printTime();\n             log.debug(\"任务启动中\");\n             for (Task task : dailyTasks) {\n-                log.info(\"-----{}开始-----\", task.getName());\n+                log.info(\"------{}开始------\", task.getName());\n                 task.run();\n-                log.info(\"-----任务结束-----\\n\");\n+                log.info(\"------{}结束------\\n\", task.getName());\n                 taskSuspend();\n             }\n             log.info(\"本日任务已全部执行完毕\");\n@@ -50,7 +59,7 @@ public void doDailyTask() {\n      */\n     public static JsonObject getDailyTaskStatus() {\n         JsonObject jsonObject = HttpUtil.doGet(ApiList.reward);\n-        int responseCode = jsonObject.get(statusCodeStr).getAsInt();\n+        int responseCode = jsonObject.get(STATUS_CODE_STR).getAsInt();\n         if (responseCode == 0) {\n             log.info(\"请求本日任务完成状态成功\");\n             return jsonObject.get(\"data\").getAsJsonObject();"
  },
  {
    "sha": "bfc35d79ed4aae892f19743a42c3845ee7eb8f83",
    "filename": "src/main/java/top/misec/task/ExtensionMethod.java",
    "status": "added",
    "additions": 15,
    "deletions": 0,
    "changes": 15,
    "blob_url": "https://github.com/Dimlitter/BILIBILI-HELPER/blob/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/java/top/misec/task/ExtensionMethod.java",
    "raw_url": "https://github.com/Dimlitter/BILIBILI-HELPER/raw/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/java/top/misec/task/ExtensionMethod.java",
    "contents_url": "https://api.github.com/repos/Dimlitter/BILIBILI-HELPER/contents/src/main/java/top/misec/task/ExtensionMethod.java?ref=407eea783c780fd69d7f84d54745d3297770a7ff",
    "patch": "@@ -0,0 +1,15 @@\n+package top.misec.task;\n+\n+import java.lang.annotation.ElementType;\n+import java.lang.annotation.Retention;\n+import java.lang.annotation.RetentionPolicy;\n+import java.lang.annotation.Target;\n+\n+/**\n+ * @author Junzhou\n+ */\n+@Target({ElementType.METHOD, ElementType.CONSTRUCTOR})\n+@Retention(RetentionPolicy.CLASS)\n+public @interface ExtensionMethod {\n+\n+}"
  },
  {
    "sha": "ca603a283c02506d93513fdf96d17857ce769c73",
    "filename": "src/main/java/top/misec/task/GetMangaVipReward.java",
    "status": "removed",
    "additions": 0,
    "deletions": 72,
    "changes": 72,
    "blob_url": "https://github.com/Dimlitter/BILIBILI-HELPER/blob/989b729d275a0b27c4dd521730b31cd56561c962/src/main/java/top/misec/task/GetMangaVipReward.java",
    "raw_url": "https://github.com/Dimlitter/BILIBILI-HELPER/raw/989b729d275a0b27c4dd521730b31cd56561c962/src/main/java/top/misec/task/GetMangaVipReward.java",
    "contents_url": "https://api.github.com/repos/Dimlitter/BILIBILI-HELPER/contents/src/main/java/top/misec/task/GetMangaVipReward.java?ref=989b729d275a0b27c4dd521730b31cd56561c962",
    "patch": "@@ -1,72 +0,0 @@\n-package top.misec.task;\n-\n-import com.google.gson.JsonObject;\n-import org.apache.logging.log4j.LogManager;\n-import org.apache.logging.log4j.core.Logger;\n-import top.misec.apiquery.ApiList;\n-import top.misec.utils.HttpUtil;\n-\n-import java.util.Calendar;\n-import java.util.TimeZone;\n-\n-import static top.misec.task.TaskInfoHolder.queryVipStatusType;\n-import static top.misec.task.TaskInfoHolder.statusCodeStr;\n-\n-/**\n- * 漫画权益领取\n- *\n- * @author @JunzhouLiu @Kurenai @happy888888\n- * @since 2020-11-22 5:48\n- */\n-\n-public class GetMangaVipReward implements Task {\n-\n-    static Logger logger = (Logger) LogManager.getLogger(GetMangaVipReward.class.getName());\n-\n-    private final String taskName = \"漫画权益领取\";\n-    /**\n-     * 权益号，由https://api.bilibili.com/x/vip/privilege/my\n-     * 得到权益号数组，取值范围为数组中的整数\n-     * 为方便直接取1，为领取漫读劵，暂时不取其他的值\n-     */\n-    private int reasonId = 1;\n-\n-    public GetMangaVipReward() {\n-    }\n-\n-    public GetMangaVipReward(int reasonId) {\n-        this.reasonId = reasonId;\n-    }\n-\n-    @Override\n-    public void run() {\n-        Calendar cal = Calendar.getInstance(TimeZone.getTimeZone(\"GMT+8\"));\n-        int day = cal.get(Calendar.DATE);\n-\n-        //根据userInfo.getVipStatus() ,如果是1 ，会员有效，0会员失效。\n-        //@JunzhouLiu: fixed query_vipStatusType()现在可以查询会员状态，以及会员类型了 2020-10-15\n-        if (day != 1 || queryVipStatusType() == 0) {\n-            //一个月执行一次就行，跟几号没关系，由B站策略决定(有可能改领取时间)\n-            logger.info(\"本日非执行日期\");\n-            return;\n-        }\n-\n-\n-\n-        String requestBody = \"{\\\"reason_id\\\":\" + reasonId + \"}\";\n-        //注意参数构造格式为json，不知道需不需要重载下面的Post函数改请求头\n-        JsonObject jsonObject = HttpUtil.doPost(ApiList.mangaGetVipReward, requestBody);\n-        if (jsonObject.get(statusCodeStr).getAsInt() == 0) {\n-            //@happy888888:好像也可以getAsString或,getAsShort\n-            //@JunzhouLiu:Int比较好判断\n-            logger.info(\"大会员成功领取\" + jsonObject.get(\"data\").getAsJsonObject().get(\"amount\").getAsInt() + \"张漫读劵\");\n-        } else {\n-            logger.info(\"大会员领取漫读劵失败，原因为:\" + jsonObject.get(\"msg\").getAsString());\n-        }\n-    }\n-\n-    @Override\n-    public String getName() {\n-        return taskName;\n-    }\n-}"
  },
  {
    "sha": "53924ede287228cac2a877dbaf4cbfcefc2fad54",
    "filename": "src/main/java/top/misec/task/GetVideoId.java",
    "status": "modified",
    "additions": 7,
    "deletions": 1,
    "changes": 8,
    "blob_url": "https://github.com/Dimlitter/BILIBILI-HELPER/blob/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/java/top/misec/task/GetVideoId.java",
    "raw_url": "https://github.com/Dimlitter/BILIBILI-HELPER/raw/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/java/top/misec/task/GetVideoId.java",
    "contents_url": "https://api.github.com/repos/Dimlitter/BILIBILI-HELPER/contents/src/main/java/top/misec/task/GetVideoId.java?ref=407eea783c780fd69d7f84d54745d3297770a7ff",
    "patch": "@@ -3,6 +3,7 @@\n import com.google.gson.JsonArray;\n import com.google.gson.JsonElement;\n import com.google.gson.JsonObject;\n+import lombok.extern.log4j.Log4j2;\n import top.misec.apiquery.ApiList;\n import top.misec.login.Verify;\n import top.misec.utils.HttpUtil;\n@@ -15,6 +16,8 @@\n  * @author @JunzhouLiu\n  * @create 2020/11/12 13:17\n  */\n+\n+@Log4j2\n public class GetVideoId {\n     private ArrayList<String> followUpVideoList;\n     private ArrayList<String> rankVideoList;\n@@ -50,8 +53,11 @@ public String getFollowUpRandomVideoBvid() {\n     }\n \n     /**\n-     * 从阻塞队列中获取bv号\n+     * 暂未启用的方法\n+     *\n+     * @return 从阻塞队列中获取bv号\n      */\n+    @ExtensionMethod\n     public String getFollowUpRecentVideoBvid() {\n         return followUpVideoQueue.peek() == null ? getRegionRankingVideoBvid() : followUpVideoQueue.poll();\n     }"
  },
  {
    "sha": "64200f866c7444a7b7c9eb54458145879bdfd4d9",
    "filename": "src/main/java/top/misec/task/GetVipPrivilege.java",
    "status": "added",
    "additions": 88,
    "deletions": 0,
    "changes": 88,
    "blob_url": "https://github.com/Dimlitter/BILIBILI-HELPER/blob/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/java/top/misec/task/GetVipPrivilege.java",
    "raw_url": "https://github.com/Dimlitter/BILIBILI-HELPER/raw/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/java/top/misec/task/GetVipPrivilege.java",
    "contents_url": "https://api.github.com/repos/Dimlitter/BILIBILI-HELPER/contents/src/main/java/top/misec/task/GetVipPrivilege.java?ref=407eea783c780fd69d7f84d54745d3297770a7ff",
    "patch": "@@ -0,0 +1,88 @@\n+package top.misec.task;\n+\n+import com.google.gson.JsonObject;\n+import lombok.Data;\n+import lombok.extern.log4j.Log4j2;\n+import top.misec.apiquery.ApiList;\n+import top.misec.apiquery.oftenAPI;\n+import top.misec.utils.HttpUtil;\n+\n+import java.util.Calendar;\n+import java.util.TimeZone;\n+\n+import static top.misec.task.TaskInfoHolder.queryVipStatusType;\n+import static top.misec.task.TaskInfoHolder.STATUS_CODE_STR;\n+\n+/**\n+ * 漫画权益领取\n+ *\n+ * @author @JunzhouLiu @Kurenai @happy888888\n+ * @since 2020-11-22 5:48\n+ */\n+@Log4j2\n+@Data\n+public class GetVipPrivilege implements Task {\n+\n+    /**\n+     * 权益号，由https://api.bilibili.com/x/vip/privilege/my\n+     * 得到权益号数组，取值范围为数组中的整数\n+     * 为方便直接取1，为领取漫读劵，暂时不取其他的值\n+     */\n+    private int reasonId = 1;\n+\n+    public GetVipPrivilege() {\n+    }\n+\n+    /**\n+     * @param reasonId 1\n+     */\n+    @ExtensionMethod\n+    public GetVipPrivilege(int reasonId) {\n+        this.reasonId = reasonId;\n+    }\n+\n+    @Override\n+    public void run() {\n+        Calendar cal = Calendar.getInstance(TimeZone.getTimeZone(\"GMT+8\"));\n+        int day = cal.get(Calendar.DATE);\n+\n+        //根据userInfo.getVipStatus() ,如果是1 ，会员有效，0会员失效。\n+        //@JunzhouLiu: fixed query_vipStatusType()现在可以查询会员状态，以及会员类型了 2020-10-15\n+        int vipType = queryVipStatusType();\n+\n+        if (vipType == 0) {\n+            log.info(\"非大会员，跳过领取大会员权益\");\n+            return;\n+        }\n+\n+        if (vipType == 1 && day == 1) {\n+            log.info(\"开始领取大会员漫画权益\");\n+            String requestBody = \"{\\\"reason_id\\\":\" + reasonId + \"}\";\n+            //注意参数构造格式为json，不知道需不需要重载下面的Post函数改请求头\n+            JsonObject jsonObject = HttpUtil.doPost(ApiList.mangaGetVipReward, requestBody);\n+            if (jsonObject.get(STATUS_CODE_STR).getAsInt() == 0) {\n+                //@happy888888:好像也可以getAsString或,getAsShort\n+                //@JunzhouLiu:Int比较好判断\n+                log.info(\"大会员成功领取\" + jsonObject.get(\"data\").getAsJsonObject().get(\"amount\").getAsInt() + \"张漫读劵\");\n+            } else {\n+                log.info(\"大会员领取漫读劵失败，原因为:\" + jsonObject.get(\"msg\").getAsString());\n+            }\n+        } else {\n+            log.info(\"本日非领取大会员漫画执行日期\");\n+        }\n+\n+        if (day == 1 || day % 7 == 0 && vipType == 2) {\n+            log.info(\"开始领取年度大会员权益\");\n+            oftenAPI.vipPrivilege(1);\n+            oftenAPI.vipPrivilege(2);\n+        } else {\n+            log.info(\"本日非领取年度大会员权益执行日期\");\n+        }\n+\n+    }\n+\n+    @Override\n+    public String getName() {\n+        return \"漫画权益领取\";\n+    }\n+}"
  },
  {
    "sha": "99655ede3ec7fe21e68c343a3333d94ca610bf39",
    "filename": "src/main/java/top/misec/task/GiveGift.java",
    "status": "added",
    "additions": 210,
    "deletions": 0,
    "changes": 210,
    "blob_url": "https://github.com/Dimlitter/BILIBILI-HELPER/blob/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/java/top/misec/task/GiveGift.java",
    "raw_url": "https://github.com/Dimlitter/BILIBILI-HELPER/raw/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/java/top/misec/task/GiveGift.java",
    "contents_url": "https://api.github.com/repos/Dimlitter/BILIBILI-HELPER/contents/src/main/java/top/misec/task/GiveGift.java?ref=407eea783c780fd69d7f84d54745d3297770a7ff",
    "patch": "@@ -0,0 +1,210 @@\n+package top.misec.task;\n+\n+import com.google.gson.JsonArray;\n+import com.google.gson.JsonObject;\n+import lombok.extern.log4j.Log4j2;\n+import top.misec.config.Config;\n+import top.misec.login.Verify;\n+import top.misec.utils.HttpUtil;\n+\n+/**\n+ * B站直播送出即将过期的礼物\n+ *\n+ * @author srcrs\n+ * @Time 2020-10-13\n+ */\n+\n+@Log4j2\n+public class GiveGift implements Task {\n+\n+    private final String taskName = \"B站直播送出即将过期的礼物\";\n+    /**\n+     * 获取日志记录器对象\n+     */\n+    Config config = Config.getInstance();\n+\n+    @Override\n+    public void run() {\n+        try {\n+            /* 从配置类中读取是否需要执行赠送礼物 */\n+            if (!config.isGiveGift()) {\n+                log.info(\"未开启自动送出即将过期礼物功能\");\n+                return;\n+            }\n+            /* 直播间 id */\n+            String roomId = \"\";\n+            /* 直播间 uid 即 up 的 id*/\n+            String uid = \"\";\n+            /* B站后台时间戳为10位 */\n+            long nowTime = System.currentTimeMillis() / 1000;\n+            /* 获得礼物列表 */\n+            JsonArray jsonArray = xliveGiftBagList();\n+            /* 判断是否有过期礼物出现 */\n+            boolean flag = true;\n+            for (Object object : jsonArray) {\n+                JsonObject json = (JsonObject) object;\n+                long expireAt = Long.parseLong(json.get(\"expire_at\").getAsString());\n+                /* 礼物还剩 1 天送出 */\n+                /* 永久礼物到期时间为 0 */\n+                if ((expireAt - nowTime) < 60 * 60 * 25 * 1 && expireAt != 0) {\n+                    /* 如果有未送出的礼物，则获取一个直播间 */\n+                    if (\"\".equals(roomId)) {\n+                        JsonObject uidAndRid = getuidAndRid();\n+                        uid = uidAndRid.get(\"uid\").getAsString();\n+                        roomId = uidAndRid.get(\"roomid\").getAsString();\n+                    }\n+\n+                    String requestBody = \"biz_id=\" + roomId +\n+                            \"&ruid=\" + uid +\n+                            \"&bag_id=\" + json.get(\"bag_id\") +\n+                            \"&gift_id=\" + json.get(\"gift_id\") +\n+                            \"&gift_num=\" + json.get(\"gift_num\");\n+                    JsonObject jsonObject3 = xliveBagSend(requestBody);\n+                    if (\"0\".equals(jsonObject3.get(\"code\").getAsString())) {\n+                        /* 礼物的名字 */\n+                        String giftName = jsonObject3.get(\"data\").getAsJsonObject().get(\"gift_name\").getAsString();\n+                        /* 礼物的数量 */\n+                        String giftNum = jsonObject3.get(\"data\").getAsJsonObject().get(\"gift_num\").getAsString();\n+                        log.info(\"给直播间 - {} - {} - 数量: {}✔\", roomId, giftName, giftNum);\n+                        flag = false;\n+                    } else {\n+                        log.debug(\"送礼失败, 原因 : {}❌\", jsonObject3);\n+                    }\n+                }\n+            }\n+            if (flag) {\n+                log.info(\"当前无即将过期礼物❌\");\n+            }\n+        } catch (Exception e) {\n+            log.error(\"💔赠送礼物异常 : \", e);\n+        }\n+    }\n+\n+    /**\n+     * 获取一个直播间的room_id\n+     *\n+     * @return String\n+     * @author srcrs\n+     * @Time 2020-10-13\n+     */\n+    public String xliveGetRecommend() {\n+        return HttpUtil.doGet(\"https://api.live.bilibili.com/relation/v1/AppWeb/getRecommendList\")\n+                .get(\"data\").getAsJsonObject()\n+                .get(\"list\").getAsJsonArray()\n+                .get(6).getAsJsonObject()\n+                .get(\"roomid\").getAsString();\n+    }\n+\n+    /**\n+     * B站获取直播间的uid\n+     *\n+     * @param roomId up 主的 uid\n+     * @return String\n+     * @author srcrs\n+     * @Time 2020-10-13\n+     */\n+    public String xliveGetRoomUid(String roomId) {\n+        JsonObject pJson = new JsonObject();\n+        pJson.addProperty(\"room_id\", roomId);\n+        String urlPram = \"?room_id=\" + roomId;\n+        return HttpUtil.doGet(\"https://api.live.bilibili.com/xlive/web-room/v1/index/getInfoByRoom\" + urlPram)\n+                .get(\"data\").getAsJsonObject()\n+                .get(\"room_info\").getAsJsonObject()\n+                .get(\"uid\").getAsString();\n+    }\n+\n+    /**\n+     * 根据 uid 获取其 roomid\n+     *\n+     * @param mid 即 uid\n+     * @return String 返回一个直播间id\n+     * @author srcrs\n+     * @Time 2020-11-20\n+     */\n+    public String getRoomInfoOld(String mid) {\n+        JsonObject pJson = new JsonObject();\n+        pJson.addProperty(\"mid\", Integer.parseInt(mid));\n+        String urlPram = \"?mid=\" + mid;\n+        return HttpUtil.doGet(\"http://api.live.bilibili.com/room/v1/Room/getRoomInfoOld\" + urlPram)\n+                .get(\"data\").getAsJsonObject()\n+                .get(\"roomid\").getAsString();\n+    }\n+\n+    /**\n+     * B站直播获取背包礼物\n+     *\n+     * @return JsonArray\n+     * @author srcrs\n+     * @Time 2020-10-13\n+     */\n+    public JsonArray xliveGiftBagList() {\n+        return HttpUtil.doGet(\"https://api.live.bilibili.com/xlive/web-room/v1/gift/bag_list\")\n+                .get(\"data\").getAsJsonObject()\n+                .get(\"list\").getAsJsonArray();\n+    }\n+\n+    /**\n+     * B站直播送出背包的礼物\n+     *\n+     * @param requestBody\n+     * @return JsonObject\n+     * @author srcrs\n+     * @Time 2020-10-13\n+     */\n+    public JsonObject xliveBagSend(String requestBody) {\n+\n+        requestBody += \"&uid=\" + Verify.getInstance().getUserId() +\n+                \"&csrf=\" + Verify.getInstance().getBiliJct() +\n+                \"&send_ruid=\" + \"0\" +\n+                \"&storm_beat_id=\" + \"0\" +\n+                \"&price=\" + \"0\" +\n+                \"&platform=\" + \"pc\" +\n+                \"&biz_code=\" + \"live\";\n+\n+        return HttpUtil.doPost(\"https://api.live.bilibili.com/gift/v2/live/bag_send\", requestBody);\n+    }\n+\n+    /**\n+     * 获取一个包含 uid 和 RooId 的 json 对象\n+     *\n+     * @return JsonObject 返回一个包含 uid 和 RooId 的 json 对象\n+     * @author srcrs\n+     * @Time 2020-11-20\n+     */\n+    public JsonObject getuidAndRid() {\n+        /* 直播间 id */\n+        String roomId;\n+        /* 直播间 uid 即 up 的 id*/\n+        String uid;\n+        if (!config.getUpLive().equals(\"0\")) {\n+            /* 获取指定up的id */\n+            uid = config.getUpLive();\n+            roomId = getRoomInfoOld(uid);\n+            String status = \"0\";\n+            if (status.equals(roomId)) {\n+                log.info(\"自定义up {} 无直播间\", uid);\n+                /* 随机获取一个直播间 */\n+                roomId = xliveGetRecommend();\n+                uid = xliveGetRoomUid(roomId);\n+                log.info(\"随机直播间\");\n+            } else {\n+                log.info(\"自定义up {} 的直播间\", uid);\n+            }\n+\n+        } else {\n+            /* 随机获取一个直播间 */\n+            roomId = xliveGetRecommend();\n+            uid = xliveGetRoomUid(roomId);\n+            log.info(\"随机直播间\");\n+        }\n+        JsonObject json = new JsonObject();\n+        json.addProperty(\"uid\", uid);\n+        json.addProperty(\"roomid\", roomId);\n+        return json;\n+    }\n+\n+    @Override\n+    public String getName() {\n+        return taskName;\n+    }\n+}"
  },
  {
    "sha": "087c5e01ad5cf98a944597bb1b032b6959d5f7d0",
    "filename": "src/main/java/top/misec/task/LiveCheckin.java",
    "status": "modified",
    "additions": 6,
    "deletions": 8,
    "changes": 14,
    "blob_url": "https://github.com/Dimlitter/BILIBILI-HELPER/blob/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/java/top/misec/task/LiveCheckin.java",
    "raw_url": "https://github.com/Dimlitter/BILIBILI-HELPER/raw/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/java/top/misec/task/LiveCheckin.java",
    "contents_url": "https://api.github.com/repos/Dimlitter/BILIBILI-HELPER/contents/src/main/java/top/misec/task/LiveCheckin.java?ref=407eea783c780fd69d7f84d54745d3297770a7ff",
    "patch": "@@ -1,36 +1,34 @@\n package top.misec.task;\n \n import com.google.gson.JsonObject;\n-import org.apache.logging.log4j.LogManager;\n-import org.apache.logging.log4j.core.Logger;\n+import lombok.extern.log4j.Log4j2;\n import top.misec.apiquery.ApiList;\n import top.misec.utils.HttpUtil;\n \n-import static top.misec.task.TaskInfoHolder.statusCodeStr;\n+import static top.misec.task.TaskInfoHolder.STATUS_CODE_STR;\n \n /**\n  * 直播签到\n  *\n  * @author @JunzhouLiu @Kurenai\n  * @since 2020-11-22 5:42\n  */\n-\n+@Log4j2\n public class LiveCheckin implements Task {\n \n-    static Logger logger = (Logger) LogManager.getLogger(LiveCheckin.class.getName());\n \n     private final String taskName = \"直播签到\";\n \n     @Override\n     public void run() {\n         JsonObject liveCheckinResponse = HttpUtil.doGet(ApiList.liveCheckin);\n-        int code = liveCheckinResponse.get(statusCodeStr).getAsInt();\n+        int code = liveCheckinResponse.get(STATUS_CODE_STR).getAsInt();\n         if (code == 0) {\n             JsonObject data = liveCheckinResponse.get(\"data\").getAsJsonObject();\n-            logger.info(\"直播签到成功，本次签到获得\" + data.get(\"text\").getAsString() + \",\" + data.get(\"specialText\").getAsString());\n+            log.info(\"直播签到成功，本次签到获得\" + data.get(\"text\").getAsString() + \",\" + data.get(\"specialText\").getAsString());\n         } else {\n             String message = liveCheckinResponse.get(\"message\").getAsString();\n-            logger.debug(\"直播签到失败: \" + message);\n+            log.debug(\"直播签到失败: \" + message);\n         }\n     }\n "
  },
  {
    "sha": "556fd33cbee7d700f0e0eab40ab9755cd1560383",
    "filename": "src/main/java/top/misec/task/MangaRead.java",
    "status": "added",
    "additions": 42,
    "deletions": 0,
    "changes": 42,
    "blob_url": "https://github.com/Dimlitter/BILIBILI-HELPER/blob/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/java/top/misec/task/MangaRead.java",
    "raw_url": "https://github.com/Dimlitter/BILIBILI-HELPER/raw/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/java/top/misec/task/MangaRead.java",
    "contents_url": "https://api.github.com/repos/Dimlitter/BILIBILI-HELPER/contents/src/main/java/top/misec/task/MangaRead.java?ref=407eea783c780fd69d7f84d54745d3297770a7ff",
    "patch": "@@ -0,0 +1,42 @@\n+package top.misec.task;\n+\n+import com.google.gson.JsonObject;\n+import lombok.extern.log4j.Log4j2;\n+import top.misec.apiquery.ApiList;\n+import top.misec.utils.HttpUtil;\n+\n+import static top.misec.task.TaskInfoHolder.STATUS_CODE_STR;\n+\n+/**\n+ * @author Junzhou Liu\n+ * @create 2021/1/13 17:50\n+ */\n+@Log4j2\n+public class MangaRead implements Task {\n+\n+    @Override\n+    public void run() {\n+        String urlParam = \"?device=pc&platform=web\";\n+        String requestBody = \"comic_id=27355\" +\n+                \"&ep_id=381662\";\n+        JsonObject jsonObject = new JsonObject();\n+        jsonObject.addProperty(\"device\", \"pc\");\n+        jsonObject.addProperty(\"platform\", \"web\");\n+        jsonObject.addProperty(\"comic_id\", \"27355\");\n+        jsonObject.addProperty(\"ep_id\", \"381662\");\n+\n+        JsonObject result = HttpUtil.doPost(ApiList.mangaRead + urlParam, jsonObject);\n+        int code = result.get(STATUS_CODE_STR).getAsInt();\n+        if (code == 0) {\n+            log.info(\"本日漫画自动阅读1章节成功！，阅读漫画为：堀与宫村\");\n+        } else {\n+            log.debug(\"阅读失败,错误信息为\\n```json\\n{}\\n```\", result);\n+        }\n+\n+    }\n+\n+    @Override\n+    public String getName() {\n+        return \"每日漫画阅读\";\n+    }\n+}"
  },
  {
    "sha": "879fb9adf52b67c1e1a6cbad71374a644bc206e3",
    "filename": "src/main/java/top/misec/task/MangaSign.java",
    "status": "modified",
    "additions": 4,
    "deletions": 5,
    "changes": 9,
    "blob_url": "https://github.com/Dimlitter/BILIBILI-HELPER/blob/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/java/top/misec/task/MangaSign.java",
    "raw_url": "https://github.com/Dimlitter/BILIBILI-HELPER/raw/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/java/top/misec/task/MangaSign.java",
    "contents_url": "https://api.github.com/repos/Dimlitter/BILIBILI-HELPER/contents/src/main/java/top/misec/task/MangaSign.java?ref=407eea783c780fd69d7f84d54745d3297770a7ff",
    "patch": "@@ -1,8 +1,7 @@\n package top.misec.task;\n \n import com.google.gson.JsonObject;\n-import org.apache.logging.log4j.LogManager;\n-import org.apache.logging.log4j.core.Logger;\n+import lombok.extern.log4j.Log4j2;\n import top.misec.apiquery.ApiList;\n import top.misec.config.Config;\n import top.misec.utils.HttpUtil;\n@@ -14,9 +13,9 @@\n  * @since 2020-11-22 5:22\n  */\n \n+@Log4j2\n public class MangaSign implements Task {\n \n-    static Logger logger = (Logger) LogManager.getLogger(MangaSign.class.getName());\n \n     private final String taskName = \"漫画签到\";\n \n@@ -28,9 +27,9 @@ public void run() {\n         JsonObject result = HttpUtil.doPost(ApiList.Manga, requestBody);\n \n         if (result == null) {\n-            logger.info(\"哔哩哔哩漫画已经签到过了\");\n+            log.info(\"哔哩哔哩漫画已经签到过了\");\n         } else {\n-            logger.info(\"完成漫画签到\");\n+            log.info(\"完成漫画签到\");\n         }\n     }\n "
  }
]
