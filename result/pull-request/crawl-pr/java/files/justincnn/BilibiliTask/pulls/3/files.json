[
  {
    "sha": "e3ec8f9d956468880148ddd17e09f6e51f667250",
    "filename": ".github/workflows/Bilibili.yml",
    "status": "modified",
    "additions": 3,
    "deletions": 0,
    "changes": 3,
    "blob_url": "https://github.com/justincnn/BilibiliTask/blob/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/.github/workflows/Bilibili.yml",
    "raw_url": "https://github.com/justincnn/BilibiliTask/raw/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/.github/workflows/Bilibili.yml",
    "contents_url": "https://api.github.com/repos/justincnn/BilibiliTask/contents/.github/workflows/Bilibili.yml?ref=6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5",
    "patch": "@@ -38,5 +38,8 @@ jobs:\n         SCKEY: ${{ secrets.SCKEY }}\n         DINGTALK: ${{secrets.DINGTALK}}\n         PUSHPLUSTK: ${{secrets.PUSHPLUSTK}}\n+        SENDKEY: ${{ secrets.SENDKEY }}\n+        TELEGRAM_BOT_TOKEN: ${{secrets.TELEGRAM_BOT_TOKEN}}\n+        TELEGRAM_CHAT_ID: ${{secrets.TELEGRAM_CHAT_ID}}\n       run:\n         sh gradlew runMain"
  },
  {
    "sha": "2a6c036ffed2ce28af6584c3440410e5200cb05e",
    "filename": ".github/workflows/avoid.yml",
    "status": "added",
    "additions": 32,
    "deletions": 0,
    "changes": 32,
    "blob_url": "https://github.com/justincnn/BilibiliTask/blob/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/.github/workflows/avoid.yml",
    "raw_url": "https://github.com/justincnn/BilibiliTask/raw/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/.github/workflows/avoid.yml",
    "contents_url": "https://api.github.com/repos/justincnn/BilibiliTask/contents/.github/workflows/avoid.yml?ref=6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5",
    "patch": "@@ -0,0 +1,32 @@\n+name: 'Avoid workflow being suspended'\n+\n+on:\n+  workflow_dispatch:\n+  schedule:\n+    - cron: '0 0 1 * *'\n+\n+jobs:\n+  avoid_workflow_suspended:\n+    runs-on: ubuntu-latest\n+    steps:\n+      - name: 'Checkout codes'\n+        uses: actions/checkout@v2\n+      \n+      - name: 'Avoid Github Workflow being suspended'\n+        run: echo $(cat /proc/sys/kernel/random/uuid) > UUID.txt\n+      \n+      - name: 'Commit Files'\n+        id: commit\n+        run: |\n+          git config --local user.email \"action@github.com\"\n+          git config --local user.name \"GitHub Action\"\n+          git add .\n+          git diff --quiet && git diff --staged --quiet || git commit -am 'avoid being suspended'\n+          echo ::set-output name=status::success\n+           \n+      - name: 'GitHub Push'\n+        if: steps.commit.output.status != 'success'\n+        uses: ad-m/github-push-action@v0.6.0\n+        with:\n+          github_token: ${{ secrets.GITHUB_TOKEN }}\n+          branch: ${{ github.ref }}"
  },
  {
    "sha": "0cdfec762beae6d4ee54b733e15a7f49ea720cc8",
    "filename": ".idea/inspectionProfiles/Project_Default.xml",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/justincnn/BilibiliTask/blob/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/.idea/inspectionProfiles/Project_Default.xml",
    "raw_url": "https://github.com/justincnn/BilibiliTask/raw/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/.idea/inspectionProfiles/Project_Default.xml",
    "contents_url": "https://api.github.com/repos/justincnn/BilibiliTask/contents/.idea/inspectionProfiles/Project_Default.xml?ref=6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5",
    "patch": "@@ -30,7 +30,7 @@\n       <option name=\"IGNORE_JAVADOC_PERIOD\" value=\"true\" />\n       <option name=\"IGNORE_DUPLICATED_THROWS\" value=\"false\" />\n       <option name=\"IGNORE_POINT_TO_ITSELF\" value=\"false\" />\n-      <option name=\"myAdditionalJavadocTags\" value=\"Time,date\" />\n+      <option name=\"myAdditionalJavadocTags\" value=\"Time,date,base\" />\n     </inspection_tool>\n   </profile>\n </component>\n\\ No newline at end of file"
  },
  {
    "sha": "18448d955074f652a35e7a7d8644823858980509",
    "filename": "Dockerfile",
    "status": "added",
    "additions": 13,
    "deletions": 0,
    "changes": 13,
    "blob_url": "https://github.com/justincnn/BilibiliTask/blob/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/Dockerfile",
    "raw_url": "https://github.com/justincnn/BilibiliTask/raw/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/Dockerfile",
    "contents_url": "https://api.github.com/repos/justincnn/BilibiliTask/contents/Dockerfile?ref=6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5",
    "patch": "@@ -0,0 +1,13 @@\n+FROM anapsix/alpine-java:8u201b09_jdk_unlimited\n+\n+WORKDIR /app\n+COPY . /app\n+\n+RUN crontab -l | { cat; echo \"1 8 * * * java -jar /app/BilibiliTask-1.0.9-all.jar >> /var/log/bilibili_task.log 2>&1\"; } | crontab -\n+RUN touch /var/log/bilibili_task.log\n+\n+RUN sh gradlew clean build\n+RUN cp /app/build/libs/*.jar /app/\n+RUN sh gradlew clean\n+\n+CMD crond && tail -f /var/log/bilibili_task.log"
  },
  {
    "sha": "0c6f553221eeaecef91e65707dd70e0e2fab3178",
    "filename": "README.md",
    "status": "modified",
    "additions": 105,
    "deletions": 17,
    "changes": 122,
    "blob_url": "https://github.com/justincnn/BilibiliTask/blob/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/README.md",
    "raw_url": "https://github.com/justincnn/BilibiliTask/raw/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/README.md",
    "contents_url": "https://api.github.com/repos/justincnn/BilibiliTask/contents/README.md?ref=6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5",
    "patch": "@@ -1,10 +1,12 @@\n-<div align=\"center\"> \n+<div align=\"center\">\n <h1 align=\"center\">BilibiliåŠ©æ‰‹</h1>\n <img src=\"https://img.shields.io/github/issues/srcrs/BilibiliTask?color=green\">\n <img src=\"https://img.shields.io/github/stars/srcrs/BilibiliTask?color=yellow\">\n <img src=\"https://img.shields.io/github/forks/srcrs/BilibiliTask?color=orange\">\n <img src=\"https://img.shields.io/github/license/srcrs/BilibiliTask?color=ff69b4\">\n <img src=\"https://img.shields.io/github/search/srcrs/BilibiliTask/main?color=blue\">\n+<img src=\"https://img.shields.io/github/v/release/srcrs/BilibiliTask?color=blueviolet\">\n+<img src=\"https://img.shields.io/github/languages/code-size/srcrs/BilibiliTask?color=critical\">\n </div>\n \n # ç®€ä»‹\n@@ -16,37 +18,41 @@\n \n å¼€æºä¸æ˜“ï¼Œå¦‚æœæœ¬é¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œé‚£ä¹ˆå°±è¯·ç»™ä¸ª`star`å§ã€‚ğŸ˜„\n \n+é‡è¦æç¤ºï¼Œå¦‚æœæ”¶åˆ°äº†`b`ç«™çš„è´¦å·å®‰å…¨é€šçŸ¥ï¼Œå¯ä»¥è€ƒè™‘å°†`Actions`ç¦ç”¨ä¸€æ®µæ—¶é—´ï¼Œè§‚æœ›ä¸€æ®µæ—¶é—´å†è¿›è¡Œä½¿ç”¨ï¼Œå…·ä½“ç¦ç”¨æ­¥éª¤ï¼Œè¯·å‚è€ƒæ­¤[Issues](https://github.com/srcrs/BilibiliTask/issues/78)ã€‚\n+\n # åŠŸèƒ½\n \n-* [x] è‡ªåŠ¨è·å–ç»éªŒ(æŠ•å¸ã€ç‚¹èµã€åˆ†äº«è§†é¢‘) \n-* [x] ç›´æ’­è¾…åŠ©(ç›´æ’­ç­¾åˆ°ï¼Œè‡ªåŠ¨é€å‡ºå³å°†è¿‡æœŸçš„ç¤¼ç‰©) \n-* [x] è‡ªåŠ¨å…‘æ¢é“¶ç“œå­ä¸ºç¡¬å¸ \n-* [x] è‡ªåŠ¨é¢†å–å¹´åº¦å¤§ä¼šå‘˜æ¯æœˆæƒç›Š(æ¯æœˆ`1`å·é¢†å–`B`å¸åŠµã€æƒç›Šç¤¼åŒ…) \n+* [x] è‡ªåŠ¨è·å–ç»éªŒ(æŠ•å¸ã€ç‚¹èµã€åˆ†äº«è§†é¢‘)\n+* [x] ç›´æ’­è¾…åŠ©(ç›´æ’­ç­¾åˆ°ï¼Œè‡ªåŠ¨é€å‡ºå³å°†è¿‡æœŸçš„ç¤¼ç‰©)\n+* [x] è‡ªåŠ¨å…‘æ¢é“¶ç“œå­ä¸ºç¡¬å¸\n+* [x] è‡ªåŠ¨é¢†å–å¹´åº¦å¤§ä¼šå‘˜æ¯æœˆæƒç›Š(æ¯æœˆ`1`å·é¢†å–`B`å¸åŠµã€æƒç›Šç¤¼åŒ…)\n * [x] æœˆåº•è‡ªåŠ¨ç”¨Bå¸å·ç»™è‡ªå·±å……ç”µ(æ¯æœˆ`28`å·)\n * [x] æœˆåº•è‡ªåŠ¨ç”¨Bå¸å·å…‘æ¢é‡‘ç“œå­(æ¯æœˆ`28`å·)\n-* [x] æ¼«ç”»è¾…åŠ©è„šæœ¬(æ¼«ç”»`APP`ç­¾åˆ°) \n+* [x] æ¼«ç”»è¾…åŠ©è„šæœ¬(æ¼«ç”»`APP`ç­¾åˆ°)\n * [x] æ”¯æŒåŠŸèƒ½è‡ªå®šä¹‰(è‡ªå®šä¹‰æŠ•å¸æ•°é‡ï¼Œé“¶ç“œå­å…‘æ¢ç¡¬å¸å¼€å…³ç­‰)\n * [x] è´¦æˆ·å¤±æ•ˆæé†’(å‘é€åˆ°ä½ çš„å¾®ä¿¡æˆ–è€…é’‰é’‰æé†’ã€é‚®ç®±æé†’)\n * [x] æ”¯æŒå¤šç§æ–¹å¼æ¨é€è¿è¡Œç»“æœ(é’‰é’‰ã€å¾®ä¿¡)\n+* [x] æ”¯æŒDockerè‡ªå·±éƒ¨ç½²\n \n # ç›®å½•\n \n - [ç®€ä»‹](#ç®€ä»‹)\n - [åŠŸèƒ½](#åŠŸèƒ½)\n - [ç›®å½•](#ç›®å½•)\n-- [ä½¿ç”¨æ–¹æ³•](#ä½¿ç”¨æ–¹æ³•)\n+- [Github Actionséƒ¨ç½²æ–¹æ³•](#github-actions-éƒ¨ç½²æ–¹æ³•)\n   - [1.forkæœ¬é¡¹ç›®](#1forkæœ¬é¡¹ç›®)\n   - [2.å‡†å¤‡éœ€è¦çš„å‚æ•°](#2å‡†å¤‡éœ€è¦çš„å‚æ•°)\n   - [3.å°†è·å–åˆ°å‚æ•°å¡«åˆ°Secrets](#3å°†è·å–åˆ°å‚æ•°å¡«åˆ°secrets)\n   - [4.å¼€å¯actions](#4å¼€å¯actions)\n   - [5.è¿›è¡Œä¸€æ¬¡pushæ“ä½œ](#5è¿›è¡Œä¸€æ¬¡pushæ“ä½œ)\n+- [Dockeréƒ¨ç½²æ–¹æ³•](#Dockeréƒ¨ç½²æ–¹æ³•)\n - [è¿›é˜¶ä½¿ç”¨](#è¿›é˜¶ä½¿ç”¨)\n   - [1.é…ç½®æ–‡ä»¶è¯´æ˜](#1é…ç½®æ–‡ä»¶è¯´æ˜)\n   - [2.æ¨é€è¿è¡Œç»“æœåˆ°å¾®ä¿¡](#2æ¨é€è¿è¡Œç»“æœåˆ°å¾®ä¿¡)\n   - [3.æ¨é€è¿è¡Œç»“æœåˆ°é’‰é’‰](#3æ¨é€è¿è¡Œç»“æœåˆ°é’‰é’‰)\n+  - [4.ä½¿ç”¨`Telegram bot`æ¨é€è¿è¡Œç»“æœåˆ°`Telgram`ç¾¤ç»„](#4ä½¿ç”¨telegram-botæ¨é€è¿è¡Œç»“æœåˆ°telgramç¾¤ç»„)\n+  - [5.è‡ªå®šä¹‰ç¨‹åºè¿è¡Œæ—¶é—´](#5è‡ªå®šä¹‰ç¨‹åºè¿è¡Œæ—¶é—´)\n - [å¦‚ä½•æ‹‰å–æœ€æ–°ä»£ç ](#å¦‚ä½•æ‹‰å–æœ€æ–°ä»£ç )\n-  - [æ–¹æ³•ä¸€](#æ–¹æ³•ä¸€)\n-  - [æ–¹æ³•äºŒ](#æ–¹æ³•äºŒ)\n - [æ›´æ–°æ—¥å¿—](#æ›´æ–°æ—¥å¿—)\n - [å‚è€ƒé¡¹ç›®](#å‚è€ƒé¡¹ç›®)\n \n@@ -57,7 +63,7 @@\n âœ” | æœ¬æ¬¡ç¨‹åºè¿è¡Œï¼ŒæˆåŠŸçš„æ‰§è¡Œäº†ä»£ç ï¼Œå¹¶å®Œæˆäº†ä»»åŠ¡(ä¾‹å¦‚ï¼Œåˆ†äº«è§†é¢‘ï¼Œä»Šæ—¥æœªåˆ†äº«è¿‡ï¼Œé‚£ä¹ˆç¨‹åºå°±åº”è¯¥è¯·æ±‚åˆ†äº«è§†é¢‘çš„æ¥å£ï¼ŒååŠ©å®Œæˆåˆ†äº«è§†é¢‘çš„ä»»åŠ¡)ã€‚\n âŒ | å¯èƒ½ä¸¤ç§æ“ä½œä¼šå‡ºç°è¿™ä¸ªç¬¦å·ã€‚1.ç¨‹åºæˆåŠŸçš„æ‰§è¡Œäº†ï¼Œå°è¯•å»å®Œæˆä»»åŠ¡ï¼Œä½†æ˜¯ä¸­é€”é‡åˆ°äº†æœªçŸ¥çš„å¤±è´¥ã€‚2.ç¨‹åºæˆåŠŸçš„æ‰§è¡Œäº†ï¼Œæ£€æµ‹åˆ°æ­¤ç±»ä»»åŠ¡å·²ç»å®Œæˆ(ä¾‹å¦‚ï¼Œåˆ†äº«è§†é¢‘ï¼Œä»Šæ—¥å·²ç»åˆ†äº«è¿‡ï¼Œé‚£ä¹ˆç¨‹åºä¸åº”è¯¥è¯·æ±‚åˆ†äº«è§†é¢‘çš„æ¥å£ï¼Œæ— éœ€ååŠ©å®Œæˆåˆ†äº«è§†é¢‘çš„ä»»åŠ¡)ï¼Œå°±æ— éœ€å†å»å®Œæˆã€‚å¯ä»¥ç†è§£ä¸ºè·³è¿‡æˆ–é‡åˆ°é”™è¯¯ã€‚\n \n-# ä½¿ç”¨æ–¹æ³•\n+# Github Actions éƒ¨ç½²æ–¹æ³•\n \n ## 1.forkæœ¬é¡¹ç›®\n \n@@ -126,6 +132,7 @@ platform | ç”¨æˆ·è®¾å¤‡çš„æ ‡è¯†[android,ios]\n upList | up ä¸»åˆ—è¡¨,ä¼˜å…ˆç»™è¿™äº› up ä¸»æŠ•å¸[uid]\n manga | æ˜¯å¦è‡ªåŠ¨è¿›è¡Œæ¼«ç”»ç­¾åˆ° [true,false]\n upLive | å³å°†è¿‡æœŸç¤¼ç‰©ç»™æ­¤upçš„ç›´æ’­é—´,å¡«å†™å…¶ uid\n+selectLike | å¯¹äºè¿›è¡ŒæŠ•å¸çš„è§†é¢‘é€‰æ‹©æ˜¯å¦ç‚¹èµ , é»˜è®¤ä¸ç‚¹èµ [0,1]\n \n ```yml\n #æ¯å¤©éœ€è¦æŠ•å¸çš„æ•°é‡ [0,5]ã€‚\n@@ -138,21 +145,35 @@ s2c: true\n autoBiCoin: 1\n #ç”¨æˆ·è®¾å¤‡çš„æ ‡è¯† [android,ios]\n platform: android\n-# è‡ªå®šä¹‰ä¼˜å…ˆç»™è¿™äº› up çš„è§†é¢‘æŠ•å¸ , ä»¥ymlæ•°ç»„çš„å½¢å¼ , å¡«å†™å…¶ uid (mid)\n+#è‡ªå®šä¹‰ä¼˜å…ˆç»™è¿™äº› up çš„è§†é¢‘æŠ•å¸ , ä»¥ymlæ•°ç»„çš„å½¢å¼ , å¡«å†™å…¶ uid (mid)\n upList:\n   - 477137547\n   - 14602398\n #è¿›è¡Œæ¼«ç”»ç­¾åˆ°ä»»åŠ¡ [true,false]\n manga: true\n #ä¼˜å…ˆé€å‡ºå³å°†è¿‡æœŸç¤¼ç‰©ç»™æ­¤upçš„ç›´æ’­é—´,å¡«å†™å…¶ uid\n upLive: 477137547\n-``` \n+#å¯¹äºè¿›è¡ŒæŠ•å¸çš„è§†é¢‘é€‰æ‹©æ˜¯å¦ç‚¹èµ , é»˜è®¤ä¸ç‚¹èµ [0,1]\n+selectLike: 0\n+```\n \n å¦‚å®åœ¨æ²¡æœ‰æƒ³ç»™ä»–æŠ•å¸çš„upä¸»ï¼Œå¯ä»¥è€ƒè™‘æŠŠæˆ‘å¡«ä¸Šå“¦ `477137547` ğŸ˜„\n \n+# Dockeréƒ¨ç½²æ–¹æ³•\n+\n+* ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è¯·è‡ªè¡Œæ›¿æ¢æ‰€éœ€çš„ç¯å¢ƒå˜é‡\n+* **æ¯å¤©00:01åˆ†è¿è¡Œç¨‹åº**\n+```(shell script)\n+docker run -d \\\n+  --env BILI_JCT=è‡ªè¡Œå¡«å†™ \\\n+  --env DEDEUSERID=è‡ªè¡Œå¡«å†™ \\\n+  --env SESSDATA=è‡ªè¡Œå¡«å†™ \\\n+  timmyovo/bilibilitask\n+```\n+\n ## 2.æ¨é€è¿è¡Œç»“æœåˆ°å¾®ä¿¡\n \n-### ä½¿ç”¨`server`é…±å°†ç¨‹åºè¿è¡Œç»“æœæ¨é€åˆ°å¾®ä¿¡ã€‚\n+### ä½¿ç”¨`server`é…±å°†ç¨‹åºè¿è¡Œç»“æœæ¨é€åˆ°å¾®ä¿¡\n \n `server`é…±å®˜ç½‘ï¼š`http://sc.ftqq.com`\n \n@@ -170,6 +191,18 @@ SCKEY | xxxxx\n \n ![](img/serveré…±æ¨é€çš„ç»“æœ.jpg)\n \n+### ä½¿ç”¨`server`é…±æµ‹è¯•å·ç‰ˆæ¨é€è¿è¡Œç»“æœåˆ°å¾®ä¿¡\n+\n+`server`é…±æµ‹è¯•å·ç‰ˆå®˜ç½‘ï¼š`https://sct.ftqq.com/`\n+\n++ æŒ‰ç…§`server`é…±æµ‹è¯•å·ç‰ˆå®˜ç½‘ä½¿ç”¨æ•™ç¨‹ï¼Œç”¨å¾®ä¿¡æ‰«ç ç™»å½•ã€‚\n+\n++ è·å¾—`SENDKEY`å¹¶å°†å…¶å¡«å…¥åˆ°`Secrets`ä¸­ã€‚\n+\n+Name | Value\n+-|-\n+SENDKEY | xxxxx\n+\n ### ä½¿ç”¨`push+`æ¨é€è¿è¡Œç»“æœåˆ°å¾®ä¿¡\n \n `push+`å®˜ç½‘ï¼š`https://pushplus.hxtrip.com`\n@@ -190,21 +223,50 @@ PUSHPLUSTK | xxxxx\n \n 2.è·å–é’‰é’‰è‡ªå®šä¹‰æœºå™¨äººçš„`Webhook`ï¼Œå°†å…¶å¡«å†™åˆ°`Secrets`ä¸­\n \n-é”®å€¼å¯¹å¦‚ä¸‹æ ¼å¼: \n+é”®å€¼å¯¹å¦‚ä¸‹æ ¼å¼:\n \n Name | Value\n -|-\n-DINGTALK | https://oapi.dingtalk.com/robot/send?access_token=064559acaa666c43d5ba197656594f288f3acef9a64f4f43218beddd1c7b7050\n+DINGTALK | <https://oapi.dingtalk.com/robot/send?access_token=064559acaa666c43d5ba197656594f288f3acef9a64f4f43218beddd1c7b7050>\n \n ![](img/è·å–é’‰é’‰Webhook.gif)\n \n+## 4.ä½¿ç”¨`Telegram bot`æ¨é€è¿è¡Œç»“æœåˆ°`Telgram`ç¾¤ç»„\n+\n+1. é¦–å…ˆéœ€è¦åˆ›å»º telegram bot å¹¶è·å– telegram bot tokenï¼Œå¯ä»¥å‚è€ƒ[æ–‡æ¡£](https://docs.microsoft.com/en-us/azure/bot-service/bot-service-channel-connect-telegram)ï¼›\n+2. å°†æœºå™¨äººåŠ å…¥ç¾¤ç»„ä¸­ï¼Œå¹¶è·å–ç¾¤ç»„IDï¼ŒæŸ¥çœ‹[Stackoverflowé—®ç­”](https://stackoverflow.com/a/32572159)ï¼›\n+3. å°† telegram bot token å’Œç¾¤ç»„IDæ·»åŠ åˆ°`Secrets`ä¸­å³å¯ã€‚\n+\n+åœ¨`Secrets`ä¸­çš„`Name`å’Œ`Value`æ ¼å¼å¦‚ä¸‹ï¼š\n+\n+Name               | Value\n+-------------------|------\n+TELEGRAM_BOT_TOKEN | xxxxx\n+TELEGRAM_CHAT_ID   | xxxxx\n+\n+![](img/TgBotè¿è¡Œç»“æœ.jpg)\n+\n+## 5.è‡ªå®šä¹‰ç¨‹åºè¿è¡Œæ—¶é—´\n+\n+åœ¨`.github/workflows/Bilibili.yml`ä¿®æ”¹`cron`è¡¨è¾¾å¼ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ`cron`è¡¨è¾¾å¼æ˜¯å›½é™…æ—¶é—´ï¼Œ\n+éœ€è¦æ¢ç®—åˆ°å›½å†…æ—¶é—´ï¼Œå¾€åæ¨8ä¸ªå°æ—¶ï¼Œä¾‹å¦‚å›½é™…æ—¶é—´æ˜¯12ç‚¹é’Ÿï¼Œåˆ™åœ¨å›½å†…æ˜¯20ç‚¹é’Ÿã€‚\n+\n+![](img/è‡ªå®šä¹‰ç¨‹åºè¿è¡Œæ—¶é—´.png)\n+\n+# Docker\n+\n+* **æ¯å¤©00:01åˆ†è¿è¡Œç¨‹åº**\n+```\n+docker run -d --env BILI_JCT=è‡ªè¡Œå¡«å†™ --env DEDEUSERID=è‡ªè¡Œå¡«å†™ --env SESSDATA=è‡ªè¡Œå¡«å†™ timmyovo/bilibilitask\n+```\n+\n # å¦‚ä½•æ‹‰å–æœ€æ–°ä»£ç \n \n ## æ–¹æ³•ä¸€\n \n åœ¨`github`å®‰è£…`pull`ï¼Œä¼šè‡ªåŠ¨å¸®ä½ æ£€æµ‹ä¸Šæ¸¸ä»“åº“ï¼Œå¹¶å¸®åŠ©ä½ æ›´æ–°ä»£ç \n \n-åœ°å€åœ¨è¿™: https://github.com/apps/pull\n+åœ°å€åœ¨è¿™: <https://github.com/apps/pull>\n \n ç”±äºæ·»åŠ æœ‰é…ç½®æ–‡ä»¶`config.yml`ï¼Œæœ‰å¯èƒ½ä¼šè¦†ç›–ä½ è‡ªå®šä¹‰çš„`config.yml`ï¼Œéœ€è¦æ³¨æ„ã€‚\n \n@@ -237,13 +299,39 @@ git pull upstream main\n 4ã€å°†æ›´æ–°åçš„ä»£ç æ¨é€åˆ°ä½ çš„ä»“åº“\n \n ```sh\n-git push origin main \n+git push origin main\n ```\n \n ç”±äºæ·»åŠ æœ‰é…ç½®æ–‡ä»¶`config.yml`ï¼Œæœ‰å¯èƒ½ä¼šè¦†ç›–ä½ è‡ªå®šä¹‰çš„`config.yml`ï¼Œéœ€è¦æ³¨æ„ã€‚\n \n # æ›´æ–°æ—¥å¿—\n \n+## 2020-02-06\n+\n++ é¿å…æŠ•å¸ç»™å•ä¸€`up`ä¸»\n+\n++ æ›´æ–°`b`å¸å·å……ç”µæ¥å£\n+\n++ ä¿®å¤æŠ•å¸è®¡ç®—(æŠ•å¸æ•°ä¸ºè´Ÿæ•°)\n+\n++ ä¿®å¤è¿‘30å¤©æœªæŠ•å¸å‡ºç°çš„bug\n+\n+## 2020-12-17\n+\n++ å¢åŠ `server`é…±æµ‹è¯•å·ç‰ˆæ¨é€ï¼Œæ„Ÿè°¢[sh4wnzec](https://github.com/sh4wnzec)\n+\n++ å¢åŠ `Telegram bot`æ¨é€ï¼Œæ„Ÿè°¢[qiwihui](https://github.com/qiwihui)\n+\n+## 2020-12-07\n+\n++ å‘å¸ƒ1.0.8ç‰ˆæœ¬\n+\n++ ä¿®å¤ç”¨æˆ·æ— åŠ¨æ€è·å–è§†é¢‘ä¿¡æ¯é”™è¯¯\n+\n++ ä¿®å¤ä»åŠ¨æ€åˆ—è¡¨ä¸­è·å–åˆ°è‡ªå·±æŠ•ç¨¿è§†é¢‘çš„é”™è¯¯\n+\n++ å¢åŠ ä¸€äº›è‡ªå®šä¹‰é…ç½®ç‚¹èµ\n+\n ## 2020-11-28\n \n + å»é™¤UA(è²Œä¼¼æ˜¯æ²¡æœ‰å½±å“çš„)"
  },
  {
    "sha": "f86eb23df9f58bf8c2c3d9f6e310dc1d9fc0df02",
    "filename": "UUID.txt",
    "status": "added",
    "additions": 1,
    "deletions": 0,
    "changes": 1,
    "blob_url": "https://github.com/justincnn/BilibiliTask/blob/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/UUID.txt",
    "raw_url": "https://github.com/justincnn/BilibiliTask/raw/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/UUID.txt",
    "contents_url": "https://api.github.com/repos/justincnn/BilibiliTask/contents/UUID.txt?ref=6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5",
    "patch": "@@ -0,0 +1 @@\n+b4dbbeec-03a1-4b2d-a5eb-49895bbfeacd"
  },
  {
    "sha": "274f0b4780ab6fecb84e5320af16d8c20a468aae",
    "filename": "build.gradle",
    "status": "modified",
    "additions": 12,
    "deletions": 1,
    "changes": 13,
    "blob_url": "https://github.com/justincnn/BilibiliTask/blob/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/build.gradle",
    "raw_url": "https://github.com/justincnn/BilibiliTask/raw/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/build.gradle",
    "contents_url": "https://api.github.com/repos/justincnn/BilibiliTask/contents/build.gradle?ref=6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5",
    "patch": "@@ -1,10 +1,11 @@\n plugins {\n     id 'java'\n     id \"io.freefair.lombok\" version '5.3.0'\n+    id 'com.github.johnrengelman.shadow' version '6.1.0'\n }\n \n group = 'top.srcrs'\n-version = '1.0.7'\n+version = '1.0.9'\n sourceCompatibility = JavaVersion.VERSION_1_8\n \n configurations {\n@@ -41,6 +42,16 @@ dependencies {\n     testImplementation junit\n }\n \n+jar {\n+    manifest {\n+        attributes(\"Main-Class\": \"top.srcrs.BiliStart\")\n+    }\n+}\n+\n+artifacts {\n+    archives shadowJar\n+}\n+\n test {\n     useJUnitPlatform()\n }"
  },
  {
    "sha": "1526f75e3c5c2cf9c1841c5e738271f4647b796d",
    "filename": "gradle/wrapper/gradle-wrapper.properties",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/justincnn/BilibiliTask/blob/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/gradle/wrapper/gradle-wrapper.properties",
    "raw_url": "https://github.com/justincnn/BilibiliTask/raw/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/gradle/wrapper/gradle-wrapper.properties",
    "contents_url": "https://api.github.com/repos/justincnn/BilibiliTask/contents/gradle/wrapper/gradle-wrapper.properties?ref=6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5",
    "patch": "@@ -1,5 +1,5 @@\n distributionBase=GRADLE_USER_HOME\n distributionPath=wrapper/dists\n-distributionUrl=https\\://services.gradle.org/distributions/gradle-6.7.1-bin.zip\n+distributionUrl=https\\://downloads.gradle-dn.com/distributions/gradle-6.7.1-bin.zip\n zipStoreBase=GRADLE_USER_HOME\n zipStorePath=wrapper/dists\n\\ No newline at end of file"
  },
  {
    "sha": "fe859d174f6d0df25d3d482deddde7c98458c922",
    "filename": "img/TgBotè¿è¡Œç»“æœ.jpg",
    "status": "added",
    "additions": 0,
    "deletions": 0,
    "changes": 0,
    "blob_url": "https://github.com/justincnn/BilibiliTask/blob/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/img/TgBot%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C.jpg",
    "raw_url": "https://github.com/justincnn/BilibiliTask/raw/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/img/TgBot%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C.jpg",
    "contents_url": "https://api.github.com/repos/justincnn/BilibiliTask/contents/img/TgBot%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C.jpg?ref=6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5"
  },
  {
    "sha": "51442837f1ccc7310d594b164914b8f42fd2ddfb",
    "filename": "img/serveré…±æ¨é€çš„ç»“æœ.jpg",
    "status": "modified",
    "additions": 0,
    "deletions": 0,
    "changes": 0,
    "blob_url": "https://github.com/justincnn/BilibiliTask/blob/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/img/server%E9%85%B1%E6%8E%A8%E9%80%81%E7%9A%84%E7%BB%93%E6%9E%9C.jpg",
    "raw_url": "https://github.com/justincnn/BilibiliTask/raw/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/img/server%E9%85%B1%E6%8E%A8%E9%80%81%E7%9A%84%E7%BB%93%E6%9E%9C.jpg",
    "contents_url": "https://api.github.com/repos/justincnn/BilibiliTask/contents/img/server%E9%85%B1%E6%8E%A8%E9%80%81%E7%9A%84%E7%BB%93%E6%9E%9C.jpg?ref=6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5"
  },
  {
    "sha": "b80be89ac2b179697682ebe3ca7eee86f5b8da12",
    "filename": "img/å¼€å¯actions.gif",
    "status": "modified",
    "additions": 0,
    "deletions": 0,
    "changes": 0,
    "blob_url": "https://github.com/justincnn/BilibiliTask/blob/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/img/%E5%BC%80%E5%90%AFactions.gif",
    "raw_url": "https://github.com/justincnn/BilibiliTask/raw/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/img/%E5%BC%80%E5%90%AFactions.gif",
    "contents_url": "https://api.github.com/repos/justincnn/BilibiliTask/contents/img/%E5%BC%80%E5%90%AFactions.gif?ref=6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5"
  },
  {
    "sha": "e5af20a70260605f1df630dfb185bc0c1b8527af",
    "filename": "img/æ·»åŠ Secrets.png",
    "status": "modified",
    "additions": 0,
    "deletions": 0,
    "changes": 0,
    "blob_url": "https://github.com/justincnn/BilibiliTask/blob/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/img/%E6%B7%BB%E5%8A%A0Secrets.png",
    "raw_url": "https://github.com/justincnn/BilibiliTask/raw/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/img/%E6%B7%BB%E5%8A%A0Secrets.png",
    "contents_url": "https://api.github.com/repos/justincnn/BilibiliTask/contents/img/%E6%B7%BB%E5%8A%A0Secrets.png?ref=6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5"
  },
  {
    "sha": "edba2c4d8f743279e16a2a31b0ceaf5265777bf4",
    "filename": "img/è‡ªå®šä¹‰ç¨‹åºè¿è¡Œæ—¶é—´.png",
    "status": "added",
    "additions": 0,
    "deletions": 0,
    "changes": 0,
    "blob_url": "https://github.com/justincnn/BilibiliTask/blob/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/img/%E8%87%AA%E5%AE%9A%E4%B9%89%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C%E6%97%B6%E9%97%B4.png",
    "raw_url": "https://github.com/justincnn/BilibiliTask/raw/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/img/%E8%87%AA%E5%AE%9A%E4%B9%89%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C%E6%97%B6%E9%97%B4.png",
    "contents_url": "https://api.github.com/repos/justincnn/BilibiliTask/contents/img/%E8%87%AA%E5%AE%9A%E4%B9%89%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C%E6%97%B6%E9%97%B4.png?ref=6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5"
  },
  {
    "sha": "c416cd5bd4c7b5d10e28014a0776e4f468a419ef",
    "filename": "img/è·å–Cookie.png",
    "status": "modified",
    "additions": 0,
    "deletions": 0,
    "changes": 0,
    "blob_url": "https://github.com/justincnn/BilibiliTask/blob/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/img/%E8%8E%B7%E5%8F%96Cookie.png",
    "raw_url": "https://github.com/justincnn/BilibiliTask/raw/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/img/%E8%8E%B7%E5%8F%96Cookie.png",
    "contents_url": "https://api.github.com/repos/justincnn/BilibiliTask/contents/img/%E8%8E%B7%E5%8F%96Cookie.png?ref=6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5"
  },
  {
    "sha": "e43074f2c43d4cc129e5c2bc8ebf994a0a51f9bd",
    "filename": "img/è·å–Json.jpg",
    "status": "added",
    "additions": 0,
    "deletions": 0,
    "changes": 0,
    "blob_url": "https://github.com/justincnn/BilibiliTask/blob/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/img/%E8%8E%B7%E5%8F%96Json.jpg",
    "raw_url": "https://github.com/justincnn/BilibiliTask/raw/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/img/%E8%8E%B7%E5%8F%96Json.jpg",
    "contents_url": "https://api.github.com/repos/justincnn/BilibiliTask/contents/img/%E8%8E%B7%E5%8F%96Json.jpg?ref=6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5"
  },
  {
    "sha": "63c4916adad69fc9e35dca5b2a36ddd29a4e654d",
    "filename": "img/è·å–é’‰é’‰Webhook.gif",
    "status": "modified",
    "additions": 0,
    "deletions": 0,
    "changes": 0,
    "blob_url": "https://github.com/justincnn/BilibiliTask/blob/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/img/%E8%8E%B7%E5%8F%96%E9%92%89%E9%92%89Webhook.gif",
    "raw_url": "https://github.com/justincnn/BilibiliTask/raw/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/img/%E8%8E%B7%E5%8F%96%E9%92%89%E9%92%89Webhook.gif",
    "contents_url": "https://api.github.com/repos/justincnn/BilibiliTask/contents/img/%E8%8E%B7%E5%8F%96%E9%92%89%E9%92%89Webhook.gif?ref=6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5"
  },
  {
    "sha": "4b609cf44e46e8c6fe37971ab828fcd4aa59d6dd",
    "filename": "img/è¿è¡Œç»“æœ.gif",
    "status": "modified",
    "additions": 0,
    "deletions": 0,
    "changes": 0,
    "blob_url": "https://github.com/justincnn/BilibiliTask/blob/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/img/%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C.gif",
    "raw_url": "https://github.com/justincnn/BilibiliTask/raw/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/img/%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C.gif",
    "contents_url": "https://api.github.com/repos/justincnn/BilibiliTask/contents/img/%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C.gif?ref=6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5"
  },
  {
    "sha": "e8f995288ec35c3da61ee88c50777eaddd8c6848",
    "filename": "img/è¿›è¡Œä¸€æ¬¡pushæ“ä½œ.gif",
    "status": "modified",
    "additions": 0,
    "deletions": 0,
    "changes": 0,
    "blob_url": "https://github.com/justincnn/BilibiliTask/blob/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/img/%E8%BF%9B%E8%A1%8C%E4%B8%80%E6%AC%A1push%E6%93%8D%E4%BD%9C.gif",
    "raw_url": "https://github.com/justincnn/BilibiliTask/raw/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/img/%E8%BF%9B%E8%A1%8C%E4%B8%80%E6%AC%A1push%E6%93%8D%E4%BD%9C.gif",
    "contents_url": "https://api.github.com/repos/justincnn/BilibiliTask/contents/img/%E8%BF%9B%E8%A1%8C%E4%B8%80%E6%AC%A1push%E6%93%8D%E4%BD%9C.gif?ref=6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5"
  },
  {
    "sha": "5d6c2fbc57f7327f40f343e38f87477d1c98b62e",
    "filename": "src/main/java/top/srcrs/BiliStart.java",
    "status": "modified",
    "additions": 23,
    "deletions": 12,
    "changes": 35,
    "blob_url": "https://github.com/justincnn/BilibiliTask/blob/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/src/main/java/top/srcrs/BiliStart.java",
    "raw_url": "https://github.com/justincnn/BilibiliTask/raw/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/src/main/java/top/srcrs/BiliStart.java",
    "contents_url": "https://api.github.com/repos/justincnn/BilibiliTask/contents/src/main/java/top/srcrs/BiliStart.java?ref=6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5",
    "patch": "@@ -9,6 +9,8 @@\n import java.lang.reflect.Constructor;\n import java.lang.reflect.Method;\n import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.Comparator;\n import java.util.List;\n \n /**\n@@ -38,7 +40,6 @@ public static void main(String ...args) {\n             log.info(\"ã€ç”¨æˆ·åã€‘: {}\",StringUtil.hideString(USER_DATA.getUname(),1,1,'*'));\n             log.info(\"ã€ç¡¬å¸ã€‘: {}\", USER_DATA.getMoney());\n             log.info(\"ã€ç»éªŒã€‘: {}\", USER_DATA.getCurrentExp());\n-            log.info(\"ã€ç­‰çº§ã€‘: {}\",USER_DATA.getCurrentLevel());\n             /* åŠ¨æ€æ‰§è¡ŒtaskåŒ…ä¸‹çš„æ‰€æœ‰javaä»£ç  */\n             scanTask();\n             /* å½“ç”¨æˆ·ç­‰çº§ä¸ºLv6æ—¶ï¼Œå‡çº§åˆ°ä¸‹ä¸€çº§ next_exp å€¼ä¸º -- ä»£è¡¨æ— ç©·å¤§ */\n@@ -58,6 +59,10 @@ public static void main(String ...args) {\n         if(StringUtil.isNotBlank(System.getenv(\"SCKEY\"))){\n             SendServer.send(System.getenv(\"SCKEY\"));\n         }\n+        // Serveré…± æµ‹è¯•å·ç‰ˆ\n+        if(StringUtil.isNotBlank(System.getenv(\"SENDKEY\"))){\n+            SendServerChan.send(System.getenv(\"SENDKEY\"));\n+        }\n         // PUSHPLUSTK\n         if(StringUtil.isNotBlank(System.getenv(\"PUSHPLUSTK\"))){\n             SendPushPlus.send(System.getenv(\"PUSHPLUSTK\"));\n@@ -66,6 +71,11 @@ public static void main(String ...args) {\n         if(StringUtil.isNotBlank(System.getenv(\"DINGTALK\"))){\n             SendDingTalk.send(System.getenv(\"DINGTALK\"));\n         }\n+        /* Telegram Botæ¨é€ */\n+        if(StringUtil.isNotBlank(System.getenv(\"TELEGRAM_BOT_TOKEN\"))\n+                && StringUtil.isNotBlank(System.getenv(\"TELEGRAM_CHAT_ID\"))){\n+            SendTelegram.send(System.getenv(\"TELEGRAM_BOT_TOKEN\"), System.getenv(\"TELEGRAM_CHAT_ID\"));\n+        }\n     }\n \n     /**\n@@ -75,22 +85,26 @@ public static void main(String ...args) {\n      * å› ä¸ºéƒ¨åˆ†ä»»åŠ¡æ˜¯éœ€è¦æœ‰é¡ºåºçš„å»æ‰§è¡Œ\n      */\n     private static void scanTask() {\n-        List<String> classNameList = new ArrayList<>();\n-        PackageScanner pack = new PackageScanner() {\n+        List<Class<?>> clazzList = new ArrayList<>();\n+        TaskRegistry pack = new TaskRegistry() {\n             @Override\n             public void dealClass(String className) {\n                 try{\n-                    classNameList.add(className);\n+                    Class<?> clazz = Class.forName(className);\n+                    // åˆ¤æ–­ç±»æ˜¯å¦å®ç°äº†æ¥å£Task\n+                    if (Arrays.stream(clazz.getInterfaces()).parallel().anyMatch(taskI -> taskI.equals(Task.class))) {\n+                        clazzList.add(clazz);\n+                    }\n                 } catch (Exception e){\n                     log.error(\"ğŸ’”åå°„è·å–å¯¹è±¡é”™è¯¯ : \", e);\n                 }\n             }\n         };\n-        pack.scannerPackage(\"top.srcrs.task\");\n+        pack.runTasks();\n \n-        classNameList.stream().sorted().forEach(className -> {\n-            try{\n-                Constructor<?> constructor = Class.forName(className).getConstructor();\n+        clazzList.stream().sorted(Comparator.comparing(Class::getName)).forEach(clazz -> {\n+            try {\n+                Constructor<?> constructor = clazz.getConstructor();\n                 Object object = constructor.newInstance();\n                 Method method = object.getClass().getMethod(\"run\");\n                 method.invoke(object);\n@@ -101,13 +115,10 @@ public void dealClass(String className) {\n     }\n \n     public static boolean checkEnv() {\n-\n         String BILI_JCT = System.getenv(\"BILI_JCT\");\n         String SESSDATA = System.getenv(\"SESSDATA\");\n         String DEDEUSERID = System.getenv(\"DEDEUSERID\");\n-        USER_DATA.setCookie(System.getenv(\"BILI_JCT\"),\n-                System.getenv(\"SESSDATA\"),\n-                System.getenv(\"DEDEUSERID\"));\n+        USER_DATA.setCookie(BILI_JCT, SESSDATA, DEDEUSERID);\n         return StringUtil.isAnyBlank(BILI_JCT, SESSDATA, DEDEUSERID);\n     }\n "
  },
  {
    "sha": "bf971f0dd40e18b3168beb1c8c76b46daaf40c9f",
    "filename": "src/main/java/top/srcrs/domain/Config.java",
    "status": "modified",
    "additions": 10,
    "deletions": 0,
    "changes": 10,
    "blob_url": "https://github.com/justincnn/BilibiliTask/blob/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/src/main/java/top/srcrs/domain/Config.java",
    "raw_url": "https://github.com/justincnn/BilibiliTask/raw/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/src/main/java/top/srcrs/domain/Config.java",
    "contents_url": "https://api.github.com/repos/justincnn/BilibiliTask/contents/src/main/java/top/srcrs/domain/Config.java?ref=6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5",
    "patch": "@@ -31,6 +31,16 @@ private Config(){}\n     private static boolean manga;\n     /** é€å‡ºå³å°†è¿‡æœŸç¤¼ç‰©ç»™æ­¤ up çš„ç›´æ’­é—´ */\n     private static String upLive;\n+    /** å¯¹äºè¿›è¡ŒæŠ•å¸çš„è§†é¢‘é€‰æ‹©æ˜¯å¦ç‚¹èµ */\n+    private static String selectLike;\n+\n+    public String getSelectLike() {\n+        return selectLike;\n+    }\n+\n+    public void setSelectLike(String selectLike) {\n+        Config.selectLike = selectLike;\n+    }\n \n     public String getUpLive() {\n         return upLive;"
  },
  {
    "sha": "252a30e38e56f1022045027bf4ff685775e09792",
    "filename": "src/main/java/top/srcrs/task/bigvip/BiCoinApply.java",
    "status": "modified",
    "additions": 9,
    "deletions": 7,
    "changes": 16,
    "blob_url": "https://github.com/justincnn/BilibiliTask/blob/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/src/main/java/top/srcrs/task/bigvip/BiCoinApply.java",
    "raw_url": "https://github.com/justincnn/BilibiliTask/raw/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/src/main/java/top/srcrs/task/bigvip/BiCoinApply.java",
    "contents_url": "https://api.github.com/repos/justincnn/BilibiliTask/contents/src/main/java/top/srcrs/task/bigvip/BiCoinApply.java?ref=6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5",
    "patch": "@@ -50,6 +50,7 @@ public void run() {\n                     doMelonSeed(couponBalance);\n                     break;\n                 default:\n+                    log.info(\"ã€ä½¿ç”¨Bå¸å·ã€‘: \" + \"è‡ªå®šä¹‰é…ç½®ä¸ä½¿ç”¨\");\n                     break;\n             }\n         } catch (Exception e){\n@@ -67,35 +68,36 @@ public void doCharge(int couponBalance) {\n          * åˆ¤æ–­æ¡ä»¶ æ˜¯æœˆåº•&&bå¸åˆ¸ä½™é¢å¤§äº2&&é…ç½®é¡¹å…è®¸è‡ªåŠ¨å……ç”µ\n          */\n         if(couponBalance < 2){\n-            log.warn(\"ã€ç”¨Bå¸å·ç»™è‡ªå·±å……ç”µã€‘: {}<2 ,æ— æ³•ç»™è‡ªå·±å……ç”µâŒ\", couponBalance);\n+            log.warn(\"ã€ä½¿ç”¨Bå¸å·ã€‘: Bå¸å·ä¸è¶³ 2 ä¸ª ,æ— æ³•ç»™è‡ªå·±å……ç”µâŒ\");\n             return ;\n         }\n         /* è¢«å……ç”µç”¨æˆ·çš„userID */\n         String userId = userData.getMid();\n         JSONObject pJson = new JSONObject();\n-        pJson.put(\"elec_num\", couponBalance * 10);\n+        pJson.put(\"bp_num\", couponBalance);\n+        pJson.put(\"is_bp_remains_prior\",\"true\");\n         pJson.put(\"up_mid\", userId);\n         pJson.put(\"otype\", \"up\");\n         pJson.put(\"oid\", userId);\n         pJson.put(\"csrf\", userData.getBiliJct());\n \n-        JSONObject jsonObject = Request.post(\"https://api.bilibili.com/x/ugcpay/trade/elec/pay/quick\", pJson);\n+        JSONObject jsonObject = Request.post(\"https://api.bilibili.com/x/ugcpay/web/v2/trade/elec/pay/quick\", pJson);\n \n         Integer resultCode = jsonObject.getInteger(\"code\");\n         if (resultCode == 0) {\n             JSONObject dataJson = jsonObject.getJSONObject(\"data\");\n             log.debug(dataJson.toString());\n             Integer statusCode = dataJson.getInteger(\"status\");\n             if (statusCode == 4) {\n-                log.info(\"ã€ç”¨Bå¸å·ç»™è‡ªå·±å……ç”µã€‘: æœ¬æ¬¡ç»™è‡ªå·±å……å€¼äº†: {}ä¸ªç”µæ± âœ”\", couponBalance * 10);\n+                log.info(\"ã€ä½¿ç”¨Bå¸å·ã€‘: æœ¬æ¬¡ç»™è‡ªå·±å……å€¼äº†: {}ä¸ªç”µæ± âœ”\", couponBalance * 10);\n                 /* è·å–å……ç”µç•™è¨€token */\n                 String orderNo = dataJson.getString(\"order_no\");\n                 chargeComments(orderNo);\n             } else {\n-                log.warn(\"ã€ç”¨Bå¸å·ç»™è‡ªå·±å……ç”µã€‘: \" + \"å¤±è´¥, åŸå› ä¸º: {}âŒ\", jsonObject);\n+                log.warn(\"ã€ä½¿ç”¨Bå¸å·ã€‘: \" + \"å……ç”µå¤±è´¥, åŸå› ä¸º: {}âŒ\", jsonObject);\n             }\n         } else {\n-            log.warn(\"ã€ç”¨Bå¸å·ç»™è‡ªå·±å……ç”µã€‘: \" + \"å¤±è´¥, åŸå› ä¸º: {}âŒ\", jsonObject);\n+            log.warn(\"ã€ä½¿ç”¨Bå¸å·ã€‘: \" + \"å……ç”µå¤±è´¥, åŸå› ä¸º: {}âŒ\", jsonObject);\n         }\n     }\n \n@@ -137,7 +139,7 @@ public void doMelonSeed(int couponBalance){\n         } else{\n             msg = post.getString(\"message\") + \"âŒ\";\n         }\n-        log.info(\"ã€Bå¸å·å…‘æ¢é‡‘ç“œå­ã€‘: {}\", msg);\n+        log.info(\"ã€ä½¿ç”¨Bå¸å·ã€‘: {}\", msg);\n     }\n \n }"
  },
  {
    "sha": "373da51bebe593b82efdcafc76234b73637b78ed",
    "filename": "src/main/java/top/srcrs/task/daily/ThrowCoinTask.java",
    "status": "modified",
    "additions": 66,
    "deletions": 9,
    "changes": 75,
    "blob_url": "https://github.com/justincnn/BilibiliTask/blob/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/src/main/java/top/srcrs/task/daily/ThrowCoinTask.java",
    "raw_url": "https://github.com/justincnn/BilibiliTask/raw/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/src/main/java/top/srcrs/task/daily/ThrowCoinTask.java",
    "contents_url": "https://api.github.com/repos/justincnn/BilibiliTask/contents/src/main/java/top/srcrs/task/daily/ThrowCoinTask.java?ref=6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5",
    "patch": "@@ -11,6 +11,7 @@\n import java.util.ArrayList;\n import java.util.List;\n import java.util.Random;\n+import java.util.stream.Collectors;\n \n /**\n  * è¿›è¡Œè§†é¢‘æŠ•å¸\n@@ -28,6 +29,8 @@ public void run() {\n         try {\n             /* ä»Šå¤©æŠ•å¸è·å¾—äº†å¤šå°‘ç»éªŒ */\n             int reward = getReward();\n+            /* æ›´æ–°æ¯å¤©ç™»å½•åæ‰€èƒ½é¢†å–çš„ç™»å½•ç¡¬å¸å¥–åŠ± */\n+            updateMoney();\n             /* è¿˜å‰©å¤šå°‘ä¸ªç¡¬å¸ */\n             int num2 = USER_DATA.getMoney().intValue();\n             /* é…ç½®ç±»ä¸­è®¾ç½®æŠ•å¸æ•° */\n@@ -36,13 +39,12 @@ public void run() {\n                å½“ä»Šæ—¥å·²ç»æŠ•è¿‡ num3 ä¸ªç¡¬å¸å°†ä¸å†è¿›è¡ŒæŠ•å¸\n                å¦åˆ™åˆ™åº”è¯¥æŠ• (num3-num1) ä¸ªç¡¬å¸\n             */\n-            int num1 = (num3*10 - reward) / 10;\n+            int num1 = Math.max((num3*10 - reward) / 10,0);\n             /* é¿å…è®¾ç½®æŠ•å¸æ•°ä¸ºè´Ÿæ•°å¼‚å¸¸ */\n             num3 = Math.max(num3,0);\n             /* å®é™…éœ€è¦æŠ• numä¸ªç¡¬å¸ */\n             int num = Math.min(num3,Math.min(num1,num2));\n-            log.info(\"ã€æŠ•å¸è®¡ç®—ã€‘: å½“å‰ç¡¬å¸æ•°: \" + num2\n-                    + \" ,è‡ªå®šä¹‰æŠ•å¸æ•°: \" + num3\n+            log.info(\"ã€æŠ•å¸è®¡ç®—ã€‘: è‡ªå®šä¹‰æŠ•å¸æ•°: \" + num3\n                     + \" ,ä»Šæ—¥å·²æŠ•å¸: \" + reward/10\n                     + \" ,è¿˜éœ€æŠ•å¸: \"+num1\n                     + \" ,å®é™…æŠ•å¸: \"+num);\n@@ -58,9 +60,9 @@ public void run() {\n             /* è·å–è‡ªå®šä¹‰é…ç½®ä¸­ up ä¸»æŠ•ç¨¿çš„30æ¡æœ€æ–°è§†é¢‘ */\n             if(config.getUpList() == null && num > 0){\n                 log.info(\"ã€ä¼˜å…ˆæŠ•å¸upã€‘: æœªé…ç½®ä¼˜å…ˆæŠ•å¸upä¸»\");\n-            } else{\n+            } else {\n                 if(num - videoAid.size() > 0){\n-                    for(String up : config.getUpList()){\n+                    for(String up : getTodayUpList(num)) {\n                         videoAid.addAll(spaceSearch(up,num - videoAid.size()));\n                         log.info(\"ã€ä¼˜å…ˆæŠ•å¸up {} ã€‘: æˆåŠŸè·å–åˆ°: {} ä¸ªè§†é¢‘\", up, videoAid.size());\n                     }\n@@ -76,13 +78,14 @@ public void run() {\n                 videoAid.addAll(getRegions(\"6\", \"1\",num - videoAid.size()));\n                 log.info(\"ã€åˆ†åŒºçƒ­é—¨è§†é¢‘ã€‘: æˆåŠŸè·å–åˆ°: {} ä¸ªè§†é¢‘\", videoAid.size());\n             }\n-            /* ç»™æ¯ä¸ªè§†é¢‘æŠ• 1 ä¸ªå¸,ç‚¹ 1 ä¸ªèµ */\n+            /* ç»™æ¯ä¸ªè§†é¢‘æŠ• 1 ä¸ªå¸ */\n+            /* åœ¨é…ç½®æ–‡ä»¶ä¸­è¯»å–æ˜¯å¦ä¸ºæŠ•å¸è§†é¢‘ç‚¹èµ */\n             for (int i = 0; i < num; i++) {\n                 /* è§†é¢‘çš„aid */\n                 String aid = videoAid.get(i);\n-                JSONObject json = throwCoin(aid, \"1\", \"1\");\n+                JSONObject json = throwCoin(aid, \"1\", config.getSelectLike());\n                 /* è¾“å‡ºçš„æ—¥å¿—æ¶ˆæ¯ */\n-                String msg ;\n+                String msg;\n                 if (\"0\".equals(json.getString(\"code\"))) {\n                     msg = \"ç¡¬å¸-1âœ”\";\n                 } else {\n@@ -97,6 +100,16 @@ public void run() {\n         }\n     }\n \n+    /**\n+     * æ›´æ–°æ¯å¤©ç™»å½•åæ‰€èƒ½é¢†å–çš„ç™»å½•ç¡¬å¸å¥–åŠ±\n+     * @author Arriv9l\n+     * @Time 2021-01-24\n+     */\n+    public void updateMoney() {\n+        JSONObject jsonObject = Request.get(\"https://api.bilibili.com/x/web-interface/nav\");\n+        USER_DATA.setMoney(jsonObject.getJSONObject(\"data\").getBigDecimal(\"money\"));\n+    }\n+\n     /**\n      * ç»™è§†é¢‘æŠ•å¸\n      * @param aid         è§†é¢‘ aid å·\n@@ -179,7 +192,7 @@ public Integer getReward() {\n             for(Object object : cards){\n                 JSONObject card = (JSONObject) object;\n                 String aid = card.getJSONObject(\"desc\").getString(\"rid\");\n-                String mid = card.getJSONObject(\"desc\").getString(\"rid\");\n+                String mid = card.getJSONObject(\"desc\").getString(\"uid\");\n                 if (isThrowCoins(aid, mid)) {\n                     videoAid.add(aid);\n                 }\n@@ -211,6 +224,50 @@ private boolean isThrowCoins(String aid, String mid){\n         return multiply == 0;\n     }\n \n+    /**\n+     * è·å–ç”¨æˆ·30å¤©å†…æŠ•è¿‡ç¡¬å¸çš„è§†é¢‘\n+     * @return JSONArray ç”¨æˆ·30å¤©å†…æŠ•è¿‡ç¡¬å¸çš„è§†é¢‘\n+     * @author Arriv9l\n+     * @base https://github.com/SocialSisterYi/bilibili-API-collect/blob/master/user/space.md#è·å–ç”¨æˆ·æœ€è¿‘æŠ•å¸çš„è§†é¢‘æ˜ç»†\n+     * @Time 2021-01-24\n+     */\n+    private JSONArray getThrowCoinVideoList() {\n+        JSONObject pJson = new JSONObject();\n+        pJson.put(\"vmid\", System.getenv(\"DEDEUSERID\"));\n+        JSONObject object = Request.get(\"http://api.bilibili.com/x/space/coin/video\", pJson);\n+        return object.getJSONArray(\"data\");\n+    }\n+\n+    /**\n+     * è·å–ä»Šå¤©å¯æŠ•å¸çš„è‡ªå®šä¹‰é…ç½® up ä¸»\n+     * @param num éœ€è¦æŠ•å¸çš„æ•°é‡\n+     * @return List<String> ä»Šå¤©å¯æŠ•å¸çš„è‡ªå®šä¹‰é…ç½® up ä¸»\n+     * @author Arriv9l\n+     * @base https://juejin.cn/post/6844903833726894093\n+     * @Time 2021-01-24\n+     */\n+    private List<String> getTodayUpList(int num) {\n+        JSONArray vList = getThrowCoinVideoList();\n+        List<String> configUpList = config.getUpList();\n+        List<String> upList = new ArrayList<>();\n+        // è¿‘30å¤©æœªæŠ•å¸ç›´æ¥è·³è¿‡\n+        if(vList==null){\n+            return new ArrayList<>(configUpList);\n+        }\n+        for (Object object : vList) {\n+            JSONObject data = (JSONObject) object;\n+            String mid = data.getJSONObject(\"owner\").getString(\"mid\");\n+            if (configUpList.contains(mid) && !upList.contains(mid)) {\n+                upList.add(mid);\n+                if (upList.size() + num == configUpList.size()) {\n+                    break;\n+                }\n+            }\n+        }\n+        /* æ±‚ configUpList ä¸ upList çš„å·®é›† */\n+        return configUpList.stream().filter(item -> !upList.contains(item)).collect(Collectors.toList());\n+    }\n+\n     /**\n      * è·å– up ä¸»çš„æœ€æ–°30æ¡è§†é¢‘æŠ•ç¨¿ä¿¡æ¯\n      * ä»ä¸­æŒ‘é€‰ä»æœªæŠ•å¸çš„è§†é¢‘è¿›è¡ŒæŠ•å¸"
  },
  {
    "sha": "20592d30b4424beb42abbbabf3f248f00ab93c09",
    "filename": "src/main/java/top/srcrs/util/PackageScanner.java",
    "status": "removed",
    "additions": 0,
    "deletions": 74,
    "changes": 74,
    "blob_url": "https://github.com/justincnn/BilibiliTask/blob/6efa9b298c8728b044128487e5141608cdb039f2/src/main/java/top/srcrs/util/PackageScanner.java",
    "raw_url": "https://github.com/justincnn/BilibiliTask/raw/6efa9b298c8728b044128487e5141608cdb039f2/src/main/java/top/srcrs/util/PackageScanner.java",
    "contents_url": "https://api.github.com/repos/justincnn/BilibiliTask/contents/src/main/java/top/srcrs/util/PackageScanner.java?ref=6efa9b298c8728b044128487e5141608cdb039f2",
    "patch": "@@ -1,74 +0,0 @@\n-package top.srcrs.util;\n-\n-import lombok.extern.slf4j.Slf4j;\n-\n-import java.io.File;\n-import java.net.URL;\n-import java.util.Enumeration;\n-\n-/**\n- * æ‰«ætaskåŒ…ä¸‹çš„æ‰€æœ‰çš„classæ–‡ä»¶\n- * @author srcrs\n- * @Time 2020-10-13\n- */\n-@Slf4j\n-public abstract class PackageScanner {\n-\n-    /**\n-     * å°† . è·¯å¾„æ¢ä¸º / è·¯å¾„\n-     * @param packageName åŒ…å\n-     * @author srcrs\n-     * @Time 2020-10-13\n-     */\n-    public void scannerPackage(String packageName) {\n-        String packagePath = packageName.replace('.', '/');\n-        /* çœŸæ­£çš„è·¯å¾„ä¸­æ˜¯ä»¥ / æˆ– \\ ç›¸éš”ï¼Œæ­¤è·¯å¾„ä»¥ \\ ç›¸éš” */\n-        ClassLoader classLoader = Thread.currentThread().getContextClassLoader();\n-        try {\n-            Enumeration<URL> resources = classLoader.getResources(packagePath);\n-            /* å¾—åˆ°ç»å¯¹è·¯å¾„ */\n-            while (resources.hasMoreElements()) {\n-                URL url = resources.nextElement();\n-                File root = new File(url.toURI());\n-                /* å°†urlè½¬åŒ–æˆuriï¼Œä»¥æ­¤åˆ›å»ºFileå¯¹è±¡ï¼Œåé¢è§£æå°±å˜æˆäº†å¯¹Fileçš„å¤„ç† */\n-                scannerDirectory(root, packageName);\n-            }\n-        } catch (Exception e) {\n-            log.error(\"ğŸ’”æ‰«åŒ…é”™è¯¯ : \", e);\n-        }\n-    }\n-\n-    /**\n-     * é€’å½’æœç´¢targetè·¯å¾„ä¸‹æ‰€æœ‰çš„classæ–‡ä»¶\n-     * @param currentFile javaæ–‡ä»¶ç”Ÿæˆçš„classæ–‡ä»¶è·¯å¾„\n-     * @param packageName åŒ…å\n-     * @author srcrs\n-     * @Time 2020-10-13\n-     */\n-    private void scannerDirectory(File currentFile, String packageName) {\n-        if (!currentFile.isDirectory()) {\n-            return;\n-        }\n-        File[] files = currentFile.listFiles();\n-        /* å¾—åˆ°Fileå¯¹è±¡ç±»å‹çš„ã€å®Œæ•´è·¯å¾„ã€‘çš„æ•°ç»„ */\n-        for (File file : files != null ? files : new File[0]) {\n-            if (file.isFile() && file.getName().endsWith(\".class\")) {\n-                String fileName = file.getName().replace(\".class\", \"\");\n-                /* å»é™¤æ‰åç¼€ .class */\n-                String className = packageName + \".\" + fileName;\n-                /* å¾—åˆ°å¸¦åŒ…åçš„ç±»ï¼Œä¸ºå–å¾—å…ƒç±»å¯¹è±¡åšå‡†å¤‡ */\n-                dealClass(className);\n-                /* å°†å¾—åˆ°çš„å…ƒç±»å¯¹è±¡é€šè¿‡æŠ½è±¡æ–¹æ³•å‚æ•°ä¼ é€’ç»™ç”¨æˆ·ï¼Œä»¥ä¾¿ç”¨æˆ·åç»­æ“ä½œã€‚ */\n-            } else if (file.isDirectory()) {\n-                scannerDirectory(file, packageName + \".\" + file.getName());\n-                /* æ­¤å¤„é‡‡ç”¨é€’å½’ï¼Œåªè¦æ˜¯ç›®å½•å°±ç»§ç»­å¾€ä¸‹ä¸€å±‚éå†ï¼Œç›´åˆ°file.isFile()ä¸ºtrue,ä¸”ä»¥.classç»“å°¾ */\n-            }\n-        }\n-    }\n-\n-    /**\n-     * è·å¾—çœŸå®çš„className\n-     * @param className className\n-     */\n-    public abstract void dealClass(String className);\n-}"
  },
  {
    "sha": "ad27950af4be28ecfbfc0bb42cc0d7e5db45399c",
    "filename": "src/main/java/top/srcrs/util/SendServerChan.java",
    "status": "added",
    "additions": 61,
    "deletions": 0,
    "changes": 61,
    "blob_url": "https://github.com/justincnn/BilibiliTask/blob/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/src/main/java/top/srcrs/util/SendServerChan.java",
    "raw_url": "https://github.com/justincnn/BilibiliTask/raw/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/src/main/java/top/srcrs/util/SendServerChan.java",
    "contents_url": "https://api.github.com/repos/justincnn/BilibiliTask/contents/src/main/java/top/srcrs/util/SendServerChan.java?ref=6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5",
    "patch": "@@ -0,0 +1,61 @@\n+package top.srcrs.util;\n+\n+import com.alibaba.fastjson.JSONObject;\n+import lombok.extern.slf4j.Slf4j;\n+import org.apache.http.HttpEntity;\n+import org.apache.http.HttpResponse;\n+import org.apache.http.HttpStatus;\n+import org.apache.http.client.methods.HttpUriRequest;\n+import org.apache.http.client.methods.RequestBuilder;\n+import org.apache.http.impl.client.CloseableHttpClient;\n+import org.apache.http.impl.client.HttpClients;\n+import org.apache.http.util.EntityUtils;\n+\n+import java.nio.charset.StandardCharsets;\n+\n+/**\n+ * å°†æ—¥å¿—æ¶ˆæ¯å‘é€åˆ°ç”¨æˆ·çš„ server é…±æ¥å£æµ‹è¯•ç‰ˆ ï¼ˆå¾®ä¿¡ï¼‰\n+ *\n+ * @author sh4wnzec\n+ * @Time 2020-12-25\n+ */\n+@Slf4j\n+public class SendServerChan {\n+\n+    private SendServerChan(){}\n+\n+    /**\n+     * å‘é€æ¶ˆæ¯ç»™ç”¨æˆ·ï¼Œå¦‚æœç»‘å®šäº†å¾®ä¿¡ï¼Œä¼šå‘é€åˆ°å¾®ä¿¡ä¸Šã€‚\n+     * https://sct.ftqq.com/sendkey\n+     *\n+     * @param sendkey éœ€è¦ä»serveré…±çš„å®˜ç½‘æ³¨å†Œè·å–\n+     * @author sh4wnzec\n+     * @Time 2020-12-25\n+     */\n+    public static void send(String sendkey) {\n+        /* å°†è¦æ¨é€çš„æ•°æ® */\n+        JSONObject pJson = new JSONObject();\n+        pJson.put(\"title\", \"BilibiliTask è¿è¡Œç»“æœ\");\n+        pJson.put(\"desp\", ReadLog.getMarkDownString(\"logs/logback.log\"));\n+\n+        HttpUriRequest httpPost = RequestBuilder.post()\n+                                                .addHeader(\"Content-Type\", \"application/x-www-form-urlencoded\")\n+                                                .setUri(\"https://sctapi.ftqq.com/\" + sendkey + \".send\")\n+                                                .addParameters(Request.getPairList(pJson))\n+                                                .build();\n+\n+        try (CloseableHttpClient client = HttpClients.createDefault()) {\n+            HttpResponse resp = client.execute(httpPost);\n+            HttpEntity entity = resp.getEntity();\n+            String respContent = EntityUtils.toString(entity, StandardCharsets.UTF_8);\n+            if (resp.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {\n+                log.info(\"ã€Serveré…±æ¨é€ã€‘: æ­£å¸¸âœ”\");\n+            } else {\n+                log.info(\"ã€Serveré…±æ¨é€ã€‘: å¤±è´¥, åŸå› ä¸º: {}âŒ\", respContent);\n+            }\n+        } catch (Exception e) {\n+            log.error(\"ğŸ’”Serveré…±å‘é€é”™è¯¯ : \", e);\n+        }\n+    }\n+\n+}"
  },
  {
    "sha": "2ecae836ecbfc3c6dd8ebdb1c5a5952166a40a3e",
    "filename": "src/main/java/top/srcrs/util/SendTelegram.java",
    "status": "added",
    "additions": 59,
    "deletions": 0,
    "changes": 59,
    "blob_url": "https://github.com/justincnn/BilibiliTask/blob/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/src/main/java/top/srcrs/util/SendTelegram.java",
    "raw_url": "https://github.com/justincnn/BilibiliTask/raw/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/src/main/java/top/srcrs/util/SendTelegram.java",
    "contents_url": "https://api.github.com/repos/justincnn/BilibiliTask/contents/src/main/java/top/srcrs/util/SendTelegram.java?ref=6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5",
    "patch": "@@ -0,0 +1,59 @@\n+package top.srcrs.util;\n+\n+import com.alibaba.fastjson.JSONObject;\n+import lombok.extern.slf4j.Slf4j;\n+import org.apache.http.HttpEntity;\n+import org.apache.http.HttpResponse;\n+import org.apache.http.HttpStatus;\n+import org.apache.http.client.methods.HttpUriRequest;\n+import org.apache.http.client.methods.RequestBuilder;\n+import org.apache.http.entity.StringEntity;\n+import org.apache.http.impl.client.CloseableHttpClient;\n+import org.apache.http.impl.client.HttpClients;\n+import org.apache.http.util.EntityUtils;\n+\n+import java.nio.charset.StandardCharsets;\n+\n+/**\n+ * ç»™ Telegram ç¾¤ç»„æœºå™¨äººæ¨é€æ¶ˆæ¯\n+ * @author qiwihui\n+ * @Time 2020-12-16\n+ */\n+@Slf4j\n+public class SendTelegram {\n+\n+    private SendTelegram(){}\n+\n+    /**\n+     * å‘é€æ¶ˆæ¯ç»™ç¾¤ç»„\n+     * @param telegramBotToken æœºå™¨äºº Token\n+     * @param telegramChatID ç¾¤ç»„ ID\n+     * @author qiwihui\n+     * @Time 2020-12-16\n+     */\n+    public static void send(String telegramBotToken, String telegramChatID){\n+        /* å°†è¦æ¨é€çš„æ•°æ® */\n+        String desp = ReadLog.getMarkDownString(\"logs/logback.log\");\n+        JSONObject bodyJson = new JSONObject();\n+        bodyJson.put(\"chat_id\", telegramChatID);\n+        bodyJson.put(\"text\", \"BilibiliTaskè¿è¡Œç»“æœ:\\n\" + desp);\n+        HttpUriRequest httpPost = RequestBuilder.post()\n+                .addHeader(\"Content-Type\", \"application/json;charset=utf-8\")\n+                .setUri(\"https://api.telegram.org/bot\"+telegramBotToken+\"/sendMessage\")\n+                .setEntity(new StringEntity(bodyJson.toString(),\"UTF-8\"))\n+                .build();\n+        try(CloseableHttpClient client = HttpClients.createDefault()){\n+            HttpResponse resp = client.execute(httpPost);\n+            HttpEntity entity = resp.getEntity();\n+            String respContent = EntityUtils.toString(entity, StandardCharsets.UTF_8);\n+            if(resp.getStatusLine().getStatusCode() == HttpStatus.SC_OK){\n+                log.info(\"ã€Telegramæ¨é€ã€‘: æ­£å¸¸âœ”\");\n+            } else{\n+                log.info(\"ã€Telegramæ¨é€ã€‘: å¤±è´¥, åŸå› ä¸º: {}âŒ\", respContent);\n+            }\n+            System.out.println(respContent);\n+        } catch (Exception e){\n+            log.error(\"ğŸ’”Telegramé€šçŸ¥é”™è¯¯ : \", e);\n+        }\n+    }\n+}"
  },
  {
    "sha": "43d59befee7e828c8f3449152061f3ebe7414bea",
    "filename": "src/main/java/top/srcrs/util/TaskRegistry.java",
    "status": "added",
    "additions": 50,
    "deletions": 0,
    "changes": 50,
    "blob_url": "https://github.com/justincnn/BilibiliTask/blob/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/src/main/java/top/srcrs/util/TaskRegistry.java",
    "raw_url": "https://github.com/justincnn/BilibiliTask/raw/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/src/main/java/top/srcrs/util/TaskRegistry.java",
    "contents_url": "https://api.github.com/repos/justincnn/BilibiliTask/contents/src/main/java/top/srcrs/util/TaskRegistry.java?ref=6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5",
    "patch": "@@ -0,0 +1,50 @@\n+package top.srcrs.util;\n+\n+import lombok.extern.slf4j.Slf4j;\n+import top.srcrs.Task;\n+import top.srcrs.task.bigvip.BiCoinApply;\n+import top.srcrs.task.bigvip.CollectVipGift;\n+import top.srcrs.task.daily.DailyTask;\n+import top.srcrs.task.daily.ThrowCoinTask;\n+import top.srcrs.task.live.BiLiveTask;\n+import top.srcrs.task.live.GiveGiftTask;\n+import top.srcrs.task.live.Silver2CoinTask;\n+import top.srcrs.task.manga.MangaTask;\n+\n+import java.util.Arrays;\n+import java.util.List;\n+\n+/**\n+ * è¿è¡Œæ‰€æœ‰å·²æ³¨å†Œçš„Task\n+ *\n+ * @author srcrs\n+ * @Time 2020-10-13\n+ */\n+@Slf4j\n+public abstract class TaskRegistry {\n+\n+    private static final List<Class<? extends Task>> REGISTERED_TASKS = Arrays.asList(\n+            BiCoinApply.class,\n+            CollectVipGift.class,\n+            DailyTask.class,\n+            ThrowCoinTask.class,\n+            BiLiveTask.class,\n+            GiveGiftTask.class,\n+            Silver2CoinTask.class,\n+            MangaTask.class\n+    );\n+\n+    /**\n+     * è¿è¡Œæ‰€æœ‰å·²æ³¨å†Œä»»åŠ¡\n+     */\n+    public void runTasks() {\n+        REGISTERED_TASKS.stream().map(Class::getName).forEach(this::dealClass);\n+    }\n+\n+    /**\n+     * è·å¾—çœŸå®çš„className\n+     *\n+     * @param className className\n+     */\n+    public abstract void dealClass(String className);\n+}"
  },
  {
    "sha": "c6f98d34d4be1eeca728bcf2592e9891cd0db833",
    "filename": "src/main/resources/api.json",
    "status": "modified",
    "additions": 9,
    "deletions": 0,
    "changes": 9,
    "blob_url": "https://github.com/justincnn/BilibiliTask/blob/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/src/main/resources/api.json",
    "raw_url": "https://github.com/justincnn/BilibiliTask/raw/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/src/main/resources/api.json",
    "contents_url": "https://api.github.com/repos/justincnn/BilibiliTask/contents/src/main/resources/api.json?ref=6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5",
    "patch": "@@ -532,6 +532,15 @@\n         },\n         \"comment\": \"ç”¨æˆ·è¿½ç•ªåˆ—è¡¨\"\n       },\n+      \"videos\": {\n+        \"url\": \"http://api.bilibili.com/x/space/coin/video\",\n+        \"method\": \"GET\",\n+        \"verify\": false,\n+        \"params\": {\n+          \"vmid\": \"uid\"\n+        },\n+        \"comment\": \"30å¤©å†…æŠ•è¿‡ç¡¬å¸çš„è§†é¢‘\"\n+      },\n       \"followings\": {\n         \"url\": \"https://api.bilibili.com/x/relation/followings\",\n         \"method\": \"GET\","
  },
  {
    "sha": "a05b8da2af9c0389ab756e9dbc7a0e27ff08ef72",
    "filename": "src/main/resources/config.yml",
    "status": "modified",
    "additions": 5,
    "deletions": 2,
    "changes": 7,
    "blob_url": "https://github.com/justincnn/BilibiliTask/blob/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/src/main/resources/config.yml",
    "raw_url": "https://github.com/justincnn/BilibiliTask/raw/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/src/main/resources/config.yml",
    "contents_url": "https://api.github.com/repos/justincnn/BilibiliTask/contents/src/main/resources/config.yml?ref=6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5",
    "patch": "@@ -1,5 +1,5 @@\n #æ¯å¤©éœ€è¦æŠ•å¸çš„æ•°é‡ [0,5]ã€‚\n-coin: 5\n+coin: 0\n #é€å‡ºå³å°†è¿‡æœŸç¤¼ç‰© [true,false]\n gift: true\n #é“¶ç“œå­å…‘æ¢ä¸ºç¡¬å¸ [true,false]\n@@ -8,9 +8,12 @@ s2c: true\n autoBiCoin: 1\n #ç”¨æˆ·è®¾å¤‡çš„æ ‡è¯† [android,ios]\n platform: android\n-# è‡ªå®šä¹‰ä¼˜å…ˆç»™è¿™äº› up çš„è§†é¢‘æŠ•å¸ , ä»¥ymlæ•°ç»„çš„å½¢å¼ , å¡«å†™å…¶ uid (mid)\n+#è‡ªå®šä¹‰ä¼˜å…ˆç»™è¿™äº› up çš„è§†é¢‘æŠ•å¸ , ä»¥ymlæ•°ç»„çš„å½¢å¼ , å¡«å†™å…¶ uid (mid)\n upList:\n+  - 8730238\n #è¿›è¡Œæ¼«ç”»ç­¾åˆ°ä»»åŠ¡ [true,false]\n manga: true\n #ä¼˜å…ˆé€å‡ºå³å°†è¿‡æœŸç¤¼ç‰©ç»™æ­¤upçš„ç›´æ’­é—´,å¡«å†™å…¶ uid\n upLive:\n+#å¯¹äºè¿›è¡ŒæŠ•å¸çš„è§†é¢‘é€‰æ‹©æ˜¯å¦ç‚¹èµ , é»˜è®¤ä¸ç‚¹èµ [0,1]\n+selectLike: 0"
  },
  {
    "sha": "d92a0362ea1b4dcda2da2e36c6ac8a936d0d4027",
    "filename": "src/test/java/top/srcrs/util/SendTest.java",
    "status": "modified",
    "additions": 14,
    "deletions": 0,
    "changes": 14,
    "blob_url": "https://github.com/justincnn/BilibiliTask/blob/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/src/test/java/top/srcrs/util/SendTest.java",
    "raw_url": "https://github.com/justincnn/BilibiliTask/raw/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/src/test/java/top/srcrs/util/SendTest.java",
    "contents_url": "https://api.github.com/repos/justincnn/BilibiliTask/contents/src/test/java/top/srcrs/util/SendTest.java?ref=6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5",
    "patch": "@@ -17,11 +17,25 @@ void SendServerTest() {\n         }\n     }\n \n+    @Test\n+    void SendServerChanTest() {\n+        if(StringUtil.isNotBlank(System.getenv(\"SENDKEY\"))){\n+            SendServerChan.send(System.getenv(\"SENDKEY\"));\n+        }\n+    }\n+\n     @Test\n     void SendPushPlusTest() {\n         if(StringUtil.isNotBlank(System.getenv(\"PUSHPLUSTK\"))){\n             SendPushPlus.send(System.getenv(\"PUSHPLUSTK\"));\n         }\n     }\n \n+    @Test\n+    void SendTgBotTest() {\n+        if(StringUtil.isNotBlank(System.getenv(\"TGBOT\"))){\n+            SendTelegram.send(System.getenv(\"TELEGRAM_BOT_TOKEN\"),System.getenv(\"TELEGRAM_CHAT_ID\"));\n+        }\n+    }\n+\n }"
  },
  {
    "sha": "b19bbe6a3bd9e5729afb523db449f32575e36138",
    "filename": "src/test/java/top/srcrs/util/TaskRegistryTest.java",
    "status": "added",
    "additions": 35,
    "deletions": 0,
    "changes": 35,
    "blob_url": "https://github.com/justincnn/BilibiliTask/blob/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/src/test/java/top/srcrs/util/TaskRegistryTest.java",
    "raw_url": "https://github.com/justincnn/BilibiliTask/raw/6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5/src/test/java/top/srcrs/util/TaskRegistryTest.java",
    "contents_url": "https://api.github.com/repos/justincnn/BilibiliTask/contents/src/test/java/top/srcrs/util/TaskRegistryTest.java?ref=6c36ded06fcdc7fe3524e5e3afd007d9b301e9d5",
    "patch": "@@ -0,0 +1,35 @@\n+package top.srcrs.util;\n+\n+import org.junit.jupiter.api.Test;\n+import top.srcrs.Task;\n+\n+import java.util.Arrays;\n+\n+import static org.junit.jupiter.api.Assertions.*;\n+\n+/**\n+ * æµ‹è¯•æ‰«æ\n+ *\n+ * @author : Ali\n+ * @date : 2020/12/5\n+ */\n+class TaskRegistryTest {\n+\n+    @Test\n+    void taskTest() {\n+        TaskRegistry pack = new TaskRegistry() {\n+            @Override\n+            public void dealClass(String className) {\n+                try{\n+                    Class<?> clazz = Class.forName(className);\n+                    // åˆ¤æ–­æ˜¯å¦å®ç°äº†æ¥å£Task\n+                    assertTrue(Arrays.stream(clazz.getInterfaces()).parallel().anyMatch(taskI -> taskI.equals(Task.class)));\n+                } catch (Exception e){\n+                    e.printStackTrace();\n+                }\n+            }\n+        };\n+        pack.runTasks();\n+    }\n+\n+}"
  }
]
