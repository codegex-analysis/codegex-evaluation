[
  {
    "sha": "3816cbbe232399b0d138e9456c87398a67cd06c0",
    "filename": "azure-client-runtime/src/main/java/com/microsoft/azure/EvaluationDetails.java",
    "status": "added",
    "additions": 25,
    "deletions": 0,
    "changes": 25,
    "blob_url": "https://github.com/Azure/autorest-clientruntime-for-java/blob/8be300ac493c2d6291e35b4e8752cac2a3899136/azure-client-runtime/src/main/java/com/microsoft/azure/EvaluationDetails.java",
    "raw_url": "https://github.com/Azure/autorest-clientruntime-for-java/raw/8be300ac493c2d6291e35b4e8752cac2a3899136/azure-client-runtime/src/main/java/com/microsoft/azure/EvaluationDetails.java",
    "contents_url": "https://api.github.com/repos/Azure/autorest-clientruntime-for-java/contents/azure-client-runtime/src/main/java/com/microsoft/azure/EvaluationDetails.java?ref=8be300ac493c2d6291e35b4e8752cac2a3899136",
    "patch": "@@ -0,0 +1,25 @@\n+/**\n+ * Copyright (c) Microsoft Corporation. All rights reserved.\n+ * Licensed under the MIT License. See License.txt in the project root for\n+ * license information.\n+ */\n+\n+package com.microsoft.azure;\n+\n+import java.util.List;\n+\n+public class EvaluationDetails {\n+\n+    private List<ExpressionEvaluationDetails> evaluatedExpressions;\n+\n+    public List<ExpressionEvaluationDetails> getEvaluatedExpressions() {\n+        return evaluatedExpressions;\n+    }\n+\n+    @Override\n+    public String toString() {\n+        return \"EvaluationDetails{\"\n+                + \"evaluatedExpressions=\" + evaluatedExpressions\n+                + '}';\n+    }\n+}"
  },
  {
    "sha": "d3667780ef025c71ca51b10f2154b34df1d61252",
    "filename": "azure-client-runtime/src/main/java/com/microsoft/azure/ExpressionEvaluationDetails.java",
    "status": "added",
    "additions": 60,
    "deletions": 0,
    "changes": 60,
    "blob_url": "https://github.com/Azure/autorest-clientruntime-for-java/blob/8be300ac493c2d6291e35b4e8752cac2a3899136/azure-client-runtime/src/main/java/com/microsoft/azure/ExpressionEvaluationDetails.java",
    "raw_url": "https://github.com/Azure/autorest-clientruntime-for-java/raw/8be300ac493c2d6291e35b4e8752cac2a3899136/azure-client-runtime/src/main/java/com/microsoft/azure/ExpressionEvaluationDetails.java",
    "contents_url": "https://api.github.com/repos/Azure/autorest-clientruntime-for-java/contents/azure-client-runtime/src/main/java/com/microsoft/azure/ExpressionEvaluationDetails.java?ref=8be300ac493c2d6291e35b4e8752cac2a3899136",
    "patch": "@@ -0,0 +1,60 @@\n+/**\n+ * Copyright (c) Microsoft Corporation. All rights reserved.\n+ * Licensed under the MIT License. See License.txt in the project root for\n+ * license information.\n+ */\n+\n+package com.microsoft.azure;\n+\n+import java.util.List;\n+\n+public class ExpressionEvaluationDetails {\n+\n+    private String expression;\n+\n+    private String expressionValue;\n+\n+    private String operator;\n+\n+    private String path;\n+\n+    private String result;\n+\n+    private List<String> targetValue;\n+\n+    public String getExpression() {\n+        return expression;\n+    }\n+\n+    public String getExpressionValue() {\n+        return expressionValue;\n+    }\n+\n+    public String getOperator() {\n+        return operator;\n+    }\n+\n+    public String getPath() {\n+        return path;\n+    }\n+\n+    public String getResult() {\n+        return result;\n+    }\n+\n+    public List<String> getTargetValue() {\n+        return targetValue;\n+    }\n+\n+    @Override\n+    public String toString() {\n+        return \"ExpressionEvaluationDetails{\"\n+                + \"expression='\" + expression + '\\''\n+                + \", expressionValue='\" + expressionValue + '\\''\n+                + \", operator='\" + operator + '\\''\n+                + \", path='\" + path + '\\''\n+                + \", result='\" + result + '\\''\n+                + \", targetValue=\" + targetValue\n+                + '}';\n+    }\n+}"
  },
  {
    "sha": "f92cb76e45eeccd9b1ee50bba435626709c3446b",
    "filename": "azure-client-runtime/src/main/java/com/microsoft/azure/PolicyViolation.java",
    "status": "modified",
    "additions": 11,
    "deletions": 8,
    "changes": 19,
    "blob_url": "https://github.com/Azure/autorest-clientruntime-for-java/blob/8be300ac493c2d6291e35b4e8752cac2a3899136/azure-client-runtime/src/main/java/com/microsoft/azure/PolicyViolation.java",
    "raw_url": "https://github.com/Azure/autorest-clientruntime-for-java/raw/8be300ac493c2d6291e35b4e8752cac2a3899136/azure-client-runtime/src/main/java/com/microsoft/azure/PolicyViolation.java",
    "contents_url": "https://api.github.com/repos/Azure/autorest-clientruntime-for-java/contents/azure-client-runtime/src/main/java/com/microsoft/azure/PolicyViolation.java?ref=8be300ac493c2d6291e35b4e8752cac2a3899136",
    "patch": "@@ -9,6 +9,7 @@\n import java.io.IOException;\n \n import com.fasterxml.jackson.core.JsonParseException;\n+import com.fasterxml.jackson.databind.DeserializationFeature;\n import com.fasterxml.jackson.databind.JsonMappingException;\n import com.fasterxml.jackson.databind.MapperFeature;\n import com.fasterxml.jackson.databind.ObjectMapper;\n@@ -22,22 +23,24 @@\n      * Policy violation error details.\n      */\n     private PolicyViolationErrorInfo policyErrorInfo;\n-    \n+\n     /**\n      * Initializes a new instance of PolicyViolation.\n-     * @param type the error type\n+     *\n+     * @param type            the error type\n      * @param policyErrorInfo the error details\n-     * @throws JsonParseException if the policyErrorInfo has invalid content.\n-     * @throws JsonMappingException if the policyErrorInfo's JSON does not match the expected schema. \n-     * @throws IOException if an IO error occurs.\n+     * @throws JsonParseException   if the policyErrorInfo has invalid content.\n+     * @throws JsonMappingException if the policyErrorInfo's JSON does not match the expected schema.\n+     * @throws IOException          if an IO error occurs.\n      */\n     public PolicyViolation(String type, ObjectNode policyErrorInfo) throws JsonParseException, JsonMappingException, IOException {\n         super(type, policyErrorInfo);\n-        ObjectMapper objectMapper = new ObjectMapper();\n-        objectMapper.configure(MapperFeature.ACCEPT_CASE_INSENSITIVE_PROPERTIES, true);\n+        ObjectMapper objectMapper = new ObjectMapper()\n+                .configure(MapperFeature.ACCEPT_CASE_INSENSITIVE_PROPERTIES, true)\n+                .configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\n         this.policyErrorInfo = objectMapper.readValue(policyErrorInfo.toString(), PolicyViolationErrorInfo.class);\n     }\n-    \n+\n     /**\n      * @return the policy violation error details.\n      */"
  },
  {
    "sha": "3a8c2292be644c59558d1454e82892e768c6a95e",
    "filename": "azure-client-runtime/src/main/java/com/microsoft/azure/PolicyViolationErrorInfo.java",
    "status": "modified",
    "additions": 35,
    "deletions": 2,
    "changes": 37,
    "blob_url": "https://github.com/Azure/autorest-clientruntime-for-java/blob/8be300ac493c2d6291e35b4e8752cac2a3899136/azure-client-runtime/src/main/java/com/microsoft/azure/PolicyViolationErrorInfo.java",
    "raw_url": "https://github.com/Azure/autorest-clientruntime-for-java/raw/8be300ac493c2d6291e35b4e8752cac2a3899136/azure-client-runtime/src/main/java/com/microsoft/azure/PolicyViolationErrorInfo.java",
    "contents_url": "https://api.github.com/repos/Azure/autorest-clientruntime-for-java/contents/azure-client-runtime/src/main/java/com/microsoft/azure/PolicyViolationErrorInfo.java?ref=8be300ac493c2d6291e35b4e8752cac2a3899136",
    "patch": "@@ -78,7 +78,9 @@\n      * The policy set definition display name.\n      */\n     private String policySetDefinitionDisplayName;\n-    \n+\n+    private EvaluationDetails evaluationDetails;\n+\n     /**\n      * @return the policy definition id.\n      */\n@@ -170,17 +172,48 @@ public String getPolicySetDefinitionDisplayName() {\n         return policySetDefinitionDisplayName;\n     }\n \n+    public EvaluationDetails getEvaluationDetails() {\n+        return evaluationDetails;\n+    }\n+\n+    @Override\n+    public String toString() {\n+        return \"PolicyViolationErrorInfo{\"\n+                + \"policyDefinitionId='\" + policyDefinitionId + '\\''\n+                + \", policySetDefinitionId='\" + policySetDefinitionId + '\\''\n+                + \", policyDefinitionReferenceId='\" + policyDefinitionReferenceId + '\\''\n+                + \", policySetDefinitionName='\" + policySetDefinitionName + '\\''\n+                + \", policyDefinitionName='\" + policyDefinitionName + '\\''\n+                + \", policyDefinitionEffect='\" + policyDefinitionEffect + '\\''\n+                + \", policyAssignmentId='\" + policyAssignmentId + '\\''\n+                + \", policyAssignmentName='\" + policyAssignmentName + '\\''\n+                + \", policyAssignmentDisplayName='\" + policyAssignmentDisplayName + '\\''\n+                + \", policyAssignmentScope='\" + policyAssignmentScope + '\\''\n+                + \", policyAssignmentParameters=\" + policyAssignmentParameters\n+                + \", policyDefinitionDisplayName='\" + policyDefinitionDisplayName + '\\''\n+                + \", policySetDefinitionDisplayName='\" + policySetDefinitionDisplayName + '\\''\n+                + \", evaluationDetails=\" + evaluationDetails\n+                + '}';\n+    }\n+\n     /**\n      * An instance of this class provides policy parameter value.\n      */\n     public static class PolicyParameter {\n         private JsonNode value;\n-        \n+\n         /**\n          * @return the parameter value.\n          */\n         public JsonNode getValue() {\n             return value;\n         }\n+\n+        @Override\n+        public String toString() {\n+            return \"PolicyParameter{\"\n+                    + \"value=\" + value\n+                    + '}';\n+        }\n     }\n }\n\\ No newline at end of file"
  },
  {
    "sha": "22387d5c80c40e75fe99095c86f8f656b8ed2949",
    "filename": "azure-client-runtime/src/test/java/com/microsoft/azure/CloudErrorDeserializerTests.java",
    "status": "modified",
    "additions": 210,
    "deletions": 0,
    "changes": 210,
    "blob_url": "https://github.com/Azure/autorest-clientruntime-for-java/blob/8be300ac493c2d6291e35b4e8752cac2a3899136/azure-client-runtime/src/test/java/com/microsoft/azure/CloudErrorDeserializerTests.java",
    "raw_url": "https://github.com/Azure/autorest-clientruntime-for-java/raw/8be300ac493c2d6291e35b4e8752cac2a3899136/azure-client-runtime/src/test/java/com/microsoft/azure/CloudErrorDeserializerTests.java",
    "contents_url": "https://api.github.com/repos/Azure/autorest-clientruntime-for-java/contents/azure-client-runtime/src/test/java/com/microsoft/azure/CloudErrorDeserializerTests.java?ref=8be300ac493c2d6291e35b4e8752cac2a3899136",
    "patch": "@@ -6,6 +6,9 @@\n \n package com.microsoft.azure;\n \n+import java.io.IOException;\n+import java.util.List;\n+\n import com.fasterxml.jackson.databind.ObjectMapper;\n import com.microsoft.azure.serializer.AzureJacksonAdapter;\n import com.microsoft.rest.protocol.SerializerAdapter;\n@@ -171,4 +174,211 @@ public void cloudErrorWitDifferentCasing() throws Exception {\n         Assert.assertEquals(\"Allowed locations\", policyViolation.policyErrorInfo().getPolicyDefinitionDisplayName());\n         Assert.assertEquals(\"westus\", policyViolation.policyErrorInfo().getPolicyAssignmentParameters().get(\"listOfAllowedLocations\").getValue().elements().next().asText());\n     }\n+\n+    @Test\n+    public void testEvaluationDetails() throws IOException {\n+        SerializerAdapter<ObjectMapper> serializerAdapter = new AzureJacksonAdapter();\n+        String bodyString = \"{\\n\"\n+                + \"  \\\"error\\\": {\\n\"\n+                + \"    \\\"code\\\": \\\"RequestDisallowedByPolicy\\\",\\n\"\n+                + \"    \\\"target\\\": \\\"apim-NorthWindShoes346878645\\\",\\n\"\n+                + \"    \\\"message\\\": \\\"Resource 'apim-NorthWindShoes346878645' was disallowed by policy. (Code: RequestDisallowedByPolicy)\\\",\\n\"\n+                + \"    \\\"additionalInfo\\\": [\\n\"\n+                + \"      {\\n\"\n+                + \"        \\\"type\\\": \\\"PolicyViolation\\\",\\n\"\n+                + \"        \\\"info\\\": {\\n\"\n+                + \"          \\\"policyDefinitionDisplayName\\\": \\\"Allowed resource types\\\",\\n\"\n+                + \"          \\\"policySetDefinitionDisplayName\\\": \\\"webapp\\\",\\n\"\n+                + \"          \\\"evaluationDetails\\\": {\\n\"\n+                + \"            \\\"evaluatedExpressions\\\": [\\n\"\n+                + \"              {\\n\"\n+                + \"                \\\"result\\\": \\\"False\\\",\\n\"\n+                + \"                \\\"expression\\\": \\\"type\\\",\\n\"\n+                + \"                \\\"path\\\": \\\"type\\\",\\n\"\n+                + \"                \\\"expressionValue\\\": \\\"Microsoft.ApiManagement/service\\\",\\n\"\n+                + \"                \\\"targetValue\\\": [\\n\"\n+                + \"                  \\\"Microsoft.Resources/resourceGroups\\\",\\n\"\n+                + \"                  \\\"Microsoft.Storage/storageAccounts\\\",\\n\"\n+                + \"                  \\\"Microsoft.Web/sites\\\",\\n\"\n+                + \"                  \\\"Microsoft.Web/serverFarms\\\",\\n\"\n+                + \"                  \\\"Microsoft.Web/functions\\\",\\n\"\n+                + \"                  \\\"Microsoft.DocumentDB/databaseAccounts\\\",\\n\"\n+                + \"                  \\\"microsoft.insights/components\\\",\\n\"\n+                + \"                  \\\"Microsoft.KeyVault/vaults\\\",\\n\"\n+                + \"                  \\\"Microsoft.Cache/Redis\\\",\\n\"\n+                + \"                  \\\"Microsoft.ServiceBus/namespaces\\\",\\n\"\n+                + \"                  \\\"Microsoft.ServiceBus/namespaces/authorizationrules\\\",\\n\"\n+                + \"                  \\\"Microsoft.ServiceBus/namespaces/queues\\\",\\n\"\n+                + \"                  \\\"Microsoft.ServiceBus/namespaces/queues/authorizationrules\\\",\\n\"\n+                + \"                  \\\"Microsoft.ServiceBus/namespaces/topics\\\",\\n\"\n+                + \"                  \\\"Microsoft.ServiceBus/namespaces/topics/authorizationrules\\\",\\n\"\n+                + \"                  \\\"Microsoft.ServiceBus/namespaces/topics/subscriptions\\\",\\n\"\n+                + \"                  \\\"Microsoft.ServiceBus/namespaces/topics/subscriptions/rules\\\",\\n\"\n+                + \"                  \\\"Microsoft.CognitiveServices/accounts\\\",\\n\"\n+                + \"                  \\\"Microsoft.Web/sites/slots\\\",\\n\"\n+                + \"                  \\\"Microsoft.Web/sites/slots/instances\\\",\\n\"\n+                + \"                  \\\"Microsoft.Web/sites/slots/metrics\\\",\\n\"\n+                + \"                  \\\"Microsoft.Web/sites/metrics\\\",\\n\"\n+                + \"                  \\\"Microsoft.Web/sites/instances\\\",\\n\"\n+                + \"                  \\\"Microsoft.Web/certificates\\\",\\n\"\n+                + \"                  \\\"Microsoft.Portal/dashboards\\\",\\n\"\n+                + \"                  \\\"Microsoft.ContainerRegistry/registries\\\",\\n\"\n+                + \"                  \\\"Microsoft.ContainerRegistry/registries/webhooks\\\",\\n\"\n+                + \"                  \\\"Microsoft.Web/connections\\\",\\n\"\n+                + \"                  \\\"Microsoft.Logic/workflows\\\",\\n\"\n+                + \"                  \\\"Microsoft.Web/customApis\\\",\\n\"\n+                + \"                  \\\"Microsoft.Search/searchServices\\\",\\n\"\n+                + \"                  \\\"Microsoft.Network/trafficmanagerprofiles\\\",\\n\"\n+                + \"                  \\\"Microsoft.Sql/servers\\\",\\n\"\n+                + \"                  \\\"Microsoft.Sql/servers/databases\\\",\\n\"\n+                + \"                  \\\"Microsoft.SignalRService/SignalR\\\"\\n\"\n+                + \"                ],\\n\"\n+                + \"                \\\"operator\\\": \\\"In\\\"\\n\"\n+                + \"              }\\n\"\n+                + \"            ]\\n\"\n+                + \"          },\\n\"\n+                + \"          \\\"policyDefinitionId\\\": \\\"/providers/Microsoft.Authorization/policyDefinitions/a08ec900-254a-4555-9bf5-e42af04b5c5c\\\",\\n\"\n+                + \"          \\\"policySetDefinitionId\\\": \\\"/providers/Microsoft.Management/managementGroups/triplecrown2/providers/Microsoft.Authorization/policySetDefinitions/f06460e7-86f9-42ad-8955-fb55bad92028\\\",\\n\"\n+                + \"          \\\"policyDefinitionReferenceId\\\": \\\"8272972042953317437\\\",\\n\"\n+                + \"          \\\"policySetDefinitionName\\\": \\\"f06460e7-86f9-42ad-8955-fb55bad92028\\\",\\n\"\n+                + \"          \\\"policyDefinitionName\\\": \\\"a08ec900-254a-4555-9bf5-e42af04b5c5c\\\",\\n\"\n+                + \"          \\\"policyDefinitionEffect\\\": \\\"deny\\\",\\n\"\n+                + \"          \\\"policyAssignmentId\\\": \\\"/subscriptions/<subscription-id>/resourceGroups/<resouce-group>/providers/Microsoft.Authorization/policyAssignments/TripleCrownPolicy\\\",\\n\"\n+                + \"          \\\"policyAssignmentName\\\": \\\"TripleCrownPolicy\\\",\\n\"\n+                + \"          \\\"policyAssignmentDisplayName\\\": \\\"Sandbox Policy\\\",\\n\"\n+                + \"          \\\"policyAssignmentScope\\\": \\\"/subscriptions/<subscription-id>/resourceGroups/<resouce-group>\\\"\\n\"\n+                + \"        }\\n\"\n+                + \"      },\\n\"\n+                + \"      {\\n\"\n+                + \"        \\\"type\\\": \\\"PolicyViolation\\\",\\n\"\n+                + \"        \\\"info\\\": {\\n\"\n+                + \"          \\\"policyDefinitionDisplayName\\\": \\\"Allowed resource types\\\",\\n\"\n+                + \"          \\\"policySetDefinitionDisplayName\\\": \\\"webapp\\\",\\n\"\n+                + \"          \\\"evaluationDetails\\\": {\\n\"\n+                + \"            \\\"evaluatedExpressions\\\": [\\n\"\n+                + \"              {\\n\"\n+                + \"                \\\"result\\\": \\\"False\\\",\\n\"\n+                + \"                \\\"expression\\\": \\\"type\\\",\\n\"\n+                + \"                \\\"path\\\": \\\"type\\\",\\n\"\n+                + \"                \\\"expressionValue\\\": \\\"Microsoft.ApiManagement/service\\\",\\n\"\n+                + \"                \\\"targetValue\\\": [\\n\"\n+                + \"                  \\\"Microsoft.Resources/resourceGroups\\\",\\n\"\n+                + \"                  \\\"Microsoft.Storage/storageAccounts\\\",\\n\"\n+                + \"                  \\\"Microsoft.Web/sites\\\",\\n\"\n+                + \"                  \\\"Microsoft.Web/serverFarms\\\",\\n\"\n+                + \"                  \\\"Microsoft.Web/functions\\\",\\n\"\n+                + \"                  \\\"Microsoft.DocumentDB/databaseAccounts\\\",\\n\"\n+                + \"                  \\\"microsoft.insights/components\\\",\\n\"\n+                + \"                  \\\"Microsoft.KeyVault/vaults\\\",\\n\"\n+                + \"                  \\\"Microsoft.Cache/Redis\\\",\\n\"\n+                + \"                  \\\"Microsoft.ServiceBus/namespaces\\\",\\n\"\n+                + \"                  \\\"Microsoft.ServiceBus/namespaces/authorizationrules\\\",\\n\"\n+                + \"                  \\\"Microsoft.ServiceBus/namespaces/queues\\\",\\n\"\n+                + \"                  \\\"Microsoft.ServiceBus/namespaces/queues/authorizationrules\\\",\\n\"\n+                + \"                  \\\"Microsoft.ServiceBus/namespaces/topics\\\",\\n\"\n+                + \"                  \\\"Microsoft.ServiceBus/namespaces/topics/authorizationrules\\\",\\n\"\n+                + \"                  \\\"Microsoft.ServiceBus/namespaces/topics/subscriptions\\\",\\n\"\n+                + \"                  \\\"Microsoft.ServiceBus/namespaces/topics/subscriptions/rules\\\",\\n\"\n+                + \"                  \\\"Microsoft.CognitiveServices/accounts\\\",\\n\"\n+                + \"                  \\\"Microsoft.Web/sites/slots\\\",\\n\"\n+                + \"                  \\\"Microsoft.Web/sites/slots/instances\\\",\\n\"\n+                + \"                  \\\"Microsoft.Web/sites/slots/metrics\\\",\\n\"\n+                + \"                  \\\"Microsoft.Web/sites/metrics\\\",\\n\"\n+                + \"                  \\\"Microsoft.Web/sites/instances\\\",\\n\"\n+                + \"                  \\\"Microsoft.Web/certificates\\\",\\n\"\n+                + \"                  \\\"Microsoft.Portal/dashboards\\\",\\n\"\n+                + \"                  \\\"Microsoft.ContainerRegistry/registries\\\",\\n\"\n+                + \"                  \\\"Microsoft.ContainerRegistry/registries/webhooks\\\",\\n\"\n+                + \"                  \\\"Microsoft.Web/connections\\\",\\n\"\n+                + \"                  \\\"Microsoft.Logic/workflows\\\",\\n\"\n+                + \"                  \\\"Microsoft.Web/customApis\\\",\\n\"\n+                + \"                  \\\"Microsoft.Search/searchServices\\\",\\n\"\n+                + \"                  \\\"Microsoft.Network/trafficmanagerprofiles\\\",\\n\"\n+                + \"                  \\\"Microsoft.Sql/servers\\\",\\n\"\n+                + \"                  \\\"Microsoft.Sql/servers/databases\\\",\\n\"\n+                + \"                  \\\"Microsoft.SignalRService/SignalR\\\"\\n\"\n+                + \"                ],\\n\"\n+                + \"                \\\"operator\\\": \\\"In\\\"\\n\"\n+                + \"              }\\n\"\n+                + \"            ]\\n\"\n+                + \"          },\\n\"\n+                + \"          \\\"policyDefinitionId\\\": \\\"/providers/Microsoft.Authorization/policyDefinitions/a08ec900-254a-4555-9bf5-e42af04b5c5c\\\",\\n\"\n+                + \"          \\\"policySetDefinitionId\\\": \\\"/providers/Microsoft.Management/managementGroups/triplecrown2/providers/Microsoft.Authorization/policySetDefinitions/f06460e7-86f9-42ad-8955-fb55bad92028\\\",\\n\"\n+                + \"          \\\"policyDefinitionReferenceId\\\": \\\"8272972042953317437\\\",\\n\"\n+                + \"          \\\"policySetDefinitionName\\\": \\\"f06460e7-86f9-42ad-8955-fb55bad92028\\\",\\n\"\n+                + \"          \\\"policyDefinitionName\\\": \\\"a08ec900-254a-4555-9bf5-e42af04b5c5c\\\",\\n\"\n+                + \"          \\\"policyDefinitionEffect\\\": \\\"deny\\\",\\n\"\n+                + \"          \\\"policyAssignmentId\\\": \\\"/providers/Microsoft.Management/managementGroups/triplecrown2/providers/Microsoft.Authorization/policyAssignments/4a0a4629d22043e6a70a69f9\\\",\\n\"\n+                + \"          \\\"policyAssignmentName\\\": \\\"4a0a4629d22043e6a70a69f9\\\",\\n\"\n+                + \"          \\\"policyAssignmentDisplayName\\\": \\\"webapp\\\",\\n\"\n+                + \"          \\\"policyAssignmentScope\\\": \\\"/providers/Microsoft.Management/managementGroups/triplecrown2\\\",\\n\"\n+                + \"          \\\"policyAssignmentParameters\\\": {}\\n\"\n+                + \"        }\\n\"\n+                + \"      }\\n\"\n+                + \"    ],\\n\"\n+                + \"    \\\"policyDetails\\\": [\\n\"\n+                + \"      {\\n\"\n+                + \"        \\\"isInitiative\\\": true,\\n\"\n+                + \"        \\\"assignmentId\\\": \\\"/subscriptions/<subscription-id>/resourceGroups/<resouce-group>/providers/Microsoft.Authorization/policyAssignments/TripleCrownPolicy\\\",\\n\"\n+                + \"        \\\"assignmentName\\\": \\\"Sandbox Policy\\\",\\n\"\n+                + \"        \\\"auxDefinitionNames\\\": [\\n\"\n+                + \"          \\\"Allowed resource types\\\"\\n\"\n+                + \"        ],\\n\"\n+                + \"        \\\"viewDetailsUri\\\": \\\"https://portal.azure.com#blade/Microsoft_Azure_Policy/EditAssignmentBlade/id/%2Fsubscriptions%2F<subscription-id>%2FresourceGroups%2F<resouce-group>%2Fproviders%2FMicrosoft.Authorization%2FpolicyAssignments%2FTripleCrownPolicy\\\"\\n\"\n+                + \"      },\\n\"\n+                + \"      {\\n\"\n+                + \"        \\\"isInitiative\\\": true,\\n\"\n+                + \"        \\\"assignmentId\\\": \\\"/providers/Microsoft.Management/managementGroups/triplecrown2/providers/Microsoft.Authorization/policyAssignments/4a0a4629d22043e6a70a69f9\\\",\\n\"\n+                + \"        \\\"assignmentName\\\": \\\"webapp\\\",\\n\"\n+                + \"        \\\"auxDefinitionNames\\\": [\\n\"\n+                + \"          \\\"Allowed resource types\\\"\\n\"\n+                + \"        ],\\n\"\n+                + \"        \\\"viewDetailsUri\\\": \\\"https://portal.azure.com#blade/Microsoft_Azure_Policy/EditAssignmentBlade/id/%2Fproviders%2FMicrosoft.Management%2FmanagementGroups%2Ftriplecrown2%2Fproviders%2FMicrosoft.Authorization%2FpolicyAssignments%2F4a0a4629d22043e6a70a69f9\\\"\\n\"\n+                + \"      }\\n\"\n+                + \"    ]\\n\"\n+                + \"  }\\n\"\n+                + \"}\";\n+\n+        CloudError cloudError = serializerAdapter.deserialize(bodyString, CloudError.class);\n+\n+        Assert.assertEquals(\"RequestDisallowedByPolicy\", cloudError.code());\n+        Assert.assertEquals(\"Resource 'apim-NorthWindShoes346878645' was disallowed by policy. (Code: RequestDisallowedByPolicy)\", cloudError.message());\n+        Assert.assertEquals(\"apim-NorthWindShoes346878645\", cloudError.target());\n+        Assert.assertEquals(0, cloudError.details().size());\n+        Assert.assertEquals(2, cloudError.additionalInfo().size());\n+        Assert.assertTrue(cloudError.additionalInfo().get(0) instanceof PolicyViolation);\n+\n+        PolicyViolation policyViolation = (PolicyViolation)cloudError.additionalInfo().get(0);\n+        PolicyViolationErrorInfo policyViolationErrorInfo = policyViolation.policyErrorInfo();\n+\n+        Assert.assertEquals(\"Allowed resource types\", policyViolationErrorInfo.getPolicyDefinitionDisplayName());\n+        Assert.assertEquals(\"webapp\", policyViolationErrorInfo.getPolicySetDefinitionDisplayName());\n+        Assert.assertEquals(\"/providers/Microsoft.Authorization/policyDefinitions/a08ec900-254a-4555-9bf5-e42af04b5c5c\",\n+                policyViolationErrorInfo.getPolicyDefinitionId());\n+        Assert.assertEquals(\"/providers/Microsoft.Management/managementGroups/triplecrown2/providers/Microsoft.Authorization/policySetDefinitions/\"\n+                        + \"f06460e7-86f9-42ad-8955-fb55bad92028\", policyViolationErrorInfo.getPolicySetDefinitionId());\n+        Assert.assertEquals(\"8272972042953317437\", policyViolationErrorInfo.getPolicyDefinitionReferenceId());\n+        Assert.assertEquals(\"f06460e7-86f9-42ad-8955-fb55bad92028\", policyViolationErrorInfo.getPolicySetDefinitionName());\n+        Assert.assertEquals(\"a08ec900-254a-4555-9bf5-e42af04b5c5c\", policyViolationErrorInfo.getPolicyDefinitionName());\n+        Assert.assertEquals(\"deny\", policyViolationErrorInfo.getPolicyDefinitionEffect());\n+        Assert.assertEquals(\"/subscriptions/<subscription-id>/resourceGroups/<resouce-group>/providers/Microsoft.Authorization/policyAssignments/\"\n+                + \"TripleCrownPolicy\", policyViolationErrorInfo.getPolicyAssignmentId());\n+        Assert.assertEquals(\"TripleCrownPolicy\", policyViolationErrorInfo.getPolicyAssignmentName());\n+        Assert.assertEquals(\"Sandbox Policy\", policyViolationErrorInfo.getPolicyAssignmentDisplayName());\n+        Assert.assertEquals(\"/subscriptions/<subscription-id>/resourceGroups/<resouce-group>\", policyViolationErrorInfo.getPolicyAssignmentScope());\n+\n+        List<ExpressionEvaluationDetails> evaluatedExpressions = policyViolationErrorInfo.getEvaluationDetails().getEvaluatedExpressions();\n+\n+        Assert.assertEquals(1, evaluatedExpressions.size());\n+\n+        ExpressionEvaluationDetails expressionEvaluationDetails = evaluatedExpressions.get(0);\n+\n+        Assert.assertEquals(\"False\", expressionEvaluationDetails.getResult());\n+        Assert.assertEquals(\"type\", expressionEvaluationDetails.getExpression());\n+        Assert.assertEquals(\"type\", expressionEvaluationDetails.getPath());\n+        Assert.assertEquals(\"Microsoft.ApiManagement/service\", expressionEvaluationDetails.getExpressionValue());\n+        Assert.assertEquals(\"In\", expressionEvaluationDetails.getOperator());\n+        Assert.assertEquals(35, expressionEvaluationDetails.getTargetValue().size());\n+        Assert.assertTrue(expressionEvaluationDetails.getTargetValue().contains(\"Microsoft.Web/certificates\"));\n+    }\n }\n\\ No newline at end of file"
  }
]
