[
  {
    "sha": "6833f00eae933169134c841c0f64e000345eb895",
    "filename": "eclipse/META-INF/MANIFEST.MF",
    "status": "modified",
    "additions": 21,
    "deletions": 3,
    "changes": 24,
    "blob_url": "https://github.com/saros-project/saros/blob/05a271ca28215e1ff4210cf15f3b7ff45006c3c2/eclipse/META-INF/MANIFEST.MF",
    "raw_url": "https://github.com/saros-project/saros/raw/05a271ca28215e1ff4210cf15f3b7ff45006c3c2/eclipse/META-INF/MANIFEST.MF",
    "contents_url": "https://api.github.com/repos/saros-project/saros/contents/eclipse/META-INF/MANIFEST.MF?ref=05a271ca28215e1ff4210cf15f3b7ff45006c3c2",
    "patch": "@@ -20,7 +20,18 @@ Require-Bundle: org.eclipse.ui,\n  org.eclipse.equinox.security,\n  org.junit;resolution:=optional,\n  org.eclipse.jdt.launching;resolution:=optional,\n- saros.core\n+ org.eclipse.e4.ui.model.workbench,\n+ org.eclipse.e4.ui.di,\n+ org.eclipse.osgi,\n+ org.eclipse.e4.ui.services,\n+ org.eclipse.e4.core.di.annotations,\n+ saros.core,\n+ org.eclipse.osgi.services,\n+ org.eclipse.e4.ui.workbench,\n+ org.eclipse.equinox.ds,\n+ org.eclipse.equinox.event,\n+ org.eclipse.equinox.util,\n+ org.eclipse.e4.ui.workbench.addons.swt\n Bundle-ActivationPolicy: lazy\n Export-Package: saros;\n   uses:=\"org.eclipse.core.runtime,\n@@ -93,13 +104,14 @@ Export-Package: saros;\n    org.eclipse.jface.viewers,\n    saros.invitation,\n    saros.net\",\n- saros.ui.command_handlers,\n  saros.ui.decorators;\n   uses:=\"org.eclipse.core.runtime,\n    saros.resource_change_handlers,\n    org.eclipse.jface.viewers,\n    saros.editor,\n    saros.invitation\",\n+ saros.ui.e4.command_handlers,\n+ saros.ui.handlers.menu,\n  saros.ui.model,\n  saros.ui.preference_pages,\n  saros.ui.util,\n@@ -129,4 +141,10 @@ Export-Package: saros;\n  saros.util;uses:=\"org.eclipse.core.resources,org.jivesoftware.smack.packet\"\n Bundle-Vendor: Saros Project\n Bundle-RequiredExecutionEnvironment: JavaSE-1.8\n-Import-Package: org.eclipse.core.filesystem\n\\ No newline at end of file\n+Import-Package: javax.annotation;version=\"1.2.0\",\n+ javax.inject,\n+ org.eclipse.core.filesystem,\n+ org.eclipse.e4.core.commands,\n+ org.eclipse.e4.core.services.events,\n+ org.eclipse.e4.ui.workbench.modeling,\n+ org.osgi.service.event;version=\"1.4.0\""
  },
  {
    "sha": "407eeedb8297fc367f01a9b374aa62295a2e8024",
    "filename": "eclipse/build.gradle.kts",
    "status": "modified",
    "additions": 3,
    "deletions": 0,
    "changes": 3,
    "blob_url": "https://github.com/saros-project/saros/blob/05a271ca28215e1ff4210cf15f3b7ff45006c3c2/eclipse/build.gradle.kts",
    "raw_url": "https://github.com/saros-project/saros/raw/05a271ca28215e1ff4210cf15f3b7ff45006c3c2/eclipse/build.gradle.kts",
    "contents_url": "https://api.github.com/repos/saros-project/saros/contents/eclipse/build.gradle.kts?ref=05a271ca28215e1ff4210cf15f3b7ff45006c3c2",
    "patch": "@@ -45,6 +45,9 @@ dependencies {\n     // This is a workaround for https://github.com/saros-project/saros/issues/1114\n     implementation(\"org.eclipse.platform:org.eclipse.ui.ide:3.17.200\")\n     implementation(\"org.eclipse.platform:org.eclipse.ui.workbench:3.120.0\")\n+\t// This is a workaround for an Issues, same as https://github.com/saros-project/saros/issues/1114\n+\timplementation(\"org.eclipse.platform:org.eclipse.e4.ui.services:1.3.700\")\n+\timplementation(\"javax.inject:javax.inject:1\")\n     testImplementation(project(path = \":saros.core\", configuration = \"testing\"))\n }\n "
  },
  {
    "sha": "00ca3152240f021b886c39cd1ecef4a786331aa5",
    "filename": "eclipse/build.properties",
    "status": "modified",
    "additions": 4,
    "deletions": 5,
    "changes": 9,
    "blob_url": "https://github.com/saros-project/saros/blob/05a271ca28215e1ff4210cf15f3b7ff45006c3c2/eclipse/build.properties",
    "raw_url": "https://github.com/saros-project/saros/raw/05a271ca28215e1ff4210cf15f3b7ff45006c3c2/eclipse/build.properties",
    "contents_url": "https://api.github.com/repos/saros-project/saros/contents/eclipse/build.properties?ref=05a271ca28215e1ff4210cf15f3b7ff45006c3c2",
    "patch": "@@ -1,8 +1,4 @@\n-source.. = src/,\\\n-           ext-src/\n-\n output.. = bin/\n-\n bin.includes = META-INF/,\\\n                .,\\\n                plugin.xml,\\\n@@ -16,4 +12,7 @@ bin.includes = META-INF/,\\\n                CHANGELOG,\\\n                plugin.properties,\\\n                saros.properties,\\\n-               lib/\n+               lib/,\\\n+               fragment.e4xmi\n+source.. = src/,\\\n+           ext-src/"
  },
  {
    "sha": "f773df8ba2dc7dc517151db3c2a6d81fa2986ac1",
    "filename": "eclipse/fragment.e4xmi",
    "status": "added",
    "additions": 132,
    "deletions": 0,
    "changes": 132,
    "blob_url": "https://github.com/saros-project/saros/blob/05a271ca28215e1ff4210cf15f3b7ff45006c3c2/eclipse/fragment.e4xmi",
    "raw_url": "https://github.com/saros-project/saros/raw/05a271ca28215e1ff4210cf15f3b7ff45006c3c2/eclipse/fragment.e4xmi",
    "contents_url": "https://api.github.com/repos/saros-project/saros/contents/eclipse/fragment.e4xmi?ref=05a271ca28215e1ff4210cf15f3b7ff45006c3c2",
    "patch": "@@ -0,0 +1,132 @@\n+<?xml version=\"1.0\" encoding=\"ASCII\"?>\n+<fragment:ModelFragments xmi:version=\"2.0\" xmlns:xmi=\"http://www.omg.org/XMI\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:application=\"http://www.eclipse.org/ui/2010/UIModel/application\" xmlns:basic=\"http://www.eclipse.org/ui/2010/UIModel/application/descriptor/basic\" xmlns:commands=\"http://www.eclipse.org/ui/2010/UIModel/application/commands\" xmlns:fragment=\"http://www.eclipse.org/ui/2010/UIModel/fragment\" xmlns:menu=\"http://www.eclipse.org/ui/2010/UIModel/application/ui/menu\" xmlns:ui=\"http://www.eclipse.org/ui/2010/UIModel/application/ui\" xmi:id=\"_9R0kQDYLEeuIF8EFjFT7JQ\">\n+  <fragments xsi:type=\"fragment:StringModelFragment\" xmi:id=\"_AA2WUDYMEeuIF8EFjFT7JQ\" featurename=\"commands\" parentElementId=\"xpath:/\">\n+    <elements xsi:type=\"commands:Command\" xmi:id=\"_FiO7QDYMEeuIF8EFjFT7JQ\" elementId=\"saros.ui.commands.Empty\" commandName=\"EMPTY COMMAND\"/>\n+    <elements xsi:type=\"commands:Command\" xmi:id=\"_Ye-coDYNEeuIF8EFjFT7JQ\" elementId=\"saros.ui.commands.GettingStarted\" commandName=\"Getting Started...\"/>\n+    <elements xsi:type=\"commands:Command\" xmi:id=\"_hvu2UDYNEeuIF8EFjFT7JQ\" elementId=\"saros.ui.commands.StartSarosConfiguration\" commandName=\"Start Saros Configuration...\"/>\n+    <elements xsi:type=\"commands:Command\" xmi:id=\"_VbGKADYPEeuIF8EFjFT7JQ\" elementId=\"saros.ui.commands.CreateXMPPAccount\" commandName=\"Create Account...\"/>\n+    <elements xsi:type=\"commands:Command\" xmi:id=\"_Y_2DIDYPEeuIF8EFjFT7JQ\" elementId=\"saros.ui.commands.AddContact\" commandName=\"Add Contact...\"/>\n+    <elements xsi:type=\"commands:Command\" xmi:id=\"_h9fTkDYPEeuIF8EFjFT7JQ\" elementId=\"saros.ui.commands.OpenSarosPreferences\" commandName=\"Preferences...\"/>\n+    <elements xsi:type=\"commands:Command\" xmi:id=\"_ji39ADYPEeuIF8EFjFT7JQ\" elementId=\"saros.ui.commands.AddXMPPAccount\" commandName=\"Add Account...\"/>\n+    <elements xsi:type=\"commands:Command\" xmi:id=\"_pZa5oDYPEeuIF8EFjFT7JQ\" elementId=\"saros.ui.commands.ShareResource\" commandName=\"Share Resource(s)...\"/>\n+    <elements xsi:type=\"commands:Command\" xmi:id=\"_rsWlkDYPEeuIF8EFjFT7JQ\" elementId=\"saros.ui.commands.SessionLeave\" commandName=\"Leave Session...\"/>\n+    <elements xsi:type=\"commands:Command\" xmi:id=\"_wvkAwDYPEeuIF8EFjFT7JQ\" elementId=\"saros.ui.commands.SessionAddResources\" commandName=\"Add Resource(s)...\"/>\n+    <elements xsi:type=\"commands:Command\" xmi:id=\"_0XH9UDYPEeuIF8EFjFT7JQ\" elementId=\"saros.ui.commands.SessionAddContacts\" commandName=\"Add Contacts...\"/>\n+    <elements xsi:type=\"commands:Command\" xmi:id=\"_6kVtgDYPEeuIF8EFjFT7JQ\" elementId=\"saros.ui.commands.SessionAddSelectedResources\" commandName=\"Add to Saros Session\"/>\n+    <elements xsi:type=\"commands:Command\" xmi:id=\"_8TldkDYPEeuIF8EFjFT7JQ\" elementId=\"saros.ui.commands.SessionAddSelectedContacts\" commandName=\"Add to Saros Session\"/>\n+  </fragments>\n+  <fragments xsi:type=\"fragment:StringModelFragment\" xmi:id=\"_B_wWMDYQEeuIF8EFjFT7JQ\" featurename=\"handlers\" parentElementId=\"xpath:/\">\n+    <elements xsi:type=\"commands:Handler\" xmi:id=\"_Fft18DYQEeuIF8EFjFT7JQ\" elementId=\"saros.eclipse.handler.0\" contributionURI=\"bundleclass://saros.eclipse/saros.ui.handlers.menu.GettingStartedHandler\" command=\"_Ye-coDYNEeuIF8EFjFT7JQ\"/>\n+    <elements xsi:type=\"commands:Handler\" xmi:id=\"_ymPZEDYQEeuIF8EFjFT7JQ\" elementId=\"saros.eclipse.handler.1\" contributionURI=\"bundleclass://saros.eclipse/saros.ui.handlers.menu.StartSarosConfigurationHandler\" command=\"_hvu2UDYNEeuIF8EFjFT7JQ\"/>\n+    <elements xsi:type=\"commands:Handler\" xmi:id=\"_AIKtADYREeuIF8EFjFT7JQ\" elementId=\"saros.eclipse.handler.2\" contributionURI=\"bundleclass://saros.eclipse/saros.ui.handlers.menu.CreateXMPPAccountHandler\" command=\"_VbGKADYPEeuIF8EFjFT7JQ\"/>\n+    <elements xsi:type=\"commands:Handler\" xmi:id=\"_J9snsDYREeuIF8EFjFT7JQ\" elementId=\"saros.eclipse.handler.3\" contributionURI=\"bundleclass://saros.eclipse/saros.ui.handlers.menu.AddXMPPAccountHandler\" command=\"_ji39ADYPEeuIF8EFjFT7JQ\"/>\n+    <elements xsi:type=\"commands:Handler\" xmi:id=\"_YHVb4DYREeuIF8EFjFT7JQ\" elementId=\"saros.eclipse.handler.4\" contributionURI=\"bundleclass://saros.eclipse/saros.ui.handlers.menu.AddContactHandler\" command=\"_Y_2DIDYPEeuIF8EFjFT7JQ\"/>\n+    <elements xsi:type=\"commands:Handler\" xmi:id=\"_k056sDYREeuIF8EFjFT7JQ\" elementId=\"saros.eclipse.handler.5\" contributionURI=\"bundleclass://saros.eclipse/saros.ui.handlers.menu.OpenSarosPreferencesHandler\" command=\"_h9fTkDYPEeuIF8EFjFT7JQ\"/>\n+    <elements xsi:type=\"commands:Handler\" xmi:id=\"_qIwZ8DYREeuIF8EFjFT7JQ\" elementId=\"saros.eclipse.handler.6\" contributionURI=\"bundleclass://saros.eclipse/saros.ui.handlers.menu.ShareResourcesHandler\" command=\"_pZa5oDYPEeuIF8EFjFT7JQ\"/>\n+    <elements xsi:type=\"commands:Handler\" xmi:id=\"_6dvEUDYREeuIF8EFjFT7JQ\" elementId=\"saros.eclipse.handler.7\" contributionURI=\"bundleclass://saros.eclipse/saros.ui.handlers.menu.SessionLeaveHandler\" command=\"_rsWlkDYPEeuIF8EFjFT7JQ\"/>\n+    <elements xsi:type=\"commands:Handler\" xmi:id=\"_FYilADYSEeuIF8EFjFT7JQ\" elementId=\"saros.eclipse.handler.8\" contributionURI=\"bundleclass://saros.eclipse/saros.ui.handlers.menu.SessionAddResourcesHandler\" command=\"_wvkAwDYPEeuIF8EFjFT7JQ\"/>\n+    <elements xsi:type=\"commands:Handler\" xmi:id=\"_NFBIgDYSEeuIF8EFjFT7JQ\" elementId=\"saros.eclipse.handler.9\" contributionURI=\"bundleclass://saros.eclipse/saros.ui.handlers.menu.SessionAddContactsHandler\" command=\"_0XH9UDYPEeuIF8EFjFT7JQ\"/>\n+    <elements xsi:type=\"commands:Handler\" xmi:id=\"_TUQR8DYSEeuIF8EFjFT7JQ\" elementId=\"saros.eclipse.handler.10\" contributionURI=\"bundleclass://saros.eclipse/saros.ui.handlers.menu.SessionAddSelectedResourcesHandler\" command=\"_6kVtgDYPEeuIF8EFjFT7JQ\"/>\n+    <elements xsi:type=\"commands:Handler\" xmi:id=\"_gPUaMDYSEeuIF8EFjFT7JQ\" elementId=\"saros.eclipse.handler.11\" contributionURI=\"bundleclass://saros.eclipse/saros.ui.handlers.menu.SessionAddSelectedContactsHandler\" command=\"_8TldkDYPEeuIF8EFjFT7JQ\"/>\n+  </fragments>\n+  <fragments xsi:type=\"fragment:StringModelFragment\" xmi:id=\"_w8wA0DYSEeuIF8EFjFT7JQ\" featurename=\"menuContributions\" parentElementId=\"xpath:/\">\n+    <elements xsi:type=\"menu:MenuContribution\" xmi:id=\"_D-FjwDYTEeuIF8EFjFT7JQ\" elementId=\"saros.eclipse.menucontribution.0\" positionInParent=\"after=additions\" parentId=\"org.eclipse.ui.main.menu\">\n+      <children xsi:type=\"menu:Menu\" xmi:id=\"_Q9ag8DYTEeuIF8EFjFT7JQ\" elementId=\"saros.ui.main.menu.e4\" label=\"Saros\">\n+        <children xsi:type=\"menu:MenuSeparator\" xmi:id=\"_bEDZwDYTEeuIF8EFjFT7JQ\" elementId=\"saros.eclipse.menuseparator.DeveloperStart\" accessibilityPhrase=\"DeveloperStart\"/>\n+        <children xsi:type=\"menu:MenuSeparator\" xmi:id=\"_g7egIDYTEeuIF8EFjFT7JQ\" elementId=\"saros.eclipse.menuseparator.DeveloperEnd\" accessibilityPhrase=\"DeveloperEnd\"/>\n+        <children xsi:type=\"menu:HandledMenuItem\" xmi:id=\"_nW5rcDYTEeuIF8EFjFT7JQ\" elementId=\"saros.eclipse.handledmenuitem.0\" iconURI=\"platform:/plugin/saros.eclipse/icons/view16/saros_misc.png\" command=\"_Ye-coDYNEeuIF8EFjFT7JQ\"/>\n+        <children xsi:type=\"menu:HandledMenuItem\" xmi:id=\"_wzI8YDYTEeuIF8EFjFT7JQ\" elementId=\"saros.eclipse.handledmenuitem.1\" iconURI=\"platform:/plugin/saros.eclipse/icons/view16/saros_misc.png\" command=\"_hvu2UDYNEeuIF8EFjFT7JQ\"/>\n+        <children xsi:type=\"menu:MenuSeparator\" xmi:id=\"_6GglMDYTEeuIF8EFjFT7JQ\" elementId=\"saros.eclipse.menuseparator.RosterStart\" accessibilityPhrase=\"RosterStart\"/>\n+        <children xsi:type=\"menu:HandledMenuItem\" xmi:id=\"__T3a4DYTEeuIF8EFjFT7JQ\" elementId=\"saros.eclipse.handledmenuitem.2\" iconURI=\"platform:/plugin/saros.eclipse/icons/dlcl16/xmpp_create_account_tsk.png\" command=\"_VbGKADYPEeuIF8EFjFT7JQ\">\n+          <visibleWhen xsi:type=\"ui:CoreExpression\" xmi:id=\"_R2iE0DYUEeuIF8EFjFT7JQ\" coreExpressionId=\"saros.ui.definitions.isCreateXMPPAccountEnabled\"/>\n+        </children>\n+        <children xsi:type=\"menu:HandledMenuItem\" xmi:id=\"_0jwR0DYUEeuIF8EFjFT7JQ\" elementId=\"saros.eclipse.handledmenuitem.3\" iconURI=\"platform:/plugin/saros.eclipse/icons/elcl16/xmpp_create_account_tsk.png\" command=\"_ji39ADYPEeuIF8EFjFT7JQ\"/>\n+        <children xsi:type=\"menu:HandledMenuItem\" xmi:id=\"_DNLZUDYVEeuIF8EFjFT7JQ\" elementId=\"saros.eclipse.handledmenuitem.4\" iconURI=\"platform:/plugin/saros.eclipse/icons/elcl16/session_add_contacts_tsk.png\" command=\"_Y_2DIDYPEeuIF8EFjFT7JQ\"/>\n+        <children xsi:type=\"menu:MenuSeparator\" xmi:id=\"_RkmK0DYVEeuIF8EFjFT7JQ\" elementId=\"saros.eclipse.menuseparator.RosterEnd\" accessibilityPhrase=\"RosterEnd\"/>\n+        <children xsi:type=\"menu:MenuSeparator\" xmi:id=\"_2St4kDYVEeuIF8EFjFT7JQ\" elementId=\"saros.eclipse.menuseparator.CollaborationStart\" accessibilityPhrase=\"CollaborationStart\"/>\n+        <children xsi:type=\"menu:HandledMenuItem\" xmi:id=\"_6984oDYVEeuIF8EFjFT7JQ\" elementId=\"saros.eclipse.handledmenuitem.5\" iconURI=\"platform:/plugin/saros.eclipse/icons/elcl16/session_tsk.png\" command=\"_pZa5oDYPEeuIF8EFjFT7JQ\">\n+          <visibleWhen xsi:type=\"ui:CoreExpression\" xmi:id=\"_N9R-gDYYEeuIF8EFjFT7JQ\" coreExpressionId=\"saros.ui.definitions.notIsSarosSessionRunning\"/>\n+        </children>\n+        <children xsi:type=\"menu:HandledMenuItem\" xmi:id=\"_GqGWsDYWEeuIF8EFjFT7JQ\" elementId=\"saros.eclipse.handledmenuitem.6\" iconURI=\"platform:/plugin/saros.eclipse/icons/elcl16/session_add_reference_points_tsk.png\" command=\"_wvkAwDYPEeuIF8EFjFT7JQ\">\n+          <visibleWhen xsi:type=\"ui:CoreExpression\" xmi:id=\"_AHvngDYXEeuIF8EFjFT7JQ\" coreExpressionId=\"saros.ui.definitions.isConnectedAndSarosSessionRunning\"/>\n+        </children>\n+        <children xsi:type=\"menu:HandledMenuItem\" xmi:id=\"_VjNOEDYYEeuIF8EFjFT7JQ\" elementId=\"saros.eclipse.handledmenuitem.7\" iconURI=\"platform:/plugin/saros.eclipse/icons/elcl16/session_add_contacts_tsk.png\" command=\"_0XH9UDYPEeuIF8EFjFT7JQ\">\n+          <visibleWhen xsi:type=\"ui:CoreExpression\" xmi:id=\"_GKb30DYZEeuIF8EFjFT7JQ\" coreExpressionId=\"saros.ui.definitions.isConnectedAndSarosSessionRunningAndSarosSessionHost\"/>\n+        </children>\n+        <children xsi:type=\"menu:HandledMenuItem\" xmi:id=\"_NrpKADYaEeuIF8EFjFT7JQ\" elementId=\"saros.eclipse.handledmenuitem.leavesession\" label=\"Leave Session...\" iconURI=\"platform:/plugin/saros.eclipse/icons/elcl16/session_leave_tsk.png\" command=\"_rsWlkDYPEeuIF8EFjFT7JQ\">\n+          <visibleWhen xsi:type=\"ui:CoreExpression\" xmi:id=\"_PlJCQDYaEeuIF8EFjFT7JQ\" coreExpressionId=\"saros.ui.definitions.isConnectedAndSarosSessionRunningAndNotSarosSessionHost\"/>\n+        </children>\n+        <children xsi:type=\"menu:HandledMenuItem\" xmi:id=\"_dQsMQDYaEeuIF8EFjFT7JQ\" elementId=\"saros.eclipse.handledmenuitem.stopsession\" label=\"Stop Session...\" iconURI=\"platform:/plugin/saros.eclipse/icons/elcl16/session_terminate_tsk.png\" command=\"_rsWlkDYPEeuIF8EFjFT7JQ\">\n+          <visibleWhen xsi:type=\"ui:CoreExpression\" xmi:id=\"_i3eOkDYaEeuIF8EFjFT7JQ\" coreExpressionId=\"saros.ui.definitions.isConnectedAndSarosSessionRunningAndSarosSessionHost\"/>\n+        </children>\n+        <children xsi:type=\"menu:MenuSeparator\" xmi:id=\"_VZsCgD1nEeuEmIEsBAz29g\" elementId=\"saros.eclipse.menuseparator.CollaborationEnd\" accessibilityPhrase=\"CollaborationEnd\"/>\n+        <children xsi:type=\"menu:MenuSeparator\" xmi:id=\"_Vi-hYD1nEeuEmIEsBAz29g\" elementId=\"saros.eclipse.menuseparator.OtherStart\" accessibilityPhrase=\"OtherStart\"/>\n+        <children xsi:type=\"menu:MenuSeparator\" xmi:id=\"_Voc3QD1nEeuEmIEsBAz29g\" elementId=\"saros.eclipse.menuseparator.OtherEnd\" accessibilityPhrase=\"OtherEnd\"/>\n+        <children xsi:type=\"menu:MenuSeparator\" xmi:id=\"_Vs2PED1nEeuEmIEsBAz29g\" elementId=\"saros.eclipse.menuseparator.additions\" visible=\"false\" accessibilityPhrase=\"additions\"/>\n+        <children xsi:type=\"menu:HandledMenuItem\" xmi:id=\"_migkoD1nEeuEmIEsBAz29g\" elementId=\"saros.eclipse.handledmenuitem.8\" iconURI=\"platform:/plugin/saros.eclipse/icons/elcl16/preferences_open_tsk.png\" command=\"_h9fTkDYPEeuIF8EFjFT7JQ\"/>\n+      </children>\n+    </elements>\n+    <elements xsi:type=\"menu:MenuContribution\" xmi:id=\"_ByuqgH4UEeuUg7lI4gSrKw\" elementId=\"saros.eclipse.menucontribution.3\" positionInParent=\"after=additions\" parentId=\"popup\">\n+      <children xsi:type=\"menu:MenuSeparator\" xmi:id=\"_FZumYH4UEeuUg7lI4gSrKw\" elementId=\"CollaborationStart\" accessibilityPhrase=\"CollaborationStart\"/>\n+      <children xsi:type=\"menu:MenuSeparator\" xmi:id=\"_Fjm7IH4UEeuUg7lI4gSrKw\" elementId=\"CollaborationEnd\" visible=\"false\" accessibilityPhrase=\"CollaborationEnd\"/>\n+    </elements>\n+    <elements xsi:type=\"menu:MenuContribution\" xmi:id=\"_d03YYG-WEeuyL4e0Us5MYQ\" elementId=\"saros.eclipse.menucontribution.1\" positionInParent=\"after=additions\" parentId=\"popup\">\n+      <children xsi:type=\"menu:HandledMenuItem\" xmi:id=\"_XrOIcG4IEeuU94HWMR4Cpw\" elementId=\"saros.eclipse.handledmenuitem.shareresources\" label=\"Share Resource(s)...\" iconURI=\"platform:/plugin/saros.eclipse/icons/elcl16/session_tsk.png\" tooltip=\"Share the Selected Resources With Your Contacts\" command=\"_pZa5oDYPEeuIF8EFjFT7JQ\">\n+        <visibleWhen xsi:type=\"ui:CoreExpression\" xmi:id=\"_efLvkG4IEeuU94HWMR4Cpw\" coreExpressionId=\"saros.ui.definitions.notIsSarosSessionRunningResourcesSelected\"/>\n+      </children>\n+      <children xsi:type=\"menu:HandledMenuItem\" xmi:id=\"_4oNG4G4IEeuU94HWMR4Cpw\" elementId=\"saros.eclipse.handledmenuitem.14\" iconURI=\"platform:/plugin/saros.eclipse/icons/elcl16/session_add_reference_points_tsk.png\" command=\"_6kVtgDYPEeuIF8EFjFT7JQ\">\n+        <visibleWhen xsi:type=\"ui:CoreExpression\" xmi:id=\"_FSExcG4JEeuU94HWMR4Cpw\" coreExpressionId=\"saros.ui.definitions.isConnectedIsSarosSessionRunningResourcesSelected\"/>\n+      </children>\n+    </elements>\n+    <elements xsi:type=\"menu:MenuContribution\" xmi:id=\"_ZrPbIG-XEeuyL4e0Us5MYQ\" elementId=\"saros.eclipse.menucontribution.2\" positionInParent=\"before=menustart\" parentId=\"popup\">\n+      <children xsi:type=\"menu:HandledMenuItem\" xmi:id=\"_QgOE4G4JEeuU94HWMR4Cpw\" elementId=\"saros.eclipse.handledmenuitem.15\" iconURI=\"platform:/plugin/saros.eclipse/icons/elcl16/session_add_contacts_tsk.png\" command=\"_8TldkDYPEeuIF8EFjFT7JQ\">\n+        <visibleWhen xsi:type=\"ui:CoreExpression\" xmi:id=\"_Q0VTsG4JEeuU94HWMR4Cpw\" coreExpressionId=\"saros.ui.definitions.isConnectedIsSarosSessionRunningIsSarosSessionHostContactsSelectedContactsOnline\"/>\n+      </children>\n+    </elements>\n+  </fragments>\n+  <fragments xsi:type=\"fragment:StringModelFragment\" xmi:id=\"_Gf3wkFNKEeu08YCit0yDew\" featurename=\"addons\" parentElementId=\"xpath:/\">\n+    <elements xsi:type=\"application:Addon\" xmi:id=\"_wM054FlrEeuEKZi6t0yNyA\" elementId=\"saros.eclipse.addon.StartupSaros\" contributionURI=\"bundleclass://saros.eclipse/saros.StartupSaros\"/>\n+    <elements xsi:type=\"application:Addon\" xmi:id=\"_HnzB8FNKEeu08YCit0yDew\" elementId=\"saros.eclipse.addon.lifecycle\" contributionURI=\"bundleclass://saros.eclipse/saros.Saros\"/>\n+  </fragments>\n+  <fragments xsi:type=\"fragment:StringModelFragment\" xmi:id=\"_xkz-4H5qEeuGAvmTv33xSw\" featurename=\"descriptors\" parentElementId=\"xpath:/\">\n+    <elements xsi:type=\"basic:PartDescriptor\" xmi:id=\"_zr5AIH5qEeuGAvmTv33xSw\" elementId=\"saros.ui.views.SarosView\" label=\"Saros\" iconURI=\"platform:/plugin/saros.eclipse/icons/view16/saros_misc.png\" category=\"Saros\" closeable=\"true\" contributionURI=\"bundleclass://saros.eclipse/saros.ui.views.SarosView\">\n+      <tags>View</tags>\n+      <menus xsi:type=\"menu:PopupMenu\" xmi:id=\"_Cf1KkFpFEeuz3aO_wpndrQ\" elementId=\"saros.ui.popup.menu\" label=\"SarosViewPopUpMenu\">\n+        <children xsi:type=\"menu:HandledMenuItem\" xmi:id=\"_MXCgQFpFEeuz3aO_wpndrQ\" elementId=\"saros.eclipse.handledmenuitem.9\" iconURI=\"platform:/plugin/saros.eclipse/icons/elcl16/session_tsk.png\" command=\"_pZa5oDYPEeuIF8EFjFT7JQ\">\n+          <visibleWhen xsi:type=\"ui:CoreExpression\" xmi:id=\"_BAjykG4BEeuU94HWMR4Cpw\" coreExpressionId=\"saros.ui.definitions.isConnectedNotIsSarosSessionRunningSessionHeadlineSelected\"/>\n+        </children>\n+        <children xsi:type=\"menu:HandledMenuItem\" xmi:id=\"_YWLGwG4EEeuU94HWMR4Cpw\" elementId=\"saros.eclipse.handledmenuitem.10\" iconURI=\"platform:/plugin/saros.eclipse/icons/elcl16/session_add_reference_points_tsk.png\" command=\"_wvkAwDYPEeuIF8EFjFT7JQ\">\n+          <visibleWhen xsi:type=\"ui:CoreExpression\" xmi:id=\"_be81kG4EEeuU94HWMR4Cpw\" coreExpressionId=\"saros.ui.definitions.isConnectedIsSarosSessionRunningSessionHeadlineSelected\"/>\n+        </children>\n+        <children xsi:type=\"menu:HandledMenuItem\" xmi:id=\"_Yrh2QG4FEeuU94HWMR4Cpw\" elementId=\"saros.eclipse.handledmenuitem.11\" iconURI=\"platform:/plugin/saros.eclipse/icons/elcl16/contact_add_tsk.png\" command=\"_Y_2DIDYPEeuIF8EFjFT7JQ\">\n+          <visibleWhen xsi:type=\"ui:CoreExpression\" xmi:id=\"_Z6s_IG4FEeuU94HWMR4Cpw\" coreExpressionId=\"saros.ui.definitions.notContactsSelectedNotParticipantsSelectedNotSessionHeadlineSelected\"/>\n+        </children>\n+        <children xsi:type=\"menu:HandledMenuItem\" xmi:id=\"_M3lcMG4HEeuU94HWMR4Cpw\" elementId=\"saros.eclipse.handledmenuitem.12\" iconURI=\"platform:/plugin/saros.eclipse/icons/elcl16/session_add_contacts_tsk.png\" command=\"_0XH9UDYPEeuIF8EFjFT7JQ\">\n+          <visibleWhen xsi:type=\"ui:CoreExpression\" xmi:id=\"_RXeu8G4HEeuU94HWMR4Cpw\" coreExpressionId=\"saros.ui.definitions.isConnectedIsSarosSessionRunningSessionHeadlineSelectedIsSarosSessionHost\"/>\n+        </children>\n+        <children xsi:type=\"menu:MenuSeparator\" xmi:id=\"_6rY9IG-pEeuyL4e0Us5MYQ\" elementId=\"menustart\" visible=\"false\" accessibilityPhrase=\"\"/>\n+        <children xsi:type=\"menu:DynamicMenuContribution\" xmi:id=\"_ROHFgG-REeuc6LVEtDwz7A\" elementId=\"saros.eclipse.dynamicmenucontribution.0\" contributionURI=\"bundleclass://saros.eclipse/saros.ui.views.PopupMenu\"/>\n+        <children xsi:type=\"menu:MenuSeparator\" xmi:id=\"_tLuWMG-tEeuyL4e0Us5MYQ\" elementId=\"additions\" visible=\"false\"/>\n+      </menus>\n+      <toolbar xmi:id=\"_WgxKUFo6Eeuz3aO_wpndrQ\" elementId=\"saros.eclipse.toolbar.e4.SarosView\">\n+        <children xsi:type=\"menu:DirectToolItem\" xmi:id=\"_bpvrwFyqEeutX8G7YSyCRA\" elementId=\"saros.ui.handlers.toolbar.ChangeXMPPAccountHandler\" iconURI=\"platform:/plugin/saros.eclipse/icons/elcl16/xmpp_connect_tsk.png\" tooltip=\"Connect\" contributionURI=\"bundleclass://saros.eclipse/saros.ui.handlers.toolbar.ChangeXMPPAccountHandler\">\n+          <menu xmi:id=\"_SuTcoGL-EeuqzJnMI0FALg\" elementId=\"saros.eclipse.sarosView.toolbar.connectToolItem.menu\">\n+            <children xsi:type=\"menu:DynamicMenuContribution\" xmi:id=\"_Oy5aMGMCEeuqzJnMI0FALg\" elementId=\"saros.eclipse.sarosView.toolbar.connectToolItem.menu.AddAccountToMenu\" label=\"\" contributionURI=\"bundleclass://saros.eclipse/saros.ui.handlers.toolbar.XMPPAccountMenu\"/>\n+            <children xsi:type=\"menu:MenuSeparator\" xmi:id=\"_AFfKEHB1EeucHoOln_1qcQ\" elementId=\"saros.eclipse.menuseparator.0\"/>\n+            <children xsi:type=\"menu:HandledMenuItem\" xmi:id=\"_hOAncGL-EeuqzJnMI0FALg\" elementId=\"saros.eclipse.sarosView.toolbar.connectToolItem.menu.addXMPPAccount\" label=\"\" command=\"_ji39ADYPEeuIF8EFjFT7JQ\"/>\n+            <children xsi:type=\"menu:HandledMenuItem\" xmi:id=\"_r56wgGL-EeuqzJnMI0FALg\" elementId=\"saros.eclipse.sarosView.toolbar.connectToolItem.menu.OpenSarosPreferences\" label=\"Configure Accounts...\" command=\"_h9fTkDYPEeuIF8EFjFT7JQ\"/>\n+          </menu>\n+        </children>\n+        <children xsi:type=\"menu:DirectToolItem\" xmi:id=\"_SWzAEFpBEeuz3aO_wpndrQ\" elementId=\"saros.ui.handlers.toolbar.NewContactHandler\" label=\"\" iconURI=\"platform:/plugin/saros.eclipse/icons/elcl16/contact_add_tsk.png\" tooltip=\"Add a New Contact\" contributionURI=\"bundleclass://saros.eclipse/saros.ui.handlers.toolbar.NewContactHandler\"/>\n+        <children xsi:type=\"menu:DirectToolItem\" xmi:id=\"_NjsA8FpCEeuz3aO_wpndrQ\" elementId=\"saros.ui.handlers.toolbar.OpenPreferencesHandler\" label=\"\" iconURI=\"platform:/plugin/saros.eclipse/icons/elcl16/preferences_open_tsk.png\" tooltip=\"Open Saros Preferences\" contributionURI=\"bundleclass://saros.eclipse/saros.ui.handlers.toolbar.OpenPreferencesHandler\"/>\n+        <children xsi:type=\"menu:ToolBarSeparator\" xmi:id=\"_klH_YF17EeuWqNejT8lZfw\" elementId=\"saros.eclipse.toolbarseparator.1\"/>\n+        <children xsi:type=\"menu:DirectToolItem\" xmi:id=\"_lagIMF17EeuWqNejT8lZfw\" elementId=\"saros.ui.handlers.toolbar.FollowModeHandler\" iconURI=\"platform:/plugin/saros.eclipse/icons/merged16/user_saros_followmode_enabled.png\" tooltip=\"Enter follow mode\" contributionURI=\"bundleclass://saros.eclipse/saros.ui.handlers.toolbar.FollowModeHandler\">\n+          <menu xmi:id=\"_yfKRUF17EeuWqNejT8lZfw\" elementId=\"saros.eclipse.menu.0\"/>\n+        </children>\n+        <children xsi:type=\"menu:DirectToolItem\" xmi:id=\"_h_YQsF1xEeuWqNejT8lZfw\" elementId=\"saros.ui.handlers.toolbar.ConsistencyHandler\" iconURI=\"platform:/plugin/saros.eclipse/icons/etool16/in_sync.png\" tooltip=\"No inconsistencies\" enabled=\"false\" contributionURI=\"bundleclass://saros.eclipse/saros.ui.handlers.toolbar.ConsistencyHandler\"/>\n+        <children xsi:type=\"menu:ToolBarSeparator\" xmi:id=\"_hFxp4FyaEeutX8G7YSyCRA\" elementId=\"saros.eclipse.toolbarseparator.0\"/>\n+        <children xsi:type=\"menu:DirectToolItem\" xmi:id=\"_5WSc4FyZEeutX8G7YSyCRA\" elementId=\"saros.ui.handlers.toolbar.LeaveSessionHandler\" label=\"\" iconURI=\"platform:/plugin/saros.eclipse/icons/elcl16/session_leave_tsk.png\" tooltip=\"Leave Session\" contributionURI=\"bundleclass://saros.eclipse/saros.ui.handlers.toolbar.LeaveSessionHandler\"/>\n+      </toolbar>\n+    </elements>\n+  </fragments>\n+</fragment:ModelFragments>"
  },
  {
    "sha": "b2bd1f95efd105f02c85859e91afddb0d4212d52",
    "filename": "eclipse/icons/merged16/contact_saros_obj_followmode.png",
    "status": "added",
    "additions": 0,
    "deletions": 0,
    "changes": 0,
    "blob_url": "https://github.com/saros-project/saros/blob/05a271ca28215e1ff4210cf15f3b7ff45006c3c2/eclipse/icons/merged16/contact_saros_obj_followmode.png",
    "raw_url": "https://github.com/saros-project/saros/raw/05a271ca28215e1ff4210cf15f3b7ff45006c3c2/eclipse/icons/merged16/contact_saros_obj_followmode.png",
    "contents_url": "https://api.github.com/repos/saros-project/saros/contents/eclipse/icons/merged16/contact_saros_obj_followmode.png?ref=05a271ca28215e1ff4210cf15f3b7ff45006c3c2"
  },
  {
    "sha": "b44c2b5a981abb871439bd5511317051d2b11ac1",
    "filename": "eclipse/icons/merged16/contact_saros_obj_readonly.png",
    "status": "added",
    "additions": 0,
    "deletions": 0,
    "changes": 0,
    "blob_url": "https://github.com/saros-project/saros/blob/05a271ca28215e1ff4210cf15f3b7ff45006c3c2/eclipse/icons/merged16/contact_saros_obj_readonly.png",
    "raw_url": "https://github.com/saros-project/saros/raw/05a271ca28215e1ff4210cf15f3b7ff45006c3c2/eclipse/icons/merged16/contact_saros_obj_readonly.png",
    "contents_url": "https://api.github.com/repos/saros-project/saros/contents/eclipse/icons/merged16/contact_saros_obj_readonly.png?ref=05a271ca28215e1ff4210cf15f3b7ff45006c3c2"
  },
  {
    "sha": "f40066126f1dc6ab6ea7db7b0fcc30e73bd980ab",
    "filename": "eclipse/icons/merged16/user_saros_followmode_disabled.png",
    "status": "added",
    "additions": 0,
    "deletions": 0,
    "changes": 0,
    "blob_url": "https://github.com/saros-project/saros/blob/05a271ca28215e1ff4210cf15f3b7ff45006c3c2/eclipse/icons/merged16/user_saros_followmode_disabled.png",
    "raw_url": "https://github.com/saros-project/saros/raw/05a271ca28215e1ff4210cf15f3b7ff45006c3c2/eclipse/icons/merged16/user_saros_followmode_disabled.png",
    "contents_url": "https://api.github.com/repos/saros-project/saros/contents/eclipse/icons/merged16/user_saros_followmode_disabled.png?ref=05a271ca28215e1ff4210cf15f3b7ff45006c3c2"
  },
  {
    "sha": "720965ae3733fe2a2b78fb188499c1fc4b2b890e",
    "filename": "eclipse/icons/merged16/user_saros_followmode_enabled.png",
    "status": "added",
    "additions": 0,
    "deletions": 0,
    "changes": 0,
    "blob_url": "https://github.com/saros-project/saros/blob/05a271ca28215e1ff4210cf15f3b7ff45006c3c2/eclipse/icons/merged16/user_saros_followmode_enabled.png",
    "raw_url": "https://github.com/saros-project/saros/raw/05a271ca28215e1ff4210cf15f3b7ff45006c3c2/eclipse/icons/merged16/user_saros_followmode_enabled.png",
    "contents_url": "https://api.github.com/repos/saros-project/saros/contents/eclipse/icons/merged16/user_saros_followmode_enabled.png?ref=05a271ca28215e1ff4210cf15f3b7ff45006c3c2"
  },
  {
    "sha": "24b6d1c78c53dc5a1e78b8b1f90fa5a9d59c2b1d",
    "filename": "eclipse/plugin.xml",
    "status": "modified",
    "additions": 150,
    "deletions": 627,
    "changes": 777,
    "blob_url": "https://github.com/saros-project/saros/blob/05a271ca28215e1ff4210cf15f3b7ff45006c3c2/eclipse/plugin.xml",
    "raw_url": "https://github.com/saros-project/saros/raw/05a271ca28215e1ff4210cf15f3b7ff45006c3c2/eclipse/plugin.xml",
    "contents_url": "https://api.github.com/repos/saros-project/saros/contents/eclipse/plugin.xml?ref=05a271ca28215e1ff4210cf15f3b7ff45006c3c2",
    "patch": "@@ -2,34 +2,12 @@\n <?eclipse version=\"4.6\"?>\n \n <plugin>\n-    <extension\n-         point=\"org.eclipse.ui.views\">\n-      <category\n-            id=\"saros.Saros\"\n-            name=\"Saros\"/>\n-      <category\n-            id=\"saros.Developer\"\n-            name=\"Saros Development\">\n-      </category>\n-     <view\n-           category=\"saros.Saros\"\n-           class=\"saros.ui.views.SarosView\"\n-           icon=\"icons/view16/saros_misc.png\"\n-           id=\"saros.ui.views.SarosView\"\n-           name=\"Saros\">\n-     </view>\n-   </extension>\n-   <extension\n-         point=\"org.eclipse.ui.perspectiveExtensions\">\n-      <perspectiveExtension targetID=\"*\">\n-         <view\n-               id=\"saros.ui.views.SarosView\"\n-               ratio=\"0.5\"\n-               relationship=\"right\"\n-               relative=\"org.eclipse.ui.views.TaskList\">\n-         </view>\n-      </perspectiveExtension>\n-   </extension>\n+\t<extension point=\"org.eclipse.e4.workbench.model\" id=\"saros.ui.fragment\">\n+\t\t<fragment\n+            apply=\"initial\"\n+            uri=\"fragment.e4xmi\">\n+      </fragment>\n+\t</extension>\n    <extension\n          point=\"org.eclipse.ui.decorators\">\n       <decorator\n@@ -468,608 +446,117 @@\n          <instanceof value=\"org.eclipse.core.resources.IResource\"/>\n       </enablement>\n    </extension>\n-   <extension\n-         id=\"saros.startup\"\n-         point=\"org.eclipse.ui.startup\">\n-      <startup\n-            class=\"saros.StartupSaros\">\n-      </startup>\n-   </extension>\n-   <extension\n-         point=\"org.eclipse.ui.commands\">\n-      <command\n-            id=\"saros.ui.commands.Empty\"\n-            name=\"EMPTY COMMAND\">\n-      </command>\n-      <command\n-            categoryId=\"org.eclipse.ui.category.project\"\n-            id=\"saros.ui.commands.GettingStarted\"\n-            name=\"Getting Started...\">\n-      </command>\n-      <command\n-            categoryId=\"org.eclipse.ui.category.project\"\n-            id=\"saros.ui.commands.StartSarosConfiguration\"\n-            name=\"Start Saros Configuration...\">\n-      </command>\n-      <command\n-            categoryId=\"org.eclipse.ui.category.project\"\n-            id=\"saros.ui.commands.CreateXMPPAccount\"\n-            name=\"Create Account...\">\n-      </command>\n-      <command\n-            categoryId=\"org.eclipse.ui.category.project\"\n-            id=\"saros.ui.commands.AddContact\"\n-            name=\"Add Contact...\">\n-      </command>\n-      <command\n-            categoryId=\"org.eclipse.ui.category.project\"\n-            id=\"saros.ui.commands.OpenSarosPreferences\"\n-            name=\"Preferences...\">\n-      </command>\n-            <command\n-            categoryId=\"org.eclipse.ui.category.project\"\n-            id=\"saros.ui.commands.AddXMPPAccount\"\n-            name=\"Add Account...\">\n-      </command>\n-      <command\n-            categoryId=\"org.eclipse.ui.category.project\"\n-            id=\"saros.ui.commands.ShareResource\"\n-            name=\"Share Resource(s)...\">\n-      </command>\n-      <command\n-            categoryId=\"org.eclipse.ui.category.project\"\n-            id=\"saros.ui.commands.SessionLeave\"\n-            name=\"Leave Session...\">\n-      </command>\n-      <command\n-            categoryId=\"org.eclipse.ui.category.project\"\n-            id=\"saros.ui.commands.SessionAddResources\"\n-            name=\"Add Resource(s)...\">\n-      </command>\n-      <command\n-            categoryId=\"org.eclipse.ui.category.project\"\n-            id=\"saros.ui.commands.SessionAddContacts\"\n-            name=\"Add Contacts...\">\n-      </command>\n-      <command\n-            categoryId=\"org.eclipse.ui.category.project\"\n-            id=\"saros.ui.commands.SessionAddSelectedResources\"\n-            name=\"Add to Saros Session\">\n-      </command>\n-      <command\n-            categoryId=\"org.eclipse.ui.category.project\"\n-            id=\"saros.ui.commands.SessionAddSelectedContacts\"\n-            name=\"Add to Saros Session\">\n-      </command>\n-   </extension>\n-   <extension\n-         point=\"org.eclipse.ui.handlers\">\n-      <handler\n-            class=\"saros.ui.command_handlers.GettingStartedHandler\"\n-            commandId=\"saros.ui.commands.GettingStarted\">\n-      </handler>\n-      <handler\n-            class=\"saros.ui.command_handlers.StartSarosConfigurationHandler\"\n-            commandId=\"saros.ui.commands.StartSarosConfiguration\">\n-      </handler>\n-      <handler\n-            class=\"saros.ui.command_handlers.CreateXMPPAccountHandler\"\n-            commandId=\"saros.ui.commands.CreateXMPPAccount\">\n-      </handler>\n-      <handler\n-            class=\"saros.ui.command_handlers.AddXMPPAccountHandler\"\n-            commandId=\"saros.ui.commands.AddXMPPAccount\">\n-      </handler>\n-      <handler\n-            class=\"saros.ui.command_handlers.AddContactHandler\"\n-            commandId=\"saros.ui.commands.AddContact\">\n-         <enabledWhen>\n-             <reference definitionId=\"saros.ui.definitions.isConnected\" />\n-         </enabledWhen>\n-      </handler>\n-      <handler\n-            class=\"saros.ui.command_handlers.OpenSarosPreferencesHandler\"\n-            commandId=\"saros.ui.commands.OpenSarosPreferences\">\n-      </handler>\n-      <handler\n-      class=\"saros.ui.command_handlers.ShareResourcesHandler\"\n-            commandId=\"saros.ui.commands.ShareResource\">\n-         <enabledWhen>\n-            <and>\n-               <reference\n-                     definitionId=\"saros.ui.definitions.isConnected\">\n-               </reference>\n-               <not>\n-                  <reference\n-                        definitionId=\"saros.ui.definitions.isSarosSessionRunning\">\n-                  </reference>\n-               </not>\n-            </and>\n-         </enabledWhen>\n-      </handler>\n-      <handler\n-            class=\"saros.ui.command_handlers.SessionLeaveHandler\"\n-            commandId=\"saros.ui.commands.SessionLeave\">\n-         <activeWhen>\n-            <and>\n-               <reference\n-                     definitionId=\"saros.ui.definitions.isConnected\">\n-               </reference>\n-               <reference\n-                     definitionId=\"saros.ui.definitions.isSarosSessionRunning\">\n-               </reference>\n-            </and>\n-         </activeWhen>\n-      </handler>\n-      <handler\n-            class=\"saros.ui.command_handlers.SessionAddResourcesHandler\"\n-            commandId=\"saros.ui.commands.SessionAddResources\">\n-         <activeWhen>\n-            <and>\n-               <reference\n-                     definitionId=\"saros.ui.definitions.isConnected\">\n-               </reference>\n-               <reference\n-                     definitionId=\"saros.ui.definitions.isSarosSessionRunning\">\n-               </reference>\n-            </and>\n-         </activeWhen>\n-         <enabledWhen>\n-            <reference\n-                  definitionId=\"saros.ui.definitions.hasWriteAccess\">\n-            </reference>\n-         </enabledWhen>\n-      </handler>\n-      <handler\n-            class=\"saros.ui.command_handlers.SessionAddContactsHandler\"\n-            commandId=\"saros.ui.commands.SessionAddContacts\">\n-         <activeWhen>\n-            <and>\n-               <reference\n-                     definitionId=\"saros.ui.definitions.isConnected\">\n-               </reference>\n-               <reference\n-                     definitionId=\"saros.ui.definitions.isSarosSessionRunning\">\n-               </reference>\n-            </and>\n-         </activeWhen>\n-      </handler>\n-      <handler\n-            class=\"saros.ui.command_handlers.SessionAddSelectedResourcesHandler\"\n-            commandId=\"saros.ui.commands.SessionAddSelectedResources\">\n-         <activeWhen>\n-            <and>\n-               <reference\n-                     definitionId=\"saros.ui.definitions.isConnected\">\n-               </reference>\n-               <reference\n-                     definitionId=\"saros.ui.definitions.isSarosSessionRunning\">\n-               </reference>\n-               <reference\n-                     definitionId=\"saros.ui.definitions.resourcesSelected\">\n-               </reference>\n-               <not>\n-                  <reference\n-                        definitionId=\"saros.ui.definitions.resourcesSelectedInSarosSession\">\n-                  </reference>\n-               </not>\n-            </and>\n-         </activeWhen>\n-         <enabledWhen>\n-            <reference\n-                  definitionId=\"saros.ui.definitions.hasWriteAccess\">\n-            </reference>\n-         </enabledWhen>\n-      </handler>\n-      <handler\n-            class=\"saros.ui.command_handlers.SessionAddSelectedContactsHandler\"\n-            commandId=\"saros.ui.commands.SessionAddSelectedContacts\">\n-         <activeWhen>\n-            <and>\n-               <reference\n-                     definitionId=\"saros.ui.definitions.isConnected\">\n-               </reference>\n-               <reference\n-                     definitionId=\"saros.ui.definitions.isSarosSessionRunning\">\n-               </reference>\n-               <reference\n-                     definitionId=\"saros.ui.definitions.contactsSelected\">\n-               </reference>\n-               <not>\n-                  <reference\n-                        definitionId=\"saros.ui.definitions.contactsSelectedInSarosSession\">\n-                  </reference>\n-               </not>\n-            </and>\n-         </activeWhen>\n-      </handler>\n-   </extension>\n-   <extension\n-         point=\"org.eclipse.ui.menus\">\n-      <menuContribution\n-            allPopups=\"false\"\n-            locationURI=\"menu:org.eclipse.ui.main.menu?after=additions\">\n-         <menu\n-               id=\"saros.ui.main.menu\"\n-               label=\"Saros\">\n-            <visibleWhen\n-                  checkEnabled=\"false\">\n-            </visibleWhen>\n-            <separator\n-                  name=\"DeveloperStart\"\n-                  visible=\"true\">\n-            </separator>\n-            <separator\n-                  name=\"DeveloperEnd\"\n-                  visible=\"true\">\n-            </separator>\n-            <command\n-                  commandId=\"saros.ui.commands.GettingStarted\"\n-                  icon=\"icons/view16/saros_misc.png\"\n-                  style=\"push\">\n-            </command>\n-            <command\n-                  commandId=\"saros.ui.commands.StartSarosConfiguration\"\n-                  icon=\"icons/view16/saros_misc.png\"\n-                  style=\"push\">\n-            </command>\n-            <separator\n-                  name=\"RosterStart\"\n-                  visible=\"true\">\n-            </separator>\n-            <command\n-                  commandId=\"saros.ui.commands.CreateXMPPAccount\"\n-                  icon=\"icons/elcl16/xmpp_create_account_tsk.png\"\n-                  style=\"push\">\n-               <visibleWhen\n-                     checkEnabled=\"false\">\n-                  <reference\n-                        definitionId=\"saros.ui.definitions.isCreateXMPPAccountEnabled\">\n-                  </reference>\n-               </visibleWhen>\n-            </command>\n-            <command\n-                  commandId=\"saros.ui.commands.AddXMPPAccount\"\n-                  icon=\"icons/elcl16/xmpp_create_account_tsk.png\"\n-                  style=\"push\">\n-            </command>\n-            <command\n-                  commandId=\"saros.ui.commands.AddContact\"\n-                  disabledIcon=\"icons/dlcl16/contact_add_tsk.png\"\n-                  icon=\"icons/elcl16/contact_add_tsk.png\"\n-                  style=\"push\">\n-            </command>\n-            <separator\n-                  name=\"RosterEnd\"\n-                  visible=\"true\">\n-            </separator>\n-            <separator\n-                  name=\"CollaborationStart\"\n-                  visible=\"true\">\n-            </separator>\n-            <command\n-                  commandId=\"saros.ui.commands.ShareResource\"\n-                  disabledIcon=\"icons/dlcl16/spacer.png\"\n-                  icon=\"icons/elcl16/session_tsk.png\"\n-                  style=\"push\">\n-               <visibleWhen\n-                     checkEnabled=\"false\">\n-                      <not>\n-                        <reference\n-                              definitionId=\"saros.ui.definitions.isSarosSessionRunning\">\n-                        </reference>\n-                     </not>\n-               </visibleWhen>\n-            </command>\n-           <command\n-                  commandId=\"saros.ui.commands.SessionAddResources\"\n-                  disabledIcon=\"icons/dlcl16/session_add_reference_points_tsk.png\"\n-                  icon=\"icons/elcl16/session_add_reference_points_tsk.png\"\n-                  style=\"push\">\n-               <visibleWhen\n-                     checkEnabled=\"false\">\n-                  <and>\n-                     <reference\n-                           definitionId=\"saros.ui.definitions.isConnected\">\n-                     </reference>\n-                     <reference\n-                           definitionId=\"saros.ui.definitions.isSarosSessionRunning\">\n-                     </reference>\n-                  </and>\n-               </visibleWhen>\n-            </command>\n-            <command\n-                  commandId=\"saros.ui.commands.SessionAddContacts\"\n-                  disabledIcon=\"icons/dlcl16/session_add_contacts_tsk.png\"\n-                  icon=\"icons/elcl16/session_add_contacts_tsk.png\"\n-                  style=\"push\">\n-               <visibleWhen\n-                     checkEnabled=\"false\">\n-                  <and>\n-                     <reference\n-                           definitionId=\"saros.ui.definitions.isConnected\">\n-                     </reference>\n-                     <reference\n-                           definitionId=\"saros.ui.definitions.isSarosSessionRunning\">\n-                     </reference>\n-                     <reference\n-                           definitionId=\"saros.ui.definitions.isSarosSessionHost\">\n-                     </reference>\n-                  </and>\n-               </visibleWhen>\n-            </command>\n-            <command\n-                  commandId=\"saros.ui.commands.SessionLeave\"\n-                  disabledIcon=\"icons/dlcl16/session_leave_tsk.png\"\n-                  icon=\"icons/elcl16/session_leave_tsk.png\"\n-                  label=\"Leave Session...\"\n-                  style=\"push\">\n-               <visibleWhen\n-                     checkEnabled=\"false\">\n-                  <and>\n-                     <reference\n-                           definitionId=\"saros.ui.definitions.isConnected\">\n-                     </reference>\n-                     <reference\n-                           definitionId=\"saros.ui.definitions.isSarosSessionRunning\">\n-                     </reference>\n-                     <not>\n-                        <reference\n-                              definitionId=\"saros.ui.definitions.isSarosSessionHost\">\n-                        </reference>\n-                     </not>\n-                  </and>\n-               </visibleWhen>\n-            </command>\n-            <command\n-                  commandId=\"saros.ui.commands.SessionLeave\"\n-                  disabledIcon=\"icons/dlcl16/session_terminate_tsk.png\"\n-                  icon=\"icons/elcl16/session_terminate_tsk.png\"\n-                  label=\"Stop Session...\"\n-                  style=\"push\">\n-               <visibleWhen\n-                     checkEnabled=\"false\">\n-                  <and>\n-                     <reference\n-                           definitionId=\"saros.ui.definitions.isConnected\">\n-                     </reference>\n-                     <reference\n-                           definitionId=\"saros.ui.definitions.isSarosSessionRunning\">\n-                     </reference>\n-                     <reference\n-                           definitionId=\"saros.ui.definitions.isSarosSessionHost\">\n-                     </reference>\n-                  </and>\n-               </visibleWhen>\n-            </command>\n-            <separator\n-                  name=\"CollaborationEnd\"\n-                  visible=\"true\">\n-            </separator>\n-            <separator\n-                  name=\"OtherStart\"\n-                  visible=\"true\">\n-            </separator>\n-            <separator\n-                  name=\"OtherEnd\"\n-                  visible=\"true\">\n-            </separator>\n-            <separator\n-                  name=\"additions\">\n-            </separator>\n-            <command\n-                  commandId=\"saros.ui.commands.OpenSarosPreferences\"\n-                  icon=\"icons/elcl16/preferences_open_tsk.png\"\n-                  style=\"push\">\n-            </command>\n-         </menu>\n-      </menuContribution>\n-      <menuContribution\n-            allPopups=\"false\"\n-            locationURI=\"popup:saros.ui.views.SarosView?before=menustart\">\n-         <command\n-               commandId=\"saros.ui.commands.ShareResource\"\n-               disabledIcon=\"icons/dlcl16/spacer.png\"\n-               icon=\"icons/elcl16/session_tsk.png\"\n-               style=\"push\">\n-            <visibleWhen\n-                  checkEnabled=\"false\">\n-               <and>\n-                  <reference\n-                        definitionId=\"saros.ui.definitions.isConnected\">\n-                  </reference>\n-                  <not>\n-                     <reference\n-                           definitionId=\"saros.ui.definitions.isSarosSessionRunning\">\n-                     </reference>\n-                  </not>\n-                  <reference\n-                        definitionId=\"saros.ui.definitions.sessionHeadlineSelected\">\n-                  </reference>\n-               </and>\n-            </visibleWhen>\n-         </command>\n-         <command\n-               commandId=\"saros.ui.commands.SessionAddResources\"\n-               disabledIcon=\"icons/dlcl16/session_add_reference_points_tsk.png\"\n-               icon=\"icons/elcl16/session_add_reference_points_tsk.png\"\n-               style=\"push\">\n-            <visibleWhen\n-                  checkEnabled=\"false\">\n-               <and>\n-                  <reference\n-                        definitionId=\"saros.ui.definitions.isConnected\">\n-                  </reference>\n-                  <reference\n-                        definitionId=\"saros.ui.definitions.isSarosSessionRunning\">\n-                  </reference>\n-                  <reference\n-                        definitionId=\"saros.ui.definitions.sessionHeadlineSelected\">\n-                  </reference>\n-               </and>\n-            </visibleWhen>\n-         </command>\n-         <command\n-               commandId=\"saros.ui.commands.AddContact\"\n-               disabledIcon=\"icons/dlcl16/contact_add_tsk.png\"\n-               icon=\"icons/elcl16/contact_add_tsk.png\"\n-               style=\"push\">\n-            <visibleWhen checkEnabled=\"false\">\n-               <and>\n-                  <not>\n-                     <reference definitionId=\"saros.ui.definitions.contactsSelected\" />\n-                  </not>\n-                  <not>\n-                     <reference definitionId=\"saros.ui.definitions.participantsSelected\" />\n-                  </not>\n-                  <not>\n-                     <reference definitionId=\"saros.ui.definitions.sessionHeadlineSelected\" />\n-                  </not>\n-               </and>\n-            </visibleWhen>\n-         </command>\n-         <command\n-               commandId=\"saros.ui.commands.SessionAddContacts\"\n-               disabledIcon=\"icons/dlcl16/session_add_contacts_tsk.png\"\n-               icon=\"icons/elcl16/session_add_contacts_tsk.png\"\n-               style=\"push\">\n-            <visibleWhen\n-                  checkEnabled=\"false\">\n-               <and>\n-                  <reference\n-                        definitionId=\"saros.ui.definitions.isConnected\">\n-                  </reference>\n-                  <reference\n-                        definitionId=\"saros.ui.definitions.isSarosSessionRunning\">\n-                  </reference>\n-                  <reference\n-                        definitionId=\"saros.ui.definitions.sessionHeadlineSelected\">\n-                  </reference>\n-                  <reference\n-                        definitionId=\"saros.ui.definitions.isSarosSessionHost\">\n-                  </reference>\n-               </and>\n-            </visibleWhen>\n-         </command>\n-      </menuContribution>\n-      <menuContribution\n-            allPopups=\"false\"\n-            locationURI=\"popup:org.eclipse.ui.popup.any?after=additions\">\n-         <separator\n-               name=\"CollaborationStart\"\n-               visible=\"true\">\n-         </separator>\n-         <separator\n-               name=\"CollaborationEnd\"\n-               visible=\"false\">\n-         </separator>\n-      </menuContribution>\n-      \n-      <!-- Eclipse Context Menus Hooks !-->\n-      \n-      <menuContribution\n-            allPopups=\"false\"\n-            locationURI=\"popup:org.eclipse.ui.popup.any?after=additions\">\n-         <command\n-               commandId=\"saros.ui.commands.ShareResource\"\n-               disabledIcon=\"icons/dlcl16/spacer.png\"\n-               icon=\"icons/elcl16/session_tsk.png\"\n-               label=\"Share Resource(s)...\"\n-               style=\"push\"\n-               tooltip=\"Share the Selected Resources With Your Contacts\">\n-            <visibleWhen\n-                  checkEnabled=\"false\">\n-               <and>\n-                  <not>\n-                     <reference\n-                           definitionId=\"saros.ui.definitions.isSarosSessionRunning\">\n-                     </reference>\n-                  </not>\n-                  <reference\n-                        definitionId=\"saros.ui.definitions.resourcesSelected\">\n-                  </reference>\n-               </and>\n-            </visibleWhen>\n-         </command>\n-            <command\n-                  commandId=\"saros.ui.commands.SessionAddSelectedResources\"\n-                  disabledIcon=\"icons/dlcl16/session_add_reference_points_tsk.png\"\n-                  icon=\"icons/elcl16/session_add_reference_points_tsk.png\"\n-                  style=\"push\">\n-               <visibleWhen\n-                     checkEnabled=\"false\">\n-                  <and>\n-                     <reference\n-                           definitionId=\"saros.ui.definitions.isConnected\">\n-                     </reference>\n-                     <reference\n-                           definitionId=\"saros.ui.definitions.isSarosSessionRunning\">\n-                     </reference>\n-                     <reference\n-                           definitionId=\"saros.ui.definitions.resourcesSelected\">\n-                     </reference>\n-                  </and>\n-               </visibleWhen>\n-            </command>\n-      </menuContribution>\n-      \n-      <menuContribution\n-            allPopups=\"false\"\n-            locationURI=\"popup:org.eclipse.ui.popup.any?before=menustart\">\n-         <!-- See SarosView, the context menu is created manually \n-         <command\n-               commandId=\"saros.ui.commands.ShareResource\"\n-               disabledIcon=\"icons/dlcl16/spacer.png\"\n-               icon=\"icons/elcl16/session_tsk.png\"\n-               label=\"Share Project(s)...\"\n-               style=\"push\"\n-               tooltip=\"Share Projects With Selected Contacts\">\n-            <visibleWhen\n-                  checkEnabled=\"false\">\n-               <and>\n-                  <not>\n-                     <reference\n-                           definitionId=\"saros.ui.definitions.isSarosSessionRunning\">\n-                     </reference>\n-                  </not>\n-                  <reference\n-                        definitionId=\"saros.ui.definitions.contactsSelected\">\n-                  </reference>\n-               </and>\n-            </visibleWhen>\n-         </command>\n-         -->\n-         <command\n-               commandId=\"saros.ui.commands.SessionAddSelectedContacts\"\n-               disabledIcon=\"icons/dlcl16/session_add_contacts_tsk.png\"\n-               icon=\"icons/elcl16/session_add_contacts_tsk.png\"\n-               style=\"push\">\n-            <visibleWhen\n-                  checkEnabled=\"false\">\n-               <and>\n-                  <reference\n-                        definitionId=\"saros.ui.definitions.isConnected\">\n-                  </reference>\n-                  <reference\n-                        definitionId=\"saros.ui.definitions.isSarosSessionRunning\">\n-                  </reference>\n-                  <reference\n-                        definitionId=\"saros.ui.definitions.isSarosSessionHost\">\n-                  </reference>\n-                  <reference\n-                        definitionId=\"saros.ui.definitions.contactsSelected\">\n-                  </reference>\n-                  <reference\n-                        definitionId=\"saros.ui.definitions.contactsOnline\">\n-                  </reference>\n-               </and>\n-            </visibleWhen>\n-         </command>\n-      </menuContribution>\n-   </extension>\n    <extension\n          id=\"saros.ui.definitions.isResource\"\n          point=\"org.eclipse.core.expressions.definitions\">\n+      <definition\n+      \t\tid=\"saros.ui.definitions.isConnectedIsSarosSessionRunningIsSarosSessionHostContactsSelectedContactsOnline\">\n+  \t\t <and>\n+              <reference\n+                    definitionId=\"saros.ui.definitions.isConnected\">\n+              </reference>\n+              <reference\n+                    definitionId=\"saros.ui.definitions.isSarosSessionRunning\">\n+              </reference>\n+              <reference\n+                    definitionId=\"saros.ui.definitions.isSarosSessionHost\">\n+              </reference>\n+              <reference\n+                    definitionId=\"saros.ui.definitions.contactsSelected\">\n+              </reference>\n+              <reference\n+                    definitionId=\"saros.ui.definitions.contactsOnline\">\n+              </reference>\n+          </and>\n+       </definition>\n+      <definition\n+      \t\tid=\"saros.ui.definitions.isConnectedIsSarosSessionRunningResourcesSelected\">\n+      \t <and>\n+             <reference\n+                   definitionId=\"saros.ui.definitions.isConnected\">\n+             </reference>\n+             <reference\n+                   definitionId=\"saros.ui.definitions.isSarosSessionRunning\">\n+             </reference>\n+             <reference\n+                   definitionId=\"saros.ui.definitions.resourcesSelected\">\n+             </reference>\n+\t\t </and>\n+       </definition>\n+      <definition\n+      \t\tid=\"saros.ui.definitions.notIsSarosSessionRunningResourcesSelected\">\n+        <and>\n+          <not>\n+             <reference\n+                   definitionId=\"saros.ui.definitions.isSarosSessionRunning\">\n+             </reference>\n+          </not>\n+          <reference\n+                definitionId=\"saros.ui.definitions.resourcesSelected\">\n+          </reference>\n+        </and>\n+      </definition>\n+      <definition\n+      \t\tid =\"saros.ui.definitions.isConnectedIsSarosSessionRunningSessionHeadlineSelectedIsSarosSessionHost\">\n+      \t<and>\n+          <reference\n+                definitionId=\"saros.ui.definitions.isConnected\">\n+          </reference>\n+          <reference\n+                definitionId=\"saros.ui.definitions.isSarosSessionRunning\">\n+          </reference>\n+          <reference\n+                definitionId=\"saros.ui.definitions.sessionHeadlineSelected\">\n+          </reference>\n+          <reference\n+                definitionId=\"saros.ui.definitions.isSarosSessionHost\">\n+          </reference>\n+        </and>\n+      </definition>\n+      <definition\n+      \t\tid = \"saros.ui.definitions.notContactsSelectedNotParticipantsSelectedNotSessionHeadlineSelected\">\n+      \t<and>\n+          <not>\n+             <reference definitionId=\"saros.ui.definitions.contactsSelected\" />\n+          </not>\n+          <not>\n+             <reference definitionId=\"saros.ui.definitions.participantsSelected\" />\n+          </not>\n+          <not>\n+             <reference definitionId=\"saros.ui.definitions.sessionHeadlineSelected\" />\n+          </not>\n+        </and>\n+        </definition>\n+      <definition\n+      \t\tid =\"saros.ui.definitions.isConnectedIsSarosSessionRunningSessionHeadlineSelected\">\n+\t\t <and>\n+\t\t  <reference\n+\t\t        definitionId=\"saros.ui.definitions.isConnected\">\n+\t\t  </reference>\n+\t\t  <reference\n+\t\t        definitionId=\"saros.ui.definitions.isSarosSessionRunning\">\n+\t\t  </reference>\n+\t\t  <reference\n+\t\t        definitionId=\"saros.ui.definitions.sessionHeadlineSelected\">\n+\t\t  </reference>\n+\t\t </and>\n+      </definition>\n+      <definition\n+      \t\tid=\"saros.ui.definitions.isConnectedNotIsSarosSessionRunningSessionHeadlineSelected\">\n+\t\t<and>\n+\t\t  <reference\n+\t\t        definitionId=\"saros.ui.definitions.isConnected\">\n+\t\t  </reference>\n+\t\t  <not>\n+\t\t     <reference\n+\t\t           definitionId=\"saros.ui.definitions.isSarosSessionRunning\">\n+\t\t     </reference>\n+\t\t  </not>\n+\t\t  <reference\n+\t\t        definitionId=\"saros.ui.definitions.sessionHeadlineSelected\">\n+\t\t  </reference>\n+\t\t</and>\n+      </definition>\t \t  \n       <definition\n             id=\"saros.ui.definitions.isConnected\">\n          <with\n@@ -1088,6 +575,20 @@\n             </instanceof>\n          </with>\n       </definition>\n+      <definition id=\"saros.ui.definitions.notIsSarosSessionRunning\">\n+      \t<not>\n+      \t\t<reference definitionId=\"saros.ui.definitions.isSarosSessionRunning\">\n+        \t</reference>\n+      \t</not>\n+      </definition>\n+      <definition id=\"saros.ui.definitions.isConnectedIsSarosSessionRunning\">\n+      \t<and>\n+      \t\t<reference definitionId=\"saros.ui.definitions.isConnected\">\n+        \t</reference>\n+        \t<reference definitionId=\"saros.ui.definitions.isSarosSessionRunning\">\n+        \t</reference>\n+      \t</and>\n+      </definition>      \n       <definition\n             id=\"saros.ui.definitions.isSarosSessionHost\">\n          <with\n@@ -1097,6 +598,28 @@\n             </test>\n          </with>\n       </definition>\n+      <definition id=\"saros.ui.definitions.isConnectedIsSarosSessionRunningIsSarosSessionHost\">\n+      \t<and>\n+      \t\t<reference definitionId=\"saros.ui.definitions.isConnected\">\n+        \t</reference>\n+        \t<reference definitionId=\"saros.ui.definitions.isSarosSessionRunning\">\n+        \t</reference>\n+        \t<reference definitionId=\"saros.ui.definitions.isSarosSessionHost\">\n+        \t</reference>\n+      \t</and>\n+      </definition>\n+      <definition id=\"saros.ui.definitions.isConnectedIsSarosSessionRunningNotIsSarosSessionHost\">\n+      \t<and>\n+      \t\t<reference definitionId=\"saros.ui.definitions.isConnected\">\n+        \t</reference>\n+        \t<reference definitionId=\"saros.ui.definitions.isSarosSessionRunning\">\n+        \t</reference>\n+        \t<not>\n+\t        \t<reference definitionId=\"saros.ui.definitions.isSarosSessionHost\">\n+\t        \t</reference>\n+\t        </not>\n+      \t</and>\n+      </definition>\n       <definition\n             id=\"saros.ui.definitions.isInSarosSession\">\n          <or>"
  },
  {
    "sha": "b7adbb1e29c80d26dc7349899b3605d4972b03fd",
    "filename": "eclipse/src/saros/Saros.java",
    "status": "modified",
    "additions": 13,
    "deletions": 1,
    "changes": 14,
    "blob_url": "https://github.com/saros-project/saros/blob/05a271ca28215e1ff4210cf15f3b7ff45006c3c2/eclipse/src/saros/Saros.java",
    "raw_url": "https://github.com/saros-project/saros/raw/05a271ca28215e1ff4210cf15f3b7ff45006c3c2/eclipse/src/saros/Saros.java",
    "contents_url": "https://api.github.com/repos/saros-project/saros/contents/eclipse/src/saros/Saros.java?ref=05a271ca28215e1ff4210cf15f3b7ff45006c3c2",
    "patch": "@@ -3,6 +3,7 @@\n import java.io.File;\n import java.io.InputStream;\n import java.util.concurrent.atomic.AtomicBoolean;\n+import javax.inject.Inject;\n import org.apache.log4j.Logger;\n import org.apache.logging.log4j.Level;\n import org.apache.logging.log4j.core.config.ConfigurationSource;\n@@ -11,12 +12,16 @@\n import org.apache.logging.log4j.status.StatusLogger;\n import org.eclipse.core.runtime.Platform;\n import org.eclipse.core.runtime.preferences.ConfigurationScope;\n+import org.eclipse.e4.core.di.annotations.Optional;\n+import org.eclipse.e4.ui.di.UIEventTopic;\n+import org.eclipse.e4.ui.workbench.UIEvents;\n import org.eclipse.swt.SWTException;\n import org.eclipse.swt.widgets.Display;\n import org.eclipse.ui.IWorkbench;\n import org.eclipse.ui.IWorkbenchListener;\n import org.eclipse.ui.plugin.AbstractUIPlugin;\n import org.osgi.framework.BundleContext;\n+import org.osgi.service.event.Event;\n import org.osgi.service.prefs.BackingStoreException;\n import org.osgi.service.prefs.Preferences;\n import saros.annotations.Component;\n@@ -130,10 +135,17 @@ public void start(BundleContext context) throws Exception {\n \n     isLifecycleStarted = true;\n \n-    getWorkbench().addWorkbenchListener(workbenchShutdownListener);\n     isInitialized = true;\n   }\n \n+  @Inject\n+  @Optional\n+  public void applicationStarted(\n+      @UIEventTopic(UIEvents.UILifeCycle.APP_STARTUP_COMPLETE) Event event, Saros saros) {\n+\n+    saros.getWorkbench().addWorkbenchListener(saros.workbenchShutdownListener);\n+  }\n+\n   @Override\n   public void stop(BundleContext context) throws Exception {\n "
  },
  {
    "sha": "801d6b7eb027e0c1559e7b9cd1616c05754ccd07",
    "filename": "eclipse/src/saros/StartupSaros.java",
    "status": "modified",
    "additions": 107,
    "deletions": 66,
    "changes": 173,
    "blob_url": "https://github.com/saros-project/saros/blob/05a271ca28215e1ff4210cf15f3b7ff45006c3c2/eclipse/src/saros/StartupSaros.java",
    "raw_url": "https://github.com/saros-project/saros/raw/05a271ca28215e1ff4210cf15f3b7ff45006c3c2/eclipse/src/saros/StartupSaros.java",
    "contents_url": "https://api.github.com/repos/saros-project/saros/contents/eclipse/src/saros/StartupSaros.java?ref=05a271ca28215e1ff4210cf15f3b7ff45006c3c2",
    "patch": "@@ -1,88 +1,129 @@\n package saros;\n \n+import java.util.List;\n+import javax.annotation.PostConstruct;\n import org.apache.log4j.Logger;\n-import org.eclipse.ui.IStartup;\n-import org.eclipse.ui.PlatformUI;\n-import org.eclipse.ui.intro.IIntroManager;\n-import org.eclipse.ui.intro.IIntroPart;\n+import org.eclipse.e4.core.services.events.IEventBroker;\n+import org.eclipse.e4.ui.model.application.MApplication;\n+import org.eclipse.e4.ui.model.application.ui.MElementContainer;\n+import org.eclipse.e4.ui.model.application.ui.MUIElement;\n+import org.eclipse.e4.ui.model.application.ui.basic.MPart;\n+import org.eclipse.e4.ui.model.application.ui.basic.MPartSashContainer;\n+import org.eclipse.e4.ui.model.application.ui.basic.MPartStack;\n+import org.eclipse.e4.ui.model.application.ui.basic.MWindow;\n+import org.eclipse.e4.ui.workbench.UIEvents;\n+import org.eclipse.e4.ui.workbench.modeling.EModelService;\n+import org.eclipse.e4.ui.workbench.modeling.EPartService;\n+import org.osgi.service.event.Event;\n+import org.osgi.service.event.EventHandler;\n import saros.account.XMPPAccountStore;\n import saros.preferences.Preferences;\n import saros.repackaged.picocontainer.annotations.Inject;\n import saros.ui.util.SWTUtils;\n-import saros.ui.util.ViewUtils;\n import saros.ui.util.WizardUtils;\n import saros.ui.util.XMPPConnectionSupport;\n \n /**\n- * An instance of this class is instantiated when Eclipse starts, after the Saros plugin has been\n- * started.\n+ * An instance of this class is instantiated when Eclipse starts, after the\n+ * Saros plugin has been started.\n  *\n- * <p>{@link #earlyStartup()} is called after the workbench is initialized.\n+ * <p>\n+ * {@link #earlyStartup()} is called after the workbench is initialized.\n  */\n-public class StartupSaros implements IStartup {\n+public class StartupSaros {\n \n-  private static final Logger log = Logger.getLogger(StartupSaros.class);\n+    private static final Logger log = Logger.getLogger(StartupSaros.class);\n \n-  @Inject private Preferences preferences;\n+    @Inject\n+    private Preferences preferences;\n \n-  @Inject private XMPPAccountStore xmppAccountStore;\n-\n-  public StartupSaros() {\n-    SarosPluginContext.initComponent(this);\n-  }\n-\n-  /*\n-   * Once the workbench is started, the method earlyStartup() will be called\n-   * from a separate thread\n-   */\n-\n-  @Override\n-  public void earlyStartup() {\n-\n-    if (xmppAccountStore.isEmpty()) SWTUtils.runSafeSWTAsync(log, StartupSaros::openSarosView);\n-\n-    Integer testmode = Integer.getInteger(\"saros.testmode\");\n-\n-    if (testmode != null) return;\n-\n-    /*\n-     * Only show the Configuration Wizard if no accounts are configured. If\n-     * Saros is already configured, do not show the tutorial because the\n-     * user is probably already experienced.\n-     */\n+    @Inject\n+    private XMPPAccountStore xmppAccountStore;\n \n     /*\n-     *  TODO first display a dialog if the user wants to get some help. Afterwards open this wizard\n-     *  and maybe also open a web site with getting started?\n+     * Once the workbench is started, the method earlyStartup() will be called\n+     * from a separate thread\n      */\n \n-    if (xmppAccountStore.isEmpty()) {\n-      SWTUtils.runSafeSWTAsync(log, WizardUtils::openSarosConfigurationWizard);\n-      return;\n+    @PostConstruct\n+    public void earlyStartup(IEventBroker eb, EPartService partService,\n+        EModelService service, MApplication app) {\n+        SarosPluginContext.initComponent(this);\n+\n+        eb.subscribe(UIEvents.UILifeCycle.APP_STARTUP_COMPLETE,\n+            new EventHandler() {\n+\n+                @Override\n+                public void handleEvent(Event event) {\n+\n+                    // Create the View\n+                    MPart sarosView = partService\n+                        .createPart(\"saros.ui.views.SarosView\");\n+                    MWindow mainWindow = app.getChildren().get(0);\n+\n+                    List<MPartStack> parts = service.findElements(mainWindow,\n+                        \"bottomRight\", MPartStack.class, null);\n+\n+                    if (parts.size() > 0) {\n+                        MPartStack partStackSaros = service\n+                            .createModelElement(MPartStack.class);\n+                        partStackSaros.getChildren().add(sarosView);\n+                        MPartSashContainer partSashContainer = service\n+                            .createModelElement(MPartSashContainer.class);\n+                        MPartStack partStackBottomRight = parts.get(0);\n+                        MElementContainer<MUIElement> parent = partStackBottomRight\n+                            .getParent();\n+                        parent.getChildren().remove(partStackBottomRight);\n+                        partSashContainer.getChildren()\n+                            .add(partStackBottomRight);\n+                        partSashContainer.getChildren().add(partStackSaros);\n+                        partSashContainer.setHorizontal(true);\n+                        parent.getChildren().add(partSashContainer);\n+                    }\n+\n+                    Integer testmode = Integer.getInteger(\"saros.testmode\");\n+\n+                    if (testmode != null)\n+                        return;\n+\n+                    /*\n+                     * Only show the Configuration Wizard if no accounts are\n+                     * configured. If Saros is already configured, do not show\n+                     * the tutorial because the user is probably already\n+                     * experienced.\n+                     */\n+\n+                    /*\n+                     * TODO first display a dialog if the user wants to get some\n+                     * help. Afterwards open this wizard and maybe also open a\n+                     * web site with getting started?\n+                     */\n+\n+                    if (xmppAccountStore.isEmpty()) {\n+                        SWTUtils.runSafeSWTAsync(log,\n+                            WizardUtils::openSarosConfigurationWizard);\n+                        return;\n+                    }\n+\n+                    /*\n+                     * HACK workaround for\n+                     * http://sourceforge.net/p/dpp/bugs/782/ Perform connecting\n+                     * after the view is created so that the necessary GUI\n+                     * elements for the chat have already installed their\n+                     * listeners.\n+                     *\n+                     * FIXME This will not work if the view is not created on\n+                     * startup !\n+                     */\n+\n+                    if (preferences.isAutoConnecting()\n+                        && xmppAccountStore.getDefaultAccount() != null)\n+                        SWTUtils.runSafeSWTAsync(log,\n+                            () -> XMPPConnectionSupport.getInstance()\n+                                .connect(true));\n+\n+                    eb.unsubscribe(this);\n+                }\n+            });\n     }\n-\n-    /*\n-     * HACK workaround for http://sourceforge.net/p/dpp/bugs/782/\n-     * Perform connecting after the view is created so that the\n-     * necessary GUI elements for the chat have already installed\n-     * their listeners.\n-     *\n-     * FIXME This will not work if the view is not created on\n-     * startup !\n-     */\n-\n-    if (preferences.isAutoConnecting() && xmppAccountStore.getDefaultAccount() != null)\n-      SWTUtils.runSafeSWTAsync(log, () -> XMPPConnectionSupport.getInstance().connect(true));\n-  }\n-\n-  private static void openSarosView() {\n-\n-    IIntroManager m = PlatformUI.getWorkbench().getIntroManager();\n-    IIntroPart i = m.getIntro();\n-    /*\n-     * if there is a welcome screen, do not open the SarosView\n-     * because it would be maximized and hiding the workbench window.\n-     */\n-    if (i == null) ViewUtils.openSarosView();\n-  }\n }"
  },
  {
    "sha": "950961cd94ad252e0b5eb6c017728e7af128d947",
    "filename": "eclipse/src/saros/ui/actions/ChangeXMPPAccountAction.java",
    "status": "removed",
    "additions": 0,
    "deletions": 255,
    "changes": 255,
    "blob_url": "https://github.com/saros-project/saros/blob/2b641704fbe8dbdc3cae0f46b98113a556433ae6/eclipse/src/saros/ui/actions/ChangeXMPPAccountAction.java",
    "raw_url": "https://github.com/saros-project/saros/raw/2b641704fbe8dbdc3cae0f46b98113a556433ae6/eclipse/src/saros/ui/actions/ChangeXMPPAccountAction.java",
    "contents_url": "https://api.github.com/repos/saros-project/saros/contents/eclipse/src/saros/ui/actions/ChangeXMPPAccountAction.java?ref=2b641704fbe8dbdc3cae0f46b98113a556433ae6",
    "patch": "@@ -1,255 +0,0 @@\n-package saros.ui.actions;\n-\n-import java.util.List;\n-import org.apache.log4j.Logger;\n-import org.eclipse.jface.action.Action;\n-import org.eclipse.jface.action.ActionContributionItem;\n-import org.eclipse.jface.action.IMenuCreator;\n-import org.eclipse.jface.dialogs.MessageDialog;\n-import org.eclipse.swt.SWT;\n-import org.eclipse.swt.widgets.Control;\n-import org.eclipse.swt.widgets.Menu;\n-import org.eclipse.swt.widgets.MenuItem;\n-import org.eclipse.ui.PlatformUI;\n-import org.eclipse.ui.handlers.IHandlerService;\n-import saros.SarosPluginContext;\n-import saros.account.IAccountStoreListener;\n-import saros.account.XMPPAccount;\n-import saros.account.XMPPAccountStore;\n-import saros.communication.connection.ConnectionHandler;\n-import saros.communication.connection.IConnectionStateListener;\n-import saros.net.ConnectionState;\n-import saros.net.xmpp.JID;\n-import saros.repackaged.picocontainer.annotations.Inject;\n-import saros.ui.ImageManager;\n-import saros.ui.Messages;\n-import saros.ui.util.SWTUtils;\n-import saros.ui.util.WizardUtils;\n-import saros.ui.util.XMPPConnectionSupport;\n-\n-/**\n- * In addition to the connect/disconnect action, this allows the user to switch between accounts.\n- */\n-public class ChangeXMPPAccountAction extends Action implements IMenuCreator, Disposable {\n-\n-  public static final String ACTION_ID = ChangeXMPPAccountAction.class.getName();\n-\n-  private static final Logger log = Logger.getLogger(ChangeXMPPAccountAction.class);\n-\n-  private Menu accountMenu;\n-\n-  @Inject private XMPPAccountStore accountService;\n-\n-  @Inject private ConnectionHandler connectionHandler;\n-\n-  private boolean isConnectionError;\n-\n-  private boolean defaultAccountChanged;\n-\n-  private final IConnectionStateListener connectionStateListener =\n-      (state, error) -> SWTUtils.runSafeSWTAsync(log, () -> updateStatus(state));\n-\n-  private final IAccountStoreListener accountStoreListener =\n-      new IAccountStoreListener() {\n-        @Override\n-        public void activeAccountChanged(final XMPPAccount activeAccount) {\n-          defaultAccountChanged = true;\n-        }\n-      };\n-\n-  public ChangeXMPPAccountAction() {\n-    SarosPluginContext.initComponent(this);\n-\n-    setText(Messages.ChangeXMPPAccountAction_connect);\n-    setId(ACTION_ID);\n-\n-    connectionHandler.addConnectionStateListener(connectionStateListener);\n-    setMenuCreator(this);\n-    updateStatus(connectionHandler.getConnectionState());\n-\n-    accountService.addListener(accountStoreListener);\n-  }\n-\n-  @Override\n-  public void run() {\n-\n-    if (connectionHandler.isConnected()) {\n-      XMPPConnectionSupport.getInstance().disconnect();\n-      return;\n-    }\n-\n-    final XMPPAccount lastUsedAccount = XMPPConnectionSupport.getInstance().getCurrentXMPPAccount();\n-\n-    final List<XMPPAccount> accounts = accountService.getAllAccounts();\n-\n-    final boolean exists = accounts.indexOf(lastUsedAccount) != -1;\n-\n-    final XMPPAccount defaultAccount = accountService.getDefaultAccount();\n-\n-    final boolean isEmpty = accountService.isEmpty();\n-\n-    if (!exists && (defaultAccount == null || isEmpty)) {\n-      if (!MessageDialog.openQuestion(\n-          SWTUtils.getShell(),\n-          \"Default account missing\",\n-          \"A default account has not been set yet. Do you want set a default account?\")) return;\n-\n-      SWTUtils.runSafeSWTAsync(log, this::openPreferences);\n-      return;\n-    }\n-\n-    final XMPPAccount accountToConnect;\n-\n-    if (defaultAccountChanged || !exists) {\n-      defaultAccountChanged = false;\n-      accountToConnect = defaultAccount;\n-    } else {\n-      accountToConnect = lastUsedAccount;\n-    }\n-\n-    XMPPConnectionSupport.getInstance().connect(accountToConnect, false, false);\n-  }\n-\n-  @Override\n-  public void dispose() {\n-    connectionHandler.removeConnectionStateListener(connectionStateListener);\n-    accountService.removeListener(accountStoreListener);\n-  }\n-\n-  @Override\n-  public Menu getMenu(Menu parent) {\n-    return null;\n-  }\n-\n-  @Override\n-  public Menu getMenu(Control parent) {\n-    accountMenu = new Menu(parent);\n-\n-    final List<XMPPAccount> accounts = accountService.getAllAccounts();\n-\n-    final String connectionId = connectionHandler.getConnectionID();\n-\n-    if (connectionHandler.isConnected() && connectionId != null) {\n-\n-      final JID jid = new JID(connectionId);\n-\n-      /*\n-       *  TODO this may filter out too much but this situation is somewhat rare (multiple accounts\n-       *  with same name and domain but different server\n-       */\n-\n-      accounts.removeIf(\n-          a ->\n-              a.getUsername().equalsIgnoreCase(jid.getName())\n-                  && a.getDomain().equalsIgnoreCase(jid.getDomain()));\n-    }\n-\n-    accounts.forEach(this::addMenuItem);\n-\n-    new MenuItem(accountMenu, SWT.SEPARATOR);\n-\n-    addActionToMenu(\n-        accountMenu,\n-        new Action(Messages.ChangeXMPPAccountAction_add_account) {\n-          @Override\n-          public void run() {\n-            WizardUtils.openAddXMPPAccountWizard();\n-          }\n-        });\n-\n-    addActionToMenu(\n-        accountMenu,\n-        new Action(Messages.ChangeXMPPAccountAction_configure_account) {\n-          @Override\n-          public void run() {\n-            openPreferences();\n-          }\n-        });\n-    return accountMenu;\n-  }\n-\n-  private void addMenuItem(final XMPPAccount account) {\n-    // The additional @ is needed because @ has special meaning in\n-    // Action#setText(), see JavaDoc of Action().\n-\n-    String accountText = account.getUsername() + \"@\" + account.getDomain() + \"@\";\n-    Action action =\n-        new Action(accountText) {\n-\n-          @Override\n-          public void run() {\n-            defaultAccountChanged = false;\n-            XMPPConnectionSupport.getInstance().connect(account, false, false);\n-          }\n-        };\n-\n-    addActionToMenu(accountMenu, action);\n-  }\n-\n-  private void addActionToMenu(Menu parent, Action action) {\n-    ActionContributionItem item = new ActionContributionItem(action);\n-    item.fill(parent, -1);\n-  }\n-\n-  private void updateStatus(ConnectionState state) {\n-    try {\n-      switch (state) {\n-        case CONNECTED:\n-          isConnectionError = false;\n-          setText(Messages.ChangeXMPPAccountAction_disconnect);\n-          setImageDescriptor(\n-              ImageManager.getImageDescriptor(\"/icons/elcl16/xmpp_disconnect_tsk.png\"));\n-          break;\n-        case CONNECTING:\n-          isConnectionError = false;\n-          setText(Messages.ChangeXMPPAccountAction_connecting);\n-          setDisabledImageDescriptor(\n-              ImageManager.getImageDescriptor(\"/icons/elcl16/xmpp_connecting_misc.png\"));\n-          break;\n-        case ERROR:\n-          isConnectionError = true;\n-          setImageDescriptor(\n-              ImageManager.getImageDescriptor(\"/icons/elcl16/xmpp_connection_error_misc.png\"));\n-          break;\n-        case NOT_CONNECTED:\n-          setText(Messages.ChangeXMPPAccountAction_connect);\n-\n-          if (!isConnectionError)\n-            setImageDescriptor(\n-                ImageManager.getImageDescriptor(\"/icons/elcl16/xmpp_connect_tsk.png\"));\n-\n-          break;\n-        case DISCONNECTING:\n-        default:\n-          isConnectionError = false;\n-          setText(Messages.ChangeXMPPAccountAction_disconnecting);\n-          setDisabledImageDescriptor(\n-              ImageManager.getImageDescriptor(\"/icons/elcl16/xmpp_disconnecting_misc.png\"));\n-          break;\n-      }\n-\n-      setEnabled(\n-          state == ConnectionState.CONNECTED\n-              || state == ConnectionState.NOT_CONNECTED\n-              || state == ConnectionState.ERROR);\n-\n-    } catch (RuntimeException e) {\n-      log.error(\"Internal error in ChangeXMPPAccountAction:\", e);\n-    }\n-  }\n-\n-  private void openPreferences() {\n-    IHandlerService service =\n-        PlatformUI.getWorkbench()\n-            .getActiveWorkbenchWindow()\n-            .getActivePage()\n-            .getActivePart()\n-            .getSite()\n-            .getService(IHandlerService.class);\n-    try {\n-      service.executeCommand(\"saros.ui.commands.OpenSarosPreferences\", null);\n-    } catch (Exception e) {\n-      log.debug(\"Could execute command\", e);\n-    }\n-  }\n-}"
  },
  {
    "sha": "d3ce20aeb61e5dfeaff21bcb2be7569e8778c229",
    "filename": "eclipse/src/saros/ui/actions/Disposable.java",
    "status": "removed",
    "additions": 0,
    "deletions": 13,
    "changes": 13,
    "blob_url": "https://github.com/saros-project/saros/blob/2b641704fbe8dbdc3cae0f46b98113a556433ae6/eclipse/src/saros/ui/actions/Disposable.java",
    "raw_url": "https://github.com/saros-project/saros/raw/2b641704fbe8dbdc3cae0f46b98113a556433ae6/eclipse/src/saros/ui/actions/Disposable.java",
    "contents_url": "https://api.github.com/repos/saros-project/saros/contents/eclipse/src/saros/ui/actions/Disposable.java?ref=2b641704fbe8dbdc3cae0f46b98113a556433ae6",
    "patch": "@@ -1,13 +0,0 @@\n-package saros.ui.actions;\n-\n-import saros.ui.views.SarosView;\n-\n-public interface Disposable {\n-\n-  /**\n-   * Gets called when the {@link SarosView} is about to being disposed. Actions implementing this\n-   * interface should release all resources and remove all installed listeners that were allocated\n-   * and installed during the lifetime of the action.\n-   */\n-  public void dispose();\n-}"
  },
  {
    "sha": "16669061734bda598f4d6c58fa88a6266c287f46",
    "filename": "eclipse/src/saros/ui/actions/JumpToUserWithWriteAccessPositionAction.java",
    "status": "removed",
    "additions": 0,
    "deletions": 94,
    "changes": 94,
    "blob_url": "https://github.com/saros-project/saros/blob/2b641704fbe8dbdc3cae0f46b98113a556433ae6/eclipse/src/saros/ui/actions/JumpToUserWithWriteAccessPositionAction.java",
    "raw_url": "https://github.com/saros-project/saros/raw/2b641704fbe8dbdc3cae0f46b98113a556433ae6/eclipse/src/saros/ui/actions/JumpToUserWithWriteAccessPositionAction.java",
    "contents_url": "https://api.github.com/repos/saros-project/saros/contents/eclipse/src/saros/ui/actions/JumpToUserWithWriteAccessPositionAction.java?ref=2b641704fbe8dbdc3cae0f46b98113a556433ae6",
    "patch": "@@ -1,94 +0,0 @@\n-package saros.ui.actions;\n-\n-import java.util.List;\n-import org.apache.log4j.Logger;\n-import org.eclipse.jface.action.Action;\n-import org.eclipse.jface.viewers.ISelection;\n-import org.eclipse.ui.ISelectionListener;\n-import org.eclipse.ui.IWorkbenchPart;\n-import org.eclipse.ui.PlatformUI;\n-import saros.SarosPluginContext;\n-import saros.annotations.Component;\n-import saros.editor.EditorManager;\n-import saros.repackaged.picocontainer.annotations.Inject;\n-import saros.session.ISarosSessionManager;\n-import saros.session.User;\n-import saros.ui.ImageManager;\n-import saros.ui.Messages;\n-import saros.ui.util.selection.SelectionUtils;\n-import saros.ui.util.selection.retriever.SelectionRetrieverFactory;\n-import saros.util.ThreadUtils;\n-\n-/** Action which triggers the viewport of the local user to be changed to a local user's one. */\n-@Component(module = \"action\")\n-public class JumpToUserWithWriteAccessPositionAction extends Action implements Disposable {\n-\n-  public static final String ACTION_ID = JumpToUserWithWriteAccessPositionAction.class.getName();\n-\n-  private static final Logger log = Logger.getLogger(JumpToUserWithWriteAccessPositionAction.class);\n-\n-  protected ISelectionListener selectionListener =\n-      new ISelectionListener() {\n-        @Override\n-        public void selectionChanged(IWorkbenchPart part, ISelection selection) {\n-          updateEnablement();\n-        }\n-      };\n-\n-  @Inject protected ISarosSessionManager sessionManager;\n-\n-  @Inject protected EditorManager editorManager;\n-\n-  public JumpToUserWithWriteAccessPositionAction() {\n-    super(Messages.JumpToUserWithWriteAccessPositionAction_title);\n-\n-    setId(ACTION_ID);\n-    setToolTipText(Messages.JumpToUserWithWriteAccessPositionAction_tooltip);\n-    setImageDescriptor(ImageManager.getImageDescriptor(\"icons/elcl16/jump.png\")); // $NON-NLS-1$\n-\n-    SarosPluginContext.initComponent(this);\n-\n-    SelectionUtils.getSelectionService().addSelectionListener(selectionListener);\n-    updateEnablement();\n-  }\n-\n-  public void updateEnablement() {\n-    try {\n-      List<User> participants =\n-          SelectionRetrieverFactory.getSelectionRetriever(User.class).getSelection();\n-      setEnabled(\n-          sessionManager.getSession() != null\n-              && participants.size() == 1\n-              && !participants.get(0).equals(sessionManager.getSession().getLocalUser()));\n-    } catch (NullPointerException e) {\n-      this.setEnabled(false);\n-    } catch (Exception e) {\n-      if (!PlatformUI.getWorkbench().isClosing())\n-        log.error(\"Unexpected error while updating enablement\", e); // $NON-NLS-1$\n-    }\n-  }\n-\n-  /** @review runSafe OK */\n-  @Override\n-  public void run() {\n-    ThreadUtils.runSafeSync(\n-        log,\n-        new Runnable() {\n-          @Override\n-          public void run() {\n-            List<User> participants =\n-                SelectionRetrieverFactory.getSelectionRetriever(User.class).getSelection();\n-            if (participants.size() == 1) {\n-              editorManager.jumpToUser(participants.get(0));\n-            } else {\n-              log.warn(\"More than one participant selected.\"); // $NON-NLS-1$\n-            }\n-          }\n-        });\n-  }\n-\n-  @Override\n-  public void dispose() {\n-    SelectionUtils.getSelectionService().removeSelectionListener(selectionListener);\n-  }\n-}"
  },
  {
    "sha": "f9dcb6f65fdf045f418ab095ec6e5013e0c73c6d",
    "filename": "eclipse/src/saros/ui/actions/LeaveSessionAction.java",
    "status": "removed",
    "additions": 0,
    "deletions": 93,
    "changes": 93,
    "blob_url": "https://github.com/saros-project/saros/blob/2b641704fbe8dbdc3cae0f46b98113a556433ae6/eclipse/src/saros/ui/actions/LeaveSessionAction.java",
    "raw_url": "https://github.com/saros-project/saros/raw/2b641704fbe8dbdc3cae0f46b98113a556433ae6/eclipse/src/saros/ui/actions/LeaveSessionAction.java",
    "contents_url": "https://api.github.com/repos/saros-project/saros/contents/eclipse/src/saros/ui/actions/LeaveSessionAction.java?ref=2b641704fbe8dbdc3cae0f46b98113a556433ae6",
    "patch": "@@ -1,93 +0,0 @@\n-package saros.ui.actions;\n-\n-import org.eclipse.jface.action.Action;\n-import org.eclipse.jface.resource.ImageDescriptor;\n-import org.eclipse.swt.graphics.ImageData;\n-import saros.SarosPluginContext;\n-import saros.annotations.Component;\n-import saros.repackaged.picocontainer.annotations.Inject;\n-import saros.session.ISarosSession;\n-import saros.session.ISarosSessionManager;\n-import saros.session.ISessionLifecycleListener;\n-import saros.session.SessionEndReason;\n-import saros.ui.ImageManager;\n-import saros.ui.Messages;\n-import saros.ui.util.CollaborationUtils;\n-\n-/** Leaves the current Saros session. Is deactivated if there is no running session. */\n-@Component(module = \"action\")\n-public class LeaveSessionAction extends Action implements Disposable {\n-\n-  public static final String ACTION_ID = LeaveSessionAction.class.getName();\n-\n-  @Inject private ISarosSessionManager sessionManager;\n-\n-  private final ISessionLifecycleListener sessionLifecycleListener =\n-      new ISessionLifecycleListener() {\n-        @Override\n-        public void sessionStarted(ISarosSession newSarosSession) {\n-          updateEnablement();\n-        }\n-\n-        @Override\n-        public void sessionEnded(ISarosSession oldSarosSession, SessionEndReason reason) {\n-          updateEnablement();\n-        }\n-      };\n-\n-  public LeaveSessionAction() {\n-    setId(ACTION_ID);\n-    setToolTipText(Messages.LeaveSessionAction_leave_session_tooltip);\n-    setImageDescriptor(\n-        new ImageDescriptor() {\n-          @Override\n-          public ImageData getImageData() {\n-            return ImageManager.ELCL_SESSION_LEAVE.getImageData();\n-          }\n-        });\n-\n-    SarosPluginContext.initComponent(this);\n-    sessionManager.addSessionLifecycleListener(sessionLifecycleListener);\n-    updateEnablement();\n-  }\n-\n-  @Override\n-  public void run() {\n-    CollaborationUtils.leaveSession();\n-  }\n-\n-  @Override\n-  public void dispose() {\n-    sessionManager.removeSessionLifecycleListener(sessionLifecycleListener);\n-  }\n-\n-  private void updateEnablement() {\n-    ISarosSession session = sessionManager.getSession();\n-\n-    if (session == null) {\n-      setEnabled(false);\n-      return;\n-    }\n-\n-    if (session.isHost()) {\n-      setToolTipText(Messages.LeaveSessionAction_stop_session_tooltip);\n-      setImageDescriptor(\n-          new ImageDescriptor() {\n-            @Override\n-            public ImageData getImageData() {\n-              return ImageManager.ELCL_SESSION_TERMINATE.getImageData();\n-            }\n-          });\n-    } else {\n-      setToolTipText(Messages.LeaveSessionAction_leave_session_tooltip);\n-      setImageDescriptor(\n-          new ImageDescriptor() {\n-            @Override\n-            public ImageData getImageData() {\n-              return ImageManager.ELCL_SESSION_LEAVE.getImageData();\n-            }\n-          });\n-    }\n-    setEnabled(true);\n-  }\n-}"
  },
  {
    "sha": "bdd0b7a66c91960e6841be2c993de56cd4fe5470",
    "filename": "eclipse/src/saros/ui/actions/NewContactAction.java",
    "status": "removed",
    "additions": 0,
    "deletions": 50,
    "changes": 50,
    "blob_url": "https://github.com/saros-project/saros/blob/2b641704fbe8dbdc3cae0f46b98113a556433ae6/eclipse/src/saros/ui/actions/NewContactAction.java",
    "raw_url": "https://github.com/saros-project/saros/raw/2b641704fbe8dbdc3cae0f46b98113a556433ae6/eclipse/src/saros/ui/actions/NewContactAction.java",
    "contents_url": "https://api.github.com/repos/saros-project/saros/contents/eclipse/src/saros/ui/actions/NewContactAction.java?ref=2b641704fbe8dbdc3cae0f46b98113a556433ae6",
    "patch": "@@ -1,50 +0,0 @@\n-package saros.ui.actions;\n-\n-import org.eclipse.jface.action.Action;\n-import org.eclipse.jface.resource.ImageDescriptor;\n-import org.eclipse.swt.graphics.ImageData;\n-import saros.SarosPluginContext;\n-import saros.communication.connection.ConnectionHandler;\n-import saros.communication.connection.IConnectionStateListener;\n-import saros.net.ConnectionState;\n-import saros.repackaged.picocontainer.annotations.Inject;\n-import saros.ui.ImageManager;\n-import saros.ui.Messages;\n-import saros.ui.util.WizardUtils;\n-\n-public class NewContactAction extends Action implements Disposable {\n-\n-  public static final String ACTION_ID = NewContactAction.class.getName();\n-\n-  private final IConnectionStateListener connectionListener =\n-      (state, error) -> setEnabled(state == ConnectionState.CONNECTED);\n-\n-  @Inject private ConnectionHandler connectionHandler;\n-\n-  public NewContactAction() {\n-    setId(ACTION_ID);\n-    setToolTipText(Messages.NewContactAction_tooltip);\n-    setImageDescriptor(\n-        new ImageDescriptor() {\n-          @Override\n-          public ImageData getImageData() {\n-            return ImageManager.ELCL_CONTACT_ADD.getImageData();\n-          }\n-        });\n-\n-    SarosPluginContext.initComponent(this);\n-\n-    connectionHandler.addConnectionStateListener(connectionListener);\n-    setEnabled(connectionHandler.isConnected());\n-  }\n-\n-  @Override\n-  public void dispose() {\n-    connectionHandler.removeConnectionStateListener(connectionListener);\n-  }\n-\n-  @Override\n-  public void run() {\n-    WizardUtils.openAddContactWizard();\n-  }\n-}"
  },
  {
    "sha": "5f43b66af608bb08d204f03098b7aee32672c2be",
    "filename": "eclipse/src/saros/ui/actions/OpenChatAction.java",
    "status": "removed",
    "additions": 0,
    "deletions": 98,
    "changes": 98,
    "blob_url": "https://github.com/saros-project/saros/blob/2b641704fbe8dbdc3cae0f46b98113a556433ae6/eclipse/src/saros/ui/actions/OpenChatAction.java",
    "raw_url": "https://github.com/saros-project/saros/raw/2b641704fbe8dbdc3cae0f46b98113a556433ae6/eclipse/src/saros/ui/actions/OpenChatAction.java",
    "contents_url": "https://api.github.com/repos/saros-project/saros/contents/eclipse/src/saros/ui/actions/OpenChatAction.java?ref=2b641704fbe8dbdc3cae0f46b98113a556433ae6",
    "patch": "@@ -1,98 +0,0 @@\n-package saros.ui.actions;\n-\n-import java.util.List;\n-import java.util.Objects;\n-import org.eclipse.jface.action.Action;\n-import org.eclipse.jface.viewers.ISelection;\n-import org.eclipse.ui.ISelectionListener;\n-import org.eclipse.ui.IWorkbenchPart;\n-import saros.SarosPluginContext;\n-import saros.communication.chat.single.SingleUserChatService;\n-import saros.communication.connection.ConnectionHandler;\n-import saros.net.xmpp.JID;\n-import saros.repackaged.picocontainer.annotations.Inject;\n-import saros.session.User;\n-import saros.ui.ImageManager;\n-import saros.ui.Messages;\n-import saros.ui.model.session.UserElement;\n-import saros.ui.util.selection.SelectionUtils;\n-import saros.ui.util.selection.retriever.SelectionRetrieverFactory;\n-import saros.ui.widgets.chat.ChatRoomsComposite;\n-\n-public class OpenChatAction extends Action implements Disposable {\n-\n-  public static final String ACTION_ID = OpenChatAction.class.getName();\n-\n-  @Inject private ConnectionHandler connectionHandler;\n-  @Inject private SingleUserChatService chatService;\n-\n-  private ChatRoomsComposite chatRoomsComposite;\n-\n-  private ISelectionListener selectionListener =\n-      new ISelectionListener() {\n-        @Override\n-        public void selectionChanged(IWorkbenchPart part, ISelection selection) {\n-          updateEnablement();\n-        }\n-      };\n-\n-  public OpenChatAction(ChatRoomsComposite chatRoomsComposite) {\n-    super(Messages.OpenChatAction_MenuItem);\n-    SarosPluginContext.initComponent(this);\n-    this.chatRoomsComposite = chatRoomsComposite;\n-\n-    setId(ACTION_ID);\n-    setImageDescriptor(ImageManager.getImageDescriptor(\"icons/view16/chat_misc.png\"));\n-\n-    SelectionUtils.getSelectionService().addSelectionListener(selectionListener);\n-\n-    updateEnablement();\n-  }\n-\n-  @Override\n-  public void run() {\n-    JID localJID = connectionHandler.getLocalJID();\n-    JID jid = getSelectedJID();\n-\n-    if (Objects.equals(localJID, jid)) return;\n-\n-    chatRoomsComposite.openChat(chatService.createChat(jid), true);\n-  }\n-\n-  @Override\n-  public void dispose() {\n-    SelectionUtils.getSelectionService().removeSelectionListener(selectionListener);\n-  }\n-\n-  private void updateEnablement() {\n-    if (!connectionHandler.isConnected()) {\n-      setEnabled(false);\n-      return;\n-    }\n-\n-    if (getSelectedJID() != null) {\n-      setEnabled(true);\n-    }\n-  }\n-\n-  private JID getSelectedJID() {\n-    List<UserElement> users =\n-        SelectionRetrieverFactory.getSelectionRetriever(UserElement.class).getSelection();\n-    List<JID> contacts = SelectionRetrieverFactory.getSelectionRetriever(JID.class).getSelection();\n-\n-    if (users.size() + contacts.size() == 1) {\n-      if (users.size() == 1) {\n-        User user = users.get(0).getUser();\n-        if (user == null) {\n-          return null;\n-        }\n-\n-        return user.getJID();\n-      } else {\n-        return contacts.get(0);\n-      }\n-    }\n-\n-    return null;\n-  }\n-}"
  },
  {
    "sha": "ee4b7f6d2ce40e220cddc26c50e4b6c69dbab520",
    "filename": "eclipse/src/saros/ui/actions/OpenPreferencesAction.java",
    "status": "removed",
    "additions": 0,
    "deletions": 42,
    "changes": 42,
    "blob_url": "https://github.com/saros-project/saros/blob/2b641704fbe8dbdc3cae0f46b98113a556433ae6/eclipse/src/saros/ui/actions/OpenPreferencesAction.java",
    "raw_url": "https://github.com/saros-project/saros/raw/2b641704fbe8dbdc3cae0f46b98113a556433ae6/eclipse/src/saros/ui/actions/OpenPreferencesAction.java",
    "contents_url": "https://api.github.com/repos/saros-project/saros/contents/eclipse/src/saros/ui/actions/OpenPreferencesAction.java?ref=2b641704fbe8dbdc3cae0f46b98113a556433ae6",
    "patch": "@@ -1,42 +0,0 @@\n-package saros.ui.actions;\n-\n-import org.apache.log4j.Logger;\n-import org.eclipse.jface.action.Action;\n-import org.eclipse.ui.PlatformUI;\n-import org.eclipse.ui.handlers.IHandlerService;\n-import saros.ui.ImageManager;\n-import saros.ui.Messages;\n-\n-public class OpenPreferencesAction extends Action {\n-\n-  public static final String ACTION_ID = OpenPreferencesAction.class.getName();\n-\n-  private static final Logger log = Logger.getLogger(OpenPreferencesAction.class);\n-\n-  public OpenPreferencesAction() {\n-    super(Messages.OpenPreferencesAction_title);\n-\n-    setId(ACTION_ID);\n-    setToolTipText(Messages.OpenPreferencesAction_tooltip);\n-    setImageDescriptor(ImageManager.getImageDescriptor(ImageManager.ELCL_PREFERENCES_OPEN));\n-    setEnabled(true);\n-  }\n-\n-  @Override\n-  public void run() {\n-    IHandlerService service =\n-        PlatformUI.getWorkbench()\n-            .getActiveWorkbenchWindow()\n-            .getActivePage()\n-            .getActivePart()\n-            .getSite()\n-            .getService(IHandlerService.class);\n-    try {\n-      service.executeCommand(\n-          \"saros.ui.commands.OpenSarosPreferences\", //$NON-NLS-1$\n-          null);\n-    } catch (Exception e) {\n-      log.error(\"Could not execute command\", e); // $NON-NLS-1$\n-    }\n-  }\n-}"
  },
  {
    "sha": "7ce6c2616e8c59768c6d21748f7afc66e52d516b",
    "filename": "eclipse/src/saros/ui/actions/RequestSessionInviteAction.java",
    "status": "removed",
    "additions": 0,
    "deletions": 77,
    "changes": 77,
    "blob_url": "https://github.com/saros-project/saros/blob/2b641704fbe8dbdc3cae0f46b98113a556433ae6/eclipse/src/saros/ui/actions/RequestSessionInviteAction.java",
    "raw_url": "https://github.com/saros-project/saros/raw/2b641704fbe8dbdc3cae0f46b98113a556433ae6/eclipse/src/saros/ui/actions/RequestSessionInviteAction.java",
    "contents_url": "https://api.github.com/repos/saros-project/saros/contents/eclipse/src/saros/ui/actions/RequestSessionInviteAction.java?ref=2b641704fbe8dbdc3cae0f46b98113a556433ae6",
    "patch": "@@ -1,77 +0,0 @@\n-package saros.ui.actions;\n-\n-import java.util.List;\n-import org.eclipse.jface.action.Action;\n-import org.eclipse.jface.viewers.ISelection;\n-import org.eclipse.ui.ISelectionListener;\n-import org.eclipse.ui.IWorkbenchPart;\n-import saros.SarosPluginContext;\n-import saros.communication.extensions.JoinSessionRequestExtension;\n-import saros.net.ITransmitter;\n-import saros.net.xmpp.JID;\n-import saros.repackaged.picocontainer.annotations.Inject;\n-import saros.session.ISarosSession;\n-import saros.session.ISarosSessionManager;\n-import saros.ui.Messages;\n-import saros.ui.util.selection.SelectionUtils;\n-import saros.ui.util.selection.retriever.SelectionRetrieverFactory;\n-\n-/**\n- * Action for requesting an invitation to a session from a contact.\n- *\n- * <p>This currently relies on the fact, that only Saros/S has a working JoinSessionRequestHandler.\n- * To make this feature generic in the future we need to add another XMPP namespace\n- */\n-public class RequestSessionInviteAction extends Action implements Disposable {\n-\n-  @Inject private ISarosSessionManager sessionManager;\n-  @Inject private ITransmitter transmitter;\n-\n-  private ISelectionListener selectionListener =\n-      new ISelectionListener() {\n-        @Override\n-        public void selectionChanged(IWorkbenchPart part, ISelection selection) {\n-          updateActionState();\n-        }\n-      };\n-\n-  public static final String ACTION_ID = RequestSessionInviteAction.class.getName();\n-\n-  public RequestSessionInviteAction() {\n-    super(Messages.RequestSessionInviteAction_title);\n-    setId(ACTION_ID);\n-    SarosPluginContext.initComponent(this);\n-    SelectionUtils.getSelectionService().addSelectionListener(selectionListener);\n-    updateActionState();\n-  }\n-\n-  @Override\n-  public void run() {\n-    ISarosSession session = sessionManager.getSession();\n-    JID jid = getSelectedJID();\n-    if (session != null || jid == null) {\n-      return;\n-    }\n-\n-    transmitter.sendPacketExtension(\n-        jid, JoinSessionRequestExtension.PROVIDER.create(new JoinSessionRequestExtension()));\n-  }\n-\n-  private JID getSelectedJID() {\n-    List<JID> selected = SelectionRetrieverFactory.getSelectionRetriever(JID.class).getSelection();\n-\n-    if (selected.size() != 1) return null;\n-\n-    return selected.get(0);\n-  }\n-\n-  private void updateActionState() {\n-    ISarosSession session = sessionManager.getSession();\n-    setEnabled(session == null && getSelectedJID() != null);\n-  }\n-\n-  @Override\n-  public void dispose() {\n-    SelectionUtils.getSelectionService().removeSelectionListener(selectionListener);\n-  }\n-}"
  },
  {
    "sha": "beb4c5e54c63432b63e0aa895bcf72e6dff0b360",
    "filename": "eclipse/src/saros/ui/actions/SendFileAction.java",
    "status": "removed",
    "additions": 0,
    "deletions": 86,
    "changes": 86,
    "blob_url": "https://github.com/saros-project/saros/blob/2b641704fbe8dbdc3cae0f46b98113a556433ae6/eclipse/src/saros/ui/actions/SendFileAction.java",
    "raw_url": "https://github.com/saros-project/saros/raw/2b641704fbe8dbdc3cae0f46b98113a556433ae6/eclipse/src/saros/ui/actions/SendFileAction.java",
    "contents_url": "https://api.github.com/repos/saros-project/saros/contents/eclipse/src/saros/ui/actions/SendFileAction.java?ref=2b641704fbe8dbdc3cae0f46b98113a556433ae6",
    "patch": "@@ -1,86 +0,0 @@\n-package saros.ui.actions;\n-\n-import java.io.File;\n-import java.util.List;\n-import org.eclipse.core.runtime.jobs.Job;\n-import org.eclipse.jface.action.Action;\n-import org.eclipse.swt.SWT;\n-import org.eclipse.swt.widgets.FileDialog;\n-import org.eclipse.ui.ISelectionListener;\n-import org.eclipse.ui.ISharedImages;\n-import org.eclipse.ui.PlatformUI;\n-import saros.net.xmpp.JID;\n-import saros.net.xmpp.contact.XMPPContact;\n-import saros.session.User;\n-import saros.ui.Messages;\n-import saros.ui.jobs.OutgoingFileTransferJob;\n-import saros.ui.util.SWTUtils;\n-import saros.ui.util.selection.SelectionUtils;\n-import saros.ui.util.selection.retriever.SelectionRetrieverFactory;\n-\n-/** Action for sending a file over XMPP. */\n-public class SendFileAction extends Action implements Disposable {\n-\n-  public static final String ACTION_ID = SendFileAction.class.getName();\n-\n-  private ISelectionListener selectionListener = (part, selection) -> updateEnablement();\n-\n-  public SendFileAction() {\n-    super(Messages.SendFileAction_title);\n-\n-    setImageDescriptor(\n-        PlatformUI.getWorkbench().getSharedImages().getImageDescriptor(ISharedImages.IMG_OBJ_FILE));\n-    setId(ACTION_ID);\n-    setToolTipText(Messages.SendFileAction_tooltip);\n-\n-    SelectionUtils.getSelectionService().addSelectionListener(selectionListener);\n-\n-    updateEnablement();\n-  }\n-\n-  @Override\n-  public void run() {\n-    JID jid = getSelectedJID();\n-    if (jid == null) return;\n-\n-    FileDialog fd = new FileDialog(SWTUtils.getShell(), SWT.OPEN);\n-    fd.setText(Messages.SendFileAction_filedialog_text);\n-\n-    String filename = fd.open();\n-    if (filename == null) return;\n-\n-    File file = new File(filename);\n-    if (file.isDirectory()) return;\n-\n-    Job job = new OutgoingFileTransferJob(jid, file);\n-    job.setUser(true);\n-    job.schedule();\n-  }\n-\n-  @Override\n-  public void dispose() {\n-    SelectionUtils.getSelectionService().removeSelectionListener(selectionListener);\n-  }\n-\n-  private void updateEnablement() {\n-    setEnabled(getSelectedJID() != null);\n-  }\n-\n-  private JID getSelectedJID() {\n-    List<User> sessionUsers =\n-        SelectionRetrieverFactory.getSelectionRetriever(User.class).getSelection();\n-\n-    List<XMPPContact> contacts =\n-        SelectionRetrieverFactory.getSelectionRetriever(XMPPContact.class).getSelection();\n-\n-    // currently only one transfer per click (maybe improved later)\n-    if (contacts.size() + sessionUsers.size() != 1) return null;\n-\n-    if (sessionUsers.size() == 1) {\n-      if (sessionUsers.get(0).isLocal()) return null;\n-      return sessionUsers.get(0).getJID();\n-    }\n-\n-    return contacts.get(0).getOnlineJid().orElse(null);\n-  }\n-}"
  },
  {
    "sha": "167ddf23c7d4d023246364e34cde19e5e60dc233",
    "filename": "eclipse/src/saros/ui/actions/SkypeAction.java",
    "status": "removed",
    "additions": 0,
    "deletions": 97,
    "changes": 97,
    "blob_url": "https://github.com/saros-project/saros/blob/2b641704fbe8dbdc3cae0f46b98113a556433ae6/eclipse/src/saros/ui/actions/SkypeAction.java",
    "raw_url": "https://github.com/saros-project/saros/raw/2b641704fbe8dbdc3cae0f46b98113a556433ae6/eclipse/src/saros/ui/actions/SkypeAction.java",
    "contents_url": "https://api.github.com/repos/saros-project/saros/contents/eclipse/src/saros/ui/actions/SkypeAction.java?ref=2b641704fbe8dbdc3cae0f46b98113a556433ae6",
    "patch": "@@ -1,97 +0,0 @@\n-package saros.ui.actions;\n-\n-import java.util.List;\n-import org.eclipse.jface.action.Action;\n-import org.eclipse.jface.resource.ImageDescriptor;\n-import org.eclipse.jface.text.Region;\n-import org.eclipse.jface.text.hyperlink.URLHyperlink;\n-import org.eclipse.jface.viewers.ISelection;\n-import org.eclipse.swt.graphics.ImageData;\n-import org.eclipse.ui.ISelectionListener;\n-import org.eclipse.ui.IWorkbenchPart;\n-import saros.SarosPluginContext;\n-import saros.communication.SkypeManager;\n-import saros.net.xmpp.contact.XMPPContact;\n-import saros.repackaged.picocontainer.annotations.Inject;\n-import saros.ui.ImageManager;\n-import saros.ui.Messages;\n-import saros.ui.util.selection.SelectionUtils;\n-import saros.ui.util.selection.retriever.SelectionRetrieverFactory;\n-\n-/** An action for starting a Skype Audio Session to other contacts. */\n-public class SkypeAction extends Action implements Disposable {\n-\n-  public static final String ACTION_ID = SkypeAction.class.getName();\n-\n-  private ISelectionListener selectionListener =\n-      new ISelectionListener() {\n-        @Override\n-        public void selectionChanged(IWorkbenchPart part, ISelection selection) {\n-          updateEnablement();\n-        }\n-      };\n-\n-  @Inject private SkypeManager skypeManager;\n-\n-  public SkypeAction() {\n-    super(Messages.SkypeAction_title);\n-\n-    SarosPluginContext.initComponent(this);\n-\n-    setId(ACTION_ID);\n-    setToolTipText(Messages.SkypeAction_tooltip);\n-    setImageDescriptor(\n-        new ImageDescriptor() {\n-          @Override\n-          public ImageData getImageData() {\n-            return ImageManager.ELCL_CONTACT_SKYPE_CALL.getImageData();\n-          }\n-        });\n-\n-    SelectionUtils.getSelectionService().addSelectionListener(selectionListener);\n-    updateEnablement();\n-  }\n-\n-  private void updateEnablement() {\n-\n-    setEnabled(false);\n-\n-    final List<XMPPContact> contacts =\n-        SelectionRetrieverFactory.getSelectionRetriever(XMPPContact.class).getSelection();\n-\n-    if (contacts.size() != 1) return;\n-\n-    final String skypeName = skypeManager.getSkypeName(contacts.get(0));\n-\n-    setEnabled(\n-        SkypeManager.isSkypeAvailable(false)\n-            && skypeName != null\n-            && !SkypeManager.isEchoService(skypeName));\n-  }\n-\n-  @Override\n-  public void run() {\n-\n-    final List<XMPPContact> participants =\n-        SelectionRetrieverFactory.getSelectionRetriever(XMPPContact.class).getSelection();\n-\n-    if (participants.size() != 1) return;\n-\n-    final String skypeName = skypeManager.getSkypeName(participants.get(0));\n-\n-    if (skypeName == null || SkypeManager.isEchoService(skypeName)) return;\n-\n-    final String uri = SkypeManager.getAudioCallUri(skypeName);\n-\n-    if (uri == null) return;\n-\n-    final URLHyperlink link = new URLHyperlink(new Region(0, 0), uri);\n-\n-    link.open();\n-  }\n-\n-  @Override\n-  public void dispose() {\n-    SelectionUtils.getSelectionService().removeSelectionListener(selectionListener);\n-  }\n-}"
  },
  {
    "sha": "d46ef64b81aa93b3081ea1811dab33d50b3a01f1",
    "filename": "eclipse/src/saros/ui/actions/package-info.java",
    "status": "removed",
    "additions": 0,
    "deletions": 39,
    "changes": 39,
    "blob_url": "https://github.com/saros-project/saros/blob/2b641704fbe8dbdc3cae0f46b98113a556433ae6/eclipse/src/saros/ui/actions/package-info.java",
    "raw_url": "https://github.com/saros-project/saros/raw/2b641704fbe8dbdc3cae0f46b98113a556433ae6/eclipse/src/saros/ui/actions/package-info.java",
    "contents_url": "https://api.github.com/repos/saros-project/saros/contents/eclipse/src/saros/ui/actions/package-info.java?ref=2b641704fbe8dbdc3cae0f46b98113a556433ae6",
    "patch": "@@ -1,39 +0,0 @@\n-/**\n- *\n- *\n- * <h1>Actions Overview</h1>\n- *\n- * This package contains all possible actions in the saros view which a user can initiate.\n- *\n- * <p>This package comprises of the following subpackages:\n- *\n- * <ul>\n- *   <li>the {@link saros.ui.actions.ChangeColorAction} allows the user to change his personal color\n- *       which is also shown to all other session users.\n- *   <li>the {@link saros.ui.actions.ChangeXMPPAccountAction} allows the user to switch between\n- *       several accounts\n- *   <li>the {@link saros.ui.actions.ConsistencyAction} calls {@link\n- *       saros.concurrent.watchdog.ConsistencyWatchdogClient} and if an inconsistency is found, the\n- *       Action gives you the possibility to resolve it.\n- *   <li>the {@link saros.ui.actions.DeleteContactAction} allows the user to delete other contacts\n- *       from his contact list.\n- *   <li>the {@link saros.ui.actions.FollowModeAction} allows the user to follow the first person in\n- *       the session which has {@link saros.session.User.Permission#WRITE_ACCESS}. Activated through\n- *       toolbar-button.\n- *   <li>the {@link saros.ui.actions.FollowThisPersonAction} allow to follow a selected session\n- *       user.\n- *   <li>the {@link saros.ui.actions.ChangeWriteAccessAction} is responsible for grant or revoke\n- *       {@link saros.session.User.Permission#WRITE_ACCESS} to a non-host session user.\n- *   <li>the {@link saros.ui.actions.JumpToUserWithWriteAccessPositionAction} allows the user to\n- *       jump to a selected session user current viewpoint\n- *   <li>the {@link saros.ui.actions.LeaveSessionAction} allows the user to leave a session.\n- *   <li>the {@link saros.ui.actions.NewContactAction} allows to add a new contact to the contact\n- *       list.\n- *   <li>the {@link saros.ui.actions.RenameContactAction} allows to rename a contact in the contact\n- *       list.\n- *   <li>the {@link saros.ui.actions.SendFileAction} allows a user to send a file to a session user.\n- *   <li>the {@link saros.ui.actions.SkypeAction} calls the {@link saros.communication.SkypeManager}\n- *       to call a contact for Skype.\n- * </ul>\n- */\n-package saros.ui.actions;"
  },
  {
    "sha": "f7b27fed3c60488a4eef1eafc5c94d1220d25f33",
    "filename": "eclipse/src/saros/ui/command_handlers/AddContactHandler.java",
    "status": "removed",
    "additions": 0,
    "deletions": 15,
    "changes": 15,
    "blob_url": "https://github.com/saros-project/saros/blob/2b641704fbe8dbdc3cae0f46b98113a556433ae6/eclipse/src/saros/ui/command_handlers/AddContactHandler.java",
    "raw_url": "https://github.com/saros-project/saros/raw/2b641704fbe8dbdc3cae0f46b98113a556433ae6/eclipse/src/saros/ui/command_handlers/AddContactHandler.java",
    "contents_url": "https://api.github.com/repos/saros-project/saros/contents/eclipse/src/saros/ui/command_handlers/AddContactHandler.java?ref=2b641704fbe8dbdc3cae0f46b98113a556433ae6",
    "patch": "@@ -1,15 +0,0 @@\n-package saros.ui.command_handlers;\n-\n-import org.eclipse.core.commands.AbstractHandler;\n-import org.eclipse.core.commands.ExecutionEvent;\n-import org.eclipse.core.commands.ExecutionException;\n-import saros.ui.util.WizardUtils;\n-\n-public class AddContactHandler extends AbstractHandler {\n-\n-  @Override\n-  public Object execute(ExecutionEvent event) throws ExecutionException {\n-    WizardUtils.openAddContactWizard();\n-    return null;\n-  }\n-}"
  },
  {
    "sha": "62f228759bdd8809c0d8d5b90b55b75e3e771b8f",
    "filename": "eclipse/src/saros/ui/command_handlers/AddXMPPAccountHandler.java",
    "status": "removed",
    "additions": 0,
    "deletions": 15,
    "changes": 15,
    "blob_url": "https://github.com/saros-project/saros/blob/2b641704fbe8dbdc3cae0f46b98113a556433ae6/eclipse/src/saros/ui/command_handlers/AddXMPPAccountHandler.java",
    "raw_url": "https://github.com/saros-project/saros/raw/2b641704fbe8dbdc3cae0f46b98113a556433ae6/eclipse/src/saros/ui/command_handlers/AddXMPPAccountHandler.java",
    "contents_url": "https://api.github.com/repos/saros-project/saros/contents/eclipse/src/saros/ui/command_handlers/AddXMPPAccountHandler.java?ref=2b641704fbe8dbdc3cae0f46b98113a556433ae6",
    "patch": "@@ -1,15 +0,0 @@\n-package saros.ui.command_handlers;\n-\n-import org.eclipse.core.commands.AbstractHandler;\n-import org.eclipse.core.commands.ExecutionEvent;\n-import org.eclipse.core.commands.ExecutionException;\n-import saros.ui.util.WizardUtils;\n-\n-public class AddXMPPAccountHandler extends AbstractHandler {\n-\n-  @Override\n-  public Object execute(ExecutionEvent event) throws ExecutionException {\n-    WizardUtils.openAddXMPPAccountWizard();\n-    return null;\n-  }\n-}"
  },
  {
    "sha": "eee81f82062e79b12e0fb506212b26f79af3058e",
    "filename": "eclipse/src/saros/ui/command_handlers/CreateXMPPAccountHandler.java",
    "status": "removed",
    "additions": 0,
    "deletions": 17,
    "changes": 17,
    "blob_url": "https://github.com/saros-project/saros/blob/2b641704fbe8dbdc3cae0f46b98113a556433ae6/eclipse/src/saros/ui/command_handlers/CreateXMPPAccountHandler.java",
    "raw_url": "https://github.com/saros-project/saros/raw/2b641704fbe8dbdc3cae0f46b98113a556433ae6/eclipse/src/saros/ui/command_handlers/CreateXMPPAccountHandler.java",
    "contents_url": "https://api.github.com/repos/saros-project/saros/contents/eclipse/src/saros/ui/command_handlers/CreateXMPPAccountHandler.java?ref=2b641704fbe8dbdc3cae0f46b98113a556433ae6",
    "patch": "@@ -1,17 +0,0 @@\n-package saros.ui.command_handlers;\n-\n-import org.eclipse.core.commands.AbstractHandler;\n-import org.eclipse.core.commands.ExecutionEvent;\n-import org.eclipse.core.commands.ExecutionException;\n-import saros.ui.util.WizardUtils;\n-\n-public class CreateXMPPAccountHandler extends AbstractHandler {\n-\n-  @Override\n-  public Object execute(ExecutionEvent event) throws ExecutionException {\n-\n-    WizardUtils.openCreateXMPPAccountWizard(true);\n-\n-    return null;\n-  }\n-}"
  },
  {
    "sha": "9dc9a9cc1bb29b6616f08a49a29b47b7a60557a3",
    "filename": "eclipse/src/saros/ui/command_handlers/GettingStartedHandler.java",
    "status": "removed",
    "additions": 0,
    "deletions": 18,
    "changes": 18,
    "blob_url": "https://github.com/saros-project/saros/blob/2b641704fbe8dbdc3cae0f46b98113a556433ae6/eclipse/src/saros/ui/command_handlers/GettingStartedHandler.java",
    "raw_url": "https://github.com/saros-project/saros/raw/2b641704fbe8dbdc3cae0f46b98113a556433ae6/eclipse/src/saros/ui/command_handlers/GettingStartedHandler.java",
    "contents_url": "https://api.github.com/repos/saros-project/saros/contents/eclipse/src/saros/ui/command_handlers/GettingStartedHandler.java?ref=2b641704fbe8dbdc3cae0f46b98113a556433ae6",
    "patch": "@@ -1,18 +0,0 @@\n-package saros.ui.command_handlers;\n-\n-import org.eclipse.core.commands.AbstractHandler;\n-import org.eclipse.core.commands.ExecutionEvent;\n-import org.eclipse.core.commands.ExecutionException;\n-import saros.ui.util.SWTUtils;\n-\n-public class GettingStartedHandler extends AbstractHandler {\n-\n-  @Override\n-  public Object execute(ExecutionEvent event) throws ExecutionException {\n-\n-    SWTUtils.openInternalBrowser(\n-        \"https://www.saros-project.org/documentation/getting-started.html\", \"Welcome to Saros\");\n-\n-    return null;\n-  }\n-}"
  },
  {
    "sha": "1ff118f79de08e4abda7ce246e202701e5544e7b",
    "filename": "eclipse/src/saros/ui/command_handlers/OpenSarosPreferencesHandler.java",
    "status": "removed",
    "additions": 0,
    "deletions": 19,
    "changes": 19,
    "blob_url": "https://github.com/saros-project/saros/blob/2b641704fbe8dbdc3cae0f46b98113a556433ae6/eclipse/src/saros/ui/command_handlers/OpenSarosPreferencesHandler.java",
    "raw_url": "https://github.com/saros-project/saros/raw/2b641704fbe8dbdc3cae0f46b98113a556433ae6/eclipse/src/saros/ui/command_handlers/OpenSarosPreferencesHandler.java",
    "contents_url": "https://api.github.com/repos/saros-project/saros/contents/eclipse/src/saros/ui/command_handlers/OpenSarosPreferencesHandler.java?ref=2b641704fbe8dbdc3cae0f46b98113a556433ae6",
    "patch": "@@ -1,19 +0,0 @@\n-package saros.ui.command_handlers;\n-\n-import org.eclipse.core.commands.AbstractHandler;\n-import org.eclipse.core.commands.ExecutionEvent;\n-import org.eclipse.core.commands.ExecutionException;\n-import org.eclipse.jface.preference.PreferenceDialog;\n-import org.eclipse.ui.dialogs.PreferencesUtil;\n-\n-public class OpenSarosPreferencesHandler extends AbstractHandler {\n-\n-  @Override\n-  public Object execute(ExecutionEvent event) throws ExecutionException {\n-    PreferenceDialog pref =\n-        PreferencesUtil.createPreferenceDialogOn(null, \"saros.preferences\", null, null);\n-    if (pref != null) pref.open();\n-\n-    return null;\n-  }\n-}"
  },
  {
    "sha": "0b62b50e27cc4932a5f00b918b8a59ca4a7f26c9",
    "filename": "eclipse/src/saros/ui/command_handlers/SessionAddContactsHandler.java",
    "status": "removed",
    "additions": 0,
    "deletions": 22,
    "changes": 22,
    "blob_url": "https://github.com/saros-project/saros/blob/2b641704fbe8dbdc3cae0f46b98113a556433ae6/eclipse/src/saros/ui/command_handlers/SessionAddContactsHandler.java",
    "raw_url": "https://github.com/saros-project/saros/raw/2b641704fbe8dbdc3cae0f46b98113a556433ae6/eclipse/src/saros/ui/command_handlers/SessionAddContactsHandler.java",
    "contents_url": "https://api.github.com/repos/saros-project/saros/contents/eclipse/src/saros/ui/command_handlers/SessionAddContactsHandler.java?ref=2b641704fbe8dbdc3cae0f46b98113a556433ae6",
    "patch": "@@ -1,22 +0,0 @@\n-package saros.ui.command_handlers;\n-\n-import org.eclipse.core.commands.AbstractHandler;\n-import org.eclipse.core.commands.ExecutionEvent;\n-import org.eclipse.core.commands.ExecutionException;\n-import saros.net.xmpp.JID;\n-import saros.session.ISarosSession;\n-import saros.ui.util.WizardUtils;\n-import saros.ui.wizards.AddResourcesToSessionWizard;\n-\n-/**\n- * Handles the addition of {@link JID}s that must explicitly be selected in the opening {@link\n- * AddResourcesToSessionWizard} to the running {@link ISarosSession}.\n- */\n-public class SessionAddContactsHandler extends AbstractHandler {\n-\n-  @Override\n-  public Object execute(ExecutionEvent event) throws ExecutionException {\n-    WizardUtils.openAddContactsToSessionWizard();\n-    return null;\n-  }\n-}"
  },
  {
    "sha": "81f60f25647d398182e030651fe3c7762b831fd4",
    "filename": "eclipse/src/saros/ui/command_handlers/SessionAddResourcesHandler.java",
    "status": "removed",
    "additions": 0,
    "deletions": 25,
    "changes": 25,
    "blob_url": "https://github.com/saros-project/saros/blob/2b641704fbe8dbdc3cae0f46b98113a556433ae6/eclipse/src/saros/ui/command_handlers/SessionAddResourcesHandler.java",
    "raw_url": "https://github.com/saros-project/saros/raw/2b641704fbe8dbdc3cae0f46b98113a556433ae6/eclipse/src/saros/ui/command_handlers/SessionAddResourcesHandler.java",
    "contents_url": "https://api.github.com/repos/saros-project/saros/contents/eclipse/src/saros/ui/command_handlers/SessionAddResourcesHandler.java?ref=2b641704fbe8dbdc3cae0f46b98113a556433ae6",
    "patch": "@@ -1,25 +0,0 @@\n-package saros.ui.command_handlers;\n-\n-import org.eclipse.core.commands.AbstractHandler;\n-import org.eclipse.core.commands.ExecutionEvent;\n-import org.eclipse.core.commands.ExecutionException;\n-import org.eclipse.core.resources.IResource;\n-import saros.session.ISarosSession;\n-import saros.ui.util.WizardUtils;\n-import saros.ui.wizards.AddResourcesToSessionWizard;\n-\n-/**\n- * Handles the addition of {@link IResource}s that must explicitly be selected in the opening {@link\n- * AddResourcesToSessionWizard} to the running {@link ISarosSession}.\n- *\n- * <p>This class is used to define the behavior of the saros menu entry to add reference points to a\n- * running session.\n- */\n-public class SessionAddResourcesHandler extends AbstractHandler {\n-\n-  @Override\n-  public Object execute(ExecutionEvent event) throws ExecutionException {\n-    WizardUtils.openAddResourcesToSessionWizard(null);\n-    return null;\n-  }\n-}"
  },
  {
    "sha": "3c1335fb0c3d729385fba01d4cb15607bc20c68b",
    "filename": "eclipse/src/saros/ui/command_handlers/SessionAddSelectedContactsHandler.java",
    "status": "removed",
    "additions": 0,
    "deletions": 23,
    "changes": 23,
    "blob_url": "https://github.com/saros-project/saros/blob/2b641704fbe8dbdc3cae0f46b98113a556433ae6/eclipse/src/saros/ui/command_handlers/SessionAddSelectedContactsHandler.java",
    "raw_url": "https://github.com/saros-project/saros/raw/2b641704fbe8dbdc3cae0f46b98113a556433ae6/eclipse/src/saros/ui/command_handlers/SessionAddSelectedContactsHandler.java",
    "contents_url": "https://api.github.com/repos/saros-project/saros/contents/eclipse/src/saros/ui/command_handlers/SessionAddSelectedContactsHandler.java?ref=2b641704fbe8dbdc3cae0f46b98113a556433ae6",
    "patch": "@@ -1,23 +0,0 @@\n-package saros.ui.command_handlers;\n-\n-import java.util.List;\n-import org.eclipse.core.commands.AbstractHandler;\n-import org.eclipse.core.commands.ExecutionEvent;\n-import org.eclipse.core.commands.ExecutionException;\n-import saros.net.xmpp.JID;\n-import saros.session.ISarosSession;\n-import saros.ui.util.CollaborationUtils;\n-import saros.ui.util.selection.retriever.SelectionRetrieverFactory;\n-\n-/** Handles the addition of selected {@link JID}s to the running {@link ISarosSession}. */\n-public class SessionAddSelectedContactsHandler extends AbstractHandler {\n-\n-  @Override\n-  public Object execute(ExecutionEvent event) throws ExecutionException {\n-\n-    List<JID> jids = SelectionRetrieverFactory.getSelectionRetriever(JID.class).getSelection();\n-\n-    CollaborationUtils.addContactsToSession(jids);\n-    return null;\n-  }\n-}"
  }
]
