[
  {
    "sha": "6913a36f5310e5b530c4f149ef0bed6d5a7ea699",
    "filename": "src/main/java/emt/item/ItemOneRing.java",
    "status": "modified",
    "additions": 31,
    "deletions": 14,
    "changes": 45,
    "blob_url": "https://github.com/GTNewHorizons/Electro-Magic-Tools/blob/42271279c4f4db5f139f165a4dd5c9c3617f98a6/src/main/java/emt/item/ItemOneRing.java",
    "raw_url": "https://github.com/GTNewHorizons/Electro-Magic-Tools/raw/42271279c4f4db5f139f165a4dd5c9c3617f98a6/src/main/java/emt/item/ItemOneRing.java",
    "contents_url": "https://api.github.com/repos/GTNewHorizons/Electro-Magic-Tools/contents/src/main/java/emt/item/ItemOneRing.java?ref=42271279c4f4db5f139f165a4dd5c9c3617f98a6",
    "patch": "@@ -1,7 +1,9 @@\n package emt.item;\n \n import baubles.api.BaubleType;\n+import baubles.api.BaublesApi;\n import baubles.api.IBauble;\n+import baubles.common.container.InventoryBaubles;\n import cpw.mods.fml.relauncher.Side;\n import cpw.mods.fml.relauncher.SideOnly;\n import emt.EMT;\n@@ -179,20 +181,35 @@ else if (corruption > 300 && corruption < 1400 && random.nextInt(100) == 0) {\n                     getItemWarpLevel(stack, true);\n                     ((EntityPlayer) player).addChatMessage(new ChatComponentText(EMTTextHelper.PURPLE + \"The Ring suddenly starts to glow purple\"));\n                 }\n-\t\tif (random.nextInt(300) == 0) { //randomly every 5 minutes\n-\t\t    ThaumcraftApiHelper.addWarpToPlayer((EntityPlayer) player, 1, false); //adds 1 perm warp\n-\t\t    ThaumcraftApiHelper.addStickyWarpToPlayer((EntityPlayer) player, random.nextInt(1)); //adds 0-1 sticky warp\n-\t\t    ((EntityPlayer) player).addChatMessage(new ChatComponentText(EMTTextHelper.PURPLE + \"Your body suddenly starts to glow purple\"));\n-\t\t}\n-\t\tif (corruption >= 3600) { //if you wear it for more than an hour total\n-\t\t    if (random.nextInt(300) == 0) {\n-\t\t        ThaumcraftApiHelper.addWarpToPlayer((EntityPlayer) player, 5 + random.nextInt(5), false); //adds 5-10 perm warp\n-\t\t        ThaumcraftApiHelper.addStickyWarpToPlayer((EntityPlayer) player, 5 + random.nextInt(5)); //adds 5-10 sticky warp\n-\t\t\tThaumcraftApiHelper.addWarpToPlayer((EntityPlayer) player, 10 + random.nextInt(40), true); //adds 10-50 temp warp, but this is ultra easy to remove\n-\t\t        ((EntityPlayer) player).addChatMessage(new ChatComponentText(EMTTextHelper.PURPLE + \"Your body resonates with the Ring and suddenly starts to glow purple ominously\"));\n-\t\t    }\n-\t\t}\n-            }\n+                if (random.nextInt(300) == 0) { //randomly every 5 minutes\n+                \tThaumcraftApiHelper.addWarpToPlayer((EntityPlayer) player, 1, false); //adds 1 perm warp\n+                \tThaumcraftApiHelper.addStickyWarpToPlayer((EntityPlayer) player, random.nextInt(1)); //adds 0-1 sticky warp\n+                \t((EntityPlayer) player).addChatMessage(new ChatComponentText(EMTTextHelper.PURPLE + \"Your body suddenly starts to glow purple\"));\n+                }\n+                if (corruption >= 3600) { //if you wear it for more than an hour total\n+                \tif (random.nextInt(300) == 0) {\n+                \t\tThaumcraftApiHelper.addWarpToPlayer((EntityPlayer) player, 5 + random.nextInt(5), false); //adds 5-10 perm warp\n+                \t\tThaumcraftApiHelper.addStickyWarpToPlayer((EntityPlayer) player, 5 + random.nextInt(5)); //adds 5-10 sticky warp\n+                \t\tThaumcraftApiHelper.addWarpToPlayer((EntityPlayer) player, 10 + random.nextInt(40), true); //adds 10-50 temp warp, but this is ultra easy to remove\n+                \t\t((EntityPlayer) player).addChatMessage(new ChatComponentText(EMTTextHelper.PURPLE + \"Your body resonates with the Ring and suddenly starts to glow purple ominously\"));\n+                \t}\n+                }\n+                if (stack.getTagCompound().getInteger(NBT_TAG_WARP) >= 1000) {//If warp on ring is more than this. Should be about 27.7 hours.\n+            \t\t((EntityPlayer) player).addChatMessage(new ChatComponentText(EMTTextHelper.RED + \"Sauron has noticed you! He's confiscated his ring.\"));\n+            \t\tplayer.setInvisible(false);\n+            \t\tif (!((EntityPlayer) player).capabilities.isCreativeMode)\n+                        ((EntityPlayer) player).capabilities.disableDamage = false;\n+\n+                    for (int i = 1; i < 3; i++) {\n+                    \tItemStack baubleItem = ((InventoryBaubles)BaublesApi.getBaubles((EntityPlayer) player)).getStackInSlot(i);\n+                    \tif(baubleItem != null) {\n+                    \t\tItem item = baubleItem.getItem();\n+                    \t\tif(item instanceof ItemOneRing)\n+                    \t\t\t((InventoryBaubles)BaublesApi.getBaubles((EntityPlayer) player)).setInventorySlotContents(i, null);\n+                    \t}\n+                    }\n+                }\n+            } \n         }\n         forgeTag.setInteger(NBT_TAG_MIND_CORRUPTION, ++corruption);\n         //tag.setTag( NBT_TAG_FORGE_DATA, forgeTag);"
  }
]
