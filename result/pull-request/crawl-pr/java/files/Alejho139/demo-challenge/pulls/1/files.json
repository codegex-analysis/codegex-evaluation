[
  {
    "sha": "0ac3a8c5c72829de4f46845fae77b46757880979",
    "filename": ".DS_Store",
    "status": "modified",
    "additions": 0,
    "deletions": 0,
    "changes": 0,
    "blob_url": "https://github.com/Alejho139/demo-challenge/blob/be28606b7a14ba3d9c956a7bea793e8a638ed305/.DS_Store",
    "raw_url": "https://github.com/Alejho139/demo-challenge/raw/be28606b7a14ba3d9c956a7bea793e8a638ed305/.DS_Store",
    "contents_url": "https://api.github.com/repos/Alejho139/demo-challenge/contents/.DS_Store?ref=be28606b7a14ba3d9c956a7bea793e8a638ed305"
  },
  {
    "sha": "9a0c9661e054524c8409ad320f9af561fde011c1",
    "filename": "pom.xml",
    "status": "modified",
    "additions": 6,
    "deletions": 1,
    "changes": 7,
    "blob_url": "https://github.com/Alejho139/demo-challenge/blob/be28606b7a14ba3d9c956a7bea793e8a638ed305/pom.xml",
    "raw_url": "https://github.com/Alejho139/demo-challenge/raw/be28606b7a14ba3d9c956a7bea793e8a638ed305/pom.xml",
    "contents_url": "https://api.github.com/repos/Alejho139/demo-challenge/contents/pom.xml?ref=be28606b7a14ba3d9c956a7bea793e8a638ed305",
    "patch": "@@ -25,7 +25,12 @@\n \t\t\t<groupId>org.springframework.boot</groupId>\n \t\t\t<artifactId>spring-boot-starter-webflux</artifactId>\n \t\t</dependency>\n-\n+\t\t<dependency>\n+\t\t\t<groupId>junit</groupId>\n+\t\t\t<artifactId>junit</artifactId>\n+\t\t\t<version>RELEASE</version>\n+\t\t\t<scope>test</scope>\n+\t\t</dependency>\n \t\t<dependency>\n \t\t\t<groupId>org.springframework.boot</groupId>\n \t\t\t<artifactId>spring-boot-starter-test</artifactId>"
  },
  {
    "sha": "717ea97588125fd59a58a7bf5a1d3c58028c8524",
    "filename": "src/.DS_Store",
    "status": "modified",
    "additions": 0,
    "deletions": 0,
    "changes": 0,
    "blob_url": "https://github.com/Alejho139/demo-challenge/blob/be28606b7a14ba3d9c956a7bea793e8a638ed305/src/.DS_Store",
    "raw_url": "https://github.com/Alejho139/demo-challenge/raw/be28606b7a14ba3d9c956a7bea793e8a638ed305/src/.DS_Store",
    "contents_url": "https://api.github.com/repos/Alejho139/demo-challenge/contents/src/.DS_Store?ref=be28606b7a14ba3d9c956a7bea793e8a638ed305"
  },
  {
    "sha": "bd99540356a373dda73f528b304c5992fc76fb13",
    "filename": "src/main/java/com/example/challenge/config/RestClientConfiguration.java",
    "status": "added",
    "additions": 18,
    "deletions": 0,
    "changes": 18,
    "blob_url": "https://github.com/Alejho139/demo-challenge/blob/be28606b7a14ba3d9c956a7bea793e8a638ed305/src/main/java/com/example/challenge/config/RestClientConfiguration.java",
    "raw_url": "https://github.com/Alejho139/demo-challenge/raw/be28606b7a14ba3d9c956a7bea793e8a638ed305/src/main/java/com/example/challenge/config/RestClientConfiguration.java",
    "contents_url": "https://api.github.com/repos/Alejho139/demo-challenge/contents/src/main/java/com/example/challenge/config/RestClientConfiguration.java?ref=be28606b7a14ba3d9c956a7bea793e8a638ed305",
    "patch": "@@ -0,0 +1,18 @@\n+package com.example.challenge.config;\n+\n+import org.springframework.beans.factory.annotation.Value;\n+import org.springframework.context.annotation.Bean;\n+import org.springframework.context.annotation.Configuration;\n+import org.springframework.web.reactive.function.client.WebClient;\n+\n+@Configuration\n+public class RestClientConfiguration {\n+\n+    @Value(\"${config.base.url}\")\n+    private String baseUrl;\n+\n+    @Bean\n+    public WebClient getComments() {\n+        return WebClient.create(baseUrl);\n+    }\n+}"
  },
  {
    "sha": "7ad80cd8531e67c8a4ae0c6c797fab002beffe45",
    "filename": "src/main/java/com/example/challenge/entelgy/model/api/ChallengeResponse.java",
    "status": "added",
    "additions": 16,
    "deletions": 0,
    "changes": 16,
    "blob_url": "https://github.com/Alejho139/demo-challenge/blob/be28606b7a14ba3d9c956a7bea793e8a638ed305/src/main/java/com/example/challenge/entelgy/model/api/ChallengeResponse.java",
    "raw_url": "https://github.com/Alejho139/demo-challenge/raw/be28606b7a14ba3d9c956a7bea793e8a638ed305/src/main/java/com/example/challenge/entelgy/model/api/ChallengeResponse.java",
    "contents_url": "https://api.github.com/repos/Alejho139/demo-challenge/contents/src/main/java/com/example/challenge/entelgy/model/api/ChallengeResponse.java?ref=be28606b7a14ba3d9c956a7bea793e8a638ed305",
    "patch": "@@ -0,0 +1,16 @@\n+package com.example.challenge.entelgy.model.api;\n+\n+import java.util.List;\n+\n+public class ChallengeResponse {\n+\n+    private List<String> data;\n+\n+    public List<String> getData() {\n+        return data;\n+    }\n+\n+    public void setData(List<String> data) {\n+        this.data = data;\n+    }\n+}"
  },
  {
    "sha": "b5c1411f9dd2a0f208b232e87916b4ee5c09559f",
    "filename": "src/main/java/com/example/challenge/entelgy/model/managed/comments/Comment.java",
    "status": "added",
    "additions": 35,
    "deletions": 0,
    "changes": 35,
    "blob_url": "https://github.com/Alejho139/demo-challenge/blob/be28606b7a14ba3d9c956a7bea793e8a638ed305/src/main/java/com/example/challenge/entelgy/model/managed/comments/Comment.java",
    "raw_url": "https://github.com/Alejho139/demo-challenge/raw/be28606b7a14ba3d9c956a7bea793e8a638ed305/src/main/java/com/example/challenge/entelgy/model/managed/comments/Comment.java",
    "contents_url": "https://api.github.com/repos/Alejho139/demo-challenge/contents/src/main/java/com/example/challenge/entelgy/model/managed/comments/Comment.java?ref=be28606b7a14ba3d9c956a7bea793e8a638ed305",
    "patch": "@@ -0,0 +1,35 @@\n+package com.example.challenge.entelgy.model.managed.comments;\n+\n+public class Comment {\n+\n+    private int postId;\n+    private int id;\n+    private String name;\n+    private String email;\n+    private String body;\n+\n+    public int getPostId() {\n+        return postId;\n+    }\n+\n+    public void setPostId(int postId) {\n+        this.postId = postId;\n+    }\n+\n+    public int getId() {\n+        return id;\n+    }\n+\n+    public void setId(int id) {\n+        this.id = id;\n+    }\n+\n+    public String getEmail() {\n+        return email;\n+    }\n+\n+    public void setEmail(String email) {\n+        this.email = email;\n+    }\n+\n+}"
  },
  {
    "sha": "b6676ea42e19dccb305537f91930289f8ec2c06b",
    "filename": "src/main/java/com/example/challenge/entelgy/service/CommentService.java",
    "status": "added",
    "additions": 10,
    "deletions": 0,
    "changes": 10,
    "blob_url": "https://github.com/Alejho139/demo-challenge/blob/be28606b7a14ba3d9c956a7bea793e8a638ed305/src/main/java/com/example/challenge/entelgy/service/CommentService.java",
    "raw_url": "https://github.com/Alejho139/demo-challenge/raw/be28606b7a14ba3d9c956a7bea793e8a638ed305/src/main/java/com/example/challenge/entelgy/service/CommentService.java",
    "contents_url": "https://api.github.com/repos/Alejho139/demo-challenge/contents/src/main/java/com/example/challenge/entelgy/service/CommentService.java?ref=be28606b7a14ba3d9c956a7bea793e8a638ed305",
    "patch": "@@ -0,0 +1,10 @@\n+package com.example.challenge.entelgy.service;\n+\n+import com.example.challenge.entelgy.model.managed.comments.Comment;\n+import reactor.core.publisher.Flux;\n+\n+public interface CommentService {\n+\n+    public Flux<Comment> getComments();\n+\n+}"
  },
  {
    "sha": "dc0f8d86061a6930edf0d3efe420a3314e7e66fa",
    "filename": "src/main/java/com/example/challenge/entelgy/service/CommentServiceImpl.java",
    "status": "added",
    "additions": 24,
    "deletions": 0,
    "changes": 24,
    "blob_url": "https://github.com/Alejho139/demo-challenge/blob/be28606b7a14ba3d9c956a7bea793e8a638ed305/src/main/java/com/example/challenge/entelgy/service/CommentServiceImpl.java",
    "raw_url": "https://github.com/Alejho139/demo-challenge/raw/be28606b7a14ba3d9c956a7bea793e8a638ed305/src/main/java/com/example/challenge/entelgy/service/CommentServiceImpl.java",
    "contents_url": "https://api.github.com/repos/Alejho139/demo-challenge/contents/src/main/java/com/example/challenge/entelgy/service/CommentServiceImpl.java?ref=be28606b7a14ba3d9c956a7bea793e8a638ed305",
    "patch": "@@ -0,0 +1,24 @@\n+package com.example.challenge.entelgy.service;\n+\n+import com.example.challenge.entelgy.model.managed.comments.Comment;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.http.MediaType;\n+import org.springframework.stereotype.Service;\n+import org.springframework.web.reactive.function.client.WebClient;\n+import reactor.core.publisher.Flux;\n+\n+@Service\n+public class CommentServiceImpl implements CommentService{\n+\n+    @Autowired\n+    private WebClient client;\n+\n+    @Override\n+    public Flux<Comment> getComments() {\n+        return client.get()\n+                .uri(\"/comments\")\n+                .accept(MediaType.APPLICATION_JSON)\n+                .retrieve()\n+                .bodyToFlux(Comment.class);\n+    }\n+}"
  },
  {
    "sha": "7ef5e42485034704271dc819413ae66914913d5e",
    "filename": "src/main/java/com/example/challenge/expose/web/CommentController.java",
    "status": "added",
    "additions": 34,
    "deletions": 0,
    "changes": 34,
    "blob_url": "https://github.com/Alejho139/demo-challenge/blob/be28606b7a14ba3d9c956a7bea793e8a638ed305/src/main/java/com/example/challenge/expose/web/CommentController.java",
    "raw_url": "https://github.com/Alejho139/demo-challenge/raw/be28606b7a14ba3d9c956a7bea793e8a638ed305/src/main/java/com/example/challenge/expose/web/CommentController.java",
    "contents_url": "https://api.github.com/repos/Alejho139/demo-challenge/contents/src/main/java/com/example/challenge/expose/web/CommentController.java?ref=be28606b7a14ba3d9c956a7bea793e8a638ed305",
    "patch": "@@ -0,0 +1,34 @@\n+package com.example.challenge.expose.web;\n+\n+import com.example.challenge.entelgy.model.api.ChallengeResponse;\n+import com.example.challenge.entelgy.service.CommentService;\n+import java.util.ArrayList;\n+import java.util.List;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.web.bind.annotation.GetMapping;\n+import org.springframework.web.bind.annotation.RequestMapping;\n+import org.springframework.web.bind.annotation.RestController;\n+import reactor.core.publisher.Mono;\n+\n+@RestController\n+@RequestMapping(\"/api/challenge\")\n+public class CommentController {\n+\n+    @Autowired\n+    private CommentService commentService;\n+\n+    @GetMapping(value = \"/comments\")\n+    public Mono<ChallengeResponse> comments() {\n+        ChallengeResponse response = new ChallengeResponse();\n+        List<String> data = new ArrayList<>();\n+        return commentService.getComments().collectList()\n+                .map(comments -> {\n+                    comments.forEach(comment -> data.add(comment.getPostId() + \"|\" + comment.getId() + \"|\" + comment.getEmail()));\n+                    return data;\n+                })\n+                .map(dr -> {\n+                    response.setData(dr);\n+                    return response;\n+                });\n+    }\n+}"
  },
  {
    "sha": "759ff6ab7c13943907251ee788aadc3d9d2cc112",
    "filename": "src/main/resources/application.properties",
    "status": "modified",
    "additions": 3,
    "deletions": 0,
    "changes": 3,
    "blob_url": "https://github.com/Alejho139/demo-challenge/blob/be28606b7a14ba3d9c956a7bea793e8a638ed305/src/main/resources/application.properties",
    "raw_url": "https://github.com/Alejho139/demo-challenge/raw/be28606b7a14ba3d9c956a7bea793e8a638ed305/src/main/resources/application.properties",
    "contents_url": "https://api.github.com/repos/Alejho139/demo-challenge/contents/src/main/resources/application.properties?ref=be28606b7a14ba3d9c956a7bea793e8a638ed305",
    "patch": "@@ -1 +1,4 @@\n+server.port = 9090\n+config.base.url = https://jsonplaceholder.typicode.com\n+\n "
  },
  {
    "sha": "4a10b91338f9319dfd1e65af00430580953967d0",
    "filename": "src/test/.DS_Store",
    "status": "added",
    "additions": 0,
    "deletions": 0,
    "changes": 0,
    "blob_url": "https://github.com/Alejho139/demo-challenge/blob/be28606b7a14ba3d9c956a7bea793e8a638ed305/src/test/.DS_Store",
    "raw_url": "https://github.com/Alejho139/demo-challenge/raw/be28606b7a14ba3d9c956a7bea793e8a638ed305/src/test/.DS_Store",
    "contents_url": "https://api.github.com/repos/Alejho139/demo-challenge/contents/src/test/.DS_Store?ref=be28606b7a14ba3d9c956a7bea793e8a638ed305"
  },
  {
    "sha": "c3ec2eec00f440c1a90579db3c27569b1deca5f7",
    "filename": "src/test/java/.DS_Store",
    "status": "added",
    "additions": 0,
    "deletions": 0,
    "changes": 0,
    "blob_url": "https://github.com/Alejho139/demo-challenge/blob/be28606b7a14ba3d9c956a7bea793e8a638ed305/src/test/java/.DS_Store",
    "raw_url": "https://github.com/Alejho139/demo-challenge/raw/be28606b7a14ba3d9c956a7bea793e8a638ed305/src/test/java/.DS_Store",
    "contents_url": "https://api.github.com/repos/Alejho139/demo-challenge/contents/src/test/java/.DS_Store?ref=be28606b7a14ba3d9c956a7bea793e8a638ed305"
  },
  {
    "sha": "818f3ebba9ec701478a2fc992b5e8c3fb891e339",
    "filename": "src/test/java/com/.DS_Store",
    "status": "added",
    "additions": 0,
    "deletions": 0,
    "changes": 0,
    "blob_url": "https://github.com/Alejho139/demo-challenge/blob/be28606b7a14ba3d9c956a7bea793e8a638ed305/src/test/java/com/.DS_Store",
    "raw_url": "https://github.com/Alejho139/demo-challenge/raw/be28606b7a14ba3d9c956a7bea793e8a638ed305/src/test/java/com/.DS_Store",
    "contents_url": "https://api.github.com/repos/Alejho139/demo-challenge/contents/src/test/java/com/.DS_Store?ref=be28606b7a14ba3d9c956a7bea793e8a638ed305"
  },
  {
    "sha": "598616f6dfd638367401bbb90890987fb9e0e926",
    "filename": "src/test/java/com/example/.DS_Store",
    "status": "added",
    "additions": 0,
    "deletions": 0,
    "changes": 0,
    "blob_url": "https://github.com/Alejho139/demo-challenge/blob/be28606b7a14ba3d9c956a7bea793e8a638ed305/src/test/java/com/example/.DS_Store",
    "raw_url": "https://github.com/Alejho139/demo-challenge/raw/be28606b7a14ba3d9c956a7bea793e8a638ed305/src/test/java/com/example/.DS_Store",
    "contents_url": "https://api.github.com/repos/Alejho139/demo-challenge/contents/src/test/java/com/example/.DS_Store?ref=be28606b7a14ba3d9c956a7bea793e8a638ed305"
  },
  {
    "sha": "483b4f103fab6f13886ae9fcdd8e4c09179e87c8",
    "filename": "src/test/java/com/example/challenge/entelgy/service/CommentServiceTest.java",
    "status": "added",
    "additions": 30,
    "deletions": 0,
    "changes": 30,
    "blob_url": "https://github.com/Alejho139/demo-challenge/blob/be28606b7a14ba3d9c956a7bea793e8a638ed305/src/test/java/com/example/challenge/entelgy/service/CommentServiceTest.java",
    "raw_url": "https://github.com/Alejho139/demo-challenge/raw/be28606b7a14ba3d9c956a7bea793e8a638ed305/src/test/java/com/example/challenge/entelgy/service/CommentServiceTest.java",
    "contents_url": "https://api.github.com/repos/Alejho139/demo-challenge/contents/src/test/java/com/example/challenge/entelgy/service/CommentServiceTest.java?ref=be28606b7a14ba3d9c956a7bea793e8a638ed305",
    "patch": "@@ -0,0 +1,30 @@\n+package com.example.challenge.entelgy.service;\n+\n+import com.example.challenge.entelgy.model.managed.comments.Comment;\n+import org.junit.Assert;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.boot.test.context.SpringBootTest;\n+import org.springframework.test.context.junit4.SpringRunner;\n+import org.springframework.web.reactive.function.client.WebClient;\n+import reactor.core.publisher.Flux;\n+\n+@RunWith(SpringRunner.class)\n+@SpringBootTest\n+public class CommentServiceTest {\n+\n+    @Autowired\n+    private WebClient client;\n+\n+    @Autowired\n+    private CommentService commentService;\n+\n+    @Test\n+    public void testGetComments() {\n+\n+        Flux<Comment> comments = commentService.getComments();\n+\n+        Assert.assertNotNull(comments);\n+    }\n+}"
  },
  {
    "sha": "8b4be0be8d2d9792429e18e018b2e35b5219c3f0",
    "filename": "src/test/java/com/example/challenge/expose/web/CommentControllerTest.java",
    "status": "added",
    "additions": 46,
    "deletions": 0,
    "changes": 46,
    "blob_url": "https://github.com/Alejho139/demo-challenge/blob/be28606b7a14ba3d9c956a7bea793e8a638ed305/src/test/java/com/example/challenge/expose/web/CommentControllerTest.java",
    "raw_url": "https://github.com/Alejho139/demo-challenge/raw/be28606b7a14ba3d9c956a7bea793e8a638ed305/src/test/java/com/example/challenge/expose/web/CommentControllerTest.java",
    "contents_url": "https://api.github.com/repos/Alejho139/demo-challenge/contents/src/test/java/com/example/challenge/expose/web/CommentControllerTest.java?ref=be28606b7a14ba3d9c956a7bea793e8a638ed305",
    "patch": "@@ -0,0 +1,46 @@\n+package com.example.challenge.expose.web;\n+\n+import com.example.challenge.entelgy.model.api.ChallengeResponse;\n+import com.example.challenge.entelgy.model.managed.comments.Comment;\n+import com.example.challenge.entelgy.service.CommentService;\n+import org.junit.Assert;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.mockito.Mockito;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.boot.test.context.SpringBootTest;\n+import org.springframework.boot.test.mock.mockito.MockBean;\n+import org.springframework.test.context.junit4.SpringRunner;\n+import reactor.core.publisher.Flux;\n+import reactor.core.publisher.Mono;\n+\n+@RunWith(SpringRunner.class)\n+@SpringBootTest\n+public class CommentControllerTest {\n+\n+    @MockBean\n+    private CommentService commentService;\n+\n+    @Autowired\n+    private CommentController commentController;\n+\n+    @Before\n+    public void setUp() {\n+        Comment comment = new Comment();\n+        comment.setPostId(1);\n+        comment.setId(2);\n+        comment.setEmail(\"alejo@comment.com\");\n+\n+        Mockito.when(commentService.getComments()).thenReturn(Flux.just(comment));\n+    }\n+\n+    @Test\n+    public void testComments() {\n+        Mono<ChallengeResponse> response = commentController.comments();\n+        ChallengeResponse challengeResponse = response.block();\n+\n+        Assert.assertNotNull(response);\n+        Assert.assertEquals(challengeResponse.getData().get(0), \"1|2|alejo@comment.com\");\n+    }\n+}"
  }
]
