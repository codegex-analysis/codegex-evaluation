[
  {
    "sha": "fbed0b5ffa31fb1523e58905d34c16d4e2fbb6dc",
    "filename": "cdap-ui/app/cdap/components/Footer/index.js",
    "status": "removed",
    "additions": 0,
    "deletions": 40,
    "changes": 40,
    "blob_url": "https://github.com/cdapio/cdap/blob/5fbece32cb7f4db3f55e5524329024777b979d6a/cdap-ui/app/cdap/components/Footer/index.js",
    "raw_url": "https://github.com/cdapio/cdap/raw/5fbece32cb7f4db3f55e5524329024777b979d6a/cdap-ui/app/cdap/components/Footer/index.js",
    "contents_url": "https://api.github.com/repos/cdapio/cdap/contents/cdap-ui/app/cdap/components/Footer/index.js?ref=5fbece32cb7f4db3f55e5524329024777b979d6a",
    "patch": "@@ -1,40 +0,0 @@\n-/*\n- * Copyright © 2016-2018 Cask Data, Inc.\n- *\n- * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n- * use this file except in compliance with the License. You may obtain a copy of\n- * the License at\n- *\n- * http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing, software\n- * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n- * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n- * License for the specific language governing permissions and limitations under\n- * the License.\n- */\n-\n-import React from 'react';\n-import { Theme } from 'services/ThemeHelper';\n-import If from '../If';\n-import { objectQuery } from 'services/helpers';\n-require('./Footer.scss');\n-\n-export default function Footer() {\n-  const footerText = Theme.footerText;\n-  const footerUrl = Theme.footerLink;\n-  // 'project-id-30-characters-name1/instance-id-30-characters-name';\n-  const instanceMetadataId = objectQuery(window, 'CDAP_CONFIG', 'instanceMetadataId');\n-  return (\n-    <footer className=\"app-footer\">\n-      <p className=\"text-center text-muted\">\n-        <a href={footerUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n-          {footerText}\n-        </a>\n-      </p>\n-      <If condition={instanceMetadataId}>\n-        <p className=\"instance-metadata-id\">Instance Id: {instanceMetadataId}</p>\n-      </If>\n-    </footer>\n-  );\n-}"
  },
  {
    "sha": "d56eebfe96906d8d8486d4d789f35d92ee7746fe",
    "filename": "cdap-ui/app/cdap/components/Footer/index.tsx",
    "status": "added",
    "additions": 103,
    "deletions": 0,
    "changes": 103,
    "blob_url": "https://github.com/cdapio/cdap/blob/b1d7b209760749376566e0ac80911906793427c9/cdap-ui/app/cdap/components/Footer/index.tsx",
    "raw_url": "https://github.com/cdapio/cdap/raw/b1d7b209760749376566e0ac80911906793427c9/cdap-ui/app/cdap/components/Footer/index.tsx",
    "contents_url": "https://api.github.com/repos/cdapio/cdap/contents/cdap-ui/app/cdap/components/Footer/index.tsx?ref=b1d7b209760749376566e0ac80911906793427c9",
    "patch": "@@ -0,0 +1,103 @@\n+/*\n+ * Copyright © 2016-2018 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+import React from 'react';\n+import { Theme } from 'services/ThemeHelper';\n+import If from 'components/If';\n+import { objectQuery } from 'services/helpers';\n+import NamespaceStore, { getCurrentNamespace } from 'services/NamespaceStore';\n+import { makeStyles } from '@material-ui/core/styles';\n+import PageTitleStore, { getCurrentPageTitle } from 'services/PageTitleStore/PageTitleStore';\n+\n+const useStyles = makeStyles((theme) => ({\n+  root: {\n+    background: 'white',\n+    color: theme.palette.grey[900],\n+    fontSize: '11px',\n+    fontWeight: 600,\n+    zIndex: 0,\n+    position: 'absolute',\n+    width: '100%',\n+    bottom: '0',\n+    borderTop: 'solid 1px #cdcdcd',\n+  },\n+  footerText: {\n+    height: '53px',\n+    lineHeight: '53px',\n+    margin: '0',\n+    textAlign: 'center',\n+  },\n+  footerUrl: {\n+    color: 'inherit',\n+  },\n+  instanceMetadataId: {\n+    position: 'absolute',\n+    top: '0',\n+    right: '10px',\n+    color: theme.palette.grey[900],\n+    height: '53px',\n+    lineHeight: '53px',\n+    margin: '0',\n+  },\n+  selectedNamespace: {\n+    position: 'absolute',\n+    top: '0',\n+    left: '10px',\n+    color: theme.palette.grey[900],\n+    height: '53px',\n+    lineHeight: '53px',\n+    margin: '0',\n+  },\n+}));\n+\n+const nonNamespacePages = ['Operations', 'Reports', 'Administration'];\n+export default function Footer(props) {\n+  const footerText = Theme.footerText;\n+  const footerUrl = Theme.footerLink;\n+  // 'project-id-30-characters-name1/instance-id-30-characters-name';\n+  const instanceMetadataId = objectQuery(window, 'CDAP_CONFIG', 'instanceMetadataId');\n+  const [selectedNamespace, setSelectedNamespace] = React.useState(getCurrentNamespace());\n+  const classes = useStyles(props);\n+  React.useEffect(() => {\n+    const namespaceSub = NamespaceStore.subscribe(() =>\n+      setSelectedNamespace(getCurrentNamespace())\n+    );\n+    const titleSub = PageTitleStore.subscribe(() => {\n+      const title = getCurrentPageTitle();\n+      const featureName = (objectQuery(title.split('|'), 1) || '').trim();\n+      if (nonNamespacePages.indexOf(featureName) !== -1) {\n+        setSelectedNamespace('--');\n+      }\n+    });\n+    return () => {\n+      namespaceSub();\n+      titleSub();\n+    };\n+  }, []);\n+  return (\n+    <footer className={classes.root}>\n+      <p className={classes.selectedNamespace}>Namespace: {selectedNamespace}</p>\n+      <p className={classes.footerText}>\n+        <a href={footerUrl} target=\"_blank\" rel=\"noopener noreferrer\" className={classes.footerUrl}>\n+          {footerText}\n+        </a>\n+      </p>\n+      <If condition={instanceMetadataId}>\n+        <p className={classes.instanceMetadataId}>Instance Id: {instanceMetadataId}</p>\n+      </If>\n+    </footer>\n+  );\n+}"
  },
  {
    "sha": "5fed2fae491695a03264368808622dbf80a0b514",
    "filename": "cdap-ui/app/cdap/services/PageTitleStore/PageTitleActions.js",
    "status": "renamed",
    "additions": 6,
    "deletions": 30,
    "changes": 36,
    "blob_url": "https://github.com/cdapio/cdap/blob/b1d7b209760749376566e0ac80911906793427c9/cdap-ui/app/cdap/services/PageTitleStore/PageTitleActions.js",
    "raw_url": "https://github.com/cdapio/cdap/raw/b1d7b209760749376566e0ac80911906793427c9/cdap-ui/app/cdap/services/PageTitleStore/PageTitleActions.js",
    "contents_url": "https://api.github.com/repos/cdapio/cdap/contents/cdap-ui/app/cdap/services/PageTitleStore/PageTitleActions.js?ref=b1d7b209760749376566e0ac80911906793427c9",
    "patch": "@@ -1,5 +1,5 @@\n /*\n- * Copyright © 2016 Cask Data, Inc.\n+ * Copyright © 2020 Cask Data, Inc.\n  *\n  * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n  * use this file except in compliance with the License. You may obtain a copy of\n@@ -14,32 +14,8 @@\n  * the License.\n  */\n \n-@import \"~styles/variables.scss\";\n-@import \"~styles/colors.scss\";\n-\n-footer.app-footer {\n-  background-color: white;\n-  font-size: 11px;\n-  font-weight: 600;\n-  z-index: 0;\n-  position: absolute;\n-  width: 100%;\n-  bottom: 0;\n-  border-top: solid 1px #cdcdcd;\n-\n-  p,\n-  ul {\n-    height: $height-of-footer;\n-    line-height: $height-of-footer;\n-    margin: 0;\n-  }\n-  a {\n-    color: inherit;\n-  }\n-  .instance-metadata-id {\n-    position: absolute;\n-    top: 0;\n-    right: 10px;\n-    color: $grey-05;\n-  }\n-}\n+const PageTitleActions = {\n+    updatePageTitle: 'UPDATE_TITLE',\n+  };\n+  \n+  export default PageTitleActions;",
    "previous_filename": "cdap-ui/app/cdap/components/Footer/Footer.scss"
  },
  {
    "sha": "cd85cbbbca9e7ea09650be4ceb28101010f37665",
    "filename": "cdap-ui/app/cdap/services/PageTitleStore/PageTitleStore.tsx",
    "status": "added",
    "additions": 68,
    "deletions": 0,
    "changes": 68,
    "blob_url": "https://github.com/cdapio/cdap/blob/b1d7b209760749376566e0ac80911906793427c9/cdap-ui/app/cdap/services/PageTitleStore/PageTitleStore.tsx",
    "raw_url": "https://github.com/cdapio/cdap/raw/b1d7b209760749376566e0ac80911906793427c9/cdap-ui/app/cdap/services/PageTitleStore/PageTitleStore.tsx",
    "contents_url": "https://api.github.com/repos/cdapio/cdap/contents/cdap-ui/app/cdap/services/PageTitleStore/PageTitleStore.tsx?ref=b1d7b209760749376566e0ac80911906793427c9",
    "patch": "@@ -0,0 +1,68 @@\n+/*\n+ * Copyright © 2016-2018 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+import { combineReducers, createStore, Store as InterfaceStore } from 'redux';\n+import PageTitleActions from './PageTitleActions';\n+import { composeEnhancers, objectQuery, isNilOrEmptyString } from 'services/helpers';\n+import { IAction } from 'services/redux-helpers';\n+\n+interface IPageTitleStoreState {\n+  title: string;\n+}\n+\n+const defaultInitialState = {\n+  title: '',\n+};\n+\n+const defaultAction = {\n+  type: '',\n+  payload: {} as any,\n+};\n+\n+const title = (state = '', action: IAction = defaultAction) => {\n+  switch (action.type) {\n+    case PageTitleActions.updatePageTitle:\n+      return action.payload.title;\n+    default:\n+      return state;\n+  }\n+};\n+\n+const mutationObserver = new MutationObserver((mutations) => {\n+  if (!Array.isArray(mutations) || mutations.length === 0) {\n+    return;\n+  }\n+  const newTitle = objectQuery(mutations[0], 'target', 'textContent');\n+  if (isNilOrEmptyString(newTitle)) {\n+    return;\n+  }\n+  PageTitleStore.dispatch({ type: PageTitleActions.updatePageTitle, payload: { title: newTitle } });\n+});\n+mutationObserver.observe(document.querySelector('title'), { childList: true, subtree: true });\n+\n+const PageTitleStore: InterfaceStore<IPageTitleStoreState> = createStore(\n+  combineReducers({ title }),\n+  defaultInitialState,\n+  composeEnhancers('PageTitleStore')()\n+);\n+\n+const getCurrentPageTitle = () => {\n+  const { title: pageTitle } = PageTitleStore.getState();\n+  return pageTitle;\n+};\n+\n+export default PageTitleStore;\n+export { getCurrentPageTitle };"
  }
]
