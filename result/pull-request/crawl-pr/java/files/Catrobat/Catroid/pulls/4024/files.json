[
  {
    "sha": "053b1f737691bc56a86f0da9ff23be16f72ca1ac",
    "filename": "catroid/src/main/java/org/catrobat/catroid/ui/ProjectActivity.java",
    "status": "modified",
    "additions": 8,
    "deletions": 3,
    "changes": 11,
    "blob_url": "https://github.com/Catrobat/Catroid/blob/51c4ad70ce3d1ed6076e11fecc6ad542ad2f25c5/catroid/src/main/java/org/catrobat/catroid/ui/ProjectActivity.java",
    "raw_url": "https://github.com/Catrobat/Catroid/raw/51c4ad70ce3d1ed6076e11fecc6ad542ad2f25c5/catroid/src/main/java/org/catrobat/catroid/ui/ProjectActivity.java",
    "contents_url": "https://api.github.com/repos/Catrobat/Catroid/contents/catroid/src/main/java/org/catrobat/catroid/ui/ProjectActivity.java?ref=51c4ad70ce3d1ed6076e11fecc6ad542ad2f25c5",
    "patch": "@@ -54,6 +54,7 @@\n import org.catrobat.catroid.ui.recyclerview.fragment.SceneListFragment;\n import org.catrobat.catroid.ui.recyclerview.fragment.SpriteListFragment;\n import org.catrobat.catroid.ui.recyclerview.util.UniqueNameProvider;\n+import org.catrobat.catroid.utils.SnackbarUtil;\n import org.catrobat.catroid.utils.ToastUtil;\n import org.catrobat.catroid.utils.Utils;\n \n@@ -154,10 +155,14 @@ public boolean onOptionsItemSelected(MenuItem item) {\n \t\t\t\thandleAddSceneButton();\n \t\t\t\tbreak;\n \t\t\tcase R.id.upload:\n-\t\t\t\tsetShowProgressBar(true);\n \t\t\t\tProject currentProject = ProjectManager.getInstance().getCurrentProject();\n-\t\t\t\tnew ProjectSaveTask(currentProject, getApplicationContext()).setListener(this).execute();\n-\t\t\t\tUtils.setLastUsedProjectName(getApplicationContext(), currentProject.getName());\n+\t\t\t\tif (Utils.isDefaultProject(currentProject, this)) {\n+\t\t\t\t\tSnackbarUtil.showErrorSnackbar(this, R.string.error_upload_default_project);\n+\t\t\t\t} else {\n+\t\t\t\t\tsetShowProgressBar(true);\n+\t\t\t\t\tnew ProjectSaveTask(currentProject, getApplicationContext()).setListener(this).execute();\n+\t\t\t\t\tUtils.setLastUsedProjectName(getApplicationContext(), currentProject.getName());\n+\t\t\t\t}\n \t\t\t\tbreak;\n \t\t\tdefault:\n \t\t\t\treturn super.onOptionsItemSelected(item);"
  },
  {
    "sha": "21e54f94dbd241d86847fce39e4439fa697e4aee",
    "filename": "catroid/src/main/java/org/catrobat/catroid/utils/SnackbarUtil.java",
    "status": "modified",
    "additions": 28,
    "deletions": 19,
    "changes": 47,
    "blob_url": "https://github.com/Catrobat/Catroid/blob/51c4ad70ce3d1ed6076e11fecc6ad542ad2f25c5/catroid/src/main/java/org/catrobat/catroid/utils/SnackbarUtil.java",
    "raw_url": "https://github.com/Catrobat/Catroid/raw/51c4ad70ce3d1ed6076e11fecc6ad542ad2f25c5/catroid/src/main/java/org/catrobat/catroid/utils/SnackbarUtil.java",
    "contents_url": "https://api.github.com/repos/Catrobat/Catroid/contents/catroid/src/main/java/org/catrobat/catroid/utils/SnackbarUtil.java?ref=51c4ad70ce3d1ed6076e11fecc6ad542ad2f25c5",
    "patch": "@@ -54,28 +54,15 @@ public static void showHintSnackbar(final Activity activity, @StringRes int reso\n \t\tfinal String messageId = activity.getResources().getResourceName(resourceId);\n \n \t\tif (!wasHintAlreadyShown(activity, messageId) && areHintsEnabled(activity)) {\n-\t\t\tView contentView = activity.findViewById(android.R.id.content);\n-\t\t\tif (contentView == null) {\n-\t\t\t\treturn;\n-\t\t\t}\n-\n-\t\t\tSnackbar snackbar = Snackbar.make(contentView, resourceId, Snackbar.LENGTH_INDEFINITE);\n-\t\t\tsnackbar.setAction(R.string.got_it, new View.OnClickListener() {\n-\t\t\t\t@Override\n-\t\t\t\tpublic void onClick(View v) {\n-\t\t\t\t\tsetHintShown(activity, messageId);\n-\t\t\t\t}\n-\t\t\t});\n-\t\t\tsnackbar.setActionTextColor(ContextCompat.getColor(activity, R.color.solid_black));\n-\t\t\tView snackbarView = snackbar.getView();\n-\t\t\tTextView textView = snackbarView.findViewById(com.google.android.material.R.id.snackbar_text);\n-\t\t\ttextView.setMaxLines(MAX_LINES);\n-\t\t\ttextView.setTextColor(ContextCompat.getColor(activity, R.color.solid_white));\n-\t\t\tsnackbarView.setBackgroundColor(ContextCompat.getColor(activity, R.color.snackbar));\n-\t\t\tsnackbar.show();\n+\t\t\tdisplay(activity, resourceId, messageId);\n \t\t}\n \t}\n \n+\tpublic static void showErrorSnackbar(final Activity activity, @StringRes int resourceId) {\n+\t\tfinal String messageId = activity.getResources().getResourceName(resourceId);\n+\t\tdisplay(activity, resourceId, messageId);\n+\t}\n+\n \tpublic static void setHintShown(Activity activity, String messageId) {\n \t\tSet<String> hintList = getStringSetFromSharedPreferences(activity);\n \t\thintList.add(messageId);\n@@ -97,4 +84,26 @@ public static boolean areHintsEnabled(Activity activity) {\n \t\tSharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(context);\n \t\treturn new HashSet<>(prefs.getStringSet(SnackbarUtil.SHOWN_HINT_LIST, new HashSet<String>()));\n \t}\n+\n+\tprivate static void display(final Activity activity, @StringRes int resourceId, String messageId) {\n+\t\tView contentView = activity.findViewById(android.R.id.content);\n+\t\tif (contentView == null) {\n+\t\t\treturn;\n+\t\t}\n+\n+\t\tSnackbar snackbar = Snackbar.make(contentView, resourceId, Snackbar.LENGTH_INDEFINITE);\n+\t\tsnackbar.setAction(R.string.got_it, new View.OnClickListener() {\n+\t\t\t@Override\n+\t\t\tpublic void onClick(View v) {\n+\t\t\t\tsetHintShown(activity, messageId);\n+\t\t\t}\n+\t\t});\n+\t\tsnackbar.setActionTextColor(ContextCompat.getColor(activity, R.color.solid_black));\n+\t\tView snackbarView = snackbar.getView();\n+\t\tTextView textView = snackbarView.findViewById(com.google.android.material.R.id.snackbar_text);\n+\t\ttextView.setMaxLines(MAX_LINES);\n+\t\ttextView.setTextColor(ContextCompat.getColor(activity, R.color.solid_white));\n+\t\tsnackbarView.setBackgroundColor(ContextCompat.getColor(activity, R.color.snackbar));\n+\t\tsnackbar.show();\n+\t}\n }"
  }
]
