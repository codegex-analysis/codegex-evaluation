[
  {
    "sha": "200cbb3aa535c970b0d861d4034157b4ff713a0d",
    "filename": ".gitignore",
    "status": "modified",
    "additions": 6,
    "deletions": 7,
    "changes": 13,
    "blob_url": "https://github.com/kontext-e/jqassistant-gradle-plugin/blob/db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2/.gitignore",
    "raw_url": "https://github.com/kontext-e/jqassistant-gradle-plugin/raw/db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2/.gitignore",
    "contents_url": "https://api.github.com/repos/kontext-e/jqassistant-gradle-plugin/contents/.gitignore?ref=db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2",
    "patch": "@@ -1,8 +1,7 @@\n-/build\n-/.gradle\n+build\n+.gradle\n /.idea\n-/jqassistant/logs\n-/jqassistant/store\n-/jqassistant/store_lock\n-/jqassistant/report\n-\n+/testProject/jqassistant/logs\n+/testProject/jqassistant/store\n+/testProject/jqassistant/store_lock\n+/testProject/jqassistant/report"
  },
  {
    "sha": "df5e9411991bf53cd6e44ac4d2aaca09a00ea635",
    "filename": "README.adoc",
    "status": "modified",
    "additions": 6,
    "deletions": 4,
    "changes": 10,
    "blob_url": "https://github.com/kontext-e/jqassistant-gradle-plugin/blob/db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2/README.adoc",
    "raw_url": "https://github.com/kontext-e/jqassistant-gradle-plugin/raw/db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2/README.adoc",
    "contents_url": "https://api.github.com/repos/kontext-e/jqassistant-gradle-plugin/contents/README.adoc?ref=db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2",
    "patch": "@@ -4,7 +4,7 @@ This is the first snapshot of a Gradle plugin for jQAssistant. Currently support\n \n * all jQAssistant tasks: scan, analyze, server, report, available-scopes, available-rules, effective-rules\n * giving any options defined for the CLI\n-* configuring the jQAssistant version (default is 1.7.0)\n+* configuring the jQAssistant version (default is 1.9.1)\n * configuring additional plugins (Java plugin is added by default)\n * configuring additional artifacts to be scanned (Java compile output is added by default)\n * single module and multi module projects\n@@ -14,7 +14,7 @@ This is the first snapshot of a Gradle plugin for jQAssistant. Currently support\n Add in your Gradle project in question the plugin via\n \n     plugins {\n-        id \"de.kontext_e.jqassistant.gradle\" version \"1.0.0-SNAPSHOT\"\n+        id \"de.kontext_e.jqassistant.gradle\" version \"1.0.1-SNAPSHOT\"\n     }\n \n or\n@@ -24,7 +24,7 @@ or\n             mavenLocal()\n         }\n         dependencies {\n-            classpath 'de.kontext_e.jqassistant.gradle:jqassistant-gradle-plugin:1.0.0-SNAPSHOT'\n+            classpath 'de.kontext_e.jqassistant.gradle:jqassistant-gradle-plugin:1.0.1-SNAPSHOT'\n         }\n     }\n \n@@ -44,7 +44,7 @@ or\n \n You can go with the defaults or configure the plugin, e.g. this way:\n \n-    project.ext[\"jqaversion\"] = \"1.7.0\"\n+    project.ext[\"jqaversion\"] = \"1.9.1\"\n     project.ext[\"kejqapluginversion\"] = \"1.7.0\"\n     jqassistant {\n         toolVersion = \"${project.jqaversion}\"\n@@ -61,6 +61,7 @@ Note that if you have multiple options or scanDirs, just add multiple lines as s\n \n == Tested Gradle Versions\n \n+* 6.8.3: works\n * 5.6.3: works\n * 5.5.1: works\n * 5.4.1: works\n@@ -73,6 +74,7 @@ Note that if you have multiple options or scanDirs, just add multiple lines as s\n \n == Tested jQAssistant Versions\n \n+* 1.9.1: works\n * 1.7.0: works\n * 1.6.0: works\n * 1.5.0: works"
  },
  {
    "sha": "41f3673012af3faedddf74debe0149aef231c1bb",
    "filename": "build.gradle",
    "status": "modified",
    "additions": 15,
    "deletions": 30,
    "changes": 45,
    "blob_url": "https://github.com/kontext-e/jqassistant-gradle-plugin/blob/db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2/build.gradle",
    "raw_url": "https://github.com/kontext-e/jqassistant-gradle-plugin/raw/db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2/build.gradle",
    "contents_url": "https://api.github.com/repos/kontext-e/jqassistant-gradle-plugin/contents/build.gradle?ref=db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2",
    "patch": "@@ -1,24 +1,13 @@\n-\n-buildscript {\n-    repositories {\n-        mavenLocal()\n-    }\n-    dependencies {\n-        classpath 'de.kontext_e.jqassistant.gradle:jqassistant-gradle-plugin:1.0.0-SNAPSHOT'\n-    }\n-}\n-\n plugins {\n     id 'java-gradle-plugin'\n-    id 'com.gradle.plugin-publish' version '0.10.0'\n+    id 'com.gradle.plugin-publish' version '0.13.0'\n }\n \n apply plugin: 'java'\n-apply plugin: 'maven'\n-apply plugin: 'de.kontext_e.jqassistant.gradle'\n+apply plugin: 'maven-publish'\n \n group 'de.kontext_e.jqassistant.gradle'\n-version '1.0.0-SNAPSHOT'\n+version '1.0.1-SNAPSHOT'\n \n repositories {\n     jcenter()\n@@ -28,12 +17,23 @@ dependencies {\n     implementation gradleApi()\n     implementation localGroovy()\n \n-    compileOnly \"com.buschmais.jqassistant.cli:jqassistant-commandline-neo4jv3:1.7.0\"\n+    compileOnly \"com.buschmais.jqassistant.cli:jqassistant-commandline-neo4jv3:1.9.1\"\n \n     testImplementation gradleTestKit()\n     testImplementation('org.junit.jupiter:junit-jupiter:5.5.2')\n }\n \n+test {\n+    useJUnitPlatform()\n+    // add this plugin to maven local to allows using within the testProject\n+    dependsOn(\"publishToMavenLocal\")\n+    // pass the proxy configuration to the gradle test executor\n+    systemProperty \"http.proxyHost\", System.getProperty('http.proxyHost')\n+    systemProperty \"http.proxyPort\", System.getProperty('http.proxyPort')\n+    systemProperty \"https.proxyHost\", System.getProperty('https.proxyHost')\n+    systemProperty \"https.proxyPort\", System.getProperty('https.proxyPort')\n+}\n+\n pluginBundle {\n     website = 'https://github.com/kontext-e/jqassistant-gradle-plugin'\n     vcsUrl = 'https://github.com/kontext-e/jqassistant-gradle-plugin'\n@@ -51,18 +51,3 @@ gradlePlugin {\n         }\n     }\n }\n-\n-\n-project.ext[\"jqaversion\"] = \"1.7.0\"\n-project.ext[\"kejqapluginversion\"] = \"1.7.0\"\n-\n-jqassistant {\n-    toolVersion = \"${project.jqaversion}\"\n-\n-    plugins \"com.buschmais.jqassistant.plugin:junit:${project.jqaversion}\"\n-    plugins \"de.kontext-e.jqassistant.plugin:jqassistant.plugin.git:${project.kejqapluginversion}\"\n-\n-    options \"-reset\"\n-\n-    scanDirs \".git\"\n-}"
  },
  {
    "sha": "5c2d1cf016b3885f6930543d57b744ea8c220a1a",
    "filename": "gradle/wrapper/gradle-wrapper.jar",
    "status": "modified",
    "additions": 0,
    "deletions": 0,
    "changes": 0,
    "blob_url": "https://github.com/kontext-e/jqassistant-gradle-plugin/blob/db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2/gradle/wrapper/gradle-wrapper.jar",
    "raw_url": "https://github.com/kontext-e/jqassistant-gradle-plugin/raw/db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2/gradle/wrapper/gradle-wrapper.jar",
    "contents_url": "https://api.github.com/repos/kontext-e/jqassistant-gradle-plugin/contents/gradle/wrapper/gradle-wrapper.jar?ref=db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2"
  },
  {
    "sha": "1aff8a1545e5c451464a57511a7e6822e0686e0d",
    "filename": "gradle/wrapper/gradle-wrapper.properties",
    "status": "modified",
    "additions": 1,
    "deletions": 2,
    "changes": 3,
    "blob_url": "https://github.com/kontext-e/jqassistant-gradle-plugin/blob/db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2/gradle/wrapper/gradle-wrapper.properties",
    "raw_url": "https://github.com/kontext-e/jqassistant-gradle-plugin/raw/db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2/gradle/wrapper/gradle-wrapper.properties",
    "contents_url": "https://api.github.com/repos/kontext-e/jqassistant-gradle-plugin/contents/gradle/wrapper/gradle-wrapper.properties?ref=db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2",
    "patch": "@@ -1,5 +1,4 @@\n-#Wed Sep 18 11:08:25 CEST 2019\n-distributionUrl=https\\://services.gradle.org/distributions/gradle-5.6.3-all.zip\n+distributionUrl=https\\://services.gradle.org/distributions/gradle-6.8.3-all.zip\n distributionBase=GRADLE_USER_HOME\n distributionPath=wrapper/dists\n zipStorePath=wrapper/dists"
  },
  {
    "sha": "83f2acfdc319a24e8766cca78f32474ad7a22dd6",
    "filename": "gradlew",
    "status": "modified",
    "additions": 19,
    "deletions": 3,
    "changes": 22,
    "blob_url": "https://github.com/kontext-e/jqassistant-gradle-plugin/blob/db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2/gradlew",
    "raw_url": "https://github.com/kontext-e/jqassistant-gradle-plugin/raw/db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2/gradlew",
    "contents_url": "https://api.github.com/repos/kontext-e/jqassistant-gradle-plugin/contents/gradlew?ref=db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2",
    "patch": "@@ -1,5 +1,21 @@\n #!/usr/bin/env sh\n \n+#\n+# Copyright 2015 the original author or authors.\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+#      https://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+#\n+\n ##############################################################################\n ##\n ##  Gradle start up script for UN*X\n@@ -28,7 +44,7 @@ APP_NAME=\"Gradle\"\n APP_BASE_NAME=`basename \"$0\"`\n \n # Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\n-DEFAULT_JVM_OPTS='\"-Xmx64m\"'\n+DEFAULT_JVM_OPTS='\"-Xmx64m\" \"-Xms64m\"'\n \n # Use the maximum available, or set MAX_FD != -1 to use that value.\n MAX_FD=\"maximum\"\n@@ -109,8 +125,8 @@ if $darwin; then\n     GRADLE_OPTS=\"$GRADLE_OPTS \\\"-Xdock:name=$APP_NAME\\\" \\\"-Xdock:icon=$APP_HOME/media/gradle.icns\\\"\"\n fi\n \n-# For Cygwin, switch paths to Windows format before running java\n-if $cygwin ; then\n+# For Cygwin or MSYS, switch paths to Windows format before running java\n+if [ \"$cygwin\" = \"true\" -o \"$msys\" = \"true\" ] ; then\n     APP_HOME=`cygpath --path --mixed \"$APP_HOME\"`\n     CLASSPATH=`cygpath --path --mixed \"$CLASSPATH\"`\n     JAVACMD=`cygpath --unix \"$JAVACMD\"`"
  },
  {
    "sha": "9618d8d9607cd91a0efb866bcac4810064ba6fac",
    "filename": "gradlew.bat",
    "status": "modified",
    "additions": 17,
    "deletions": 1,
    "changes": 18,
    "blob_url": "https://github.com/kontext-e/jqassistant-gradle-plugin/blob/db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2/gradlew.bat",
    "raw_url": "https://github.com/kontext-e/jqassistant-gradle-plugin/raw/db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2/gradlew.bat",
    "contents_url": "https://api.github.com/repos/kontext-e/jqassistant-gradle-plugin/contents/gradlew.bat?ref=db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2",
    "patch": "@@ -1,3 +1,19 @@\n+@rem\n+@rem Copyright 2015 the original author or authors.\n+@rem\n+@rem Licensed under the Apache License, Version 2.0 (the \"License\");\n+@rem you may not use this file except in compliance with the License.\n+@rem You may obtain a copy of the License at\n+@rem\n+@rem      https://www.apache.org/licenses/LICENSE-2.0\n+@rem\n+@rem Unless required by applicable law or agreed to in writing, software\n+@rem distributed under the License is distributed on an \"AS IS\" BASIS,\n+@rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+@rem See the License for the specific language governing permissions and\n+@rem limitations under the License.\n+@rem\n+\n @if \"%DEBUG%\" == \"\" @echo off\n @rem ##########################################################################\n @rem\n@@ -14,7 +30,7 @@ set APP_BASE_NAME=%~n0\n set APP_HOME=%DIRNAME%\n \n @rem Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\n-set DEFAULT_JVM_OPTS=\"-Xmx64m\"\n+set DEFAULT_JVM_OPTS=\"-Xmx64m\" \"-Xms64m\"\n \n @rem Find java.exe\n if defined JAVA_HOME goto findJavaFromJavaHome"
  },
  {
    "sha": "058c578298269aabd11eaa061387037377904217",
    "filename": "src/main/java/de/kontext_e/jqassistant/gradle/JqassistantGradlePlugin.java",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/kontext-e/jqassistant-gradle-plugin/blob/db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2/src/main/java/de/kontext_e/jqassistant/gradle/JqassistantGradlePlugin.java",
    "raw_url": "https://github.com/kontext-e/jqassistant-gradle-plugin/raw/db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2/src/main/java/de/kontext_e/jqassistant/gradle/JqassistantGradlePlugin.java",
    "contents_url": "https://api.github.com/repos/kontext-e/jqassistant-gradle-plugin/contents/src/main/java/de/kontext_e/jqassistant/gradle/JqassistantGradlePlugin.java?ref=db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2",
    "patch": "@@ -57,7 +57,7 @@ private void addDependencyForCli(Project project, DependencySet dependencies, St\n         }\n \n         if(toolVersion.startsWith(\"1.3\")) {\n-            // in 1.2 it was another different name\n+            // in 1.3 it was another different name\n             artifact = \"com.buschmais.jqassistant:jqassistant-commandline:\";\n         }\n "
  },
  {
    "sha": "0e7431a2e55416f8ab00468d049e0611ebc251dc",
    "filename": "src/main/java/de/kontext_e/jqassistant/gradle/JqassistantPluginExtension.java",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/kontext-e/jqassistant-gradle-plugin/blob/db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2/src/main/java/de/kontext_e/jqassistant/gradle/JqassistantPluginExtension.java",
    "raw_url": "https://github.com/kontext-e/jqassistant-gradle-plugin/raw/db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2/src/main/java/de/kontext_e/jqassistant/gradle/JqassistantPluginExtension.java",
    "contents_url": "https://api.github.com/repos/kontext-e/jqassistant-gradle-plugin/contents/src/main/java/de/kontext_e/jqassistant/gradle/JqassistantPluginExtension.java?ref=db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2",
    "patch": "@@ -6,7 +6,7 @@\n import java.util.*;\n \n public class JqassistantPluginExtension {\n-    private String toolVersion = \"1.7.0\";\n+    private String toolVersion = \"1.9.1\";\n     private List<String> plugins = new ArrayList<>();\n     private List<String> options = new ArrayList<>();\n     private List<String> scanDirs = new ArrayList<>();"
  },
  {
    "sha": "ee8be8cf2d616adaf09d2b5a47ed3315d5cec9e6",
    "filename": "src/main/java/de/kontext_e/jqassistant/gradle/JqassistantWorker.java",
    "status": "modified",
    "additions": 3,
    "deletions": 2,
    "changes": 5,
    "blob_url": "https://github.com/kontext-e/jqassistant-gradle-plugin/blob/db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2/src/main/java/de/kontext_e/jqassistant/gradle/JqassistantWorker.java",
    "raw_url": "https://github.com/kontext-e/jqassistant-gradle-plugin/raw/db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2/src/main/java/de/kontext_e/jqassistant/gradle/JqassistantWorker.java",
    "contents_url": "https://api.github.com/repos/kontext-e/jqassistant-gradle-plugin/contents/src/main/java/de/kontext_e/jqassistant/gradle/JqassistantWorker.java?ref=db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2",
    "patch": "@@ -1,5 +1,6 @@\n package de.kontext_e.jqassistant.gradle;\n \n-public interface JqassistantWorker {\n-    JqassistantResult run(JqassistantSpec spec);\n+import org.gradle.process.internal.worker.RequestHandler;\n+\n+public interface JqassistantWorker extends RequestHandler<JqassistantSpec, JqassistantResult> {\n }"
  },
  {
    "sha": "2ca15286aa1ab2b4618b6de1d85b495cf2b0ce93",
    "filename": "src/main/java/de/kontext_e/jqassistant/gradle/JqassistantWorkerManager.java",
    "status": "modified",
    "additions": 9,
    "deletions": 5,
    "changes": 14,
    "blob_url": "https://github.com/kontext-e/jqassistant-gradle-plugin/blob/db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2/src/main/java/de/kontext_e/jqassistant/gradle/JqassistantWorkerManager.java",
    "raw_url": "https://github.com/kontext-e/jqassistant-gradle-plugin/raw/db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2/src/main/java/de/kontext_e/jqassistant/gradle/JqassistantWorkerManager.java",
    "contents_url": "https://api.github.com/repos/kontext-e/jqassistant-gradle-plugin/contents/src/main/java/de/kontext_e/jqassistant/gradle/JqassistantWorkerManager.java?ref=db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2",
    "patch": "@@ -1,7 +1,10 @@\n package de.kontext_e.jqassistant.gradle;\n \n import org.gradle.api.file.FileCollection;\n+import org.gradle.api.logging.Logger;\n+import org.gradle.api.logging.Logging;\n import org.gradle.process.internal.JavaExecHandleBuilder;\n+import org.gradle.process.internal.worker.RequestHandler;\n import org.gradle.process.internal.worker.SingleRequestWorkerProcessBuilder;\n import org.gradle.process.internal.worker.WorkerProcessException;\n import org.gradle.process.internal.worker.WorkerProcessFactory;\n@@ -10,19 +13,20 @@\n import java.util.Arrays;\n \n public class JqassistantWorkerManager {\n+    private static final Logger LOGGER = Logging.getLogger(JqassistantWorkerManager.class);\n \n     public JqassistantResult runWorker(File workingDir, WorkerProcessFactory workerFactory, FileCollection classpath, JqassistantSpec spec) {\n         try {\n-            JqassistantWorker worker = createWorkerProcess(workingDir, workerFactory, classpath, spec);\n+            RequestHandler<JqassistantSpec, JqassistantResult> worker = createWorkerProcess(workingDir, workerFactory, classpath, spec);\n             return worker.run(spec);\n         } catch (WorkerProcessException e) {\n-            // todo log info\n-            return new JqassistantResult();\n+            LOGGER.error(\"Execute JQA task failed.\", e);\n+            throw e;\n         }\n     }\n \n-    private JqassistantWorker createWorkerProcess(File workingDir, WorkerProcessFactory workerFactory, FileCollection classpath, JqassistantSpec spec) {\n-        SingleRequestWorkerProcessBuilder<JqassistantWorker> builder = workerFactory.singleRequestWorker(JqassistantWorker.class, JqassistantExecutor.class);\n+    private RequestHandler<JqassistantSpec, JqassistantResult> createWorkerProcess(File workingDir, WorkerProcessFactory workerFactory, FileCollection classpath, JqassistantSpec spec) {\n+        SingleRequestWorkerProcessBuilder<JqassistantSpec, JqassistantResult> builder = workerFactory.singleRequestWorker(JqassistantExecutor.class);\n         builder.setBaseName(\"Gradle jQAssistant Worker\");\n         builder.applicationClasspath(classpath);\n         builder.sharedPackages(Arrays.asList(\"com.buschmais.jqassistant\"));"
  },
  {
    "sha": "e9a4a61507ca5e7ba02691ee6fd0acb6fb1abc22",
    "filename": "src/test/java/de/kontext_e/jqassistant/gradle/JqassistantPluginExtensionTest.java",
    "status": "modified",
    "additions": 41,
    "deletions": 1,
    "changes": 42,
    "blob_url": "https://github.com/kontext-e/jqassistant-gradle-plugin/blob/db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2/src/test/java/de/kontext_e/jqassistant/gradle/JqassistantPluginExtensionTest.java",
    "raw_url": "https://github.com/kontext-e/jqassistant-gradle-plugin/raw/db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2/src/test/java/de/kontext_e/jqassistant/gradle/JqassistantPluginExtensionTest.java",
    "contents_url": "https://api.github.com/repos/kontext-e/jqassistant-gradle-plugin/contents/src/test/java/de/kontext_e/jqassistant/gradle/JqassistantPluginExtensionTest.java?ref=db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2",
    "patch": "@@ -1,8 +1,16 @@\n package de.kontext_e.jqassistant.gradle;\n \n+import org.gradle.api.Project;\n+import org.gradle.testfixtures.ProjectBuilder;\n+import org.gradle.testkit.runner.BuildResult;\n+import org.gradle.testkit.runner.BuildTask;\n+import org.gradle.testkit.runner.GradleRunner;\n+import org.gradle.testkit.runner.TaskOutcome;\n import org.junit.jupiter.api.Test;\n \n-import static org.junit.jupiter.api.Assertions.assertEquals;\n+import java.io.File;\n+\n+import static org.junit.jupiter.api.Assertions.*;\n \n class JqassistantPluginExtensionTest {\n \n@@ -15,4 +23,36 @@ void thatOnlyStringOptionsWereSet() {\n         assertEquals(1, extension.getOptions().size());\n         assertEquals(\"option\", extension.getOptions().get(0));\n     }\n+\n+    @Test\n+    void applyPluginsRegisterScanTask() {\n+        Project project = ProjectBuilder.builder().build();\n+        project.getPluginManager().apply(\"de.kontext_e.jqassistant.gradle\");\n+\n+        assertTrue(project.getTasks().getByName(\"scan\") instanceof Jqassistant);\n+    }\n+\n+    @Test\n+    void scanAndAnalyzeExecuted() {\n+        File testProjectDir = new File(\"./testProject\");\n+        File expectedAnalyzeReportFile = new File(\"./testProject/jqassistant/report/jqassistant-report.xml\");\n+        if (expectedAnalyzeReportFile.exists()) {\n+            assertTrue(expectedAnalyzeReportFile.delete(), \"pre condition\");\n+        }\n+\n+        BuildResult result = GradleRunner.create()\n+          .withDebug(true)\n+          .withProjectDir(testProjectDir)\n+          .withArguments(\"scan\", \"analyze\")\n+          .build();\n+\n+        BuildTask scanTask = result.task(\":scan\");\n+        assertNotNull(scanTask);\n+        assertEquals(TaskOutcome.SUCCESS, scanTask.getOutcome());\n+\n+        BuildTask analyzeTask = result.task(\":analyze\");\n+        assertNotNull(analyzeTask);\n+        assertEquals(TaskOutcome.SUCCESS, analyzeTask.getOutcome());\n+        assertTrue(expectedAnalyzeReportFile.exists());\n+    }\n }"
  },
  {
    "sha": "cab973449121bfa98548f126a784e16bb88ac8aa",
    "filename": "testProject/build.gradle",
    "status": "added",
    "additions": 33,
    "deletions": 0,
    "changes": 33,
    "blob_url": "https://github.com/kontext-e/jqassistant-gradle-plugin/blob/db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2/testProject/build.gradle",
    "raw_url": "https://github.com/kontext-e/jqassistant-gradle-plugin/raw/db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2/testProject/build.gradle",
    "contents_url": "https://api.github.com/repos/kontext-e/jqassistant-gradle-plugin/contents/testProject/build.gradle?ref=db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2",
    "patch": "@@ -0,0 +1,33 @@\n+buildscript {\n+    repositories {\n+        mavenLocal()\n+    }\n+\n+    dependencies {\n+        classpath 'de.kontext_e.jqassistant.gradle:jqassistant-gradle-plugin:1.0.1-SNAPSHOT'\n+    }\n+}\n+\n+repositories {\n+    jcenter()\n+    mavenCentral()\n+}\n+\n+apply plugin: 'de.kontext_e.jqassistant.gradle'\n+\n+group 'de.kontext_e.jqassistant.gradle.testproject'\n+version '1.0.0-SNAPSHOT'\n+\n+project.ext[\"jqaversion\"] = \"1.9.1\"\n+project.ext[\"kejqapluginversion\"] = \"1.7.0\"\n+\n+jqassistant {\n+    toolVersion = \"${project.jqaversion}\"\n+\n+    plugins \"com.buschmais.jqassistant.plugin:java:${project.jqaversion}\"\n+    plugins \"de.kontext-e.jqassistant.plugin:jqassistant.plugin.git:${project.kejqapluginversion}\"\n+\n+    options \"-reset\"\n+\n+    scanDirs \"../.git\"\n+}"
  },
  {
    "sha": "21dd6a0c3c50715fb0f758d73a440b69023a54e2",
    "filename": "testProject/jqassistant/rules/index.adoc",
    "status": "renamed",
    "additions": 0,
    "deletions": 0,
    "changes": 0,
    "blob_url": "https://github.com/kontext-e/jqassistant-gradle-plugin/blob/db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2/testProject/jqassistant/rules/index.adoc",
    "raw_url": "https://github.com/kontext-e/jqassistant-gradle-plugin/raw/db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2/testProject/jqassistant/rules/index.adoc",
    "contents_url": "https://api.github.com/repos/kontext-e/jqassistant-gradle-plugin/contents/testProject/jqassistant/rules/index.adoc?ref=db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2",
    "previous_filename": "jqassistant/rules/index.adoc"
  },
  {
    "sha": "6395707e14b3ab65bf3c37cc62efe233a591b508",
    "filename": "testProject/settings.gradle",
    "status": "added",
    "additions": 1,
    "deletions": 0,
    "changes": 1,
    "blob_url": "https://github.com/kontext-e/jqassistant-gradle-plugin/blob/db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2/testProject/settings.gradle",
    "raw_url": "https://github.com/kontext-e/jqassistant-gradle-plugin/raw/db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2/testProject/settings.gradle",
    "contents_url": "https://api.github.com/repos/kontext-e/jqassistant-gradle-plugin/contents/testProject/settings.gradle?ref=db9f6326c19fcc6ec1a31cb1414de14fc6ea38b2",
    "patch": "@@ -0,0 +1 @@\n+rootProject.name = 'jqassistant-gradle-plugin-testproject'"
  }
]
