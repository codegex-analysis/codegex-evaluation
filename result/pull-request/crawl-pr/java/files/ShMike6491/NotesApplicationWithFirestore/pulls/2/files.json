[
  {
    "sha": "31051fccf9701d14aa161952808af31433f84316",
    "filename": "app.iml",
    "status": "modified",
    "additions": 2,
    "deletions": 2,
    "changes": 4,
    "blob_url": "https://github.com/ShMike6491/NotesApplicationWithFirestore/blob/c9fac9868e8a230e8d82dee8c5ef777caf32dd56/app.iml",
    "raw_url": "https://github.com/ShMike6491/NotesApplicationWithFirestore/raw/c9fac9868e8a230e8d82dee8c5ef777caf32dd56/app.iml",
    "contents_url": "https://api.github.com/repos/ShMike6491/NotesApplicationWithFirestore/contents/app.iml?ref=c9fac9868e8a230e8d82dee8c5ef777caf32dd56",
    "patch": "@@ -36,10 +36,10 @@\n       <sourceFolder url=\"file://$MODULE_DIR$/build/generated/renderscript_source_output_dir/debug/out\" isTestSource=\"false\" generated=\"true\" />\n       <sourceFolder url=\"file://$MODULE_DIR$/build/generated/res/google-services/debug\" type=\"java-resource\" generated=\"true\" />\n       <sourceFolder url=\"file://$MODULE_DIR$/build/generated/res/rs/debug\" type=\"java-resource\" generated=\"true\" />\n+      <sourceFolder url=\"file://$MODULE_DIR$/build/generated/renderscript_source_output_dir/debugAndroidTest/out\" isTestSource=\"true\" generated=\"true\" />\n+      <sourceFolder url=\"file://$MODULE_DIR$/build/generated/source/buildConfig/androidTest/debug\" isTestSource=\"true\" generated=\"true\" />\n       <sourceFolder url=\"file://$MODULE_DIR$/build/generated/ap_generated_sources/debugAndroidTest/out\" isTestSource=\"true\" generated=\"true\" />\n       <sourceFolder url=\"file://$MODULE_DIR$/build/generated/aidl_source_output_dir/debugAndroidTest/out\" isTestSource=\"true\" generated=\"true\" />\n-      <sourceFolder url=\"file://$MODULE_DIR$/build/generated/source/buildConfig/androidTest/debug\" isTestSource=\"true\" generated=\"true\" />\n-      <sourceFolder url=\"file://$MODULE_DIR$/build/generated/renderscript_source_output_dir/debugAndroidTest/out\" isTestSource=\"true\" generated=\"true\" />\n       <sourceFolder url=\"file://$MODULE_DIR$/build/generated/res/rs/androidTest/debug\" type=\"java-test-resource\" generated=\"true\" />\n       <sourceFolder url=\"file://$MODULE_DIR$/build/generated/ap_generated_sources/debugUnitTest/out\" isTestSource=\"true\" generated=\"true\" />\n       <sourceFolder url=\"file://$MODULE_DIR$/src/debug/res\" type=\"java-resource\" />"
  },
  {
    "sha": "c4907203a6e2e46d36fe3ed2dc3505ead48dde88",
    "filename": "src/main/java/com/e/firebasenotesapp/NoteFragment.java",
    "status": "modified",
    "additions": 15,
    "deletions": 49,
    "changes": 64,
    "blob_url": "https://github.com/ShMike6491/NotesApplicationWithFirestore/blob/c9fac9868e8a230e8d82dee8c5ef777caf32dd56/src/main/java/com/e/firebasenotesapp/NoteFragment.java",
    "raw_url": "https://github.com/ShMike6491/NotesApplicationWithFirestore/raw/c9fac9868e8a230e8d82dee8c5ef777caf32dd56/src/main/java/com/e/firebasenotesapp/NoteFragment.java",
    "contents_url": "https://api.github.com/repos/ShMike6491/NotesApplicationWithFirestore/contents/src/main/java/com/e/firebasenotesapp/NoteFragment.java?ref=c9fac9868e8a230e8d82dee8c5ef777caf32dd56",
    "patch": "@@ -2,49 +2,40 @@\n \n import android.os.Bundle;\n import android.view.LayoutInflater;\n-import android.view.Menu;\n-import android.view.MenuInflater;\n-import android.view.MenuItem;\n import android.view.View;\n import android.view.ViewGroup;\n+import android.widget.Button;\n import android.widget.Toast;\n \n import androidx.annotation.NonNull;\n import androidx.annotation.Nullable;\n import androidx.fragment.app.Fragment;\n \n-import com.google.android.gms.tasks.OnFailureListener;\n-import com.google.android.gms.tasks.OnSuccessListener;\n+import com.google.android.material.bottomsheet.BottomSheetDialogFragment;\n import com.google.android.material.textfield.TextInputEditText;\n import com.google.firebase.firestore.CollectionReference;\n-import com.google.firebase.firestore.DocumentReference;\n import com.google.firebase.firestore.FirebaseFirestore;\n \n-public class NoteFragment extends Fragment {\n+public class NoteFragment extends BottomSheetDialogFragment {\n \n     private TextInputEditText title;\n     private TextInputEditText description;\n+    private Button button;\n     private NoteModel note;\n     private String noteID;\n \n     private CollectionReference notebookRef = FirebaseFirestore.getInstance()\n             .collection(\"Notebook\");\n \n-    public static NoteFragment newInstance(NoteModel model, String noteID) {\n-        NoteFragment fragment = new NoteFragment();\n+    public static BottomSheetDialogFragment newInstance(NoteModel model, String noteID) {\n+        BottomSheetDialogFragment fragment = new NoteFragment();\n         Bundle args = new Bundle();\n         args.putSerializable(Constants.SAVE_FRAGMENT_INSTANCE, model);\n         args.putString(Constants.SAVE_ID_INSTANCE, noteID);\n         fragment.setArguments(args);\n         return fragment;\n     }\n \n-    @Override\n-    public void onCreate(@Nullable Bundle savedInstanceState) {\n-        setHasOptionsMenu(true);\n-        super.onCreate(savedInstanceState);\n-    }\n-\n     @Nullable\n     @Override\n     public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\n@@ -61,27 +52,16 @@ public void onActivityCreated(@Nullable Bundle savedInstanceState) {\n         }\n     }\n \n-    @Override\n-    public void onCreateOptionsMenu(@NonNull Menu menu, @NonNull MenuInflater inflater) {\n-        inflater.inflate(R.menu.new_note_menu, menu);\n-        super.onCreateOptionsMenu(menu, inflater);\n-    }\n-\n-    @Override\n-    public boolean onOptionsItemSelected(@NonNull MenuItem item) {\n-        switch (item.getItemId())\n-        {\n-            case R.id.menu_save_note:\n-                saveNote();\n-                return true;\n-            default:\n-                return super.onOptionsItemSelected(item);\n-        }\n-    }\n-\n     private void initView(View view) {\n         title = view.findViewById(R.id.et_note_details_title);\n         description = view.findViewById(R.id.et_note_details_description);\n+        button = view.findViewById(R.id.mb_submit);\n+        button.setOnClickListener(new View.OnClickListener() {\n+            @Override\n+            public void onClick(View v) {\n+                saveNote();\n+            }\n+        });\n     }\n \n     private void updateViews() {\n@@ -98,7 +78,7 @@ private void saveNote() {\n         String desc = description.getText().toString();\n \n         if(isEmpty(name,desc)) {\n-            showToast(\"Title and Descriptions fields should not be empty\");\n+            Toast.makeText(getActivity(), \"Title and Descriptions fields should not be empty\", Toast.LENGTH_SHORT).show();\n             return;\n         } else if (notExistingNote()) {\n             saveNewNote(name, desc);\n@@ -110,17 +90,7 @@ private void saveNote() {\n     }\n \n     private void saveNewNote(String name, String desc) {\n-        notebookRef.add(new NoteModel(name, desc)).addOnSuccessListener(new OnSuccessListener<DocumentReference>() {\n-            @Override\n-            public void onSuccess(DocumentReference documentReference) {\n-                showToast(\"Note added successfully\");\n-            }\n-        }).addOnFailureListener(new OnFailureListener() {\n-            @Override\n-            public void onFailure(@NonNull Exception e) {\n-                showToast(\"Something went wrong\");\n-            }\n-        });\n+        notebookRef.add(new NoteModel(name, desc));\n     }\n \n     private void editNote(String name, String desc) {\n@@ -144,8 +114,4 @@ private boolean notExistingNote() {\n     private boolean isEmpty(String name, String desc) {\n         return name.trim().isEmpty() || desc.trim().isEmpty();\n     }\n-\n-    private void showToast(String msg) {\n-        Toast.makeText(getActivity(), msg, Toast.LENGTH_SHORT).show();\n-    }\n }"
  },
  {
    "sha": "ef7751df37124bc4cf991feb837941ed789936c9",
    "filename": "src/main/java/com/e/firebasenotesapp/NotesListFragment.java",
    "status": "modified",
    "additions": 28,
    "deletions": 13,
    "changes": 41,
    "blob_url": "https://github.com/ShMike6491/NotesApplicationWithFirestore/blob/c9fac9868e8a230e8d82dee8c5ef777caf32dd56/src/main/java/com/e/firebasenotesapp/NotesListFragment.java",
    "raw_url": "https://github.com/ShMike6491/NotesApplicationWithFirestore/raw/c9fac9868e8a230e8d82dee8c5ef777caf32dd56/src/main/java/com/e/firebasenotesapp/NotesListFragment.java",
    "contents_url": "https://api.github.com/repos/ShMike6491/NotesApplicationWithFirestore/contents/src/main/java/com/e/firebasenotesapp/NotesListFragment.java?ref=c9fac9868e8a230e8d82dee8c5ef777caf32dd56",
    "patch": "@@ -1,5 +1,7 @@\n package com.e.firebasenotesapp;\n \n+import android.app.AlertDialog;\n+import android.content.DialogInterface;\n import android.os.Bundle;\n import android.view.LayoutInflater;\n import android.view.View;\n@@ -13,6 +15,7 @@\n import androidx.recyclerview.widget.RecyclerView;\n \n import com.firebase.ui.firestore.FirestoreRecyclerOptions;\n+import com.google.android.material.bottomsheet.BottomSheetDialogFragment;\n import com.google.android.material.floatingactionbutton.FloatingActionButton;\n import com.google.firebase.firestore.CollectionReference;\n import com.google.firebase.firestore.DocumentSnapshot;\n@@ -105,29 +108,41 @@ public boolean onMove(\n             @Override\n             public void onSwiped(@NonNull RecyclerView.ViewHolder viewHolder, int direction)\n             {\n-                adapter.deleteItem(viewHolder.getAdapterPosition());\n+                showConfirmDialog(viewHolder.getAdapterPosition());\n             }\n         }).attachToRecyclerView(recyclerView);\n     }\n \n+    private void showConfirmDialog(final int itemPosition) {\n+        new AlertDialog.Builder(requireContext())\n+                .setTitle(R.string.dialog_title)\n+                .setMessage(R.string.dialog_description)\n+                .setPositiveButton(R.string.dialog_button, new DialogInterface.OnClickListener() {\n+                    @Override\n+                    public void onClick(DialogInterface dialog, int which) {\n+                        adapter.deleteItem(itemPosition);\n+                    }\n+                })\n+                .setOnCancelListener(new DialogInterface.OnCancelListener() {\n+                    @Override\n+                    public void onCancel(DialogInterface dialog) {\n+                        adapter.notifyItemChanged(itemPosition);\n+                    }\n+                })\n+                .create()\n+                .show();\n+    }\n+\n     private void goToAddFragment() {\n-        Fragment fragment = new NoteFragment();\n-        requireActivity().getSupportFragmentManager()\n-                .beginTransaction()\n-                .replace(R.id.layout_container, fragment)\n-                .addToBackStack(null)\n-                .commit();\n+        BottomSheetDialogFragment fragment = new NoteFragment();\n+        fragment.show(getChildFragmentManager(), null);\n     }\n \n     private void gotoEditFragment(DocumentSnapshot documentSnapshot, int position) {\n         NoteModel note = documentSnapshot.toObject(NoteModel.class);\n         String id = documentSnapshot.getId();\n \n-        Fragment fragment = NoteFragment.newInstance(note, id);\n-        requireActivity().getSupportFragmentManager()\n-                .beginTransaction()\n-                .replace(R.id.layout_container, fragment)\n-                .addToBackStack(null)\n-                .commit();\n+        BottomSheetDialogFragment fragment = NoteFragment.newInstance(note, id);\n+        fragment.show(getChildFragmentManager(), null);\n     }\n }"
  },
  {
    "sha": "c8d7f3315ca2213b0261d8f09f8e6ab9ce1f3c6c",
    "filename": "src/main/res/layout/fragment_note.xml",
    "status": "modified",
    "additions": 7,
    "deletions": 0,
    "changes": 7,
    "blob_url": "https://github.com/ShMike6491/NotesApplicationWithFirestore/blob/c9fac9868e8a230e8d82dee8c5ef777caf32dd56/src/main/res/layout/fragment_note.xml",
    "raw_url": "https://github.com/ShMike6491/NotesApplicationWithFirestore/raw/c9fac9868e8a230e8d82dee8c5ef777caf32dd56/src/main/res/layout/fragment_note.xml",
    "contents_url": "https://api.github.com/repos/ShMike6491/NotesApplicationWithFirestore/contents/src/main/res/layout/fragment_note.xml?ref=c9fac9868e8a230e8d82dee8c5ef777caf32dd56",
    "patch": "@@ -21,4 +21,11 @@\n         android:minLines=\"4\"\n         android:layout_marginTop=\"@dimen/space_middle\"/>\n \n+    <Button\n+        android:id=\"@+id/mb_submit\"\n+        android:layout_width=\"match_parent\"\n+        android:layout_height=\"wrap_content\"\n+        android:layout_marginTop=\"@dimen/space_middle\"\n+        android:text=\"@string/submit\"/>\n+\n </LinearLayout>\n\\ No newline at end of file"
  },
  {
    "sha": "03780ab777033f641d9373474e0237a2a5754c11",
    "filename": "src/main/res/values/strings.xml",
    "status": "modified",
    "additions": 5,
    "deletions": 0,
    "changes": 5,
    "blob_url": "https://github.com/ShMike6491/NotesApplicationWithFirestore/blob/c9fac9868e8a230e8d82dee8c5ef777caf32dd56/src/main/res/values/strings.xml",
    "raw_url": "https://github.com/ShMike6491/NotesApplicationWithFirestore/raw/c9fac9868e8a230e8d82dee8c5ef777caf32dd56/src/main/res/values/strings.xml",
    "contents_url": "https://api.github.com/repos/ShMike6491/NotesApplicationWithFirestore/contents/src/main/res/values/strings.xml?ref=c9fac9868e8a230e8d82dee8c5ef777caf32dd56",
    "patch": "@@ -4,4 +4,9 @@\n     <string name=\"save\">Save</string>\n     <string name=\"title\">Title</string>\n     <string name=\"description\">Description</string>\n+\n+    <string name=\"dialog_title\">Confirm message</string>\n+    <string name=\"dialog_description\">Are you sure you want to delete this item?</string>\n+    <string name=\"dialog_button\">OK</string>\n+    <string name=\"submit\">SUBMIT</string>\n </resources>"
  }
]
