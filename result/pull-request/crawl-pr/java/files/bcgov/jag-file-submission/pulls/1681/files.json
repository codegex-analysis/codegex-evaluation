[
  {
    "sha": "de9f51da8c7755c917b79b0d979cf95274cb4ea1",
    "filename": "docker-compose.yml",
    "status": "modified",
    "additions": 4,
    "deletions": 2,
    "changes": 6,
    "blob_url": "https://github.com/bcgov/jag-file-submission/blob/cea0c9d586018b0089102a6f63dd25ec468ced9e/docker-compose.yml",
    "raw_url": "https://github.com/bcgov/jag-file-submission/raw/cea0c9d586018b0089102a6f63dd25ec468ced9e/docker-compose.yml",
    "contents_url": "https://api.github.com/repos/bcgov/jag-file-submission/contents/docker-compose.yml?ref=cea0c9d586018b0089102a6f63dd25ec468ced9e",
    "patch": "@@ -46,7 +46,7 @@ services:\n       - BAMBORA_PROFILE_SERVICE_VERSION=${BAMBORA_PROFILE_SERVICE_VERSION}\n       - BAMBORA_URL_EXPIRY=10\n \n-      - KEYCLOAK_AUTH_SERVER_URL=${KEYCLOAK_AUTH_SERVER_URL:-http://keycloak:8080/auth}\n+      - KEYCLOAK_AUTH_SERVER_URL=${KEYCLOAK_AUTH_SERVER_URL:-http://keycloak:8081/auth}\n       - KEYCLOAK_REALM=${KEYCLOAK_REALM:-Efiling-Hub}\n       - KEYCLOAK_CREDENTIALS_SECRET=${KEYCLOAK_CREDENTIALS_SECRET}\n       - KEYCLOAK_SSL_REQUIRED=${KEYCLOAK_SSL_REQUIRED:-none}\n@@ -89,6 +89,8 @@ services:\n       - REDIS_PORT=6379\n       - REDIS_PASSWORD=admin\n \n+      - MAIL_SEND_BASE_URL=${MAIL_SEND_BASE_URL:-http://localhost:8091}\n+      \n       - NAVIGATION_BASE_URL=http://localhost:3000/efilinghub\n       - NAVIGATION_EXPIRYTIME=10\n \n@@ -253,7 +255,7 @@ services:\n     build:\n       context: https://github.com/bcgov/jag-mail-it.git#main:src\n     ports:\n-      - \"8090:8080\"\n+      - \"8091:8080\"\n     environment:\n       - JMT_SPRING_REDIS_PORT=6379\n       - JMT_SPRING_REDIS_HOST=redis"
  },
  {
    "sha": "7a8ffc825806d25c656aa8349f7d3be697b4c3db",
    "filename": "src/backend/efiling-api/pom.xml",
    "status": "modified",
    "additions": 364,
    "deletions": 351,
    "changes": 715,
    "blob_url": "https://github.com/bcgov/jag-file-submission/blob/cea0c9d586018b0089102a6f63dd25ec468ced9e/src/backend/efiling-api/pom.xml",
    "raw_url": "https://github.com/bcgov/jag-file-submission/raw/cea0c9d586018b0089102a6f63dd25ec468ced9e/src/backend/efiling-api/pom.xml",
    "contents_url": "https://api.github.com/repos/bcgov/jag-file-submission/contents/src/backend/efiling-api/pom.xml?ref=cea0c9d586018b0089102a6f63dd25ec468ced9e",
    "patch": "@@ -1,382 +1,395 @@\n <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n-<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n-         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\">\n-    <modelVersion>4.0.0</modelVersion>\n-    <parent>\n-        <groupId>org.springframework.boot</groupId>\n-        <artifactId>spring-boot-starter-parent</artifactId>\n-        <version>2.4.0</version>\n-        <relativePath/> <!-- lookup parent from repository -->\n-    </parent>\n-    <groupId>ca.bc.gov.open.jag</groupId>\n-    <artifactId>efiling-api</artifactId>\n-    <version>0.7.0-SNAPSHOT</version>\n-    <name>efiling-api</name>\n-    <description>Demo project for Spring Boot</description>\n-\n-    <properties>\n-        <java.version>1.8</java.version>\n-        <org.mapstruct.version>1.4.2.Final</org.mapstruct.version>\n-        <default-package>ca.bc.gov.open.jag.efilingapi</default-package>\n-    </properties>\n-    <dependencies>\n-\n-        <dependency>\n-            <groupId>org.springframework.boot</groupId>\n-            <artifactId>spring-boot-starter-web</artifactId>\n-        </dependency>\n-\n-        <dependency>\n-            <groupId>org.springframework.boot</groupId>\n-            <artifactId>spring-boot-starter-test</artifactId>\n-            <scope>test</scope>\n-            <exclusions>\n-                <exclusion>\n-                    <groupId>org.junit.vintage</groupId>\n-                    <artifactId>junit-vintage-engine</artifactId>\n-                </exclusion>\n-            </exclusions>\n-        </dependency>\n-\n-        <dependency>\n-            <groupId>org.springframework.boot</groupId>\n-            <artifactId>spring-boot-starter-actuator</artifactId>\n-        </dependency>\n-\n-        <dependency>\n-            <groupId>org.springframework.boot</groupId>\n-            <artifactId>spring-boot-starter-cache</artifactId>\n-        </dependency>\n-\n-        <dependency>\n-            <groupId>org.springframework.boot</groupId>\n-            <artifactId>spring-boot-starter-security</artifactId>\n-        </dependency>\n-\n-        <dependency>\n-            <groupId>ca.bc.gov.open.jag</groupId>\n-            <artifactId>efiling-commons</artifactId>\n-            <version>0.7.0-SNAPSHOT</version>\n-        </dependency>\n-\n-        <dependency>\n-            <groupId>ca.bc.gov.open</groupId>\n-            <artifactId>spring-sftp-starter</artifactId>\n-        </dependency>\n-\n-        <dependency>\n-            <groupId>ca.bc.gov.open</groupId>\n-            <artifactId>spring-bceid-starter</artifactId>\n-        </dependency>\n-\n-        <dependency>\n-            <groupId>ca.bc.gov.open</groupId>\n-            <artifactId>spring-clamav-starter</artifactId>\n-        </dependency>\n-\n-        <dependency>\n-            <groupId>ca.bc.gov.open</groupId>\n-            <artifactId>bambora-payment-starter</artifactId>\n-        </dependency>\n-\n-        <dependency>\n-            <groupId>commons-codec</groupId>\n-            <artifactId>commons-codec</artifactId>\n-        </dependency>\n-\n-        <dependency>\n-            <groupId>org.apache.commons</groupId>\n-            <artifactId>commons-lang3</artifactId>\n-        </dependency>\n-\n-        <dependency>\n-            <groupId>org.apache.tika</groupId>\n-            <artifactId>tika-core</artifactId>\n-        </dependency>\n-\n-        <dependency>\n-            <groupId>joda-time</groupId>\n-            <artifactId>joda-time</artifactId>\n-        </dependency>\n-\n-        <dependency>\n-            <groupId>javax.validation</groupId>\n-            <artifactId>validation-api</artifactId>\n-        </dependency>\n-\n-        <!-- Logging -->\n-        <dependency>\n-            <groupId>ch.qos.logback</groupId>\n-            <artifactId>logback-classic</artifactId>\n-        </dependency>\n-        <dependency>\n-            <groupId>ch.qos.logback</groupId>\n-            <artifactId>logback-core</artifactId>\n-        </dependency>\n-        <dependency>\n-            <groupId>ch.qos.logback</groupId>\n-            <artifactId>logback-access</artifactId>\n-        </dependency>\n-\n-        <dependency>\n-            <groupId>net.rakugakibox.spring.boot</groupId>\n-            <artifactId>logback-access-spring-boot-starter</artifactId>\n-        </dependency>\n-\n-        <!-- Swagger -->\n-        <dependency>\n-            <groupId>io.swagger</groupId>\n-            <artifactId>swagger-annotations</artifactId>\n-        </dependency>\n-        <dependency>\n-            <groupId>org.springdoc</groupId>\n-            <artifactId>springdoc-openapi-ui</artifactId>\n-        </dependency>\n-        <dependency>\n-            <groupId>io.springfox</groupId>\n-            <artifactId>springfox-swagger2</artifactId>\n-        </dependency>\n-        <dependency>\n-            <groupId>io.springfox</groupId>\n-            <artifactId>springfox-swagger-ui</artifactId>\n-        </dependency>\n-\n-        <!-- Redis -->\n-        <dependency>\n-            <groupId>org.springframework.boot</groupId>\n-            <artifactId>spring-boot-starter-data-redis</artifactId>\n-        </dependency>\n-        <dependency>\n-            <groupId>org.springframework.data</groupId>\n-            <artifactId>spring-data-redis</artifactId>\n-        </dependency>\n-        <dependency>\n-            <groupId>redis.clients</groupId>\n-            <artifactId>jedis</artifactId>\n-        </dependency>\n-\n-        <dependency>\n-            <groupId>org.mapstruct</groupId>\n-            <artifactId>mapstruct</artifactId>\n-        </dependency>\n-\n-        <dependency>\n-            <groupId>org.openapitools</groupId>\n-            <artifactId>jackson-databind-nullable</artifactId>\n-        </dependency>\n-\n-        <dependency>\n-            <groupId>org.keycloak</groupId>\n-            <artifactId>keycloak-spring-boot-starter</artifactId>\n-        </dependency>\n-\n-\n-        <dependency>\n-            <groupId>org.apache.commons</groupId>\n-            <artifactId>commons-collections4</artifactId>\n-        </dependency>\n-        <!-- https://mvnrepository.com/artifact/org.apache.skywalking/apm-toolkit-trace -->\n-        <dependency>\n-            <groupId>org.apache.skywalking</groupId>\n-            <artifactId>apm-toolkit-trace</artifactId>\n-            <scope>provided</scope>\n-        </dependency>\n-\n-        <!-- https://mvnrepository.com/artifact/org.apache.skywalking/apm-toolkit-logback-1.x -->\n-        <dependency>\n-            <groupId>org.apache.skywalking</groupId>\n-            <artifactId>apm-toolkit-logback-1.x</artifactId>\n-        </dependency>\n-\n-    </dependencies>\n-\n-    <dependencyManagement>\n-        <dependencies>\n-            <dependency>\n-                <groupId>ca.bc.gov.open.jag</groupId>\n-                <artifactId>efiling-bom</artifactId>\n-                <version>0.7.0-SNAPSHOT</version>\n-                <type>pom</type>\n-                <scope>import</scope>\n-            </dependency>\n-            <dependency>\n-                <groupId>org.keycloak.bom</groupId>\n-                <artifactId>keycloak-adapter-bom</artifactId>\n-                <version>11.0.3</version>\n-                <type>pom</type>\n-                <scope>import</scope>\n-            </dependency>\n-        </dependencies>\n-    </dependencyManagement>\n-\n-    <profiles>\n-\n-        <profile>\n-            <id>default</id>\n-        </profile>\n-\n-        <profile>\n-\n-            <id>efiling-api</id>\n-\n-            <dependencies>\n-\n-                <dependency>\n-                    <groupId>ca.bc.gov.open.jag</groupId>\n-                    <artifactId>efiling-cso-starter</artifactId>\n-                    <version>0.7.0-SNAPSHOT</version>\n-                </dependency>\n-\n-                <dependency>\n-                    <groupId>ca.bc.gov.open.jag</groupId>\n-                    <artifactId>efiling-bambora-api-client</artifactId>\n-                    <version>0.7.0-SNAPSHOT</version>\n-                </dependency>\n-\n-                <dependency>\n-                    <groupId>ca.bc.gov.open.jag</groupId>\n-                    <artifactId>efiling-ceis-api-client</artifactId>\n-                    <version>0.7.0-SNAPSHOT</version>\n-                </dependency>\n-\n-            </dependencies>\n-\n-        </profile>\n-\n-        <profile>\n-\n-            <id>splunk</id>\n-\n-            <repositories>\n-                <repository>\n-                    <id>splunk-artifactory</id>\n-                    <name>Splunk Releases</name>\n-                    <url>https://splunk.jfrog.io/splunk/ext-releases-local</url>\n-                </repository>\n-            </repositories>\n-\n-            <dependencies>\n-                <dependency>\n-                    <groupId>com.splunk.logging</groupId>\n-                    <artifactId>splunk-library-javalogging</artifactId>\n-                    <version>1.8.0</version>\n-                </dependency>\n-            </dependencies>\n-\n-        </profile>\n-\n-        <profile>\n-            <id>efiling-api-demo</id>\n-            <dependencies>\n-                <dependency>\n-                    <groupId>ca.bc.gov.open.jag</groupId>\n-                    <artifactId>efiling-demo-starter</artifactId>\n-                    <version>0.7.0-SNAPSHOT</version>\n-                </dependency>\n-            </dependencies>\n-        </profile>\n-    </profiles>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+\txsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+\t<modelVersion>4.0.0</modelVersion>\n+\t<parent>\n+\t\t<groupId>org.springframework.boot</groupId>\n+\t\t<artifactId>spring-boot-starter-parent</artifactId>\n+\t\t<version>2.4.0</version>\n+\t\t<relativePath /> <!-- lookup parent from repository -->\n+\t</parent>\n+\t<groupId>ca.bc.gov.open.jag</groupId>\n+\t<artifactId>efiling-api</artifactId>\n+\t<version>0.7.0-SNAPSHOT</version>\n+\t<name>efiling-api</name>\n+\t<description>Demo project for Spring Boot</description>\n+\n+\t<properties>\n+\t\t<java.version>1.8</java.version>\n+\t\t<org.mapstruct.version>1.4.2.Final</org.mapstruct.version>\n+\t\t<default-package>ca.bc.gov.open.jag.efilingapi</default-package>\n+\t</properties>\n+\t<dependencies>\n+\n+\t\t<dependency>\n+\t\t\t<groupId>org.springframework.boot</groupId>\n+\t\t\t<artifactId>spring-boot-starter-web</artifactId>\n+\t\t</dependency>\n+\n+\t\t<dependency>\n+\t\t\t<groupId>org.springframework.boot</groupId>\n+\t\t\t<artifactId>spring-boot-starter-test</artifactId>\n+\t\t\t<scope>test</scope>\n+\t\t\t<exclusions>\n+\t\t\t\t<exclusion>\n+\t\t\t\t\t<groupId>org.junit.vintage</groupId>\n+\t\t\t\t\t<artifactId>junit-vintage-engine</artifactId>\n+\t\t\t\t</exclusion>\n+\t\t\t</exclusions>\n+\t\t</dependency>\n+\n+\t\t<dependency>\n+\t\t\t<groupId>org.springframework.boot</groupId>\n+\t\t\t<artifactId>spring-boot-starter-actuator</artifactId>\n+\t\t</dependency>\n+\n+\t\t<dependency>\n+\t\t\t<groupId>org.springframework.boot</groupId>\n+\t\t\t<artifactId>spring-boot-starter-cache</artifactId>\n+\t\t</dependency>\n+\n+\t\t<dependency>\n+\t\t\t<groupId>org.springframework.boot</groupId>\n+\t\t\t<artifactId>spring-boot-starter-security</artifactId>\n+\t\t</dependency>\n+\n+\t\t<dependency>\n+\t\t\t<groupId>ca.bc.gov.open.jag</groupId>\n+\t\t\t<artifactId>efiling-commons</artifactId>\n+\t\t\t<version>0.7.0-SNAPSHOT</version>\n+\t\t</dependency>\n+\n+\t\t<dependency>\n+\t\t\t<groupId>ca.bc.gov.open</groupId>\n+\t\t\t<artifactId>spring-sftp-starter</artifactId>\n+\t\t</dependency>\n+\n+\t\t<dependency>\n+\t\t\t<groupId>ca.bc.gov.open</groupId>\n+\t\t\t<artifactId>spring-bceid-starter</artifactId>\n+\t\t</dependency>\n+\n+\t\t<dependency>\n+\t\t\t<groupId>ca.bc.gov.open</groupId>\n+\t\t\t<artifactId>spring-clamav-starter</artifactId>\n+\t\t</dependency>\n+\n+\t\t<dependency>\n+\t\t\t<groupId>ca.bc.gov.open</groupId>\n+\t\t\t<artifactId>bambora-payment-starter</artifactId>\n+\t\t</dependency>\n+\n+\t\t<dependency>\n+\t\t\t<groupId>commons-codec</groupId>\n+\t\t\t<artifactId>commons-codec</artifactId>\n+\t\t</dependency>\n+\n+\t\t<dependency>\n+\t\t\t<groupId>org.apache.commons</groupId>\n+\t\t\t<artifactId>commons-lang3</artifactId>\n+\t\t</dependency>\n+\n+\t\t<dependency>\n+\t\t\t<groupId>org.apache.tika</groupId>\n+\t\t\t<artifactId>tika-core</artifactId>\n+\t\t</dependency>\n+\n+\t\t<dependency>\n+\t\t\t<groupId>joda-time</groupId>\n+\t\t\t<artifactId>joda-time</artifactId>\n+\t\t</dependency>\n+\n+\t\t<dependency>\n+\t\t\t<groupId>javax.validation</groupId>\n+\t\t\t<artifactId>validation-api</artifactId>\n+\t\t</dependency>\n+\n+\t\t<!-- Logging -->\n+\t\t<dependency>\n+\t\t\t<groupId>ch.qos.logback</groupId>\n+\t\t\t<artifactId>logback-classic</artifactId>\n+\t\t</dependency>\n+\t\t<dependency>\n+\t\t\t<groupId>ch.qos.logback</groupId>\n+\t\t\t<artifactId>logback-core</artifactId>\n+\t\t</dependency>\n+\t\t<dependency>\n+\t\t\t<groupId>ch.qos.logback</groupId>\n+\t\t\t<artifactId>logback-access</artifactId>\n+\t\t</dependency>\n+\n+\t\t<dependency>\n+\t\t\t<groupId>net.rakugakibox.spring.boot</groupId>\n+\t\t\t<artifactId>logback-access-spring-boot-starter</artifactId>\n+\t\t</dependency>\n+\n+\t\t<!-- Swagger -->\n+\t\t<dependency>\n+\t\t\t<groupId>io.swagger</groupId>\n+\t\t\t<artifactId>swagger-annotations</artifactId>\n+\t\t</dependency>\n+\t\t<dependency>\n+\t\t\t<groupId>org.springdoc</groupId>\n+\t\t\t<artifactId>springdoc-openapi-ui</artifactId>\n+\t\t</dependency>\n+\t\t<dependency>\n+\t\t\t<groupId>io.springfox</groupId>\n+\t\t\t<artifactId>springfox-swagger2</artifactId>\n+\t\t</dependency>\n+\t\t<dependency>\n+\t\t\t<groupId>io.springfox</groupId>\n+\t\t\t<artifactId>springfox-swagger-ui</artifactId>\n+\t\t</dependency>\n+\n+\t\t<!-- Redis -->\n+\t\t<dependency>\n+\t\t\t<groupId>org.springframework.boot</groupId>\n+\t\t\t<artifactId>spring-boot-starter-data-redis</artifactId>\n+\t\t</dependency>\n+\t\t<dependency>\n+\t\t\t<groupId>org.springframework.data</groupId>\n+\t\t\t<artifactId>spring-data-redis</artifactId>\n+\t\t</dependency>\n+\t\t<dependency>\n+\t\t\t<groupId>redis.clients</groupId>\n+\t\t\t<artifactId>jedis</artifactId>\n+\t\t</dependency>\n+\n+\t\t<dependency>\n+\t\t\t<groupId>org.mapstruct</groupId>\n+\t\t\t<artifactId>mapstruct</artifactId>\n+\t\t</dependency>\n+\n+\t\t<dependency>\n+\t\t\t<groupId>org.openapitools</groupId>\n+\t\t\t<artifactId>jackson-databind-nullable</artifactId>\n+\t\t</dependency>\n+\n+\t\t<dependency>\n+\t\t\t<groupId>org.keycloak</groupId>\n+\t\t\t<artifactId>keycloak-spring-boot-starter</artifactId>\n+\t\t</dependency>\n+\n+\n+\t\t<dependency>\n+\t\t\t<groupId>org.apache.commons</groupId>\n+\t\t\t<artifactId>commons-collections4</artifactId>\n+\t\t</dependency>\n+\t\t<!-- https://mvnrepository.com/artifact/org.apache.skywalking/apm-toolkit-trace -->\n+\t\t<dependency>\n+\t\t\t<groupId>org.apache.skywalking</groupId>\n+\t\t\t<artifactId>apm-toolkit-trace</artifactId>\n+\t\t\t<scope>provided</scope>\n+\t\t</dependency>\n+\n+\t\t<!-- https://mvnrepository.com/artifact/org.apache.skywalking/apm-toolkit-logback-1.x -->\n+\t\t<dependency>\n+\t\t\t<groupId>org.apache.skywalking</groupId>\n+\t\t\t<artifactId>apm-toolkit-logback-1.x</artifactId>\n+\t\t</dependency>\n+\n+\t</dependencies>\n+\n+\t<dependencyManagement>\n+\t\t<dependencies>\n+\t\t\t<dependency>\n+\t\t\t\t<groupId>ca.bc.gov.open.jag</groupId>\n+\t\t\t\t<artifactId>efiling-bom</artifactId>\n+\t\t\t\t<version>0.7.0-SNAPSHOT</version>\n+\t\t\t\t<type>pom</type>\n+\t\t\t\t<scope>import</scope>\n+\t\t\t</dependency>\n+\t\t\t<dependency>\n+\t\t\t\t<groupId>org.keycloak.bom</groupId>\n+\t\t\t\t<artifactId>keycloak-adapter-bom</artifactId>\n+\t\t\t\t<version>11.0.3</version>\n+\t\t\t\t<type>pom</type>\n+\t\t\t\t<scope>import</scope>\n+\t\t\t</dependency>\n+\t\t</dependencies>\n+\t</dependencyManagement>\n+\n+\t<profiles>\n+\n+\t\t<profile>\n+\t\t\t<id>default</id>\n+\t\t</profile>\n+\n+\t\t<profile>\n+\n+\t\t\t<id>efiling-api</id>\n+\n+\t\t\t<dependencies>\n+\n+\t\t\t\t<dependency>\n+\t\t\t\t\t<groupId>ca.bc.gov.open.jag</groupId>\n+\t\t\t\t\t<artifactId>efiling-cso-starter</artifactId>\n+\t\t\t\t\t<version>0.7.0-SNAPSHOT</version>\n+\t\t\t\t</dependency>\n+\n+\t\t\t\t<dependency>\n+\t\t\t\t\t<groupId>ca.bc.gov.open.jag</groupId>\n+\t\t\t\t\t<artifactId>efiling-bambora-api-client</artifactId>\n+\t\t\t\t\t<version>0.7.0-SNAPSHOT</version>\n+\t\t\t\t</dependency>\n+\n+\t\t\t\t<dependency>\n+\t\t\t\t\t<groupId>ca.bc.gov.open.jag</groupId>\n+\t\t\t\t\t<artifactId>efiling-ceis-api-client</artifactId>\n+\t\t\t\t\t<version>0.7.0-SNAPSHOT</version>\n+\t\t\t\t</dependency>\n+\n+\t\t\t\t<dependency>\n+\t\t\t\t\t<groupId>ca.bc.gov.open.jag</groupId>\n+\t\t\t\t\t<artifactId>efiling-mail-it</artifactId>\n+\t\t\t\t\t<version>0.0.1-SNAPSHOT</version>\n+\t\t\t\t</dependency>\n+\n+\t\t\t</dependencies>\n+\n+\t\t</profile>\n+\n+\t\t<profile>\n+\n+\t\t\t<id>splunk</id>\n+\n+\t\t\t<repositories>\n+\t\t\t\t<repository>\n+\t\t\t\t\t<id>splunk-artifactory</id>\n+\t\t\t\t\t<name>Splunk Releases</name>\n+\t\t\t\t\t<url>https://splunk.jfrog.io/splunk/ext-releases-local</url>\n+\t\t\t\t</repository>\n+\t\t\t</repositories>\n+\n+\t\t\t<dependencies>\n+\t\t\t\t<dependency>\n+\t\t\t\t\t<groupId>com.splunk.logging</groupId>\n+\t\t\t\t\t<artifactId>splunk-library-javalogging</artifactId>\n+\t\t\t\t\t<version>1.8.0</version>\n+\t\t\t\t</dependency>\n+\t\t\t</dependencies>\n+\n+\t\t</profile>\n+\n+\t\t<profile>\n+\t\t\t<id>efiling-api-demo</id>\n+\t\t\t<dependencies>\n+\t\t\t\t<dependency>\n+\t\t\t\t\t<groupId>ca.bc.gov.open.jag</groupId>\n+\t\t\t\t\t<artifactId>efiling-demo-starter</artifactId>\n+\t\t\t\t\t<version>0.7.0-SNAPSHOT</version>\n+\t\t\t\t</dependency>\n+\n+\t\t\t\t<dependency>\n+\t\t\t\t\t<groupId>ca.bc.gov.open.jag</groupId>\n+\t\t\t\t\t<artifactId>efiling-mail-it</artifactId>\n+\t\t\t\t\t<version>0.0.1-SNAPSHOT</version>\n+\t\t\t\t</dependency>\n+\t\t\t</dependencies>\n+\t\t</profile>\n+\t</profiles>\n     <build>\n         <plugins>\n \n             <!--spring boot build-->\n             <plugin>\n                 <groupId>org.springframework.boot</groupId>\n                 <artifactId>spring-boot-maven-plugin</artifactId>\n-                <configuration>\n-                    <mainClass>ca.bc.gov.open.jag.efilingapi.EfilingApiApplication</mainClass>\n-                </configuration>\n-            </plugin>\n-\n-            <plugin>\n-                <groupId>org.apache.maven.plugins</groupId>\n-                <artifactId>maven-surefire-plugin</artifactId>\n-                <version>2.22.2</version>\n-            </plugin>\n-\n-            <plugin>\n-                <groupId>org.apache.maven.plugins</groupId>\n-                <artifactId>maven-failsafe-plugin</artifactId>\n+\t\t\t\t<configuration>\n+\t\t\t\t\t<mainClass>ca.bc.gov.open.jag.efilingapi.EfilingApiApplication</mainClass>\n+\t\t\t\t</configuration>\n+\t\t\t</plugin>\n+\n+\t\t\t<plugin>\n+\t\t\t\t<groupId>org.apache.maven.plugins</groupId>\n+\t\t\t\t<artifactId>maven-surefire-plugin</artifactId>\n+\t\t\t\t<version>2.22.2</version>\n+\t\t\t</plugin>\n+\n+\t\t\t<plugin>\n+\t\t\t\t<groupId>org.apache.maven.plugins</groupId>\n+\t\t\t\t<artifactId>maven-failsafe-plugin</artifactId>\n                 <version>2.22.2</version>\n             </plugin>\n \n             <!--openapi server autogen-->\n             <plugin>\n                 <groupId>org.openapitools</groupId>\n                 <artifactId>openapi-generator-maven-plugin</artifactId>\n-                <version>4.3.1</version>\n-                <executions>\n-                    <execution>\n-                        <id>spring-boot-api</id>\n-                        <goals>\n-                            <goal>generate</goal>\n-                        </goals>\n-                        <configuration>\n-                            <inputSpec>${project.basedir}/jag-efiling-api.yaml</inputSpec>\n-                            <generatorName>spring</generatorName>\n-                            <configOptions>\n-                                <dateLibrary>joda</dateLibrary>\n-                                <delegatePattern>true</delegatePattern>\n-                            </configOptions>\n-                            <library>spring-boot</library>\n-                            <apiPackage>${default-package}.api</apiPackage>\n-                            <modelPackage>${default-package}.api.model</modelPackage>\n-                            <invokerPackage>${default-package}.api.handler</invokerPackage>\n-                        </configuration>\n-                    </execution>\n+\t\t\t\t<version>4.3.1</version>\n+\t\t\t\t<executions>\n+\t\t\t\t\t<execution>\n+\t\t\t\t\t\t<id>spring-boot-api</id>\n+\t\t\t\t\t\t<goals>\n+\t\t\t\t\t\t\t<goal>generate</goal>\n+\t\t\t\t\t\t</goals>\n+\t\t\t\t\t\t<configuration>\n+\t\t\t\t\t\t\t<inputSpec>${project.basedir}/jag-efiling-api.yaml</inputSpec>\n+\t\t\t\t\t\t\t<generatorName>spring</generatorName>\n+\t\t\t\t\t\t\t<configOptions>\n+\t\t\t\t\t\t\t\t<dateLibrary>joda</dateLibrary>\n+\t\t\t\t\t\t\t\t<delegatePattern>true</delegatePattern>\n+\t\t\t\t\t\t\t</configOptions>\n+\t\t\t\t\t\t\t<library>spring-boot</library>\n+\t\t\t\t\t\t\t<apiPackage>${default-package}.api</apiPackage>\n+\t\t\t\t\t\t\t<modelPackage>${default-package}.api.model</modelPackage>\n+\t\t\t\t\t\t\t<invokerPackage>${default-package}.api.handler</invokerPackage>\n+\t\t\t\t\t\t</configuration>\n+\t\t\t\t\t</execution>\n                 </executions>\n             </plugin>\n \n             <!--mapstruct mapper autogen-->\n             <plugin>\n                 <groupId>org.apache.maven.plugins</groupId>\n                 <artifactId>maven-compiler-plugin</artifactId>\n-                <configuration>\n-                    <source>${java.version}</source>\n-                    <target>${java.version}</target>\n-                    <annotationProcessorPaths>\n-                        <path>\n-                            <groupId>org.mapstruct</groupId>\n-                            <artifactId>mapstruct-processor</artifactId>\n-                            <version>${org.mapstruct.version}</version>\n-                        </path>\n-                    </annotationProcessorPaths>\n+\t\t\t\t<configuration>\n+\t\t\t\t\t<source>${java.version}</source>\n+\t\t\t\t\t<target>${java.version}</target>\n+\t\t\t\t\t<annotationProcessorPaths>\n+\t\t\t\t\t\t<path>\n+\t\t\t\t\t\t\t<groupId>org.mapstruct</groupId>\n+\t\t\t\t\t\t\t<artifactId>mapstruct-processor</artifactId>\n+\t\t\t\t\t\t\t<version>${org.mapstruct.version}</version>\n+\t\t\t\t\t\t</path>\n+\t\t\t\t\t</annotationProcessorPaths>\n                 </configuration>\n             </plugin>\n \n             <!--jacoco code coverage-->\n             <plugin>\n                 <groupId>org.jacoco</groupId>\n                 <artifactId>jacoco-maven-plugin</artifactId>\n-                <version>0.8.6</version>\n-\n-                <configuration>\n-                    <excludes>\n-                        <exclude>**/*/mappers/*Impl.java</exclude>\n-                        <exclude>**/*/efilingapi/api/**/*</exclude>\n-                        <exclude>org/openapitools/configuration/**/*</exclude>\n-                    </excludes>\n-                </configuration>\n-\n-                <executions>\n-                    <execution>\n-                        <goals>\n-                            <goal>prepare-agent</goal>\n-                        </goals>\n-                    </execution>\n-\n-                    <!-- attached to Maven test phase -->\n-                    <execution>\n-                        <id>report</id>\n-                        <phase>test</phase>\n-                        <goals>\n-                            <goal>report</goal>\n-                        </goals>\n-                    </execution>\n-                </executions>\n-            </plugin>\n-\n-        </plugins>\n-    </build>\n+\t\t\t\t<version>0.8.6</version>\n+\n+\t\t\t\t<configuration>\n+\t\t\t\t\t<excludes>\n+\t\t\t\t\t\t<exclude>**/*/mappers/*Impl.java</exclude>\n+\t\t\t\t\t\t<exclude>**/*/efilingapi/api/**/*</exclude>\n+\t\t\t\t\t\t<exclude>org/openapitools/configuration/**/*</exclude>\n+\t\t\t\t\t</excludes>\n+\t\t\t\t</configuration>\n+\n+\t\t\t\t<executions>\n+\t\t\t\t\t<execution>\n+\t\t\t\t\t\t<goals>\n+\t\t\t\t\t\t\t<goal>prepare-agent</goal>\n+\t\t\t\t\t\t</goals>\n+\t\t\t\t\t</execution>\n+\n+\t\t\t\t\t<!-- attached to Maven test phase -->\n+\t\t\t\t\t<execution>\n+\t\t\t\t\t\t<id>report</id>\n+\t\t\t\t\t\t<phase>test</phase>\n+\t\t\t\t\t\t<goals>\n+\t\t\t\t\t\t\t<goal>report</goal>\n+\t\t\t\t\t\t</goals>\n+\t\t\t\t\t</execution>\n+\t\t\t\t</executions>\n+\t\t\t</plugin>\n+\n+\t\t</plugins>\n+\t</build>\n \n </project>"
  },
  {
    "sha": "7063bc5236a18bad70ceb1fc3e206a05e0bcd69b",
    "filename": "src/backend/efiling-api/src/main/java/ca/bc/gov/open/jag/efilingapi/filingpackage/FilingpackageApiDelegateImpl.java",
    "status": "modified",
    "additions": 1,
    "deletions": 0,
    "changes": 1,
    "blob_url": "https://github.com/bcgov/jag-file-submission/blob/cea0c9d586018b0089102a6f63dd25ec468ced9e/src/backend/efiling-api/src/main/java/ca/bc/gov/open/jag/efilingapi/filingpackage/FilingpackageApiDelegateImpl.java",
    "raw_url": "https://github.com/bcgov/jag-file-submission/raw/cea0c9d586018b0089102a6f63dd25ec468ced9e/src/backend/efiling-api/src/main/java/ca/bc/gov/open/jag/efilingapi/filingpackage/FilingpackageApiDelegateImpl.java",
    "contents_url": "https://api.github.com/repos/bcgov/jag-file-submission/contents/src/backend/efiling-api/src/main/java/ca/bc/gov/open/jag/efilingapi/filingpackage/FilingpackageApiDelegateImpl.java?ref=cea0c9d586018b0089102a6f63dd25ec468ced9e",
    "patch": "@@ -84,6 +84,7 @@ public FilingpackageApiDelegateImpl(FilingPackageService filingPackageService) {\n     }\n \n     @Override\n+    @RolesAllowed(\"efiling-user\")\n     public ResponseEntity<Resource> getRegistryNotice(BigDecimal packageIdentifier) {\n \n         logger.info(\"get registry notice request received\");"
  },
  {
    "sha": "c7b7127aa6e9db552cdaa324ee18cffadae8adb1",
    "filename": "src/backend/efiling-api/src/main/java/ca/bc/gov/open/jag/efilingapi/submission/SubmissionApiDelegateImpl.java",
    "status": "modified",
    "additions": 51,
    "deletions": 1,
    "changes": 52,
    "blob_url": "https://github.com/bcgov/jag-file-submission/blob/cea0c9d586018b0089102a6f63dd25ec468ced9e/src/backend/efiling-api/src/main/java/ca/bc/gov/open/jag/efilingapi/submission/SubmissionApiDelegateImpl.java",
    "raw_url": "https://github.com/bcgov/jag-file-submission/raw/cea0c9d586018b0089102a6f63dd25ec468ced9e/src/backend/efiling-api/src/main/java/ca/bc/gov/open/jag/efilingapi/submission/SubmissionApiDelegateImpl.java",
    "contents_url": "https://api.github.com/repos/bcgov/jag-file-submission/contents/src/backend/efiling-api/src/main/java/ca/bc/gov/open/jag/efilingapi/submission/SubmissionApiDelegateImpl.java?ref=cea0c9d586018b0089102a6f63dd25ec468ced9e",
    "patch": "@@ -20,10 +20,18 @@\n import ca.bc.gov.open.jag.efilingapi.core.security.SecurityUtils;\n import ca.bc.gov.open.jag.efilingapi.utils.TikaAnalysis;\n import ca.bc.gov.open.jag.efilingcommons.exceptions.*;\n+import ca.bc.gov.open.jag.efilingcommons.model.AccountDetails;\n+import ca.bc.gov.open.jag.jagmailit.api.MailSendApi;\n+import ca.bc.gov.open.jag.jagmailit.api.handler.ApiException;\n+import ca.bc.gov.open.jag.jagmailit.api.model.EmailObject;\n+import ca.bc.gov.open.jag.jagmailit.api.model.EmailRequest;\n+import ca.bc.gov.open.jag.jagmailit.api.model.EmailRequestContent;\n+\n import org.apache.commons.lang3.StringUtils;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n import org.slf4j.MDC;\n+import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.boot.context.properties.EnableConfigurationProperties;\n import org.springframework.core.io.ByteArrayResource;\n import org.springframework.core.io.Resource;\n@@ -36,6 +44,8 @@\n import java.io.ByteArrayInputStream;\n import java.io.IOException;\n import java.math.BigDecimal;\n+import java.text.MessageFormat;\n+import java.util.Arrays;\n import java.util.List;\n import java.util.Optional;\n import java.util.UUID;\n@@ -56,6 +66,9 @@\n     private final ClamAvService clamAvService;\n     private final FilingPackageMapper filingPackageMapper;\n     private final GenerateUrlRequestValidator generateUrlRequestValidator;\n+    \n+    @Autowired\n+    private MailSendApi mailSendApi;\n \n     public SubmissionApiDelegateImpl(\n             SubmissionService submissionService,\n@@ -402,11 +415,48 @@ public SubmissionApiDelegateImpl(\n         MDC.put(Keys.MDC_EFILING_SUBMISSION_ID, submissionId.toString());\n         try {\n \n-            SubmitResponse result = submissionService.createSubmission(fromCacheSubmission.get(), accountService.getCsoAccountDetails(submissionKey.getUniversalId()), SecurityUtils.isEarlyAdopter());\n+            AccountDetails csoAccountDetails = accountService.getCsoAccountDetails(submissionKey.getUniversalId());\n+\t\t\tSubmitResponse result = submissionService.createSubmission(fromCacheSubmission.get(), csoAccountDetails, SecurityUtils.isEarlyAdopter());\n \n             response = new ResponseEntity(result, HttpStatus.CREATED);\n             logger.info(\"successfully submitted efiling package for transaction [{}], cso id {}\", xTransactionId, result.getPackageRef());\n \n+\t\t\t// Email receipt of a successful submission\n+            try {\n+            \t// TODO: wrap try-catch with a SecurityUtils.hasNotificationRole()\n+            \t\n+            \t// TODO: extract name & email from accountDetails to use in email \n+            \t\n+            \t// TODO: refactor this to a MailUtil for simple method to send a message.\n+            \t// TODO: add FreeMarker as a template engine dependency\n+            \t//    ie. MailUtils.sendMail(\"from\", \"subject\", \"body\", template);\n+            \t            \t\n+                EmailObject emailFrom = new EmailObject();\n+                emailFrom.name(\"Bob Ross 1\");\n+                emailFrom.email(\"from@somewhere.com\");\n+                EmailObject emailTo = new EmailObject();\n+                emailTo.name(\"Bob Ross 2\");\n+                emailTo.email(\"to@somewhere.com\");\n+                EmailObject emailCc = new EmailObject();\n+                emailCc.name(\"Bob Ross 3\");\n+                emailCc.email(\"cc@somewhere.com\");\n+                String subject = MessageFormat.format(\"Efiling-Hub: Submission {0}\", submissionId.toString());\n+                EmailRequestContent content = new EmailRequestContent();\n+                content.setValue(MessageFormat.format(\"Your submission {0} has been successfully sent to CSO.\", submissionId.toString()));\n+                \n+                EmailRequest emailRequest = new EmailRequest();            \n+                emailRequest.setFrom(emailFrom);\n+    \t\t\temailRequest.setTo(Arrays.asList(emailTo));\n+                emailRequest.setCc(Arrays.asList(emailCc));\n+    \t\t\temailRequest.setSubject(subject);\n+    \t\t\temailRequest.setContent(content);\n+    \t\t\t\n+\t\t\t\tmailSendApi.mailSend(emailRequest);\n+\t\t\t} catch (ApiException e) {\n+\t        \tlogger.error(\"failed to send email receipt {}\", xTransactionId);\n+\t        \t// TODO: retry? ignore?\n+\t\t\t} \n+\n         } catch (EfilingSubmissionServiceException e) {\n             logger.error(\"failed package submission {}\", xTransactionId);\n             response = new ResponseEntity(buildEfilingError(ErrorResponse.SUBMISSION_FAILURE), HttpStatus.INTERNAL_SERVER_ERROR);"
  },
  {
    "sha": "ef03cee6240ec8739d3354d34574ce30c8dce0c7",
    "filename": "src/backend/efiling-api/src/main/resources/application.yml",
    "status": "modified",
    "additions": 6,
    "deletions": 6,
    "changes": 12,
    "blob_url": "https://github.com/bcgov/jag-file-submission/blob/cea0c9d586018b0089102a6f63dd25ec468ced9e/src/backend/efiling-api/src/main/resources/application.yml",
    "raw_url": "https://github.com/bcgov/jag-file-submission/raw/cea0c9d586018b0089102a6f63dd25ec468ced9e/src/backend/efiling-api/src/main/resources/application.yml",
    "contents_url": "https://api.github.com/repos/bcgov/jag-file-submission/contents/src/backend/efiling-api/src/main/resources/application.yml?ref=cea0c9d586018b0089102a6f63dd25ec468ced9e",
    "patch": "@@ -13,8 +13,8 @@ spring:\n       max-file-size: ${MAX_FILE_SIZE:10MB}\n       max-request-size: ${MAX_REQUEST_SIZE:100MB}\n keycloak:\n-  auth-server-url: ${KEYCLOAK_AUTH_SERVER_URL}\n-  realm: ${KEYCLOAK_REALM}\n+  auth-server-url: ${KEYCLOAK_AUTH_SERVER_URL:http://localhost:8081/auth}\n+  realm: ${KEYCLOAK_REALM:Efiling-Hub}\n   resource: efiling-api\n   credentials:\n     secret: ${KEYCLOAK_CREDENTIALS_SECRET}\n@@ -80,11 +80,11 @@ cso:\n \n bambora:\n   apiBasePath: ${BAMBORA_APIBASEPATH:http://localhost:8080}\n-  apiPasscode: ${BAMBORA_APIPASSCODE}\n+  apiPasscode: ${BAMBORA_APIPASSCODE:passcode}\n   merchantId: ${BAMBORA_MERCHANTID}\n-  hostedProfileUrl: ${BAMBORA_PROFILE_URL}\n+  hostedProfileUrl: ${BAMBORA_PROFILE_URL:http://localhost:3001/updatecard}\n   hostedProfileServiceVersion: ${BAMBORA_PROFILE_SERVICE_VERSION}\n-  hashKey: ${BAMBORA_HASHKEY}\n+  hashKey: ${BAMBORA_HASHKEY:key}\n   minutesToExpiry: ${BAMBORA_URL_EXPIRY:10}\n bcgov:\n   sftp:\n@@ -114,7 +114,7 @@ info:\n     version: \"@project.version@\"\n \n mailsend:\n-  baseUrl: ${MAIL_SEND_BASE_URL:http://localhost:8090}\n+  baseUrl: ${MAIL_SEND_BASE_URL:http://localhost:8091}\n \n opentracing:\n   jaeger:"
  },
  {
    "sha": "87665cc96fc318ba30e0e7f2536a15522d4de8ab",
    "filename": "src/backend/pom.xml",
    "status": "modified",
    "additions": 1,
    "deletions": 0,
    "changes": 1,
    "blob_url": "https://github.com/bcgov/jag-file-submission/blob/cea0c9d586018b0089102a6f63dd25ec468ced9e/src/backend/pom.xml",
    "raw_url": "https://github.com/bcgov/jag-file-submission/raw/cea0c9d586018b0089102a6f63dd25ec468ced9e/src/backend/pom.xml",
    "contents_url": "https://api.github.com/repos/bcgov/jag-file-submission/contents/src/backend/pom.xml?ref=cea0c9d586018b0089102a6f63dd25ec468ced9e",
    "patch": "@@ -71,6 +71,7 @@\n \t\t\t\t<module>libs/efiling-cso-client</module>\n \t\t\t\t<module>libs/efiling-cso-client-preview</module>\n \t\t\t\t<module>libs/efiling-cso-starter</module>\n+\t\t\t\t<module>libs/efiling-mail-it</module>\n \t\t\t\t<module>efiling-api</module>\n \t\t\t</modules>\n \t\t</profile>"
  }
]
