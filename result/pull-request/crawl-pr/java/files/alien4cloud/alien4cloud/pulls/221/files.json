[
  {
    "sha": "cd68889b7e9ab336b92b13734d3fa79a14dca990",
    "filename": "alien4cloud-core/pom.xml",
    "status": "modified",
    "additions": 4,
    "deletions": 0,
    "changes": 4,
    "blob_url": "https://github.com/alien4cloud/alien4cloud/blob/4aa91f09c19a6fc77343aa40d517c4d0053d6759/alien4cloud-core/pom.xml",
    "raw_url": "https://github.com/alien4cloud/alien4cloud/raw/4aa91f09c19a6fc77343aa40d517c4d0053d6759/alien4cloud-core/pom.xml",
    "contents_url": "https://api.github.com/repos/alien4cloud/alien4cloud/contents/alien4cloud-core/pom.xml?ref=4aa91f09c19a6fc77343aa40d517c4d0053d6759",
    "patch": "@@ -171,6 +171,10 @@\n       <version>${cucumber.version}</version>\n       <scope>test</scope>\n     </dependency>\n+    <dependency>\n+      <groupId>commons-fileupload</groupId>\n+      <artifactId>commons-fileupload</artifactId>\n+    </dependency>\n \n   </dependencies>\n "
  },
  {
    "sha": "421f952713ad7265df449fe149c967d56556775b",
    "filename": "alien4cloud-core/src/main/java/org/alien4cloud/tosca/catalog/exception/UploadExceptionUtil.java",
    "status": "modified",
    "additions": 3,
    "deletions": 0,
    "changes": 3,
    "blob_url": "https://github.com/alien4cloud/alien4cloud/blob/4aa91f09c19a6fc77343aa40d517c4d0053d6759/alien4cloud-core/src/main/java/org/alien4cloud/tosca/catalog/exception/UploadExceptionUtil.java",
    "raw_url": "https://github.com/alien4cloud/alien4cloud/raw/4aa91f09c19a6fc77343aa40d517c4d0053d6759/alien4cloud-core/src/main/java/org/alien4cloud/tosca/catalog/exception/UploadExceptionUtil.java",
    "contents_url": "https://api.github.com/repos/alien4cloud/alien4cloud/contents/alien4cloud-core/src/main/java/org/alien4cloud/tosca/catalog/exception/UploadExceptionUtil.java?ref=4aa91f09c19a6fc77343aa40d517c4d0053d6759",
    "patch": "@@ -6,6 +6,7 @@\n import alien4cloud.tosca.parser.ParsingError;\n import alien4cloud.tosca.parser.impl.ErrorCode;\n import lombok.extern.slf4j.Slf4j;\n+import org.apache.commons.fileupload.FileUploadBase.SizeLimitExceededException;\n \n /**\n  * Utility class that generates parsing errors from exceptions.\n@@ -23,6 +24,8 @@ public static ParsingError parsingErrorFromException(Exception e) {\n                     \"Unable to override a csar used in an active deployment.\", null, null);\n         } else if (e instanceof ToscaTypeAlreadyDefinedInOtherCSAR) {\n             return new ParsingError(ErrorCode.TOSCA_TYPE_ALREADY_EXISTS_IN_OTHER_CSAR, \"Tosca type conflict\", null, e.getMessage(), null, null);\n+        } else if (e instanceof SizeLimitExceededException) {\n+            return new ParsingError(ErrorCode.FILE_SIZE_EXCEEDED, \"Uploaded file size exceeded\", null, e.getMessage(), null, null);\n         }\n         log.error(\"Unexpected error while parsing archive.\", e);\n         return new ParsingError(ErrorCode.ERRONEOUS_ARCHIVE_FILE, \"Failed to process archive for unexpected reason\", null, e.getMessage(), null, null);"
  },
  {
    "sha": "5aaa62d672fa825e8734ef4efe89563eaddbf5dd",
    "filename": "alien4cloud-rest-api/src/main/java/alien4cloud/rest/application/ApplicationController.java",
    "status": "modified",
    "additions": 5,
    "deletions": 0,
    "changes": 5,
    "blob_url": "https://github.com/alien4cloud/alien4cloud/blob/4aa91f09c19a6fc77343aa40d517c4d0053d6759/alien4cloud-rest-api/src/main/java/alien4cloud/rest/application/ApplicationController.java",
    "raw_url": "https://github.com/alien4cloud/alien4cloud/raw/4aa91f09c19a6fc77343aa40d517c4d0053d6759/alien4cloud-rest-api/src/main/java/alien4cloud/rest/application/ApplicationController.java",
    "contents_url": "https://api.github.com/repos/alien4cloud/alien4cloud/contents/alien4cloud-rest-api/src/main/java/alien4cloud/rest/application/ApplicationController.java?ref=4aa91f09c19a6fc77343aa40d517c4d0053d6759",
    "patch": "@@ -24,6 +24,7 @@\n import org.elasticsearch.index.query.QueryBuilder;\n import org.elasticsearch.index.query.QueryBuilders;\n import org.elasticsearch.search.SearchHit;\n+import org.springframework.beans.factory.annotation.Value;\n import org.springframework.http.HttpStatus;\n import org.springframework.http.MediaType;\n import org.springframework.security.access.prepost.PreAuthorize;\n@@ -70,6 +71,9 @@\n @RequestMapping({ \"/rest/applications\", \"/rest/v1/applications\", \"/rest/latest/applications\" })\n @Api(value = \"\", description = \"Operations on Applications\")\n public class ApplicationController {\n+    @Value(\"${upload.max_image_size:102400}\")\n+    private int maxImageSize;\n+\n     @Resource\n     private IImageDAO imageDAO;\n     @Resource(name = \"alien-es-dao\")\n@@ -247,6 +251,7 @@ public int compareTo(DeployedAppHolder o) {\n \n         try {\n             ServletFileUpload upload = new ServletFileUpload();\n+            upload.setSizeMax(maxImageSize);\n             FileItemIterator iter = upload.getItemIterator(request);\n             if (iter.hasNext()) {\n                FileItemStream item = iter.next();"
  },
  {
    "sha": "d5aa169385c670b0baf76ff04c0cc6f0a95cb20d",
    "filename": "alien4cloud-rest-api/src/main/java/alien4cloud/rest/csar/CloudServiceArchiveController.java",
    "status": "modified",
    "additions": 5,
    "deletions": 0,
    "changes": 5,
    "blob_url": "https://github.com/alien4cloud/alien4cloud/blob/4aa91f09c19a6fc77343aa40d517c4d0053d6759/alien4cloud-rest-api/src/main/java/alien4cloud/rest/csar/CloudServiceArchiveController.java",
    "raw_url": "https://github.com/alien4cloud/alien4cloud/raw/4aa91f09c19a6fc77343aa40d517c4d0053d6759/alien4cloud-rest-api/src/main/java/alien4cloud/rest/csar/CloudServiceArchiveController.java",
    "contents_url": "https://api.github.com/repos/alien4cloud/alien4cloud/contents/alien4cloud-rest-api/src/main/java/alien4cloud/rest/csar/CloudServiceArchiveController.java?ref=4aa91f09c19a6fc77343aa40d517c4d0053d6759",
    "patch": "@@ -74,6 +74,9 @@\n @Api(value = \"\", description = \"Operations on CSARs\")\n @Slf4j\n public class CloudServiceArchiveController {\n+    @Value(\"${upload.max_archive_size:10485760}\")\n+    private int maxArchiveSize;\n+\n     @Resource\n     private ArchiveUploadService csarUploadService;\n     @Resource(name = \"alien-es-dao\")\n@@ -104,6 +107,7 @@\n         try {\n             String workspace = AlienConstants.GLOBAL_WORKSPACE_ID;\n             ServletFileUpload upload = new ServletFileUpload();\n+            upload.setSizeMax(maxArchiveSize);\n             FileItemIterator iter = upload.getItemIterator(request);\n             while (iter.hasNext()) {\n                FileItemStream item = iter.next();\n@@ -164,6 +168,7 @@\n         try {\n             String workspace = AlienConstants.GLOBAL_WORKSPACE_ID;\n             ServletFileUpload upload = new ServletFileUpload();\n+            upload.setSizeMax(maxArchiveSize);\n             FileItemIterator iter = upload.getItemIterator(request);\n             while (iter.hasNext()) {\n                FileItemStream item = iter.next();"
  },
  {
    "sha": "2614620839f96c27234a782916ce18125d612af7",
    "filename": "alien4cloud-rest-api/src/main/java/alien4cloud/rest/deployment/DeploymentTopologyController.java",
    "status": "modified",
    "additions": 6,
    "deletions": 1,
    "changes": 7,
    "blob_url": "https://github.com/alien4cloud/alien4cloud/blob/4aa91f09c19a6fc77343aa40d517c4d0053d6759/alien4cloud-rest-api/src/main/java/alien4cloud/rest/deployment/DeploymentTopologyController.java",
    "raw_url": "https://github.com/alien4cloud/alien4cloud/raw/4aa91f09c19a6fc77343aa40d517c4d0053d6759/alien4cloud-rest-api/src/main/java/alien4cloud/rest/deployment/DeploymentTopologyController.java",
    "contents_url": "https://api.github.com/repos/alien4cloud/alien4cloud/contents/alien4cloud-rest-api/src/main/java/alien4cloud/rest/deployment/DeploymentTopologyController.java?ref=4aa91f09c19a6fc77343aa40d517c4d0053d6759",
    "patch": "@@ -24,6 +24,7 @@\n import org.apache.commons.fileupload.FileItemStream;\n import org.apache.commons.fileupload.FileUploadException;\n import org.apache.commons.fileupload.servlet.ServletFileUpload;\n+import org.springframework.beans.factory.annotation.Value;\n import org.springframework.http.MediaType;\n import org.springframework.security.access.prepost.PreAuthorize;\n import org.springframework.web.bind.annotation.PathVariable;\n@@ -64,6 +65,9 @@\n         \"/rest/latest/applications/{appId}/environments/{environmentId}/deployment-topology\" })\n @Api(value = \"\", description = \"Prepare a topology to be deployed on a specific environment (location matching, node matching and inputs configuration).\")\n public class DeploymentTopologyController {\n+    @Value(\"${upload.max_archive_size:10485760}\")\n+    private int maxArchiveSize;\n+\n     @Inject\n     private ApplicationService applicationService;\n     @Inject\n@@ -141,6 +145,7 @@\n         DeploymentTopologyDTO dto = null;\n         try {\n             ServletFileUpload upload = new ServletFileUpload();\n+            upload.setSizeMax(maxArchiveSize);\n             FileItemIterator iter = upload.getItemIterator(request);\n             if (iter.hasNext()) {\n                FileItemStream item = iter.next();\n@@ -394,4 +399,4 @@ private DeploymentTopologyDTO execute(String applicationId, String environmentId\n         // This method prepares the deployment and create a Deployment Topology DTO object.\n         return deploymentTopologyDTOBuilder.prepareDeployment(topology, application, environment, topologyVersion, action);\n     }\n-}\n\\ No newline at end of file\n+}"
  },
  {
    "sha": "0e80d5996a63ea518a143e843509e33971f65c49",
    "filename": "alien4cloud-rest-api/src/main/java/org/alien4cloud/tosca/editor/EditorController.java",
    "status": "modified",
    "additions": 6,
    "deletions": 0,
    "changes": 6,
    "blob_url": "https://github.com/alien4cloud/alien4cloud/blob/4aa91f09c19a6fc77343aa40d517c4d0053d6759/alien4cloud-rest-api/src/main/java/org/alien4cloud/tosca/editor/EditorController.java",
    "raw_url": "https://github.com/alien4cloud/alien4cloud/raw/4aa91f09c19a6fc77343aa40d517c4d0053d6759/alien4cloud-rest-api/src/main/java/org/alien4cloud/tosca/editor/EditorController.java",
    "contents_url": "https://api.github.com/repos/alien4cloud/alien4cloud/contents/alien4cloud-rest-api/src/main/java/org/alien4cloud/tosca/editor/EditorController.java?ref=4aa91f09c19a6fc77343aa40d517c4d0053d6759",
    "patch": "@@ -16,6 +16,7 @@\n import org.apache.commons.fileupload.FileUploadException;\n import org.apache.commons.fileupload.servlet.ServletFileUpload;\n import org.apache.commons.fileupload.util.Streams;\n+import org.springframework.beans.factory.annotation.Value;\n import org.springframework.core.io.InputStreamResource;\n import org.springframework.http.HttpHeaders;\n import org.springframework.http.MediaType;\n@@ -46,6 +47,9 @@\n @RequestMapping({ \"/rest/v2/editor\", \"/rest/latest/editor\" })\n @Api\n public class EditorController {\n+    @Value(\"${upload.max_archive_size:10485760}\")\n+    private int maxArchiveSize;\n+\n     @Inject\n     private EditorService editorService;\n     @Inject\n@@ -105,6 +109,7 @@\n         path = null;\n \n         ServletFileUpload upload = new ServletFileUpload();\n+        upload.setSizeMax(maxArchiveSize);\n         FileItemIterator iter = upload.getItemIterator(request);\n         while (iter.hasNext()) {\n            FileItemStream item = iter.next();\n@@ -212,6 +217,7 @@\n     @RequestMapping(value = \"/{topologyId:.+}/override\", method = RequestMethod.POST, produces = MediaType.APPLICATION_JSON_VALUE)\n     public RestResponse<Void> updateTopologyArchive(@PathVariable String topologyId, HttpServletRequest request) throws FileUploadException,IOException {\n         ServletFileUpload upload = new ServletFileUpload();\n+        upload.setSizeMax(maxArchiveSize);\n         FileItemIterator iter = upload.getItemIterator(request);\n         while (iter.hasNext()) {\n            FileItemStream item = iter.next();"
  },
  {
    "sha": "687670e3bdd7435246bdf25229067cb0ee6e85cb",
    "filename": "alien4cloud-tosca/src/main/java/alien4cloud/tosca/parser/impl/ErrorCode.java",
    "status": "modified",
    "additions": 2,
    "deletions": 0,
    "changes": 2,
    "blob_url": "https://github.com/alien4cloud/alien4cloud/blob/4aa91f09c19a6fc77343aa40d517c4d0053d6759/alien4cloud-tosca/src/main/java/alien4cloud/tosca/parser/impl/ErrorCode.java",
    "raw_url": "https://github.com/alien4cloud/alien4cloud/raw/4aa91f09c19a6fc77343aa40d517c4d0053d6759/alien4cloud-tosca/src/main/java/alien4cloud/tosca/parser/impl/ErrorCode.java",
    "contents_url": "https://api.github.com/repos/alien4cloud/alien4cloud/contents/alien4cloud-tosca/src/main/java/alien4cloud/tosca/parser/impl/ErrorCode.java?ref=4aa91f09c19a6fc77343aa40d517c4d0053d6759",
    "patch": "@@ -28,6 +28,8 @@\n     ENTRY_DEFINITION_NOT_FOUND,\n     /** If the file cannot be opened as a zip or in case of any IO exception */\n     ERRONEOUS_ARCHIVE_FILE,\n+    /** Users upload file exceed allowed size **/\n+    FILE_SIZE_EXCEEDED,\n     /** Invalid syntax while parsing a type. */\n     SYNTAX_ERROR,\n     /** Tosca version cannot be found in a definition file. */"
  },
  {
    "sha": "a31aea65d6a2446a98c497c44e12808470513e0a",
    "filename": "alien4cloud-ui/src/main/webapp/data/languages/locale-en-us.json",
    "status": "modified",
    "additions": 1,
    "deletions": 0,
    "changes": 1,
    "blob_url": "https://github.com/alien4cloud/alien4cloud/blob/4aa91f09c19a6fc77343aa40d517c4d0053d6759/alien4cloud-ui/src/main/webapp/data/languages/locale-en-us.json",
    "raw_url": "https://github.com/alien4cloud/alien4cloud/raw/4aa91f09c19a6fc77343aa40d517c4d0053d6759/alien4cloud-ui/src/main/webapp/data/languages/locale-en-us.json",
    "contents_url": "https://api.github.com/repos/alien4cloud/alien4cloud/contents/alien4cloud-ui/src/main/webapp/data/languages/locale-en-us.json?ref=4aa91f09c19a6fc77343aa40d517c4d0053d6759",
    "patch": "@@ -628,6 +628,7 @@\n       \"ERRONEOUS_ARCHIVE_FILE\" : \"Cannot load the archive file. Please check that the file is a valid zip.\",\n       \"FAILED_TO_READ_FILE\" : \"Unable to read the file {{note}}\",\n       \"FILE_PATH\" : \"File path\",\n+      \"FILE_SIZE_EXCEEDED\" : \"Size Limit Exceeded. {{problem}}\",\n       \"INVALID_ARTIFACT_REFERENCE\" : \"Invalid artifact's reference {{note}}\",\n       \"INVALID_ICON_FORMAT\" : \"Icon file is not a supported image format.\",\n       \"INVALID_NAME\" : \"Invalid {{context}} name [{{problem}}]. Renamed into [{{note}}].\","
  },
  {
    "sha": "cc77a6107a6911549cb339602c6ced8c149d3543",
    "filename": "alien4cloud-ui/src/main/webapp/data/languages/locale-fr-fr.json",
    "status": "modified",
    "additions": 1,
    "deletions": 0,
    "changes": 1,
    "blob_url": "https://github.com/alien4cloud/alien4cloud/blob/4aa91f09c19a6fc77343aa40d517c4d0053d6759/alien4cloud-ui/src/main/webapp/data/languages/locale-fr-fr.json",
    "raw_url": "https://github.com/alien4cloud/alien4cloud/raw/4aa91f09c19a6fc77343aa40d517c4d0053d6759/alien4cloud-ui/src/main/webapp/data/languages/locale-fr-fr.json",
    "contents_url": "https://api.github.com/repos/alien4cloud/alien4cloud/contents/alien4cloud-ui/src/main/webapp/data/languages/locale-fr-fr.json?ref=4aa91f09c19a6fc77343aa40d517c4d0053d6759",
    "patch": "@@ -628,6 +628,7 @@\n       \"ERRONEOUS_ARCHIVE_FILE\" : \"L'Archive n'est pas parsable, merci de vérifier qu'il est de format zip\",\n       \"FAILED_TO_READ_FILE\" : \"Impossible de lire le fichier à l'emplacement suivant {{note}}\",\n       \"FILE_PATH\" : \"Fichier\",\n+      \"FILE_SIZE_EXCEEDED\" : \"Limite de taille dépassée. {{problem}}\",\n       \"INVALID_ARTIFACT_REFERENCE\" : \"Référence d'artifact invalide {{note}}.\",\n       \"INVALID_ICON_FORMAT\" : \"L'icône n'est pas un fichier d'image supporté.\",\n       \"INVALID_NAME\" : \"Nom de {{context}} [{{problem}}] incorrect. Renommé en [{{note}}].\","
  },
  {
    "sha": "2789d481f82b0b1fccd6c75b0eab666e0da1b013",
    "filename": "alien4cloud-ui/src/main/webapp/data/languages/locale-ja-jp.json",
    "status": "modified",
    "additions": 1,
    "deletions": 0,
    "changes": 1,
    "blob_url": "https://github.com/alien4cloud/alien4cloud/blob/4aa91f09c19a6fc77343aa40d517c4d0053d6759/alien4cloud-ui/src/main/webapp/data/languages/locale-ja-jp.json",
    "raw_url": "https://github.com/alien4cloud/alien4cloud/raw/4aa91f09c19a6fc77343aa40d517c4d0053d6759/alien4cloud-ui/src/main/webapp/data/languages/locale-ja-jp.json",
    "contents_url": "https://api.github.com/repos/alien4cloud/alien4cloud/contents/alien4cloud-ui/src/main/webapp/data/languages/locale-ja-jp.json?ref=4aa91f09c19a6fc77343aa40d517c4d0053d6759",
    "patch": "@@ -626,6 +626,7 @@\n       \"ERRONEOUS_ARCHIVE_FILE\" : \"Cannot load the archive file. Please check that the file is a valid zip.\",\n       \"FAILED_TO_READ_FILE\" : \"Unable to read the file {{note}}\",\n       \"FILE_PATH\" : \"File path\",\n+      \"FILE_SIZE_EXCEEDED\" : \"サイズ制限を超えました. {{problem}}\",\n       \"INVALID_ARTIFACT_REFERENCE\" : \"Invalid artifact's reference {{note}}\",\n       \"INVALID_ICON_FORMAT\" : \"Icon file is not a supported image format.\",\n       \"INVALID_NAME\" : \"{{context}} name [ {{problem}} ] invalid. renamed into [ {{note}} ].\","
  },
  {
    "sha": "ed608e3ff1ce4d33756f3d028a6012e57c3dd2f5",
    "filename": "alien4cloud-ui/src/main/webapp/data/languages/locale-zh-cn.json",
    "status": "modified",
    "additions": 1,
    "deletions": 0,
    "changes": 1,
    "blob_url": "https://github.com/alien4cloud/alien4cloud/blob/4aa91f09c19a6fc77343aa40d517c4d0053d6759/alien4cloud-ui/src/main/webapp/data/languages/locale-zh-cn.json",
    "raw_url": "https://github.com/alien4cloud/alien4cloud/raw/4aa91f09c19a6fc77343aa40d517c4d0053d6759/alien4cloud-ui/src/main/webapp/data/languages/locale-zh-cn.json",
    "contents_url": "https://api.github.com/repos/alien4cloud/alien4cloud/contents/alien4cloud-ui/src/main/webapp/data/languages/locale-zh-cn.json?ref=4aa91f09c19a6fc77343aa40d517c4d0053d6759",
    "patch": "@@ -625,6 +625,7 @@\n       \"ERRONEOUS_ARCHIVE_FILE\" : \"无法加载工件文件。请检查该文件是否是有效的zip。\",\n       \"FAILED_TO_READ_FILE\" : \"无法读取文件 {{note}}\",\n       \"FILE_PATH\" : \"文件路径\",\n+      \"FILE_SIZE_EXCEEDED\" : \"超出大小限制. {{problem}}\",\n       \"INVALID_ARTIFACT_REFERENCE\" : \"无效的工件引用 {{note}}\",\n       \"INVALID_ICON_FORMAT\" : \"图标文件不是支持的图像格式。\",\n       \"INVALID_NAME\" : \"无效 {{context}} 问题名称： [{{problem}}]。 重命名到 [{{note}}]。\","
  }
]
