[
  {
    "sha": "1e9f8f82894b5ff9f12db3042d8983e679246aab",
    "filename": "agenda-services/src/main/java/org/exoplatform/agenda/notification/builder/AgendaTemplateBuilder.java",
    "status": "modified",
    "additions": 3,
    "deletions": 1,
    "changes": 4,
    "blob_url": "https://github.com/exoplatform/agenda/blob/682077b4a29adb1e5a5a068bfe05b798c57baf0a/agenda-services/src/main/java/org/exoplatform/agenda/notification/builder/AgendaTemplateBuilder.java",
    "raw_url": "https://github.com/exoplatform/agenda/raw/682077b4a29adb1e5a5a068bfe05b798c57baf0a/agenda-services/src/main/java/org/exoplatform/agenda/notification/builder/AgendaTemplateBuilder.java",
    "contents_url": "https://api.github.com/repos/exoplatform/agenda/contents/agenda-services/src/main/java/org/exoplatform/agenda/notification/builder/AgendaTemplateBuilder.java?ref=682077b4a29adb1e5a5a068bfe05b798c57baf0a",
    "patch": "@@ -8,6 +8,7 @@\n \n import org.apache.commons.lang.StringUtils;\n \n+import org.exoplatform.agenda.constant.AgendaEventModificationType;\n import org.exoplatform.agenda.model.AgendaUserSettings;\n import org.exoplatform.agenda.model.Event;\n import org.exoplatform.agenda.service.*;\n@@ -89,7 +90,8 @@ protected MessageInfo makeMessage(NotificationContext ctx) {\n     RequestLifeCycle.begin(container);\n     try {\n       Event event = getEvent(notification);\n-      if (event == null) {\n+      String eventModificationType = notification.getValueOwnerParameter(STORED_EVENT_MODIFICATION_TYPE);\n+      if (event == null && !StringUtils.equals(eventModificationType, AgendaEventModificationType.DELETED.name())) {\n         return null;\n       }\n       String notificationURL = notification.getValueOwnerParameter(STORED_PARAMETER_EVENT_URL);"
  },
  {
    "sha": "d7228eab4eae8587278bcd9c4eac6ebb0a521ef9",
    "filename": "agenda-services/src/main/java/org/exoplatform/agenda/notification/provider/MailTemplateProvider.java",
    "status": "modified",
    "additions": 2,
    "deletions": 0,
    "changes": 2,
    "blob_url": "https://github.com/exoplatform/agenda/blob/682077b4a29adb1e5a5a068bfe05b798c57baf0a/agenda-services/src/main/java/org/exoplatform/agenda/notification/provider/MailTemplateProvider.java",
    "raw_url": "https://github.com/exoplatform/agenda/raw/682077b4a29adb1e5a5a068bfe05b798c57baf0a/agenda-services/src/main/java/org/exoplatform/agenda/notification/provider/MailTemplateProvider.java",
    "contents_url": "https://api.github.com/repos/exoplatform/agenda/contents/agenda-services/src/main/java/org/exoplatform/agenda/notification/provider/MailTemplateProvider.java?ref=682077b4a29adb1e5a5a068bfe05b798c57baf0a",
    "patch": "@@ -12,6 +12,7 @@\n @TemplateConfigs(templates = {\n     @TemplateConfig(pluginId = AGENDA_EVENT_ADDED_NOTIFICATION_PLUGIN, template = \"war:/conf/agenda/templates/notification/mail/EventMailPlugin.gtmpl\"),\n     @TemplateConfig(pluginId = AGENDA_EVENT_MODIFIED_NOTIFICATION_PLUGIN, template = \"war:/conf/agenda/templates/notification/mail/EventMailPlugin.gtmpl\"),\n+    @TemplateConfig(pluginId = AGENDA_EVENT_CANCELLED_NOTIFICATION_PLUGIN, template = \"war:/conf/agenda/templates/notification/mail/EventMailPlugin.gtmpl\"),\n     @TemplateConfig(pluginId = AGENDA_REMINDER_NOTIFICATION_PLUGIN, template = \"war:/conf/agenda/templates/notification/mail/EventReminderMailPlugin.gtmpl\"),\n     @TemplateConfig(pluginId = AGENDA_REPLY_NOTIFICATION_PLUGIN, template = \"war:/conf/agenda/templates/notification/mail/EventReplyMailPlugin.gtmpl\"),\n     @TemplateConfig(pluginId = AGENDA_DATE_POLL_NOTIFICATION_PLUGIN, template = \"war:/conf/agenda/templates/notification/mail/DatePollMailPlugin.gtmpl\"),\n@@ -21,6 +22,7 @@ public MailTemplateProvider(ExoContainer container, InitParams initParams) {\n     super(initParams);\n     this.templateBuilders.put(EVENT_ADDED_KEY, new AgendaTemplateBuilder(this, container, EVENT_ADDED_KEY, false));\n     this.templateBuilders.put(EVENT_MODIFIED_KEY, new AgendaTemplateBuilder(this, container, EVENT_MODIFIED_KEY, false));\n+    this.templateBuilders.put(EVENT_CANCELLED_KEY, new AgendaTemplateBuilder(this, container, EVENT_CANCELLED_KEY, false));\n     this.templateBuilders.put(EVENT_REMINDER_KEY, new ReminderTemplateBuilder(this, container, EVENT_REMINDER_KEY, false));\n     this.templateBuilders.put(EVENT_REPLY_KEY, new ReplyTemplateBuilder(this, container, EVENT_REPLY_KEY, false));\n     this.templateBuilders.put(EVENT_DATE_POLL_KEY, new DatePollNotificationBuilder(this, container, EVENT_DATE_POLL_KEY, false));"
  },
  {
    "sha": "a5fe145d0ecc3874a25b3af50987e8bc22ab9034",
    "filename": "agenda-services/src/main/java/org/exoplatform/agenda/notification/provider/MobilePushTemplateProvider.java",
    "status": "modified",
    "additions": 5,
    "deletions": 5,
    "changes": 10,
    "blob_url": "https://github.com/exoplatform/agenda/blob/682077b4a29adb1e5a5a068bfe05b798c57baf0a/agenda-services/src/main/java/org/exoplatform/agenda/notification/provider/MobilePushTemplateProvider.java",
    "raw_url": "https://github.com/exoplatform/agenda/raw/682077b4a29adb1e5a5a068bfe05b798c57baf0a/agenda-services/src/main/java/org/exoplatform/agenda/notification/provider/MobilePushTemplateProvider.java",
    "contents_url": "https://api.github.com/repos/exoplatform/agenda/contents/agenda-services/src/main/java/org/exoplatform/agenda/notification/provider/MobilePushTemplateProvider.java?ref=682077b4a29adb1e5a5a068bfe05b798c57baf0a",
    "patch": "@@ -1,9 +1,6 @@\n package org.exoplatform.agenda.notification.provider;\n \n-import org.exoplatform.agenda.notification.builder.AgendaTemplateBuilder;\n-import org.exoplatform.agenda.notification.builder.DatePollNotificationBuilder;\n-import org.exoplatform.agenda.notification.builder.ReminderTemplateBuilder;\n-import org.exoplatform.agenda.notification.builder.ReplyTemplateBuilder;\n+import org.exoplatform.agenda.notification.builder.*;\n import org.exoplatform.commons.api.notification.annotation.TemplateConfig;\n import org.exoplatform.commons.api.notification.annotation.TemplateConfigs;\n import org.exoplatform.commons.api.notification.channel.template.TemplateProvider;\n@@ -18,7 +15,9 @@\n     @TemplateConfig(pluginId = AGENDA_EVENT_CANCELLED_NOTIFICATION_PLUGIN, template = \"war:/conf/agenda/templates/notification/push/EventPushPlugin.gtmpl\"),\n     @TemplateConfig(pluginId = AGENDA_REMINDER_NOTIFICATION_PLUGIN, template = \"war:/conf/agenda/templates/notification/push/EventReminderPushPlugin.gtmpl\"),\n     @TemplateConfig(pluginId = AGENDA_REPLY_NOTIFICATION_PLUGIN, template = \"war:/conf/agenda/templates/notification/push/EventReplyPushPlugin.gtmpl\"),\n-    @TemplateConfig(pluginId = AGENDA_DATE_POLL_NOTIFICATION_PLUGIN, template = \"war:/conf/agenda/templates/notification/push/DatePollPushPlugin.gtmpl\"), })\n+    @TemplateConfig(pluginId = AGENDA_DATE_POLL_NOTIFICATION_PLUGIN, template = \"war:/conf/agenda/templates/notification/push/DatePollPushPlugin.gtmpl\"),\n+    @TemplateConfig(pluginId = AGENDA_VOTE_NOTIFICATION_PLUGIN, template = \"war:/conf/agenda/templates/notification/push/VotePushPlugin.gtmpl\")}\n+    )\n public class MobilePushTemplateProvider extends TemplateProvider {\n   public MobilePushTemplateProvider(ExoContainer container, InitParams initParams) {\n     super(initParams);\n@@ -28,5 +27,6 @@ public MobilePushTemplateProvider(ExoContainer container, InitParams initParams)\n     this.templateBuilders.put(EVENT_REMINDER_KEY, new ReminderTemplateBuilder(this, container, EVENT_REMINDER_KEY, true));\n     this.templateBuilders.put(EVENT_REPLY_KEY, new ReplyTemplateBuilder(this, container, EVENT_REPLY_KEY, true));\n     this.templateBuilders.put(EVENT_DATE_POLL_KEY, new DatePollNotificationBuilder(this, container, EVENT_DATE_POLL_KEY, true));\n+    this.templateBuilders.put(EVENT_DATE_VOTE_KEY, new VoteTemplateBuilder(this, container, EVENT_DATE_VOTE_KEY, true));\n   }\n }"
  },
  {
    "sha": "0509dcaf941179e080f792073073c31a2be29ade",
    "filename": "agenda-services/src/main/java/org/exoplatform/agenda/notification/provider/WebTemplateProvider.java",
    "status": "modified",
    "additions": 5,
    "deletions": 5,
    "changes": 10,
    "blob_url": "https://github.com/exoplatform/agenda/blob/682077b4a29adb1e5a5a068bfe05b798c57baf0a/agenda-services/src/main/java/org/exoplatform/agenda/notification/provider/WebTemplateProvider.java",
    "raw_url": "https://github.com/exoplatform/agenda/raw/682077b4a29adb1e5a5a068bfe05b798c57baf0a/agenda-services/src/main/java/org/exoplatform/agenda/notification/provider/WebTemplateProvider.java",
    "contents_url": "https://api.github.com/repos/exoplatform/agenda/contents/agenda-services/src/main/java/org/exoplatform/agenda/notification/provider/WebTemplateProvider.java?ref=682077b4a29adb1e5a5a068bfe05b798c57baf0a",
    "patch": "@@ -1,9 +1,6 @@\n package org.exoplatform.agenda.notification.provider;\n \n-import org.exoplatform.agenda.notification.builder.AgendaTemplateBuilder;\n-import org.exoplatform.agenda.notification.builder.DatePollNotificationBuilder;\n-import org.exoplatform.agenda.notification.builder.ReminderTemplateBuilder;\n-import org.exoplatform.agenda.notification.builder.ReplyTemplateBuilder;\n+import org.exoplatform.agenda.notification.builder.*;\n import org.exoplatform.commons.api.notification.annotation.TemplateConfig;\n import org.exoplatform.commons.api.notification.annotation.TemplateConfigs;\n import org.exoplatform.commons.api.notification.channel.template.TemplateProvider;\n@@ -18,7 +15,9 @@\n     @TemplateConfig(pluginId = AGENDA_EVENT_CANCELLED_NOTIFICATION_PLUGIN, template = \"war:/conf/agenda/templates/notification/web/EventWebPlugin.gtmpl\"),\n     @TemplateConfig(pluginId = AGENDA_REMINDER_NOTIFICATION_PLUGIN, template = \"war:/conf/agenda/templates/notification/web/EventReminderWebPlugin.gtmpl\"),\n     @TemplateConfig(pluginId = AGENDA_REPLY_NOTIFICATION_PLUGIN, template = \"war:/conf/agenda/templates/notification/web/EventReplyWebPlugin.gtmpl\"),\n-    @TemplateConfig(pluginId = AGENDA_DATE_POLL_NOTIFICATION_PLUGIN, template = \"war:/conf/agenda/templates/notification/web/DatePollWebPlugin.gtmpl\") })\n+    @TemplateConfig(pluginId = AGENDA_DATE_POLL_NOTIFICATION_PLUGIN, template = \"war:/conf/agenda/templates/notification/web/DatePollWebPlugin.gtmpl\"),\n+    @TemplateConfig(pluginId = AGENDA_VOTE_NOTIFICATION_PLUGIN, template = \"war:/conf/agenda/templates/notification/web/VoteWebPlugin.gtmpl\")}\n+    )\n public class WebTemplateProvider extends TemplateProvider {\n   public WebTemplateProvider(ExoContainer container, InitParams initParams) {\n     super(initParams);\n@@ -28,5 +27,6 @@ public WebTemplateProvider(ExoContainer container, InitParams initParams) {\n     this.templateBuilders.put(EVENT_REMINDER_KEY, new ReminderTemplateBuilder(this, container, EVENT_REMINDER_KEY, false));\n     this.templateBuilders.put(EVENT_REPLY_KEY, new ReplyTemplateBuilder(this, container, EVENT_REPLY_KEY, false));\n     this.templateBuilders.put(EVENT_DATE_POLL_KEY, new DatePollNotificationBuilder(this, container, EVENT_DATE_POLL_KEY, false));\n+    this.templateBuilders.put(EVENT_DATE_VOTE_KEY, new VoteTemplateBuilder(this, container, EVENT_DATE_VOTE_KEY, false));\n   }\n }"
  },
  {
    "sha": "3331df02c34923f9f6e16b3464a9b5f52285beb4",
    "filename": "agenda-services/src/main/java/org/exoplatform/agenda/util/NotificationUtils.java",
    "status": "modified",
    "additions": 9,
    "deletions": 2,
    "changes": 11,
    "blob_url": "https://github.com/exoplatform/agenda/blob/682077b4a29adb1e5a5a068bfe05b798c57baf0a/agenda-services/src/main/java/org/exoplatform/agenda/util/NotificationUtils.java",
    "raw_url": "https://github.com/exoplatform/agenda/raw/682077b4a29adb1e5a5a068bfe05b798c57baf0a/agenda-services/src/main/java/org/exoplatform/agenda/util/NotificationUtils.java",
    "contents_url": "https://api.github.com/repos/exoplatform/agenda/contents/agenda-services/src/main/java/org/exoplatform/agenda/util/NotificationUtils.java?ref=682077b4a29adb1e5a5a068bfe05b798c57baf0a",
    "patch": "@@ -159,6 +159,8 @@\n \n   public static final String                                 STORED_PARAMETER_EVENT_RESPONSE                = \"eventResponse\";\n \n+  public static final String                                 STORED_PARAMETER_EVENT_STATUS                  = \"eventStatus\";\n+\n   private static final String                                TEMPLATE_VARIABLE_EVENT_START_DATE             = \"startDate\";\n \n   private static final String                                TEMPLATE_VARIABLE_EVENT_END_DATE               = \"endDate\";\n@@ -209,6 +211,8 @@\n   private static final String                                TEMPLATE_VARIABLE_MODIFIER_IDENTITY_URL        =\n                                                                                                      \"modifierProfileUrl\";\n \n+  private static final String                                TEMPLATE_VARIABLE_EVENT_STATUS                 = \"eventStatus\";\n+\n   private static volatile String                             defaultSite;\n \n   private NotificationUtils() {\n@@ -305,7 +309,8 @@ public static final void storeEventParameters(IdentityManager identityManager,\n                 .with(STORED_PARAMETER_EVENT_START_DATE, AgendaDateUtils.toRFC3339Date(event.getStart()))\n                 .with(STORED_PARAMETER_EVENT_END_DATE, AgendaDateUtils.toRFC3339Date((event.getEnd())))\n                 .with(STORED_PARAMETER_EVENT_RECURRENT_DETAILS, getRecurrenceDetails(event))\n-                .with(STORED_PARAMETER_EVENT_TIMEZONE_NAME, timeZoneName);\n+                .with(STORED_PARAMETER_EVENT_TIMEZONE_NAME, timeZoneName)\n+                .with(STORED_PARAMETER_EVENT_STATUS, event.getStatus().name());\n \n     if (StringUtils.isNotBlank(event.getDescription())) {\n       notification.with(STORED_PARAMETER_EVENT_DESCRIPTION, event.getDescription());\n@@ -424,6 +429,7 @@ public static final TemplateContext buildTemplateParameters(String username,\n     templateContext.put(TEMPLATE_VARIABLE_EVENT_ATTENDEES, notification.getValueOwnerParameter(STORED_PARAMETER_EVENT_ATTENDEES));\n     templateContext.put(TEMPLATE_VARIABLE_EVENT_TIMEZONE_NAME,\n                         notification.getValueOwnerParameter(STORED_PARAMETER_EVENT_TIMEZONE_NAME));\n+    templateContext.put(TEMPLATE_VARIABLE_EVENT_STATUS, notification.getValueOwnerParameter(STORED_PARAMETER_EVENT_STATUS));\n \n     String eventIdString = notification.getValueOwnerParameter(STORED_PARAMETER_EVENT_ID);\n     long eventId = Long.parseLong(eventIdString);\n@@ -438,7 +444,8 @@ public static final TemplateContext buildTemplateParameters(String username,\n     if (StringUtils.equals(modificationStoredType, AgendaEventModificationType.UPDATED.name())\n         || StringUtils.equals(modificationStoredType, AgendaEventModificationType.DATES_UPDATED.name())\n         || StringUtils.equals(modificationStoredType, AgendaEventModificationType.SWITCHED_DATE_POLL_TO_EVENT.name())\n-        || StringUtils.equals(modificationStoredType, AgendaEventModificationType.SWITCHED_EVENT_TO_DATE_POLL.name())) {\n+        || StringUtils.equals(modificationStoredType, AgendaEventModificationType.SWITCHED_EVENT_TO_DATE_POLL.name())\n+        || StringUtils.equals(modificationStoredType, AgendaEventModificationType.DELETED.name())) {\n       String identityId = notification.getValueOwnerParameter(STORED_PARAMETER_MODIFIER_IDENTITY_ID);\n       templateContext.put(TEMPLATE_VARIABLE_EVENT_MODIFIER, notification.getValueOwnerParameter(STORED_PARAMETER_EVENT_MODIFIER));\n       String userAbsoluteURI = StringUtils.isBlank(identityId)"
  },
  {
    "sha": "961e99a5e006615dc18e2b2b3220832b3274e888",
    "filename": "agenda-webapps/src/main/resources/locale/notification/AgendaNotification_en.properties",
    "status": "modified",
    "additions": 5,
    "deletions": 1,
    "changes": 6,
    "blob_url": "https://github.com/exoplatform/agenda/blob/682077b4a29adb1e5a5a068bfe05b798c57baf0a/agenda-webapps/src/main/resources/locale/notification/AgendaNotification_en.properties",
    "raw_url": "https://github.com/exoplatform/agenda/raw/682077b4a29adb1e5a5a068bfe05b798c57baf0a/agenda-webapps/src/main/resources/locale/notification/AgendaNotification_en.properties",
    "contents_url": "https://api.github.com/repos/exoplatform/agenda/contents/agenda-webapps/src/main/resources/locale/notification/AgendaNotification_en.properties?ref=682077b4a29adb1e5a5a068bfe05b798c57baf0a",
    "patch": "@@ -32,6 +32,8 @@ Notification.agenda.event.creator.response.mayBe={0} has replied \"Maybe\" to your\n Notification.agenda.event.participant.response.accepted={0} has accepted the invitation to the event {1}\n Notification.agenda.event.participant.response.declined={0} has declined the invitation to the event {1}\n Notification.agenda.event.participant.response.mayBe={0} has replied \"Maybe\" to the invitation to the event {1}\n+Notification.agenda.event.datePoll.updated=A date poll has been updated {0}\n+Notification.agenda.event.datePoll.dates.updated=Suggested dates of the date poll {0} have been updated. Please take the time to vote again.\n \n #mail\n Notification.title.AgendaInvitationPlugin=Invitation to {0}\n@@ -53,9 +55,9 @@ Notification.agenda.event.mail.body.updated=The event {0} has been updated by {1\n Notification.agenda.event.mail.body.dates.updated=The time of the event {0} has been updated by {1}. Please take the time to answer again.\n Notification.agenda.event.mail.body.reminder=The event {0} is scheduled from {1} to {2}\n Notification.agenda.event.mail.body.datePoll={0} invited you to choose a date for the following event {1} in the {2} space\n-Notification.agenda.event.mail.body.date.vote={0} voted for a date for the following event {1} in the {2} space\n Notification.agenda.event.mail.body.switchedToDatePoll={1} has created a date poll from event {0}. Please take the time to vote.\n Notification.agenda.event.mail.body.switchedToEvent={1} has created an event from date poll {0}. Please take the time to answer.\n+Notification.agenda.event.date.vote={0} voted for a date for the following event {1} in the {2} space\n Notification.agenda.event.accepted=Yes\n Notification.agenda.event.declined=No\n Notification.agenda.event.tentative=Maybe\n@@ -67,6 +69,8 @@ Notification.agenda.event.description=Description:\n Notification.agenda.event.attendees=Participants:\n Notification.agenda.event.participate.recurrentEvent=Participate in all event ocurrences?\n Notification.agenda.event.mail.body.date={0} from {1} to {2}\n+Notification.title.AgendaInvitationPlugin.deleted=Event Canceled: {0}\n+Notification.agenda.event.mail.body.datePoll.deleted=The date poll {0} has been canceled.\n Notification.label.SayHello=Hi\n Notification.label.footer=This email was sent to you as eXo Platform member.<a target=\"_blank\" style=\"margin:30px 0 10px 0; color: #2f5e92;text-decoration: none;font-size:13px;font-family:HelveticaNeue,arial,tahoma,serif\" href=\"{0}\"> Click here</a> to change your notification settings.\n "
  },
  {
    "sha": "156fdc826aacb6a12570375449681ee59cdd2ca7",
    "filename": "agenda-webapps/src/main/webapp/WEB-INF/conf/agenda/templates/notification/mail/EventMailPlugin.gtmpl",
    "status": "modified",
    "additions": 23,
    "deletions": 4,
    "changes": 27,
    "blob_url": "https://github.com/exoplatform/agenda/blob/682077b4a29adb1e5a5a068bfe05b798c57baf0a/agenda-webapps/src/main/webapp/WEB-INF/conf/agenda/templates/notification/mail/EventMailPlugin.gtmpl",
    "raw_url": "https://github.com/exoplatform/agenda/raw/682077b4a29adb1e5a5a068bfe05b798c57baf0a/agenda-webapps/src/main/webapp/WEB-INF/conf/agenda/templates/notification/mail/EventMailPlugin.gtmpl",
    "contents_url": "https://api.github.com/repos/exoplatform/agenda/contents/agenda-webapps/src/main/webapp/WEB-INF/conf/agenda/templates/notification/mail/EventMailPlugin.gtmpl?ref=682077b4a29adb1e5a5a068bfe05b798c57baf0a",
    "patch": "@@ -9,6 +9,8 @@\n                             out.write(_ctx.appRes(\"Notification.title.AgendaInvitationPlugin\", eventTitle));\n                           } else if(org.exoplatform.agenda.constant.AgendaEventModificationType.UPDATED.name().equals(modificationType)){\n                             out.write(_ctx.appRes(\"Notification.title.AgendaInvitationPlugin.update\", eventTitle));\n+                          } else if(org.exoplatform.agenda.constant.AgendaEventModificationType.DELETED.name().equals(modificationType)){\n+                            out.write(_ctx.appRes(\"Notification.title.AgendaInvitationPlugin.deleted\", eventTitle));\n                           } else if(org.exoplatform.agenda.constant.AgendaEventModificationType.DATES_UPDATED.name().equals(modificationType)){\n                             out.write(_ctx.appRes(\"Notification.title.AgendaInvitationPlugin.dates.update\", eventTitle));\n                           } else if(org.exoplatform.agenda.constant.AgendaEventModificationType.SWITCHED_EVENT_TO_DATE_POLL.name().equals(modificationType)){\n@@ -43,16 +45,24 @@\n                                                     String creatorName = \"<span style=\\\"color: #2f5e92; text-decoration: none; font-family: 'HelveticaNeue Bold', Helvetica, Arial, sans-serif\\\" >\" + _ctx.escapeHTML(creatorName) + \"</span>\";\n                                                     if (org.exoplatform.agenda.constant.AgendaEventModificationType.ADDED.name().equals(modificationType)) { %>\n                                                       <%= _ctx.appRes(\"Notification.agenda.event.created\", eventTitle, creatorName) %>\n-                                                    <% } else if(org.exoplatform.agenda.constant.AgendaEventModificationType.UPDATED.name().equals(modificationType)){ %>\n+                                                    <% } else if(org.exoplatform.agenda.constant.AgendaEventModificationType.UPDATED.name().equals(modificationType) && org.exoplatform.agenda.constant.EventStatus.CONFIRMED.name().equals(eventStatus)){ %>\n                                                       <%\n                                                         String profileModifierUrl = \"<a target=\\\"_blank\\\" style=\\\"color: #2f5e92; font-size: 13px; text-decoration: none; font-family: 'HelveticaNeue Bold', Helvetica, Arial, sans-serif\\\" href=\\\"\"+ modifierProfileUrl + \"\\\">\" + _ctx.escapeHTML(modifierName) + \"</a>\";\n                                                       %>\n                                                       <%= _ctx.appRes(\"Notification.agenda.event.mail.body.updated\", eventTitle, profileModifierUrl) %>\n-                                                    <% } else if(org.exoplatform.agenda.constant.AgendaEventModificationType.DATES_UPDATED.name().equals(modificationType)){ %>\n+                                                      <% } else if(org.exoplatform.agenda.constant.AgendaEventModificationType.DELETED.name().equals(modificationType) && org.exoplatform.agenda.constant.EventStatus.CONFIRMED.name().equals(eventStatus)){ %>\n+                                                         <%= _ctx.appRes(\"Notification.agenda.event.canceled\", eventTitle) %>\n+                                                      <% } else if(org.exoplatform.agenda.constant.AgendaEventModificationType.DELETED.name().equals(modificationType) && org.exoplatform.agenda.constant.EventStatus.TENTATIVE.name().equals(eventStatus)){ %>\n+                                                        <%= _ctx.appRes(\"Notification.agenda.event.mail.body.datePoll.deleted\", eventTitle) %>\n+                                                      <% } else if(org.exoplatform.agenda.constant.AgendaEventModificationType.DATES_UPDATED.name().equals(modificationType)){ %>\n                                                       <%\n                                                         String profileModifierUrl = \"<a target=\\\"_blank\\\" style=\\\"color: #2f5e92; font-size: 13px; text-decoration: none; font-family: 'HelveticaNeue Bold', Helvetica, Arial, sans-serif\\\" href=\\\"\"+ modifierProfileUrl + \"\\\">\" + _ctx.escapeHTML(modifierName) + \"</a>\";\n                                                       %>\n                                                       <%= _ctx.appRes(\"Notification.agenda.event.mail.body.dates.updated\", eventTitle, profileModifierUrl) %>\n+                                                                <% } else if(org.exoplatform.agenda.constant.AgendaEventModificationType.DATES_UPDATED.name().equals(modificationType) && org.exoplatform.agenda.constant.EventStatus.TENTATIVE.name().equals(eventStatus)){ %>\n+                                                      <%= _ctx.appRes(\"Notification.agenda.event.datePoll.dates.updated\", eventTitle) %>\n+                                                      <% } else if(org.exoplatform.agenda.constant.AgendaEventModificationType.UPDATED.name().equals(modificationType) && org.exoplatform.agenda.constant.EventStatus.TENTATIVE.name().equals(eventStatus)){ %>\n+                                                         <%= _ctx.appRes(\"Notification.agenda.event.datePoll.updated\", eventTitle) %>\n                                                     <% } else if(org.exoplatform.agenda.constant.AgendaEventModificationType.SWITCHED_EVENT_TO_DATE_POLL.name().equals(modificationType)){ %>\n                                                       <%\n                                                         String profileModifierUrl = \"<a target=\\\"_blank\\\" style=\\\"color: #2f5e92; font-size: 13px; text-decoration: none; font-family: 'HelveticaNeue Bold', Helvetica, Arial, sans-serif\\\" href=\\\"\"+ modifierProfileUrl + \"\\\">\" + _ctx.escapeHTML(modifierName) + \"</a>\";\n@@ -66,6 +76,8 @@\n                                                     <% } %>\n                                                 </p>\n                                                 <br/>\n+                                                <%\n+                                                if (!org.exoplatform.agenda.constant.AgendaEventModificationType.DELETED.name().equals(modificationType)) { %>\n                                                 <p style=\"margin: 0 0 20px;\">\n                                                     <a target=\"_blank\" style=\"\n                                                         display: inline-block;\n@@ -92,7 +104,10 @@\n                                                         text-align: center;\n                                                         vertical-align: middle;\"\n                                                         href=\"<%= declinedResponseURL %>\">\n-                                                        <%= _ctx.appRes(\"Notification.agenda.event.declined\") %>\n+                                                        <%\n+                                                         if (!org.exoplatform.agenda.constant.AgendaEventModificationType.DELETED.name().equals(modificationType)) { %>\n+                                                          <%= _ctx.appRes(\"Notification.agenda.event.declined\") %>\n+                                                        <% } %>\n                                                     </a>\n \n                                                     <a target=\"_blank\" style=\"\n@@ -106,7 +121,10 @@\n                                                         text-align: center;\n                                                         vertical-align: middle;\"\n                                                         href=\"<%= tentativeResponseURL %>\">\n-                                                        <%= _ctx.appRes(\"Notification.agenda.event.tentative\") %>\n+                                                        <%\n+                                                        if (!org.exoplatform.agenda.constant.AgendaEventModificationType.DELETED.name().equals(modificationType)) { %>\n+                                                          <%= _ctx.appRes(\"Notification.agenda.event.tentative\") %>\n+                                                         <% } %>\n                                                     </a>\n \n                                                     &nbsp; &nbsp; &nbsp;\n@@ -129,6 +147,7 @@\n                                                         <% } %>\n                                                     </a>\n                                                 </p>\n+                                               <% } %>\n                                             </td>\n                                         </tr>\n                                     </table>"
  },
  {
    "sha": "a9ebf09c192b2a2cb37e21093365e648256dcc7b",
    "filename": "agenda-webapps/src/main/webapp/WEB-INF/conf/agenda/templates/notification/mail/VoteMailPlugin.gtmpl",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/exoplatform/agenda/blob/682077b4a29adb1e5a5a068bfe05b798c57baf0a/agenda-webapps/src/main/webapp/WEB-INF/conf/agenda/templates/notification/mail/VoteMailPlugin.gtmpl",
    "raw_url": "https://github.com/exoplatform/agenda/raw/682077b4a29adb1e5a5a068bfe05b798c57baf0a/agenda-webapps/src/main/webapp/WEB-INF/conf/agenda/templates/notification/mail/VoteMailPlugin.gtmpl",
    "contents_url": "https://api.github.com/repos/exoplatform/agenda/contents/agenda-webapps/src/main/webapp/WEB-INF/conf/agenda/templates/notification/mail/VoteMailPlugin.gtmpl?ref=682077b4a29adb1e5a5a068bfe05b798c57baf0a",
    "patch": "@@ -33,7 +33,7 @@\n                                                     String agendaName = \"<a style=\\\"text-decoration: none; font-weight:bold;font-family: 'HelveticaNeue Bold', Helvetica, Arial, sans-serif\\\" >\" + agendaName +\"</a>\";\n                                                     String participantName = \"<a style=\\\" text-decoration: none; font-weight:bold;font-family: 'HelveticaNeue Bold', Helvetica, Arial, sans-serif\\\" >\" + participantName +\"</a>\";\n                                                     %>\n-                                                    <%= _ctx.appRes(\"Notification.agenda.event.mail.body.date.vote\", participantName, eventTitle, agendaName) %>\n+                                                    <%= _ctx.appRes(\"Notification.agenda.event.date.vote\", participantName, eventTitle, agendaName) %>\n                                                 </p>\n                                                 <br/>\n                                                 <p style=\"margin: 0 0 20px;\">"
  },
  {
    "sha": "666744d1749a2c4a92cf9fc67b4c757b5ff646a3",
    "filename": "agenda-webapps/src/main/webapp/WEB-INF/conf/agenda/templates/notification/push/EventPushPlugin.gtmpl",
    "status": "modified",
    "additions": 13,
    "deletions": 5,
    "changes": 18,
    "blob_url": "https://github.com/exoplatform/agenda/blob/682077b4a29adb1e5a5a068bfe05b798c57baf0a/agenda-webapps/src/main/webapp/WEB-INF/conf/agenda/templates/notification/push/EventPushPlugin.gtmpl",
    "raw_url": "https://github.com/exoplatform/agenda/raw/682077b4a29adb1e5a5a068bfe05b798c57baf0a/agenda-webapps/src/main/webapp/WEB-INF/conf/agenda/templates/notification/push/EventPushPlugin.gtmpl",
    "contents_url": "https://api.github.com/repos/exoplatform/agenda/contents/agenda-webapps/src/main/webapp/WEB-INF/conf/agenda/templates/notification/push/EventPushPlugin.gtmpl?ref=682077b4a29adb1e5a5a068bfe05b798c57baf0a",
    "patch": "@@ -4,16 +4,24 @@\n         <%\n         if(org.exoplatform.agenda.constant.AgendaEventModificationType.ADDED.name().equals(modificationType)) { %>\n            <%= _ctx.appRes(\"Notification.agenda.event.push.created\", eventTitle, creatorName) %>\n-        <% } else if(org.exoplatform.agenda.constant.AgendaEventModificationType.UPDATED.name().equals(modificationType)){ %>\n+        <% } else if(org.exoplatform.agenda.constant.AgendaEventModificationType.UPDATED.name().equals(modificationType) && org.exoplatform.agenda.constant.EventStatus.CONFIRMED.name().equals(eventStatus)){ %>\n            <%= _ctx.appRes(\"Notification.agenda.event.updated\", eventTitle) %>\n-        <% } else if(org.exoplatform.agenda.constant.AgendaEventModificationType.DATES_UPDATED.name().equals(modificationType)){ %>\n-          <%= _ctx.appRes(\"Notification.agenda.event.dates.updated\", eventTitle) %>\n+       <% } else if(org.exoplatform.agenda.constant.AgendaEventModificationType.UPDATED.name().equals(modificationType) && org.exoplatform.agenda.constant.EventStatus.TENTATIVE.name().equals(eventStatus)){ %>\n+           <%= _ctx.appRes(\"Notification.agenda.event.datePoll.updated\", eventTitle) %>\n+       <% } else if(org.exoplatform.agenda.constant.AgendaEventModificationType.DATES_UPDATED.name().equals(modificationType) && org.exoplatform.agenda.constant.EventStatus.CONFIRMED.name().equals(eventStatus)){ %>\n+            <%= _ctx.appRes(\"Notification.agenda.event.dates.updated\", eventTitle) %>\n+      <% } else if(org.exoplatform.agenda.constant.AgendaEventModificationType.DATES_UPDATED.name().equals(modificationType) && org.exoplatform.agenda.constant.EventStatus.TENTATIVE.name().equals(eventStatus)){ %>\n+            <%= _ctx.appRes(\"Notification.agenda.event.datePoll.dates.updated\", eventTitle) %>\n         <% } else if(org.exoplatform.agenda.constant.AgendaEventModificationType.SWITCHED_EVENT_TO_DATE_POLL.name().equals(modificationType)){ %>\n           <%= _ctx.appRes(\"Notification.agenda.event.switchedToDatePoll\", eventTitle) %>\n         <% } else if(org.exoplatform.agenda.constant.AgendaEventModificationType.SWITCHED_DATE_POLL_TO_EVENT.name().equals(modificationType)){ %>\n           <%= _ctx.appRes(\"Notification.agenda.event.switchedToEvent\", eventTitle) %>\n-        <% } else if(org.exoplatform.agenda.constant.AgendaEventModificationType.DELETED.name().equals(modificationType)){ %>\n-           <%= _ctx.appRes(\"Notification.agenda.event.canceled\", eventTitle) %>\n+        <% } else if(org.exoplatform.agenda.constant.AgendaEventModificationType.DELETED.name().equals(modificationType) && org.exoplatform.agenda.constant.EventStatus.TENTATIVE.name().equals(eventStatus)){ %>\n+           <%= _ctx.appRes(\"Notification.agenda.event.mail.body.datePoll.deleted\", eventTitle) %>\n+       <% } else if(org.exoplatform.agenda.constant.AgendaEventModificationType.UPDATED.name().equals(modificationType)){ %>\n+            <%= _ctx.appRes(\"Notification.agenda.event.updated\", eventTitle) %>\n+        <% } else { %>\n+            <%= _ctx.appRes(\"Notification.agenda.event.canceled\", eventTitle) %>\n         <% } %>\n     </div>\n     <div>"
  },
  {
    "sha": "89c12f72976ff1a93112fec40e7c5cd958a88b08",
    "filename": "agenda-webapps/src/main/webapp/WEB-INF/conf/agenda/templates/notification/push/VotePushPlugin.gtmpl",
    "status": "added",
    "additions": 14,
    "deletions": 0,
    "changes": 14,
    "blob_url": "https://github.com/exoplatform/agenda/blob/682077b4a29adb1e5a5a068bfe05b798c57baf0a/agenda-webapps/src/main/webapp/WEB-INF/conf/agenda/templates/notification/push/VotePushPlugin.gtmpl",
    "raw_url": "https://github.com/exoplatform/agenda/raw/682077b4a29adb1e5a5a068bfe05b798c57baf0a/agenda-webapps/src/main/webapp/WEB-INF/conf/agenda/templates/notification/push/VotePushPlugin.gtmpl",
    "contents_url": "https://api.github.com/repos/exoplatform/agenda/contents/agenda-webapps/src/main/webapp/WEB-INF/conf/agenda/templates/notification/push/VotePushPlugin.gtmpl?ref=682077b4a29adb1e5a5a068bfe05b798c57baf0a",
    "patch": "@@ -0,0 +1,14 @@\n+<% eventTitle = _ctx.escapeHTML(eventTitle); %>\n+<div>\n+    <div class=\"contentSmall\" data-link=\"<%= eventURL %>\">\n+        <div class=\"status\">\n+            <%\n+            String eventTitle = \"<span style=\\\"color: #2f5e92; text-decoration: none;font-weight:bold; font-family: 'HelveticaNeue Bold', Helvetica, Arial, sans-serif\\\" >\" + eventTitle + \"</span>\";\n+            String agendaName = \"<a style=\\\"text-decoration: none; font-weight:bold;font-family: 'HelveticaNeue Bold', Helvetica, Arial, sans-serif\\\" >\" + agendaName +\"</a>\";\n+            String participantName = \"<a style=\\\" text-decoration: none; font-weight:bold;font-family: 'HelveticaNeue Bold', Helvetica, Arial, sans-serif\\\" >\" + participantName +\"</a>\";\n+            %>\n+            <%= _ctx.appRes(\"Notification.agenda.event.date.vote\", participantName, eventTitle, agendaName) %>\n+        </div>\n+        <div class=\"lastUpdatedTime\"><%= LAST_UPDATED_TIME %></div>\n+    </div>\n+</div>\n\\ No newline at end of file"
  },
  {
    "sha": "79fea7370c67e8db796ce9fe8dfe6eec20d5464a",
    "filename": "agenda-webapps/src/main/webapp/WEB-INF/conf/agenda/templates/notification/web/EventWebPlugin.gtmpl",
    "status": "modified",
    "additions": 7,
    "deletions": 1,
    "changes": 8,
    "blob_url": "https://github.com/exoplatform/agenda/blob/682077b4a29adb1e5a5a068bfe05b798c57baf0a/agenda-webapps/src/main/webapp/WEB-INF/conf/agenda/templates/notification/web/EventWebPlugin.gtmpl",
    "raw_url": "https://github.com/exoplatform/agenda/raw/682077b4a29adb1e5a5a068bfe05b798c57baf0a/agenda-webapps/src/main/webapp/WEB-INF/conf/agenda/templates/notification/web/EventWebPlugin.gtmpl",
    "contents_url": "https://api.github.com/repos/exoplatform/agenda/contents/agenda-webapps/src/main/webapp/WEB-INF/conf/agenda/templates/notification/web/EventWebPlugin.gtmpl?ref=682077b4a29adb1e5a5a068bfe05b798c57baf0a",
    "patch": "@@ -13,14 +13,20 @@\n           String eventTitle = \"<span class=\\\"user-name text-bold\\\">\"+ eventTitle +\"</span>\";\n           if (org.exoplatform.agenda.constant.AgendaEventModificationType.ADDED.name().equals(modificationType)) { %>\n             <%= _ctx.appRes(\"Notification.agenda.event.created\", eventTitle, creatorName) %>\n-          <% } else if(org.exoplatform.agenda.constant.AgendaEventModificationType.DATES_UPDATED.name().equals(modificationType)){ %>\n+          <% } else if(org.exoplatform.agenda.constant.AgendaEventModificationType.DATES_UPDATED.name().equals(modificationType) && org.exoplatform.agenda.constant.EventStatus.CONFIRMED.name().equals(eventStatus)){ %>\n             <%= _ctx.appRes(\"Notification.agenda.event.dates.updated\", eventTitle) %>\n+          <% } else if(org.exoplatform.agenda.constant.AgendaEventModificationType.DATES_UPDATED.name().equals(modificationType) && org.exoplatform.agenda.constant.EventStatus.TENTATIVE.name().equals(eventStatus)){ %>\n+            <%= _ctx.appRes(\"Notification.agenda.event.datePoll.dates.updated\", eventTitle) %>\n+          <% } else if(org.exoplatform.agenda.constant.AgendaEventModificationType.UPDATED.name().equals(modificationType) && org.exoplatform.agenda.constant.EventStatus.TENTATIVE.name().equals(eventStatus)){ %>\n+            <%= _ctx.appRes(\"Notification.agenda.event.datePoll.updated\", eventTitle) %>\n           <% } else if(org.exoplatform.agenda.constant.AgendaEventModificationType.SWITCHED_EVENT_TO_DATE_POLL.name().equals(modificationType)){ %>\n             <%= _ctx.appRes(\"Notification.agenda.event.switchedToDatePoll\", eventTitle) %>\n           <% } else if(org.exoplatform.agenda.constant.AgendaEventModificationType.SWITCHED_DATE_POLL_TO_EVENT.name().equals(modificationType)){ %>\n             <%= _ctx.appRes(\"Notification.agenda.event.switchedToEvent\", eventTitle) %>\n           <% } else if(org.exoplatform.agenda.constant.AgendaEventModificationType.UPDATED.name().equals(modificationType)){ %>\n             <%= _ctx.appRes(\"Notification.agenda.event.updated\", eventTitle) %>\n+          <% } else if(org.exoplatform.agenda.constant.AgendaEventModificationType.DELETED.name().equals(modificationType) && org.exoplatform.agenda.constant.EventStatus.TENTATIVE.name().equals(eventStatus)){ %>\n+            <%= _ctx.appRes(\"Notification.agenda.event.mail.body.datePoll.deleted\", eventTitle) %>\n           <% } else { %>\n             <%= _ctx.appRes(\"Notification.agenda.event.canceled\", eventTitle) %>\n           <% } %>"
  },
  {
    "sha": "1461933c2d682188f5c6ab7980c4f13bf23a0ee3",
    "filename": "agenda-webapps/src/main/webapp/WEB-INF/conf/agenda/templates/notification/web/VoteWebPlugin.gtmpl",
    "status": "added",
    "additions": 22,
    "deletions": 0,
    "changes": 22,
    "blob_url": "https://github.com/exoplatform/agenda/blob/682077b4a29adb1e5a5a068bfe05b798c57baf0a/agenda-webapps/src/main/webapp/WEB-INF/conf/agenda/templates/notification/web/VoteWebPlugin.gtmpl",
    "raw_url": "https://github.com/exoplatform/agenda/raw/682077b4a29adb1e5a5a068bfe05b798c57baf0a/agenda-webapps/src/main/webapp/WEB-INF/conf/agenda/templates/notification/web/VoteWebPlugin.gtmpl",
    "contents_url": "https://api.github.com/repos/exoplatform/agenda/contents/agenda-webapps/src/main/webapp/WEB-INF/conf/agenda/templates/notification/web/VoteWebPlugin.gtmpl?ref=682077b4a29adb1e5a5a068bfe05b798c57baf0a",
    "patch": "@@ -0,0 +1,22 @@\n+<% eventTitle = _ctx.escapeHTML(eventTitle); %>\n+<li class=\"<%= READ %> clearfix\" data-id=\"<%= NOTIFICATION_ID %>\">\n+    <div class=\"media agendaWebNotifContent\">\n+        <div class=\"avatarXSmall pull-left\">\n+            <img class=\"spaceAvatar\" src=\"<%= calendarOwnerAvatarUrl %>\"/>\n+        </div>\n+        <div class=\"media-body\">\n+            <div class=\"contentSmall\" data-link=\"<%= eventURL %>\">\n+                <div class=\"status\">\n+                    <%\n+                    String eventTitle = \"<span style=\\\"color: #578dc9; text-decoration: none;font-weight:bold; font-family: 'HelveticaNeue Bold', Helvetica, Arial, sans-serif\\\" >\" + eventTitle + \"</span>\";\n+                    String agendaName = \"<a style=\\\"text-decoration: none; font-weight:bold;font-family: 'HelveticaNeue Bold', Helvetica, Arial, sans-serif\\\" >\" + agendaName +\"</a>\";\n+                    String participantName = \"<a style=\\\" text-decoration: none; font-weight:bold;font-family: 'HelveticaNeue Bold', Helvetica, Arial, sans-serif\\\" >\" + participantName +\"</a>\";\n+                    %>\n+                    <%= _ctx.appRes(\"Notification.agenda.event.date.vote\", participantName, eventTitle, agendaName) %>\n+                </div>\n+                <div class=\"lastUpdatedTime\"><%= LAST_UPDATED_TIME %></div>\n+            </div>\n+        </div>\n+    </div>\n+    <span class=\"remove-item\"><i class=\"uiIconClose uiIconLightGray\"></i></span>\n+</li>\n\\ No newline at end of file"
  }
]
