[
  {
    "sha": "28255f2f22698604468944f2b8c184cd6636d807",
    "filename": ".gitlab-ci.yml",
    "status": "added",
    "additions": 89,
    "deletions": 0,
    "changes": 89,
    "blob_url": "https://github.com/mgyuri/jhipster-bugtracker/blob/e05cc326c6ca4a5d890f23ac61002223a4090430/.gitlab-ci.yml",
    "raw_url": "https://github.com/mgyuri/jhipster-bugtracker/raw/e05cc326c6ca4a5d890f23ac61002223a4090430/.gitlab-ci.yml",
    "contents_url": "https://api.github.com/repos/mgyuri/jhipster-bugtracker/contents/.gitlab-ci.yml?ref=e05cc326c6ca4a5d890f23ac61002223a4090430",
    "patch": "@@ -0,0 +1,89 @@\n+image: jhipster/jhipster:v6.10.5\n+\n+cache:\n+    key: \"$CI_COMMIT_REF_NAME\"\n+    paths:\n+        - .maven/\n+stages:\n+    - check\n+    - build\n+    - test\n+    - analyze\n+    - package\n+    - release\n+    - deploy\n+before_script:\n+    - export NG_CLI_ANALYTICS=\"false\"\n+    - export MAVEN_USER_HOME=`pwd`/.maven\n+\n+nohttp:\n+    stage: check\n+    script:\n+        - ./mvnw -ntp checkstyle:check -Dmaven.repo.local=$MAVEN_USER_HOME\n+\n+maven-compile:\n+    stage: build\n+    script:\n+        - ./mvnw -ntp compile -P-webpack -Dmaven.repo.local=$MAVEN_USER_HOME\n+    artifacts:\n+        paths:\n+            - target/classes/\n+            - target/generated-sources/\n+        expire_in: 1 day\n+\n+maven-test:\n+    # DinD service is required for Testcontainers\n+    services:\n+        - docker:dind\n+\n+    variables:\n+        # Instruct Testcontainers to use the daemon of DinD.\n+        DOCKER_HOST: 'tcp://docker:2375'\n+        # Improve performance with overlayfs.\n+        DOCKER_DRIVER: overlay2\n+\n+    stage: test\n+    script:\n+        - ./mvnw -ntp verify -P-webpack -Dmaven.repo.local=$MAVEN_USER_HOME -Dspring.profiles.active=testcontainers\n+    artifacts:\n+        reports:\n+            junit: target/test-results/**/TEST-*.xml\n+        paths:\n+            - target/test-results\n+            - target/jacoco\n+        expire_in: 1 day\n+\n+frontend-test:\n+    stage: test\n+    script:\n+        - npm install\n+        - npm test\n+    artifacts:\n+        reports:\n+            junit: target/test-results/TESTS-results-jest.xml\n+        paths:\n+            - target/test-results\n+            - target/jacoco\n+        expire_in: 1 day\n+\n+maven-package:\n+    stage: package\n+    script:\n+        - ./mvnw -ntp verify -Pprod -DskipTests -Dmaven.repo.local=$MAVEN_USER_HOME\n+    artifacts:\n+        paths:\n+            - target/*.jar\n+            - target/classes\n+        expire_in: 1 day\n+\n+# Uncomment the following line to use gitlabs container registry. You need to adapt the REGISTRY_URL in case you are not using gitlab.com\n+#docker-push:\n+#    stage: release\n+#    variables:\n+#        REGISTRY_URL: registry.gitlab.com\n+#        IMAGE_TAG: $CI_REGISTRY_IMAGE:$CI_COMMIT_REF_SLUG-$CI_COMMIT_SHA\n+#    dependencies:\n+#        - maven-package\n+#    script:\n+#        - ./mvnw -ntp compile jib:build -Pprod -Djib.to.image=$IMAGE_TAG -Djib.to.auth.username=gitlab-ci-token  -Djib.to.auth.password=$CI_BUILD_TOKEN -Dmaven.repo.local=$MAVEN_USER_HOME\n+"
  }
]
