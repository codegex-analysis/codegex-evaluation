[
  {
    "sha": "add11f80f78077e06fdd9a6ec4ef536963a6d135",
    "filename": "OsmAnd/res/drawable-hdpi/btn_background_active_transparent_light.xml",
    "status": "added",
    "additions": 6,
    "deletions": 0,
    "changes": 6,
    "blob_url": "https://github.com/osmandapp/OsmAnd/blob/35064dba0158091eac04d69c278722b73a09cf0a/OsmAnd/res/drawable-hdpi/btn_background_active_transparent_light.xml",
    "raw_url": "https://github.com/osmandapp/OsmAnd/raw/35064dba0158091eac04d69c278722b73a09cf0a/OsmAnd/res/drawable-hdpi/btn_background_active_transparent_light.xml",
    "contents_url": "https://api.github.com/repos/osmandapp/OsmAnd/contents/OsmAnd/res/drawable-hdpi/btn_background_active_transparent_light.xml?ref=35064dba0158091eac04d69c278722b73a09cf0a",
    "patch": "@@ -0,0 +1,6 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<shape xmlns:android=\"http://schemas.android.com/apk/res/android\"\n+\tandroid:shape=\"rectangle\">\n+\t<solid android:color=\"@color/switch_button_active_light\" />\n+\t<corners android:radius=\"4dp\" />\n+</shape>\n\\ No newline at end of file"
  },
  {
    "sha": "14ae96d07a6db499285166beea900cb5992368a4",
    "filename": "OsmAnd/res/drawable/btn_background_active_transparent_dark.xml",
    "status": "added",
    "additions": 6,
    "deletions": 0,
    "changes": 6,
    "blob_url": "https://github.com/osmandapp/OsmAnd/blob/35064dba0158091eac04d69c278722b73a09cf0a/OsmAnd/res/drawable/btn_background_active_transparent_dark.xml",
    "raw_url": "https://github.com/osmandapp/OsmAnd/raw/35064dba0158091eac04d69c278722b73a09cf0a/OsmAnd/res/drawable/btn_background_active_transparent_dark.xml",
    "contents_url": "https://api.github.com/repos/osmandapp/OsmAnd/contents/OsmAnd/res/drawable/btn_background_active_transparent_dark.xml?ref=35064dba0158091eac04d69c278722b73a09cf0a",
    "patch": "@@ -0,0 +1,6 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<shape xmlns:android=\"http://schemas.android.com/apk/res/android\"\n+\tandroid:shape=\"rectangle\">\n+\t<solid android:color=\"@color/switch_button_active_dark\" />\n+\t<corners android:radius=\"4dp\" />\n+</shape>\n\\ No newline at end of file"
  },
  {
    "sha": "1eb3dd1bd412cb05f9de38b08ba389a64fb7a562",
    "filename": "OsmAnd/res/layout/bottom_sheet_with_switch_divider_and_additional_button.xml",
    "status": "modified",
    "additions": 66,
    "deletions": 52,
    "changes": 118,
    "blob_url": "https://github.com/osmandapp/OsmAnd/blob/35064dba0158091eac04d69c278722b73a09cf0a/OsmAnd/res/layout/bottom_sheet_with_switch_divider_and_additional_button.xml",
    "raw_url": "https://github.com/osmandapp/OsmAnd/raw/35064dba0158091eac04d69c278722b73a09cf0a/OsmAnd/res/layout/bottom_sheet_with_switch_divider_and_additional_button.xml",
    "contents_url": "https://api.github.com/repos/osmandapp/OsmAnd/contents/OsmAnd/res/layout/bottom_sheet_with_switch_divider_and_additional_button.xml?ref=35064dba0158091eac04d69c278722b73a09cf0a",
    "patch": "@@ -4,80 +4,94 @@\n \txmlns:tools=\"http://schemas.android.com/tools\"\n \tandroid:layout_width=\"match_parent\"\n \tandroid:layout_height=\"wrap_content\"\n+\tandroid:layout_marginStart=\"@dimen/content_padding\"\n+\tandroid:layout_marginLeft=\"@dimen/content_padding\"\n+\tandroid:layout_marginEnd=\"@dimen/content_padding\"\n+\tandroid:layout_marginRight=\"@dimen/content_padding\"\n \tandroid:baselineAligned=\"false\"\n \tandroid:gravity=\"center_vertical\"\n-\tandroid:minHeight=\"@dimen/bottom_sheet_selected_item_title_height\">\n+\tandroid:minHeight=\"@dimen/bottom_sheet_list_item_height\">\n \n-\t<LinearLayout\n-\t\tandroid:id=\"@+id/basic_item_body\"\n+\t<androidx.cardview.widget.CardView\n+\t\tandroid:id=\"@+id/compound_container\"\n \t\tandroid:layout_width=\"0dp\"\n-\t\tandroid:layout_height=\"match_parent\"\n+\t\tandroid:layout_height=\"wrap_content\"\n+\t\tandroid:layout_marginEnd=\"@dimen/content_padding_half\"\n+\t\tandroid:layout_marginRight=\"@dimen/content_padding_half\"\n \t\tandroid:layout_weight=\"1\"\n-\t\tandroid:background=\"?attr/selectableItemBackground\"\n-\t\tandroid:paddingStart=\"@dimen/content_padding\"\n-\t\tandroid:paddingLeft=\"@dimen/content_padding\"\n-\t\tandroid:paddingEnd=\"@dimen/content_padding\"\n-\t\tandroid:paddingRight=\"@dimen/content_padding\">\n+\t\tandroid:gravity=\"center_vertical\"\n+\t\tapp:cardCornerRadius=\"4dp\"\n+\t\tapp:cardElevation=\"0dp\"\n+\t\ttools:cardBackgroundColor=\"?attr/switch_button_active\">\n \n \t\t<LinearLayout\n-\t\t\tandroid:layout_width=\"0dp\"\n-\t\t\tandroid:layout_height=\"wrap_content\"\n-\t\t\tandroid:layout_gravity=\"center_vertical\"\n-\t\t\tandroid:layout_weight=\"1\"\n-\t\t\tandroid:orientation=\"vertical\">\n+\t\t\tandroid:layout_width=\"match_parent\"\n+\t\t\tandroid:layout_height=\"match_parent\"\n+\t\t\tandroid:background=\"?attr/selectableItemBackground\"\n+\t\t\tandroid:orientation=\"horizontal\">\n \n-\t\t\t<TextView\n+\t\t\t<net.osmand.plus.widgets.TextViewEx\n \t\t\t\tandroid:id=\"@+id/title\"\n-\t\t\t\tandroid:layout_width=\"wrap_content\"\n+\t\t\t\tandroid:layout_width=\"0dp\"\n \t\t\t\tandroid:layout_height=\"wrap_content\"\n+\t\t\t\tandroid:layout_marginStart=\"@dimen/content_padding\"\n+\t\t\t\tandroid:layout_marginLeft=\"@dimen/content_padding\"\n+\t\t\t\tandroid:layout_marginTop=\"@dimen/context_menu_first_line_top_margin\"\n+\t\t\t\tandroid:layout_marginBottom=\"@dimen/context_menu_first_line_top_margin\"\n+\t\t\t\tandroid:layout_weight=\"1\"\n \t\t\t\tandroid:ellipsize=\"end\"\n+\t\t\t\tandroid:letterSpacing=\"@dimen/description_letter_spacing\"\n \t\t\t\tandroid:maxLines=\"1\"\n-\t\t\t\tandroid:paddingTop=\"@dimen/content_padding_small\"\n-\t\t\t\tandroid:paddingBottom=\"@dimen/content_padding\"\n-\t\t\t\tandroid:textAppearance=\"@style/TextAppearance.ListItemTitle\"\n+\t\t\t\tandroid:textColor=\"?attr/active_color_basic\"\n+\t\t\t\tandroid:textSize=\"@dimen/default_desc_text_size\"\n+\t\t\t\tapp:typeface=\"@string/font_roboto_medium\"\n \t\t\t\ttools:text=\"Some title\" />\n \n-\t\t</LinearLayout>\n+\t\t\t<com.google.android.material.switchmaterial.SwitchMaterial\n+\t\t\t\tandroid:id=\"@+id/compound_button\"\n+\t\t\t\tandroid:layout_width=\"wrap_content\"\n+\t\t\t\tandroid:layout_height=\"wrap_content\"\n+\t\t\t\tandroid:layout_gravity=\"center_vertical\"\n+\t\t\t\tandroid:layout_marginStart=\"@dimen/bottom_sheet_content_margin\"\n+\t\t\t\tandroid:layout_marginLeft=\"@dimen/bottom_sheet_content_margin\"\n+\t\t\t\tandroid:layout_marginEnd=\"@dimen/bottom_sheet_content_margin\"\n+\t\t\t\tandroid:layout_marginRight=\"@dimen/bottom_sheet_content_margin\"\n+\t\t\t\tandroid:clickable=\"false\"\n+\t\t\t\tandroid:focusable=\"false\"\n+\t\t\t\tandroid:focusableInTouchMode=\"false\"\n+\t\t\t\ttools:checked=\"true\" />\n \n-\t\t<com.google.android.material.switchmaterial.SwitchMaterial\n-\t\t\tandroid:id=\"@+id/switch_button\"\n-\t\t\tandroid:layout_width=\"wrap_content\"\n-\t\t\tandroid:layout_height=\"wrap_content\"\n-\t\t\tandroid:layout_gravity=\"center_vertical\"\n-\t\t\tandroid:layout_marginStart=\"@dimen/bottom_sheet_content_margin\"\n-\t\t\tandroid:layout_marginLeft=\"@dimen/bottom_sheet_content_margin\"\n-\t\t\tandroid:clickable=\"false\"\n-\t\t\tandroid:focusable=\"false\"\n-\t\t\tandroid:focusableInTouchMode=\"false\"\n-\t\t\ttools:checked=\"true\" />\n+\t\t</LinearLayout>\n \n-\t</LinearLayout>\n+\t</androidx.cardview.widget.CardView>\n \n-\t<LinearLayout\n-\t\tandroid:id=\"@+id/additional_button\"\n+\t<androidx.cardview.widget.CardView\n+\t\tandroid:id=\"@+id/additional_button_container\"\n \t\tandroid:layout_width=\"wrap_content\"\n \t\tandroid:layout_height=\"match_parent\"\n-\t\tandroid:orientation=\"horizontal\">\n+\t\tapp:cardCornerRadius=\"4dp\"\n+\t\tapp:cardElevation=\"0dp\"\n+\t\ttools:cardBackgroundColor=\"?attr/switch_button_active\">\n \n-\t\t<View\n-\t\t\tandroid:layout_width=\"1dp\"\n+\t\t<FrameLayout\n+\t\t\tandroid:layout_width=\"match_parent\"\n \t\t\tandroid:layout_height=\"match_parent\"\n-\t\t\tandroid:layout_marginTop=\"@dimen/content_padding_half\"\n-\t\t\tandroid:layout_marginBottom=\"@dimen/content_padding_half\"\n-\t\t\tandroid:background=\"?attr/divider_color_basic\" />\n+\t\t\tandroid:background=\"?android:attr/selectableItemBackground\">\n+\n+\t\t\t<androidx.appcompat.widget.AppCompatImageView\n+\t\t\t\tandroid:id=\"@+id/additional_button_icon\"\n+\t\t\t\tandroid:layout_width=\"@dimen/favorites_icon_right_margin\"\n+\t\t\t\tandroid:layout_height=\"@dimen/favorites_icon_right_margin\"\n+\t\t\t\tandroid:layout_gravity=\"center\"\n+\t\t\t\tandroid:layout_marginStart=\"@dimen/content_padding\"\n+\t\t\t\tandroid:layout_marginLeft=\"@dimen/content_padding\"\n+\t\t\t\tandroid:layout_marginEnd=\"@dimen/content_padding\"\n+\t\t\t\tandroid:layout_marginRight=\"@dimen/content_padding\"\n+\t\t\t\tapp:srcCompat=\"@drawable/ic_action_track_line_bold_color\"\n+\t\t\t\ttools:tint=\"?attr/active_color_basic\" />\n \n-\t\t<androidx.appcompat.widget.AppCompatImageView\n-\t\t\tandroid:id=\"@+id/icon_after_divider\"\n-\t\t\tstyle=\"@style/Widget.AppCompat.Toolbar.Button.Navigation\"\n-\t\t\tandroid:layout_width=\"@dimen/favorites_icon_right_margin\"\n-\t\t\tandroid:layout_height=\"@dimen/favorites_icon_right_margin\"\n-\t\t\tandroid:layout_gravity=\"center\"\n-\t\t\tandroid:layout_marginStart=\"@dimen/content_padding\"\n-\t\t\tandroid:layout_marginLeft=\"@dimen/content_padding\"\n-\t\t\tandroid:layout_marginEnd=\"@dimen/content_padding\"\n-\t\t\tandroid:layout_marginRight=\"@dimen/content_padding\"\n-\t\t\tapp:srcCompat=\"@drawable/ic_action_track_line_bold_color\" />\n+\t\t</FrameLayout>\n \n-\t</LinearLayout>\n+\t</androidx.cardview.widget.CardView>\n \n </LinearLayout>"
  },
  {
    "sha": "1c6b6770fda04e4289d65e740c0a0817bc847d46",
    "filename": "OsmAnd/res/layout/preference_button_with_icon.xml",
    "status": "added",
    "additions": 47,
    "deletions": 0,
    "changes": 47,
    "blob_url": "https://github.com/osmandapp/OsmAnd/blob/35064dba0158091eac04d69c278722b73a09cf0a/OsmAnd/res/layout/preference_button_with_icon.xml",
    "raw_url": "https://github.com/osmandapp/OsmAnd/raw/35064dba0158091eac04d69c278722b73a09cf0a/OsmAnd/res/layout/preference_button_with_icon.xml",
    "contents_url": "https://api.github.com/repos/osmandapp/OsmAnd/contents/OsmAnd/res/layout/preference_button_with_icon.xml?ref=35064dba0158091eac04d69c278722b73a09cf0a",
    "patch": "@@ -0,0 +1,47 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<androidx.cardview.widget.CardView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n+\txmlns:app=\"http://schemas.android.com/apk/res-auto\"\n+\txmlns:tools=\"http://schemas.android.com/tools\"\n+\tandroid:layout_width=\"wrap_content\"\n+\tandroid:layout_height=\"wrap_content\"\n+\tandroid:minWidth=\"@dimen/context_menu_top_right_button_min_width\"\n+\tandroid:minHeight=\"@dimen/setting_list_item_large_height\"\n+\tapp:cardCornerRadius=\"4dp\"\n+\tapp:cardElevation=\"0dp\"\n+\ttools:cardBackgroundColor=\"?attr/switch_button_active\">\n+\n+\t<LinearLayout\n+\t\tandroid:layout_width=\"match_parent\"\n+\t\tandroid:layout_height=\"match_parent\"\n+\t\tandroid:background=\"?attr/selectableItemBackground\"\n+\t\tandroid:gravity=\"center\"\n+\t\tandroid:minWidth=\"@dimen/context_menu_top_right_button_min_width\"\n+\t\tandroid:minHeight=\"@dimen/setting_list_item_large_height\"\n+\t\tandroid:orientation=\"vertical\">\n+\n+\t\t<androidx.appcompat.widget.AppCompatImageView\n+\t\t\tandroid:id=\"@+id/icon\"\n+\t\t\tandroid:layout_width=\"@dimen/standard_icon_size\"\n+\t\t\tandroid:layout_height=\"@dimen/standard_icon_size\"\n+\t\t\tandroid:layout_marginTop=\"@dimen/content_padding_small\"\n+\t\t\tandroid:layout_marginBottom=\"@dimen/content_padding_small_half\"\n+\t\t\ttools:srcCompat=\"@drawable/ic_action_close\"\n+\t\t\ttools:tint=\"?attr/active_color_basic\" />\n+\n+\t\t<net.osmand.plus.widgets.TextViewEx\n+\t\t\tandroid:id=\"@+id/button_text\"\n+\t\t\tandroid:layout_width=\"wrap_content\"\n+\t\t\tandroid:layout_height=\"wrap_content\"\n+\t\t\tandroid:layout_marginStart=\"@dimen/content_padding_small_half\"\n+\t\t\tandroid:layout_marginLeft=\"@dimen/content_padding_small_half\"\n+\t\t\tandroid:layout_marginEnd=\"@dimen/content_padding_small_half\"\n+\t\t\tandroid:layout_marginRight=\"@dimen/content_padding_small_half\"\n+\t\t\tandroid:layout_marginBottom=\"@dimen/content_padding_small_half\"\n+\t\t\tandroid:letterSpacing=\"@dimen/description_letter_spacing\"\n+\t\t\tapp:typeface=\"@string/font_roboto_medium\"\n+\t\t\ttools:text=\"Title\"\n+\t\t\ttools:textColor=\"?attr/active_color_basic\" />\n+\n+\t</LinearLayout>\n+\n+</androidx.cardview.widget.CardView>\n\\ No newline at end of file"
  },
  {
    "sha": "4105dbb2bc119030b9d1724a6b4243b20d7479ad",
    "filename": "OsmAnd/res/layout/preference_button_with_icon_quadruple.xml",
    "status": "added",
    "additions": 57,
    "deletions": 0,
    "changes": 57,
    "blob_url": "https://github.com/osmandapp/OsmAnd/blob/35064dba0158091eac04d69c278722b73a09cf0a/OsmAnd/res/layout/preference_button_with_icon_quadruple.xml",
    "raw_url": "https://github.com/osmandapp/OsmAnd/raw/35064dba0158091eac04d69c278722b73a09cf0a/OsmAnd/res/layout/preference_button_with_icon_quadruple.xml",
    "contents_url": "https://api.github.com/repos/osmandapp/OsmAnd/contents/OsmAnd/res/layout/preference_button_with_icon_quadruple.xml?ref=35064dba0158091eac04d69c278722b73a09cf0a",
    "patch": "@@ -0,0 +1,57 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n+\txmlns:app=\"http://schemas.android.com/apk/res-auto\"\n+\txmlns:tools=\"http://schemas.android.com/tools\"\n+\tandroid:layout_width=\"match_parent\"\n+\tandroid:layout_height=\"wrap_content\"\n+\tandroid:layout_marginStart=\"@dimen/content_padding\"\n+\tandroid:layout_marginLeft=\"@dimen/content_padding\"\n+\tandroid:layout_marginEnd=\"@dimen/content_padding\"\n+\tandroid:layout_marginRight=\"@dimen/content_padding\"\n+\tandroid:baselineAligned=\"false\"\n+\tandroid:minHeight=\"@dimen/setting_list_item_large_height\"\n+\tandroid:orientation=\"horizontal\">\n+\n+\t<include\n+\t\tandroid:id=\"@+id/button_left\"\n+\t\tlayout=\"@layout/preference_button_with_icon\"\n+\t\tandroid:layout_width=\"wrap_content\"\n+\t\tandroid:layout_height=\"match_parent\"\n+\t\tandroid:layout_weight=\"1\"\n+\t\tandroid:minWidth=\"@dimen/context_menu_top_right_button_min_width\"\n+\t\tandroid:minHeight=\"@dimen/setting_list_item_large_height\" />\n+\n+\t<include\n+\t\tandroid:id=\"@+id/button_center_left\"\n+\t\tlayout=\"@layout/preference_button_with_icon\"\n+\t\tandroid:layout_width=\"wrap_content\"\n+\t\tandroid:layout_height=\"match_parent\"\n+\t\tandroid:layout_weight=\"1\"\n+\t\tandroid:layout_marginStart=\"@dimen/content_padding_half\"\n+\t\tandroid:layout_marginLeft=\"@dimen/content_padding_half\"\n+\t\tandroid:minWidth=\"@dimen/context_menu_top_right_button_min_width\"\n+\t\tandroid:minHeight=\"@dimen/setting_list_item_large_height\" />\n+\n+\t<include\n+\t\tandroid:id=\"@+id/button_center_right\"\n+\t\tlayout=\"@layout/preference_button_with_icon\"\n+\t\tandroid:layout_width=\"wrap_content\"\n+\t\tandroid:layout_height=\"match_parent\"\n+\t\tandroid:layout_marginStart=\"@dimen/content_padding_half\"\n+\t\tandroid:layout_weight=\"1\"\n+\t\tandroid:layout_marginLeft=\"@dimen/content_padding_half\"\n+\t\tandroid:minWidth=\"@dimen/context_menu_top_right_button_min_width\"\n+\t\tandroid:minHeight=\"@dimen/setting_list_item_large_height\" />\n+\n+\t<include\n+\t\tandroid:id=\"@+id/button_right\"\n+\t\tandroid:layout_weight=\"1\"\n+\t\tlayout=\"@layout/preference_button_with_icon\"\n+\t\tandroid:layout_width=\"wrap_content\"\n+\t\tandroid:layout_height=\"match_parent\"\n+\t\tandroid:layout_marginStart=\"@dimen/content_padding_half\"\n+\t\tandroid:layout_marginLeft=\"@dimen/content_padding_half\"\n+\t\tandroid:minWidth=\"@dimen/context_menu_top_right_button_min_width\"\n+\t\tandroid:minHeight=\"@dimen/setting_list_item_large_height\" />\n+\n+</LinearLayout>\n\\ No newline at end of file"
  },
  {
    "sha": "d218b3be319cb8b2c86725cfbb05597b4b8b1626",
    "filename": "OsmAnd/res/layout/preference_button_with_icon_triple.xml",
    "status": "added",
    "additions": 41,
    "deletions": 0,
    "changes": 41,
    "blob_url": "https://github.com/osmandapp/OsmAnd/blob/35064dba0158091eac04d69c278722b73a09cf0a/OsmAnd/res/layout/preference_button_with_icon_triple.xml",
    "raw_url": "https://github.com/osmandapp/OsmAnd/raw/35064dba0158091eac04d69c278722b73a09cf0a/OsmAnd/res/layout/preference_button_with_icon_triple.xml",
    "contents_url": "https://api.github.com/repos/osmandapp/OsmAnd/contents/OsmAnd/res/layout/preference_button_with_icon_triple.xml?ref=35064dba0158091eac04d69c278722b73a09cf0a",
    "patch": "@@ -0,0 +1,41 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n+\tandroid:layout_width=\"match_parent\"\n+\tandroid:layout_height=\"wrap_content\"\n+\tandroid:layout_marginStart=\"@dimen/content_padding\"\n+\tandroid:layout_marginLeft=\"@dimen/content_padding\"\n+\tandroid:layout_marginEnd=\"@dimen/content_padding\"\n+\tandroid:layout_marginRight=\"@dimen/content_padding\"\n+\tandroid:baselineAligned=\"false\"\n+\tandroid:minHeight=\"@dimen/setting_list_item_large_height\"\n+\tandroid:orientation=\"horizontal\">\n+\n+\t<include\n+\t\tandroid:id=\"@+id/button_left\"\n+\t\tlayout=\"@layout/preference_button_with_icon\"\n+\t\tandroid:layout_width=\"wrap_content\"\n+\t\tandroid:layout_height=\"match_parent\"\n+\t\tandroid:minWidth=\"@dimen/context_menu_top_right_button_min_width\"\n+\t\tandroid:minHeight=\"@dimen/setting_list_item_large_height\" />\n+\n+\t<include\n+\t\tandroid:id=\"@+id/button_center\"\n+\t\tlayout=\"@layout/preference_button_with_icon\"\n+\t\tandroid:layout_width=\"0dp\"\n+\t\tandroid:layout_height=\"match_parent\"\n+\t\tandroid:layout_marginStart=\"@dimen/content_padding_half\"\n+\t\tandroid:layout_marginLeft=\"@dimen/content_padding_half\"\n+\t\tandroid:layout_weight=\"1\"\n+\t\tandroid:minHeight=\"@dimen/setting_list_item_large_height\" />\n+\n+\t<include\n+\t\tandroid:id=\"@+id/button_right\"\n+\t\tlayout=\"@layout/preference_button_with_icon\"\n+\t\tandroid:layout_width=\"wrap_content\"\n+\t\tandroid:layout_height=\"match_parent\"\n+\t\tandroid:layout_marginStart=\"@dimen/content_padding_half\"\n+\t\tandroid:layout_marginLeft=\"@dimen/content_padding_half\"\n+\t\tandroid:minWidth=\"@dimen/context_menu_top_right_button_min_width\"\n+\t\tandroid:minHeight=\"@dimen/setting_list_item_large_height\" />\n+\n+</LinearLayout>\n\\ No newline at end of file"
  },
  {
    "sha": "3c76b1e050643a0b878d5f54364c0d03e5b39f45",
    "filename": "OsmAnd/res/layout/trip_recording_starting_fragment.xml",
    "status": "renamed",
    "additions": 20,
    "deletions": 26,
    "changes": 46,
    "blob_url": "https://github.com/osmandapp/OsmAnd/blob/35064dba0158091eac04d69c278722b73a09cf0a/OsmAnd/res/layout/trip_recording_starting_fragment.xml",
    "raw_url": "https://github.com/osmandapp/OsmAnd/raw/35064dba0158091eac04d69c278722b73a09cf0a/OsmAnd/res/layout/trip_recording_starting_fragment.xml",
    "contents_url": "https://api.github.com/repos/osmandapp/OsmAnd/contents/OsmAnd/res/layout/trip_recording_starting_fragment.xml?ref=35064dba0158091eac04d69c278722b73a09cf0a",
    "patch": "@@ -1,11 +1,11 @@\n <?xml version=\"1.0\" encoding=\"utf-8\"?>\n <LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n \txmlns:app=\"http://schemas.android.com/apk/res-auto\"\n-\txmlns:osmand=\"http://schemas.android.com/apk/res-auto\"\n \txmlns:tools=\"http://schemas.android.com/tools\"\n \tandroid:layout_width=\"match_parent\"\n \tandroid:layout_height=\"wrap_content\"\n-\tandroid:orientation=\"vertical\">\n+\tandroid:orientation=\"vertical\"\n+\tandroid:paddingBottom=\"@dimen/content_padding\">\n \n \t<net.osmand.plus.widgets.TextViewEx\n \t\tandroid:id=\"@+id/title\"\n@@ -20,7 +20,7 @@\n \t\tandroid:paddingBottom=\"@dimen/content_padding_small\"\n \t\tandroid:text=\"@string/monitoring_settings\"\n \t\tandroid:textSize=\"@dimen/default_list_text_size\"\n-\t\tosmand:typeface=\"@string/font_roboto_medium\" />\n+\t\tapp:typeface=\"@string/font_roboto_medium\" />\n \n \t<include\n \t\tandroid:id=\"@+id/show_track_on_map\"\n@@ -29,22 +29,23 @@\n \t<View\n \t\tandroid:layout_width=\"match_parent\"\n \t\tandroid:layout_height=\"1dp\"\n+\t\tandroid:layout_marginTop=\"@dimen/content_padding\"\n \t\tandroid:background=\"?attr/dashboard_divider\" />\n \n \t<LinearLayout\n \t\tandroid:id=\"@+id/interval_view_container\"\n-\t\tandroid:background=\"?attr/selectableItemBackground\"\n \t\tandroid:layout_width=\"match_parent\"\n \t\tandroid:layout_height=\"0dp\"\n \t\tandroid:layout_gravity=\"center_vertical\"\n \t\tandroid:layout_weight=\"1\"\n+\t\tandroid:background=\"?attr/selectableItemBackground\"\n \t\tandroid:orientation=\"horizontal\"\n \t\tandroid:paddingStart=\"@dimen/content_padding\"\n \t\tandroid:paddingLeft=\"@dimen/content_padding\"\n \t\tandroid:paddingTop=\"@dimen/bottom_sheet_content_margin\"\n-\t\tandroid:paddingBottom=\"@dimen/bottom_sheet_content_margin\"\n \t\tandroid:paddingEnd=\"@dimen/content_padding\"\n-\t\tandroid:paddingRight=\"@dimen/content_padding\">\n+\t\tandroid:paddingRight=\"@dimen/content_padding\"\n+\t\tandroid:paddingBottom=\"@dimen/bottom_sheet_content_margin\">\n \n \t\t<net.osmand.plus.widgets.TextViewEx\n \t\t\tandroid:id=\"@+id/interval_value\"\n@@ -62,6 +63,7 @@\n \t\t\tandroid:layout_height=\"wrap_content\"\n \t\t\tandroid:background=\"@null\"\n \t\t\tapp:srcCompat=\"@drawable/ic_action_arrow_down\" />\n+\n \t</LinearLayout>\n \n \t<LinearLayout\n@@ -84,34 +86,26 @@\n \t\t\tapp:labelBehavior=\"gone\"\n \t\t\tapp:thumbColor=\"@color/profile_icon_color_blue_light\"\n \t\t\tapp:thumbRadius=\"@dimen/content_padding_small_half\"\n+\t\t\tapp:tickColorInactive=\"#007EB3\"\n \t\t\tapp:trackColorActive=\"@color/profile_icon_color_blue_light\"\n \t\t\tapp:trackColorInactive=\"#4D007EB3\"\n-\t\t\tapp:tickColorInactive=\"#007EB3\"\n \t\t\tapp:trackHeight=\"@dimen/slider_track_height\"\n \t\t\ttools:visibility=\"visible\" />\n \n-\t\t<androidx.appcompat.widget.SwitchCompat\n-\t\t\tandroid:id=\"@+id/confirm_every_run\"\n+\t\t<TextView\n \t\t\tandroid:layout_width=\"match_parent\"\n-\t\t\tandroid:layout_height=\"match_parent\"\n-\t\t\tandroid:letterSpacing=\"@dimen/text_button_letter_spacing\"\n-\t\t\tandroid:minHeight=\"@dimen/context_menu_buttons_bottom_height\"\n-\t\t\tandroid:paddingLeft=\"@dimen/content_padding_small\"\n-\t\t\tandroid:paddingRight=\"@dimen/content_padding_small\"\n-\t\t\tandroid:text=\"@string/confirm_every_run\"\n-\t\t\tandroid:textColor=\"?attr/color_dialog_buttons\"\n-\t\t\tandroid:textSize=\"@dimen/default_list_text_size\"\n-\t\t\tosmand:typeface=\"@string/font_roboto_regular\"\n-\t\t\ttools:visibility=\"visible\" />\n+\t\t\tandroid:layout_height=\"wrap_content\"\n+\t\t\tandroid:paddingBottom=\"@dimen/content_padding_small\"\n+\t\t\tandroid:letterSpacing=\"@dimen/description_letter_spacing\"\n+\t\t\tandroid:text=\"@string/trip_recording_logging_interval_info\"\n+\t\t\tandroid:textColor=\"?attr/dialog_text_description_color\" />\n+\n \t</LinearLayout>\n \n-\t<View\n-\t\tandroid:id=\"@+id/second_divider\"\n+\t<Space\n \t\tandroid:layout_width=\"match_parent\"\n-\t\tandroid:layout_height=\"1dp\"\n-\t\tandroid:background=\"?attr/dashboard_divider\" />\n-\n-</LinearLayout>\n-\n+\t\tandroid:layout_height=\"@dimen/context_menu_first_line_top_margin\" />\n \n+\t<include layout=\"@layout/preference_button_with_icon_triple\" />\n \n+</LinearLayout>",
    "previous_filename": "OsmAnd/res/layout/trip_recording_fragment.xml"
  },
  {
    "sha": "93cfd932317ae2f1c6b84040ae14a26d0c8866d1",
    "filename": "OsmAnd/res/values/strings.xml",
    "status": "modified",
    "additions": 1,
    "deletions": 0,
    "changes": 1,
    "blob_url": "https://github.com/osmandapp/OsmAnd/blob/35064dba0158091eac04d69c278722b73a09cf0a/OsmAnd/res/values/strings.xml",
    "raw_url": "https://github.com/osmandapp/OsmAnd/raw/35064dba0158091eac04d69c278722b73a09cf0a/OsmAnd/res/values/strings.xml",
    "contents_url": "https://api.github.com/repos/osmandapp/OsmAnd/contents/OsmAnd/res/values/strings.xml?ref=35064dba0158091eac04d69c278722b73a09cf0a",
    "patch": "@@ -11,6 +11,7 @@\n \tThx - Hardy\n \n -->\n+    <string name=\"trip_recording_logging_interval_info\">Logging interval set time period in which OsmAnd will ask for the current location position data.</string>\n     <string name=\"select_another_colorization\">Please select another type of colorization.</string>\n     <string name=\"track_has_no_speed\">The track does not contain speed data.</string>\n     <string name=\"track_has_no_altitude\">The track does not contain altitude data.</string>"
  },
  {
    "sha": "487f4d902fc0f60393f9c8ef5ce33ce54dd5e5ba",
    "filename": "OsmAnd/src/net/osmand/plus/activities/MapActivity.java",
    "status": "modified",
    "additions": 3,
    "deletions": 4,
    "changes": 7,
    "blob_url": "https://github.com/osmandapp/OsmAnd/blob/35064dba0158091eac04d69c278722b73a09cf0a/OsmAnd/src/net/osmand/plus/activities/MapActivity.java",
    "raw_url": "https://github.com/osmandapp/OsmAnd/raw/35064dba0158091eac04d69c278722b73a09cf0a/OsmAnd/src/net/osmand/plus/activities/MapActivity.java",
    "contents_url": "https://api.github.com/repos/osmandapp/OsmAnd/contents/OsmAnd/src/net/osmand/plus/activities/MapActivity.java?ref=35064dba0158091eac04d69c278722b73a09cf0a",
    "patch": "@@ -93,7 +93,6 @@\n import net.osmand.plus.mapcontextmenu.AdditionalActionsBottomSheetDialogFragment;\n import net.osmand.plus.mapcontextmenu.MapContextMenu;\n import net.osmand.plus.mapcontextmenu.builders.cards.dialogs.ContextMenuCardDialogFragment;\n-import net.osmand.plus.mapcontextmenu.editors.SelectFavoriteCategoryBottomSheet;\n import net.osmand.plus.mapcontextmenu.other.DestinationReachedMenu;\n import net.osmand.plus.mapcontextmenu.other.TrackDetailsMenu;\n import net.osmand.plus.mapmarkers.MapMarker;\n@@ -105,7 +104,7 @@\n import net.osmand.plus.measurementtool.MeasurementEditingContext;\n import net.osmand.plus.measurementtool.MeasurementToolFragment;\n import net.osmand.plus.measurementtool.SnapTrackWarningFragment;\n-import net.osmand.plus.monitoring.TripRecordingBottomSheet;\n+import net.osmand.plus.monitoring.TripRecordingStartingBottomSheet;\n import net.osmand.plus.render.RendererRegistry;\n import net.osmand.plus.resources.ResourceManager;\n import net.osmand.plus.routepreparationmenu.ChooseRouteFragment;\n@@ -2242,8 +2241,8 @@ public MeasurementToolFragment getMeasurementToolFragment() {\n \t\treturn getFragment(MeasurementToolFragment.TAG);\n \t}\n \n-\tpublic TripRecordingBottomSheet getTripRecordingBottomSheet() {\n-\t\treturn getFragment(TripRecordingBottomSheet.TAG);\n+\tpublic TripRecordingStartingBottomSheet getTripRecordingBottomSheet() {\n+\t\treturn getFragment(TripRecordingStartingBottomSheet.TAG);\n \t}\n \n \tpublic ChooseRouteFragment getChooseRouteFragment() {"
  },
  {
    "sha": "ff78335e74fa408b3cf58394e84a050c8e32019c",
    "filename": "OsmAnd/src/net/osmand/plus/activities/MapActivityActions.java",
    "status": "modified",
    "additions": 2,
    "deletions": 2,
    "changes": 4,
    "blob_url": "https://github.com/osmandapp/OsmAnd/blob/35064dba0158091eac04d69c278722b73a09cf0a/OsmAnd/src/net/osmand/plus/activities/MapActivityActions.java",
    "raw_url": "https://github.com/osmandapp/OsmAnd/raw/35064dba0158091eac04d69c278722b73a09cf0a/OsmAnd/src/net/osmand/plus/activities/MapActivityActions.java",
    "contents_url": "https://api.github.com/repos/osmandapp/OsmAnd/contents/OsmAnd/src/net/osmand/plus/activities/MapActivityActions.java?ref=35064dba0158091eac04d69c278722b73a09cf0a",
    "patch": "@@ -63,7 +63,7 @@\n import net.osmand.plus.measurementtool.StartPlanRouteBottomSheet;\n import net.osmand.plus.monitoring.OsmandMonitoringPlugin;\n import net.osmand.plus.monitoring.TripRecordingActiveBottomSheet;\n-import net.osmand.plus.monitoring.TripRecordingBottomSheet;\n+import net.osmand.plus.monitoring.TripRecordingStartingBottomSheet;\n import net.osmand.plus.osmedit.dialogs.DismissRouteBottomSheetFragment;\n import net.osmand.plus.profiles.ProfileDataObject;\n import net.osmand.plus.profiles.ProfileDataUtils;\n@@ -856,7 +856,7 @@ public boolean onContextMenuClick(ArrayAdapter<ContextMenuItem> adapter, int ite\n \t\t\t\t\t\t\tif (monitoringPlugin.hasDataToSave() || monitoringPlugin.wasTrackMonitored()) {\n \t\t\t\t\t\t\t\tTripRecordingActiveBottomSheet.showInstance(mapActivity.getSupportFragmentManager(), monitoringPlugin.getCurrentTrack());\n \t\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\t\tTripRecordingBottomSheet.showInstance(mapActivity.getSupportFragmentManager());\n+\t\t\t\t\t\t\t\tTripRecordingStartingBottomSheet.showInstance(mapActivity.getSupportFragmentManager());\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t\treturn true;\n \t\t\t\t\t\t}"
  },
  {
    "sha": "4fa978a8d69a9504b7d7be7f0fa65a19c73e5a33",
    "filename": "OsmAnd/src/net/osmand/plus/monitoring/OsmandMonitoringPlugin.java",
    "status": "modified",
    "additions": 2,
    "deletions": 2,
    "changes": 4,
    "blob_url": "https://github.com/osmandapp/OsmAnd/blob/35064dba0158091eac04d69c278722b73a09cf0a/OsmAnd/src/net/osmand/plus/monitoring/OsmandMonitoringPlugin.java",
    "raw_url": "https://github.com/osmandapp/OsmAnd/raw/35064dba0158091eac04d69c278722b73a09cf0a/OsmAnd/src/net/osmand/plus/monitoring/OsmandMonitoringPlugin.java",
    "contents_url": "https://api.github.com/repos/osmandapp/OsmAnd/contents/OsmAnd/src/net/osmand/plus/monitoring/OsmandMonitoringPlugin.java?ref=35064dba0158091eac04d69c278722b73a09cf0a",
    "patch": "@@ -331,7 +331,7 @@ public void controlDialog(final Activity activity, final boolean showTrackSelect\n \t\tif (hasDataToSave() || wasTrackMonitored()) {\n \t\t\tTripRecordingActiveBottomSheet.showInstance(fragmentManager, getCurrentTrack());\n \t\t} else {\n-\t\t\tTripRecordingBottomSheet.showInstance(fragmentManager);\n+\t\t\tTripRecordingStartingBottomSheet.showInstance(fragmentManager);\n \t\t}\n \n \t\t/*final boolean wasTrackMonitored = settings.SAVE_GLOBAL_TRACK_TO_GPX.get();\n@@ -523,7 +523,7 @@ public void run() {\n \t\t\trunnable.run();\n \t\t} else if (map instanceof FragmentActivity) {\n \t\t\tFragmentActivity activity = (FragmentActivity) map;\n-\t\t\tTripRecordingBottomSheet.showInstance(activity.getSupportFragmentManager());\n+\t\t\tTripRecordingStartingBottomSheet.showInstance(activity.getSupportFragmentManager());\n \t\t}\n \t}\n "
  },
  {
    "sha": "dc965143d32ee14e26c6615b6e04e75234778c23",
    "filename": "OsmAnd/src/net/osmand/plus/monitoring/TripRecordingActiveBottomSheet.java",
    "status": "modified",
    "additions": 101,
    "deletions": 82,
    "changes": 183,
    "blob_url": "https://github.com/osmandapp/OsmAnd/blob/35064dba0158091eac04d69c278722b73a09cf0a/OsmAnd/src/net/osmand/plus/monitoring/TripRecordingActiveBottomSheet.java",
    "raw_url": "https://github.com/osmandapp/OsmAnd/raw/35064dba0158091eac04d69c278722b73a09cf0a/OsmAnd/src/net/osmand/plus/monitoring/TripRecordingActiveBottomSheet.java",
    "contents_url": "https://api.github.com/repos/osmandapp/OsmAnd/contents/OsmAnd/src/net/osmand/plus/monitoring/TripRecordingActiveBottomSheet.java?ref=35064dba0158091eac04d69c278722b73a09cf0a",
    "patch": "@@ -4,17 +4,15 @@\n import android.app.Dialog;\n import android.content.Context;\n import android.content.res.ColorStateList;\n-import android.graphics.Typeface;\n import android.graphics.drawable.Drawable;\n import android.os.AsyncTask;\n-import android.os.Build;\n import android.os.Bundle;\n import android.os.Handler;\n-import android.util.TypedValue;\n import android.text.format.DateUtils;\n import android.view.Gravity;\n import android.view.LayoutInflater;\n import android.view.View;\n+import android.widget.CompoundButton;\n import android.widget.FrameLayout;\n import android.widget.LinearLayout;\n import android.widget.TextView;\n@@ -26,10 +24,11 @@\n import androidx.annotation.StringRes;\n import androidx.appcompat.content.res.AppCompatResources;\n import androidx.appcompat.widget.AppCompatImageView;\n-import androidx.appcompat.widget.SwitchCompat;\n+import androidx.cardview.widget.CardView;\n import androidx.coordinatorlayout.widget.CoordinatorLayout;\n import androidx.core.content.ContextCompat;\n import androidx.core.graphics.drawable.DrawableCompat;\n+import androidx.fragment.app.Fragment;\n import androidx.fragment.app.FragmentManager;\n import androidx.recyclerview.widget.RecyclerView;\n \n@@ -49,7 +48,6 @@\n import net.osmand.plus.base.MenuBottomSheetDialogFragment;\n import net.osmand.plus.base.bottomsheetmenu.BaseBottomSheetItem;\n import net.osmand.plus.helpers.AndroidUiHelper;\n-import net.osmand.plus.helpers.FontCache;\n import net.osmand.plus.myplaces.SaveCurrentTrackTask;\n import net.osmand.plus.settings.backend.OsmandSettings;\n import net.osmand.plus.track.GpxBlockStatisticsBuilder;\n@@ -66,7 +64,7 @@\n import java.util.List;\n \n import static net.osmand.AndroidUtils.getSecondaryTextColorId;\n-import static net.osmand.plus.UiUtilities.CompoundButtonType.PROFILE_DEPENDENT;\n+import static net.osmand.plus.UiUtilities.CompoundButtonType.GLOBAL;\n \n public class TripRecordingActiveBottomSheet extends MenuBottomSheetDialogFragment {\n \n@@ -83,7 +81,8 @@\n \tprivate SelectedGpxFile selectedGpxFile;\n \n \tprivate View statusContainer;\n-\tprivate LinearLayout buttonAppearance;\n+\tprivate LinearLayout showTrackContainer;\n+\tprivate AppCompatImageView trackAppearanceIcon;\n \tprivate View buttonSave;\n \tprivate GpxBlockStatisticsBuilder blockStatisticsBuilder;\n \n@@ -141,7 +140,7 @@ public void createMenuItems(Bundle savedInstanceState) {\n \n \t\tcreateItem(buttonClear, ItemType.CLEAR_DATA, hasDataToSave());\n \t\tcreateItem(buttonOnline, ItemType.STOP_ONLINE, hasDataToSave());\n-\t\tcreateItem(buttonSegment, ItemType.START_SEGMENT, wasTrackMonitored());\n+\t\tcreateItem(buttonSegment, ItemType.START_NEW_SEGMENT, wasTrackMonitored());\n \t\tcreateItem(buttonPause, wasTrackMonitored() ? ItemType.PAUSE : ItemType.RESUME, true);\n \t\tcreateItem(buttonStop, ItemType.STOP, true);\n \n@@ -162,62 +161,15 @@ public void createMenuItems(Bundle savedInstanceState) {\n \t\tblockStatisticsBuilder.setBlocksClickable(false);\n \t\tblockStatisticsBuilder.initStatBlocks(null, ContextCompat.getColor(app, getActiveTextColorId(nightMode)), nightMode);\n \n-\t\tLinearLayout showTrackContainer = itemView.findViewById(R.id.show_track_on_map);\n-\t\tshowTrackContainer.setMinimumHeight(app.getResources().getDimensionPixelSize(R.dimen.bottom_sheet_list_item_height));\n-\n-\t\tfinal LinearLayout buttonShow = showTrackContainer.findViewById(R.id.basic_item_body);\n-\t\tTextView showTrackTitle = buttonShow.findViewById(R.id.title);\n-\t\tInteger showTitle = ItemType.SHOW_TRACK.getTitleId();\n-\t\tif (showTitle != null) {\n-\t\t\tshowTrackTitle.setText(showTitle);\n-\t\t}\n-\t\tAndroidUtils.setPadding(buttonShow, AndroidUtils.dpToPx(app, 12f), 0, buttonShow.getPaddingRight(), 0);\n-\t\tshowTrackTitle.setTextColor(ContextCompat.getColor(app, getActiveIconColorId(nightMode)));\n-\t\tshowTrackTitle.setTextSize(TypedValue.COMPLEX_UNIT_PX, getResources().getDimensionPixelSize(R.dimen.default_desc_text_size));\n-\t\tTypeface typeface = FontCache.getFont(app, app.getResources().getString(R.string.font_roboto_medium));\n-\t\tshowTrackTitle.setTypeface(typeface);\n-\t\tif (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {\n-\t\t\tfloat letterSpacing = AndroidUtils.getFloatValueFromRes(app, R.dimen.text_button_letter_spacing);\n-\t\t\tshowTrackTitle.setLetterSpacing(letterSpacing);\n-\t\t}\n-\t\tfinal SwitchCompat showTrackOnMapButton = buttonShow.findViewById(R.id.switch_button);\n-\t\tshowTrackOnMapButton.setChecked(app.getSelectedGpxHelper().getSelectedCurrentRecordingTrack() != null);\n-\t\tUiUtilities.setupCompoundButton(showTrackOnMapButton, nightMode, PROFILE_DEPENDENT);\n-\n-\t\tbuttonAppearance = showTrackContainer.findViewById(R.id.additional_button);\n-\t\tView divider = buttonAppearance.getChildAt(0);\n-\t\tAndroidUiHelper.setVisibility(View.GONE, divider);\n-\t\tint marginS = app.getResources().getDimensionPixelSize(R.dimen.context_menu_padding_margin_small);\n-\t\tUiUtilities.setMargins(buttonAppearance, marginS, 0, 0, 0);\n-\t\tupdateTrackIcon(buttonAppearance);\n-\t\tbuttonAppearance.setOnClickListener(new View.OnClickListener() {\n-\t\t\t@Override\n-\t\t\tpublic void onClick(View v) {\n-\t\t\t\tif (showTrackOnMapButton.isChecked()) {\n-\t\t\t\t\tMapActivity mapActivity = getMapActivity();\n-\t\t\t\t\tif (mapActivity != null) {\n+\t\tshowTrackContainer = itemView.findViewById(R.id.show_track_on_map);\n+\t\ttrackAppearanceIcon = showTrackContainer.findViewById(R.id.additional_button_icon);\n+\t\tcreateShowTrackItem(app, getMapActivity(), nightMode, showTrackContainer, trackAppearanceIcon,\n+\t\t\t\tItemType.SHOW_TRACK.getTitleId(), TripRecordingActiveBottomSheet.this, new Runnable() {\n+\t\t\t\t\t@Override\n+\t\t\t\t\tpublic void run() {\n \t\t\t\t\t\thide();\n-\t\t\t\t\t\tSelectedGpxFile selectedGpxFile = app.getSavingTrackHelper().getCurrentTrack();\n-\t\t\t\t\t\tTrackAppearanceFragment.showInstance(mapActivity, selectedGpxFile, TripRecordingActiveBottomSheet.this);\n \t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t}\n-\t\t});\n-\t\tcreateItem(buttonAppearance, ItemType.APPEARANCE, showTrackOnMapButton.isChecked());\n-\t\tsetShowOnMapBackground(buttonShow, app, showTrackOnMapButton.isChecked(), nightMode);\n-\t\tif (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {\n-\t\t\tbuttonShow.setBackgroundTintList(null);\n-\t\t}\n-\t\tbuttonShow.setOnClickListener(new View.OnClickListener() {\n-\t\t\t@Override\n-\t\t\tpublic void onClick(View v) {\n-\t\t\t\tboolean checked = !showTrackOnMapButton.isChecked();\n-\t\t\t\tshowTrackOnMapButton.setChecked(checked);\n-\t\t\t\tapp.getSelectedGpxHelper().selectGpxFile(app.getSavingTrackHelper().getCurrentGpx(), checked, false);\n-\t\t\t\tcreateItem(buttonAppearance, ItemType.APPEARANCE, checked);\n-\t\t\t\tsetShowOnMapBackground(buttonShow, app, checked, nightMode);\n-\t\t\t}\n-\t\t});\n+\t\t\t\t});\n \n \t\tbuttonClear.findViewById(R.id.button_container).setOnClickListener(new View.OnClickListener() {\n \t\t\t@Override\n@@ -277,7 +229,7 @@ public void onClick(View v) {\n \t\t\t\tsettings.SAVE_GLOBAL_TRACK_TO_GPX.set(wasTrackMonitored);\n \t\t\t\tupdateStatus();\n \t\t\t\tcreateItem(buttonPause, wasTrackMonitored ? ItemType.PAUSE : ItemType.RESUME, true);\n-\t\t\t\tcreateItem(buttonSegment, ItemType.START_SEGMENT, wasTrackMonitored);\n+\t\t\t\tcreateItem(buttonSegment, ItemType.START_NEW_SEGMENT, wasTrackMonitored);\n \t\t\t}\n \t\t});\n \n@@ -310,15 +262,60 @@ private void updateStatus() {\n \t\t}\n \t}\n \n-\tprivate void updateTrackIcon(View buttonAppearance) {\n-\t\tString width = settings.CURRENT_TRACK_WIDTH.get();\n-\t\tboolean showArrows = settings.CURRENT_TRACK_SHOW_ARROWS.get();\n-\t\tint color = settings.CURRENT_TRACK_COLOR.get();\n-\t\tDrawable appearanceDrawable = TrackAppearanceFragment.getTrackIcon(app, width, showArrows, color);\n-\t\tAppCompatImageView appearanceIcon = buttonAppearance.findViewById(R.id.icon_after_divider);\n-\t\tint marginTrackIconH = app.getResources().getDimensionPixelSize(R.dimen.content_padding_small);\n-\t\tUiUtilities.setMargins(appearanceIcon, marginTrackIconH, 0, marginTrackIconH, 0);\n-\t\tappearanceIcon.setImageDrawable(appearanceDrawable);\n+\tpublic static void updateTrackIcon(OsmandApplication app, AppCompatImageView appearanceIcon) {\n+\t\tif (appearanceIcon != null) {\n+\t\t\tOsmandSettings settings = app.getSettings();\n+\t\t\tString width = settings.CURRENT_TRACK_WIDTH.get();\n+\t\t\tboolean showArrows = settings.CURRENT_TRACK_SHOW_ARROWS.get();\n+\t\t\tint color = settings.CURRENT_TRACK_COLOR.get();\n+\t\t\tDrawable appearanceDrawable = TrackAppearanceFragment.getTrackIcon(app, width, showArrows, color);\n+\t\t\tint marginTrackIconH = app.getResources().getDimensionPixelSize(R.dimen.content_padding_small);\n+\t\t\tUiUtilities.setMargins(appearanceIcon, marginTrackIconH, 0, marginTrackIconH, 0);\n+\t\t\tappearanceIcon.setImageDrawable(appearanceDrawable);\n+\t\t}\n+\t}\n+\n+\tpublic static void createShowTrackItem(final OsmandApplication app, final MapActivity mapActivity,\n+\t\t\t\t\t\t\t\t\t\t   final boolean nightMode, LinearLayout showTrackContainer,\n+\t\t\t\t\t\t\t\t\t\t   AppCompatImageView trackAppearanceIcon, Integer showTrackId,\n+\t\t\t\t\t\t\t\t\t\t   final Fragment target, final Runnable hideOnClickButtonAppearance) {\n+\t\tfinal CardView buttonShowTrack = showTrackContainer.findViewById(R.id.compound_container);\n+\t\tfinal CardView buttonAppearance = showTrackContainer.findViewById(R.id.additional_button_container);\n+\n+\t\tTextView showTrackTextView = buttonShowTrack.findViewById(R.id.title);\n+\t\tif (showTrackId != null) {\n+\t\t\tshowTrackTextView.setText(showTrackId);\n+\t\t}\n+\t\tfinal CompoundButton showTrackCompound = buttonShowTrack.findViewById(R.id.compound_button);\n+\t\tshowTrackCompound.setChecked(app.getSelectedGpxHelper().getSelectedCurrentRecordingTrack() != null);\n+\t\tUiUtilities.setupCompoundButton(showTrackCompound, nightMode, GLOBAL);\n+\n+\t\tsetShowOnMapBackground(buttonShowTrack, showTrackCompound.isChecked(), nightMode);\n+\t\tbuttonShowTrack.setOnClickListener(new View.OnClickListener() {\n+\t\t\t@Override\n+\t\t\tpublic void onClick(View v) {\n+\t\t\t\tboolean checked = !showTrackCompound.isChecked();\n+\t\t\t\tshowTrackCompound.setChecked(checked);\n+\t\t\t\tapp.getSelectedGpxHelper().selectGpxFile(app.getSavingTrackHelper().getCurrentGpx(), checked, false);\n+\t\t\t\tsetShowOnMapBackground(buttonShowTrack, checked, nightMode);\n+\t\t\t\tcreateItem(app, nightMode, buttonAppearance, ItemType.APPEARANCE, checked, null);\n+\t\t\t}\n+\t\t});\n+\n+\t\tupdateTrackIcon(app, trackAppearanceIcon);\n+\t\tcreateItem(app, nightMode, buttonAppearance, ItemType.APPEARANCE, showTrackCompound.isChecked(), null);\n+\t\tbuttonAppearance.setOnClickListener(new View.OnClickListener() {\n+\t\t\t@Override\n+\t\t\tpublic void onClick(View v) {\n+\t\t\t\tif (showTrackCompound.isChecked()) {\n+\t\t\t\t\tif (mapActivity != null) {\n+\t\t\t\t\t\thideOnClickButtonAppearance.run();\n+\t\t\t\t\t\tSelectedGpxFile selectedGpxFile = app.getSavingTrackHelper().getCurrentTrack();\n+\t\t\t\t\t\tTrackAppearanceFragment.showInstance(mapActivity, selectedGpxFile, target);\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t}\n+\t\t});\n \t}\n \n \tprivate void createItem(View view, ItemType type, boolean enabled) {\n@@ -370,7 +367,7 @@ public static void createItem(Context context, boolean nightMode, View view, Ite\n \t\t\tsetTextColor(context, desc, false, nightMode, type);\n \t\t}\n \n-\t\tsetItemBackground(context, nightMode, button != null ? button : (LinearLayout) view, enabled);\n+\t\tsetItemBackground(context, nightMode, button != null ? button : view, enabled);\n \t}\n \n \tprivate String getTimeTrackSaved() {\n@@ -505,7 +502,7 @@ public void show(String... keys) {\n \t\tshow();\n \t\tfor (String key : keys) {\n \t\t\tif (key.equals(UPDATE_TRACK_ICON)) {\n-\t\t\t\tupdateTrackIcon(buttonAppearance);\n+\t\t\t\tupdateTrackIcon(app, trackAppearanceIcon);\n \t\t\t}\n \t\t}\n \t}\n@@ -524,15 +521,17 @@ public void hide() {\n \t\tRECORDING(R.string.recording_default_name, R.drawable.ic_action_track_recordable),\n \t\tON_PAUSE(R.string.on_pause, R.drawable.ic_pause),\n \t\tCLEAR_DATA(R.string.clear_recorded_data, R.drawable.ic_action_delete_dark),\n-\t\tSTART_SEGMENT(R.string.gpx_start_new_segment, R.drawable.ic_action_new_segment),\n+\t\tSTART_NEW_SEGMENT(R.string.gpx_start_new_segment, R.drawable.ic_action_new_segment),\n \t\tSAVE(R.string.shared_string_save, R.drawable.ic_action_save_to_file),\n \t\tPAUSE(R.string.shared_string_pause, R.drawable.ic_pause),\n \t\tRESUME(R.string.shared_string_resume, R.drawable.ic_play_dark),\n \t\tSTOP(R.string.shared_string_control_stop, R.drawable.ic_action_rec_stop),\n \t\tSTOP_AND_DISCARD(R.string.track_recording_stop_without_saving, R.drawable.ic_action_rec_stop),\n \t\tSTOP_AND_SAVE(R.string.track_recording_save_and_stop, R.drawable.ic_action_save_to_file),\n \t\tSTOP_ONLINE(R.string.live_monitoring_stop, R.drawable.ic_world_globe_dark),\n-\t\tCANCEL(R.string.shared_string_cancel, R.drawable.ic_action_close);\n+\t\tCANCEL(R.string.shared_string_cancel, R.drawable.ic_action_close),\n+\t\tSTART_RECORDING(R.string.shared_string_control_start, R.drawable.ic_action_direction_movement),\n+\t\tSETTINGS(R.string.shared_string_settings, R.drawable.ic_action_settings);\n \n \t\t@StringRes\n \t\tprivate final Integer titleId;\n@@ -560,23 +559,28 @@ public boolean isNegative() {\n \t\t}\n \t}\n \n-\tpublic static void setItemBackground(Context context, boolean nightMode, LinearLayout view, boolean enabled) {\n+\tpublic static void setItemBackground(Context context, boolean nightMode, View view, boolean enabled) {\n \t\tDrawable background = AppCompatResources.getDrawable(context, R.drawable.btn_background_inactive_light);\n \t\tif (background != null && enabled) {\n+\t\t\tint normalColorId = view instanceof CardView\n+\t\t\t\t\t? getActiveTransparentColorId(nightMode) : getInactiveButtonColorId(nightMode);\n \t\t\tColorStateList iconColorStateList = AndroidUtils.createPressedColorStateList(\n-\t\t\t\t\tcontext, getInactiveButtonColorId(nightMode), getActiveButtonColorId(nightMode)\n+\t\t\t\t\tcontext, normalColorId, getActiveTextColorId(nightMode)\n \t\t\t);\n+\t\t\tif (view instanceof CardView) {\n+\t\t\t\t((CardView) view).setCardBackgroundColor(iconColorStateList);\n+\t\t\t\treturn;\n+\t\t\t}\n \t\t\tDrawableCompat.setTintList(background, iconColorStateList);\n \t\t} else {\n \t\t\tUiUtilities.tintDrawable(background, ContextCompat.getColor(context, getInactiveButtonColorId(nightMode)));\n \t\t}\n \t\tview.setBackgroundDrawable(background);\n \t}\n \n-\tpublic static void setShowOnMapBackground(LinearLayout view, Context context, boolean checked, boolean nightMode) {\n-\t\tDrawable background = AppCompatResources.getDrawable(context,\n-\t\t\t\tnightMode ? checked ? R.drawable.btn_background_inactive_dark : R.drawable.btn_background_stroked_inactive_dark\n-\t\t\t\t\t\t: checked ? R.drawable.btn_background_inactive_light : R.drawable.btn_background_stroked_inactive_light);\n+\tpublic static void setShowOnMapBackground(View view, boolean checked, boolean nightMode) {\n+\t\tDrawable background = AppCompatResources.getDrawable(view.getContext(),\n+\t\t\t\tchecked ? getActiveTransparentBackgroundId(nightMode) : getInactiveStrokedBackgroundId(nightMode));\n \t\tview.setBackgroundDrawable(background);\n \t}\n \n@@ -638,11 +642,26 @@ public static int getOsmandIconColorId(boolean nightMode) {\n \t\treturn nightMode ? R.color.icon_color_osmand_dark : R.color.icon_color_osmand_light;\n \t}\n \n+\t@DrawableRes\n+\tpublic static int getActiveTransparentColorId(boolean nightMode) {\n+\t\treturn nightMode ? R.color.switch_button_active_dark : R.color.switch_button_active_light;\n+\t}\n+\n \t@ColorRes\n \tpublic static int getPressedColorId(boolean nightMode) {\n \t\treturn nightMode ? R.color.active_buttons_and_links_text_dark : R.color.active_buttons_and_links_text_light;\n \t}\n \n+\t@DrawableRes\n+\tpublic static int getActiveTransparentBackgroundId(boolean nightMode) {\n+\t\treturn nightMode ? R.drawable.btn_background_active_transparent_dark : R.drawable.btn_background_active_transparent_light;\n+\t}\n+\n+\t@DrawableRes\n+\tpublic static int getInactiveStrokedBackgroundId(boolean nightMode) {\n+\t\treturn nightMode ? R.drawable.btn_background_stroked_inactive_dark : R.drawable.btn_background_stroked_inactive_light;\n+\t}\n+\n \t@Override\n \tprotected int getDismissButtonHeight() {\n \t\treturn getResources().getDimensionPixelSize(R.dimen.bottom_sheet_cancel_button_height);"
  },
  {
    "sha": "bbaf9295f7776ab8e12750df7d9bb2734321a56f",
    "filename": "OsmAnd/src/net/osmand/plus/monitoring/TripRecordingBottomSheet.java",
    "status": "removed",
    "additions": 0,
    "deletions": 306,
    "changes": 306,
    "blob_url": "https://github.com/osmandapp/OsmAnd/blob/130a2889c3a51ec72c42e4603f50826df24d9a56/OsmAnd/src/net/osmand/plus/monitoring/TripRecordingBottomSheet.java",
    "raw_url": "https://github.com/osmandapp/OsmAnd/raw/130a2889c3a51ec72c42e4603f50826df24d9a56/OsmAnd/src/net/osmand/plus/monitoring/TripRecordingBottomSheet.java",
    "contents_url": "https://api.github.com/repos/osmandapp/OsmAnd/contents/OsmAnd/src/net/osmand/plus/monitoring/TripRecordingBottomSheet.java?ref=130a2889c3a51ec72c42e4603f50826df24d9a56",
    "patch": "@@ -1,306 +0,0 @@\n-package net.osmand.plus.monitoring;\n-\n-import android.app.Activity;\n-import android.app.Dialog;\n-import android.content.Context;\n-import android.graphics.Typeface;\n-import android.graphics.drawable.Drawable;\n-import android.os.Bundle;\n-import android.text.SpannableString;\n-import android.view.LayoutInflater;\n-import android.view.View;\n-import android.view.ViewGroup;\n-import android.widget.CompoundButton;\n-import android.widget.CompoundButton.OnCheckedChangeListener;\n-import android.widget.ImageView;\n-import android.widget.LinearLayout;\n-import android.widget.TextView;\n-\n-import androidx.annotation.NonNull;\n-import androidx.annotation.Nullable;\n-import androidx.appcompat.widget.SwitchCompat;\n-import androidx.core.content.ContextCompat;\n-import androidx.fragment.app.FragmentManager;\n-\n-import com.google.android.material.slider.RangeSlider;\n-\n-import net.osmand.AndroidUtils;\n-import net.osmand.plus.GpxSelectionHelper.SelectedGpxFile;\n-import net.osmand.plus.NavigationService;\n-import net.osmand.plus.OsmandApplication;\n-import net.osmand.plus.R;\n-import net.osmand.plus.UiUtilities;\n-import net.osmand.plus.UiUtilities.DialogButtonType;\n-import net.osmand.plus.activities.MapActivity;\n-import net.osmand.plus.activities.SavingTrackHelper;\n-import net.osmand.plus.base.MenuBottomSheetDialogFragment;\n-import net.osmand.plus.base.bottomsheetmenu.BottomSheetItemWithDescription;\n-import net.osmand.plus.helpers.AndroidUiHelper;\n-import net.osmand.plus.helpers.FontCache;\n-import net.osmand.plus.settings.backend.OsmandSettings;\n-import net.osmand.plus.track.TrackAppearanceFragment;\n-\n-import static net.osmand.plus.UiUtilities.CompoundButtonType.PROFILE_DEPENDENT;\n-import static net.osmand.plus.monitoring.OsmandMonitoringPlugin.MINUTES;\n-import static net.osmand.plus.monitoring.OsmandMonitoringPlugin.SECONDS;\n-\n-public class TripRecordingBottomSheet extends MenuBottomSheetDialogFragment {\n-\n-\tpublic static final String TAG = TripRecordingBottomSheet.class.getSimpleName();\n-\n-\tprivate OsmandApplication app;\n-\tprivate OsmandSettings settings;\n-\n-\tprivate ImageView upDownBtn;\n-\tprivate SwitchCompat confirmEveryRun;\n-\tprivate TextView intervalValueView;\n-\tprivate LinearLayout container;\n-\tprivate View divider;\n-\tprivate boolean infoExpanded;\n-\n-\t@Override\n-\tpublic void createMenuItems(Bundle savedInstanceState) {\n-\t\tapp = requiredMyApplication();\n-\t\tsettings = app.getSettings();\n-\t\tContext context = requireContext();\n-\n-\t\tLayoutInflater inflater = UiUtilities.getInflater(context, nightMode);\n-\t\tView itemView = inflater.inflate(R.layout.trip_recording_fragment, null, false);\n-\t\titems.add(new BottomSheetItemWithDescription.Builder()\n-\t\t\t\t.setCustomView(itemView)\n-\t\t\t\t.create());\n-\n-\t\tfinal int paddingSmall = getResources().getDimensionPixelSize(R.dimen.content_padding_small);\n-\n-\t\tLinearLayout showTrackOnMapView = itemView.findViewById(R.id.show_track_on_map);\n-\t\tTextView showTrackOnMapTitle = showTrackOnMapView.findViewById(R.id.title);\n-\t\tshowTrackOnMapTitle.setText(R.string.show_track_on_map);\n-\n-\t\tImageView trackAppearanceIcon = showTrackOnMapView.findViewById(R.id.icon_after_divider);\n-\n-\t\tint color = settings.CURRENT_TRACK_COLOR.get();\n-\t\tString width = settings.CURRENT_TRACK_WIDTH.get();\n-\t\tboolean showArrows = settings.CURRENT_TRACK_SHOW_ARROWS.get();\n-\t\tDrawable drawable = TrackAppearanceFragment.getTrackIcon(app, width, showArrows, color);\n-\n-\t\ttrackAppearanceIcon.setImageDrawable(drawable);\n-\t\ttrackAppearanceIcon.setOnClickListener(new View.OnClickListener() {\n-\t\t\t@Override\n-\t\t\tpublic void onClick(View v) {\n-\t\t\t\tMapActivity mapActivity = getMapActivity();\n-\t\t\t\tif (mapActivity != null) {\n-\t\t\t\t\thide();\n-\t\t\t\t\tSelectedGpxFile selectedGpxFile = app.getSavingTrackHelper().getCurrentTrack();\n-\t\t\t\t\tTrackAppearanceFragment.showInstance(mapActivity, selectedGpxFile, TripRecordingBottomSheet.this);\n-\t\t\t\t}\n-\t\t\t}\n-\t\t});\n-\n-\t\tdivider = itemView.findViewById(R.id.second_divider);\n-\t\tLinearLayout expandHideIntervalContainer = itemView.findViewById(R.id.interval_view_container);\n-\t\tupDownBtn = itemView.findViewById(R.id.up_down_button);\n-\t\texpandHideIntervalContainer.setOnClickListener(new View.OnClickListener() {\n-\n-\t\t\t@Override\n-\t\t\tpublic void onClick(View v) {\n-\t\t\t\ttoggleInfoView();\n-\t\t\t}\n-\t\t});\n-\n-\t\tfinal int secondsLength = SECONDS.length;\n-\t\tfinal int minutesLength = MINUTES.length;\n-\n-\t\tintervalValueView = itemView.findViewById(R.id.interval_value);\n-\t\tupdateIntervalLegend();\n-\n-\t\tcontainer = itemView.findViewById(R.id.always_ask_and_range_slider_container);\n-\t\tRangeSlider intervalSlider = itemView.findViewById(R.id.interval_slider);\n-\t\tintervalSlider.setValueTo(secondsLength + minutesLength - 1);\n-\t\tint currentModeColor = app.getSettings().getApplicationMode().getProfileColor(nightMode);\n-\t\tUiUtilities.setupSlider(intervalSlider, nightMode, currentModeColor, true);\n-\t\tcontainer.setVisibility(View.GONE);\n-\t\tintervalSlider.addOnChangeListener(new RangeSlider.OnChangeListener() {\n-\n-\t\t\t@Override\n-\t\t\tpublic void onValueChange(@NonNull RangeSlider slider, float value, boolean fromUser) {\n-\t\t\t\tint progress = (int) value;\n-\t\t\t\tif (progress == 0) {\n-\t\t\t\t\tsettings.SAVE_GLOBAL_TRACK_INTERVAL.set(0);\n-\t\t\t\t} else if (progress < secondsLength) {\n-\t\t\t\t\tsettings.SAVE_GLOBAL_TRACK_INTERVAL.set(SECONDS[progress] * 1000);\n-\t\t\t\t} else {\n-\t\t\t\t\tsettings.SAVE_GLOBAL_TRACK_INTERVAL.set(MINUTES[progress - secondsLength] * 60 * 1000);\n-\t\t\t\t}\n-\t\t\t\tupdateIntervalLegend();\n-\t\t\t}\n-\t\t});\n-\n-\t\tfor (int i = 0; i < secondsLength + minutesLength; i++) {\n-\t\t\tif (i < secondsLength) {\n-\t\t\t\tif (settings.SAVE_GLOBAL_TRACK_INTERVAL.get() <= SECONDS[i] * 1000) {\n-\t\t\t\t\tintervalSlider.setValues((float) i);\n-\t\t\t\t\tbreak;\n-\t\t\t\t}\n-\t\t\t} else {\n-\t\t\t\tif (settings.SAVE_GLOBAL_TRACK_INTERVAL.get() <= MINUTES[i - secondsLength] * 1000 * 60) {\n-\t\t\t\t\tintervalSlider.setValues((float) i);\n-\t\t\t\t\tbreak;\n-\t\t\t\t}\n-\t\t\t}\n-\t\t}\n-\t\tboolean checked = !settings.SAVE_GLOBAL_TRACK_REMEMBER.get();\n-\t\tconfirmEveryRun = itemView.findViewById(R.id.confirm_every_run);\n-\t\tconfirmEveryRun.setChecked(checked);\n-\t\tsetBackgroundAndPadding(checked, paddingSmall);\n-\t\tconfirmEveryRun.setOnCheckedChangeListener(new OnCheckedChangeListener() {\n-\t\t\t@Override\n-\t\t\tpublic void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\n-\t\t\t\tsetBackgroundAndPadding(isChecked, paddingSmall);\n-\t\t\t\tsettings.SAVE_GLOBAL_TRACK_REMEMBER.set(!isChecked);\n-\t\t\t}\n-\t\t});\n-\n-\t\tfinal SwitchCompat showTrackOnMapButton = showTrackOnMapView.findViewById(R.id.switch_button);\n-\t\tshowTrackOnMapButton.setChecked(app.getSelectedGpxHelper().getSelectedCurrentRecordingTrack() != null);\n-\t\tView basicItem = itemView.findViewById(R.id.basic_item_body);\n-\t\tbasicItem.setOnClickListener(new View.OnClickListener() {\n-\t\t\t@Override\n-\t\t\tpublic void onClick(View v) {\n-\t\t\t\tboolean checked = !showTrackOnMapButton.isChecked();\n-\t\t\t\tshowTrackOnMapButton.setChecked(checked);\n-\t\t\t\tapp.getSelectedGpxHelper().selectGpxFile(app.getSavingTrackHelper().getCurrentGpx(), checked, false);\n-\t\t\t}\n-\t\t});\n-\t\tUiUtilities.setupCompoundButton(showTrackOnMapButton, nightMode, PROFILE_DEPENDENT);\n-\n-\t\tupdateUpDownBtn();\n-\t}\n-\n-\tprivate void updateIntervalLegend() {\n-\t\tString text = getString(R.string.save_track_interval_globally);\n-\t\tString textValue;\n-\t\tint interval = settings.SAVE_GLOBAL_TRACK_INTERVAL.get();\n-\t\tif (interval == 0) {\n-\t\t\ttextValue = getString(R.string.int_continuosly);\n-\t\t} else {\n-\t\t\tint seconds = interval / 1000;\n-\t\t\tif (seconds <= SECONDS[SECONDS.length - 1]) {\n-\t\t\t\ttextValue = seconds + \" \" + getString(R.string.int_seconds);\n-\t\t\t} else {\n-\t\t\t\ttextValue = (seconds / 60) + \" \" + getString(R.string.int_min);\n-\t\t\t}\n-\t\t}\n-\t\tString textAll = getString(R.string.ltr_or_rtl_combine_via_colon, text, textValue);\n-\t\tTypeface typeface = FontCache.getRobotoMedium(app);\n-\t\tSpannableString spannableString = UiUtilities.createCustomFontSpannable(typeface, textAll, textValue);\n-\t\tintervalValueView.setText(spannableString);\n-\t}\n-\n-\tpublic void show() {\n-\t\tDialog dialog = getDialog();\n-\t\tif (dialog != null) {\n-\t\t\tdialog.show();\n-\t\t}\n-\t}\n-\n-\tpublic void hide() {\n-\t\tDialog dialog = getDialog();\n-\t\tif (dialog != null) {\n-\t\t\tdialog.hide();\n-\t\t}\n-\t}\n-\n-\tprivate void setBackgroundAndPadding(boolean isChecked, int paddingSmall) {\n-\t\tif (nightMode) {\n-\t\t\tconfirmEveryRun.setBackgroundResource(\n-\t\t\t\t\tisChecked ? R.drawable.layout_bg_dark_solid : R.drawable.layout_bg_dark);\n-\t\t} else {\n-\t\t\tconfirmEveryRun.setBackgroundResource(\n-\t\t\t\t\tisChecked ? R.drawable.layout_bg_solid : R.drawable.layout_bg);\n-\t\t}\n-\t\tconfirmEveryRun.setPadding(paddingSmall, 0, paddingSmall, 0);\n-\t}\n-\n-\tprivate void updateUpDownBtn() {\n-\t\tint iconId = infoExpanded ? R.drawable.ic_action_arrow_down : R.drawable.ic_action_arrow_up;\n-\t\tupDownBtn.setImageDrawable(getContentIcon(iconId));\n-\t}\n-\n-\tprivate void toggleInfoView() {\n-\t\tinfoExpanded = !infoExpanded;\n-\t\tViewGroup.MarginLayoutParams marginParams = (ViewGroup.MarginLayoutParams) divider.getLayoutParams();\n-\t\tfinal int dp8 = AndroidUtils.dpToPx(app, 8f);\n-\t\tfinal int dp16 = AndroidUtils.dpToPx(app, 16f);\n-\t\tif (infoExpanded) {\n-\t\t\tAndroidUtils.setMargins(marginParams, 0, dp16, 0, dp8);\n-\t\t} else {\n-\t\t\tAndroidUtils.setMargins(marginParams, 0, 0, 0, dp8);\n-\t\t}\n-\t\tAndroidUiHelper.updateVisibility(container, infoExpanded);\n-\t\tupdateUpDownBtn();\n-\t}\n-\n-\t@Override\n-\tprotected boolean useVerticalButtons() {\n-\t\treturn true;\n-\t}\n-\n-\t@Override\n-\tprotected int getRightButtonHeight() {\n-\t\treturn getResources().getDimensionPixelSize(R.dimen.bottom_sheet_cancel_button_height);\n-\t}\n-\n-\t@Override\n-\tprotected int getDismissButtonHeight() {\n-\t\treturn getResources().getDimensionPixelSize(R.dimen.bottom_sheet_cancel_button_height);\n-\t}\n-\n-\t@Override\n-\tprotected int getRightBottomButtonTextId() {\n-\t\treturn R.string.start_recording;\n-\t}\n-\n-\t@Override\n-\tprotected int getDismissButtonTextId() {\n-\t\treturn R.string.shared_string_cancel;\n-\t}\n-\n-\t@Override\n-\tprotected DialogButtonType getRightBottomButtonType() {\n-\t\treturn DialogButtonType.PRIMARY;\n-\t}\n-\n-\t@Override\n-\tpublic int getSecondDividerHeight() {\n-\t\treturn getResources().getDimensionPixelSize(R.dimen.bottom_sheet_icon_margin);\n-\t}\n-\n-\t@Override\n-\tprotected void onRightBottomButtonClick() {\n-\t\tSavingTrackHelper helper = app.getSavingTrackHelper();\n-\t\thelper.startNewSegment();\n-\t\tsettings.SAVE_GLOBAL_TRACK_TO_GPX.set(true);\n-\t\tapp.startNavigationService(NavigationService.USED_BY_GPX);\n-\t\tMapActivity mapActivity = getMapActivity();\n-\t\tif (mapActivity != null) {\n-\t\t\tTripRecordingActiveBottomSheet.showInstance(mapActivity.getSupportFragmentManager(), helper.getCurrentTrack());\n-\t\t}\n-\t\tdismiss();\n-\t}\n-\n-\t@Nullable\n-\tpublic MapActivity getMapActivity() {\n-\t\tActivity activity = getActivity();\n-\t\tif (activity instanceof MapActivity) {\n-\t\t\treturn (MapActivity) activity;\n-\t\t}\n-\t\treturn null;\n-\t}\n-\n-\tpublic static void showInstance(@NonNull FragmentManager fragmentManager) {\n-\t\tif (!fragmentManager.isStateSaved()) {\n-\t\t\tTripRecordingBottomSheet fragment = new TripRecordingBottomSheet();\n-\t\t\tfragment.show(fragmentManager, TAG);\n-\t\t}\n-\t}\n-}\n\\ No newline at end of file"
  },
  {
    "sha": "c8c96d1323b256af9ba6c38ee876f2cd4946559f",
    "filename": "OsmAnd/src/net/osmand/plus/monitoring/TripRecordingStartingBottomSheet.java",
    "status": "added",
    "additions": 259,
    "deletions": 0,
    "changes": 259,
    "blob_url": "https://github.com/osmandapp/OsmAnd/blob/35064dba0158091eac04d69c278722b73a09cf0a/OsmAnd/src/net/osmand/plus/monitoring/TripRecordingStartingBottomSheet.java",
    "raw_url": "https://github.com/osmandapp/OsmAnd/raw/35064dba0158091eac04d69c278722b73a09cf0a/OsmAnd/src/net/osmand/plus/monitoring/TripRecordingStartingBottomSheet.java",
    "contents_url": "https://api.github.com/repos/osmandapp/OsmAnd/contents/OsmAnd/src/net/osmand/plus/monitoring/TripRecordingStartingBottomSheet.java?ref=35064dba0158091eac04d69c278722b73a09cf0a",
    "patch": "@@ -0,0 +1,259 @@\n+package net.osmand.plus.monitoring;\n+\n+import android.app.Activity;\n+import android.app.Dialog;\n+import android.content.Context;\n+import android.graphics.Typeface;\n+import android.os.Bundle;\n+import android.text.SpannableString;\n+import android.view.LayoutInflater;\n+import android.view.View;\n+import android.widget.LinearLayout;\n+import android.widget.TextView;\n+\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+import androidx.appcompat.widget.AppCompatImageView;\n+import androidx.cardview.widget.CardView;\n+import androidx.fragment.app.FragmentManager;\n+\n+import com.google.android.material.slider.RangeSlider;\n+\n+import net.osmand.plus.NavigationService;\n+import net.osmand.plus.OsmandApplication;\n+import net.osmand.plus.R;\n+import net.osmand.plus.UiUtilities;\n+import net.osmand.plus.activities.MapActivity;\n+import net.osmand.plus.activities.SavingTrackHelper;\n+import net.osmand.plus.base.MenuBottomSheetDialogFragment;\n+import net.osmand.plus.base.bottomsheetmenu.BaseBottomSheetItem;\n+import net.osmand.plus.helpers.AndroidUiHelper;\n+import net.osmand.plus.helpers.FontCache;\n+import net.osmand.plus.monitoring.TripRecordingActiveBottomSheet.ItemType;\n+import net.osmand.plus.settings.backend.OsmandSettings;\n+import net.osmand.plus.settings.fragments.BaseSettingsFragment;\n+import net.osmand.plus.settings.fragments.BaseSettingsFragment.SettingsScreenType;\n+\n+import static net.osmand.plus.monitoring.OsmandMonitoringPlugin.MINUTES;\n+import static net.osmand.plus.monitoring.OsmandMonitoringPlugin.SECONDS;\n+import static net.osmand.plus.monitoring.TripRecordingActiveBottomSheet.UPDATE_TRACK_ICON;\n+import static net.osmand.plus.monitoring.TripRecordingActiveBottomSheet.createItem;\n+import static net.osmand.plus.monitoring.TripRecordingActiveBottomSheet.createShowTrackItem;\n+import static net.osmand.plus.monitoring.TripRecordingActiveBottomSheet.updateTrackIcon;\n+\n+public class TripRecordingStartingBottomSheet extends MenuBottomSheetDialogFragment {\n+\n+\tpublic static final String TAG = TripRecordingStartingBottomSheet.class.getSimpleName();\n+\tpublic static final String UPDATE_LOGGING_INTERVAL = \"update_logging_interval\";\n+\n+\tprivate OsmandApplication app;\n+\tprivate OsmandSettings settings;\n+\n+\tprivate AppCompatImageView upDownBtn;\n+\tprivate AppCompatImageView trackAppearanceIcon;\n+\tprivate TextView intervalValueView;\n+\tprivate LinearLayout showTrackContainer;\n+\tprivate LinearLayout intervalContainer;\n+\tprivate RangeSlider intervalSlider;\n+\n+\tprivate boolean infoExpanded;\n+\n+\tpublic static void showInstance(@NonNull FragmentManager fragmentManager) {\n+\t\tif (!fragmentManager.isStateSaved()) {\n+\t\t\tTripRecordingStartingBottomSheet fragment = new TripRecordingStartingBottomSheet();\n+\t\t\tfragment.show(fragmentManager, TAG);\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tpublic void createMenuItems(Bundle savedInstanceState) {\n+\t\tapp = requiredMyApplication();\n+\t\tsettings = app.getSettings();\n+\t\tContext context = requireContext();\n+\n+\t\tLayoutInflater inflater = UiUtilities.getInflater(context, nightMode);\n+\t\tView itemView = inflater.inflate(R.layout.trip_recording_starting_fragment, null, false);\n+\t\titems.add(new BaseBottomSheetItem.Builder()\n+\t\t\t\t.setCustomView(itemView)\n+\t\t\t\t.create());\n+\n+\t\tLinearLayout expandHideIntervalContainer = itemView.findViewById(R.id.interval_view_container);\n+\t\tupDownBtn = itemView.findViewById(R.id.up_down_button);\n+\t\texpandHideIntervalContainer.setOnClickListener(new View.OnClickListener() {\n+\t\t\t@Override\n+\t\t\tpublic void onClick(View v) {\n+\t\t\t\tupdateIntervalContainer();\n+\t\t\t}\n+\t\t});\n+\n+\t\tintervalValueView = itemView.findViewById(R.id.interval_value);\n+\t\tintervalContainer = itemView.findViewById(R.id.always_ask_and_range_slider_container);\n+\t\tintervalSlider = itemView.findViewById(R.id.interval_slider);\n+\t\tupdateIntervalValue();\n+\n+\t\tshowTrackContainer = itemView.findViewById(R.id.show_track_on_map);\n+\t\ttrackAppearanceIcon = showTrackContainer.findViewById(R.id.additional_button_icon);\n+\t\tcreateShowTrackItem(app, getMapActivity(), nightMode, showTrackContainer, trackAppearanceIcon,\n+\t\t\t\tR.string.shared_string_show_on_map, TripRecordingStartingBottomSheet.this, new Runnable() {\n+\t\t\t\t\t@Override\n+\t\t\t\t\tpublic void run() {\n+\t\t\t\t\t\thide();\n+\t\t\t\t\t}\n+\t\t\t\t});\n+\n+\t\tupdateUpDownBtn();\n+\n+\t\tCardView cardLeft = itemView.findViewById(R.id.button_left);\n+\t\tcreateItem(app, nightMode, cardLeft, ItemType.CANCEL, true, null);\n+\t\tcardLeft.setOnClickListener(new View.OnClickListener() {\n+\t\t\t@Override\n+\t\t\tpublic void onClick(View v) {\n+\t\t\t\tdismiss();\n+\t\t\t}\n+\t\t});\n+\n+\t\tCardView cardCenter = itemView.findViewById(R.id.button_center);\n+\t\tcreateItem(app, nightMode, cardCenter, ItemType.START_RECORDING, true, null);\n+\t\tcardCenter.setOnClickListener(new View.OnClickListener() {\n+\t\t\t@Override\n+\t\t\tpublic void onClick(View v) {\n+\t\t\t\tstartRecording();\n+\t\t\t}\n+\t\t});\n+\n+\t\tCardView cardRight = itemView.findViewById(R.id.button_right);\n+\t\tcreateItem(app, nightMode, cardRight, ItemType.SETTINGS, true, null);\n+\t\tcardRight.setOnClickListener(new View.OnClickListener() {\n+\t\t\t@Override\n+\t\t\tpublic void onClick(View v) {\n+\t\t\t\tMapActivity mapActivity = getMapActivity();\n+\t\t\t\tif (mapActivity != null) {\n+\t\t\t\t\thide();\n+\t\t\t\t\tBaseSettingsFragment.showInstance(mapActivity, SettingsScreenType.MONITORING_SETTINGS, TripRecordingStartingBottomSheet.this);\n+\t\t\t\t}\n+\t\t\t}\n+\t\t});\n+\t}\n+\n+\tprivate void updateIntervalLegend() {\n+\t\tString text = getString(R.string.save_track_interval_globally);\n+\t\tString textValue;\n+\t\tint interval = settings.SAVE_GLOBAL_TRACK_INTERVAL.get();\n+\t\tif (interval == 0) {\n+\t\t\ttextValue = getString(R.string.int_continuosly);\n+\t\t} else {\n+\t\t\tint seconds = interval / 1000;\n+\t\t\tif (seconds <= SECONDS[SECONDS.length - 1]) {\n+\t\t\t\ttextValue = seconds + \" \" + getString(R.string.int_seconds);\n+\t\t\t} else {\n+\t\t\t\ttextValue = (seconds / 60) + \" \" + getString(R.string.int_min);\n+\t\t\t}\n+\t\t}\n+\t\tString textAll = getString(R.string.ltr_or_rtl_combine_via_colon, text, textValue);\n+\t\tTypeface typeface = FontCache.getRobotoMedium(app);\n+\t\tSpannableString spannableString = UiUtilities.createCustomFontSpannable(typeface, textAll, textValue);\n+\t\tintervalValueView.setText(spannableString);\n+\t}\n+\n+\tprivate void updateIntervalValue() {\n+\t\tif (intervalSlider != null && intervalContainer != null) {\n+\t\t\tupdateIntervalLegend();\n+\t\t\tfinal int secondsLength = SECONDS.length;\n+\t\t\tfinal int minutesLength = MINUTES.length;\n+\t\t\tintervalSlider.setValueTo(secondsLength + minutesLength - 1);\n+\t\t\tint currentModeColor = app.getSettings().getApplicationMode().getProfileColor(nightMode);\n+\t\t\tUiUtilities.setupSlider(intervalSlider, nightMode, currentModeColor, true);\n+\t\t\tintervalContainer.setVisibility(View.GONE);\n+\t\t\tintervalSlider.addOnChangeListener(new RangeSlider.OnChangeListener() {\n+\n+\t\t\t\t@Override\n+\t\t\t\tpublic void onValueChange(@NonNull RangeSlider slider, float value, boolean fromUser) {\n+\t\t\t\t\tint progress = (int) value;\n+\t\t\t\t\tif (progress == 0) {\n+\t\t\t\t\t\tsettings.SAVE_GLOBAL_TRACK_INTERVAL.set(0);\n+\t\t\t\t\t} else if (progress < secondsLength) {\n+\t\t\t\t\t\tsettings.SAVE_GLOBAL_TRACK_INTERVAL.set(SECONDS[progress] * 1000);\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\tsettings.SAVE_GLOBAL_TRACK_INTERVAL.set(MINUTES[progress - secondsLength] * 60 * 1000);\n+\t\t\t\t\t}\n+\t\t\t\t\tupdateIntervalLegend();\n+\t\t\t\t}\n+\t\t\t});\n+\n+\t\t\tfor (int i = 0; i < secondsLength + minutesLength; i++) {\n+\t\t\t\tif (i < secondsLength) {\n+\t\t\t\t\tif (settings.SAVE_GLOBAL_TRACK_INTERVAL.get() <= SECONDS[i] * 1000) {\n+\t\t\t\t\t\tintervalSlider.setValues((float) i);\n+\t\t\t\t\t\tbreak;\n+\t\t\t\t\t}\n+\t\t\t\t} else {\n+\t\t\t\t\tif (settings.SAVE_GLOBAL_TRACK_INTERVAL.get() <= MINUTES[i - secondsLength] * 1000 * 60) {\n+\t\t\t\t\t\tintervalSlider.setValues((float) i);\n+\t\t\t\t\t\tbreak;\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t}\n+\n+\tprivate void updateIntervalContainer() {\n+\t\tinfoExpanded = !infoExpanded;\n+\t\tAndroidUiHelper.updateVisibility(intervalContainer, infoExpanded);\n+\t\tupdateUpDownBtn();\n+\t}\n+\n+\tprivate void updateUpDownBtn() {\n+\t\tint iconId = infoExpanded ? R.drawable.ic_action_arrow_down : R.drawable.ic_action_arrow_up;\n+\t\tupDownBtn.setImageDrawable(getContentIcon(iconId));\n+\t}\n+\n+\tprivate void startRecording() {\n+\t\tSavingTrackHelper helper = app.getSavingTrackHelper();\n+\t\thelper.startNewSegment();\n+\t\tsettings.SAVE_GLOBAL_TRACK_TO_GPX.set(true);\n+\t\tapp.startNavigationService(NavigationService.USED_BY_GPX);\n+\t\tMapActivity mapActivity = getMapActivity();\n+\t\tif (mapActivity != null) {\n+\t\t\tTripRecordingActiveBottomSheet.showInstance(mapActivity.getSupportFragmentManager(), helper.getCurrentTrack());\n+\t\t}\n+\t\tdismiss();\n+\t}\n+\n+\tpublic void show(String... keys) {\n+\t\tDialog dialog = getDialog();\n+\t\tif (dialog != null) {\n+\t\t\tdialog.show();\n+\t\t\tfor (String key : keys) {\n+\t\t\t\tif (key.equals(UPDATE_TRACK_ICON)) {\n+\t\t\t\t\tupdateTrackIcon(app, trackAppearanceIcon);\n+\t\t\t\t}\n+\t\t\t\tif (key.equals(UPDATE_LOGGING_INTERVAL)) {\n+\t\t\t\t\tupdateIntervalValue();\n+\t\t\t\t\tAndroidUiHelper.updateVisibility(intervalContainer, infoExpanded);\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t}\n+\n+\tpublic void hide() {\n+\t\tDialog dialog = getDialog();\n+\t\tif (dialog != null) {\n+\t\t\tdialog.hide();\n+\t\t}\n+\t}\n+\n+\t@Nullable\n+\tpublic MapActivity getMapActivity() {\n+\t\tActivity activity = getActivity();\n+\t\tif (activity instanceof MapActivity) {\n+\t\t\treturn (MapActivity) activity;\n+\t\t}\n+\t\treturn null;\n+\t}\n+\n+\t@Override\n+\tprotected boolean hideButtonsContainer() {\n+\t\treturn true;\n+\t}\n+\n+}"
  },
  {
    "sha": "a426321eb9c1b6f4f564b89302a29c9164431eed",
    "filename": "OsmAnd/src/net/osmand/plus/settings/fragments/BaseSettingsFragment.java",
    "status": "modified",
    "additions": 26,
    "deletions": 1,
    "changes": 27,
    "blob_url": "https://github.com/osmandapp/OsmAnd/blob/35064dba0158091eac04d69c278722b73a09cf0a/OsmAnd/src/net/osmand/plus/settings/fragments/BaseSettingsFragment.java",
    "raw_url": "https://github.com/osmandapp/OsmAnd/raw/35064dba0158091eac04d69c278722b73a09cf0a/OsmAnd/src/net/osmand/plus/settings/fragments/BaseSettingsFragment.java",
    "contents_url": "https://api.github.com/repos/osmandapp/OsmAnd/contents/OsmAnd/src/net/osmand/plus/settings/fragments/BaseSettingsFragment.java?ref=35064dba0158091eac04d69c278722b73a09cf0a",
    "patch": "@@ -61,6 +61,7 @@\n import net.osmand.plus.audionotes.MultimediaNotesFragment;\n import net.osmand.plus.development.DevelopmentSettingsFragment;\n import net.osmand.plus.monitoring.MonitoringSettingsFragment;\n+import net.osmand.plus.monitoring.TripRecordingStartingBottomSheet;\n import net.osmand.plus.openplacereviews.OprSettingsFragment;\n import net.osmand.plus.osmedit.OsmEditingFragment;\n import net.osmand.plus.profiles.SelectAppModesBottomSheetDialogFragment;\n@@ -85,6 +86,7 @@\n import java.util.Set;\n \n import static net.osmand.aidlapi.OsmAndCustomizationConstants.DRAWER_SETTINGS_ID;\n+import static net.osmand.plus.monitoring.TripRecordingStartingBottomSheet.UPDATE_LOGGING_INTERVAL;\n \n public abstract class BaseSettingsFragment extends PreferenceFragmentCompat implements OnPreferenceChangeListener,\n \t\tOnPreferenceClickListener, AppModeChangedListener, OnConfirmPreferenceChange {\n@@ -291,6 +293,15 @@ public void onPause() {\n \t\t}\n \t}\n \n+\t@Override\n+\tpublic void onDestroyView() {\n+\t\tsuper.onDestroyView();\n+\t\tFragment target = getTargetFragment();\n+\t\tif (target instanceof TripRecordingStartingBottomSheet) {\n+\t\t\t((TripRecordingStartingBottomSheet) target).show(UPDATE_LOGGING_INTERVAL);\n+\t\t}\n+\t}\n+\n \t@Override\n \tpublic void onDetach() {\n \t\tsuper.onDetach();\n@@ -884,21 +895,35 @@ public ListPreferenceEx createListPreferenceEx(String prefId, String[] names, Ob\n \t}\n \n \tpublic static boolean showInstance(FragmentActivity activity, SettingsScreenType screenType) {\n-\t\treturn showInstance(activity, screenType, null);\n+\t\treturn showInstance(activity, screenType, (ApplicationMode) null);\n+\t}\n+\n+\tpublic static boolean showInstance(FragmentActivity activity, SettingsScreenType screenType, Fragment target) {\n+\t\treturn showInstance(activity, screenType, null, target);\n \t}\n \n \tpublic static boolean showInstance(FragmentActivity activity, SettingsScreenType screenType, @Nullable ApplicationMode appMode) {\n \t\treturn showInstance(activity, screenType, appMode, new Bundle());\n \t}\n \n+\tpublic static boolean showInstance(FragmentActivity activity, SettingsScreenType screenType, @Nullable ApplicationMode appMode, Fragment target) {\n+\t\treturn showInstance(activity, screenType, appMode, new Bundle(), target);\n+\t}\n+\n \tpublic static boolean showInstance(FragmentActivity activity, SettingsScreenType screenType,\n \t\t\t\t\t\t\t\t\t   @Nullable ApplicationMode appMode, @NonNull Bundle args) {\n+\t\treturn showInstance(activity, screenType, appMode, args, null);\n+\t}\n+\n+\tpublic static boolean showInstance(FragmentActivity activity, SettingsScreenType screenType,\n+\t\t\t\t\t\t\t\t\t   @Nullable ApplicationMode appMode, @NonNull Bundle args, @Nullable Fragment target) {\n \t\ttry {\n \t\t\tFragment fragment = Fragment.instantiate(activity, screenType.fragmentName);\n \t\t\tif (appMode != null) {\n \t\t\t\targs.putString(APP_MODE_KEY, appMode.getStringKey());\n \t\t\t}\n \t\t\tfragment.setArguments(args);\n+\t\t\tfragment.setTargetFragment(target, 0);\n \t\t\tactivity.getSupportFragmentManager().beginTransaction()\n \t\t\t\t\t.replace(R.id.fragmentContainer, fragment, screenType.fragmentName)\n \t\t\t\t\t.addToBackStack(DRAWER_SETTINGS_ID + \".new\")"
  },
  {
    "sha": "807becbb1c2060e8079566205849a74fa6a752b5",
    "filename": "OsmAnd/src/net/osmand/plus/track/TrackAppearanceFragment.java",
    "status": "modified",
    "additions": 3,
    "deletions": 3,
    "changes": 6,
    "blob_url": "https://github.com/osmandapp/OsmAnd/blob/35064dba0158091eac04d69c278722b73a09cf0a/OsmAnd/src/net/osmand/plus/track/TrackAppearanceFragment.java",
    "raw_url": "https://github.com/osmandapp/OsmAnd/raw/35064dba0158091eac04d69c278722b73a09cf0a/OsmAnd/src/net/osmand/plus/track/TrackAppearanceFragment.java",
    "contents_url": "https://api.github.com/repos/osmandapp/OsmAnd/contents/OsmAnd/src/net/osmand/plus/track/TrackAppearanceFragment.java?ref=35064dba0158091eac04d69c278722b73a09cf0a",
    "patch": "@@ -37,7 +37,7 @@\n import net.osmand.plus.dialogs.GpxAppearanceAdapter.GpxAppearanceAdapterType;\n import net.osmand.plus.helpers.AndroidUiHelper;\n import net.osmand.plus.monitoring.TripRecordingActiveBottomSheet;\n-import net.osmand.plus.monitoring.TripRecordingBottomSheet;\n+import net.osmand.plus.monitoring.TripRecordingStartingBottomSheet;\n import net.osmand.plus.routepreparationmenu.cards.BaseCard;\n import net.osmand.plus.routepreparationmenu.cards.BaseCard.CardListener;\n import net.osmand.plus.settings.backend.CommonPreference;\n@@ -398,8 +398,8 @@ protected int applyPosY(int currentY, boolean needCloseMenu, boolean needMapAdju\n \t@Override\n \tpublic void onContextMenuDismiss(@NonNull ContextMenuFragment fragment) {\n \t\tFragment target = getTargetFragment();\n-\t\tif (target instanceof TripRecordingBottomSheet) {\n-\t\t\t((TripRecordingBottomSheet) target).show();\n+\t\tif (target instanceof TripRecordingStartingBottomSheet) {\n+\t\t\t((TripRecordingStartingBottomSheet) target).show(UPDATE_TRACK_ICON);\n \t\t} else if (target instanceof TripRecordingActiveBottomSheet) {\n \t\t\t((TripRecordingActiveBottomSheet) target).show(UPDATE_TRACK_ICON);\n \t\t}"
  }
]
