[
  {
    "sha": "164cb09694a156a5b0fcdacc598607ef4c630e82",
    "filename": "app/src/main/java/by/realovka/web/app/filter/AuthFilter.java",
    "status": "modified",
    "additions": 53,
    "deletions": 15,
    "changes": 68,
    "blob_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/blob/485c11444b72356faf1975a065e86637ffa68248/app/src/main/java/by/realovka/web/app/filter/AuthFilter.java",
    "raw_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/raw/485c11444b72356faf1975a065e86637ffa68248/app/src/main/java/by/realovka/web/app/filter/AuthFilter.java",
    "contents_url": "https://api.github.com/repos/Realovka/Project-by-servlets-It-Academy/contents/app/src/main/java/by/realovka/web/app/filter/AuthFilter.java?ref=485c11444b72356faf1975a065e86637ffa68248",
    "patch": "@@ -1,26 +1,64 @@\n package by.realovka.web.app.filter;\n \n-import javax.servlet.*;\n+import by.realovka.web.dao.model.Admin;\n+import by.realovka.web.dao.model.Student;\n+import by.realovka.web.dao.model.Trainer;\n+import by.realovka.web.dao.model.User;\n+import by.realovka.web.service.service.UserService;\n+import by.realovka.web.service.service.UserServiceImpl;\n+import lombok.extern.slf4j.Slf4j;\n+\n+import javax.servlet.FilterChain;\n+import javax.servlet.ServletException;\n+import javax.servlet.ServletRequest;\n+import javax.servlet.ServletResponse;\n import javax.servlet.annotation.WebFilter;\n+import javax.servlet.http.HttpServletRequest;\n+import javax.servlet.http.HttpServletResponse;\n import java.io.IOException;\n \n-@WebFilter(urlPatterns = \"/*\")\n-public class AuthFilter implements Filter {\n-\n-    @Override\n-    public void init(FilterConfig filterConfig) throws ServletException {\n+@Slf4j\n+@WebFilter(value = \"/auth\", filterName = \"authFilter\")\n+public class AuthFilter extends UtilFilter {\n \n-    }\n+    private final UserService userService = UserServiceImpl.getInstance();\n \n     @Override\n-    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\n-        request.setCharacterEncoding(\"UTF-8\");\n-        response.setCharacterEncoding(\"UTF-8\");\n-        chain.doFilter(request, response);\n+    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) {\n+        HttpServletRequest req = (HttpServletRequest) request;\n+        HttpServletResponse res = (HttpServletResponse) response;\n+        String login = req.getParameter(\"loginAuthorization\");\n+        String password = req.getParameter(\"passwordAuthorization\");\n+        User auth = userService.identificationUserByLoginAndPassword(login, password);\n+        req.getSession().setAttribute(\"userAuth\", auth);\n+        log.info(\"User from DB = {}\", auth);\n+        if (!auth.equals(new User())) {\n+            forwardToSomeMainPage(auth, req, res);\n+        } else {\n+            try {\n+                req.setAttribute(\"authorizationFail\", \"Login or password is wrong!\");\n+                req.getRequestDispatcher(\"/index.jsp\").forward(request, response);\n+            } catch (ServletException | IOException e) {\n+                e.printStackTrace();\n+            }\n+        }\n     }\n \n-    @Override\n-    public void destroy() {\n-\n+    private void forwardToSomeMainPage(User auth, HttpServletRequest request, HttpServletResponse response) {\n+        try {\n+            if (auth instanceof Admin) {\n+                request.getRequestDispatcher(\"/adminAndTrainers\").forward(request, response);\n+            } else {\n+                if (auth instanceof Trainer) {\n+                    request.getRequestDispatcher(\"/trainerAndHisStudents\").forward(request, response);\n+                } else {\n+                    if (auth instanceof Student) {\n+                        request.getRequestDispatcher(\"mainStudent.jsp\").forward(request, response);\n+                    }\n+                }\n+            }\n+        } catch (ServletException | IOException e) {\n+            e.printStackTrace();\n+        }\n     }\n-}\n+}\n\\ No newline at end of file"
  },
  {
    "sha": "cd8378689d90ceaf9ce595772e4bdaa4709406c9",
    "filename": "app/src/main/java/by/realovka/web/app/filter/SessionFilter.java",
    "status": "added",
    "additions": 42,
    "deletions": 0,
    "changes": 42,
    "blob_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/blob/485c11444b72356faf1975a065e86637ffa68248/app/src/main/java/by/realovka/web/app/filter/SessionFilter.java",
    "raw_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/raw/485c11444b72356faf1975a065e86637ffa68248/app/src/main/java/by/realovka/web/app/filter/SessionFilter.java",
    "contents_url": "https://api.github.com/repos/Realovka/Project-by-servlets-It-Academy/contents/app/src/main/java/by/realovka/web/app/filter/SessionFilter.java?ref=485c11444b72356faf1975a065e86637ffa68248",
    "patch": "@@ -0,0 +1,42 @@\n+package by.realovka.web.app.filter;\n+\n+import by.realovka.web.dao.model.Admin;\n+import by.realovka.web.dao.model.Student;\n+import by.realovka.web.dao.model.Trainer;\n+import by.realovka.web.dao.model.User;\n+\n+import javax.servlet.FilterChain;\n+import javax.servlet.ServletException;\n+import javax.servlet.ServletRequest;\n+import javax.servlet.ServletResponse;\n+import javax.servlet.annotation.WebFilter;\n+import javax.servlet.http.HttpServletRequest;\n+import javax.servlet.http.HttpSession;\n+import java.io.IOException;\n+\n+@WebFilter(filterName = \"sessionFilter\")\n+public class SessionFilter extends UtilFilter {\n+\n+    @Override\n+    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\n+        HttpServletRequest req = (HttpServletRequest) request;\n+        HttpSession session = req.getSession();\n+        if (session.isNew()) {\n+            request.getRequestDispatcher(\"/index.jsp\").forward(request, response);\n+        } else {\n+            User auth = (User) session.getAttribute(\"userAuth\");\n+            if (auth instanceof Admin) {\n+                request.getRequestDispatcher(\"/mainAdmin.jsp\").forward(request, response);\n+            } else {\n+                if (auth instanceof Student) {\n+                    request.getRequestDispatcher(\"/mainStudent.jsp\").forward(request, response);\n+                } else {\n+                    if (auth instanceof Trainer) {\n+                        request.getRequestDispatcher(\"/mainTrainer.jsp\").forward(request, response);\n+                    }\n+                }\n+            }\n+        }\n+        chain.doFilter(request, response);\n+    }\n+}"
  },
  {
    "sha": "7e1d9a24a373f52f7c08f062ec231dd07c48dd13",
    "filename": "app/src/main/java/by/realovka/web/app/filter/UtilFilter.java",
    "status": "added",
    "additions": 26,
    "deletions": 0,
    "changes": 26,
    "blob_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/blob/485c11444b72356faf1975a065e86637ffa68248/app/src/main/java/by/realovka/web/app/filter/UtilFilter.java",
    "raw_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/raw/485c11444b72356faf1975a065e86637ffa68248/app/src/main/java/by/realovka/web/app/filter/UtilFilter.java",
    "contents_url": "https://api.github.com/repos/Realovka/Project-by-servlets-It-Academy/contents/app/src/main/java/by/realovka/web/app/filter/UtilFilter.java?ref=485c11444b72356faf1975a065e86637ffa68248",
    "patch": "@@ -0,0 +1,26 @@\n+package by.realovka.web.app.filter;\n+\n+import javax.servlet.Filter;\n+import javax.servlet.FilterChain;\n+import javax.servlet.FilterConfig;\n+import javax.servlet.ServletException;\n+import javax.servlet.ServletRequest;\n+import javax.servlet.ServletResponse;\n+import java.io.IOException;\n+\n+public class UtilFilter implements Filter {\n+    @Override\n+    public void init(FilterConfig filterConfig) throws ServletException {\n+\n+    }\n+\n+    @Override\n+    public void destroy() {\n+\n+    }\n+\n+    @Override\n+    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\n+\n+    }\n+}"
  },
  {
    "sha": "9ae381febc5baa6069c019cd49aeb285870eea6e",
    "filename": "app/src/main/java/by/realovka/web/app/servlet/AdditionGroupToTrainerServlet.java",
    "status": "added",
    "additions": 33,
    "deletions": 0,
    "changes": 33,
    "blob_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/blob/485c11444b72356faf1975a065e86637ffa68248/app/src/main/java/by/realovka/web/app/servlet/AdditionGroupToTrainerServlet.java",
    "raw_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/raw/485c11444b72356faf1975a065e86637ffa68248/app/src/main/java/by/realovka/web/app/servlet/AdditionGroupToTrainerServlet.java",
    "contents_url": "https://api.github.com/repos/Realovka/Project-by-servlets-It-Academy/contents/app/src/main/java/by/realovka/web/app/servlet/AdditionGroupToTrainerServlet.java?ref=485c11444b72356faf1975a065e86637ffa68248",
    "patch": "@@ -0,0 +1,33 @@\n+package by.realovka.web.app.servlet;\n+\n+import by.realovka.web.dao.model.Student;\n+import by.realovka.web.dao.model.Trainer;\n+import by.realovka.web.service.service.UserService;\n+import by.realovka.web.service.service.UserServiceImpl;\n+import lombok.extern.slf4j.Slf4j;\n+\n+import javax.servlet.ServletException;\n+import javax.servlet.annotation.WebServlet;\n+import javax.servlet.http.HttpServlet;\n+import javax.servlet.http.HttpServletRequest;\n+import javax.servlet.http.HttpServletResponse;\n+import java.io.IOException;\n+import java.util.List;\n+\n+@Slf4j\n+@WebServlet(urlPatterns = \"/addGroup\")\n+public class AdditionGroupToTrainerServlet extends HttpServlet {\n+\n+    private final UserService userService = UserServiceImpl.getInstance();\n+\n+    @Override\n+    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n+        Trainer auth = (Trainer) req.getSession().getAttribute(\"userAuth\");\n+        auth = userService.createGroupByTrainer(auth);\n+        log.info(\"Trainer after addition group {}\", auth);\n+        req.getSession().setAttribute(\"userAuth\", auth);\n+        List<Student> students = auth.getGroup().getStudents();\n+        req.getSession().setAttribute(\"listStudents\", students);\n+        req.getRequestDispatcher(\"mainTrainer.jsp\").forward(req, resp);\n+    }\n+}"
  },
  {
    "sha": "7d9bd332e9b0eda1408a369dbe63268db5a34f0c",
    "filename": "app/src/main/java/by/realovka/web/app/servlet/AdditionMonthsForAverageSalaryServlet.java",
    "status": "added",
    "additions": 21,
    "deletions": 0,
    "changes": 21,
    "blob_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/blob/485c11444b72356faf1975a065e86637ffa68248/app/src/main/java/by/realovka/web/app/servlet/AdditionMonthsForAverageSalaryServlet.java",
    "raw_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/raw/485c11444b72356faf1975a065e86637ffa68248/app/src/main/java/by/realovka/web/app/servlet/AdditionMonthsForAverageSalaryServlet.java",
    "contents_url": "https://api.github.com/repos/Realovka/Project-by-servlets-It-Academy/contents/app/src/main/java/by/realovka/web/app/servlet/AdditionMonthsForAverageSalaryServlet.java?ref=485c11444b72356faf1975a065e86637ffa68248",
    "patch": "@@ -0,0 +1,21 @@\n+package by.realovka.web.app.servlet;\n+\n+\n+import javax.servlet.ServletException;\n+import javax.servlet.annotation.WebServlet;\n+import javax.servlet.http.HttpServlet;\n+import javax.servlet.http.HttpServletRequest;\n+import javax.servlet.http.HttpServletResponse;\n+import java.io.IOException;\n+\n+@WebServlet(urlPatterns = \"/choiceTrainerGetAverageSalary\")\n+public class AdditionMonthsForAverageSalaryServlet extends HttpServlet {\n+\n+\n+    @Override\n+    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n+        String trainerId = req.getParameter(\"trainerId\");\n+        req.getSession().setAttribute(\"trainerId\", trainerId);\n+        req.getRequestDispatcher(\"/monthsNumber.jsp\").forward(req, resp);\n+    }\n+}"
  },
  {
    "sha": "04d447d227764eb7d601f8b32f0c7d21b84a7059",
    "filename": "app/src/main/java/by/realovka/web/app/servlet/AdditionNewTrainerForAdminServlet.java",
    "status": "added",
    "additions": 30,
    "deletions": 0,
    "changes": 30,
    "blob_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/blob/485c11444b72356faf1975a065e86637ffa68248/app/src/main/java/by/realovka/web/app/servlet/AdditionNewTrainerForAdminServlet.java",
    "raw_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/raw/485c11444b72356faf1975a065e86637ffa68248/app/src/main/java/by/realovka/web/app/servlet/AdditionNewTrainerForAdminServlet.java",
    "contents_url": "https://api.github.com/repos/Realovka/Project-by-servlets-It-Academy/contents/app/src/main/java/by/realovka/web/app/servlet/AdditionNewTrainerForAdminServlet.java?ref=485c11444b72356faf1975a065e86637ffa68248",
    "patch": "@@ -0,0 +1,30 @@\n+package by.realovka.web.app.servlet;\n+\n+import by.realovka.web.dao.dto.TrainerDTO;\n+import by.realovka.web.service.service.TrainerService;\n+import by.realovka.web.service.service.TrainerServiceImpl;\n+\n+import javax.servlet.ServletException;\n+import javax.servlet.annotation.WebServlet;\n+import javax.servlet.http.HttpServlet;\n+import javax.servlet.http.HttpServletRequest;\n+import javax.servlet.http.HttpServletResponse;\n+import java.io.IOException;\n+import java.util.List;\n+\n+\n+@WebServlet(urlPatterns = \"/addTrainer\")\n+public class AdditionNewTrainerForAdminServlet extends HttpServlet {\n+\n+    private final TrainerService trainerService = TrainerServiceImpl.getInstance();\n+\n+\n+    @Override\n+    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n+        String trainerName = req.getParameter(\"trainerName\");\n+        trainerService.addTrainer(trainerName);\n+        List<TrainerDTO> trainerDTO = trainerService.getAllTrainers();\n+        req.getServletContext().setAttribute(\"listTrainers\", trainerDTO);\n+        req.getRequestDispatcher(\"/listAllTrainers.jsp\").forward(req, resp);\n+    }\n+}"
  },
  {
    "sha": "a85296754b16403cccff5b138601ea6c1155cff4",
    "filename": "app/src/main/java/by/realovka/web/app/servlet/AdditionSalaryToTrainerServlet.java",
    "status": "added",
    "additions": 29,
    "deletions": 0,
    "changes": 29,
    "blob_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/blob/485c11444b72356faf1975a065e86637ffa68248/app/src/main/java/by/realovka/web/app/servlet/AdditionSalaryToTrainerServlet.java",
    "raw_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/raw/485c11444b72356faf1975a065e86637ffa68248/app/src/main/java/by/realovka/web/app/servlet/AdditionSalaryToTrainerServlet.java",
    "contents_url": "https://api.github.com/repos/Realovka/Project-by-servlets-It-Academy/contents/app/src/main/java/by/realovka/web/app/servlet/AdditionSalaryToTrainerServlet.java?ref=485c11444b72356faf1975a065e86637ffa68248",
    "patch": "@@ -0,0 +1,29 @@\n+package by.realovka.web.app.servlet;\n+\n+import by.realovka.web.dao.dto.TrainerDTO;\n+import by.realovka.web.service.service.TrainerService;\n+import by.realovka.web.service.service.TrainerServiceImpl;\n+\n+import javax.servlet.ServletException;\n+import javax.servlet.annotation.WebServlet;\n+import javax.servlet.http.HttpServlet;\n+import javax.servlet.http.HttpServletRequest;\n+import javax.servlet.http.HttpServletResponse;\n+import java.io.IOException;\n+import java.util.List;\n+\n+@WebServlet(urlPatterns = \"/addSalary\")\n+public class AdditionSalaryToTrainerServlet extends HttpServlet {\n+\n+    private final TrainerService trainerService = TrainerServiceImpl.getInstance();\n+\n+    @Override\n+    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n+        String trainerId = (String) req.getSession().getAttribute(\"trainerId\");\n+        String salary = req.getParameter(\"salary\");\n+        trainerService.addNewSalaryToTrainer(trainerId, salary);\n+        List<TrainerDTO> trainerDTO = trainerService.getAllTrainers();\n+        req.getServletContext().setAttribute(\"listTrainers\", trainerDTO);\n+        req.getRequestDispatcher(\"/mainAdmin.jsp\").forward(req, resp);\n+    }\n+}"
  },
  {
    "sha": "e4402e22adba2dcc7db213b7cd2bb098c033420c",
    "filename": "app/src/main/java/by/realovka/web/app/servlet/AdminMainServlet.java",
    "status": "added",
    "additions": 26,
    "deletions": 0,
    "changes": 26,
    "blob_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/blob/485c11444b72356faf1975a065e86637ffa68248/app/src/main/java/by/realovka/web/app/servlet/AdminMainServlet.java",
    "raw_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/raw/485c11444b72356faf1975a065e86637ffa68248/app/src/main/java/by/realovka/web/app/servlet/AdminMainServlet.java",
    "contents_url": "https://api.github.com/repos/Realovka/Project-by-servlets-It-Academy/contents/app/src/main/java/by/realovka/web/app/servlet/AdminMainServlet.java?ref=485c11444b72356faf1975a065e86637ffa68248",
    "patch": "@@ -0,0 +1,26 @@\n+package by.realovka.web.app.servlet;\n+\n+import by.realovka.web.dao.dto.TrainerDTO;\n+import by.realovka.web.service.service.TrainerService;\n+import by.realovka.web.service.service.TrainerServiceImpl;\n+\n+import javax.servlet.ServletException;\n+import javax.servlet.annotation.WebServlet;\n+import javax.servlet.http.HttpServlet;\n+import javax.servlet.http.HttpServletRequest;\n+import javax.servlet.http.HttpServletResponse;\n+import java.io.IOException;\n+import java.util.List;\n+\n+@WebServlet(urlPatterns = \"/adminAndTrainers\")\n+public class AdminMainServlet extends HttpServlet {\n+\n+    private final TrainerService trainerService = TrainerServiceImpl.getInstance();\n+\n+    @Override\n+    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n+        List<TrainerDTO> trainerDTO = trainerService.getAllTrainers();\n+        req.getServletContext().setAttribute(\"listTrainers\", trainerDTO);\n+        req.getRequestDispatcher(\"mainAdmin.jsp\").forward(req, resp);\n+    }\n+}"
  },
  {
    "sha": "6b05cb75617f7094d44c7a3ee98f858a26d4ad82",
    "filename": "app/src/main/java/by/realovka/web/app/servlet/AllStudentsServlet.java",
    "status": "modified",
    "additions": 9,
    "deletions": 23,
    "changes": 32,
    "blob_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/blob/485c11444b72356faf1975a065e86637ffa68248/app/src/main/java/by/realovka/web/app/servlet/AllStudentsServlet.java",
    "raw_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/raw/485c11444b72356faf1975a065e86637ffa68248/app/src/main/java/by/realovka/web/app/servlet/AllStudentsServlet.java",
    "contents_url": "https://api.github.com/repos/Realovka/Project-by-servlets-It-Academy/contents/app/src/main/java/by/realovka/web/app/servlet/AllStudentsServlet.java?ref=485c11444b72356faf1975a065e86637ffa68248",
    "patch": "@@ -1,12 +1,9 @@\n package by.realovka.web.app.servlet;\n \n-import by.realovka.web.dao.model.User;\n-import by.realovka.web.dao.repository.UserRepository;\n-import by.realovka.web.dao.repository.UserRepositoryImpl;\n-import by.realovka.web.service.UserService;\n-import by.realovka.web.service.UserServiceImpl;\n-import org.slf4j.Logger;\n-import org.slf4j.LoggerFactory;\n+import by.realovka.web.dao.model.Student;\n+import by.realovka.web.dao.model.Trainer;\n+import by.realovka.web.service.service.UserService;\n+import by.realovka.web.service.service.UserServiceImpl;\n \n import javax.servlet.ServletException;\n import javax.servlet.annotation.WebServlet;\n@@ -19,24 +16,13 @@\n @WebServlet(urlPatterns = \"/allStudents\")\n public class AllStudentsServlet extends HttpServlet {\n \n-    private UserService userService;\n-\n-    private UserRepository userRepository;\n-\n-    private final static Logger log = LoggerFactory.getLogger(AllStudentsServlet.class);\n-\n-\n-    @Override\n-    public void init() throws ServletException {\n-        userRepository = UserRepositoryImpl.getInstance();\n-        userService = UserServiceImpl.getInstance(userRepository);\n-    }\n+    private final UserService userService = UserServiceImpl.getInstance();\n \n     @Override\n     protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n-       List<User> students = userService.getAllStudents();\n-       log.info(\"students = {}\", students);\n-       req.getSession().setAttribute(\"students\", students);\n-       req.getRequestDispatcher(\"/listAllStudents.jsp\").forward(req, resp);\n+        Trainer auth = (Trainer) req.getSession().getAttribute(\"userAuth\");\n+        List<Student> students = userService.getAllStudents(auth);\n+        req.getSession().setAttribute(\"students\", students);\n+        req.getRequestDispatcher(\"/listAllStudents.jsp\").forward(req, resp);\n     }\n }"
  },
  {
    "sha": "34e9d9a6a58caf4b0d70b1001a196d7f776497c8",
    "filename": "app/src/main/java/by/realovka/web/app/servlet/AuthorizationServlet.java",
    "status": "removed",
    "additions": 0,
    "deletions": 55,
    "changes": 55,
    "blob_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/blob/db2c3e0295016e2f86fa123896e5c6165f52c10b/app/src/main/java/by/realovka/web/app/servlet/AuthorizationServlet.java",
    "raw_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/raw/db2c3e0295016e2f86fa123896e5c6165f52c10b/app/src/main/java/by/realovka/web/app/servlet/AuthorizationServlet.java",
    "contents_url": "https://api.github.com/repos/Realovka/Project-by-servlets-It-Academy/contents/app/src/main/java/by/realovka/web/app/servlet/AuthorizationServlet.java?ref=db2c3e0295016e2f86fa123896e5c6165f52c10b",
    "patch": "@@ -1,55 +0,0 @@\n-package by.realovka.web.app.servlet;\n-\n-import by.realovka.web.dao.model.Admin;\n-import by.realovka.web.dao.model.Student;\n-import by.realovka.web.dao.model.Trainer;\n-import by.realovka.web.dao.model.User;\n-import by.realovka.web.dao.repository.UserRepository;\n-import by.realovka.web.dao.repository.UserRepositoryImpl;\n-import by.realovka.web.service.UserService;\n-import by.realovka.web.service.UserServiceImpl;\n-import org.slf4j.Logger;\n-import org.slf4j.LoggerFactory;\n-\n-import javax.servlet.ServletException;\n-import javax.servlet.annotation.WebServlet;\n-import javax.servlet.http.HttpServlet;\n-import javax.servlet.http.HttpServletRequest;\n-import javax.servlet.http.HttpServletResponse;\n-import javax.servlet.http.HttpSession;\n-import java.io.IOException;\n-\n-@WebServlet(urlPatterns = \"/auth\")\n-public class AuthorizationServlet extends HttpServlet {\n-\n-    private UserService userService;\n-\n-    private UserRepository userRepository;\n-\n-    private final static Logger log = LoggerFactory.getLogger(AuthorizationServlet.class);\n-\n-\n-    @Override\n-    public void init() throws ServletException {\n-        userRepository = UserRepositoryImpl.getInstance();\n-        userService = UserServiceImpl.getInstance(userRepository);\n-    }\n-\n-\n-    @Override\n-    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n-        String login = req.getParameter(\"loginAuthorization\");\n-        String password = req.getParameter(\"passwordAuthorization\");\n-        User user = userService.getUserByLoginAndPassword(login, password);\n-        log.info(\"UserFromCollection = {}\", user);\n-        HttpSession session = req.getSession();\n-        session.setAttribute(\"userAuth\", user);\n-        if(user.getClass().equals(Student.class)){\n-            req.getRequestDispatcher(\"/mainStudent.jsp\").forward(req, resp);\n-        } else if(user.getClass().equals(Trainer.class)){\n-            req.getRequestDispatcher(\"/mainTrainer.jsp\").forward(req,resp);\n-        } else  if(user.getClass().equals(Admin.class)){\n-            req.getRequestDispatcher(\"/mainAdmin.jsp\").forward(req,resp);\n-        }\n-    }\n-}"
  },
  {
    "sha": "6029378ab43ce00ba498871b1e3d2dd0410814b4",
    "filename": "app/src/main/java/by/realovka/web/app/servlet/AverageSalaryOfTrainersServlet.java",
    "status": "removed",
    "additions": 0,
    "deletions": 51,
    "changes": 51,
    "blob_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/blob/db2c3e0295016e2f86fa123896e5c6165f52c10b/app/src/main/java/by/realovka/web/app/servlet/AverageSalaryOfTrainersServlet.java",
    "raw_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/raw/db2c3e0295016e2f86fa123896e5c6165f52c10b/app/src/main/java/by/realovka/web/app/servlet/AverageSalaryOfTrainersServlet.java",
    "contents_url": "https://api.github.com/repos/Realovka/Project-by-servlets-It-Academy/contents/app/src/main/java/by/realovka/web/app/servlet/AverageSalaryOfTrainersServlet.java?ref=db2c3e0295016e2f86fa123896e5c6165f52c10b",
    "patch": "@@ -1,51 +0,0 @@\n-package by.realovka.web.app.servlet;\n-\n-import by.realovka.web.dao.dto.TrainerDTO;\n-import by.realovka.web.dao.repository.TrainerRepository;\n-import by.realovka.web.dao.repository.TrainerRepositoryImpl;\n-import by.realovka.web.service.TrainerService;\n-import by.realovka.web.service.TrainerServiceImpl;\n-import org.slf4j.Logger;\n-import org.slf4j.LoggerFactory;\n-\n-import javax.servlet.ServletContext;\n-import javax.servlet.ServletException;\n-import javax.servlet.annotation.WebServlet;\n-import javax.servlet.http.HttpServlet;\n-import javax.servlet.http.HttpServletRequest;\n-import javax.servlet.http.HttpServletResponse;\n-import java.io.IOException;\n-import java.util.List;\n-\n-@WebServlet (urlPatterns = \"/averageSalary\")\n-public class AverageSalaryOfTrainersServlet extends HttpServlet {\n-\n-    private TrainerService trainerService;\n-\n-    private TrainerRepository trainerRepository;\n-\n-    private static final Logger log = LoggerFactory.getLogger(AverageSalaryOfTrainersServlet.class);\n-\n-    @Override\n-    public void init() throws ServletException {\n-        trainerRepository = TrainerRepositoryImpl.getInstance();\n-        trainerService = TrainerServiceImpl.getInstance(trainerRepository);\n-    }\n-\n-    @Override\n-    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n-       String trainerName = req.getParameter(\"trainerName\");\n-       Integer months = null;\n-       try {\n-           months = Integer.parseInt(req.getParameter(\"numberOfMonths\"));\n-       } catch (NumberFormatException e){\n-           ServletContext servletContext = req.getServletContext();\n-           servletContext.setAttribute(\"message\", \"Parameters are wrong!\");\n-           req.getRequestDispatcher(\"/averageSalary.jsp\").forward(req, resp);\n-           return;\n-       }\n-       TrainerDTO trainerDTO = trainerService.getAverageSalary(trainerName, months);\n-       req.getSession().setAttribute(\"trainerDTO\", trainerDTO);\n-       req.getRequestDispatcher(\"/averageSalary.jsp\").forward(req, resp);\n-    }\n-}"
  },
  {
    "sha": "4dc00872383954598a02c45e8231a74bf4a895df",
    "filename": "app/src/main/java/by/realovka/web/app/servlet/AverageSalaryServlet.java",
    "status": "added",
    "additions": 28,
    "deletions": 0,
    "changes": 28,
    "blob_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/blob/485c11444b72356faf1975a065e86637ffa68248/app/src/main/java/by/realovka/web/app/servlet/AverageSalaryServlet.java",
    "raw_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/raw/485c11444b72356faf1975a065e86637ffa68248/app/src/main/java/by/realovka/web/app/servlet/AverageSalaryServlet.java",
    "contents_url": "https://api.github.com/repos/Realovka/Project-by-servlets-It-Academy/contents/app/src/main/java/by/realovka/web/app/servlet/AverageSalaryServlet.java?ref=485c11444b72356faf1975a065e86637ffa68248",
    "patch": "@@ -0,0 +1,28 @@\n+package by.realovka.web.app.servlet;\n+\n+import by.realovka.web.dao.dto.TrainerDTO;\n+import by.realovka.web.service.service.TrainerService;\n+import by.realovka.web.service.service.TrainerServiceImpl;\n+\n+import javax.servlet.ServletException;\n+import javax.servlet.annotation.WebServlet;\n+import javax.servlet.http.HttpServlet;\n+import javax.servlet.http.HttpServletRequest;\n+import javax.servlet.http.HttpServletResponse;\n+import java.io.IOException;\n+\n+\n+@WebServlet(urlPatterns = \"/calculationAverageSalary\")\n+public class AverageSalaryServlet extends HttpServlet {\n+\n+    private final TrainerService trainerService = TrainerServiceImpl.getInstance();\n+\n+    @Override\n+    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n+        String trainerId = (String) req.getSession().getAttribute(\"trainerId\");\n+        String finishMonthsNumber = req.getParameter(\"finishMonthsNumber\");\n+        TrainerDTO trainerDTO = trainerService.getAverageSalary(trainerId, finishMonthsNumber);\n+        req.getSession().setAttribute(\"trainerWithHisAverageSalary\", trainerDTO);\n+        req.getRequestDispatcher(\"answerAverageSalary.jsp\").forward(req, resp);\n+    }\n+}"
  },
  {
    "sha": "dcf99e2f67130e927c66dcd178312ab3a852cc6a",
    "filename": "app/src/main/java/by/realovka/web/app/servlet/DeleteMarkServlet.java",
    "status": "modified",
    "additions": 12,
    "deletions": 24,
    "changes": 36,
    "blob_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/blob/485c11444b72356faf1975a065e86637ffa68248/app/src/main/java/by/realovka/web/app/servlet/DeleteMarkServlet.java",
    "raw_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/raw/485c11444b72356faf1975a065e86637ffa68248/app/src/main/java/by/realovka/web/app/servlet/DeleteMarkServlet.java",
    "contents_url": "https://api.github.com/repos/Realovka/Project-by-servlets-It-Academy/contents/app/src/main/java/by/realovka/web/app/servlet/DeleteMarkServlet.java?ref=485c11444b72356faf1975a065e86637ffa68248",
    "patch": "@@ -2,12 +2,9 @@\n \n import by.realovka.web.dao.model.Student;\n import by.realovka.web.dao.model.Trainer;\n-import by.realovka.web.dao.repository.UserRepository;\n-import by.realovka.web.dao.repository.UserRepositoryImpl;\n-import by.realovka.web.service.UserService;\n-import by.realovka.web.service.UserServiceImpl;\n-import org.slf4j.Logger;\n-import org.slf4j.LoggerFactory;\n+import by.realovka.web.service.service.UserService;\n+import by.realovka.web.service.service.UserServiceImpl;\n+import lombok.extern.slf4j.Slf4j;\n \n import javax.servlet.ServletException;\n import javax.servlet.annotation.WebServlet;\n@@ -17,30 +14,21 @@\n import java.io.IOException;\n import java.util.List;\n \n+@Slf4j\n @WebServlet(urlPatterns = \"/deleteMark\")\n public class DeleteMarkServlet extends HttpServlet {\n \n-    private UserService userService;\n-\n-    private UserRepository userRepository;\n-\n-    private final static Logger log = LoggerFactory.getLogger(RegistrationServlet.class);\n-\n-\n-    @Override\n-    public void init() throws ServletException {\n-        userRepository = UserRepositoryImpl.getInstance();\n-        userService = UserServiceImpl.getInstance(userRepository);\n-    }\n+    private final UserService userService = UserServiceImpl.getInstance();\n \n     @Override\n     protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n-        String studentLogin = req.getParameter(\"student\");\n-        String theme = req.getParameter(\"theme\");\n+        String themeId = req.getParameter(\"themeId\");\n         Trainer trainer = (Trainer) req.getSession().getAttribute(\"userAuth\");\n-        List<Student> students = userService.deleteMark(trainer,studentLogin, theme);\n-        log.info(\"students = {}\", students);\n-        req.getSession().setAttribute(\"listStudentsForTrainer\", students);\n-        req.getRequestDispatcher(\"mainTrainer.jsp\").forward(req,resp);\n+        trainer = userService.addOrUpdateOrDeleteMark(trainer, themeId, 0);\n+        List<Student> students = trainer.getGroup().getStudents();\n+        log.info(\"Trainer and his students after delete mark = {}\", themeId);\n+        req.getSession().setAttribute(\"userAuth\", trainer);\n+        req.getSession().setAttribute(\"listStudents\", students);\n+        req.getRequestDispatcher(\"mainTrainer.jsp\").forward(req, resp);\n     }\n }"
  },
  {
    "sha": "6b60474cafd464390c2d7c9de38d5cd2d73aa9d2",
    "filename": "app/src/main/java/by/realovka/web/app/servlet/EnterNewTrainerForAdminServlet.java",
    "status": "removed",
    "additions": 0,
    "deletions": 67,
    "changes": 67,
    "blob_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/blob/db2c3e0295016e2f86fa123896e5c6165f52c10b/app/src/main/java/by/realovka/web/app/servlet/EnterNewTrainerForAdminServlet.java",
    "raw_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/raw/db2c3e0295016e2f86fa123896e5c6165f52c10b/app/src/main/java/by/realovka/web/app/servlet/EnterNewTrainerForAdminServlet.java",
    "contents_url": "https://api.github.com/repos/Realovka/Project-by-servlets-It-Academy/contents/app/src/main/java/by/realovka/web/app/servlet/EnterNewTrainerForAdminServlet.java?ref=db2c3e0295016e2f86fa123896e5c6165f52c10b",
    "patch": "@@ -1,67 +0,0 @@\n-package by.realovka.web.app.servlet;\n-\n-import by.realovka.web.dao.model.Trainer;\n-import by.realovka.web.dao.repository.TrainerRepository;\n-import by.realovka.web.dao.repository.TrainerRepositoryImpl;\n-import by.realovka.web.service.TrainerService;\n-import by.realovka.web.service.TrainerServiceImpl;\n-import org.slf4j.Logger;\n-import org.slf4j.LoggerFactory;\n-\n-import javax.servlet.ServletContext;\n-import javax.servlet.ServletException;\n-import javax.servlet.annotation.WebServlet;\n-import javax.servlet.http.HttpServlet;\n-import javax.servlet.http.HttpServletRequest;\n-import javax.servlet.http.HttpServletResponse;\n-import java.io.IOException;\n-import java.util.ArrayList;\n-import java.util.Arrays;\n-import java.util.List;\n-import java.util.Map;\n-\n-\n-@WebServlet(urlPatterns = \"/addTrainer\")\n-public class EnterNewTrainerForAdminServlet extends HttpServlet {\n-\n-    private TrainerService trainerService;\n-\n-    private TrainerRepository trainerRepository;\n-\n-    private final static Logger log = LoggerFactory.getLogger(EnterNewTrainerForAdminServlet.class);\n-\n-\n-    @Override\n-    public void init() throws ServletException {\n-       trainerRepository = TrainerRepositoryImpl.getInstance();\n-       trainerService = TrainerServiceImpl.getInstance(trainerRepository);\n-    }\n-\n-    @Override\n-    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n-        String trainerName = req.getParameter(\"trainerName\");\n-        int trainerAge = 0;\n-        Double salary = null;\n-        try {\n-            salary = Double.parseDouble(req.getParameter(\"salary\"));\n-            trainerAge = Integer.parseInt(req.getParameter(\"trainerAge\"));\n-        } catch (NumberFormatException e){\n-            ServletContext servletContext = req.getServletContext();\n-            servletContext.setAttribute(\"message\", \"Parameters are wrong!\");\n-            req.getRequestDispatcher(\"/enterTrainer.jsp\").forward(req, resp);\n-            return;\n-        }\n-        if(trainerService.existTrainer(trainerName)){\n-            trainerService.addSalaryByOneMonth(trainerName, salary);\n-        } else {\n-            List<Double> salaries = new ArrayList<>();\n-            salaries.add(salary);\n-            Trainer trainer = new Trainer(trainerName, trainerAge, salaries);\n-            log.info(\"Trainer = {}\", trainer);\n-            trainerService.saveTrainer(trainer);\n-        }\n-        Map<String, Trainer> trainers = trainerService.getAllTrainers();\n-        req.getServletContext().setAttribute(\"trainers\", trainers);\n-        req.getRequestDispatcher(\"/enterTrainer.jsp\").forward(req,resp);\n-    }\n-}"
  },
  {
    "sha": "2bf52779714a406da0f9cfa1a85f438264f57b9c",
    "filename": "app/src/main/java/by/realovka/web/app/servlet/LogoutServlet.java",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/blob/485c11444b72356faf1975a065e86637ffa68248/app/src/main/java/by/realovka/web/app/servlet/LogoutServlet.java",
    "raw_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/raw/485c11444b72356faf1975a065e86637ffa68248/app/src/main/java/by/realovka/web/app/servlet/LogoutServlet.java",
    "contents_url": "https://api.github.com/repos/Realovka/Project-by-servlets-It-Academy/contents/app/src/main/java/by/realovka/web/app/servlet/LogoutServlet.java?ref=485c11444b72356faf1975a065e86637ffa68248",
    "patch": "@@ -13,6 +13,6 @@\n     @Override\n     protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n         req.getSession().invalidate();\n-        req.getRequestDispatcher(\"/index.jsp\").forward(req,resp);\n+        req.getRequestDispatcher(\"/index.jsp\").forward(req, resp);\n     }\n }"
  },
  {
    "sha": "1978d4f2d5ea3c5cc9faae2e588bb22687f01549",
    "filename": "app/src/main/java/by/realovka/web/app/servlet/NewMarkAdditionOrUpdateMarkServlet.java",
    "status": "added",
    "additions": 46,
    "deletions": 0,
    "changes": 46,
    "blob_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/blob/485c11444b72356faf1975a065e86637ffa68248/app/src/main/java/by/realovka/web/app/servlet/NewMarkAdditionOrUpdateMarkServlet.java",
    "raw_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/raw/485c11444b72356faf1975a065e86637ffa68248/app/src/main/java/by/realovka/web/app/servlet/NewMarkAdditionOrUpdateMarkServlet.java",
    "contents_url": "https://api.github.com/repos/Realovka/Project-by-servlets-It-Academy/contents/app/src/main/java/by/realovka/web/app/servlet/NewMarkAdditionOrUpdateMarkServlet.java?ref=485c11444b72356faf1975a065e86637ffa68248",
    "patch": "@@ -0,0 +1,46 @@\n+package by.realovka.web.app.servlet;\n+\n+import by.realovka.web.dao.model.Student;\n+import by.realovka.web.dao.model.Trainer;\n+import by.realovka.web.service.service.UserService;\n+import by.realovka.web.service.service.UserServiceImpl;\n+import lombok.extern.slf4j.Slf4j;\n+\n+import javax.servlet.ServletException;\n+import javax.servlet.annotation.WebServlet;\n+import javax.servlet.http.HttpServlet;\n+import javax.servlet.http.HttpServletRequest;\n+import javax.servlet.http.HttpServletResponse;\n+import java.io.IOException;\n+import java.util.List;\n+\n+@Slf4j\n+@WebServlet(urlPatterns = \"/addOrUpdateMark\")\n+public class NewMarkAdditionOrUpdateMarkServlet extends HttpServlet {\n+\n+    private final UserService userService = UserServiceImpl.getInstance();\n+\n+\n+    @Override\n+    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n+        Trainer auth = (Trainer) req.getSession().getAttribute(\"userAuth\");\n+        String themeId = req.getParameter(\"themeId\");\n+        Integer mark = null;\n+        try {\n+            mark = Integer.parseInt(req.getParameter(\"mark\"));\n+        } catch (NumberFormatException e) {\n+            req.getSession().setAttribute(\"massageFormatOfMarkIsWrong\", \"Format of mark is wrong!\");\n+            req.getRequestDispatcher(\"mainTrainer.jsp\").forward(req, resp);\n+            return;\n+        }\n+        if (mark > 100 || mark < 0) {\n+            req.getSession().setAttribute(\"massageFormatOfMarkIsWrong\", \"You can't enter a mark greater than 100 or less than 0\");\n+            req.getRequestDispatcher(\"mainTrainer.jsp\").forward(req, resp);\n+            return;\n+        }\n+        Trainer trainer = userService.addOrUpdateOrDeleteMark(auth, themeId, mark);\n+        List<Student> students = trainer.getGroup().getStudents();\n+        req.getSession().setAttribute(\"listStudents\", students);\n+        req.getRequestDispatcher(\"mainTrainer.jsp\").forward(req, resp);\n+    }\n+}"
  },
  {
    "sha": "06fccf9855c4cab1ad82c3821280506cd3493707",
    "filename": "app/src/main/java/by/realovka/web/app/servlet/NewMarkAdditionServlet.java",
    "status": "removed",
    "additions": 0,
    "deletions": 54,
    "changes": 54,
    "blob_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/blob/db2c3e0295016e2f86fa123896e5c6165f52c10b/app/src/main/java/by/realovka/web/app/servlet/NewMarkAdditionServlet.java",
    "raw_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/raw/db2c3e0295016e2f86fa123896e5c6165f52c10b/app/src/main/java/by/realovka/web/app/servlet/NewMarkAdditionServlet.java",
    "contents_url": "https://api.github.com/repos/Realovka/Project-by-servlets-It-Academy/contents/app/src/main/java/by/realovka/web/app/servlet/NewMarkAdditionServlet.java?ref=db2c3e0295016e2f86fa123896e5c6165f52c10b",
    "patch": "@@ -1,54 +0,0 @@\n-package by.realovka.web.app.servlet;\n-\n-import by.realovka.web.dao.model.Student;\n-import by.realovka.web.dao.model.Trainer;\n-import by.realovka.web.dao.repository.UserRepository;\n-import by.realovka.web.dao.repository.UserRepositoryImpl;\n-import by.realovka.web.service.UserService;\n-import by.realovka.web.service.UserServiceImpl;\n-import org.slf4j.Logger;\n-import org.slf4j.LoggerFactory;\n-\n-import javax.servlet.ServletException;\n-import javax.servlet.annotation.WebServlet;\n-import javax.servlet.http.HttpServlet;\n-import javax.servlet.http.HttpServletRequest;\n-import javax.servlet.http.HttpServletResponse;\n-import java.io.IOException;\n-import java.util.List;\n-\n-@WebServlet(urlPatterns = \"/addMark\")\n-public class NewMarkAdditionServlet extends HttpServlet {\n-\n-    private UserService userService;\n-\n-    private UserRepository userRepository;\n-\n-    private final static Logger log = LoggerFactory.getLogger(AllStudentsServlet.class);\n-\n-\n-    @Override\n-    public void init() throws ServletException {\n-        userRepository = UserRepositoryImpl.getInstance();\n-        userService = UserServiceImpl.getInstance(userRepository);\n-    }\n-\n-    @Override\n-    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n-        Trainer trainer = (Trainer) req.getSession().getAttribute(\"userAuth\");\n-        String studentLogin = req.getParameter(\"student\");\n-        String theme = req.getParameter(\"theme\");\n-        Integer mark = null;\n-        try {\n-            mark = Integer.parseInt(req.getParameter(\"mark\"));\n-        } catch (NumberFormatException e) {\n-            req.getServletContext().setAttribute(\"massageFormatOfMarkIsWrong\", \"Format of mark is wrong!\");\n-            req.getRequestDispatcher(\"mainTrainer.jsp\").forward(req, resp);\n-            return;\n-        }\n-        List<Student> students = userService.addOrUpdateMarkToStudent(trainer, studentLogin, theme, mark);\n-        log.info(\"Students = {}\", students);\n-        req.getSession().setAttribute(\"listStudentsForTrainer\", students);\n-        req.getRequestDispatcher(\"mainTrainer.jsp\").forward(req, resp);\n-    }\n-}"
  },
  {
    "sha": "78ede94d916960f69996907d2416c0fccfbee572",
    "filename": "app/src/main/java/by/realovka/web/app/servlet/NewThemeAdditionServlet.java",
    "status": "modified",
    "additions": 12,
    "deletions": 24,
    "changes": 36,
    "blob_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/blob/485c11444b72356faf1975a065e86637ffa68248/app/src/main/java/by/realovka/web/app/servlet/NewThemeAdditionServlet.java",
    "raw_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/raw/485c11444b72356faf1975a065e86637ffa68248/app/src/main/java/by/realovka/web/app/servlet/NewThemeAdditionServlet.java",
    "contents_url": "https://api.github.com/repos/Realovka/Project-by-servlets-It-Academy/contents/app/src/main/java/by/realovka/web/app/servlet/NewThemeAdditionServlet.java?ref=485c11444b72356faf1975a065e86637ffa68248",
    "patch": "@@ -2,12 +2,9 @@\n \n import by.realovka.web.dao.model.Student;\n import by.realovka.web.dao.model.Trainer;\n-import by.realovka.web.dao.repository.UserRepository;\n-import by.realovka.web.dao.repository.UserRepositoryImpl;\n-import by.realovka.web.service.UserService;\n-import by.realovka.web.service.UserServiceImpl;\n-import org.slf4j.Logger;\n-import org.slf4j.LoggerFactory;\n+import by.realovka.web.service.service.UserService;\n+import by.realovka.web.service.service.UserServiceImpl;\n+import lombok.extern.slf4j.Slf4j;\n \n import javax.servlet.ServletException;\n import javax.servlet.annotation.WebServlet;\n@@ -17,30 +14,21 @@\n import java.io.IOException;\n import java.util.List;\n \n-@WebServlet (urlPatterns = \"/addTheme\")\n+@Slf4j\n+@WebServlet(urlPatterns = \"/addTheme\")\n public class NewThemeAdditionServlet extends HttpServlet {\n \n-    private UserService userService;\n-\n-    private UserRepository userRepository;\n-\n-    private final static Logger log = LoggerFactory.getLogger(AllStudentsServlet.class);\n-\n-\n-    @Override\n-    public void init() throws ServletException {\n-        userRepository = UserRepositoryImpl.getInstance();\n-        userService = UserServiceImpl.getInstance(userRepository);\n-    }\n+    private final UserService userService = UserServiceImpl.getInstance();\n \n     @Override\n     protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n+        Trainer auth = (Trainer) req.getSession().getAttribute(\"userAuth\");\n         String themeName = req.getParameter(\"themeName\");\n-        req.getSession().setAttribute(\"theme\",themeName);\n-        Trainer trainer = (Trainer) req.getSession().getAttribute(\"userAuth\");\n-        List<Student> students = userService.addThemeToStudents(trainer, themeName);\n-        log.info(\"Students = {}\", students);\n-        req.getSession().setAttribute(\"listStudentsForTrainer\", students);\n+        req.getSession().setAttribute(\"theme\", themeName);\n+        auth = userService.getTrainerAndHisStudentsAfterAddTheme(auth, themeName);\n+        List<Student> students = auth.getGroup().getStudents();\n+        req.getSession().setAttribute(\"listStudents\", students);\n+        log.info(\"Trainer after addition theme {}\", auth);\n         req.getRequestDispatcher(\"mainTrainer.jsp\").forward(req, resp);\n     }\n }"
  },
  {
    "sha": "23c7f680ea7075ad780ec0c72d22c6d16aaaf192",
    "filename": "app/src/main/java/by/realovka/web/app/servlet/RegistrationServlet.java",
    "status": "modified",
    "additions": 20,
    "deletions": 50,
    "changes": 70,
    "blob_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/blob/485c11444b72356faf1975a065e86637ffa68248/app/src/main/java/by/realovka/web/app/servlet/RegistrationServlet.java",
    "raw_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/raw/485c11444b72356faf1975a065e86637ffa68248/app/src/main/java/by/realovka/web/app/servlet/RegistrationServlet.java",
    "contents_url": "https://api.github.com/repos/Realovka/Project-by-servlets-It-Academy/contents/app/src/main/java/by/realovka/web/app/servlet/RegistrationServlet.java?ref=485c11444b72356faf1975a065e86637ffa68248",
    "patch": "@@ -1,15 +1,10 @@\n package by.realovka.web.app.servlet;\n \n-import by.realovka.web.dao.model.Admin;\n-import by.realovka.web.dao.model.Student;\n-import by.realovka.web.dao.model.Trainer;\n-import by.realovka.web.dao.model.User;\n-import by.realovka.web.dao.repository.UserRepository;\n-import by.realovka.web.dao.repository.UserRepositoryImpl;\n-import by.realovka.web.service.UserService;\n-import by.realovka.web.service.UserServiceImpl;\n-import org.slf4j.Logger;\n-import org.slf4j.LoggerFactory;\n+import by.realovka.web.dao.dto.UserDTO;\n+import by.realovka.web.dao.model.Role;\n+import by.realovka.web.service.service.UserService;\n+import by.realovka.web.service.service.UserServiceImpl;\n+import lombok.extern.slf4j.Slf4j;\n \n import javax.servlet.ServletException;\n import javax.servlet.annotation.WebServlet;\n@@ -18,21 +13,11 @@\n import javax.servlet.http.HttpServletResponse;\n import java.io.IOException;\n \n+@Slf4j\n @WebServlet(urlPatterns = \"/reg\")\n public class RegistrationServlet extends HttpServlet {\n \n-    private UserService userService;\n-\n-    private UserRepository userRepository;\n-\n-    private final static Logger log = LoggerFactory.getLogger(RegistrationServlet.class);\n-\n-\n-    @Override\n-    public void init() throws ServletException {\n-        userRepository = UserRepositoryImpl.getInstance();\n-        userService = UserServiceImpl.getInstance(userRepository);\n-    }\n+    private final UserService userService = UserServiceImpl.getInstance();\n \n     @Override\n     protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n@@ -41,34 +26,19 @@ protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws S\n         String login = req.getParameter(\"loginRegistration\");\n         String password = req.getParameter(\"passwordRegistration\");\n         String role = req.getParameter(\"role\");\n-        User user = createUser(role);\n-        setFieldsToUser(user, userName, age, login, password);\n-        log.info(\"User = {}\", user);\n-        userService.saveUser(user);\n-        req.getRequestDispatcher(\"/index.jsp\").forward(req, resp);\n-    }\n-\n-    private User createUser(String role) {\n-        User user = null;\n-        switch (role) {\n-            case \"Admin\":\n-                user = new Admin();\n-                break;\n-            case \"Trainer\":\n-                user = new Trainer();\n-                break;\n-            case \"Student\":\n-                user = new Student();\n+        UserDTO userDTO = UserDTO.builder()\n+                .userName(userName)\n+                .age(age)\n+                .login(login)\n+                .password(password)\n+                .role(Role.valueOf(role))\n+                .build();\n+        log.info(\"User = {}\", userDTO);\n+        if (!userService.saveUser(userDTO)) {\n+            req.setAttribute(\"massageAboutFailRegistration\", \"Such user already exists!\");\n+            req.getRequestDispatcher(\"/registration.jsp\").forward(req, resp);\n+        } else {\n+            req.getRequestDispatcher(\"/index.jsp\").forward(req, resp);\n         }\n-        return user;\n     }\n-\n-    private User setFieldsToUser(User user, String userName, int age, String login, String password) {\n-        user.setUserName(userName);\n-        user.setAge(age);\n-        user.setLogin(login);\n-        user.setPassword(password);\n-        return user;\n-    }\n-\n }\n\\ No newline at end of file"
  },
  {
    "sha": "055f6041f00725437d7ecb2b7c2602fbd2a8fb49",
    "filename": "app/src/main/java/by/realovka/web/app/servlet/StudentMainServlet.java",
    "status": "added",
    "additions": 25,
    "deletions": 0,
    "changes": 25,
    "blob_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/blob/485c11444b72356faf1975a065e86637ffa68248/app/src/main/java/by/realovka/web/app/servlet/StudentMainServlet.java",
    "raw_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/raw/485c11444b72356faf1975a065e86637ffa68248/app/src/main/java/by/realovka/web/app/servlet/StudentMainServlet.java",
    "contents_url": "https://api.github.com/repos/Realovka/Project-by-servlets-It-Academy/contents/app/src/main/java/by/realovka/web/app/servlet/StudentMainServlet.java?ref=485c11444b72356faf1975a065e86637ffa68248",
    "patch": "@@ -0,0 +1,25 @@\n+package by.realovka.web.app.servlet;\n+\n+import by.realovka.web.dao.model.Student;\n+import lombok.extern.slf4j.Slf4j;\n+\n+import javax.servlet.ServletException;\n+import javax.servlet.annotation.WebServlet;\n+import javax.servlet.http.HttpServlet;\n+import javax.servlet.http.HttpServletRequest;\n+import javax.servlet.http.HttpServletResponse;\n+import java.io.IOException;\n+\n+\n+@Slf4j\n+@WebServlet(urlPatterns = \"/studentThemesAndMarks\")\n+public class StudentMainServlet extends HttpServlet {\n+\n+    @Override\n+    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n+        Student auth = (Student) req.getSession().getAttribute(\"userAuth\");\n+        req.getSession().setAttribute(\"userAuth\", auth);\n+        log.info(\"Auth student = {}\", auth);\n+        req.getRequestDispatcher(\"/mainStudent.jsp\").forward(req, resp);\n+    }\n+}"
  },
  {
    "sha": "d2c4f3b5999f2b6dc0f98d57015f5e5dda1fcb6e",
    "filename": "app/src/main/java/by/realovka/web/app/servlet/StudentMarksServlet.java",
    "status": "removed",
    "additions": 0,
    "deletions": 40,
    "changes": 40,
    "blob_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/blob/db2c3e0295016e2f86fa123896e5c6165f52c10b/app/src/main/java/by/realovka/web/app/servlet/StudentMarksServlet.java",
    "raw_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/raw/db2c3e0295016e2f86fa123896e5c6165f52c10b/app/src/main/java/by/realovka/web/app/servlet/StudentMarksServlet.java",
    "contents_url": "https://api.github.com/repos/Realovka/Project-by-servlets-It-Academy/contents/app/src/main/java/by/realovka/web/app/servlet/StudentMarksServlet.java?ref=db2c3e0295016e2f86fa123896e5c6165f52c10b",
    "patch": "@@ -1,40 +0,0 @@\n-package by.realovka.web.app.servlet;\n-\n-import by.realovka.web.dao.model.Student;\n-import by.realovka.web.dao.repository.UserRepository;\n-import by.realovka.web.dao.repository.UserRepositoryImpl;\n-import by.realovka.web.service.UserService;\n-import by.realovka.web.service.UserServiceImpl;\n-import org.slf4j.Logger;\n-import org.slf4j.LoggerFactory;\n-\n-import javax.servlet.ServletException;\n-import javax.servlet.annotation.WebServlet;\n-import javax.servlet.http.HttpServlet;\n-import javax.servlet.http.HttpServletRequest;\n-import javax.servlet.http.HttpServletResponse;\n-import java.io.IOException;\n-\n-@WebServlet(urlPatterns = \"/marks\")\n-public class StudentMarksServlet extends HttpServlet {\n-    private UserRepository userRepository;\n-\n-    private UserService userService;\n-\n-    Logger log = LoggerFactory.getLogger(TrainerAddStudentServlet.class);\n-\n-    @Override\n-    public void init() throws ServletException {\n-        userRepository = UserRepositoryImpl.getInstance();\n-        userService = UserServiceImpl.getInstance(userRepository);\n-    }\n-\n-    @Override\n-    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n-        Student user = (Student) req.getSession().getAttribute(\"userAuth\");\n-        Student student = userService.getStudentByLogin(user.getLogin());\n-        log.info(\"student = {}\", student);\n-        req.getSession().setAttribute(\"studentTheme\", student.getThemes());\n-        req.getRequestDispatcher(\"/mainStudent.jsp\").forward(req, resp);\n-    }\n-}"
  },
  {
    "sha": "546805467abf89d1608937cd20233a59963ab23a",
    "filename": "app/src/main/java/by/realovka/web/app/servlet/TrainerAddStudentServlet.java",
    "status": "modified",
    "additions": 15,
    "deletions": 23,
    "changes": 38,
    "blob_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/blob/485c11444b72356faf1975a065e86637ffa68248/app/src/main/java/by/realovka/web/app/servlet/TrainerAddStudentServlet.java",
    "raw_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/raw/485c11444b72356faf1975a065e86637ffa68248/app/src/main/java/by/realovka/web/app/servlet/TrainerAddStudentServlet.java",
    "contents_url": "https://api.github.com/repos/Realovka/Project-by-servlets-It-Academy/contents/app/src/main/java/by/realovka/web/app/servlet/TrainerAddStudentServlet.java?ref=485c11444b72356faf1975a065e86637ffa68248",
    "patch": "@@ -1,42 +1,34 @@\n package by.realovka.web.app.servlet;\n \n+import by.realovka.web.dao.model.Student;\n import by.realovka.web.dao.model.Trainer;\n-import by.realovka.web.dao.repository.UserRepository;\n-import by.realovka.web.dao.repository.UserRepositoryImpl;\n-import by.realovka.web.service.UserService;\n-import by.realovka.web.service.UserServiceImpl;\n-import org.slf4j.Logger;\n-import org.slf4j.LoggerFactory;\n+import by.realovka.web.service.service.UserService;\n+import by.realovka.web.service.service.UserServiceImpl;\n+import lombok.extern.slf4j.Slf4j;\n \n import javax.servlet.ServletException;\n import javax.servlet.annotation.WebServlet;\n import javax.servlet.http.HttpServlet;\n import javax.servlet.http.HttpServletRequest;\n import javax.servlet.http.HttpServletResponse;\n import java.io.IOException;\n+import java.util.List;\n \n+@Slf4j\n @WebServlet(urlPatterns = \"/addStudent\")\n public class TrainerAddStudentServlet extends HttpServlet {\n \n-    private UserRepository userRepository;\n-\n-    private UserService userService;\n-\n-    Logger log = LoggerFactory.getLogger(TrainerAddStudentServlet.class);\n-\n-    @Override\n-    public void init() throws ServletException {\n-        userRepository = UserRepositoryImpl.getInstance();\n-        userService = UserServiceImpl.getInstance(userRepository);\n-    }\n+    private final UserService userService = UserServiceImpl.getInstance();\n \n     @Override\n     protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n-        String studentName = req.getParameter(\"student\");\n-        Trainer trainer = (Trainer) req.getSession().getAttribute(\"userAuth\");\n-        Trainer trainerAndHisStudents = userService.addStudentToTrainer(trainer, studentName);\n-        log.info(\"trainerAndHisStudents = {}\", trainerAndHisStudents);\n-        req.getSession().setAttribute(\"listStudentsForTrainer\", trainerAndHisStudents.getStudents());\n-        resp.sendRedirect(\"/listAllStudents.jsp\");\n+        Long studentId = Long.parseLong(req.getParameter(\"studentId\"));\n+        Trainer auth = (Trainer) req.getSession().getAttribute(\"userAuth\");\n+        auth = userService.addStudentToGroup(auth, studentId);\n+        List<Student> students = auth.getGroup().getStudents();\n+        req.getSession().setAttribute(\"listStudents\", students);\n+        log.info(\"trainerAndHisStudents = {}\", auth);\n+        req.getRequestDispatcher(\"/listAllStudents.jsp\").forward(req, resp);\n+\n     }\n }"
  },
  {
    "sha": "c6451fbf8fb418838ec3a9dde255f3fce25404e4",
    "filename": "app/src/main/java/by/realovka/web/app/servlet/TrainerMainServlet.java",
    "status": "added",
    "additions": 36,
    "deletions": 0,
    "changes": 36,
    "blob_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/blob/485c11444b72356faf1975a065e86637ffa68248/app/src/main/java/by/realovka/web/app/servlet/TrainerMainServlet.java",
    "raw_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/raw/485c11444b72356faf1975a065e86637ffa68248/app/src/main/java/by/realovka/web/app/servlet/TrainerMainServlet.java",
    "contents_url": "https://api.github.com/repos/Realovka/Project-by-servlets-It-Academy/contents/app/src/main/java/by/realovka/web/app/servlet/TrainerMainServlet.java?ref=485c11444b72356faf1975a065e86637ffa68248",
    "patch": "@@ -0,0 +1,36 @@\n+package by.realovka.web.app.servlet;\n+\n+import by.realovka.web.dao.model.Student;\n+import by.realovka.web.dao.model.Trainer;\n+import by.realovka.web.service.service.UserService;\n+import by.realovka.web.service.service.UserServiceImpl;\n+import lombok.extern.slf4j.Slf4j;\n+\n+import javax.servlet.ServletException;\n+import javax.servlet.annotation.WebServlet;\n+import javax.servlet.http.HttpServlet;\n+import javax.servlet.http.HttpServletRequest;\n+import javax.servlet.http.HttpServletResponse;\n+import javax.servlet.http.HttpSession;\n+import java.io.IOException;\n+import java.util.List;\n+\n+@Slf4j\n+@WebServlet(urlPatterns = \"/trainerAndHisStudents\")\n+public class TrainerMainServlet extends HttpServlet {\n+\n+    private final UserService userService = UserServiceImpl.getInstance();\n+\n+    @Override\n+    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n+        HttpSession session = req.getSession();\n+        Trainer auth = (Trainer) session.getAttribute(\"userAuth\");\n+        Trainer trainer = userService.getById(auth.getId());\n+        if (trainer.getGroup() != null) {\n+            List<Student> students = trainer.getGroup().getStudents();\n+            req.getSession().setAttribute(\"listStudents\", students);\n+        }\n+        log.info(\"Auth trainer = {}\", auth);\n+        req.getRequestDispatcher(\"/mainTrainer.jsp\").forward(req, resp);\n+    }\n+}"
  },
  {
    "sha": "3d1c72f8f504956320fafad0ce6c238978daee3c",
    "filename": "app/src/main/java/by/realovka/web/app/servlet/TrainerSalaryServlet.java",
    "status": "added",
    "additions": 19,
    "deletions": 0,
    "changes": 19,
    "blob_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/blob/485c11444b72356faf1975a065e86637ffa68248/app/src/main/java/by/realovka/web/app/servlet/TrainerSalaryServlet.java",
    "raw_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/raw/485c11444b72356faf1975a065e86637ffa68248/app/src/main/java/by/realovka/web/app/servlet/TrainerSalaryServlet.java",
    "contents_url": "https://api.github.com/repos/Realovka/Project-by-servlets-It-Academy/contents/app/src/main/java/by/realovka/web/app/servlet/TrainerSalaryServlet.java?ref=485c11444b72356faf1975a065e86637ffa68248",
    "patch": "@@ -0,0 +1,19 @@\n+package by.realovka.web.app.servlet;\n+\n+import javax.servlet.ServletException;\n+import javax.servlet.annotation.WebServlet;\n+import javax.servlet.http.HttpServlet;\n+import javax.servlet.http.HttpServletRequest;\n+import javax.servlet.http.HttpServletResponse;\n+import java.io.IOException;\n+\n+@WebServlet(urlPatterns = \"/choiceTrainer\")\n+public class TrainerSalaryServlet extends HttpServlet {\n+\n+    @Override\n+    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n+        String trainerId = req.getParameter(\"trainerId\");\n+        req.getSession().setAttribute(\"trainerId\", trainerId);\n+        req.getRequestDispatcher(\"addSalary.jsp\").forward(req, resp);\n+    }\n+}"
  },
  {
    "sha": "9af20d65e04c1935007febf055328beae88ccf50",
    "filename": "app/src/main/java/by/realovka/web/app/servlet/UpdateMarkServlet.java",
    "status": "removed",
    "additions": 0,
    "deletions": 54,
    "changes": 54,
    "blob_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/blob/db2c3e0295016e2f86fa123896e5c6165f52c10b/app/src/main/java/by/realovka/web/app/servlet/UpdateMarkServlet.java",
    "raw_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/raw/db2c3e0295016e2f86fa123896e5c6165f52c10b/app/src/main/java/by/realovka/web/app/servlet/UpdateMarkServlet.java",
    "contents_url": "https://api.github.com/repos/Realovka/Project-by-servlets-It-Academy/contents/app/src/main/java/by/realovka/web/app/servlet/UpdateMarkServlet.java?ref=db2c3e0295016e2f86fa123896e5c6165f52c10b",
    "patch": "@@ -1,54 +0,0 @@\n-package by.realovka.web.app.servlet;\n-\n-import by.realovka.web.dao.model.Student;\n-import by.realovka.web.dao.model.Trainer;\n-import by.realovka.web.dao.repository.UserRepository;\n-import by.realovka.web.dao.repository.UserRepositoryImpl;\n-import by.realovka.web.service.UserService;\n-import by.realovka.web.service.UserServiceImpl;\n-import org.slf4j.Logger;\n-import org.slf4j.LoggerFactory;\n-\n-import javax.servlet.ServletException;\n-import javax.servlet.annotation.WebServlet;\n-import javax.servlet.http.HttpServlet;\n-import javax.servlet.http.HttpServletRequest;\n-import javax.servlet.http.HttpServletResponse;\n-import java.io.IOException;\n-import java.util.List;\n-\n-@WebServlet (urlPatterns = \"/updateMark\")\n-public class UpdateMarkServlet extends HttpServlet {\n-\n-    private UserService userService;\n-\n-    private UserRepository userRepository;\n-\n-    private final static Logger log = LoggerFactory.getLogger(RegistrationServlet.class);\n-\n-\n-    @Override\n-    public void init() throws ServletException {\n-        userRepository = UserRepositoryImpl.getInstance();\n-        userService = UserServiceImpl.getInstance(userRepository);\n-    }\n-\n-    @Override\n-    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n-        Trainer trainer = (Trainer) req.getSession().getAttribute(\"userAuth\");\n-        String studentLogin = req.getParameter(\"student\");\n-        String theme = req.getParameter(\"theme\");\n-        Integer mark = null;\n-        try {\n-            mark = Integer.parseInt(req.getParameter(\"mark\"));\n-        } catch (NumberFormatException e) {\n-            req.getServletContext().setAttribute(\"massageFormatOfMarkIsWrong\", \"Format of mark is wrong!\");\n-            req.getRequestDispatcher(\"/updateMark.jsp\").forward(req, resp);\n-            return;\n-        }\n-        List<Student> students = userService.addOrUpdateMarkToStudent(trainer, studentLogin, theme, mark);\n-        log.info(\"Students = {}\", students);\n-        req.getSession().setAttribute(\"listStudentsForTrainer\", students);\n-        req.getRequestDispatcher(\"mainTrainer.jsp\").forward(req, resp);\n-    }\n-}"
  },
  {
    "sha": "91508eb14f4ad34fc81b0f5864cf5def018b4dbd",
    "filename": "app/src/main/resources/hibernate.cfg.xml",
    "status": "added",
    "additions": 46,
    "deletions": 0,
    "changes": 46,
    "blob_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/blob/485c11444b72356faf1975a065e86637ffa68248/app/src/main/resources/hibernate.cfg.xml",
    "raw_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/raw/485c11444b72356faf1975a065e86637ffa68248/app/src/main/resources/hibernate.cfg.xml",
    "contents_url": "https://api.github.com/repos/Realovka/Project-by-servlets-It-Academy/contents/app/src/main/resources/hibernate.cfg.xml?ref=485c11444b72356faf1975a065e86637ffa68248",
    "patch": "@@ -0,0 +1,46 @@\n+\n+<!DOCTYPE hibernate-configuration PUBLIC\n+        \"-//Hibernate/Hibernate Configuration DTD 3.0//EN\"\n+        \"http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd\">\n+<hibernate-configuration>\n+    <session-factory>\n+        <!-- JDBC Database connection settings -->\n+        <property name=\"connection.driver_class\">org.postgresql.Driver</property>\n+        <property name=\"connection.url\">jdbc:postgresql://localhost:5432/postgres</property>\n+        <property name=\"connection.username\">postgres</property>\n+        <property name=\"connection.password\">Vorobei55</property>\n+        <!-- JDBC connection pool settings ... using built-in test pool -->\n+        <property name=\"connection.pool_size\">20</property>\n+        <!-- Select our SQL dialect -->\n+        <property name=\"dialect\">org.hibernate.dialect.PostgreSQL10Dialect</property>\n+        <!-- Echo the SQL to stdout -->\n+        <property name=\"show_sql\">true</property>\n+        <!-- Set the current session context -->\n+        <property name=\"current_session_context_class\">thread</property>\n+        <!-- Drop and re-create the database schema on startup -->\n+        <property name=\"hbm2ddl.auto\">none</property>\n+        <!-- dbcp connection pool configuration -->\n+        <property name=\"hibernate.dbcp.initialSize\">5</property>\n+        <property name=\"hibernate.dbcp.maxTotal\">20</property>\n+        <property name=\"hibernate.dbcp.maxIdle\">10</property>\n+        <property name=\"hibernate.dbcp.minIdle\">5</property>\n+        <property name=\"hibernate.dbcp.maxWaitMillis\">-1</property>\n+        <property name=\"hibernate.enable_lazy_load_no_trans\">true</property>\n+        <property name=\"hibernate.jdbc.batch_size\">5</property>\n+        <property name=\"hibernate.order_updates\">true</property>\n+        <property name=\"hibernate.order_inserts\">true</property>\n+        <property name=\"hibernate.generate_statistics\">true</property>\n+\n+        <mapping class=\"by.realovka.web.dao.model.User\"/>\n+        <mapping class=\"by.realovka.web.dao.model.Student\"/>\n+        <mapping class=\"by.realovka.web.dao.model.Trainer\"/>\n+        <mapping class=\"by.realovka.web.dao.model.Admin\"/>\n+        <mapping class=\"by.realovka.web.dao.model.Role\"/>\n+        <mapping class=\"by.realovka.web.dao.model.Group\"/>\n+        <mapping class=\"by.realovka.web.dao.model.Theme\"/>\n+        <mapping class=\"by.realovka.web.dao.model.TrainerWithSalary\"/>\n+        <mapping class=\"by.realovka.web.dao.model.Salary\"/>\n+\n+\n+    </session-factory>\n+</hibernate-configuration>\n\\ No newline at end of file"
  },
  {
    "sha": "dda1240ed457ed4427099b65b6a22a5f37d81a05",
    "filename": "app/src/main/webapp/WEB-INF/web.xml",
    "status": "added",
    "additions": 18,
    "deletions": 0,
    "changes": 18,
    "blob_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/blob/485c11444b72356faf1975a065e86637ffa68248/app/src/main/webapp/WEB-INF/web.xml",
    "raw_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/raw/485c11444b72356faf1975a065e86637ffa68248/app/src/main/webapp/WEB-INF/web.xml",
    "contents_url": "https://api.github.com/repos/Realovka/Project-by-servlets-It-Academy/contents/app/src/main/webapp/WEB-INF/web.xml?ref=485c11444b72356faf1975a065e86637ffa68248",
    "patch": "@@ -0,0 +1,18 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<web-app xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xmlns=\"http://java.sun.com/xml/ns/j2ee\"\n+         xmlns:web=\"http://xmlns.jcp.org/xml/ns/javaee\"\n+         xsi:schemaLocation=\"http://xmlns.jcp.org/xml/ns/javaee\n+                             http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\n+                             http://java.sun.com/xml/ns/j2ee\n+                             http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd\"\n+         id=\"WebApp_9\" version=\"2.4\">\n+    <filter-mapping>\n+        <filter-name>sessionFilter</filter-name>\n+        <url-pattern>/index.jsp</url-pattern>\n+    </filter-mapping>\n+    <filter-mapping>\n+        <filter-name>authFilter</filter-name>\n+        <url-pattern>/mainAdmin.jsp;/mainTrainer.jsp;/mainStudent.jsp</url-pattern>\n+    </filter-mapping>\n+</web-app>\n\\ No newline at end of file"
  },
  {
    "sha": "db0658cff08467ec0da0e944874bea51ea86de40",
    "filename": "app/src/main/webapp/addSalary.jsp",
    "status": "added",
    "additions": 16,
    "deletions": 0,
    "changes": 16,
    "blob_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/blob/485c11444b72356faf1975a065e86637ffa68248/app/src/main/webapp/addSalary.jsp",
    "raw_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/raw/485c11444b72356faf1975a065e86637ffa68248/app/src/main/webapp/addSalary.jsp",
    "contents_url": "https://api.github.com/repos/Realovka/Project-by-servlets-It-Academy/contents/app/src/main/webapp/addSalary.jsp?ref=485c11444b72356faf1975a065e86637ffa68248",
    "patch": "@@ -0,0 +1,16 @@\n+<%@ page contentType=\"text/html;charset=UTF-8\" language=\"java\" %>\n+<%@taglib prefix=\"c\" uri=\"http://java.sun.com/jsp/jstl/core\" %>\n+<html>\n+<head>\n+    <title>Addition Salary</title>\n+</head>\n+<body>\n+<h2 style=\"color: mediumblue\">Add Next Salary</h2>\n+<form action=\"/addSalary\" method=\"post\">\n+    <input type=\"text\" name=\"salary\" placeholder=\"Salary\">\n+    <button>Submit</button>\n+</form>\n+<a href=\"mainAdmin.jsp\">Main page</a><br>\n+<a href=\"/logout\">Logout</a>\n+</body>\n+</html>"
  },
  {
    "sha": "41f2dca191ccfce50b9b82294e9ce1c0a0c7c882",
    "filename": "app/src/main/webapp/addTrainer.jsp",
    "status": "added",
    "additions": 19,
    "deletions": 0,
    "changes": 19,
    "blob_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/blob/485c11444b72356faf1975a065e86637ffa68248/app/src/main/webapp/addTrainer.jsp",
    "raw_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/raw/485c11444b72356faf1975a065e86637ffa68248/app/src/main/webapp/addTrainer.jsp",
    "contents_url": "https://api.github.com/repos/Realovka/Project-by-servlets-It-Academy/contents/app/src/main/webapp/addTrainer.jsp?ref=485c11444b72356faf1975a065e86637ffa68248",
    "patch": "@@ -0,0 +1,19 @@\n+<%@ page contentType=\"text/html;charset=UTF-8\" language=\"java\" %>\n+<%@taglib prefix=\"c\" uri=\"http://java.sun.com/jsp/jstl/core\" %>\n+<html>\n+<head>\n+    <title>Addition Trainer</title>\n+</head>\n+<body>\n+<h2 style=\"color: mediumblue\">Enter new trainer</h2>\n+<h2 style=\"color: red\">${sessionScope.suchTrainerAlreadyExist}</h2>\n+<form action=\"/addTrainer\" method=\"post\">\n+\n+    <input type=\"text\" name=\"trainerName\" placeholder=\"Trainer name\"/><br>\n+\n+    <button type=\"submit\"> Submit </button>\n+</form>\n+<a href=\"mainAdmin.jsp\">Main page</a><br>\n+<a href=\"/logout\">Logout</a>\n+</body>\n+</html>"
  },
  {
    "sha": "d9e7bcb471bae9bc556ad7384139a48bbaf6c2c0",
    "filename": "app/src/main/webapp/answerAverageSalary.jsp",
    "status": "added",
    "additions": 13,
    "deletions": 0,
    "changes": 13,
    "blob_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/blob/485c11444b72356faf1975a065e86637ffa68248/app/src/main/webapp/answerAverageSalary.jsp",
    "raw_url": "https://github.com/Realovka/Project-by-servlets-It-Academy/raw/485c11444b72356faf1975a065e86637ffa68248/app/src/main/webapp/answerAverageSalary.jsp",
    "contents_url": "https://api.github.com/repos/Realovka/Project-by-servlets-It-Academy/contents/app/src/main/webapp/answerAverageSalary.jsp?ref=485c11444b72356faf1975a065e86637ffa68248",
    "patch": "@@ -0,0 +1,13 @@\n+<%@ page contentType=\"text/html;charset=UTF-8\" language=\"java\" %>\n+<%@taglib prefix=\"c\" uri=\"http://java.sun.com/jsp/jstl/core\" %>\n+<html>\n+<head>\n+    <title>Average Salary </title>\n+</head>\n+<body>\n+<h2 style=\"color: mediumblue\">Answer about trainer average salary</h2>\n+<label>Average salary of trainer ${sessionScope.trainerWithHisAverageSalary.name} is ${sessionScope.trainerWithHisAverageSalary.averageSalary}</label><br>\n+</body>\n+<a href=\"mainAdmin.jsp\">Main page</a><br>\n+<a href=\"/logout\">Logout</a>\n+</html>"
  }
]
