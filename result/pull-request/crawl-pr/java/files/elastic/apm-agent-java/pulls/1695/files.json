[
  {
    "sha": "98a2964a47f1aacbd603052de2887b22ccaebfb8",
    "filename": "apm-agent-core/src/test/resources/specs/azure_app_service_metadata.feature",
    "status": "added",
    "additions": 71,
    "deletions": 0,
    "changes": 71,
    "blob_url": "https://github.com/elastic/apm-agent-java/blob/da60539f599b1c3ba1a73e095388e310ae285abe/apm-agent-core/src/test/resources/specs/azure_app_service_metadata.feature",
    "raw_url": "https://github.com/elastic/apm-agent-java/raw/da60539f599b1c3ba1a73e095388e310ae285abe/apm-agent-core/src/test/resources/specs/azure_app_service_metadata.feature",
    "contents_url": "https://api.github.com/repos/elastic/apm-agent-java/contents/apm-agent-core/src/test/resources/specs/azure_app_service_metadata.feature?ref=da60539f599b1c3ba1a73e095388e310ae285abe",
    "patch": "@@ -0,0 +1,71 @@\n+Feature: Extracting Metadata for Azure App Service\n+\n+  Background:\n+    Given an instrumented application is configured to collect cloud provider metadata for azure\n+\n+  Scenario Outline: Azure App Service with all environment variables present in expected format\n+    Given the following environment variables are present\n+      | name                   | value                |\n+      | WEBSITE_OWNER_NAME     | <WEBSITE_OWNER_NAME> |\n+      | WEBSITE_RESOURCE_GROUP | resource_group       |\n+      | WEBSITE_SITE_NAME      | site_name            |\n+      | WEBSITE_INSTANCE_ID    | instance_id          |\n+    When cloud metadata is collected\n+    Then cloud metadata is not null\n+    And cloud metadata 'account.id' is 'f5940f10-2e30-3e4d-a259-63451ba6dae4'\n+    And cloud metadata 'provider' is 'azure'\n+    And cloud metadata 'instance.id' is 'instance_id'\n+    And cloud metadata 'instance.name' is 'site_name'\n+    And cloud metadata 'project.name' is 'resource_group'\n+    And cloud metadata 'region' is 'AustraliaEast'\n+    Examples:\n+      | WEBSITE_OWNER_NAME                                                                          |\n+      | f5940f10-2e30-3e4d-a259-63451ba6dae4+elastic-apm-AustraliaEastwebspace                      |\n+      | f5940f10-2e30-3e4d-a259-63451ba6dae4+appsvc_linux_australiaeast-AustraliaEastwebspace-Linux |\n+\n+  # WEBSITE_OWNER_NAME is expected to include a + character\n+  Scenario: WEBSITE_OWNER_NAME environment variable not expected format\n+    Given the following environment variables are present\n+    | name                   | value                                                                  |\n+    | WEBSITE_OWNER_NAME     | f5940f10-2e30-3e4d-a259-63451ba6dae4-elastic-apm-AustraliaEastwebspace |\n+    | WEBSITE_RESOURCE_GROUP | resource_group                                                         |\n+    | WEBSITE_SITE_NAME      | site_name                                                              |\n+    | WEBSITE_INSTANCE_ID    | instance_id                                                            |\n+    When cloud metadata is collected\n+    Then cloud metadata is null\n+\n+  Scenario: Missing WEBSITE_OWNER_NAME environment variable\n+    Given the following environment variables are present\n+    | name                   | value                                                                  |\n+    | WEBSITE_RESOURCE_GROUP | resource_group                                                         |\n+    | WEBSITE_SITE_NAME      | site_name                                                              |\n+    | WEBSITE_INSTANCE_ID    | instance_id                                                            |\n+    When cloud metadata is collected\n+    Then cloud metadata is null\n+\n+  Scenario: Missing WEBSITE_RESOURCE_GROUP environment variable\n+    Given the following environment variables are present\n+    | name                   | value                                                                  |\n+    | WEBSITE_OWNER_NAME     | f5940f10-2e30-3e4d-a259-63451ba6dae4+elastic-apm-AustraliaEastwebspace |\n+    | WEBSITE_SITE_NAME      | site_name                                                              |\n+    | WEBSITE_INSTANCE_ID    | instance_id                                                            |\n+    When cloud metadata is collected\n+    Then cloud metadata is null\n+\n+  Scenario: Missing WEBSITE_SITE_NAME environment variable\n+    Given the following environment variables are present\n+    | name                   | value                                                                  |\n+    | WEBSITE_OWNER_NAME     | f5940f10-2e30-3e4d-a259-63451ba6dae4+elastic-apm-AustraliaEastwebspace |\n+    | WEBSITE_RESOURCE_GROUP | resource_group                                                         |\n+    | WEBSITE_INSTANCE_ID    | instance_id                                                            |\n+    When cloud metadata is collected\n+    Then cloud metadata is null\n+\n+  Scenario: Missing WEBSITE_INSTANCE_ID environment variable\n+    Given the following environment variables are present\n+    | name                   | value                                                                  |\n+    | WEBSITE_OWNER_NAME     | f5940f10-2e30-3e4d-a259-63451ba6dae4+elastic-apm-AustraliaEastwebspace |\n+    | WEBSITE_RESOURCE_GROUP | resource_group                                                         |\n+    | WEBSITE_SITE_NAME      | site_name                                                              |\n+    When cloud metadata is collected\n+    Then cloud metadata is null\n\\ No newline at end of file"
  }
]
