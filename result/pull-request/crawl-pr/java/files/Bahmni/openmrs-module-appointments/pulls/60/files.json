[
  {
    "sha": "9f4e7ef7eb7e95b9a465da681e240b8998f48871",
    "filename": "api/src/main/resources/patientUpcomingAppointments_v2.sql",
    "status": "modified",
    "additions": 5,
    "deletions": 3,
    "changes": 8,
    "blob_url": "https://github.com/Bahmni/openmrs-module-appointments/blob/08bfe83f6ef2dece06b2467257833a1fab790c4b/api/src/main/resources/patientUpcomingAppointments_v2.sql",
    "raw_url": "https://github.com/Bahmni/openmrs-module-appointments/raw/08bfe83f6ef2dece06b2467257833a1fab790c4b/api/src/main/resources/patientUpcomingAppointments_v2.sql",
    "contents_url": "https://api.github.com/repos/Bahmni/openmrs-module-appointments/contents/api/src/main/resources/patientUpcomingAppointments_v2.sql?ref=08bfe83f6ef2dece06b2467257833a1fab790c4b",
    "patch": "@@ -1,21 +1,23 @@\n UPDATE global_property\n SET property_value= \"SELECT\n-  app_service.uuid,\n+  pa.uuid,\n   app_service.name                                                                                AS `DASHBOARD_APPOINTMENTS_SERVICE_KEY`,\n   app_service_type.name                                                                           AS `DASHBOARD_APPOINTMENTS_SERVICE_TYPE_KEY`,\n   DATE_FORMAT(start_date_time, \\\"%d/%m/%Y\\\")                                                        AS `DASHBOARD_APPOINTMENTS_DATE_KEY`,\n   CONCAT(DATE_FORMAT(start_date_time, \\\"%l:%i %p\\\"), \\\" - \\\", DATE_FORMAT(end_date_time, \\\"%l:%i %p\\\")) AS `DASHBOARD_APPOINTMENTS_SLOT_KEY`,\n   CONCAT(pn.given_name, ' ', pn.family_name)                                                      AS `DASHBOARD_APPOINTMENTS_PROVIDER_KEY`,\n   pa.status                                                                                       AS `DASHBOARD_APPOINTMENTS_STATUS_KEY`,\n-  pa.teleconsultation                                                                             AS `DASHBOARD_APPOINTMENTS_TELECONSULTATION`\n+  pa.teleconsultation                                                                             AS `DASHBOARD_APPOINTMENTS_TELECONSULTATION`,\n+  start_date_time                                                                                 AS `DASHBOARD_APPOINTMENTS_START_DATE_KEY`,\n+  end_date_time                                                                                   AS `DASHBOARD_APPOINTMENTS_END_DATE_KEY`\n \n FROM\n   patient_appointment pa\n   JOIN person p ON p.person_id = pa.patient_id AND pa.voided IS FALSE\n   JOIN appointment_service app_service\n     ON app_service.appointment_service_id = pa.appointment_service_id AND app_service.voided IS FALSE\n   LEFT JOIN patient_appointment_provider pap on pa.patient_appointment_id = pap.patient_appointment_id AND (pap.voided=0 OR pap.voided IS NULL)\n-  LEFT JOIN provider prov ON prov.provider_id = pa.provider_id AND prov.retired IS FALSE\n+  LEFT JOIN provider prov ON prov.provider_id = pap.provider_id AND prov.retired IS FALSE\n   LEFT JOIN person_name pn ON pn.person_id = prov.person_id AND pn.voided IS FALSE\n   LEFT JOIN appointment_service_type app_service_type\n     ON app_service_type.appointment_service_type_id = pa.appointment_service_type_id"
  }
]
