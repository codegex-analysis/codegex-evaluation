[
  {
    "sha": "5373ed20ec7eb8a97902a0efd4c53731392dc017",
    "filename": "src/main/java/vazkii/quark/content/management/module/ItemSharingModule.java",
    "status": "modified",
    "additions": 15,
    "deletions": 10,
    "changes": 25,
    "blob_url": "https://github.com/Vazkii/Quark/blob/488ee40f207590a8777edb571a1aeee515e5155e/src/main/java/vazkii/quark/content/management/module/ItemSharingModule.java",
    "raw_url": "https://github.com/Vazkii/Quark/raw/488ee40f207590a8777edb571a1aeee515e5155e/src/main/java/vazkii/quark/content/management/module/ItemSharingModule.java",
    "contents_url": "https://api.github.com/repos/Vazkii/Quark/contents/src/main/java/vazkii/quark/content/management/module/ItemSharingModule.java?ref=488ee40f207590a8777edb571a1aeee515e5155e",
    "patch": "@@ -32,6 +32,7 @@\n import net.minecraft.item.ItemStack;\n import net.minecraft.network.play.ServerPlayNetHandler;\n import net.minecraft.server.management.PlayerList;\n+import net.minecraft.util.IReorderingProcessor;\n import net.minecraft.util.math.MathHelper;\n import net.minecraft.util.text.ChatType;\n import net.minecraft.util.text.IFormattableTextComponent;\n@@ -154,33 +155,37 @@ public void renderSymbols(RenderGameOverlayEvent.Post event) {\n \t\tNewChatGui chatGui = gameGui.getChatGUI();\n \t\tif (event.getType() == RenderGameOverlayEvent.ElementType.CHAT) {\n \t\t\tint updateCounter = gameGui.getTicks();\n-\t\t\tList<ChatLine<ITextComponent>> lines = chatGui.chatLines;\n+\t\t\tList<ChatLine<IReorderingProcessor>> lines = chatGui.drawnChatLines;\n \t\t\tint shift = chatGui.scrollPos;\n \n \t\t\tint idx = shift;\n \n \t\t\twhile (idx < lines.size() && (idx - shift) < chatGui.getLineCount()) {\n-\t\t\t\tChatLine<ITextComponent> line = lines.get(idx);\n+\t\t\t\tChatLine<IReorderingProcessor> line = lines.get(idx);\n \t\t\t\tStringBuilder before = new StringBuilder();\n \n-\t\t\t\tITextComponent lineProperties = line.getLineString();\n+\t\t\t\tIReorderingProcessor lineProperties = line.getLineString();\n \n \t\t\t\tint captureIndex = idx;\n-\t\t\t\tlineProperties.getComponentWithStyle((style, str) -> {\n-\t\t\t\t\tif (str != null && str.startsWith(\"   \")) {\n-\t\t\t\t\t\trender(mc, chatGui, updateCounter, before.toString(), line, captureIndex - shift, style, str);\n+\t\t\t\t// TODO: This patch gets stuff working,\n+\t\t\t\t// but we probably want to find a better way to detect the position.\n+\t\t\t\tlineProperties.accept((counter_, style, character) -> {\n+\t\t\t\t\tString sofar = before.toString();\n+\t\t\t\t\tif (sofar.endsWith(\"    \")) {\n+\t\t\t\t\t\trender(mc, chatGui, updateCounter, sofar.substring(0, sofar.length() - 3), line, captureIndex - shift, style);\n+\t\t\t\t\t\treturn false;\n \t\t\t\t\t}\n-\t\t\t\t\tbefore.append(str);\n-\t\t\t\t\treturn Optional.empty();\n-\t\t\t\t}, lineProperties.getStyle());\n+\t\t\t\t\tbefore.append((char) character);\n+\t\t\t\t\treturn true;\n+\t\t\t\t});\n \n \t\t\t\tidx++;\n \t\t\t}\n \t\t}\n \t}\n \n \t@OnlyIn(Dist.CLIENT)\n-\tprivate static void render(Minecraft mc, NewChatGui chatGui, int updateCounter, String before, ChatLine<ITextComponent> line, int lineHeight, Style style, String str) {\n+\tprivate static void render(Minecraft mc, NewChatGui chatGui, int updateCounter, String before, ChatLine<IReorderingProcessor> line, int lineHeight, Style style) {\n \t\tHoverEvent hoverEvent = style.getHoverEvent();\n \t\tif (hoverEvent != null && hoverEvent.getAction() == HoverEvent.Action.SHOW_ITEM) {\n \t\t\tHoverEvent.ItemHover contents = hoverEvent.getParameter(HoverEvent.Action.SHOW_ITEM);"
  },
  {
    "sha": "e1e4aab1882069b55c0be8f9729e1f91c720499f",
    "filename": "src/main/resources/META-INF/accesstransformer.cfg",
    "status": "modified",
    "additions": 2,
    "deletions": 2,
    "changes": 4,
    "blob_url": "https://github.com/Vazkii/Quark/blob/488ee40f207590a8777edb571a1aeee515e5155e/src/main/resources/META-INF/accesstransformer.cfg",
    "raw_url": "https://github.com/Vazkii/Quark/raw/488ee40f207590a8777edb571a1aeee515e5155e/src/main/resources/META-INF/accesstransformer.cfg",
    "contents_url": "https://api.github.com/repos/Vazkii/Quark/contents/src/main/resources/META-INF/accesstransformer.cfg?ref=488ee40f207590a8777edb571a1aeee515e5155e",
    "patch": "@@ -12,7 +12,7 @@ public net.minecraft.client.gui.toasts.RecipeToast field_202906_c # recipes\n public-f net.minecraft.inventory.container.StonecutterContainer field_217084_c # ACCEPTED_INPUT_ITEMS\n public net.minecraft.block.DispenserBlock field_149943_a # DISPENSE_BEHAVIOR_REGISTRY\n public net.minecraft.network.play.ServerPlayNetHandler field_147374_l # chatSpamThresholdCount\n-public net.minecraft.client.gui.NewChatGui field_146252_h # chatLines\n+public net.minecraft.client.gui.NewChatGui field_146253_i # drawnChatLines\n public net.minecraft.client.gui.NewChatGui field_146250_j # scrollPos\n public net.minecraft.client.gui.NewChatGui func_146241_e()Z # getChatOpen\n public net.minecraft.client.renderer.ItemRenderer func_180452_a(IIZ)V # setupGuiTransform\n@@ -73,4 +73,4 @@ public net.minecraft.entity.projectile.TridentEntity func_184550_j()Lnet/minecra\n public net.minecraft.entity.monster.ZombieVillagerEntity field_223728_bB # gossips\n public net.minecraft.village.GossipManager field_220928_a # uuid_gossips_mapping\n public net.minecraft.village.GossipManager$Gossips\n-public net.minecraft.inventory.container.Container field_75149_d # listeners\n\\ No newline at end of file\n+public net.minecraft.inventory.container.Container field_75149_d # listeners"
  }
]
