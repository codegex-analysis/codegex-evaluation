[
  {
    "sha": "5239c23851f3b58768c5ba08a43fba7adbd85701",
    "filename": "Dockerfile",
    "status": "added",
    "additions": 13,
    "deletions": 0,
    "changes": 13,
    "blob_url": "https://github.com/link-it/govpay/blob/663d231e1fdd40c3d19f1e2dc4c83c98cd759840/Dockerfile",
    "raw_url": "https://github.com/link-it/govpay/raw/663d231e1fdd40c3d19f1e2dc4c83c98cd759840/Dockerfile",
    "contents_url": "https://api.github.com/repos/link-it/govpay/contents/Dockerfile?ref=663d231e1fdd40c3d19f1e2dc4c83c98cd759840",
    "patch": "@@ -0,0 +1,13 @@\n+FROM jboss/wildfly:18.0.1.Final\n+MAINTAINER Marco Spasiano <marco.spasiano@cnr.it>\n+\n+USER root\n+RUN mkdir -p /var/log/govpay;chown -R jboss:jboss /var/log/govpay\n+USER jboss\n+\n+COPY ./docker/standalone.xml /opt/jboss/wildfly/standalone/configuration/\n+COPY ./docker/postgresql/postgresql-9.2-1004.jdbc41.jar /opt/jboss/wildfly/modules/system/layers/base/org/postgresql/main/postgresql-9.2-1004.jdbc41.jar\n+COPY ./docker/postgresql/module.xml /opt/jboss/wildfly/modules/system/layers/base/org/postgresql/main/module.xml\n+COPY ./ear/target/govpay.ear /opt/jboss/wildfly/standalone/deployments/govpay.ear\n+\n+CMD [\"/opt/jboss/wildfly/bin/standalone.sh\", \"-b\", \"0.0.0.0\", \"-bmanagement\", \"0.0.0.0\", \"--server-config=standalone.xml\"]"
  },
  {
    "sha": "4ea10b18a1fbd82eb57d77c944f3acccaa456055",
    "filename": "docker-compose.yml",
    "status": "added",
    "additions": 26,
    "deletions": 0,
    "changes": 26,
    "blob_url": "https://github.com/link-it/govpay/blob/663d231e1fdd40c3d19f1e2dc4c83c98cd759840/docker-compose.yml",
    "raw_url": "https://github.com/link-it/govpay/raw/663d231e1fdd40c3d19f1e2dc4c83c98cd759840/docker-compose.yml",
    "contents_url": "https://api.github.com/repos/link-it/govpay/contents/docker-compose.yml?ref=663d231e1fdd40c3d19f1e2dc4c83c98cd759840",
    "patch": "@@ -0,0 +1,26 @@\n+version: '3.3'\n+\n+services:\n+\n+  govpay:\n+    image: govpay:latest\n+    ports:\n+      - 8080:8080\n+    links:\n+      - pggovpay:pggovpay\n+    depends_on:\n+      - pggovpay\n+\n+  pggovpay:\n+    image: postgres:9.2\n+    environment:\n+      - POSTGRES_PASSWORD=govpaypw\n+      - POSTGRES_USER=govpay\n+      - POSTGRES_DB=govpay\n+      - SCHEMA=govpay\n+      - PG_WORK_MEM=64MB\n+      - PG_MAINTENANCE_WORK_MEM=512MB\n+    command: postgres -c max_connections=300 -c log_min_messages=LOG -c 'shared_buffers=512MB'\n+    volumes:\n+      - ./pgdata:/var/lib/postgresql/data/\n+      - ./docker/initdb:/docker-entrypoint-initdb.d/"
  },
  {
    "sha": "b7f6b44aa18672628d0d8a6f8189681d07c2b736",
    "filename": "docker/README.md",
    "status": "added",
    "additions": 13,
    "deletions": 0,
    "changes": 13,
    "blob_url": "https://github.com/link-it/govpay/blob/663d231e1fdd40c3d19f1e2dc4c83c98cd759840/docker/README.md",
    "raw_url": "https://github.com/link-it/govpay/raw/663d231e1fdd40c3d19f1e2dc4c83c98cd759840/docker/README.md",
    "contents_url": "https://api.github.com/repos/link-it/govpay/contents/docker/README.md?ref=663d231e1fdd40c3d19f1e2dc4c83c98cd759840",
    "patch": "@@ -0,0 +1,13 @@\n+# GovPay - Docker\n+\n+GovPay può essere facilmente installato via docker su server Linux utilizzando il file Dockerfile presente in questo repository.\n+\n+I passi da seguire sono i seguenti dalla root del progetto:\n+- `mvn clean install -DskipTests`\n+- `docker build . --tag govpay:latest`\n+- `docker-compose up -d`\n+\n+L'applicazione sarà disponibile alla url http://localhost:8080/govpay/backend/gui/backoffice le credenzial di accesso i default sono:\n+\n+- Nome utente: **gpadmin**\n+- Password: **cambialaosarailicenziato**\n\\ No newline at end of file"
  },
  {
    "sha": "a1a041d25ca3efd90767adc8120aa381bbd3dfae",
    "filename": "docker/initdb/gov_pay.sql",
    "status": "added",
    "additions": 1877,
    "deletions": 0,
    "changes": 1877,
    "blob_url": "https://github.com/link-it/govpay/blob/663d231e1fdd40c3d19f1e2dc4c83c98cd759840/docker/initdb/gov_pay.sql",
    "raw_url": "https://github.com/link-it/govpay/raw/663d231e1fdd40c3d19f1e2dc4c83c98cd759840/docker/initdb/gov_pay.sql",
    "contents_url": "https://api.github.com/repos/link-it/govpay/contents/docker/initdb/gov_pay.sql?ref=663d231e1fdd40c3d19f1e2dc4c83c98cd759840",
    "patch": "@@ -0,0 +1,1877 @@\n+CREATE SEQUENCE seq_configurazione start 1 increment 1 maxvalue 9223372036854775807 minvalue 1 cache 1 NO CYCLE;\n+\n+CREATE TABLE configurazione\n+(\n+\tnome VARCHAR(255) NOT NULL,\n+\tvalore TEXT,\n+\t-- fk/pk columns\n+\tid BIGINT DEFAULT nextval('seq_configurazione') NOT NULL,\n+\t-- unique constraints\n+\tCONSTRAINT unique_configurazione_1 UNIQUE (nome),\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT pk_configurazione PRIMARY KEY (id)\n+);\n+\n+\n+\n+\n+CREATE SEQUENCE seq_intermediari start 1 increment 1 maxvalue 9223372036854775807 minvalue 1 cache 1 NO CYCLE;\n+\n+CREATE TABLE intermediari\n+(\n+\tcod_intermediario VARCHAR(35) NOT NULL,\n+\tcod_connettore_pdd VARCHAR(35) NOT NULL,\n+\tcod_connettore_ftp VARCHAR(35),\n+\tdenominazione VARCHAR(255) NOT NULL,\n+\tprincipal VARCHAR(4000) NOT NULL,\n+\tprincipal_originale VARCHAR(4000) NOT NULL,\n+\tabilitato BOOLEAN NOT NULL,\n+\t-- fk/pk columns\n+\tid BIGINT DEFAULT nextval('seq_intermediari') NOT NULL,\n+\t-- unique constraints\n+\tCONSTRAINT unique_intermediari_1 UNIQUE (cod_intermediario),\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT pk_intermediari PRIMARY KEY (id)\n+);\n+\n+\n+\n+\n+CREATE SEQUENCE seq_stazioni start 1 increment 1 maxvalue 9223372036854775807 minvalue 1 cache 1 NO CYCLE;\n+\n+CREATE TABLE stazioni\n+(\n+\tcod_stazione VARCHAR(35) NOT NULL,\n+\tpassword VARCHAR(35) NOT NULL,\n+\tabilitato BOOLEAN NOT NULL,\n+\tapplication_code INT NOT NULL,\n+\t-- fk/pk columns\n+\tid BIGINT DEFAULT nextval('seq_stazioni') NOT NULL,\n+\tid_intermediario BIGINT NOT NULL,\n+\t-- unique constraints\n+\tCONSTRAINT unique_stazioni_1 UNIQUE (cod_stazione),\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT fk_stz_id_intermediario FOREIGN KEY (id_intermediario) REFERENCES intermediari(id),\n+\tCONSTRAINT pk_stazioni PRIMARY KEY (id)\n+);\n+\n+\n+\n+\n+CREATE SEQUENCE seq_utenze start 1 increment 1 maxvalue 9223372036854775807 minvalue 1 cache 1 NO CYCLE;\n+\n+CREATE TABLE utenze\n+(\n+\tprincipal VARCHAR(4000) NOT NULL,\n+\tprincipal_originale VARCHAR(4000) NOT NULL,\n+\tabilitato BOOLEAN NOT NULL DEFAULT true,\n+\tautorizzazione_domini_star BOOLEAN NOT NULL DEFAULT false,\n+\tautorizzazione_tipi_vers_star BOOLEAN NOT NULL DEFAULT false,\n+\truoli VARCHAR(512),\n+\tpassword VARCHAR(255),\n+\t-- fk/pk columns\n+\tid BIGINT DEFAULT nextval('seq_utenze') NOT NULL,\n+\t-- unique constraints\n+\tCONSTRAINT unique_utenze_1 UNIQUE (principal),\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT pk_utenze PRIMARY KEY (id)\n+);\n+\n+\n+\n+\n+CREATE SEQUENCE seq_applicazioni start 1 increment 1 maxvalue 9223372036854775807 minvalue 1 cache 1 NO CYCLE;\n+\n+CREATE TABLE applicazioni\n+(\n+\tcod_applicazione VARCHAR(35) NOT NULL,\n+\tauto_iuv BOOLEAN NOT NULL,\n+\tfirma_ricevuta VARCHAR(1) NOT NULL,\n+\tcod_connettore_integrazione VARCHAR(255),\n+\ttrusted BOOLEAN NOT NULL,\n+\tcod_applicazione_iuv VARCHAR(3),\n+\treg_exp VARCHAR(1024),\n+\t-- fk/pk columns\n+\tid BIGINT DEFAULT nextval('seq_applicazioni') NOT NULL,\n+\tid_utenza BIGINT NOT NULL,\n+\t-- unique constraints\n+\tCONSTRAINT unique_applicazioni_1 UNIQUE (cod_applicazione),\n+\tCONSTRAINT unique_applicazioni_2 UNIQUE (id_utenza),\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT fk_app_id_utenza FOREIGN KEY (id_utenza) REFERENCES utenze(id),\n+\tCONSTRAINT pk_applicazioni PRIMARY KEY (id)\n+);\n+\n+\n+\n+\n+CREATE SEQUENCE seq_domini start 1 increment 1 maxvalue 9223372036854775807 minvalue 1 cache 1 NO CYCLE;\n+\n+CREATE TABLE domini\n+(\n+\tcod_dominio VARCHAR(35) NOT NULL,\n+\tgln VARCHAR(35),\n+\tabilitato BOOLEAN NOT NULL,\n+\tragione_sociale VARCHAR(70) NOT NULL,\n+\taux_digit INT NOT NULL DEFAULT 0,\n+\tiuv_prefix VARCHAR(255),\n+\tsegregation_code INT,\n+\tlogo BYTEA,\n+\tcbill VARCHAR(255),\n+\taut_stampa_poste VARCHAR(255),\n+\t-- fk/pk columns\n+\tid BIGINT DEFAULT nextval('seq_domini') NOT NULL,\n+\tid_stazione BIGINT NOT NULL,\n+\tid_applicazione_default BIGINT,\n+\t-- unique constraints\n+\tCONSTRAINT unique_domini_1 UNIQUE (cod_dominio),\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT fk_dom_id_stazione FOREIGN KEY (id_stazione) REFERENCES stazioni(id),\n+\tCONSTRAINT fk_dom_id_applicazione_default FOREIGN KEY (id_applicazione_default) REFERENCES applicazioni(id),\n+\tCONSTRAINT pk_domini PRIMARY KEY (id)\n+);\n+\n+\n+\n+\n+CREATE SEQUENCE seq_iban_accredito start 1 increment 1 maxvalue 9223372036854775807 minvalue 1 cache 1 NO CYCLE;\n+\n+CREATE TABLE iban_accredito\n+(\n+\tcod_iban VARCHAR(255) NOT NULL,\n+\tbic_accredito VARCHAR(255),\n+\tpostale BOOLEAN NOT NULL,\n+\tabilitato BOOLEAN NOT NULL,\n+\tdescrizione VARCHAR(255),\n+\tintestatario VARCHAR(255),\n+\t-- fk/pk columns\n+\tid BIGINT DEFAULT nextval('seq_iban_accredito') NOT NULL,\n+\tid_dominio BIGINT NOT NULL,\n+\t-- unique constraints\n+\tCONSTRAINT unique_iban_accredito_1 UNIQUE (cod_iban,id_dominio),\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT fk_iba_id_dominio FOREIGN KEY (id_dominio) REFERENCES domini(id),\n+\tCONSTRAINT pk_iban_accredito PRIMARY KEY (id)\n+);\n+\n+\n+\n+\n+CREATE SEQUENCE seq_tipi_tributo start 1 increment 1 maxvalue 9223372036854775807 minvalue 1 cache 1 NO CYCLE;\n+\n+CREATE TABLE tipi_tributo\n+(\n+\tcod_tributo VARCHAR(255) NOT NULL,\n+\tdescrizione VARCHAR(255),\n+\ttipo_contabilita VARCHAR(1),\n+\tcod_contabilita VARCHAR(255),\n+\t-- fk/pk columns\n+\tid BIGINT DEFAULT nextval('seq_tipi_tributo') NOT NULL,\n+\t-- unique constraints\n+\tCONSTRAINT unique_tipi_tributo_1 UNIQUE (cod_tributo),\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT pk_tipi_tributo PRIMARY KEY (id)\n+);\n+\n+\n+\n+\n+CREATE SEQUENCE seq_tributi start 1 increment 1 maxvalue 9223372036854775807 minvalue 1 cache 1 NO CYCLE;\n+\n+CREATE TABLE tributi\n+(\n+\tabilitato BOOLEAN NOT NULL,\n+\ttipo_contabilita VARCHAR(1),\n+\tcodice_contabilita VARCHAR(255),\n+\t-- fk/pk columns\n+\tid BIGINT DEFAULT nextval('seq_tributi') NOT NULL,\n+\tid_dominio BIGINT NOT NULL,\n+\tid_iban_accredito BIGINT,\n+\tid_iban_appoggio BIGINT,\n+\tid_tipo_tributo BIGINT NOT NULL,\n+\t-- unique constraints\n+\tCONSTRAINT unique_tributi_1 UNIQUE (id_dominio,id_tipo_tributo),\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT fk_trb_id_dominio FOREIGN KEY (id_dominio) REFERENCES domini(id),\n+\tCONSTRAINT fk_trb_id_iban_accredito FOREIGN KEY (id_iban_accredito) REFERENCES iban_accredito(id),\n+\tCONSTRAINT fk_trb_id_iban_appoggio FOREIGN KEY (id_iban_appoggio) REFERENCES iban_accredito(id),\n+\tCONSTRAINT fk_trb_id_tipo_tributo FOREIGN KEY (id_tipo_tributo) REFERENCES tipi_tributo(id),\n+\tCONSTRAINT pk_tributi PRIMARY KEY (id)\n+);\n+\n+\n+\n+\n+CREATE SEQUENCE seq_uo start 1 increment 1 maxvalue 9223372036854775807 minvalue 1 cache 1 NO CYCLE;\n+\n+CREATE TABLE uo\n+(\n+\tcod_uo VARCHAR(35) NOT NULL,\n+\tabilitato BOOLEAN NOT NULL,\n+\tuo_codice_identificativo VARCHAR(35),\n+\tuo_denominazione VARCHAR(70),\n+\tuo_indirizzo VARCHAR(70),\n+\tuo_civico VARCHAR(16),\n+\tuo_cap VARCHAR(16),\n+\tuo_localita VARCHAR(35),\n+\tuo_provincia VARCHAR(35),\n+\tuo_nazione VARCHAR(2),\n+\tuo_area VARCHAR(255),\n+\tuo_url_sito_web VARCHAR(255),\n+\tuo_email VARCHAR(255),\n+\tuo_pec VARCHAR(255),\n+\tuo_tel VARCHAR(255),\n+\tuo_fax VARCHAR(255),\n+\t-- fk/pk columns\n+\tid BIGINT DEFAULT nextval('seq_uo') NOT NULL,\n+\tid_dominio BIGINT NOT NULL,\n+\t-- unique constraints\n+\tCONSTRAINT unique_uo_1 UNIQUE (cod_uo,id_dominio),\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT fk_uo_id_dominio FOREIGN KEY (id_dominio) REFERENCES domini(id),\n+\tCONSTRAINT pk_uo PRIMARY KEY (id)\n+);\n+\n+\n+\n+\n+CREATE SEQUENCE seq_utenze_domini start 1 increment 1 maxvalue 9223372036854775807 minvalue 1 cache 1 NO CYCLE;\n+\n+CREATE TABLE utenze_domini\n+(\n+\t-- fk/pk columns\n+\tid BIGINT DEFAULT nextval('seq_utenze_domini') NOT NULL,\n+\tid_utenza BIGINT NOT NULL,\n+\tid_dominio BIGINT,\n+\tid_uo BIGINT,\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT fk_nzd_id_utenza FOREIGN KEY (id_utenza) REFERENCES utenze(id),\n+\tCONSTRAINT fk_nzd_id_dominio FOREIGN KEY (id_dominio) REFERENCES domini(id),\n+\tCONSTRAINT fk_nzd_id_uo FOREIGN KEY (id_uo) REFERENCES uo(id),\n+\tCONSTRAINT pk_utenze_domini PRIMARY KEY (id)\n+);\n+\n+\n+\n+\n+CREATE SEQUENCE seq_operatori start 1 increment 1 maxvalue 9223372036854775807 minvalue 1 cache 1 NO CYCLE;\n+\n+CREATE TABLE operatori\n+(\n+\tnome VARCHAR(35) NOT NULL,\n+\t-- fk/pk columns\n+\tid BIGINT DEFAULT nextval('seq_operatori') NOT NULL,\n+\tid_utenza BIGINT NOT NULL,\n+\t-- unique constraints\n+\tCONSTRAINT unique_operatori_1 UNIQUE (id_utenza),\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT fk_opr_id_utenza FOREIGN KEY (id_utenza) REFERENCES utenze(id),\n+\tCONSTRAINT pk_operatori PRIMARY KEY (id)\n+);\n+\n+\n+\n+\n+CREATE SEQUENCE seq_connettori start 1 increment 1 maxvalue 9223372036854775807 minvalue 1 cache 1 NO CYCLE;\n+\n+CREATE TABLE connettori\n+(\n+\tcod_connettore VARCHAR(255) NOT NULL,\n+\tcod_proprieta VARCHAR(255) NOT NULL,\n+\tvalore VARCHAR(255) NOT NULL,\n+\t-- fk/pk columns\n+\tid BIGINT DEFAULT nextval('seq_connettori') NOT NULL,\n+\t-- unique constraints\n+\tCONSTRAINT unique_connettori_1 UNIQUE (cod_connettore,cod_proprieta),\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT pk_connettori PRIMARY KEY (id)\n+);\n+\n+\n+\n+\n+CREATE SEQUENCE seq_acl start 1 increment 1 maxvalue 9223372036854775807 minvalue 1 cache 1 NO CYCLE;\n+\n+CREATE TABLE acl\n+(\n+\truolo VARCHAR(255),\n+\tservizio VARCHAR(255) NOT NULL,\n+\tdiritti VARCHAR(255) NOT NULL,\n+\t-- fk/pk columns\n+\tid BIGINT DEFAULT nextval('seq_acl') NOT NULL,\n+\tid_utenza BIGINT,\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT fk_acl_id_utenza FOREIGN KEY (id_utenza) REFERENCES utenze(id),\n+\tCONSTRAINT pk_acl PRIMARY KEY (id)\n+);\n+\n+\n+\n+\n+CREATE SEQUENCE seq_tracciati start 1 increment 1 maxvalue 9223372036854775807 minvalue 1 cache 1 NO CYCLE;\n+\n+CREATE TABLE tracciati\n+(\n+\tcod_dominio VARCHAR(35) NOT NULL,\n+\tcod_tipo_versamento VARCHAR(35),\n+\tformato VARCHAR(10) NOT NULL,\n+\ttipo VARCHAR(10) NOT NULL,\n+\tstato VARCHAR(12) NOT NULL,\n+\tdescrizione_stato VARCHAR(256),\n+\tdata_caricamento TIMESTAMP NOT NULL,\n+\tdata_completamento TIMESTAMP,\n+\tbean_dati TEXT,\n+\tfile_name_richiesta VARCHAR(256),\n+\traw_richiesta BYTEA,\n+\tfile_name_esito VARCHAR(256),\n+\traw_esito BYTEA,\n+\tzip_stampe OID,\n+\t-- fk/pk columns\n+\tid BIGINT DEFAULT nextval('seq_tracciati') NOT NULL,\n+\tid_operatore BIGINT,\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT fk_trc_id_operatore FOREIGN KEY (id_operatore) REFERENCES operatori(id),\n+\tCONSTRAINT pk_tracciati PRIMARY KEY (id)\n+);\n+\n+\n+\n+\n+CREATE SEQUENCE seq_tipi_versamento start 1 increment 1 maxvalue 9223372036854775807 minvalue 1 cache 1 NO CYCLE;\n+\n+CREATE TABLE tipi_versamento\n+(\n+\tcod_tipo_versamento VARCHAR(35) NOT NULL,\n+\tdescrizione VARCHAR(255) NOT NULL,\n+\tcodifica_iuv VARCHAR(4),\n+\tpaga_terzi BOOLEAN NOT NULL DEFAULT false,\n+\tabilitato BOOLEAN NOT NULL,\n+\tbo_form_tipo VARCHAR(35),\n+\tbo_form_definizione TEXT,\n+\tbo_validazione_def TEXT,\n+\tbo_trasformazione_tipo VARCHAR(35),\n+\tbo_trasformazione_def TEXT,\n+\tbo_cod_applicazione VARCHAR(35),\n+\tbo_abilitato BOOLEAN NOT NULL DEFAULT false,\n+\tpag_form_tipo VARCHAR(35),\n+\tpag_form_definizione TEXT,\n+\tpag_form_impaginazione TEXT,\n+\tpag_validazione_def TEXT,\n+\tpag_trasformazione_tipo VARCHAR(35),\n+\tpag_trasformazione_def TEXT,\n+\tpag_cod_applicazione VARCHAR(35),\n+\tpag_abilitato BOOLEAN NOT NULL DEFAULT false,\n+\tavv_mail_prom_avv_abilitato BOOLEAN NOT NULL DEFAULT false,\n+\tavv_mail_prom_avv_pdf BOOLEAN,\n+\tavv_mail_prom_avv_tipo VARCHAR(35),\n+\tavv_mail_prom_avv_oggetto TEXT,\n+\tavv_mail_prom_avv_messaggio TEXT,\n+\tavv_mail_prom_ric_abilitato BOOLEAN NOT NULL DEFAULT false,\n+\tavv_mail_prom_ric_pdf BOOLEAN,\n+\tavv_mail_prom_ric_tipo VARCHAR(35),\n+\tavv_mail_prom_ric_oggetto TEXT,\n+\tavv_mail_prom_ric_messaggio TEXT,\n+\tavv_mail_prom_ric_eseguiti BOOLEAN,\n+\tavv_mail_prom_scad_abilitato BOOLEAN NOT NULL DEFAULT false,\n+\tavv_mail_prom_scad_preavviso INT,\n+\tavv_mail_prom_scad_tipo VARCHAR(35),\n+\tavv_mail_prom_scad_oggetto TEXT,\n+\tavv_mail_prom_scad_messaggio TEXT,\n+\tvisualizzazione_definizione TEXT,\n+\ttrac_csv_tipo VARCHAR(35),\n+\ttrac_csv_header_risposta TEXT,\n+\ttrac_csv_template_richiesta TEXT,\n+\ttrac_csv_template_risposta TEXT,\n+\tavv_app_io_prom_avv_abilitato BOOLEAN NOT NULL DEFAULT false,\n+\tavv_app_io_prom_avv_tipo VARCHAR(35),\n+\tavv_app_io_prom_avv_oggetto TEXT,\n+\tavv_app_io_prom_avv_messaggio TEXT,\n+\tavv_app_io_prom_ric_abilitato BOOLEAN NOT NULL DEFAULT false,\n+\tavv_app_io_prom_ric_tipo VARCHAR(35),\n+\tavv_app_io_prom_ric_oggetto TEXT,\n+\tavv_app_io_prom_ric_messaggio TEXT,\n+\tavv_app_io_prom_ric_eseguiti BOOLEAN,\n+\tavv_app_io_prom_scad_abilitato BOOLEAN NOT NULL DEFAULT false,\n+\tavv_app_io_prom_scad_preavviso INT,\n+\tavv_app_io_prom_scad_tipo VARCHAR(35),\n+\tavv_app_io_prom_scad_oggetto TEXT,\n+\tavv_app_io_prom_scad_messaggio TEXT,\n+\t-- fk/pk columns\n+\tid BIGINT DEFAULT nextval('seq_tipi_versamento') NOT NULL,\n+\t-- unique constraints\n+\tCONSTRAINT unique_tipi_versamento_1 UNIQUE (cod_tipo_versamento),\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT pk_tipi_versamento PRIMARY KEY (id)\n+);\n+\n+\n+\n+\n+CREATE SEQUENCE seq_tipi_vers_domini start 1 increment 1 maxvalue 9223372036854775807 minvalue 1 cache 1 NO CYCLE;\n+\n+CREATE TABLE tipi_vers_domini\n+(\n+\tcodifica_iuv VARCHAR(4),\n+\tpaga_terzi BOOLEAN,\n+\tabilitato BOOLEAN,\n+\tbo_form_tipo VARCHAR(35),\n+\tbo_form_definizione TEXT,\n+\tbo_validazione_def TEXT,\n+\tbo_trasformazione_tipo VARCHAR(35),\n+\tbo_trasformazione_def TEXT,\n+\tbo_cod_applicazione VARCHAR(35),\n+\tbo_abilitato BOOLEAN,\n+\tpag_form_tipo VARCHAR(35),\n+\tpag_form_definizione TEXT,\n+\tpag_form_impaginazione TEXT,\n+\tpag_validazione_def TEXT,\n+\tpag_trasformazione_tipo VARCHAR(35),\n+\tpag_trasformazione_def TEXT,\n+\tpag_cod_applicazione VARCHAR(35),\n+\tpag_abilitato BOOLEAN,\n+\tavv_mail_prom_avv_abilitato BOOLEAN,\n+\tavv_mail_prom_avv_pdf BOOLEAN,\n+\tavv_mail_prom_avv_tipo VARCHAR(35),\n+\tavv_mail_prom_avv_oggetto TEXT,\n+\tavv_mail_prom_avv_messaggio TEXT,\n+\tavv_mail_prom_ric_abilitato BOOLEAN,\n+\tavv_mail_prom_ric_pdf BOOLEAN,\n+\tavv_mail_prom_ric_tipo VARCHAR(35),\n+\tavv_mail_prom_ric_oggetto TEXT,\n+\tavv_mail_prom_ric_messaggio TEXT,\n+\tavv_mail_prom_ric_eseguiti BOOLEAN,\n+\tavv_mail_prom_scad_abilitato BOOLEAN,\n+\tavv_mail_prom_scad_preavviso INT,\n+\tavv_mail_prom_scad_tipo VARCHAR(35),\n+\tavv_mail_prom_scad_oggetto TEXT,\n+\tavv_mail_prom_scad_messaggio TEXT,\n+\tvisualizzazione_definizione TEXT,\n+\ttrac_csv_tipo VARCHAR(35),\n+\ttrac_csv_header_risposta TEXT,\n+\ttrac_csv_template_richiesta TEXT,\n+\ttrac_csv_template_risposta TEXT,\n+\tapp_io_api_key VARCHAR(255),\n+\tavv_app_io_prom_avv_abilitato BOOLEAN,\n+\tavv_app_io_prom_avv_tipo VARCHAR(35),\n+\tavv_app_io_prom_avv_oggetto TEXT,\n+\tavv_app_io_prom_avv_messaggio TEXT,\n+\tavv_app_io_prom_ric_abilitato BOOLEAN,\n+\tavv_app_io_prom_ric_tipo VARCHAR(35),\n+\tavv_app_io_prom_ric_oggetto TEXT,\n+\tavv_app_io_prom_ric_messaggio TEXT,\n+\tavv_app_io_prom_ric_eseguiti BOOLEAN,\n+\tavv_app_io_prom_scad_abilitato BOOLEAN,\n+\tavv_app_io_prom_scad_preavviso INT,\n+\tavv_app_io_prom_scad_tipo VARCHAR(35),\n+\tavv_app_io_prom_scad_oggetto TEXT,\n+\tavv_app_io_prom_scad_messaggio TEXT,\n+\t-- fk/pk columns\n+\tid BIGINT DEFAULT nextval('seq_tipi_vers_domini') NOT NULL,\n+\tid_tipo_versamento BIGINT NOT NULL,\n+\tid_dominio BIGINT NOT NULL,\n+\t-- unique constraints\n+\tCONSTRAINT unique_tipi_vers_domini_1 UNIQUE (id_dominio,id_tipo_versamento),\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT fk_tvd_id_tipo_versamento FOREIGN KEY (id_tipo_versamento) REFERENCES tipi_versamento(id),\n+\tCONSTRAINT fk_tvd_id_dominio FOREIGN KEY (id_dominio) REFERENCES domini(id),\n+\tCONSTRAINT pk_tipi_vers_domini PRIMARY KEY (id)\n+);\n+\n+\n+\n+\n+CREATE SEQUENCE seq_utenze_tipo_vers start 1 increment 1 maxvalue 9223372036854775807 minvalue 1 cache 1 NO CYCLE;\n+\n+CREATE TABLE utenze_tipo_vers\n+(\n+\t-- fk/pk columns\n+\tid BIGINT DEFAULT nextval('seq_utenze_tipo_vers') NOT NULL,\n+\tid_utenza BIGINT NOT NULL,\n+\tid_tipo_versamento BIGINT NOT NULL,\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT fk_utv_id_utenza FOREIGN KEY (id_utenza) REFERENCES utenze(id),\n+\tCONSTRAINT fk_utv_id_tipo_versamento FOREIGN KEY (id_tipo_versamento) REFERENCES tipi_versamento(id),\n+\tCONSTRAINT pk_utenze_tipo_vers PRIMARY KEY (id)\n+);\n+\n+\n+\n+\n+CREATE SEQUENCE seq_documenti start 1 increment 1 maxvalue 9223372036854775807 minvalue 1 cache 1 NO CYCLE;\n+\n+CREATE TABLE documenti\n+(\n+\tcod_documento VARCHAR(35) NOT NULL,\n+\tdescrizione VARCHAR(255) NOT NULL,\n+\t-- fk/pk columns\n+\tid BIGINT DEFAULT nextval('seq_documenti') NOT NULL,\n+\tid_dominio BIGINT NOT NULL,\n+\tid_applicazione BIGINT NOT NULL,\n+\t-- unique constraints\n+\tCONSTRAINT unique_documenti_1 UNIQUE (cod_documento,id_applicazione),\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT fk_doc_id_dominio FOREIGN KEY (id_dominio) REFERENCES domini(id),\n+\tCONSTRAINT fk_doc_id_applicazione FOREIGN KEY (id_applicazione) REFERENCES applicazioni(id),\n+\tCONSTRAINT pk_documenti PRIMARY KEY (id)\n+);\n+\n+\n+\n+\n+CREATE SEQUENCE seq_versamenti start 1 increment 1 maxvalue 9223372036854775807 minvalue 1 cache 1 NO CYCLE;\n+\n+CREATE TABLE versamenti\n+(\n+\tcod_versamento_ente VARCHAR(35) NOT NULL,\n+\tnome VARCHAR(35),\n+\timporto_totale DOUBLE PRECISION NOT NULL,\n+\tstato_versamento VARCHAR(35) NOT NULL,\n+\tdescrizione_stato VARCHAR(255),\n+\t-- Indica se, decorsa la dataScadenza, deve essere aggiornato da remoto o essere considerato scaduto\n+\taggiornabile BOOLEAN NOT NULL,\n+\tdata_creazione TIMESTAMP NOT NULL,\n+\tdata_validita TIMESTAMP,\n+\tdata_scadenza TIMESTAMP,\n+\tdata_ora_ultimo_aggiornamento TIMESTAMP NOT NULL,\n+\tcausale_versamento VARCHAR(1024),\n+\tdebitore_tipo VARCHAR(1),\n+\tdebitore_identificativo VARCHAR(35) NOT NULL,\n+\tdebitore_anagrafica VARCHAR(70) NOT NULL,\n+\tdebitore_indirizzo VARCHAR(70),\n+\tdebitore_civico VARCHAR(16),\n+\tdebitore_cap VARCHAR(16),\n+\tdebitore_localita VARCHAR(35),\n+\tdebitore_provincia VARCHAR(35),\n+\tdebitore_nazione VARCHAR(2),\n+\tdebitore_email VARCHAR(256),\n+\tdebitore_telefono VARCHAR(35),\n+\tdebitore_cellulare VARCHAR(35),\n+\tdebitore_fax VARCHAR(35),\n+\ttassonomia_avviso VARCHAR(35),\n+\ttassonomia VARCHAR(35),\n+\tcod_lotto VARCHAR(35),\n+\tcod_versamento_lotto VARCHAR(35),\n+\tcod_anno_tributario VARCHAR(35),\n+\tcod_bundlekey VARCHAR(256),\n+\tdati_allegati TEXT,\n+\tincasso VARCHAR(1),\n+\tanomalie TEXT,\n+\tiuv_versamento VARCHAR(35),\n+\tnumero_avviso VARCHAR(35),\n+\tack BOOLEAN NOT NULL,\n+\tanomalo BOOLEAN NOT NULL,\n+\tdivisione VARCHAR(35),\n+\tdirezione VARCHAR(35),\n+\tid_sessione VARCHAR(35),\n+\tdata_pagamento TIMESTAMP,\n+\timporto_pagato DOUBLE PRECISION NOT NULL,\n+\timporto_incassato DOUBLE PRECISION NOT NULL,\n+\tstato_pagamento VARCHAR(35) NOT NULL,\n+\tiuv_pagamento VARCHAR(35),\n+\tsrc_iuv VARCHAR(35),\n+\tsrc_debitore_identificativo VARCHAR(35) NOT NULL,\n+\tcod_rata VARCHAR(35),\n+\ttipo VARCHAR(35) NOT NULL,\n+\tdata_notifica_avviso TIMESTAMP,\n+\tavviso_notificato BOOLEAN,\n+\tavv_mail_data_prom_scadenza TIMESTAMP,\n+\tavv_mail_prom_scad_notificato BOOLEAN,\n+\tavv_app_io_data_prom_scadenza TIMESTAMP,\n+\tavv_app_io_prom_scad_notificat BOOLEAN,\n+\t-- fk/pk columns\n+\tid BIGINT DEFAULT nextval('seq_versamenti') NOT NULL,\n+\tid_tipo_versamento_dominio BIGINT NOT NULL,\n+\tid_tipo_versamento BIGINT NOT NULL,\n+\tid_dominio BIGINT NOT NULL,\n+\tid_uo BIGINT,\n+\tid_applicazione BIGINT NOT NULL,\n+\tid_documento BIGINT,\n+\t-- unique constraints\n+\tCONSTRAINT unique_versamenti_1 UNIQUE (cod_versamento_ente,id_applicazione),\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT fk_vrs_id_tipo_versamento_dominio FOREIGN KEY (id_tipo_versamento_dominio) REFERENCES tipi_vers_domini(id),\n+\tCONSTRAINT fk_vrs_id_tipo_versamento FOREIGN KEY (id_tipo_versamento) REFERENCES tipi_versamento(id),\n+\tCONSTRAINT fk_vrs_id_dominio FOREIGN KEY (id_dominio) REFERENCES domini(id),\n+\tCONSTRAINT fk_vrs_id_uo FOREIGN KEY (id_uo) REFERENCES uo(id),\n+\tCONSTRAINT fk_vrs_id_applicazione FOREIGN KEY (id_applicazione) REFERENCES applicazioni(id),\n+\tCONSTRAINT fk_vrs_id_documento FOREIGN KEY (id_documento) REFERENCES documenti(id),\n+\tCONSTRAINT pk_versamenti PRIMARY KEY (id)\n+);\n+\n+-- index\n+CREATE INDEX idx_vrs_id_pendenza ON versamenti (cod_versamento_ente,id_applicazione);\n+CREATE INDEX idx_vrs_data_creaz ON versamenti (data_creazione DESC);\n+CREATE INDEX idx_vrs_stato_vrs ON versamenti (stato_versamento);\n+CREATE INDEX idx_vrs_deb_identificativo ON versamenti (src_debitore_identificativo);\n+CREATE INDEX idx_vrs_iuv ON versamenti (src_iuv);\n+CREATE INDEX idx_vrs_auth ON versamenti (id_dominio,id_tipo_versamento,id_uo);\n+CREATE INDEX idx_vrs_prom_avviso ON versamenti (avviso_notificato,data_notifica_avviso DESC);\n+CREATE INDEX idx_vrs_avv_mail_prom_scad ON versamenti (avv_mail_prom_scad_notificato,avv_mail_data_prom_scadenza DESC);\n+CREATE INDEX idx_vrs_avv_io_prom_scad ON versamenti (avv_app_io_prom_scad_notificat,avv_app_io_data_prom_scadenza DESC);\n+\n+\n+\n+CREATE SEQUENCE seq_singoli_versamenti start 1 increment 1 maxvalue 9223372036854775807 minvalue 1 cache 1 NO CYCLE;\n+\n+CREATE TABLE singoli_versamenti\n+(\n+\tcod_singolo_versamento_ente VARCHAR(70) NOT NULL,\n+\tstato_singolo_versamento VARCHAR(35) NOT NULL,\n+\timporto_singolo_versamento DOUBLE PRECISION NOT NULL,\n+\t-- MARCA BOLLO Valori possibili:\\n01: Imposta di bollo\n+\ttipo_bollo VARCHAR(2),\n+\t-- MARCA BOLLO: Digest in Base64 del documento da bollare\n+\thash_documento VARCHAR(70),\n+\t-- MARCA BOLLO: Sigla automobilistica della provincia di residenza\n+\tprovincia_residenza VARCHAR(2),\n+\ttipo_contabilita VARCHAR(1),\n+\tcodice_contabilita VARCHAR(255),\n+\tdescrizione VARCHAR(256),\n+\tdati_allegati TEXT,\n+\tindice_dati INT NOT NULL,\n+\tdescrizione_causale_rpt VARCHAR(140),\n+\t-- fk/pk columns\n+\tid BIGINT DEFAULT nextval('seq_singoli_versamenti') NOT NULL,\n+\tid_versamento BIGINT NOT NULL,\n+\tid_tributo BIGINT,\n+\tid_iban_accredito BIGINT,\n+\tid_iban_appoggio BIGINT,\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT fk_sng_id_versamento FOREIGN KEY (id_versamento) REFERENCES versamenti(id),\n+\tCONSTRAINT fk_sng_id_tributo FOREIGN KEY (id_tributo) REFERENCES tributi(id),\n+\tCONSTRAINT fk_sng_id_iban_accredito FOREIGN KEY (id_iban_accredito) REFERENCES iban_accredito(id),\n+\tCONSTRAINT fk_sng_id_iban_appoggio FOREIGN KEY (id_iban_appoggio) REFERENCES iban_accredito(id),\n+\tCONSTRAINT pk_singoli_versamenti PRIMARY KEY (id)\n+);\n+\n+-- index\n+CREATE UNIQUE INDEX idx_sng_id_voce ON singoli_versamenti (id_versamento, indice_dati);\n+ALTER TABLE singoli_versamenti ADD CONSTRAINT unique_sng_id_voce UNIQUE USING INDEX idx_sng_id_voce;\n+-- L'esecuzione viene completata con esito: NOTICE:  ALTER TABLE / ADD CONSTRAINT USING INDEX will rename index \"idx_sng_id_voce\" to \"unique_sng_id_voce\"\n+\n+\n+\n+CREATE SEQUENCE seq_pagamenti_portale start 1 increment 1 maxvalue 9223372036854775807 minvalue 1 cache 1 NO CYCLE;\n+\n+CREATE TABLE pagamenti_portale\n+(\n+\tcod_canale VARCHAR(35),\n+\tnome VARCHAR(255) NOT NULL,\n+\timporto DOUBLE PRECISION NOT NULL,\n+\tversante_identificativo VARCHAR(35),\n+\tid_sessione VARCHAR(35) NOT NULL,\n+\tid_sessione_portale VARCHAR(255),\n+\tid_sessione_psp VARCHAR(255),\n+\tstato VARCHAR(35) NOT NULL,\n+\tcodice_stato VARCHAR(35) NOT NULL,\n+\tdescrizione_stato VARCHAR(1024),\n+\tpsp_redirect_url VARCHAR(1024),\n+\tpsp_esito VARCHAR(255),\n+\tjson_request TEXT,\n+\tdata_richiesta TIMESTAMP,\n+\turl_ritorno VARCHAR(1024),\n+\tcod_psp VARCHAR(35),\n+\ttipo_versamento VARCHAR(4),\n+\tmulti_beneficiario VARCHAR(35),\n+\tack BOOLEAN NOT NULL,\n+\ttipo INT NOT NULL,\n+\tprincipal VARCHAR(4000) NOT NULL,\n+\ttipo_utenza VARCHAR(35) NOT NULL,\n+\tsrc_versante_identificativo VARCHAR(35),\n+\t-- fk/pk columns\n+\tid BIGINT DEFAULT nextval('seq_pagamenti_portale') NOT NULL,\n+\tid_applicazione BIGINT,\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT fk_ppt_id_applicazione FOREIGN KEY (id_applicazione) REFERENCES applicazioni(id),\n+\tCONSTRAINT pk_pagamenti_portale PRIMARY KEY (id)\n+);\n+\n+-- index\n+CREATE INDEX idx_prt_stato ON pagamenti_portale (stato);\n+CREATE INDEX idx_prt_id_sessione ON pagamenti_portale (id_sessione);\n+CREATE INDEX idx_prt_id_sessione_psp ON pagamenti_portale (id_sessione_psp);\n+CREATE INDEX idx_prt_versante_identif ON pagamenti_portale (src_versante_identificativo);\n+\n+\n+\n+CREATE SEQUENCE seq_pag_port_versamenti start 1 increment 1 maxvalue 9223372036854775807 minvalue 1 cache 1 NO CYCLE;\n+\n+CREATE TABLE pag_port_versamenti\n+(\n+\t-- fk/pk columns\n+\tid BIGINT DEFAULT nextval('seq_pag_port_versamenti') NOT NULL,\n+\tid_pagamento_portale BIGINT NOT NULL,\n+\tid_versamento BIGINT NOT NULL,\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT fk_ppv_id_pagamento_portale FOREIGN KEY (id_pagamento_portale) REFERENCES pagamenti_portale(id),\n+\tCONSTRAINT fk_ppv_id_versamento FOREIGN KEY (id_versamento) REFERENCES versamenti(id),\n+\tCONSTRAINT pk_pag_port_versamenti PRIMARY KEY (id)\n+);\n+\n+-- index\n+CREATE INDEX idx_ppv_fk_prt ON pag_port_versamenti (id_pagamento_portale);\n+CREATE INDEX idx_ppv_fk_vrs ON pag_port_versamenti (id_versamento);\n+\n+\n+\n+CREATE SEQUENCE seq_rpt start 1 increment 1 maxvalue 9223372036854775807 minvalue 1 cache 1 NO CYCLE;\n+\n+CREATE TABLE rpt\n+(\n+\tcod_carrello VARCHAR(35),\n+\tiuv VARCHAR(35) NOT NULL,\n+\tccp VARCHAR(35) NOT NULL,\n+\tcod_dominio VARCHAR(35) NOT NULL,\n+\t-- Identificativo dell'RPT utilizzato come riferimento nell'RT\n+\tcod_msg_richiesta VARCHAR(35) NOT NULL,\n+\t-- Data di creazione dell'RPT\n+\tdata_msg_richiesta TIMESTAMP NOT NULL,\n+\t-- Stato RPT secondo la codifica AgID\n+\tstato VARCHAR(35) NOT NULL,\n+\tdescrizione_stato TEXT,\n+\tcod_sessione VARCHAR(255),\n+\tcod_sessione_portale VARCHAR(255),\n+\t-- Indirizzo del portale psp a cui redirigere il cittadino per eseguire il pagamento\n+\tpsp_redirect_url VARCHAR(512),\n+\txml_rpt BYTEA NOT NULL,\n+\tdata_aggiornamento_stato TIMESTAMP NOT NULL,\n+\t-- Indirizzo di ritorno al portale dell'ente al termine del pagamento\n+\tcallback_url TEXT,\n+\tmodello_pagamento VARCHAR(16),\n+\tcod_msg_ricevuta VARCHAR(35),\n+\tdata_msg_ricevuta TIMESTAMP,\n+\t-- Esito del pagamento:\\n0: Eseguito\\n1: Non eseguito\\n2: Parzialmente eseguito\\n3: Decorrenza\\n4: Decorrenza Parziale\n+\tcod_esito_pagamento INT,\n+\timporto_totale_pagato DOUBLE PRECISION,\n+\txml_rt BYTEA,\n+\tcod_canale VARCHAR(35),\n+\tcod_psp VARCHAR(35),\n+\tcod_intermediario_psp VARCHAR(35),\n+\ttipo_versamento VARCHAR(4),\n+\ttipo_identificativo_attestante VARCHAR(1),\n+\tidentificativo_attestante VARCHAR(35),\n+\tdenominazione_attestante VARCHAR(70),\n+\tcod_stazione VARCHAR(35) NOT NULL,\n+\tcod_transazione_rpt VARCHAR(36),\n+\tcod_transazione_rt VARCHAR(36),\n+\tstato_conservazione VARCHAR(35),\n+\tdescrizione_stato_cons VARCHAR(512),\n+\tdata_conservazione TIMESTAMP,\n+\tbloccante BOOLEAN NOT NULL DEFAULT true,\n+\t-- fk/pk columns\n+\tid BIGINT DEFAULT nextval('seq_rpt') NOT NULL,\n+\tid_versamento BIGINT NOT NULL,\n+\tid_pagamento_portale BIGINT,\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT fk_rpt_id_versamento FOREIGN KEY (id_versamento) REFERENCES versamenti(id),\n+\tCONSTRAINT fk_rpt_id_pagamento_portale FOREIGN KEY (id_pagamento_portale) REFERENCES pagamenti_portale(id),\n+\tCONSTRAINT pk_rpt PRIMARY KEY (id)\n+);\n+\n+-- index\n+CREATE INDEX idx_rpt_cod_msg_richiesta ON rpt (cod_msg_richiesta);\n+CREATE INDEX idx_rpt_stato ON rpt (stato);\n+CREATE INDEX idx_rpt_fk_vrs ON rpt (id_versamento);\n+CREATE INDEX idx_rpt_fk_prt ON rpt (id_pagamento_portale);\n+CREATE UNIQUE INDEX idx_rpt_id_transazione ON rpt (iuv, ccp, cod_dominio);\n+ALTER TABLE rpt ADD CONSTRAINT unique_rpt_id_transazione UNIQUE USING INDEX idx_rpt_id_transazione;\n+-- L'esecuzione viene completata con esito: NOTICE:  ALTER TABLE / ADD CONSTRAINT USING INDEX will rename index \"idx_rpt_id_transazione\" to \"unique_rpt_id_transazione\"\n+\n+\n+\n+CREATE SEQUENCE seq_rr start 1 increment 1 maxvalue 9223372036854775807 minvalue 1 cache 1 NO CYCLE;\n+\n+CREATE TABLE rr\n+(\n+\tcod_dominio VARCHAR(35) NOT NULL,\n+\tiuv VARCHAR(35) NOT NULL,\n+\tccp VARCHAR(35) NOT NULL,\n+\tcod_msg_revoca VARCHAR(35) NOT NULL,\n+\tdata_msg_revoca TIMESTAMP NOT NULL,\n+\tdata_msg_esito TIMESTAMP,\n+\tstato VARCHAR(35) NOT NULL,\n+\tdescrizione_stato VARCHAR(512),\n+\timporto_totale_richiesto DOUBLE PRECISION NOT NULL,\n+\tcod_msg_esito VARCHAR(35),\n+\timporto_totale_revocato DOUBLE PRECISION,\n+\txml_rr BYTEA NOT NULL,\n+\txml_er BYTEA,\n+\tcod_transazione_rr VARCHAR(36),\n+\tcod_transazione_er VARCHAR(36),\n+\t-- fk/pk columns\n+\tid BIGINT DEFAULT nextval('seq_rr') NOT NULL,\n+\tid_rpt BIGINT NOT NULL,\n+\t-- unique constraints\n+\tCONSTRAINT unique_rr_1 UNIQUE (cod_msg_revoca),\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT fk_rr_id_rpt FOREIGN KEY (id_rpt) REFERENCES rpt(id),\n+\tCONSTRAINT pk_rr PRIMARY KEY (id)\n+);\n+\n+\n+\n+\n+CREATE SEQUENCE seq_notifiche start 1 increment 1 maxvalue 9223372036854775807 minvalue 1 cache 1 NO CYCLE;\n+\n+CREATE TABLE notifiche\n+(\n+\ttipo_esito VARCHAR(16) NOT NULL,\n+\tdata_creazione TIMESTAMP NOT NULL,\n+\tstato VARCHAR(16) NOT NULL,\n+\tdescrizione_stato VARCHAR(255),\n+\tdata_aggiornamento_stato TIMESTAMP NOT NULL,\n+\tdata_prossima_spedizione TIMESTAMP NOT NULL,\n+\ttentativi_spedizione BIGINT,\n+\t-- fk/pk columns\n+\tid BIGINT DEFAULT nextval('seq_notifiche') NOT NULL,\n+\tid_applicazione BIGINT NOT NULL,\n+\tid_rpt BIGINT,\n+\tid_rr BIGINT,\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT fk_ntf_id_applicazione FOREIGN KEY (id_applicazione) REFERENCES applicazioni(id),\n+\tCONSTRAINT fk_ntf_id_rpt FOREIGN KEY (id_rpt) REFERENCES rpt(id),\n+\tCONSTRAINT fk_ntf_id_rr FOREIGN KEY (id_rr) REFERENCES rr(id),\n+\tCONSTRAINT pk_notifiche PRIMARY KEY (id)\n+);\n+\n+-- index\n+CREATE INDEX idx_ntf_da_spedire ON notifiche (id_applicazione,stato,data_prossima_spedizione);\n+\n+\n+\n+CREATE SEQUENCE seq_notifiche_app_io start 1 increment 1 maxvalue 9223372036854775807 minvalue 1 cache 1 NO CYCLE;\n+\n+CREATE TABLE notifiche_app_io\n+(\n+\tdebitore_identificativo VARCHAR(35) NOT NULL,\n+\tcod_versamento_ente VARCHAR(35) NOT NULL,\n+\tcod_applicazione VARCHAR(35) NOT NULL,\n+\tcod_dominio VARCHAR(35) NOT NULL,\n+\tiuv VARCHAR(35) NOT NULL,\n+\ttipo_esito VARCHAR(16) NOT NULL,\n+\tdata_creazione TIMESTAMP NOT NULL,\n+\tstato VARCHAR(16) NOT NULL,\n+\tdescrizione_stato VARCHAR(255),\n+\tdata_aggiornamento_stato TIMESTAMP NOT NULL,\n+\tdata_prossima_spedizione TIMESTAMP NOT NULL,\n+\ttentativi_spedizione BIGINT,\n+\tid_messaggio VARCHAR(255),\n+\tstato_messaggio VARCHAR(16),\n+\t-- fk/pk columns\n+\tid BIGINT DEFAULT nextval('seq_notifiche_app_io') NOT NULL,\n+\tid_versamento BIGINT NOT NULL,\n+\tid_tipo_versamento_dominio BIGINT NOT NULL,\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT fk_nai_id_versamento FOREIGN KEY (id_versamento) REFERENCES versamenti(id),\n+\tCONSTRAINT fk_nai_id_tipo_versamento_dominio FOREIGN KEY (id_tipo_versamento_dominio) REFERENCES tipi_vers_domini(id),\n+\tCONSTRAINT pk_notifiche_app_io PRIMARY KEY (id)\n+);\n+\n+-- index\n+CREATE INDEX idx_nai_da_spedire ON notifiche_app_io (stato,data_prossima_spedizione);\n+\n+\n+\n+CREATE SEQUENCE seq_promemoria start 1 increment 1 maxvalue 9223372036854775807 minvalue 1 cache 1 NO CYCLE;\n+\n+CREATE TABLE promemoria\n+(\n+\ttipo VARCHAR(16) NOT NULL,\n+\tdata_creazione TIMESTAMP NOT NULL,\n+\tstato VARCHAR(16) NOT NULL,\n+\tdescrizione_stato VARCHAR(1024),\n+\tdestinatario_to VARCHAR(256) NOT NULL,\n+\tdestinatario_cc VARCHAR(256),\n+\tmessaggio_content_type VARCHAR(256),\n+\toggetto VARCHAR(512),\n+\tmessaggio TEXT,\n+\tallega_pdf BOOLEAN NOT NULL DEFAULT false,\n+\tdata_aggiornamento_stato TIMESTAMP NOT NULL,\n+\tdata_prossima_spedizione TIMESTAMP NOT NULL,\n+\ttentativi_spedizione BIGINT,\n+\t-- fk/pk columns\n+\tid BIGINT DEFAULT nextval('seq_promemoria') NOT NULL,\n+\tid_versamento BIGINT,\n+\tid_rpt BIGINT,\n+\tid_documento BIGINT,\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT fk_prm_id_versamento FOREIGN KEY (id_versamento) REFERENCES versamenti(id),\n+\tCONSTRAINT fk_prm_id_rpt FOREIGN KEY (id_rpt) REFERENCES rpt(id),\n+\tCONSTRAINT fk_prm_id_documento FOREIGN KEY (id_documento) REFERENCES documenti(id),\n+\tCONSTRAINT pk_promemoria PRIMARY KEY (id)\n+);\n+\n+\n+\n+\n+CREATE SEQUENCE seq_iuv start 1 increment 1 maxvalue 9223372036854775807 minvalue 1 cache 1 NO CYCLE;\n+\n+CREATE TABLE iuv\n+(\n+\tprg BIGINT NOT NULL,\n+\tiuv VARCHAR(35) NOT NULL,\n+\tapplication_code INT NOT NULL,\n+\tdata_generazione DATE NOT NULL,\n+\ttipo_iuv VARCHAR(1) NOT NULL,\n+\tcod_versamento_ente VARCHAR(35),\n+\taux_digit INT NOT NULL DEFAULT 0,\n+\t-- fk/pk columns\n+\tid BIGINT DEFAULT nextval('seq_iuv') NOT NULL,\n+\tid_applicazione BIGINT NOT NULL,\n+\tid_dominio BIGINT NOT NULL,\n+\t-- unique constraints\n+\tCONSTRAINT unique_iuv_1 UNIQUE (id_dominio,iuv),\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT fk_iuv_id_applicazione FOREIGN KEY (id_applicazione) REFERENCES applicazioni(id),\n+\tCONSTRAINT fk_iuv_id_dominio FOREIGN KEY (id_dominio) REFERENCES domini(id),\n+\tCONSTRAINT pk_iuv PRIMARY KEY (id)\n+);\n+\n+-- index\n+CREATE INDEX idx_iuv_rifversamento ON iuv (cod_versamento_ente,id_applicazione,tipo_iuv);\n+\n+\n+\n+CREATE SEQUENCE seq_incassi start 1 increment 1 maxvalue 9223372036854775807 minvalue 1 cache 1 NO CYCLE;\n+\n+CREATE TABLE incassi\n+(\n+\ttrn VARCHAR(35) NOT NULL,\n+\tcod_dominio VARCHAR(35) NOT NULL,\n+\tcausale VARCHAR(512) NOT NULL,\n+\timporto DOUBLE PRECISION NOT NULL,\n+\tdata_valuta DATE,\n+\tdata_contabile DATE,\n+\tdata_ora_incasso TIMESTAMP NOT NULL,\n+\tnome_dispositivo VARCHAR(512),\n+\tiban_accredito VARCHAR(35),\n+\tsct VARCHAR(35),\n+\t-- fk/pk columns\n+\tid BIGINT DEFAULT nextval('seq_incassi') NOT NULL,\n+\tid_applicazione BIGINT,\n+\tid_operatore BIGINT,\n+\t-- unique constraints\n+\tCONSTRAINT unique_incassi_1 UNIQUE (cod_dominio,trn),\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT fk_inc_id_applicazione FOREIGN KEY (id_applicazione) REFERENCES applicazioni(id),\n+\tCONSTRAINT fk_inc_id_operatore FOREIGN KEY (id_operatore) REFERENCES operatori(id),\n+\tCONSTRAINT pk_incassi PRIMARY KEY (id)\n+);\n+\n+\n+\n+\n+CREATE SEQUENCE seq_fr start 1 increment 1 maxvalue 9223372036854775807 minvalue 1 cache 1 NO CYCLE;\n+\n+CREATE TABLE fr\n+(\n+\tcod_psp VARCHAR(35) NOT NULL,\n+\tcod_dominio VARCHAR(35) NOT NULL,\n+\tcod_flusso VARCHAR(35) NOT NULL,\n+\tstato VARCHAR(35) NOT NULL,\n+\tdescrizione_stato TEXT,\n+\tiur VARCHAR(35) NOT NULL,\n+\tdata_ora_flusso TIMESTAMP,\n+\tdata_regolamento TIMESTAMP,\n+\tdata_acquisizione TIMESTAMP NOT NULL,\n+\tnumero_pagamenti BIGINT,\n+\timporto_totale_pagamenti DOUBLE PRECISION,\n+\tcod_bic_riversamento VARCHAR(35),\n+\txml BYTEA NOT NULL,\n+\tragione_sociale_psp VARCHAR(70),\n+\tragione_sociale_dominio VARCHAR(70),\n+\t-- fk/pk columns\n+\tid BIGINT DEFAULT nextval('seq_fr') NOT NULL,\n+\tid_incasso BIGINT,\n+\t-- unique constraints\n+\tCONSTRAINT unique_fr_1 UNIQUE (cod_flusso),\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT fk_fr_id_incasso FOREIGN KEY (id_incasso) REFERENCES incassi(id),\n+\tCONSTRAINT pk_fr PRIMARY KEY (id)\n+);\n+\n+\n+\n+\n+CREATE SEQUENCE seq_pagamenti start 1 increment 1 maxvalue 9223372036854775807 minvalue 1 cache 1 NO CYCLE;\n+\n+CREATE TABLE pagamenti\n+(\n+\tcod_dominio VARCHAR(35) NOT NULL,\n+\tiuv VARCHAR(35) NOT NULL,\n+\tindice_dati INT NOT NULL DEFAULT 1,\n+\timporto_pagato DOUBLE PRECISION NOT NULL,\n+\tdata_acquisizione TIMESTAMP NOT NULL,\n+\tiur VARCHAR(35) NOT NULL,\n+\tdata_pagamento TIMESTAMP NOT NULL,\n+\tcommissioni_psp DOUBLE PRECISION,\n+\t-- Valori possibili:\\nES: Esito originario\\nBD: Marca da Bollo\n+\ttipo_allegato VARCHAR(2),\n+\tallegato BYTEA,\n+\tdata_acquisizione_revoca TIMESTAMP,\n+\tcausale_revoca VARCHAR(140),\n+\tdati_revoca VARCHAR(140),\n+\timporto_revocato DOUBLE PRECISION,\n+\tesito_revoca VARCHAR(140),\n+\tdati_esito_revoca VARCHAR(140),\n+\tstato VARCHAR(35),\n+\ttipo VARCHAR(35) NOT NULL,\n+\t-- fk/pk columns\n+\tid BIGINT DEFAULT nextval('seq_pagamenti') NOT NULL,\n+\tid_rpt BIGINT,\n+\tid_singolo_versamento BIGINT,\n+\tid_rr BIGINT,\n+\tid_incasso BIGINT,\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT fk_pag_id_rpt FOREIGN KEY (id_rpt) REFERENCES rpt(id),\n+\tCONSTRAINT fk_pag_id_singolo_versamento FOREIGN KEY (id_singolo_versamento) REFERENCES singoli_versamenti(id),\n+\tCONSTRAINT fk_pag_id_rr FOREIGN KEY (id_rr) REFERENCES rr(id),\n+\tCONSTRAINT fk_pag_id_incasso FOREIGN KEY (id_incasso) REFERENCES incassi(id),\n+\tCONSTRAINT pk_pagamenti PRIMARY KEY (id)\n+);\n+\n+-- index\n+CREATE INDEX idx_pag_fk_rpt ON pagamenti (id_rpt);\n+CREATE INDEX idx_pag_fk_sng ON pagamenti (id_singolo_versamento);\n+CREATE UNIQUE INDEX idx_pag_id_riscossione ON pagamenti (cod_dominio, iuv, iur, indice_dati);\n+ALTER TABLE pagamenti ADD CONSTRAINT unique_pag_id_riscossione UNIQUE USING INDEX idx_pag_id_riscossione;\n+-- L'esecuzione viene completata con esito: NOTICE:  ALTER TABLE / ADD CONSTRAINT USING INDEX will rename index \"idx_pag_id_riscossione\" to \"unique_pag_id_riscossione\"\n+\n+\n+\n+CREATE SEQUENCE seq_rendicontazioni start 1 increment 1 maxvalue 9223372036854775807 minvalue 1 cache 1 NO CYCLE;\n+\n+CREATE TABLE rendicontazioni\n+(\n+\tiuv VARCHAR(35) NOT NULL,\n+\tiur VARCHAR(35) NOT NULL,\n+\tindice_dati INT,\n+\timporto_pagato DOUBLE PRECISION,\n+\tesito INT,\n+\tdata TIMESTAMP,\n+\tstato VARCHAR(35) NOT NULL,\n+\tanomalie TEXT,\n+\t-- fk/pk columns\n+\tid BIGINT DEFAULT nextval('seq_rendicontazioni') NOT NULL,\n+\tid_fr BIGINT NOT NULL,\n+\tid_pagamento BIGINT,\n+\tid_singolo_versamento BIGINT,\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT fk_rnd_id_fr FOREIGN KEY (id_fr) REFERENCES fr(id),\n+\tCONSTRAINT fk_rnd_id_pagamento FOREIGN KEY (id_pagamento) REFERENCES pagamenti(id),\n+\tCONSTRAINT fk_rnd_id_singolo_versamento FOREIGN KEY (id_singolo_versamento) REFERENCES singoli_versamenti(id),\n+\tCONSTRAINT pk_rendicontazioni PRIMARY KEY (id)\n+);\n+\n+\n+\n+\n+CREATE SEQUENCE seq_eventi start 1 increment 1 maxvalue 9223372036854775807 minvalue 1 cache 1 NO CYCLE;\n+\n+CREATE TABLE eventi\n+(\n+\tcomponente VARCHAR(35),\n+\truolo VARCHAR(1),\n+\tcategoria_evento VARCHAR(1),\n+\ttipo_evento VARCHAR(70),\n+\tsottotipo_evento VARCHAR(35),\n+\tdata TIMESTAMP,\n+\tintervallo BIGINT,\n+\tesito VARCHAR(4),\n+\tsottotipo_esito VARCHAR(35),\n+\tdettaglio_esito TEXT,\n+\tparametri_richiesta BYTEA,\n+\tparametri_risposta BYTEA,\n+\tdati_pago_pa TEXT,\n+\tcod_versamento_ente VARCHAR(35),\n+\tcod_applicazione VARCHAR(35),\n+\tiuv VARCHAR(35),\n+\tccp VARCHAR(35),\n+\tcod_dominio VARCHAR(35),\n+\tid_sessione VARCHAR(35),\n+\t-- fk/pk columns\n+\tid BIGINT DEFAULT nextval('seq_eventi') NOT NULL,\n+\tid_fr BIGINT,\n+\tid_incasso BIGINT,\n+\tid_tracciato BIGINT,\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT fk_evt_id_fr FOREIGN KEY (id_fr) REFERENCES fr(id),\n+\tCONSTRAINT fk_evt_id_incasso FOREIGN KEY (id_incasso) REFERENCES incassi(id),\n+\tCONSTRAINT fk_evt_id_tracciato FOREIGN KEY (id_tracciato) REFERENCES tracciati(id),\n+\tCONSTRAINT pk_eventi PRIMARY KEY (id)\n+);\n+\n+-- index\n+CREATE INDEX idx_evt_data ON eventi (data);\n+CREATE INDEX idx_evt_fk_vrs ON eventi (cod_applicazione,cod_versamento_ente);\n+CREATE INDEX idx_evt_id_sessione ON eventi (id_sessione);\n+\n+\n+\n+CREATE SEQUENCE seq_batch start 1 increment 1 maxvalue 9223372036854775807 minvalue 1 cache 1 NO CYCLE;\n+\n+CREATE TABLE batch\n+(\n+\tcod_batch VARCHAR(255) NOT NULL,\n+\tnodo VARCHAR(255),\n+\tinizio TIMESTAMP,\n+\taggiornamento TIMESTAMP,\n+\t-- fk/pk columns\n+\tid BIGINT DEFAULT nextval('seq_batch') NOT NULL,\n+\t-- unique constraints\n+\tCONSTRAINT unique_batch_1 UNIQUE (cod_batch),\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT pk_batch PRIMARY KEY (id)\n+);\n+\n+\n+\n+\n+CREATE SEQUENCE seq_stampe start 1 increment 1 maxvalue 9223372036854775807 minvalue 1 cache 1 NO CYCLE;\n+\n+CREATE TABLE stampe\n+(\n+\tdata_creazione TIMESTAMP NOT NULL,\n+\ttipo VARCHAR(16) NOT NULL,\n+\tpdf BYTEA,\n+\t-- fk/pk columns\n+\tid BIGINT DEFAULT nextval('seq_stampe') NOT NULL,\n+\tid_versamento BIGINT,\n+\tid_documento BIGINT,\n+\t-- unique constraints\n+\tCONSTRAINT unique_stampe_1 UNIQUE (id_versamento,id_documento,tipo),\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT fk_stm_id_versamento FOREIGN KEY (id_versamento) REFERENCES versamenti(id),\n+\tCONSTRAINT fk_stm_id_documento FOREIGN KEY (id_documento) REFERENCES documenti(id),\n+\tCONSTRAINT pk_stampe PRIMARY KEY (id)\n+);\n+\n+\n+\n+\n+CREATE SEQUENCE seq_operazioni start 1 increment 1 maxvalue 9223372036854775807 minvalue 1 cache 1 NO CYCLE;\n+\n+CREATE TABLE operazioni\n+(\n+\ttipo_operazione VARCHAR(16) NOT NULL,\n+\tlinea_elaborazione BIGINT NOT NULL,\n+\tstato VARCHAR(16) NOT NULL,\n+\tdati_richiesta BYTEA,\n+\tdati_risposta BYTEA,\n+\tdettaglio_esito VARCHAR(255),\n+\tcod_versamento_ente VARCHAR(255),\n+\tcod_dominio VARCHAR(35),\n+\tiuv VARCHAR(35),\n+\ttrn VARCHAR(35),\n+\t-- fk/pk columns\n+\tid BIGINT DEFAULT nextval('seq_operazioni') NOT NULL,\n+\tid_tracciato BIGINT NOT NULL,\n+\tid_applicazione BIGINT,\n+\tid_stampa BIGINT,\n+\tid_versamento BIGINT,\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT fk_ope_id_tracciato FOREIGN KEY (id_tracciato) REFERENCES tracciati(id),\n+\tCONSTRAINT fk_ope_id_applicazione FOREIGN KEY (id_applicazione) REFERENCES applicazioni(id),\n+\tCONSTRAINT fk_ope_id_stampa FOREIGN KEY (id_stampa) REFERENCES stampe(id),\n+\tCONSTRAINT fk_ope_id_versamento FOREIGN KEY (id_versamento) REFERENCES versamenti(id),\n+\tCONSTRAINT pk_operazioni PRIMARY KEY (id)\n+);\n+\n+\n+\n+\n+CREATE SEQUENCE seq_gp_audit start 1 increment 1 maxvalue 9223372036854775807 minvalue 1 cache 1 NO CYCLE;\n+\n+CREATE TABLE gp_audit\n+(\n+\tdata TIMESTAMP NOT NULL,\n+\tid_oggetto BIGINT NOT NULL,\n+\ttipo_oggetto VARCHAR(255) NOT NULL,\n+\toggetto TEXT NOT NULL,\n+\t-- fk/pk columns\n+\tid BIGINT DEFAULT nextval('seq_gp_audit') NOT NULL,\n+\tid_operatore BIGINT NOT NULL,\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT fk_aud_id_operatore FOREIGN KEY (id_operatore) REFERENCES operatori(id),\n+\tCONSTRAINT pk_gp_audit PRIMARY KEY (id)\n+);\n+\n+\n+\n+\n+CREATE TABLE ID_MESSAGGIO_RELATIVO\n+(\n+\tCOUNTER BIGINT NOT NULL,\n+\tPROTOCOLLO VARCHAR(255) NOT NULL,\n+\tINFO_ASSOCIATA VARCHAR(255) NOT NULL,\n+\tora_registrazione TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n+\t-- fk/pk columns\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT pk_ID_MESSAGGIO_RELATIVO PRIMARY KEY (PROTOCOLLO,INFO_ASSOCIATA)\n+);\n+\n+CREATE TABLE sonde\n+(\n+\tnome VARCHAR(35) NOT NULL,\n+\tclasse VARCHAR(255) NOT NULL,\n+\tsoglia_warn BIGINT NOT NULL,\n+\tsoglia_error BIGINT NOT NULL,\n+\tdata_ok TIMESTAMP,\n+\tdata_warn TIMESTAMP,\n+\tdata_error TIMESTAMP,\n+\tdata_ultimo_check TIMESTAMP,\n+\tdati_check TEXT,\n+\tstato_ultimo_check INT,\n+\t-- fk/pk columns\n+\t-- fk/pk keys constraints\n+\tCONSTRAINT pk_sonde PRIMARY KEY (nome)\n+);\n+\n+-- Correzione SQL per performance DB\n+ALTER TABLE versamenti DROP CONSTRAINT fk_vrs_id_applicazione;\n+ALTER TABLE versamenti DROP CONSTRAINT fk_vrs_id_dominio;\n+ALTER TABLE versamenti DROP CONSTRAINT fk_vrs_id_tipo_versamento_dominio;\n+ALTER TABLE versamenti DROP CONSTRAINT fk_vrs_id_tipo_versamento;\n+ALTER TABLE versamenti DROP CONSTRAINT fk_vrs_id_uo;\n+ALTER TABLE versamenti DROP CONSTRAINT fk_vrs_id_documento;\n+\n+ALTER TABLE singoli_versamenti DROP CONSTRAINT fk_sng_id_iban_accredito;\n+ALTER TABLE singoli_versamenti DROP CONSTRAINT fk_sng_id_iban_appoggio;\n+ALTER TABLE singoli_versamenti DROP CONSTRAINT fk_sng_id_tributo;\n+ALTER TABLE singoli_versamenti DROP CONSTRAINT fk_sng_id_versamento;\n+\n+ALTER TABLE rpt DROP CONSTRAINT fk_rpt_id_pagamento_portale;\n+ALTER TABLE rpt DROP CONSTRAINT fk_rpt_id_versamento;\n+\n+ALTER TABLE pagamenti DROP CONSTRAINT fk_pag_id_incasso;\n+ALTER TABLE pagamenti DROP CONSTRAINT fk_pag_id_rpt;\n+ALTER TABLE pagamenti DROP CONSTRAINT fk_pag_id_rr;\n+ALTER TABLE pagamenti DROP CONSTRAINT fk_pag_id_singolo_versamento;\n+\n+ALTER TABLE pagamenti_portale DROP CONSTRAINT fk_ppt_id_applicazione;\n+\n+ALTER TABLE pag_port_versamenti DROP CONSTRAINT fk_ppv_id_pagamento_portale;\n+ALTER TABLE pag_port_versamenti DROP CONSTRAINT fk_ppv_id_versamento;\n+\n+-- Sezione Viste\n+\n+CREATE VIEW versamenti_incassi AS \n+SELECT versamenti.id,\n+    versamenti.cod_versamento_ente,\n+    versamenti.nome,\n+    versamenti.importo_totale,\n+    versamenti.stato_versamento,\n+    versamenti.descrizione_stato,\n+    versamenti.aggiornabile,\n+    versamenti.data_creazione,\n+    versamenti.data_validita,\n+    versamenti.data_scadenza,\n+    versamenti.data_ora_ultimo_aggiornamento,\n+    versamenti.causale_versamento,\n+    versamenti.debitore_tipo,\n+    versamenti.debitore_identificativo,\n+    versamenti.debitore_anagrafica,\n+    versamenti.debitore_indirizzo,\n+    versamenti.debitore_civico,\n+    versamenti.debitore_cap,\n+    versamenti.debitore_localita,\n+    versamenti.debitore_provincia,\n+    versamenti.debitore_nazione,\n+    versamenti.debitore_email,\n+    versamenti.debitore_telefono,\n+    versamenti.debitore_cellulare,\n+    versamenti.debitore_fax,\n+    versamenti.tassonomia_avviso,\n+    versamenti.tassonomia,\n+    versamenti.cod_lotto,\n+    versamenti.cod_versamento_lotto,\n+    versamenti.cod_anno_tributario,\n+    versamenti.cod_bundlekey,\n+    versamenti.dati_allegati,\n+    versamenti.incasso,\n+    versamenti.anomalie,\n+    versamenti.iuv_versamento,\n+    versamenti.numero_avviso,\n+    versamenti.id_dominio,\n+    versamenti.id_tipo_versamento,\n+    versamenti.id_tipo_versamento_dominio,\n+    versamenti.id_uo,\n+    versamenti.id_applicazione,\n+    versamenti.divisione,\n+    versamenti.direzione,\t\n+    versamenti.id_sessione,\n+    versamenti.ack,\n+    versamenti.anomalo,\n+    versamenti.data_pagamento,\n+    versamenti.importo_pagato,\n+    versamenti.importo_incassato,\n+    versamenti.stato_pagamento,\n+    versamenti.iuv_pagamento,\n+    versamenti.src_iuv,\n+    versamenti.src_debitore_identificativo,\n+    versamenti.cod_rata,\n+    versamenti.tipo,\n+    documenti.cod_documento,\n+    (CASE WHEN versamenti.stato_versamento = 'NON_ESEGUITO' AND versamenti.data_validita > now() THEN 0 ELSE 1 END) AS smart_order_rank,\n+    (@ (date_part('epoch'::text, now()) * 1000::bigint - date_part('epoch'::text, COALESCE(versamenti.data_pagamento, versamenti.data_validita, versamenti.data_creazione)) * 1000::bigint))::bigint AS smart_order_date\n+   FROM versamenti LEFT JOIN documenti ON versamenti.id_documento = documenti.id;\n+\n+-- VISTE REPORTISTICA\n+\n+CREATE VIEW v_riscossioni_senza_rpt AS\n+SELECT fr.cod_dominio AS cod_dominio,\n+    rendicontazioni.iuv AS iuv,\n+    rendicontazioni.iur AS iur,\n+    fr.cod_flusso AS cod_flusso,\n+    fr.iur AS fr_iur,\n+    fr.data_regolamento AS data_regolamento,\n+    fr.importo_totale_pagamenti AS importo_totale_pagamenti,\n+    fr.numero_pagamenti AS numero_pagamenti,\n+    rendicontazioni.importo_pagato AS importo_pagato,\n+    rendicontazioni.data AS data_pagamento,\n+    singoli_versamenti.cod_singolo_versamento_ente AS cod_singolo_versamento_ente,\n+    rendicontazioni.indice_dati AS indice_dati,\n+    versamenti.cod_versamento_ente AS cod_versamento_ente,\n+    versamenti.id_applicazione AS id_applicazione,\n+    versamenti.debitore_identificativo AS debitore_identificativo,\n+    versamenti.id_tipo_versamento AS id_tipo_versamento,\n+    versamenti.cod_anno_tributario AS cod_anno_tributario,\n+    singoli_versamenti.id_tributo AS id_tributo\n+   FROM fr\n+     JOIN rendicontazioni ON rendicontazioni.id_fr = fr.id\n+     JOIN versamenti ON versamenti.iuv_versamento = rendicontazioni.iuv\n+     JOIN domini ON versamenti.id_dominio = domini.id\n+     JOIN singoli_versamenti ON singoli_versamenti.id_versamento = versamenti.id\n+  WHERE rendicontazioni.esito = 9;\n+\n+CREATE VIEW v_riscossioni_con_rpt AS\n+SELECT pagamenti.cod_dominio AS cod_dominio,\n+    pagamenti.iuv AS iuv,\n+    pagamenti.iur AS iur,\n+    fr.cod_flusso AS cod_flusso,\n+    fr.iur AS fr_iur,\n+    fr.data_regolamento AS data_regolamento,\n+    fr.importo_totale_pagamenti AS importo_totale_pagamenti,\n+    fr.numero_pagamenti AS numero_pagamenti,\n+    pagamenti.importo_pagato AS importo_pagato,\n+    pagamenti.data_pagamento AS data_pagamento,\n+    singoli_versamenti.cod_singolo_versamento_ente AS cod_singolo_versamento_ente,\n+    singoli_versamenti.indice_dati AS indice_dati,\n+    versamenti.cod_versamento_ente AS cod_versamento_ente,\n+    versamenti.id_applicazione AS id_applicazione,\n+    versamenti.debitore_identificativo AS debitore_identificativo,\n+    versamenti.id_tipo_versamento AS id_tipo_versamento,\n+    versamenti.cod_anno_tributario AS cod_anno_tributario,\n+    singoli_versamenti.id_tributo AS id_tributo\n+   FROM pagamenti\n+     LEFT JOIN rendicontazioni ON rendicontazioni.id_pagamento = pagamenti.id\n+     LEFT JOIN fr ON rendicontazioni.id_fr = fr.id\n+     JOIN singoli_versamenti ON pagamenti.id_singolo_versamento = singoli_versamenti.id\n+     JOIN versamenti ON singoli_versamenti.id_versamento = versamenti.id; \n+\n+CREATE VIEW v_riscossioni AS\n+ SELECT a.cod_dominio,\n+    a.iuv,\n+    a.iur,\n+    a.cod_flusso,\n+    a.fr_iur,\n+    a.data_regolamento,\n+    a.importo_totale_pagamenti,\n+    a.numero_pagamenti,\n+    a.importo_pagato,\n+    a.data_pagamento,\n+    a.cod_singolo_versamento_ente,\n+    a.indice_dati,\n+    a.cod_versamento_ente,\n+    applicazioni.cod_applicazione,\n+    a.debitore_identificativo AS identificativo_debitore,\n+    a.cod_anno_tributario AS anno,\n+    tipi_versamento.cod_tipo_versamento,\n+    tipi_tributo.cod_tributo AS cod_entrata\n+   FROM ( SELECT v_riscossioni_senza_rpt.cod_dominio,\n+            v_riscossioni_senza_rpt.iuv,\n+            v_riscossioni_senza_rpt.iur,\n+            v_riscossioni_senza_rpt.cod_flusso,\n+            v_riscossioni_senza_rpt.fr_iur,\n+            v_riscossioni_senza_rpt.data_regolamento,\n+            v_riscossioni_senza_rpt.importo_totale_pagamenti,\n+            v_riscossioni_senza_rpt.numero_pagamenti,\n+            v_riscossioni_senza_rpt.importo_pagato,\n+            v_riscossioni_senza_rpt.data_pagamento,\n+            v_riscossioni_senza_rpt.cod_singolo_versamento_ente,\n+            v_riscossioni_senza_rpt.indice_dati,\n+            v_riscossioni_senza_rpt.cod_versamento_ente,\n+            v_riscossioni_senza_rpt.id_applicazione,\n+            v_riscossioni_senza_rpt.debitore_identificativo,\n+            v_riscossioni_senza_rpt.id_tipo_versamento,\n+            v_riscossioni_senza_rpt.cod_anno_tributario,\n+            v_riscossioni_senza_rpt.id_tributo\n+           FROM v_riscossioni_senza_rpt\n+        UNION\n+         SELECT v_riscossioni_con_rpt.cod_dominio,\n+            v_riscossioni_con_rpt.iuv,\n+            v_riscossioni_con_rpt.iur,\n+            v_riscossioni_con_rpt.cod_flusso,\n+            v_riscossioni_con_rpt.fr_iur,\n+            v_riscossioni_con_rpt.data_regolamento,\n+            v_riscossioni_con_rpt.importo_totale_pagamenti,\n+            v_riscossioni_con_rpt.numero_pagamenti,\n+            v_riscossioni_con_rpt.importo_pagato,\n+            v_riscossioni_con_rpt.data_pagamento,\n+            v_riscossioni_con_rpt.cod_singolo_versamento_ente,\n+            v_riscossioni_con_rpt.indice_dati,\n+            v_riscossioni_con_rpt.cod_versamento_ente,\n+            v_riscossioni_con_rpt.id_applicazione,\n+            v_riscossioni_con_rpt.debitore_identificativo,\n+            v_riscossioni_con_rpt.id_tipo_versamento,\n+            v_riscossioni_con_rpt.cod_anno_tributario,\n+            v_riscossioni_con_rpt.id_tributo\n+           FROM v_riscossioni_con_rpt) a\n+     JOIN applicazioni ON a.id_applicazione = applicazioni.id \n+     LEFT JOIN tipi_versamento ON a.id_tipo_versamento = tipi_versamento.id \n+     LEFT JOIN tributi ON a.id_tributo = tributi.id \n+     LEFT JOIN tipi_tributo ON tributi.id_tipo_tributo = tipi_tributo.id;\n+\n+\n+-- Vista pagamenti_portale\n+\n+CREATE VIEW v_pagamenti_portale AS\n+ SELECT \n+  pagamenti_portale.cod_canale,\n+  pagamenti_portale.nome,\n+  pagamenti_portale.importo,\n+  pagamenti_portale.versante_identificativo,\n+  pagamenti_portale.src_versante_identificativo,\n+  pagamenti_portale.id_sessione,\n+  pagamenti_portale.id_sessione_portale,\n+  pagamenti_portale.id_sessione_psp,\n+  pagamenti_portale.stato,\n+  pagamenti_portale.codice_stato,\n+  pagamenti_portale.descrizione_stato,\n+  pagamenti_portale.psp_redirect_url,\n+  pagamenti_portale.psp_esito,\n+  pagamenti_portale.data_richiesta,\n+  pagamenti_portale.url_ritorno,\n+  pagamenti_portale.cod_psp,\n+  pagamenti_portale.tipo_versamento,\n+  pagamenti_portale.multi_beneficiario,\n+  pagamenti_portale.ack,\n+  pagamenti_portale.tipo,\n+  pagamenti_portale.principal,\n+  pagamenti_portale.tipo_utenza,\n+  pagamenti_portale.id,\n+  pagamenti_portale.id_applicazione,\n+  versamenti.debitore_identificativo as debitore_identificativo,\n+  versamenti.src_debitore_identificativo as src_debitore_identificativo,\n+  versamenti.id_dominio as id_dominio, \n+  versamenti.id_uo as id_uo, \n+  versamenti.id_tipo_versamento as id_tipo_versamento\n+FROM pagamenti_portale \n+JOIN pag_port_versamenti ON pagamenti_portale.id = pag_port_versamenti.id_pagamento_portale \n+JOIN versamenti ON versamenti.id=pag_port_versamenti.id_versamento;\n+\n+-- Vista Eventi per Versamenti\n+\n+CREATE VIEW v_eventi_vers_rendicontazioni AS (\n+        SELECT DISTINCT eventi.componente,\n+               eventi.ruolo,\n+               eventi.categoria_evento,\n+               eventi.tipo_evento,\n+               eventi.sottotipo_evento,\n+               eventi.data,\n+               eventi.intervallo,\n+               eventi.esito,\n+               eventi.sottotipo_esito,\n+               eventi.dettaglio_esito,\n+               eventi.parametri_richiesta,\n+               eventi.parametri_risposta,\n+               eventi.dati_pago_pa,\n+               versamenti.cod_versamento_ente as cod_versamento_ente,\n+               applicazioni.cod_applicazione as cod_applicazione,\n+               eventi.iuv,\n+               eventi.cod_dominio,\n+               eventi.ccp,\n+               eventi.id_sessione,\n+               eventi.id\n+        FROM eventi \n+        JOIN rendicontazioni ON rendicontazioni.id_fr = eventi.id_fr\n+        JOIN pagamenti ON pagamenti.id = rendicontazioni.id_pagamento\n+        JOIN singoli_versamenti ON pagamenti.id_singolo_versamento=singoli_versamenti.id\n+        JOIN versamenti ON singoli_versamenti.id_versamento=versamenti.id\n+        JOIN applicazioni ON versamenti.id_applicazione = applicazioni.id\n+);\n+\n+CREATE VIEW v_eventi_vers_pagamenti AS (\n+ SELECT DISTINCT eventi.componente,\n+    eventi.ruolo,\n+    eventi.categoria_evento,\n+    eventi.tipo_evento,\n+    eventi.sottotipo_evento,\n+    eventi.data,\n+    eventi.intervallo,\n+    eventi.esito,\n+    eventi.sottotipo_esito,\n+    eventi.dettaglio_esito,\n+    eventi.parametri_richiesta,\n+    eventi.parametri_risposta,\n+    eventi.dati_pago_pa,\n+    versamenti.cod_versamento_ente,\n+    applicazioni.cod_applicazione,\n+    eventi.iuv,\n+    eventi.cod_dominio,\n+    eventi.ccp,\n+    eventi.id_sessione,\n+    eventi.id\n+   FROM versamenti\n+     JOIN applicazioni ON versamenti.id_applicazione = applicazioni.id\n+     JOIN pag_port_versamenti ON versamenti.id = pag_port_versamenti.id_versamento\n+     JOIN pagamenti_portale ON pag_port_versamenti.id_pagamento_portale = pagamenti_portale.id\n+     JOIN eventi ON eventi.id_sessione::text = pagamenti_portale.id_sessione::text);\n+\n+CREATE VIEW v_eventi_vers_riconciliazioni AS (\n+        SELECT DISTINCT eventi.componente,\n+               eventi.ruolo,\n+               eventi.categoria_evento,\n+               eventi.tipo_evento,\n+               eventi.sottotipo_evento,\n+               eventi.data,\n+               eventi.intervallo,\n+               eventi.esito,\n+               eventi.sottotipo_esito,\n+               eventi.dettaglio_esito,\n+               eventi.parametri_richiesta,\n+               eventi.parametri_risposta,\n+               eventi.dati_pago_pa,\n+               versamenti.cod_versamento_ente as cod_versamento_ente,\n+               applicazioni.cod_applicazione as cod_applicazione,\n+               eventi.iuv,\n+               eventi.cod_dominio,\n+               eventi.ccp,\n+               eventi.id_sessione,\n+               eventi.id\n+        FROM eventi\n+        JOIN pagamenti ON pagamenti.id_incasso = eventi.id_incasso\n+        JOIN singoli_versamenti ON pagamenti.id_singolo_versamento=singoli_versamenti.id\n+        JOIN versamenti ON singoli_versamenti.id_versamento=versamenti.id\n+        JOIN applicazioni ON versamenti.id_applicazione = applicazioni.id\n+);\n+\n+CREATE VIEW v_eventi_vers_tracciati AS (\n+        SELECT DISTINCT eventi.componente,\n+               eventi.ruolo,\n+               eventi.categoria_evento,\n+               eventi.tipo_evento,\n+               eventi.sottotipo_evento,\n+               eventi.data,\n+               eventi.intervallo,\n+               eventi.esito,\n+               eventi.sottotipo_esito,\n+               eventi.dettaglio_esito,\n+               eventi.parametri_richiesta,\n+               eventi.parametri_risposta,\n+               eventi.dati_pago_pa,\n+               versamenti.cod_versamento_ente as cod_versamento_ente,\n+               applicazioni.cod_applicazione as cod_applicazione,\n+               eventi.iuv,\n+               eventi.cod_dominio,\n+               eventi.ccp,\n+               eventi.id_sessione,\n+               eventi.id\n+        FROM eventi\n+        JOIN operazioni ON operazioni.id_tracciato = eventi.id_tracciato\n+        JOIN versamenti ON operazioni.id_applicazione = versamenti.id_applicazione AND operazioni.cod_versamento_ente = versamenti.cod_versamento_ente\n+        JOIN applicazioni ON versamenti.id_applicazione = applicazioni.id\n+);\n+\n+CREATE VIEW v_eventi_vers AS (\n+        SELECT eventi.componente,\n+               eventi.ruolo,\n+               eventi.categoria_evento,\n+               eventi.tipo_evento,\n+               eventi.sottotipo_evento,\n+               eventi.data,\n+               eventi.intervallo,\n+               eventi.esito,\n+               eventi.sottotipo_esito,\n+               eventi.dettaglio_esito,\n+               eventi.parametri_richiesta,\n+               eventi.parametri_risposta,\n+               eventi.dati_pago_pa,\n+               eventi.cod_versamento_ente,\n+               eventi.cod_applicazione,\n+               eventi.iuv,\n+               eventi.cod_dominio,\n+               eventi.ccp,\n+               eventi.id_sessione,\n+               eventi.id FROM eventi \n+        UNION SELECT * FROM v_eventi_vers_pagamenti \n+        UNION SELECT * FROM v_eventi_vers_rendicontazioni\n+        UNION SELECT * FROM v_eventi_vers_riconciliazioni\n+\tUNION SELECT * FROM v_eventi_vers_tracciati\n+);\n+\n+-- Vista Rendicontazioni\n+\n+CREATE VIEW v_rendicontazioni_ext AS\n+ SELECT fr.cod_psp AS fr_cod_psp,\n+    fr.cod_dominio AS fr_cod_dominio,\n+    fr.cod_flusso AS fr_cod_flusso,\n+    fr.stato AS fr_stato,\n+    fr.descrizione_stato AS fr_descrizione_stato,\n+    fr.iur AS fr_iur,\n+    fr.data_ora_flusso AS fr_data_ora_flusso,\n+    fr.data_regolamento AS fr_data_regolamento,\n+    fr.data_acquisizione AS fr_data_acquisizione,\n+    fr.numero_pagamenti AS fr_numero_pagamenti,\n+    fr.importo_totale_pagamenti AS fr_importo_totale_pagamenti,\n+    fr.cod_bic_riversamento AS fr_cod_bic_riversamento,\n+    fr.id AS fr_id,\n+    fr.id_incasso AS fr_id_incasso,\n+    fr.ragione_sociale_psp AS fr_ragione_sociale_psp,\n+    fr.ragione_sociale_dominio AS fr_ragione_sociale_dominio,\n+    rendicontazioni.iuv AS rnd_iuv,\n+    rendicontazioni.iur AS rnd_iur,\n+    rendicontazioni.indice_dati AS rnd_indice_dati,\n+    rendicontazioni.importo_pagato AS rnd_importo_pagato,\n+    rendicontazioni.esito AS rnd_esito,\n+    rendicontazioni.data AS rnd_data,\n+    rendicontazioni.stato AS rnd_stato,\n+    rendicontazioni.anomalie AS rnd_anomalie,\n+    rendicontazioni.id,\n+    rendicontazioni.id_pagamento AS rnd_id_pagamento,\n+    singoli_versamenti.cod_singolo_versamento_ente AS sng_cod_sing_vers_ente,\n+    singoli_versamenti.importo_singolo_versamento AS sng_importo_singolo_versamento,\n+    singoli_versamenti.descrizione AS sng_descrizione,\n+    singoli_versamenti.dati_allegati AS sng_dati_allegati,\n+    singoli_versamenti.stato_singolo_versamento AS sng_stato_singolo_versamento,\n+    singoli_versamenti.indice_dati AS sng_indice_dati,\n+    singoli_versamenti.descrizione_causale_rpt AS sng_descrizione_causale_rpt,\n+    singoli_versamenti.id_tributo AS sng_id_tributo,\n+    versamenti.cod_versamento_ente AS vrs_cod_versamento_ente,\n+    versamenti.importo_totale AS vrs_importo_totale,\n+    versamenti.debitore_identificativo AS vrs_debitore_identificativo,\n+    versamenti.debitore_anagrafica AS vrs_debitore_anagrafica,\n+    versamenti.tassonomia AS vrs_tassonomia,\n+    versamenti.divisione AS vrs_divisione,\n+    versamenti.direzione AS vrs_direzione,\n+    versamenti.id_tipo_versamento AS vrs_id_tipo_versamento,\n+    versamenti.id_tipo_versamento_dominio AS vrs_id_tipo_versamento_dominio,\n+    versamenti.id_dominio AS vrs_id_dominio,\n+    versamenti.id_uo AS vrs_id_uo,\n+    versamenti.id_applicazione AS vrs_id_applicazione,\n+    versamenti.id AS vrs_id,\n+    versamenti.nome AS vrs_nome,\n+    versamenti.stato_versamento AS vrs_stato_versamento,\n+    versamenti.descrizione_stato AS vrs_descrizione_stato,\n+    versamenti.aggiornabile AS vrs_aggiornabile,\n+    versamenti.data_creazione AS vrs_data_creazione,\n+    versamenti.data_validita AS vrs_data_validita,\n+    versamenti.data_scadenza AS vrs_data_scadenza,\n+    versamenti.data_ora_ultimo_aggiornamento AS vrs_data_ora_ultimo_agg,\n+    versamenti.causale_versamento AS vrs_causale_versamento,\n+    versamenti.debitore_tipo AS vrs_debitore_tipo,\n+    versamenti.debitore_indirizzo AS vrs_debitore_indirizzo,\n+    versamenti.debitore_civico AS vrs_debitore_civico,\n+    versamenti.debitore_cap AS vrs_debitore_cap,\n+    versamenti.debitore_localita AS vrs_debitore_localita,\n+    versamenti.debitore_provincia AS vrs_debitore_provincia,\n+    versamenti.debitore_nazione AS vrs_debitore_nazione,\n+    versamenti.debitore_email AS vrs_debitore_email,\n+    versamenti.debitore_telefono AS vrs_debitore_telefono,\n+    versamenti.debitore_cellulare AS vrs_debitore_cellulare,\n+    versamenti.debitore_fax AS vrs_debitore_fax,\n+    versamenti.tassonomia_avviso AS vrs_tassonomia_avviso,\n+    versamenti.cod_lotto AS vrs_cod_lotto,\n+    versamenti.cod_versamento_lotto AS vrs_cod_versamento_lotto,\n+    versamenti.cod_anno_tributario AS vrs_cod_anno_tributario,\n+    versamenti.cod_bundlekey AS vrs_cod_bundlekey,\n+    versamenti.dati_allegati AS vrs_dati_allegati,\n+    versamenti.incasso AS vrs_incasso,\n+    versamenti.anomalie AS vrs_anomalie,\n+    versamenti.iuv_versamento AS vrs_iuv_versamento,\n+    versamenti.numero_avviso AS vrs_numero_avviso,\n+    versamenti.ack AS vrs_ack,\n+    versamenti.anomalo AS vrs_anomalo,\n+    versamenti.id_sessione AS vrs_id_sessione,\n+    versamenti.data_pagamento AS vrs_data_pagamento,\n+    versamenti.importo_pagato AS vrs_importo_pagato,\n+    versamenti.importo_incassato AS vrs_importo_incassato,\n+    versamenti.stato_pagamento AS vrs_stato_pagamento,\n+    versamenti.iuv_pagamento AS vrs_iuv_pagamento,\n+    versamenti.cod_rata as vrs_cod_rata,\n+    versamenti.id_documento as vrs_id_documento,\n+    versamenti.tipo as vrs_tipo\n+   FROM fr\n+     JOIN rendicontazioni ON rendicontazioni.id_fr = fr.id\n+     JOIN singoli_versamenti ON rendicontazioni.id_singolo_versamento = singoli_versamenti.id\n+     JOIN versamenti ON versamenti.id = singoli_versamenti.id_versamento;\n+\n+\n+-- Vista Rpt Versamento\n+CREATE VIEW v_rpt_versamenti AS\n+ SELECT \n+rpt.cod_carrello as cod_carrello,                   \n+rpt.iuv as iuv,                            \n+rpt.ccp as ccp,                            \n+rpt.cod_dominio as cod_dominio,                    \n+rpt.cod_msg_richiesta as cod_msg_richiesta,              \n+rpt.data_msg_richiesta as data_msg_richiesta,             \n+rpt.stato as stato,                          \n+rpt.descrizione_stato as descrizione_stato,              \n+rpt.cod_sessione as cod_sessione,                   \n+rpt.cod_sessione_portale as cod_sessione_portale,           \n+rpt.psp_redirect_url as psp_redirect_url,               \n+rpt.xml_rpt as xml_rpt,                        \n+rpt.data_aggiornamento_stato as data_aggiornamento_stato,       \n+rpt.callback_url as callback_url,                   \n+rpt.modello_pagamento as modello_pagamento,              \n+rpt.cod_msg_ricevuta as cod_msg_ricevuta,               \n+rpt.data_msg_ricevuta as data_msg_ricevuta,              \n+rpt.cod_esito_pagamento as cod_esito_pagamento,            \n+rpt.importo_totale_pagato as importo_totale_pagato,          \n+rpt.xml_rt as xml_rt,                         \n+rpt.cod_canale as cod_canale,                     \n+rpt.cod_psp as cod_psp,                        \n+rpt.cod_intermediario_psp as cod_intermediario_psp,          \n+rpt.tipo_versamento as tipo_versamento,                \n+rpt.tipo_identificativo_attestante as tipo_identificativo_attestante, \n+rpt.identificativo_attestante as identificativo_attestante,      \n+rpt.denominazione_attestante as denominazione_attestante,       \n+rpt.cod_stazione as cod_stazione,                   \n+rpt.cod_transazione_rpt as cod_transazione_rpt,            \n+rpt.cod_transazione_rt as cod_transazione_rt,             \n+rpt.stato_conservazione as stato_conservazione,            \n+rpt.descrizione_stato_cons as descrizione_stato_cons,         \n+rpt.data_conservazione as data_conservazione,             \n+rpt.bloccante as bloccante,                      \n+rpt.id as id,                             \n+rpt.id_pagamento_portale as id_pagamento_portale, \n+    versamenti.cod_versamento_ente AS vrs_cod_versamento_ente,\n+    versamenti.importo_totale AS vrs_importo_totale,\n+    versamenti.debitore_identificativo AS vrs_debitore_identificativo,\n+    versamenti.debitore_anagrafica AS vrs_debitore_anagrafica,\n+    versamenti.tassonomia AS vrs_tassonomia,\n+    versamenti.divisione AS vrs_divisione,\n+    versamenti.direzione AS vrs_direzione,\n+    versamenti.id_tipo_versamento AS vrs_id_tipo_versamento,\n+    versamenti.id_tipo_versamento_dominio AS vrs_id_tipo_versamento_dominio,\n+    versamenti.id_dominio AS vrs_id_dominio,\n+    versamenti.id_uo AS vrs_id_uo,\n+    versamenti.id_applicazione AS vrs_id_applicazione,\n+    versamenti.id AS vrs_id,\n+    versamenti.nome AS vrs_nome,\n+    versamenti.stato_versamento AS vrs_stato_versamento,\n+    versamenti.descrizione_stato AS vrs_descrizione_stato,\n+    versamenti.aggiornabile AS vrs_aggiornabile,\n+    versamenti.data_creazione AS vrs_data_creazione,\n+    versamenti.data_validita AS vrs_data_validita,\n+    versamenti.data_scadenza AS vrs_data_scadenza,\n+    versamenti.data_ora_ultimo_aggiornamento AS vrs_data_ora_ultimo_agg,\n+    versamenti.causale_versamento AS vrs_causale_versamento,\n+    versamenti.debitore_tipo AS vrs_debitore_tipo,\n+    versamenti.debitore_indirizzo AS vrs_debitore_indirizzo,\n+    versamenti.debitore_civico AS vrs_debitore_civico,\n+    versamenti.debitore_cap AS vrs_debitore_cap,\n+    versamenti.debitore_localita AS vrs_debitore_localita,\n+    versamenti.debitore_provincia AS vrs_debitore_provincia,\n+    versamenti.debitore_nazione AS vrs_debitore_nazione,\n+    versamenti.debitore_email AS vrs_debitore_email,\n+    versamenti.debitore_telefono AS vrs_debitore_telefono,\n+    versamenti.debitore_cellulare AS vrs_debitore_cellulare,\n+    versamenti.debitore_fax AS vrs_debitore_fax,\n+    versamenti.tassonomia_avviso AS vrs_tassonomia_avviso,\n+    versamenti.cod_lotto AS vrs_cod_lotto,\n+    versamenti.cod_versamento_lotto AS vrs_cod_versamento_lotto,\n+    versamenti.cod_anno_tributario AS vrs_cod_anno_tributario,\n+    versamenti.cod_bundlekey AS vrs_cod_bundlekey,\n+    versamenti.dati_allegati AS vrs_dati_allegati,\n+    versamenti.incasso AS vrs_incasso,\n+    versamenti.anomalie AS vrs_anomalie,\n+    versamenti.iuv_versamento AS vrs_iuv_versamento,\n+    versamenti.numero_avviso AS vrs_numero_avviso,\n+    versamenti.ack AS vrs_ack,\n+    versamenti.anomalo AS vrs_anomalo,\n+    versamenti.id_sessione AS vrs_id_sessione,\n+    versamenti.data_pagamento AS vrs_data_pagamento,\n+    versamenti.importo_pagato AS vrs_importo_pagato,\n+    versamenti.importo_incassato AS vrs_importo_incassato,\n+    versamenti.stato_pagamento AS vrs_stato_pagamento,\n+    versamenti.iuv_pagamento AS vrs_iuv_pagamento,\n+    versamenti.src_debitore_identificativo as vrs_src_debitore_identificativ,\n+    versamenti.cod_rata as vrs_cod_rata,\n+    versamenti.id_documento as vrs_id_documento,\n+    versamenti.tipo as vrs_tipo\n+FROM rpt JOIN versamenti ON versamenti.id = rpt.id_versamento;\n+\n+\n+\n+\n+-- Init\n+\n+-- Censimento dell'utenza amministratore\n+\n+INSERT INTO utenze (principal,principal_originale,autorizzazione_domini_star,autorizzazione_tipi_vers_star,ruoli,password) VALUES ('gpadmin','gpadmin',true, true, 'Amministratore', '$1$Tg$NYosLY4acCfcxl9sr0ajY.');\n+INSERT INTO operatori (nome, id_utenza) VALUES ('Amministratore', (select id from utenze where principal = 'gpadmin'));\n+\n+-- Censimento del ruolo amministratore\n+\n+INSERT INTO acl(ruolo,id_utenza,servizio,diritti) VALUES ('Amministratore',null,'Anagrafica Applicazioni','RW');\n+INSERT INTO acl(ruolo,id_utenza,servizio,diritti) VALUES ('Amministratore',null,'Anagrafica Creditore','RW');\n+INSERT INTO acl(ruolo,id_utenza,servizio,diritti) VALUES ('Amministratore',null,'Rendicontazioni e Incassi','RW');\n+INSERT INTO acl(ruolo,id_utenza,servizio,diritti) VALUES ('Amministratore',null,'Pagamenti','RW');\n+INSERT INTO acl(ruolo,id_utenza,servizio,diritti) VALUES ('Amministratore',null,'Pendenze','RW');\n+INSERT INTO acl(ruolo,id_utenza,servizio,diritti) VALUES ('Amministratore',null,'Giornale degli Eventi','RW');\n+INSERT INTO acl(ruolo,id_utenza,servizio,diritti) VALUES ('Amministratore',null,'Configurazione e manutenzione','RW');\n+INSERT INTO acl(ruolo,id_utenza,servizio,diritti) VALUES ('Amministratore',null,'Anagrafica PagoPA','RW');\n+INSERT INTO acl(ruolo,id_utenza,servizio,diritti) VALUES ('Amministratore',null,'Anagrafica Ruoli','RW');\n+\n+-- Censimento del ruolo operatore\n+\n+INSERT INTO acl(ruolo,id_utenza,servizio,diritti) VALUES ('Operatore',null,'Rendicontazioni e Incassi','R');\n+INSERT INTO acl(ruolo,id_utenza,servizio,diritti) VALUES ('Operatore',null,'Pagamenti','R');\n+INSERT INTO acl(ruolo,id_utenza,servizio,diritti) VALUES ('Operatore',null,'Pendenze','R');\n+INSERT INTO acl(ruolo,id_utenza,servizio,diritti) VALUES ('Operatore',null,'Giornale degli Eventi','R');\n+\n+-- Censimento Tributo Bollo\n+\n+INSERT INTO tipi_tributo (cod_tributo, tipo_contabilita, cod_contabilita, descrizione) VALUES ('BOLLOT', '9', 'MBT', 'Marca da Bollo Telematica');\n+\n+-- Censimento Tipo Pendenza Libera\n+INSERT INTO tipi_versamento (cod_tipo_versamento, descrizione, paga_terzi, abilitato) VALUES ('LIBERO', 'Pendenza libera', false, true);\n+\n+-- Censimento Tipo Pendenza Bollo\n+INSERT INTO tipi_versamento (cod_tipo_versamento, descrizione, paga_terzi, abilitato) VALUES ('BOLLOT', 'Marca da Bollo Telematica', false, true);\n+\n+-- Configurazione delle sonde\n+\n+insert into sonde(nome, classe, soglia_warn, soglia_error) values ('update-psp', 'org.openspcoop2.utils.sonde.impl.SondaBatch', 86400000, 172800000);\n+insert into sonde(nome, classe, soglia_warn, soglia_error) values ('update-rnd', 'org.openspcoop2.utils.sonde.impl.SondaBatch', 18000000, 86400000);\n+insert into sonde(nome, classe, soglia_warn, soglia_error) values ('update-pnd', 'org.openspcoop2.utils.sonde.impl.SondaBatch', 7200000, 43200000);\n+insert into sonde(nome, classe, soglia_warn, soglia_error) values ('update-ntfy', 'org.openspcoop2.utils.sonde.impl.SondaBatch', 86400000, 172800000);\n+insert into sonde(nome, classe, soglia_warn, soglia_error) values ('check-ntfy', 'org.openspcoop2.utils.sonde.impl.SondaCoda', 10, 100);\n+insert into sonde(nome, classe, soglia_warn, soglia_error) values ('generazione-avvisi', 'org.openspcoop2.utils.sonde.impl.SondaBatch', 3600000, 21600000);\n+insert into sonde(nome, classe, soglia_warn, soglia_error) values ('caricamento-tracciati', 'org.openspcoop2.utils.sonde.impl.SondaBatch', 3600000, 21600000);\n+insert into sonde(nome, classe, soglia_warn, soglia_error) values ('check-tracciati', 'org.openspcoop2.utils.sonde.impl.SondaCoda', 1, 1);\n+insert into sonde(nome, classe, soglia_warn, soglia_error) values ('spedizione-promemoria', 'org.openspcoop2.utils.sonde.impl.SondaBatch', 86400000, 172800000);\n+insert into sonde(nome, classe, soglia_warn, soglia_error) values ('check-promemoria', 'org.openspcoop2.utils.sonde.impl.SondaCoda', 10, 100);\n+insert into sonde(nome, classe, soglia_warn, soglia_error) values ('reset-cache', 'org.openspcoop2.utils.sonde.impl.SondaBatch', 86400000, 172800000);\n+insert into sonde(nome, classe, soglia_warn, soglia_error) values ('update-ntfy-appio', 'org.openspcoop2.utils.sonde.impl.SondaBatch', 86400000, 172800000);\n+insert into sonde(nome, classe, soglia_warn, soglia_error) values ('check-ntfy-appio', 'org.openspcoop2.utils.sonde.impl.SondaCoda', 10, 100);\n+insert into sonde(nome, classe, soglia_warn, soglia_error) values ('gestione-promemoria', 'org.openspcoop2.utils.sonde.impl.SondaBatch', 86400000, 172800000);\n+insert into sonde(nome, classe, soglia_warn, soglia_error) values ('check-gestione-promemoria', 'org.openspcoop2.utils.sonde.impl.SondaCoda', 10, 100);\n+\n+-- Configurazione della variabile per memorizzare la data reset della cache\n+insert into batch(cod_batch) values ('cache-anagrafica');\n+\n+-- Configurazione Generale \n+-- Giornale Eventi\n+INSERT INTO configurazione (nome,valore) VALUES ('giornale_eventi','{\"apiEnte\":{\"letture\":{\"log\":\"SEMPRE\",\"dump\":\"SOLO_ERRORE\"},\"scritture\":{\"log\":\"SEMPRE\",\"dump\":\"SOLO_ERRORE\"}},\"apiPagamento\":{\"letture\":{\"log\":\"MAI\",\"dump\":\"MAI\"},\"scritture\":{\"log\":\"SEMPRE\",\"dump\":\"SOLO_ERRORE\"}},\"apiRagioneria\":{\"letture\":{\"log\":\"MAI\",\"dump\":\"MAI\"},\"scritture\":{\"log\":\"SEMPRE\",\"dump\":\"SOLO_ERRORE\"}},\"apiBackoffice\":{\"letture\":{\"log\":\"MAI\",\"dump\":\"MAI\"},\"scritture\":{\"log\":\"SEMPRE\",\"dump\":\"SEMPRE\"}},\"apiPagoPA\":{\"letture\":{\"log\":\"SEMPRE\",\"dump\":\"SEMPRE\"},\"scritture\":{\"log\":\"SEMPRE\",\"dump\":\"SEMPRE\"}},\"apiPendenze\":{\"letture\":{\"log\":\"MAI\",\"dump\":\"MAI\"},\"scritture\":{\"log\":\"SEMPRE\",\"dump\":\"SOLO_ERRORE\"}},\"apiBackendIO\":{\"letture\":{\"log\":\"SEMPRE\",\"dump\":\"SEMPRE\"},\"scritture\":{\"log\":\"SEMPRE\",\"dump\":\"SEMPRE\"}}}');\n+-- Regole di Hardening API Public\n+INSERT INTO configurazione (NOME,VALORE) values ('hardening', '{\"abilitato\": false, \"googleCatpcha\": {\"serverURL\":\"https://www.google.com/recaptcha/api/siteverify\",\"siteKey\":\"CHANGE_ME\",\"secretKey\":\"CHANGE_ME\",\"soglia\":1.0,\"responseParameter\":\"gRecaptchaResponse\",\"denyOnFail\":true,\"readTimeout\":5000,\"connectionTimeout\":5000}}');\n+INSERT INTO configurazione (NOME,VALORE) values ('tracciato_csv', '{\"tipo\":\"freemarker\",\"intestazione\":\"idA2A,idPendenza,idDominio,tipoPendenza,numeroAvviso,pdfAvviso,tipoSoggettoPagatore,identificativoPagatore,anagraficaPagatore,indirizzoPagatore,civicoPagatore,capPagatore,localitaPagatore,provinciaPagatore,nazionePagatore,emailPagatore,cellularePagatore,errore\",\"richiesta\":\"\\\"PCNhc3NpZ24gY3N2VXRpbHMgPSBjbGFzc1siaXQuZ292cGF5LmNvcmUudXRpbHMuQ1NWVXRpbHMiXS5nZXRJbnN0YW5jZSgpPgoKPCNhc3NpZ24gY3N2UmVjb3JkID0gY3N2VXRpbHMuZ2V0Q1NWUmVjb3JkKGxpbmVhQ3N2UmljaGllc3RhKT4KPCNpZiBjc3ZVdGlscy5pc09wZXJhemlvbmVBbm51bGxhbWVudG8oY3N2UmVjb3JkLCAxMik+Cgk8I2Fzc2lnbiB0bXA9Y29udGV4dD9hcGkucHV0KCJ0aXBvT3BlcmF6aW9uZSIsICJERUwiKSEvPgp7CgkiaWRBMkEiOiAke2NzdlV0aWxzLnRvSnNvblZhbHVlKGNzdlJlY29yZCwgMCl9LAoJImlkUGVuZGVuemEiOiAke2NzdlV0aWxzLnRvSnNvblZhbHVlKGNzdlJlY29yZCwgMSl9Cn0KPCNlbHNlPgo8I2lmICFjc3ZVdGlscy5pc0VtcHR5KGNzdlJlY29yZCwgODIpPgogIDwjYXNzaWduIGRhdGFBdnZpc29TdHJpbmcgPSBjc3ZSZWNvcmQuZ2V0KDgyKT4KICA8I2lmIGRhdGFBdnZpc29TdHJpbmcuZXF1YWxzKCJNQUkiKT4KICAJPCNhc3NpZ24gdG1wPWNvbnRleHQ/YXBpLnB1dCgiYXZ2aXNhdHVyYSIsIGZhbHNlKSEvPgogIDwjZWxzZT4KICAJPCNhc3NpZ24gc2RmVXRpbHMgPSBjbGFzc1siaXQuZ292cGF5LmNvcmUudXRpbHMuU2ltcGxlRGF0ZUZvcm1hdFV0aWxzIl0uZ2V0SW5zdGFuY2UoKT4KICAJPCNhc3NpZ24gZGF0YUF2dmlzYXR1cmFEYXRlID0gc2RmVXRpbHMuZ2V0RGF0YUF2dmlzYXR1cmEoZGF0YUF2dmlzb1N0cmluZywgImRhdGFBdnZpc2F0dXJhIikgPgogIAk8I2Fzc2lnbiBjb250ZXh0VE1QID0gY29udGV4dCA+CiAgCTwjYXNzaWduIHRtcD1jb250ZXh0P2FwaS5wdXQoImRhdGFBdnZpc2F0dXJhIiwgZGF0YUF2dmlzYXR1cmFEYXRlKSEvPgogIDwvI2lmPgo8LyNpZj4KewoJImlkQTJBIjogJHtjc3ZVdGlscy50b0pzb25WYWx1ZShjc3ZSZWNvcmQsIDApfSwKCSJpZFBlbmRlbnphIjogJHtjc3ZVdGlscy50b0pzb25WYWx1ZShjc3ZSZWNvcmQsIDEpfSwKCSJpZERvbWluaW8iOiAke2NzdlV0aWxzLnRvSnNvblZhbHVlKGNzdlJlY29yZCwgMil9LAoJIm51bWVyb0F2dmlzbyI6ICR7Y3N2VXRpbHMudG9Kc29uVmFsdWUoY3N2UmVjb3JkLCAzKX0sCQoJImlkVGlwb1BlbmRlbnphIjogJHtjc3ZVdGlscy50b0pzb25WYWx1ZShjc3ZSZWNvcmQsIDQpfSwKCSJpZFVuaXRhT3BlcmF0aXZhIjogJHtjc3ZVdGlscy50b0pzb25WYWx1ZShjc3ZSZWNvcmQsIDUpfSwKIAkiY2F1c2FsZSI6ICR7Y3N2VXRpbHMudG9Kc29uVmFsdWUoY3N2UmVjb3JkLCA2KX0sCiAJImFubm9SaWZlcmltZW50byI6ICR7Y3N2VXRpbHMudG9Kc29uVmFsdWUoY3N2UmVjb3JkLCA3KX0sCiAJImNhcnRlbGxhUGFnYW1lbnRvIjogJHtjc3ZVdGlscy50b0pzb25WYWx1ZShjc3ZSZWNvcmQsIDgpfSwKIAk8I2lmICFjc3ZVdGlscy5pc0VtcHR5KGNzdlJlY29yZCwgOSk+ImRhdGlBbGxlZ2F0aSI6ICR7Y3N2UmVjb3JkLmdldCg5KX0sPC8jaWY+CiAJImRpcmV6aW9uZSI6ICR7Y3N2VXRpbHMudG9Kc29uVmFsdWUoY3N2UmVjb3JkLCAxMCl9LAogCSJkaXZpc2lvbmUiOiAke2NzdlV0aWxzLnRvSnNvblZhbHVlKGNzdlJlY29yZCwgMTEpfSwKIAkiaW1wb3J0byI6ICR7Y3N2VXRpbHMudG9Kc29uVmFsdWUoY3N2UmVjb3JkLCAxMil9LAoJImRhdGFWYWxpZGl0YSI6ICR7Y3N2VXRpbHMudG9Kc29uVmFsdWUoY3N2UmVjb3JkLCAxMyl9LAoJImRhdGFTY2FkZW56YSI6ICR7Y3N2VXRpbHMudG9Kc29uVmFsdWUoY3N2UmVjb3JkLCAxNCl9LAoJInRhc3Nvbm9taWFBdnZpc28iOiAke2NzdlV0aWxzLnRvSnNvblZhbHVlKGNzdlJlY29yZCwgMTUpfSwKCTwjaWYgIWNzdlV0aWxzLmlzRW1wdHkoY3N2UmVjb3JkLCA4Myk+CgkiZG9jdW1lbnRvIjogewoJCSJpZGVudGlmaWNhdGl2byI6ICR7Y3N2VXRpbHMudG9Kc29uVmFsdWUoY3N2UmVjb3JkLCA4Myl9LAoJCTwjaWYgIWNzdlV0aWxzLmlzRW1wdHkoY3N2UmVjb3JkLCA4NSk+CgkJCQoJCQk8I2Fzc2lnbiByYXRhU3RyaW5nID0gY3N2UmVjb3JkLmdldCg4NSk+CgkJCTwjaWYgcmF0YVN0cmluZz9tYXRjaGVzKCdbMC05XSonKT4KCQkJCSJyYXRhIjogJHtjc3ZVdGlscy50b0pzb25WYWx1ZShjc3ZSZWNvcmQsIDg1KX0sCQoJCQk8I2Vsc2U+CgkJCQkic29nbGlhIjogewoJCQkJCSJ0aXBvIjogIiR7cmF0YVN0cmluZ1swLi40XX0iLAoJCQkJCSJnaW9ybmkiOiAke3JhdGFTdHJpbmdbNS4uXX0gCgkJCQl9LAkgIAoJCQk8LyNpZj4KCQk8LyNpZj4KCQkiZGVzY3JpemlvbmUiOiAke2NzdlV0aWxzLnRvSnNvblZhbHVlKGNzdlJlY29yZCwgODQpfQoJfSwKCTwvI2lmPgoJInNvZ2dldHRvUGFnYXRvcmUiOiB7CgkJInRpcG8iOiAke2NzdlV0aWxzLnRvSnNvblZhbHVlKGNzdlJlY29yZCwgMTYpfSwKCQkiaWRlbnRpZmljYXRpdm8iOiAke2NzdlV0aWxzLnRvSnNvblZhbHVlKGNzdlJlY29yZCwgMTcpfSwKCQkiYW5hZ3JhZmljYSI6ICR7Y3N2VXRpbHMudG9Kc29uVmFsdWUoY3N2UmVjb3JkLCAxOCl9LAoJCSJpbmRpcml6em8iOiAke2NzdlV0aWxzLnRvSnNvblZhbHVlKGNzdlJlY29yZCwgMTkpfSwKCQkiY2l2aWNvIjogJHtjc3ZVdGlscy50b0pzb25WYWx1ZShjc3ZSZWNvcmQsIDIwKX0sCgkJImNhcCI6ICR7Y3N2VXRpbHMudG9Kc29uVmFsdWUoY3N2UmVjb3JkLCAyMSl9LAoJCSJsb2NhbGl0YSI6ICR7Y3N2VXRpbHMudG9Kc29uVmFsdWUoY3N2UmVjb3JkLCAyMil9LAoJCSJwcm92aW5jaWEiOiAke2NzdlV0aWxzLnRvSnNvblZhbHVlKGNzdlJlY29yZCwgMjMpfSwKCQkibmF6aW9uZSI6ICR7Y3N2VXRpbHMudG9Kc29uVmFsdWUoY3N2UmVjb3JkLCAyNCl9LAoJCSJlbWFpbCI6ICR7Y3N2VXRpbHMudG9Kc29uVmFsdWUoY3N2UmVjb3JkLCAyNSl9LAoJCSJjZWxsdWxhcmUiOiAke2NzdlV0aWxzLnRvSnNvblZhbHVlKGNzdlJlY29yZCwgMjYpfQoJfSwKCSJ2b2NpIjogWwoJCXsKCQkJImlkVm9jZVBlbmRlbnphIjogJHtjc3ZVdGlscy50b0pzb25WYWx1ZShjc3ZSZWNvcmQsIDI3KX0sCgkJCSJpbXBvcnRvIjogJHtjc3ZVdGlscy50b0pzb25WYWx1ZShjc3ZSZWNvcmQsIDI4KX0sCgkJCSJkZXNjcml6aW9uZSI6ICR7Y3N2VXRpbHMudG9Kc29uVmFsdWUoY3N2UmVjb3JkLCAyOSl9LAoJCQk8I2lmICFjc3ZVdGlscy5pc0VtcHR5KGNzdlJlY29yZCwgMzQpPgoJCQkidGlwb0VudHJhdGEiOiAke2NzdlV0aWxzLnRvSnNvblZhbHVlKGNzdlJlY29yZCwgMzQpfQoJCQk8I2Vsc2VpZiAhY3N2VXRpbHMuaXNFbXB0eShjc3ZSZWNvcmQsIDM1KT4KCQkJInRpcG9Cb2xsbyI6ICR7Y3N2VXRpbHMudG9Kc29uVmFsdWUoY3N2UmVjb3JkLCAzNSl9LAogICAgICAgCQkiaGFzaERvY3VtZW50byI6ICR7Y3N2VXRpbHMudG9Kc29uVmFsdWUoY3N2UmVjb3JkLCAzNil9LAogICAgICAJCSJwcm92aW5jaWFSZXNpZGVuemEiOiAke2NzdlV0aWxzLnRvSnNvblZhbHVlKGNzdlJlY29yZCwgMzcpfQoJCQk8I2Vsc2U+CgkJCSJpYmFuQWNjcmVkaXRvIjogJHtjc3ZVdGlscy50b0pzb25WYWx1ZShjc3ZSZWNvcmQsIDMwKX0sCgkJCSJpYmFuQXBwb2dnaW8iOiAke2NzdlV0aWxzLnRvSnNvblZhbHVlKGNzdlJlY29yZCwgMzEpfSwKCQkJInRpcG9Db250YWJpbGl0YSI6ICR7Y3N2VXRpbHMudG9Kc29uVmFsdWUoY3N2UmVjb3JkLCAzMil9LAoJCQkiY29kaWNlQ29udGFiaWxpdGEiOiAke2NzdlV0aWxzLnRvSnNvblZhbHVlKGNzdlJlY29yZCwgMzMpfQoJCQk8LyNpZj4KCgkJfQoJCTwjaWYgIWNzdlV0aWxzLmlzRW1wdHkoY3N2UmVjb3JkLCAzOCk+CgkJLHsKCQkJImlkVm9jZVBlbmRlbnphIjogJHtjc3ZVdGlscy50b0pzb25WYWx1ZShjc3ZSZWNvcmQsIDM4KX0sCgkJCSJpbXBvcnRvIjogJHtjc3ZVdGlscy50b0pzb25WYWx1ZShjc3ZSZWNvcmQsIDM5KX0sCgkJCSJkZXNjcml6aW9uZSI6ICR7Y3N2VXRpbHMudG9Kc29uVmFsdWUoY3N2UmVjb3JkLCA0MCl9LAoJCQk8I2lmICFjc3ZVdGlscy5pc0VtcHR5KGNzdlJlY29yZCwgNDUpPgoJCQkidGlwb0VudHJhdGEiOiAke2NzdlV0aWxzLnRvSnNvblZhbHVlKGNzdlJlY29yZCwgNDUpfQoJCQk8I2Vsc2VpZiAhY3N2VXRpbHMuaXNFbXB0eShjc3ZSZWNvcmQsIDQ2KT4KCQkJInRpcG9Cb2xsbyI6ICR7Y3N2VXRpbHMudG9Kc29uVmFsdWUoY3N2UmVjb3JkLCA0Nil9LAogICAgICAgCQkiaGFzaERvY3VtZW50byI6ICR7Y3N2VXRpbHMudG9Kc29uVmFsdWUoY3N2UmVjb3JkLCA0Nyl9LAogICAgICAJCSJwcm92aW5jaWFSZXNpZGVuemEiOiAke2NzdlV0aWxzLnRvSnNvblZhbHVlKGNzdlJlY29yZCwgNDgpfQoJCQk8I2Vsc2U+CgkJCSJpYmFuQWNjcmVkaXRvIjogJHtjc3ZVdGlscy50b0pzb25WYWx1ZShjc3ZSZWNvcmQsIDQxKX0sCgkJCSJpYmFuQXBwb2dnaW8iOiAke2NzdlV0aWxzLnRvSnNvblZhbHVlKGNzdlJlY29yZCwgNDIpfSwKCQkJInRpcG9Db250YWJpbGl0YSI6ICR7Y3N2VXRpbHMudG9Kc29uVmFsdWUoY3N2UmVjb3JkLCA0Myl9LAoJCQkiY29kaWNlQ29udGFiaWxpdGEiOiAke2NzdlV0aWxzLnRvSnNvblZhbHVlKGNzdlJlY29yZCwgNDQpfQoJCQk8LyNpZj4KCQl9CgkJPC8jaWY+CgkJPCNpZiAhY3N2VXRpbHMuaXNFbXB0eShjc3ZSZWNvcmQsIDQ5KT4KCQksewoJCQkiaWRWb2NlUGVuZGVuemEiOiAke2NzdlV0aWxzLnRvSnNvblZhbHVlKGNzdlJlY29yZCwgNDkpfSwKCQkJImltcG9ydG8iOiAke2NzdlV0aWxzLnRvSnNvblZhbHVlKGNzdlJlY29yZCwgNTApfSwKCQkJImRlc2NyaXppb25lIjogJHtjc3ZVdGlscy50b0pzb25WYWx1ZShjc3ZSZWNvcmQsIDUxKX0sCgkJCTwjaWYgIWNzdlV0aWxzLmlzRW1wdHkoY3N2UmVjb3JkLCA1Nik+CgkJCSJ0aXBvRW50cmF0YSI6ICR7Y3N2VXRpbHMudG9Kc29uVmFsdWUoY3N2UmVjb3JkLCA1Nil9CgkJCTwjZWxzZWlmICFjc3ZVdGlscy5pc0VtcHR5KGNzdlJlY29yZCwgNTcpPgoJCQkidGlwb0JvbGxvIjogJHtjc3ZVdGlscy50b0pzb25WYWx1ZShjc3ZSZWNvcmQsIDU3KX0sCiAgICAgICAJCSJoYXNoRG9jdW1lbnRvIjogJHtjc3ZVdGlscy50b0pzb25WYWx1ZShjc3ZSZWNvcmQsIDU4KX0sCiAgICAgIAkJInByb3ZpbmNpYVJlc2lkZW56YSI6ICR7Y3N2VXRpbHMudG9Kc29uVmFsdWUoY3N2UmVjb3JkLCA1OSl9CgkJCTwjZWxzZT4KCQkJImliYW5BY2NyZWRpdG8iOiAke2NzdlV0aWxzLnRvSnNvblZhbHVlKGNzdlJlY29yZCwgNTIpfSwKCQkJImliYW5BcHBvZ2dpbyI6ICR7Y3N2VXRpbHMudG9Kc29uVmFsdWUoY3N2UmVjb3JkLCA1Myl9LAoJCQkidGlwb0NvbnRhYmlsaXRhIjogJHtjc3ZVdGlscy50b0pzb25WYWx1ZShjc3ZSZWNvcmQsIDU0KX0sCgkJCSJjb2RpY2VDb250YWJpbGl0YSI6ICR7Y3N2VXRpbHMudG9Kc29uVmFsdWUoY3N2UmVjb3JkLCA1NSl9CgkJCTwvI2lmPgoJCX0KCQk8LyNpZj4KCQk8I2lmICFjc3ZVdGlscy5pc0VtcHR5KGNzdlJlY29yZCwgNjApPgoJCSx7CgkJCSJpZFZvY2VQZW5kZW56YSI6ICR7Y3N2VXRpbHMudG9Kc29uVmFsdWUoY3N2UmVjb3JkLCA2MCl9LAoJCQkiaW1wb3J0byI6ICR7Y3N2VXRpbHMudG9Kc29uVmFsdWUoY3N2UmVjb3JkLCA2MSl9LAoJCQkiZGVzY3JpemlvbmUiOiAke2NzdlV0aWxzLnRvSnNvblZhbHVlKGNzdlJlY29yZCwgNjIpfSwKCQkJPCNpZiAhY3N2VXRpbHMuaXNFbXB0eShjc3ZSZWNvcmQsIDY3KT4KCQkJInRpcG9FbnRyYXRhIjogJHtjc3ZVdGlscy50b0pzb25WYWx1ZShjc3ZSZWNvcmQsIDY3KX0KCQkJPCNlbHNlaWYgIWNzdlV0aWxzLmlzRW1wdHkoY3N2UmVjb3JkLCA2OCk+CgkJCSJ0aXBvQm9sbG8iOiAke2NzdlV0aWxzLnRvSnNvblZhbHVlKGNzdlJlY29yZCwgNjgpfSwKICAgICAgIAkJImhhc2hEb2N1bWVudG8iOiAke2NzdlV0aWxzLnRvSnNvblZhbHVlKGNzdlJlY29yZCwgNjkpfSwKICAgICAgCQkicHJvdmluY2lhUmVzaWRlbnphIjogJHtjc3ZVdGlscy50b0pzb25WYWx1ZShjc3ZSZWNvcmQsIDcwKX0KCQkJPCNlbHNlPgoJCQkiaWJhbkFjY3JlZGl0byI6ICR7Y3N2VXRpbHMudG9Kc29uVmFsdWUoY3N2UmVjb3JkLCA2Myl9LAoJCQkiaWJhbkFwcG9nZ2lvIjogJHtjc3ZVdGlscy50b0pzb25WYWx1ZShjc3ZSZWNvcmQsIDY0KX0sCgkJCSJ0aXBvQ29udGFiaWxpdGEiOiAke2NzdlV0aWxzLnRvSnNvblZhbHVlKGNzdlJlY29yZCwgNjUpfSwKCQkJImNvZGljZUNvbnRhYmlsaXRhIjogJHtjc3ZVdGlscy50b0pzb25WYWx1ZShjc3ZSZWNvcmQsIDY2KX0KCQkJPC8jaWY+CgkJfQoJCTwvI2lmPgoJCTwjaWYgIWNzdlV0aWxzLmlzRW1wdHkoY3N2UmVjb3JkLCA3MSk+CgkJLHsKCQkJImlkVm9jZVBlbmRlbnphIjogJHtjc3ZVdGlscy50b0pzb25WYWx1ZShjc3ZSZWNvcmQsIDcxKX0sCgkJCSJpbXBvcnRvIjogJHtjc3ZVdGlscy50b0pzb25WYWx1ZShjc3ZSZWNvcmQsIDcyKX0sCgkJCSJkZXNjcml6aW9uZSI6ICR7Y3N2VXRpbHMudG9Kc29uVmFsdWUoY3N2UmVjb3JkLCA3Myl9LAoJCQk8I2lmICFjc3ZVdGlscy5pc0VtcHR5KGNzdlJlY29yZCwgNzgpPgoJCQkidGlwb0VudHJhdGEiOiAke2NzdlV0aWxzLnRvSnNvblZhbHVlKGNzdlJlY29yZCwgNzgpfQoJCQk8I2Vsc2VpZiAhY3N2VXRpbHMuaXNFbXB0eShjc3ZSZWNvcmQsIDc5KT4KCQkJInRpcG9Cb2xsbyI6ICR7Y3N2VXRpbHMudG9Kc29uVmFsdWUoY3N2UmVjb3JkLCA3OSl9LAogICAgICAgCQkiaGFzaERvY3VtZW50byI6ICR7Y3N2VXRpbHMudG9Kc29uVmFsdWUoY3N2UmVjb3JkLCA4MCl9LAogICAgICAJCSJwcm92aW5jaWFSZXNpZGVuemEiOiAke2NzdlV0aWxzLnRvSnNvblZhbHVlKGNzdlJlY29yZCwgODEpfQoJCQk8I2Vsc2U+CgkJCSJpYmFuQWNjcmVkaXRvIjogJHtjc3ZVdGlscy50b0pzb25WYWx1ZShjc3ZSZWNvcmQsIDc0KX0sCgkJCSJpYmFuQXBwb2dnaW8iOiAke2NzdlV0aWxzLnRvSnNvblZhbHVlKGNzdlJlY29yZCwgNzUpfSwKCQkJInRpcG9Db250YWJpbGl0YSI6ICR7Y3N2VXRpbHMudG9Kc29uVmFsdWUoY3N2UmVjb3JkLCA3Nil9LAoJCQkiY29kaWNlQ29udGFiaWxpdGEiOiAke2NzdlV0aWxzLnRvSnNvblZhbHVlKGNzdlJlY29yZCwgNzcpfQoJCQk8LyNpZj4KCQl9CgkJPC8jaWY+CgoJXQp9CjwvI2lmPg==\\\"\",\"risposta\":\"\\\"PCNhc3NpZ24gY3N2VXRpbHMgPSBjbGFzc1siaXQuZ292cGF5LmNvcmUudXRpbHMuQ1NWVXRpbHMiXS5nZXRJbnN0YW5jZSgpIC8+CjwjaWYgZXNpdG9PcGVyYXppb25lID09ICJFU0VHVUlUT19PSyI+CjwjYXNzaWduIGlkQTJBID0gYXBwbGljYXppb25lLmdldENvZEFwcGxpY2F6aW9uZSgpIC8+CjwjYXNzaWduIGlkUGVuZGVuemEgPSB2ZXJzYW1lbnRvLmdldENvZFZlcnNhbWVudG9FbnRlKCkgLz4KPCNhc3NpZ24gaWREb21pbmlvID0gZG9taW5pby5nZXRDb2REb21pbmlvKCkgLz4KPCNhc3NpZ24gdGlwb1BlbmRlbnphID0gaWRUaXBvVmVyc2FtZW50byAvPgo8I2Fzc2lnbiBudW1lcm9BdnZpc28gPSB2ZXJzYW1lbnRvLmdldE51bWVyb0F2dmlzbygpISAvPgo8I2lmIG51bWVyb0F2dmlzbz9oYXNfY29udGVudD4KCTwjYXNzaWduIHBkZkF2dmlzbyA9IGlkRG9taW5pbyArICJfIiArIG51bWVyb0F2dmlzbyArICIucGRmIiAvPgo8LyNpZj4KPCNhc3NpZ24gdGlwbyA9IHZlcnNhbWVudG8uZ2V0QW5hZ3JhZmljYURlYml0b3JlKCkuZ2V0VGlwbygpLnRvU3RyaW5nKCkgLz4KPCNhc3NpZ24gaWRlbnRpZmljYXRpdm8gPSB2ZXJzYW1lbnRvLmdldEFuYWdyYWZpY2FEZWJpdG9yZSgpLmdldENvZFVuaXZvY28oKSEgLz4KPCNhc3NpZ24gYW5hZ3JhZmljYSA9IHZlcnNhbWVudG8uZ2V0QW5hZ3JhZmljYURlYml0b3JlKCkuZ2V0UmFnaW9uZVNvY2lhbGUoKSEgLz4KPCNhc3NpZ24gaW5kaXJpenpvID0gdmVyc2FtZW50by5nZXRBbmFncmFmaWNhRGViaXRvcmUoKS5nZXRJbmRpcml6em8oKSEgLz4KPCNhc3NpZ24gY2l2aWNvID0gdmVyc2FtZW50by5nZXRBbmFncmFmaWNhRGViaXRvcmUoKS5nZXRDaXZpY28oKSEgLz4KPCNhc3NpZ24gY2FwID0gdmVyc2FtZW50by5nZXRBbmFncmFmaWNhRGViaXRvcmUoKS5nZXRDYXAoKSEgLz4KPCNhc3NpZ24gbG9jYWxpdGEgPSB2ZXJzYW1lbnRvLmdldEFuYWdyYWZpY2FEZWJpdG9yZSgpLmdldExvY2FsaXRhKCkhIC8+CjwjYXNzaWduIHByb3ZpbmNpYSA9IHZlcnNhbWVudG8uZ2V0QW5hZ3JhZmljYURlYml0b3JlKCkuZ2V0UHJvdmluY2lhKCkhIC8+CjwjYXNzaWduIG5hemlvbmUgPSB2ZXJzYW1lbnRvLmdldEFuYWdyYWZpY2FEZWJpdG9yZSgpLmdldE5hemlvbmUoKSEgLz4KPCNhc3NpZ24gZW1haWwgPSB2ZXJzYW1lbnRvLmdldEFuYWdyYWZpY2FEZWJpdG9yZSgpLmdldEVtYWlsKCkhIC8+CjwjYXNzaWduIGNlbGx1bGFyZSA9IHZlcnNhbWVudG8uZ2V0QW5hZ3JhZmljYURlYml0b3JlKCkuZ2V0Q2VsbHVsYXJlKCkhIC8+CjwjYXNzaWduIGNzdlJlY29yZCA9IGNzdlV0aWxzLnRvQ3N2KGlkQTJBLCBpZFBlbmRlbnphLCBpZERvbWluaW8sIHRpcG9QZW5kZW56YSwgbnVtZXJvQXZ2aXNvLCBwZGZBdnZpc28sIHRpcG8sIGlkZW50aWZpY2F0aXZvLCBhbmFncmFmaWNhLCBpbmRpcml6em8sIGNpdmljbywgY2FwLCBsb2NhbGl0YSwgcHJvdmluY2lhLCBuYXppb25lLCBlbWFpbCwgY2VsbHVsYXJlKSAvPgoke2NzdlJlY29yZH0KPCNlbHNlPgosLCwsLCwsLCwsLCwsLCwsLCR7ZGVzY3JpemlvbmVFc2l0b09wZXJhemlvbmV9CjwvI2lmPg==\\\"\"}');\n+INSERT INTO configurazione (NOME,VALORE) values ('mail_batch', '{\"abilitato\": false, \"mailserver\": {\"host\": null, \"port\": null, \"username\": null, \"password\": null, \"from\": null, \"readTimeout\": 120000, \"connectionTimeout\": 10000 }}');\n+INSERT INTO configurazione (NOME,VALORE) values ('app_io_batch', '{\"abilitato\": false, \"url\": null, \"timeToLive\": 3600 }');\n+INSERT INTO configurazione (NOME,VALORE) values ('avvisatura_mail', '{\"promemoriaAvviso\": { \"tipo\": \"freemarker\", \"oggetto\": \"\\\"UHJvbWVtb3JpYSBwYWdhbWVudG86ICR7dmVyc2FtZW50by5nZXRDYXVzYWxlVmVyc2FtZW50bygpLmdldFNpbXBsZSgpfQ==\\\"\", \"messaggio\": \"\\\"R2VudGlsZSAke3ZlcnNhbWVudG8uZ2V0QW5hZ3JhZmljYURlYml0b3JlKCkuZ2V0UmFnaW9uZVNvY2lhbGUoKX0sCgpsZSBub3RpZmljaGlhbW8gY2hlIMOoIHN0YXRhIGVtZXNzYSB1bmEgcmljaGllc3RhIGRpIHBhZ2FtZW50byBhIHN1byBjYXJpY286ICR7dmVyc2FtZW50by5nZXRDYXVzYWxlVmVyc2FtZW50bygpLmdldFNpbXBsZSgpfQoKPCNpZiB2ZXJzYW1lbnRvLmdldE51bWVyb0F2dmlzbygpP2hhc19jb250ZW50PgpQdcOyIGVmZmV0dHVhcmUgaWwgcGFnYW1lbnRvIHRyYW1pdGUgbCdhcHAgbW9iaWxlIElPIG9wcHVyZSBwcmVzc28gdW5vIGRlaSBwcmVzdGF0b3JpIGRpIHNlcnZpemkgZGkgcGFnYW1lbnRvIGFkZXJlbnRpIGFsIGNpcmN1aXRvIHBhZ29QQSB1dGlsaXp6YW5kbyBsJ2F2dmlzbyBkaSBwYWdhbWVudG8gYWxsZWdhdG8uCjwjZWxzZT4KUHVvJyBlZmZldHR1YXJlIGlsIHBhZ2FtZW50byBvbi1saW5lIHByZXNzbyBpbCBwb3J0YWxlIGRlbGwnZW50ZSBjcmVkaXRvcmU6ICR7ZG9taW5pby5nZXRSYWdpb25lU29jaWFsZSgpfSAKPC8jaWY+CgpEaXN0aW50aSBzYWx1dGku\\\"\", \"allegaPdf\": true }, \"promemoriaRicevuta\": { \"tipo\": \"freemarker\", \"oggetto\": \"\\\"PCNpZiBycHQuZ2V0RXNpdG9QYWdhbWVudG8oKS5nZXRDb2RpZmljYSgpID0gMD4KTm90aWZpY2EgcGFnYW1lbnRvIGVzZWd1aXRvOiAke3JwdC5nZXRDb2REb21pbmlvKCl9LyR7cnB0LmdldEl1digpfS8ke3JwdC5nZXRDY3AoKX0KPCNlbHNlaWYgcnB0LmdldEVzaXRvUGFnYW1lbnRvKCkuZ2V0Q29kaWZpY2EoKSA9IDE+Ck5vdGlmaWNhIHBhZ2FtZW50byBub24gZXNlZ3VpdG86ICR7cnB0LmdldENvZERvbWluaW8oKX0vJHtycHQuZ2V0SXV2KCl9LyR7cnB0LmdldENjcCgpfQo8I2Vsc2VpZiBycHQuZ2V0RXNpdG9QYWdhbWVudG8oKS5nZXRDb2RpZmljYSgpID0gMj4KTm90aWZpY2EgcGFnYW1lbnRvIGVzZWd1aXRvIHBhcnppYWxtZW50ZTogJHtycHQuZ2V0Q29kRG9taW5pbygpfS8ke3JwdC5nZXRJdXYoKX0vJHtycHQuZ2V0Q2NwKCl9CjwjZWxzZWlmIHJwdC5nZXRFc2l0b1BhZ2FtZW50bygpLmdldENvZGlmaWNhKCkgPSAzPgpOb3RpZmljYSBkZWNvcnJlbnphIHRlcm1pbmkgcGFnYW1lbnRvOiAke3JwdC5nZXRDb2REb21pbmlvKCl9LyR7cnB0LmdldEl1digpfS8ke3JwdC5nZXRDY3AoKX0KPCNlbHNlaWYgcnB0LmdldEVzaXRvUGFnYW1lbnRvKCkuZ2V0Q29kaWZpY2EoKSA9IDQ+Ck5vdGlmaWNhIGRlY29ycmVuemEgdGVybWluaSBwYWdhbWVudG86ICR7cnB0LmdldENvZERvbWluaW8oKX0vJHtycHQuZ2V0SXV2KCl9LyR7cnB0LmdldENjcCgpfQo8LyNpZj4=\\\"\", \"messaggio\": \"\\\"PCNhc3NpZ24gZGF0YVJpY2hpZXN0YSA9IHJwdC5nZXREYXRhTXNnUmljaGllc3RhKCk/c3RyaW5nKCJ5eXl5LU1NLWRkIEhIOm1tOnNzIik+CklsIHBhZ2FtZW50byBkaSAiJHt2ZXJzYW1lbnRvLmdldENhdXNhbGVWZXJzYW1lbnRvKCkuZ2V0U2ltcGxlKCl9IiBlZmZldHR1YXRvIGlsICR7ZGF0YVJpY2hpZXN0YX0gcmlzdWx0YSBjb25jbHVzbyBjb24gZXNpdG8gJHtycHQuZ2V0RXNpdG9QYWdhbWVudG8oKS5uYW1lKCl9OgoKRW50ZSBjcmVkaXRvcmU6ICR7ZG9taW5pby5nZXRSYWdpb25lU29jaWFsZSgpfSAoJHtkb21pbmlvLmdldENvZERvbWluaW8oKX0pCklzdGl0dXRvIGF0dGVzdGFudGU6ICR7cnB0LmdldERlbm9taW5hemlvbmVBdHRlc3RhbnRlKCl9ICgke3JwdC5nZXRJZGVudGlmaWNhdGl2b0F0dGVzdGFudGUoKX0pCklkZW50aWZpY2F0aXZvIHVuaXZvY28gdmVyc2FtZW50byAoSVVWKTogJHtycHQuZ2V0SXV2KCl9CkNvZGljZSBjb250ZXN0byBwYWdhbWVudG8gKENDUCk6ICR7cnB0LmdldENjcCgpfQpJbXBvcnRvIHBhZ2F0bzogJHtycHQuZ2V0SW1wb3J0b1RvdGFsZVBhZ2F0bygpfQoKRGlzdGludGkgc2FsdXRpLg==\\\"\", \"allegaPdf\": true , \"soloEseguiti\": true }, \"promemoriaScadenza\": { \"tipo\": \"freemarker\", \"oggetto\": \"\\\"UHJvbWVtb3JpYSBwYWdhbWVudG86ICR7dmVyc2FtZW50by5nZXRDYXVzYWxlVmVyc2FtZW50bygpLmdldFNpbXBsZSgpfQ==\\\"\", \"messaggio\": \"\\\"R2VudGlsZSAke3ZlcnNhbWVudG8uZ2V0QW5hZ3JhZmljYURlYml0b3JlKCkuZ2V0UmFnaW9uZVNvY2lhbGUoKX0sCgpsZSBub3RpZmljaGlhbW8gY2hlIMOoIHN0YXRhIGVtZXNzYSB1bmEgcmljaGllc3RhIGRpIHBhZ2FtZW50byBhIHN1byBjYXJpY286ICR7dmVyc2FtZW50by5nZXRDYXVzYWxlVmVyc2FtZW50bygpLmdldFNpbXBsZSgpfQoKPCNpZiB2ZXJzYW1lbnRvLmdldE51bWVyb0F2dmlzbygpP2hhc19jb250ZW50PgpQdcOyIGVmZmV0dHVhcmUgaWwgcGFnYW1lbnRvIHRyYW1pdGUgbCdhcHAgbW9iaWxlIElPIG9wcHVyZSBwcmVzc28gdW5vIGRlaSBwcmVzdGF0b3JpIGRpIHNlcnZpemkgZGkgcGFnYW1lbnRvIGFkZXJlbnRpIGFsIGNpcmN1aXRvIHBhZ29QQSB1dGlsaXp6YW5kbyBsJ2F2dmlzbyBkaSBwYWdhbWVudG8gYWxsZWdhdG8uCjwjZWxzZT4KUHVvJyBlZmZldHR1YXJlIGlsIHBhZ2FtZW50byBvbi1saW5lIHByZXNzbyBpbCBwb3J0YWxlIGRlbGwnZW50ZSBjcmVkaXRvcmU6ICR7ZG9taW5pby5nZXRSYWdpb25lU29jaWFsZSgpfSAKPC8jaWY+CgpEaXN0aW50aSBzYWx1dGku\\\"\", \"preavviso\": 10 } }' );\n+INSERT INTO configurazione (NOME,VALORE) values ('avvisatura_app_io', '{\"promemoriaAvviso\": { \"tipo\": \"freemarker\", \"oggetto\": \"\\\"UHJvbWVtb3JpYSBwYWdhbWVudG86ICR7dmVyc2FtZW50by5nZXRDYXVzYWxlVmVyc2FtZW50bygpLmdldFNpbXBsZSgpfQ==\\\"\", \"messaggio\": \"\\\"R2VudGlsZSAke3ZlcnNhbWVudG8uZ2V0QW5hZ3JhZmljYURlYml0b3JlKCkuZ2V0UmFnaW9uZVNvY2lhbGUoKX0sCgpsZSBub3RpZmljaGlhbW8gY2hlIMOoIHN0YXRhIGVtZXNzYSB1bmEgcmljaGllc3RhIGRpIHBhZ2FtZW50byBhIHN1byBjYXJpY286ICR7dmVyc2FtZW50by5nZXRDYXVzYWxlVmVyc2FtZW50bygpLmdldFNpbXBsZSgpfQoKPCNpZiB2ZXJzYW1lbnRvLmdldE51bWVyb0F2dmlzbygpP2hhc19jb250ZW50PgpQdcOyIGVmZmV0dHVhcmUgaWwgcGFnYW1lbnRvIHRyYW1pdGUgbCdhcHAgbW9iaWxlIElPIG9wcHVyZSBwcmVzc28gdW5vIGRlaSBwcmVzdGF0b3JpIGRpIHNlcnZpemkgZGkgcGFnYW1lbnRvIGFkZXJlbnRpIGFsIGNpcmN1aXRvIHBhZ29QQSB1dGlsaXp6YW5kbyBsJ2F2dmlzbyBkaSBwYWdhbWVudG8gYWxsZWdhdG8uCjwjZWxzZT4KUHVvJyBlZmZldHR1YXJlIGlsIHBhZ2FtZW50byBvbi1saW5lIHByZXNzbyBpbCBwb3J0YWxlIGRlbGwnZW50ZSBjcmVkaXRvcmU6ICR7ZG9taW5pby5nZXRSYWdpb25lU29jaWFsZSgpfSAKPC8jaWY+CgpEaXN0aW50aSBzYWx1dGku\\\"\" }, \"promemoriaRicevuta\": { \"tipo\": \"freemarker\", \"oggetto\": \"\\\"PCNpZiBycHQuZ2V0RXNpdG9QYWdhbWVudG8oKS5nZXRDb2RpZmljYSgpID0gMD4KTm90aWZpY2EgcGFnYW1lbnRvIGVzZWd1aXRvOiAke3JwdC5nZXRDb2REb21pbmlvKCl9LyR7cnB0LmdldEl1digpfS8ke3JwdC5nZXRDY3AoKX0KPCNlbHNlaWYgcnB0LmdldEVzaXRvUGFnYW1lbnRvKCkuZ2V0Q29kaWZpY2EoKSA9IDE+Ck5vdGlmaWNhIHBhZ2FtZW50byBub24gZXNlZ3VpdG86ICR7cnB0LmdldENvZERvbWluaW8oKX0vJHtycHQuZ2V0SXV2KCl9LyR7cnB0LmdldENjcCgpfQo8I2Vsc2VpZiBycHQuZ2V0RXNpdG9QYWdhbWVudG8oKS5nZXRDb2RpZmljYSgpID0gMj4KTm90aWZpY2EgcGFnYW1lbnRvIGVzZWd1aXRvIHBhcnppYWxtZW50ZTogJHtycHQuZ2V0Q29kRG9taW5pbygpfS8ke3JwdC5nZXRJdXYoKX0vJHtycHQuZ2V0Q2NwKCl9CjwjZWxzZWlmIHJwdC5nZXRFc2l0b1BhZ2FtZW50bygpLmdldENvZGlmaWNhKCkgPSAzPgpOb3RpZmljYSBkZWNvcnJlbnphIHRlcm1pbmkgcGFnYW1lbnRvOiAke3JwdC5nZXRDb2REb21pbmlvKCl9LyR7cnB0LmdldEl1digpfS8ke3JwdC5nZXRDY3AoKX0KPCNlbHNlaWYgcnB0LmdldEVzaXRvUGFnYW1lbnRvKCkuZ2V0Q29kaWZpY2EoKSA9IDQ+Ck5vdGlmaWNhIGRlY29ycmVuemEgdGVybWluaSBwYWdhbWVudG86ICR7cnB0LmdldENvZERvbWluaW8oKX0vJHtycHQuZ2V0SXV2KCl9LyR7cnB0LmdldENjcCgpfQo8LyNpZj4=\\\"\", \"messaggio\": \"\\\"PCNhc3NpZ24gZGF0YVJpY2hpZXN0YSA9IHJwdC5nZXREYXRhTXNnUmljaGllc3RhKCk/c3RyaW5nKCJ5eXl5LU1NLWRkIEhIOm1tOnNzIik+CklsIHBhZ2FtZW50byBkaSAiJHt2ZXJzYW1lbnRvLmdldENhdXNhbGVWZXJzYW1lbnRvKCkuZ2V0U2ltcGxlKCl9IiBlZmZldHR1YXRvIGlsICR7ZGF0YVJpY2hpZXN0YX0gcmlzdWx0YSBjb25jbHVzbyBjb24gZXNpdG8gJHtycHQuZ2V0RXNpdG9QYWdhbWVudG8oKS5uYW1lKCl9OgoKRW50ZSBjcmVkaXRvcmU6ICR7ZG9taW5pby5nZXRSYWdpb25lU29jaWFsZSgpfSAoJHtkb21pbmlvLmdldENvZERvbWluaW8oKX0pCklzdGl0dXRvIGF0dGVzdGFudGU6ICR7cnB0LmdldERlbm9taW5hemlvbmVBdHRlc3RhbnRlKCl9ICgke3JwdC5nZXRJZGVudGlmaWNhdGl2b0F0dGVzdGFudGUoKX0pCklkZW50aWZpY2F0aXZvIHVuaXZvY28gdmVyc2FtZW50byAoSVVWKTogJHtycHQuZ2V0SXV2KCl9CkNvZGljZSBjb250ZXN0byBwYWdhbWVudG8gKENDUCk6ICR7cnB0LmdldENjcCgpfQpJbXBvcnRvIHBhZ2F0bzogJHtycHQuZ2V0SW1wb3J0b1RvdGFsZVBhZ2F0bygpfQoKRGlzdGludGkgc2FsdXRpLg==\\\"\", \"soloEseguiti\": true }, \"promemoriaScadenza\": { \"tipo\": \"freemarker\", \"oggetto\": \"\\\"UHJvbWVtb3JpYSBwYWdhbWVudG86ICR7dmVyc2FtZW50by5nZXRDYXVzYWxlVmVyc2FtZW50bygpLmdldFNpbXBsZSgpfQ==\\\"\", \"messaggio\": \"\\\"R2VudGlsZSAke3ZlcnNhbWVudG8uZ2V0QW5hZ3JhZmljYURlYml0b3JlKCkuZ2V0UmFnaW9uZVNvY2lhbGUoKX0sCgpsZSBub3RpZmljaGlhbW8gY2hlIMOoIHN0YXRhIGVtZXNzYSB1bmEgcmljaGllc3RhIGRpIHBhZ2FtZW50byBhIHN1byBjYXJpY286ICR7dmVyc2FtZW50by5nZXRDYXVzYWxlVmVyc2FtZW50bygpLmdldFNpbXBsZSgpfQoKPCNpZiB2ZXJzYW1lbnRvLmdldE51bWVyb0F2dmlzbygpP2hhc19jb250ZW50PgpQdcOyIGVmZmV0dHVhcmUgaWwgcGFnYW1lbnRvIHRyYW1pdGUgbCdhcHAgbW9iaWxlIElPIG9wcHVyZSBwcmVzc28gdW5vIGRlaSBwcmVzdGF0b3JpIGRpIHNlcnZpemkgZGkgcGFnYW1lbnRvIGFkZXJlbnRpIGFsIGNpcmN1aXRvIHBhZ29QQSB1dGlsaXp6YW5kbyBsJ2F2dmlzbyBkaSBwYWdhbWVudG8gYWxsZWdhdG8uCjwjZWxzZT4KUHVvJyBlZmZldHR1YXJlIGlsIHBhZ2FtZW50byBvbi1saW5lIHByZXNzbyBpbCBwb3J0YWxlIGRlbGwnZW50ZSBjcmVkaXRvcmU6ICR7ZG9taW5pby5nZXRSYWdpb25lU29jaWFsZSgpfSAKPC8jaWY+CgpEaXN0aW50aSBzYWx1dGku\\\"\", \"preavviso\": 10 } }' );\n+\n+"
  },
  {
    "sha": "a82c54979e91a355a1bef71745872b22545e6902",
    "filename": "docker/postgresql/module.xml",
    "status": "added",
    "additions": 12,
    "deletions": 0,
    "changes": 12,
    "blob_url": "https://github.com/link-it/govpay/blob/663d231e1fdd40c3d19f1e2dc4c83c98cd759840/docker/postgresql/module.xml",
    "raw_url": "https://github.com/link-it/govpay/raw/663d231e1fdd40c3d19f1e2dc4c83c98cd759840/docker/postgresql/module.xml",
    "contents_url": "https://api.github.com/repos/link-it/govpay/contents/docker/postgresql/module.xml?ref=663d231e1fdd40c3d19f1e2dc4c83c98cd759840",
    "patch": "@@ -0,0 +1,12 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!-- JDBC Drivers module.xml file to configure your JDBC drivers-->\n+<!-- Postgres example -->\n+<module xmlns=\"urn:jboss:module:1.0\" name=\"org.postgresql\">\n+  <resources>\n+    <resource-root path=\"postgresql-9.2-1004.jdbc41.jar\"/>\n+  </resources>\n+  <dependencies>\n+    <module name=\"javax.api\"/>\n+    <module name=\"javax.transaction.api\"/>\n+  </dependencies>\n+</module>"
  },
  {
    "sha": "0bd27b3770415bb3b829f0a4d776dd17a1af4480",
    "filename": "docker/postgresql/postgresql-9.2-1004.jdbc41.jar",
    "status": "added",
    "additions": 0,
    "deletions": 0,
    "changes": 0,
    "blob_url": "https://github.com/link-it/govpay/blob/663d231e1fdd40c3d19f1e2dc4c83c98cd759840/docker/postgresql/postgresql-9.2-1004.jdbc41.jar",
    "raw_url": "https://github.com/link-it/govpay/raw/663d231e1fdd40c3d19f1e2dc4c83c98cd759840/docker/postgresql/postgresql-9.2-1004.jdbc41.jar",
    "contents_url": "https://api.github.com/repos/link-it/govpay/contents/docker/postgresql/postgresql-9.2-1004.jdbc41.jar?ref=663d231e1fdd40c3d19f1e2dc4c83c98cd759840"
  },
  {
    "sha": "9c488c27b83c485ac25c8cb64e8d49e57aae28c6",
    "filename": "docker/standalone.xml",
    "status": "added",
    "additions": 579,
    "deletions": 0,
    "changes": 579,
    "blob_url": "https://github.com/link-it/govpay/blob/663d231e1fdd40c3d19f1e2dc4c83c98cd759840/docker/standalone.xml",
    "raw_url": "https://github.com/link-it/govpay/raw/663d231e1fdd40c3d19f1e2dc4c83c98cd759840/docker/standalone.xml",
    "contents_url": "https://api.github.com/repos/link-it/govpay/contents/docker/standalone.xml?ref=663d231e1fdd40c3d19f1e2dc4c83c98cd759840",
    "patch": "@@ -0,0 +1,579 @@\n+<?xml version='1.0' encoding='UTF-8'?>\n+\n+<server xmlns=\"urn:jboss:domain:10.0\">\n+    <extensions>\n+        <extension module=\"org.jboss.as.clustering.infinispan\"/>\n+        <extension module=\"org.jboss.as.connector\"/>\n+        <extension module=\"org.jboss.as.deployment-scanner\"/>\n+        <extension module=\"org.jboss.as.ee\"/>\n+        <extension module=\"org.jboss.as.ejb3\"/>\n+        <extension module=\"org.jboss.as.jaxrs\"/>\n+        <extension module=\"org.jboss.as.jdr\"/>\n+        <extension module=\"org.jboss.as.jmx\"/>\n+        <extension module=\"org.jboss.as.jpa\"/>\n+        <extension module=\"org.jboss.as.jsf\"/>\n+        <extension module=\"org.jboss.as.logging\"/>\n+        <extension module=\"org.jboss.as.mail\"/>\n+        <extension module=\"org.jboss.as.naming\"/>\n+        <extension module=\"org.jboss.as.pojo\"/>\n+        <extension module=\"org.jboss.as.remoting\"/>\n+        <extension module=\"org.jboss.as.sar\"/>\n+        <extension module=\"org.jboss.as.security\"/>\n+        <extension module=\"org.jboss.as.transactions\"/>\n+        <extension module=\"org.jboss.as.webservices\"/>\n+        <extension module=\"org.jboss.as.weld\"/>\n+        <extension module=\"org.wildfly.extension.batch.jberet\"/>\n+        <extension module=\"org.wildfly.extension.bean-validation\"/>\n+        <extension module=\"org.wildfly.extension.clustering.web\"/>\n+        <extension module=\"org.wildfly.extension.core-management\"/>\n+        <extension module=\"org.wildfly.extension.discovery\"/>\n+        <extension module=\"org.wildfly.extension.ee-security\"/>\n+        <extension module=\"org.wildfly.extension.elytron\"/>\n+        <extension module=\"org.wildfly.extension.io\"/>\n+        <extension module=\"org.wildfly.extension.microprofile.config-smallrye\"/>\n+        <extension module=\"org.wildfly.extension.microprofile.health-smallrye\"/>\n+        <extension module=\"org.wildfly.extension.microprofile.metrics-smallrye\"/>\n+        <extension module=\"org.wildfly.extension.microprofile.opentracing-smallrye\"/>\n+        <extension module=\"org.wildfly.extension.request-controller\"/>\n+        <extension module=\"org.wildfly.extension.security.manager\"/>\n+        <extension module=\"org.wildfly.extension.undertow\"/>\n+    </extensions>\n+    <management>\n+        <security-realms>\n+            <security-realm name=\"ManagementRealm\">\n+                <authentication>\n+                    <local default-user=\"$local\" skip-group-loading=\"true\"/>\n+                    <properties path=\"mgmt-users.properties\" relative-to=\"jboss.server.config.dir\"/>\n+                </authentication>\n+                <authorization map-groups-to-roles=\"false\">\n+                    <properties path=\"mgmt-groups.properties\" relative-to=\"jboss.server.config.dir\"/>\n+                </authorization>\n+            </security-realm>\n+            <security-realm name=\"ApplicationRealm\">\n+                <server-identities>\n+                    <ssl>\n+                        <keystore path=\"application.keystore\" relative-to=\"jboss.server.config.dir\" keystore-password=\"password\" alias=\"server\" key-password=\"password\" generate-self-signed-certificate-host=\"localhost\"/>\n+                    </ssl>\n+                </server-identities>\n+                <authentication>\n+                    <local default-user=\"$local\" allowed-users=\"*\" skip-group-loading=\"true\"/>\n+                    <properties path=\"application-users.properties\" relative-to=\"jboss.server.config.dir\"/>\n+                </authentication>\n+                <authorization>\n+                    <properties path=\"application-roles.properties\" relative-to=\"jboss.server.config.dir\"/>\n+                </authorization>\n+            </security-realm>\n+        </security-realms>\n+        <audit-log>\n+            <formatters>\n+                <json-formatter name=\"json-formatter\"/>\n+            </formatters>\n+            <handlers>\n+                <file-handler name=\"file\" formatter=\"json-formatter\" path=\"audit-log.log\" relative-to=\"jboss.server.data.dir\"/>\n+            </handlers>\n+            <logger log-boot=\"true\" log-read-only=\"false\" enabled=\"false\">\n+                <handlers>\n+                    <handler name=\"file\"/>\n+                </handlers>\n+            </logger>\n+        </audit-log>\n+        <management-interfaces>\n+            <http-interface security-realm=\"ManagementRealm\">\n+                <http-upgrade enabled=\"true\"/>\n+                <socket-binding http=\"management-http\"/>\n+            </http-interface>\n+        </management-interfaces>\n+        <access-control provider=\"simple\">\n+            <role-mapping>\n+                <role name=\"SuperUser\">\n+                    <include>\n+                        <user name=\"$local\"/>\n+                    </include>\n+                </role>\n+            </role-mapping>\n+        </access-control>\n+    </management>\n+    <profile>\n+        <subsystem xmlns=\"urn:jboss:domain:logging:8.0\">\n+            <console-handler name=\"CONSOLE\">\n+                <level name=\"INFO\"/>\n+                <formatter>\n+                    <named-formatter name=\"COLOR-PATTERN\"/>\n+                </formatter>\n+            </console-handler>\n+            <periodic-rotating-file-handler name=\"FILE\" autoflush=\"true\">\n+                <formatter>\n+                    <named-formatter name=\"PATTERN\"/>\n+                </formatter>\n+                <file relative-to=\"jboss.server.log.dir\" path=\"server.log\"/>\n+                <suffix value=\".yyyy-MM-dd\"/>\n+                <append value=\"true\"/>\n+            </periodic-rotating-file-handler>\n+            <logger category=\"com.arjuna\">\n+                <level name=\"WARN\"/>\n+            </logger>\n+            <logger category=\"io.jaegertracing.Configuration\">\n+                <level name=\"WARN\"/>\n+            </logger>\n+            <logger category=\"org.jboss.as.config\">\n+                <level name=\"DEBUG\"/>\n+            </logger>\n+            <logger category=\"sun.rmi\">\n+                <level name=\"WARN\"/>\n+            </logger>\n+            <root-logger>\n+                <level name=\"INFO\"/>\n+                <handlers>\n+                    <handler name=\"CONSOLE\"/>\n+                    <handler name=\"FILE\"/>\n+                </handlers>\n+            </root-logger>\n+            <formatter name=\"PATTERN\">\n+                <pattern-formatter pattern=\"%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p [%c] (%t) %s%e%n\"/>\n+            </formatter>\n+            <formatter name=\"COLOR-PATTERN\">\n+                <pattern-formatter pattern=\"%K{level}%d{HH:mm:ss,SSS} %-5p [%c] (%t) %s%e%n\"/>\n+            </formatter>\n+        </subsystem>\n+        <subsystem xmlns=\"urn:jboss:domain:batch-jberet:2.0\">\n+            <default-job-repository name=\"in-memory\"/>\n+            <default-thread-pool name=\"batch\"/>\n+            <job-repository name=\"in-memory\">\n+                <in-memory/>\n+            </job-repository>\n+            <thread-pool name=\"batch\">\n+                <max-threads count=\"10\"/>\n+                <keepalive-time time=\"30\" unit=\"seconds\"/>\n+            </thread-pool>\n+        </subsystem>\n+        <subsystem xmlns=\"urn:jboss:domain:bean-validation:1.0\"/>\n+        <subsystem xmlns=\"urn:jboss:domain:core-management:1.0\"/>\n+        <subsystem xmlns=\"urn:jboss:domain:datasources:5.0\">\n+            <datasources>\n+                <datasource jndi-name=\"java:jboss/datasources/ExampleDS\" pool-name=\"ExampleDS\" enabled=\"true\" use-java-context=\"true\" statistics-enabled=\"${wildfly.datasources.statistics-enabled:${wildfly.statistics-enabled:false}}\">\n+                    <connection-url>jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE</connection-url>\n+                    <driver>h2</driver>\n+                    <security>\n+                        <user-name>sa</user-name>\n+                        <password>sa</password>\n+                    </security>\n+                </datasource>\n+                <datasource jta=\"false\" use-ccm=\"false\" jndi-name=\"java:/govpay\" use-java-context=\"false\" pool-name=\"it.govpay.dataSource\">\n+                    <!-- Connection URL -->\n+                    <connection-url>jdbc:postgresql://pggovpay:5432/govpay</connection-url>\n+                    <!-- DriverJDBC -->\n+                    <driver>postgres</driver>\n+                    <driver-class>org.postgresql.Driver</driver-class>\n+                    <!-- Credenziali -->\n+                    <security>\n+                        <user-name>govpay</user-name>\n+                        <password>govpaypw</password>\n+                    </security>\n+                    <!-- Livello di Isolamento delle Transazioni -->\n+                    <transaction-isolation>TRANSACTION_READ_COMMITTED</transaction-isolation>\n+\n+                    <!-- Minimo/Massimo numero di connessioni che un pool deve mantenere -->\n+                    <pool>\n+                        <prefill>true</prefill>\n+                        <use-strict-min>false</use-strict-min>\n+                        <min-pool-size>10</min-pool-size>\n+                        <max-pool-size>50</max-pool-size>\n+                    </pool>\n+                    <!--\n+                    Validazione della Connessione SQL.\n+                    Effettuata quando una connessione viene creata o su una esistente connessione quando questa viene ottenuta dal pool\n+                    -->\n+                    <new-connection-sql>SELECT 1</new-connection-sql>\n+                    <validation>\n+                        <!-- <valid-connection-checker class-name=\"org.jboss.jca.adapters.jdbc.extensions.postgres.PostgreSQLValidConnectionChecker\"/> -->\n+                        <exception-sorter class-name=\"org.jboss.jca.adapters.jdbc.extensions.postgres.PostgreSQLExceptionSorter\"/>\n+                        <check-valid-connection-sql>SELECT 1</check-valid-connection-sql>\n+                        <validate-on-match>true</validate-on-match>\n+                    </validation>\n+                    <!-- Timeout -->\n+                    <timeout>\n+                        <idle-timeout-minutes>5</idle-timeout-minutes>\n+                        <blocking-timeout-millis>30000</blocking-timeout-millis>\n+                    </timeout>\n+                    <!--\n+                    Controllo degli Statements/ResultSet non chiusi. Viene effettuato quando una connessione viene ritornata al pool\n+                    o quando una PreparedStatement viene chiusa e quindi ritornata alla cache delle prepared statements\n+                    -->\n+                    <statement>\n+                        <track-statements>true</track-statements>\n+                        <prepared-statement-cache-size>100</prepared-statement-cache-size>\n+                    </statement>\n+                </datasource>\n+                <drivers>\n+                    <driver name=\"h2\" module=\"com.h2database.h2\">\n+                        <xa-datasource-class>org.h2.jdbcx.JdbcDataSource</xa-datasource-class>\n+                    </driver>\n+                    <driver name=\"postgres\" module=\"org.postgresql\">\n+                        <xa-datasource-class>org.postgresql.xa.PGXADataSource</xa-datasource-class>\n+                    </driver>\n+                </drivers>\n+            </datasources>\n+        </subsystem>\n+        <subsystem xmlns=\"urn:jboss:domain:deployment-scanner:2.0\">\n+            <deployment-scanner path=\"deployments\" relative-to=\"jboss.server.base.dir\" scan-interval=\"5000\" runtime-failure-causes-rollback=\"${jboss.deployment.scanner.rollback.on.failure:false}\"/>\n+        </subsystem>\n+        <subsystem xmlns=\"urn:jboss:domain:discovery:1.0\"/>\n+        <subsystem xmlns=\"urn:jboss:domain:distributable-web:2.0\" default-session-management=\"default\" default-single-sign-on-management=\"default\">\n+            <infinispan-session-management name=\"default\" cache-container=\"web\" granularity=\"SESSION\">\n+                <primary-owner-affinity/>\n+            </infinispan-session-management>\n+            <infinispan-single-sign-on-management name=\"default\" cache-container=\"web\" cache=\"sso\"/>\n+            <infinispan-routing cache-container=\"web\" cache=\"routing\"/>\n+        </subsystem>\n+        <subsystem xmlns=\"urn:jboss:domain:ee:4.0\">\n+            <spec-descriptor-property-replacement>false</spec-descriptor-property-replacement>\n+            <concurrent>\n+                <context-services>\n+                    <context-service name=\"default\" jndi-name=\"java:jboss/ee/concurrency/context/default\" use-transaction-setup-provider=\"true\"/>\n+                </context-services>\n+                <managed-thread-factories>\n+                    <managed-thread-factory name=\"default\" jndi-name=\"java:jboss/ee/concurrency/factory/default\" context-service=\"default\"/>\n+                </managed-thread-factories>\n+                <managed-executor-services>\n+                    <managed-executor-service name=\"default\" jndi-name=\"java:jboss/ee/concurrency/executor/default\" context-service=\"default\" hung-task-threshold=\"60000\" keepalive-time=\"5000\"/>\n+                </managed-executor-services>\n+                <managed-scheduled-executor-services>\n+                    <managed-scheduled-executor-service name=\"default\" jndi-name=\"java:jboss/ee/concurrency/scheduler/default\" context-service=\"default\" hung-task-threshold=\"60000\" keepalive-time=\"3000\"/>\n+                </managed-scheduled-executor-services>\n+            </concurrent>\n+            <default-bindings context-service=\"java:jboss/ee/concurrency/context/default\" datasource=\"java:jboss/datasources/ExampleDS\" managed-executor-service=\"java:jboss/ee/concurrency/executor/default\" managed-scheduled-executor-service=\"java:jboss/ee/concurrency/scheduler/default\" managed-thread-factory=\"java:jboss/ee/concurrency/factory/default\"/>\n+        </subsystem>\n+        <subsystem xmlns=\"urn:jboss:domain:ee-security:1.0\"/>\n+        <subsystem xmlns=\"urn:jboss:domain:ejb3:6.0\">\n+            <session-bean>\n+                <stateless>\n+                    <bean-instance-pool-ref pool-name=\"slsb-strict-max-pool\"/>\n+                </stateless>\n+                <stateful default-access-timeout=\"5000\" cache-ref=\"simple\" passivation-disabled-cache-ref=\"simple\"/>\n+                <singleton default-access-timeout=\"5000\"/>\n+            </session-bean>\n+            <pools>\n+                <bean-instance-pools>\n+                    <strict-max-pool name=\"mdb-strict-max-pool\" derive-size=\"from-cpu-count\" instance-acquisition-timeout=\"5\" instance-acquisition-timeout-unit=\"MINUTES\"/>\n+                    <strict-max-pool name=\"slsb-strict-max-pool\" derive-size=\"from-worker-pools\" instance-acquisition-timeout=\"5\" instance-acquisition-timeout-unit=\"MINUTES\"/>\n+                </bean-instance-pools>\n+            </pools>\n+            <caches>\n+                <cache name=\"simple\"/>\n+                <cache name=\"distributable\" passivation-store-ref=\"infinispan\" aliases=\"passivating clustered\"/>\n+            </caches>\n+            <passivation-stores>\n+                <passivation-store name=\"infinispan\" cache-container=\"ejb\" max-size=\"10000\"/>\n+            </passivation-stores>\n+            <async thread-pool-name=\"default\"/>\n+            <timer-service thread-pool-name=\"default\" default-data-store=\"default-file-store\">\n+                <data-stores>\n+                    <file-data-store name=\"default-file-store\" path=\"timer-service-data\" relative-to=\"jboss.server.data.dir\"/>\n+                </data-stores>\n+            </timer-service>\n+            <remote connector-ref=\"http-remoting-connector\" thread-pool-name=\"default\">\n+                <channel-creation-options>\n+                    <option name=\"MAX_OUTBOUND_MESSAGES\" value=\"1234\" type=\"remoting\"/>\n+                </channel-creation-options>\n+            </remote>\n+            <thread-pools>\n+                <thread-pool name=\"default\">\n+                    <max-threads count=\"10\"/>\n+                    <keepalive-time time=\"60\" unit=\"seconds\"/>\n+                </thread-pool>\n+            </thread-pools>\n+            <default-security-domain value=\"other\"/>\n+            <default-missing-method-permissions-deny-access value=\"true\"/>\n+            <statistics enabled=\"${wildfly.ejb3.statistics-enabled:${wildfly.statistics-enabled:false}}\"/>\n+            <log-system-exceptions value=\"true\"/>\n+        </subsystem>\n+        <subsystem xmlns=\"urn:wildfly:elytron:8.0\" final-providers=\"combined-providers\" disallowed-providers=\"OracleUcrypto\">\n+            <providers>\n+                <aggregate-providers name=\"combined-providers\">\n+                    <providers name=\"elytron\"/>\n+                    <providers name=\"openssl\"/>\n+                </aggregate-providers>\n+                <provider-loader name=\"elytron\" module=\"org.wildfly.security.elytron\"/>\n+                <provider-loader name=\"openssl\" module=\"org.wildfly.openssl\"/>\n+            </providers>\n+            <audit-logging>\n+                <file-audit-log name=\"local-audit\" path=\"audit.log\" relative-to=\"jboss.server.log.dir\" format=\"JSON\"/>\n+            </audit-logging>\n+            <security-domains>\n+                <security-domain name=\"ApplicationDomain\" default-realm=\"ApplicationRealm\" permission-mapper=\"default-permission-mapper\">\n+                    <realm name=\"ApplicationRealm\" role-decoder=\"groups-to-roles\"/>\n+                    <realm name=\"local\"/>\n+                </security-domain>\n+                <security-domain name=\"ManagementDomain\" default-realm=\"ManagementRealm\" permission-mapper=\"default-permission-mapper\">\n+                    <realm name=\"ManagementRealm\" role-decoder=\"groups-to-roles\"/>\n+                    <realm name=\"local\" role-mapper=\"super-user-mapper\"/>\n+                </security-domain>\n+            </security-domains>\n+            <security-realms>\n+                <identity-realm name=\"local\" identity=\"$local\"/>\n+                <properties-realm name=\"ApplicationRealm\">\n+                    <users-properties path=\"application-users.properties\" relative-to=\"jboss.server.config.dir\" digest-realm-name=\"ApplicationRealm\"/>\n+                    <groups-properties path=\"application-roles.properties\" relative-to=\"jboss.server.config.dir\"/>\n+                </properties-realm>\n+                <properties-realm name=\"ManagementRealm\">\n+                    <users-properties path=\"mgmt-users.properties\" relative-to=\"jboss.server.config.dir\" digest-realm-name=\"ManagementRealm\"/>\n+                    <groups-properties path=\"mgmt-groups.properties\" relative-to=\"jboss.server.config.dir\"/>\n+                </properties-realm>\n+            </security-realms>\n+            <mappers>\n+                <simple-permission-mapper name=\"default-permission-mapper\" mapping-mode=\"first\">\n+                    <permission-mapping>\n+                        <principal name=\"anonymous\"/>\n+                        <permission-set name=\"default-permissions\"/>\n+                    </permission-mapping>\n+                    <permission-mapping match-all=\"true\">\n+                        <permission-set name=\"login-permission\"/>\n+                        <permission-set name=\"default-permissions\"/>\n+                    </permission-mapping>\n+                </simple-permission-mapper>\n+                <constant-realm-mapper name=\"local\" realm-name=\"local\"/>\n+                <simple-role-decoder name=\"groups-to-roles\" attribute=\"groups\"/>\n+                <constant-role-mapper name=\"super-user-mapper\">\n+                    <role name=\"SuperUser\"/>\n+                </constant-role-mapper>\n+            </mappers>\n+            <permission-sets>\n+                <permission-set name=\"login-permission\">\n+                    <permission class-name=\"org.wildfly.security.auth.permission.LoginPermission\"/>\n+                </permission-set>\n+                <permission-set name=\"default-permissions\">\n+                    <permission class-name=\"org.wildfly.extension.batch.jberet.deployment.BatchPermission\" module=\"org.wildfly.extension.batch.jberet\" target-name=\"*\"/>\n+                    <permission class-name=\"org.wildfly.transaction.client.RemoteTransactionPermission\" module=\"org.wildfly.transaction.client\"/>\n+                    <permission class-name=\"org.jboss.ejb.client.RemoteEJBPermission\" module=\"org.jboss.ejb-client\"/>\n+                </permission-set>\n+            </permission-sets>\n+            <http>\n+                <http-authentication-factory name=\"management-http-authentication\" security-domain=\"ManagementDomain\" http-server-mechanism-factory=\"global\">\n+                    <mechanism-configuration>\n+                        <mechanism mechanism-name=\"DIGEST\">\n+                            <mechanism-realm realm-name=\"ManagementRealm\"/>\n+                        </mechanism>\n+                    </mechanism-configuration>\n+                </http-authentication-factory>\n+                <provider-http-server-mechanism-factory name=\"global\"/>\n+            </http>\n+            <sasl>\n+                <sasl-authentication-factory name=\"application-sasl-authentication\" sasl-server-factory=\"configured\" security-domain=\"ApplicationDomain\">\n+                    <mechanism-configuration>\n+                        <mechanism mechanism-name=\"JBOSS-LOCAL-USER\" realm-mapper=\"local\"/>\n+                        <mechanism mechanism-name=\"DIGEST-MD5\">\n+                            <mechanism-realm realm-name=\"ApplicationRealm\"/>\n+                        </mechanism>\n+                    </mechanism-configuration>\n+                </sasl-authentication-factory>\n+                <sasl-authentication-factory name=\"management-sasl-authentication\" sasl-server-factory=\"configured\" security-domain=\"ManagementDomain\">\n+                    <mechanism-configuration>\n+                        <mechanism mechanism-name=\"JBOSS-LOCAL-USER\" realm-mapper=\"local\"/>\n+                        <mechanism mechanism-name=\"DIGEST-MD5\">\n+                            <mechanism-realm realm-name=\"ManagementRealm\"/>\n+                        </mechanism>\n+                    </mechanism-configuration>\n+                </sasl-authentication-factory>\n+                <configurable-sasl-server-factory name=\"configured\" sasl-server-factory=\"elytron\">\n+                    <properties>\n+                        <property name=\"wildfly.sasl.local-user.default-user\" value=\"$local\"/>\n+                    </properties>\n+                </configurable-sasl-server-factory>\n+                <mechanism-provider-filtering-sasl-server-factory name=\"elytron\" sasl-server-factory=\"global\">\n+                    <filters>\n+                        <filter provider-name=\"WildFlyElytron\"/>\n+                    </filters>\n+                </mechanism-provider-filtering-sasl-server-factory>\n+                <provider-sasl-server-factory name=\"global\"/>\n+            </sasl>\n+        </subsystem>\n+        <subsystem xmlns=\"urn:jboss:domain:infinispan:9.0\">\n+            <cache-container name=\"web\" default-cache=\"passivation\" module=\"org.wildfly.clustering.web.infinispan\">\n+                <local-cache name=\"passivation\">\n+                    <locking isolation=\"REPEATABLE_READ\"/>\n+                    <transaction mode=\"BATCH\"/>\n+                    <file-store passivation=\"true\" purge=\"false\"/>\n+                </local-cache>\n+                <local-cache name=\"sso\">\n+                    <locking isolation=\"REPEATABLE_READ\"/>\n+                    <transaction mode=\"BATCH\"/>\n+                </local-cache>\n+                <local-cache name=\"routing\"/>\n+            </cache-container>\n+            <cache-container name=\"server\" default-cache=\"default\" module=\"org.wildfly.clustering.server\">\n+                <local-cache name=\"default\">\n+                    <transaction mode=\"BATCH\"/>\n+                </local-cache>\n+            </cache-container>\n+            <cache-container name=\"ejb\" aliases=\"sfsb\" default-cache=\"passivation\" module=\"org.wildfly.clustering.ejb.infinispan\">\n+                <local-cache name=\"passivation\">\n+                    <locking isolation=\"REPEATABLE_READ\"/>\n+                    <transaction mode=\"BATCH\"/>\n+                    <file-store passivation=\"true\" purge=\"false\"/>\n+                </local-cache>\n+            </cache-container>\n+            <cache-container name=\"hibernate\" module=\"org.infinispan.hibernate-cache\">\n+                <local-cache name=\"entity\">\n+                    <object-memory size=\"10000\"/>\n+                    <expiration max-idle=\"100000\"/>\n+                </local-cache>\n+                <local-cache name=\"local-query\">\n+                    <object-memory size=\"10000\"/>\n+                    <expiration max-idle=\"100000\"/>\n+                </local-cache>\n+                <local-cache name=\"timestamps\"/>\n+            </cache-container>\n+        </subsystem>\n+        <subsystem xmlns=\"urn:jboss:domain:io:3.0\">\n+            <worker name=\"default\"/>\n+            <buffer-pool name=\"default\"/>\n+        </subsystem>\n+        <subsystem xmlns=\"urn:jboss:domain:jaxrs:1.0\"/>\n+        <subsystem xmlns=\"urn:jboss:domain:jca:5.0\">\n+            <archive-validation enabled=\"true\" fail-on-error=\"true\" fail-on-warn=\"false\"/>\n+            <bean-validation enabled=\"true\"/>\n+            <default-workmanager>\n+                <short-running-threads>\n+                    <core-threads count=\"50\"/>\n+                    <queue-length count=\"50\"/>\n+                    <max-threads count=\"50\"/>\n+                    <keepalive-time time=\"10\" unit=\"seconds\"/>\n+                </short-running-threads>\n+                <long-running-threads>\n+                    <core-threads count=\"50\"/>\n+                    <queue-length count=\"50\"/>\n+                    <max-threads count=\"50\"/>\n+                    <keepalive-time time=\"10\" unit=\"seconds\"/>\n+                </long-running-threads>\n+            </default-workmanager>\n+            <cached-connection-manager/>\n+        </subsystem>\n+        <subsystem xmlns=\"urn:jboss:domain:jdr:1.0\"/>\n+        <subsystem xmlns=\"urn:jboss:domain:jmx:1.3\">\n+            <expose-resolved-model/>\n+            <expose-expression-model/>\n+            <remoting-connector/>\n+        </subsystem>\n+        <subsystem xmlns=\"urn:jboss:domain:jpa:1.1\">\n+            <jpa default-datasource=\"\" default-extended-persistence-inheritance=\"DEEP\"/>\n+        </subsystem>\n+        <subsystem xmlns=\"urn:jboss:domain:jsf:1.1\"/>\n+        <subsystem xmlns=\"urn:jboss:domain:mail:3.0\">\n+            <mail-session name=\"default\" jndi-name=\"java:jboss/mail/Default\">\n+                <smtp-server outbound-socket-binding-ref=\"mail-smtp\"/>\n+            </mail-session>\n+        </subsystem>\n+        <subsystem xmlns=\"urn:wildfly:microprofile-config-smallrye:1.0\"/>\n+        <subsystem xmlns=\"urn:wildfly:microprofile-health-smallrye:2.0\" security-enabled=\"false\" empty-liveness-checks-status=\"${env.MP_HEALTH_EMPTY_LIVENESS_CHECKS_STATUS:UP}\" empty-readiness-checks-status=\"${env.MP_HEALTH_EMPTY_READINESS_CHECKS_STATUS:UP}\"/>\n+        <subsystem xmlns=\"urn:wildfly:microprofile-metrics-smallrye:2.0\" security-enabled=\"false\" exposed-subsystems=\"*\" prefix=\"${wildfly.metrics.prefix:wildfly}\"/>\n+        <subsystem xmlns=\"urn:wildfly:microprofile-opentracing-smallrye:1.0\"/>\n+        <subsystem xmlns=\"urn:jboss:domain:naming:2.0\">\n+            <remote-naming/>\n+        </subsystem>\n+        <subsystem xmlns=\"urn:jboss:domain:pojo:1.0\"/>\n+        <subsystem xmlns=\"urn:jboss:domain:remoting:4.0\">\n+            <http-connector name=\"http-remoting-connector\" connector-ref=\"default\" security-realm=\"ApplicationRealm\"/>\n+        </subsystem>\n+        <subsystem xmlns=\"urn:jboss:domain:request-controller:1.0\"/>\n+        <subsystem xmlns=\"urn:jboss:domain:resource-adapters:5.0\"/>\n+        <subsystem xmlns=\"urn:jboss:domain:sar:1.0\"/>\n+        <subsystem xmlns=\"urn:jboss:domain:security:2.0\">\n+            <security-domains>\n+                <security-domain name=\"other\" cache-type=\"default\">\n+                    <authentication>\n+                        <login-module code=\"Remoting\" flag=\"optional\">\n+                            <module-option name=\"password-stacking\" value=\"useFirstPass\"/>\n+                        </login-module>\n+                        <login-module code=\"RealmDirect\" flag=\"required\">\n+                            <module-option name=\"password-stacking\" value=\"useFirstPass\"/>\n+                        </login-module>\n+                    </authentication>\n+                </security-domain>\n+                <security-domain name=\"jboss-web-policy\" cache-type=\"default\">\n+                    <authorization>\n+                        <policy-module code=\"Delegating\" flag=\"required\"/>\n+                    </authorization>\n+                </security-domain>\n+                <security-domain name=\"jaspitest\" cache-type=\"default\">\n+                    <authentication-jaspi>\n+                        <login-module-stack name=\"dummy\">\n+                            <login-module code=\"Dummy\" flag=\"optional\"/>\n+                        </login-module-stack>\n+                        <auth-module code=\"Dummy\"/>\n+                    </authentication-jaspi>\n+                </security-domain>\n+                <security-domain name=\"jboss-ejb-policy\" cache-type=\"default\">\n+                    <authorization>\n+                        <policy-module code=\"Delegating\" flag=\"required\"/>\n+                    </authorization>\n+                </security-domain>\n+            </security-domains>\n+        </subsystem>\n+        <subsystem xmlns=\"urn:jboss:domain:security-manager:1.0\">\n+            <deployment-permissions>\n+                <maximum-set>\n+                    <permission class=\"java.security.AllPermission\"/>\n+                </maximum-set>\n+            </deployment-permissions>\n+        </subsystem>\n+        <subsystem xmlns=\"urn:jboss:domain:transactions:5.0\">\n+            <core-environment node-identifier=\"${jboss.tx.node.id:1}\">\n+                <process-id>\n+                    <uuid/>\n+                </process-id>\n+            </core-environment>\n+            <recovery-environment socket-binding=\"txn-recovery-environment\" status-socket-binding=\"txn-status-manager\"/>\n+            <coordinator-environment statistics-enabled=\"${wildfly.transactions.statistics-enabled:${wildfly.statistics-enabled:false}}\"/>\n+            <object-store path=\"tx-object-store\" relative-to=\"jboss.server.data.dir\"/>\n+        </subsystem>\n+        <subsystem xmlns=\"urn:jboss:domain:undertow:10.0\" default-server=\"default-server\" default-virtual-host=\"default-host\" default-servlet-container=\"default\" default-security-domain=\"other\" statistics-enabled=\"${wildfly.undertow.statistics-enabled:${wildfly.statistics-enabled:false}}\">\n+            <buffer-cache name=\"default\"/>\n+            <server name=\"default-server\">\n+                <http-listener name=\"default\" socket-binding=\"http\" redirect-socket=\"https\" enable-http2=\"true\"/>\n+                <https-listener name=\"https\" socket-binding=\"https\" security-realm=\"ApplicationRealm\" enable-http2=\"true\"/>\n+                <host name=\"default-host\" alias=\"localhost\">\n+                    <location name=\"/\" handler=\"welcome-content\"/>\n+                    <http-invoker security-realm=\"ApplicationRealm\"/>\n+                </host>\n+            </server>\n+            <servlet-container name=\"default\">\n+                <jsp-config/>\n+                <websockets/>\n+            </servlet-container>\n+            <handlers>\n+                <file name=\"welcome-content\" path=\"${jboss.home.dir}/welcome-content\"/>\n+            </handlers>\n+        </subsystem>\n+        <subsystem xmlns=\"urn:jboss:domain:webservices:2.0\" statistics-enabled=\"${wildfly.webservices.statistics-enabled:${wildfly.statistics-enabled:false}}\">\n+            <wsdl-host>${jboss.bind.address:127.0.0.1}</wsdl-host>\n+            <endpoint-config name=\"Standard-Endpoint-Config\"/>\n+            <endpoint-config name=\"Recording-Endpoint-Config\">\n+                <pre-handler-chain name=\"recording-handlers\" protocol-bindings=\"##SOAP11_HTTP ##SOAP11_HTTP_MTOM ##SOAP12_HTTP ##SOAP12_HTTP_MTOM\">\n+                    <handler name=\"RecordingHandler\" class=\"org.jboss.ws.common.invocation.RecordingServerHandler\"/>\n+                </pre-handler-chain>\n+            </endpoint-config>\n+            <client-config name=\"Standard-Client-Config\"/>\n+        </subsystem>\n+        <subsystem xmlns=\"urn:jboss:domain:weld:4.0\"/>\n+    </profile>\n+    <interfaces>\n+        <interface name=\"management\">\n+            <inet-address value=\"${jboss.bind.address.management:127.0.0.1}\"/>\n+        </interface>\n+        <interface name=\"public\">\n+            <inet-address value=\"${jboss.bind.address:127.0.0.1}\"/>\n+        </interface>\n+    </interfaces>\n+    <socket-binding-group name=\"standard-sockets\" default-interface=\"public\" port-offset=\"${jboss.socket.binding.port-offset:0}\">\n+        <socket-binding name=\"ajp\" port=\"${jboss.ajp.port:8009}\"/>\n+        <socket-binding name=\"http\" port=\"${jboss.http.port:8080}\"/>\n+        <socket-binding name=\"https\" port=\"${jboss.https.port:8443}\"/>\n+        <socket-binding name=\"management-http\" interface=\"management\" port=\"${jboss.management.http.port:9990}\"/>\n+        <socket-binding name=\"management-https\" interface=\"management\" port=\"${jboss.management.https.port:9993}\"/>\n+        <socket-binding name=\"txn-recovery-environment\" port=\"4712\"/>\n+        <socket-binding name=\"txn-status-manager\" port=\"4713\"/>\n+        <outbound-socket-binding name=\"mail-smtp\">\n+            <remote-destination host=\"localhost\" port=\"25\"/>\n+        </outbound-socket-binding>\n+    </socket-binding-group>\n+</server>\n\\ No newline at end of file"
  }
]
