[
  {
    "sha": "e6e72445667a93b2674c7fc76d1db0e1d8efc928",
    "filename": ".github/workflows/CI.yml",
    "status": "modified",
    "additions": 6,
    "deletions": 1,
    "changes": 7,
    "blob_url": "https://github.com/afgalvan/JavaMySQL/blob/885cea737ae30c4671573fa48fd5ef6b757b76ba/.github/workflows/CI.yml",
    "raw_url": "https://github.com/afgalvan/JavaMySQL/raw/885cea737ae30c4671573fa48fd5ef6b757b76ba/.github/workflows/CI.yml",
    "contents_url": "https://api.github.com/repos/afgalvan/JavaMySQL/contents/.github/workflows/CI.yml?ref=885cea737ae30c4671573fa48fd5ef6b757b76ba",
    "patch": "@@ -24,8 +24,13 @@ jobs:\n           key: ${{ runner.os }}-gradle-${{ hashFiles('**/*.gradle*', '**/gradle-wrapper.properties') }}\n           restore-keys: |\n             ${{ runner.os }}-gradle-\n+      - name: Create dotenv\n+        run: |\n+          pwd\n+          echo \"MYSQL_PASSWORD=${{ secrets.MYSQL_PASSWORD }}\" > .env\n+          ls -a\n       - name: Build with Gradle\n-        run: ./gradlew build\n+        run: ./gradlew build -x test\n \n   test:\n     needs: build"
  },
  {
    "sha": "448214c11f33a05c16895001656fd00abfcb7d2d",
    "filename": ".gitignore",
    "status": "modified",
    "additions": 1,
    "deletions": 0,
    "changes": 1,
    "blob_url": "https://github.com/afgalvan/JavaMySQL/blob/885cea737ae30c4671573fa48fd5ef6b757b76ba/.gitignore",
    "raw_url": "https://github.com/afgalvan/JavaMySQL/raw/885cea737ae30c4671573fa48fd5ef6b757b76ba/.gitignore",
    "contents_url": "https://api.github.com/repos/afgalvan/JavaMySQL/contents/.gitignore?ref=885cea737ae30c4671573fa48fd5ef6b757b76ba",
    "patch": "@@ -1,5 +1,6 @@\n # Compiled class file\n *.class\n+.env\n \n # Log file\n *.log"
  },
  {
    "sha": "a87ae85fb0151e3297006615c9165573932c8d50",
    "filename": ".idea/dataSources.xml",
    "status": "added",
    "additions": 12,
    "deletions": 0,
    "changes": 12,
    "blob_url": "https://github.com/afgalvan/JavaMySQL/blob/885cea737ae30c4671573fa48fd5ef6b757b76ba/.idea/dataSources.xml",
    "raw_url": "https://github.com/afgalvan/JavaMySQL/raw/885cea737ae30c4671573fa48fd5ef6b757b76ba/.idea/dataSources.xml",
    "contents_url": "https://api.github.com/repos/afgalvan/JavaMySQL/contents/.idea/dataSources.xml?ref=885cea737ae30c4671573fa48fd5ef6b757b76ba",
    "patch": "@@ -0,0 +1,12 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project version=\"4\">\n+  <component name=\"DataSourceManagerImpl\" format=\"xml\" multifile-model=\"true\">\n+    <data-source source=\"LOCAL\" name=\"MySQL for 5.1 - javamysql@localhost\" uuid=\"354be648-ce17-4e1b-9748-7dfb253ff826\">\n+      <driver-ref>mysql</driver-ref>\n+      <synchronize>true</synchronize>\n+      <jdbc-driver>com.mysql.jdbc.Driver</jdbc-driver>\n+      <jdbc-url>jdbc:mysql://localhost:3306/javamysql</jdbc-url>\n+      <working-dir>$ProjectFileDir$</working-dir>\n+    </data-source>\n+  </component>\n+</project>\n\\ No newline at end of file"
  },
  {
    "sha": "973dcf9b6e25912a1d47278b1732cca7c3e62d1b",
    "filename": ".idea/sqldialects.xml",
    "status": "added",
    "additions": 6,
    "deletions": 0,
    "changes": 6,
    "blob_url": "https://github.com/afgalvan/JavaMySQL/blob/885cea737ae30c4671573fa48fd5ef6b757b76ba/.idea/sqldialects.xml",
    "raw_url": "https://github.com/afgalvan/JavaMySQL/raw/885cea737ae30c4671573fa48fd5ef6b757b76ba/.idea/sqldialects.xml",
    "contents_url": "https://api.github.com/repos/afgalvan/JavaMySQL/contents/.idea/sqldialects.xml?ref=885cea737ae30c4671573fa48fd5ef6b757b76ba",
    "patch": "@@ -0,0 +1,6 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project version=\"4\">\n+  <component name=\"SqlDialectMappings\">\n+    <file url=\"file://$PROJECT_DIR$/src/main/java/database/DataBase.sql\" dialect=\"GenericSQL\" />\n+  </component>\n+</project>\n\\ No newline at end of file"
  },
  {
    "sha": "435cc53528e04b03913221f2909f0f0c984ab0a9",
    "filename": "LICENSE",
    "status": "modified",
    "additions": 2,
    "deletions": 2,
    "changes": 4,
    "blob_url": "https://github.com/afgalvan/JavaMySQL/blob/885cea737ae30c4671573fa48fd5ef6b757b76ba/LICENSE",
    "raw_url": "https://github.com/afgalvan/JavaMySQL/raw/885cea737ae30c4671573fa48fd5ef6b757b76ba/LICENSE",
    "contents_url": "https://api.github.com/repos/afgalvan/JavaMySQL/contents/LICENSE?ref=885cea737ae30c4671573fa48fd5ef6b757b76ba",
    "patch": "@@ -105,7 +105,7 @@ to the extent that it includes a convenient and prominently visible\n feature that (1) displays an appropriate copyright notice, and (2)\n tells the user that there is no warranty for the work (except to the\n extent that warranties are provided), that licensees may convey the\n-work under this License, and how to view a copy of this License.  If\n+work under this License, and how to views a copy of this License.  If\n the interface presents a list of user commands or options, such as a\n menu, a prominent item in the list meets this criterion.\n \n@@ -258,7 +258,7 @@ in one of these ways:\n     (including a physical distribution medium), accompanied by a\n     written offer, valid for at least three years and valid for as\n     long as you offer spare parts or customer support for that product\n-    model, to give anyone who possesses the object code either (1) a\n+    models, to give anyone who possesses the object code either (1) a\n     copy of the Corresponding Source for all the software in the\n     product that is covered by this License, on a durable physical\n     medium customarily used for software interchange, for a price no"
  },
  {
    "sha": "1e0b0461326b88e89c72aa9527780a4ceeed6b1e",
    "filename": "README.md",
    "status": "modified",
    "additions": 3,
    "deletions": 1,
    "changes": 4,
    "blob_url": "https://github.com/afgalvan/JavaMySQL/blob/885cea737ae30c4671573fa48fd5ef6b757b76ba/README.md",
    "raw_url": "https://github.com/afgalvan/JavaMySQL/raw/885cea737ae30c4671573fa48fd5ef6b757b76ba/README.md",
    "contents_url": "https://api.github.com/repos/afgalvan/JavaMySQL/contents/README.md?ref=885cea737ae30c4671573fa48fd5ef6b757b76ba",
    "patch": "@@ -6,11 +6,13 @@\n     </div>\n </h1>\n \n-\n <p align=\"center\">\n     <a href=\"https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html\">\n         <img src=\"https://img.shields.io/badge/OpenJDK-v1.8-orange\" alt=\"JDK Version\" title=\"JDK Version\" />\n     </a>\n+    <a href=\"https://github.com/afgalvan/JavaMySQL/actions\">\n+        <img src=\"https://github.com/afgalvan/javamysql/actions/workflows/CI.yml/badge.svg\" alt=\"Java CI Actions\" title=\"Java CI Actions\"/>\n+    </a>\n     <a href=\"https://www.codacy.com/gh/afgalvan/JavaMySQL/dashboard?utm_source=github.com&amp;utm_medium=referral&amp;utm_content=afgalvan/JavaMySQL&amp;utm_campaign=Badge_Grade\">\n         <img src=\"https://app.codacy.com/project/badge/Grade/da039ca3394c4113a602b7213f08d5aa\" alt=\"Codacy Badge\" title=\"Codacy Badge\"/>\n     </a>"
  },
  {
    "sha": "e0bb130f9a067230b7eb003230a3ce5ebde77893",
    "filename": "build.gradle",
    "status": "modified",
    "additions": 8,
    "deletions": 0,
    "changes": 8,
    "blob_url": "https://github.com/afgalvan/JavaMySQL/blob/885cea737ae30c4671573fa48fd5ef6b757b76ba/build.gradle",
    "raw_url": "https://github.com/afgalvan/JavaMySQL/raw/885cea737ae30c4671573fa48fd5ef6b757b76ba/build.gradle",
    "contents_url": "https://api.github.com/repos/afgalvan/JavaMySQL/contents/build.gradle?ref=885cea737ae30c4671573fa48fd5ef6b757b76ba",
    "patch": "@@ -1,6 +1,7 @@\n plugins {\n     id 'java'\n     id 'application'\n+    id \"com.github.johnrengelman.shadow\" version \"6.1.0\"\n }\n \n group 'org.example'\n@@ -15,11 +16,18 @@ sourceCompatibility = 1.8\n targetCompatibility = 1.8\n \n dependencies {\n+    implementation 'io.github.cdimascio:dotenv-java:2.2.0'\n     implementation \"mysql:mysql-connector-java:8.0.23\"\n     testImplementation 'org.junit.jupiter:junit-jupiter-api:5.7.1'\n     testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine'\n }\n \n+jar {\n+    manifest {\n+        attributes 'Main-Class': 'main.Main'\n+    }\n+}\n+\n test {\n     useJUnitPlatform()\n }"
  },
  {
    "sha": "aa1a16057c240d8cdb5a0eede5ed5cae6b55df12",
    "filename": "src/main/java/database/DBPerson.java",
    "status": "added",
    "additions": 26,
    "deletions": 0,
    "changes": 26,
    "blob_url": "https://github.com/afgalvan/JavaMySQL/blob/885cea737ae30c4671573fa48fd5ef6b757b76ba/src/main/java/database/DBPerson.java",
    "raw_url": "https://github.com/afgalvan/JavaMySQL/raw/885cea737ae30c4671573fa48fd5ef6b757b76ba/src/main/java/database/DBPerson.java",
    "contents_url": "https://api.github.com/repos/afgalvan/JavaMySQL/contents/src/main/java/database/DBPerson.java?ref=885cea737ae30c4671573fa48fd5ef6b757b76ba",
    "patch": "@@ -0,0 +1,26 @@\n+package database;\n+\n+import models.Person;\n+\n+import java.sql.PreparedStatement;\n+import java.sql.SQLException;\n+\n+public class DBPerson extends DbAccess implements IInsert<Person> {\n+\n+    @Override\n+    public boolean insert(Person data) {\n+        open();\n+        try (PreparedStatement statement = prepareStatement(\n+            \"INSERT INTO persons (name, age, genre) VALUES (?, ?, ?)\")) {\n+            statement.setString(1, data.getName());\n+            statement.setInt(2, data.getAge());\n+            statement.setString(3, String.valueOf(data.getGenre().charAt(0)));\n+\n+            return !statement.execute();\n+        } catch (SQLException throwable) {\n+            return false;\n+        } finally {\n+            close();\n+        }\n+    }\n+}"
  },
  {
    "sha": "6a6ef2d85af231a0823cc08dd3978694ef6f7dd6",
    "filename": "src/main/java/database/DataBase.sql",
    "status": "added",
    "additions": 7,
    "deletions": 0,
    "changes": 7,
    "blob_url": "https://github.com/afgalvan/JavaMySQL/blob/885cea737ae30c4671573fa48fd5ef6b757b76ba/src/main/java/database/DataBase.sql",
    "raw_url": "https://github.com/afgalvan/JavaMySQL/raw/885cea737ae30c4671573fa48fd5ef6b757b76ba/src/main/java/database/DataBase.sql",
    "contents_url": "https://api.github.com/repos/afgalvan/JavaMySQL/contents/src/main/java/database/DataBase.sql?ref=885cea737ae30c4671573fa48fd5ef6b757b76ba",
    "patch": "@@ -0,0 +1,7 @@\n+CREATE TABLE IF NOT EXISTS persons(\n+    id INT NOT NULL AUTO_INCREMENT PRIMARY KEY UNIQUE,\n+    name TEXT,\n+    age INT,\n+    genre TEXT,\n+    log_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n+);"
  },
  {
    "sha": "3673bccfe18e1044306aac3c097ed61c202241e6",
    "filename": "src/main/java/database/DbAccess.java",
    "status": "added",
    "additions": 43,
    "deletions": 0,
    "changes": 43,
    "blob_url": "https://github.com/afgalvan/JavaMySQL/blob/885cea737ae30c4671573fa48fd5ef6b757b76ba/src/main/java/database/DbAccess.java",
    "raw_url": "https://github.com/afgalvan/JavaMySQL/raw/885cea737ae30c4671573fa48fd5ef6b757b76ba/src/main/java/database/DbAccess.java",
    "contents_url": "https://api.github.com/repos/afgalvan/JavaMySQL/contents/src/main/java/database/DbAccess.java?ref=885cea737ae30c4671573fa48fd5ef6b757b76ba",
    "patch": "@@ -0,0 +1,43 @@\n+package database;\n+\n+import java.sql.Connection;\n+import java.sql.DriverManager;\n+import java.sql.PreparedStatement;\n+import java.sql.SQLException;\n+import io.github.cdimascio.dotenv.Dotenv;\n+\n+public class DbAccess {\n+    private final String URL = \"jdbc:mysql://localhost:3306/javamysql\";\n+    private final String USERNAME = \"javamysql\";\n+    private final Dotenv dotenv = Dotenv.configure().load();\n+    private final String PASSWORD = dotenv.get(\"MYSQL_PASSWORD\");\n+    protected Connection _connection;\n+\n+    public DbAccess() {\n+        _connection = null;\n+    }\n+\n+    public void open() {\n+        try {\n+            _connection = DriverManager.getConnection(URL, USERNAME, PASSWORD);\n+            System.out.println(\"Successfully connected to MySQL!\");\n+        } catch (SQLException e) {\n+            System.out.println(\"Opps! error while connecting with MySQL\");\n+            e.printStackTrace();\n+        }\n+    }\n+\n+    public void close() {\n+        try {\n+            _connection.close();\n+            System.out.println(\"Successfully closed connection with MySQL!\");\n+        } catch (SQLException e) {\n+            System.out.println(\"Opps! error while closing connection with MySQL\");\n+            e.printStackTrace();\n+        }\n+    }\n+\n+    public PreparedStatement prepareStatement(String statement) throws SQLException {\n+        return _connection.prepareStatement(statement);\n+    }\n+}"
  },
  {
    "sha": "de92ad378159f58ab7a0a7ab4f1976e05122f989",
    "filename": "src/main/java/database/IFind.java",
    "status": "added",
    "additions": 5,
    "deletions": 0,
    "changes": 5,
    "blob_url": "https://github.com/afgalvan/JavaMySQL/blob/885cea737ae30c4671573fa48fd5ef6b757b76ba/src/main/java/database/IFind.java",
    "raw_url": "https://github.com/afgalvan/JavaMySQL/raw/885cea737ae30c4671573fa48fd5ef6b757b76ba/src/main/java/database/IFind.java",
    "contents_url": "https://api.github.com/repos/afgalvan/JavaMySQL/contents/src/main/java/database/IFind.java?ref=885cea737ae30c4671573fa48fd5ef6b757b76ba",
    "patch": "@@ -0,0 +1,5 @@\n+package database;\n+\n+public interface IFind<T> {\n+    T find(String primaryKey);\n+}"
  },
  {
    "sha": "412c0f42806b823f101c4077a8efd839bae25112",
    "filename": "src/main/java/database/IInsert.java",
    "status": "added",
    "additions": 5,
    "deletions": 0,
    "changes": 5,
    "blob_url": "https://github.com/afgalvan/JavaMySQL/blob/885cea737ae30c4671573fa48fd5ef6b757b76ba/src/main/java/database/IInsert.java",
    "raw_url": "https://github.com/afgalvan/JavaMySQL/raw/885cea737ae30c4671573fa48fd5ef6b757b76ba/src/main/java/database/IInsert.java",
    "contents_url": "https://api.github.com/repos/afgalvan/JavaMySQL/contents/src/main/java/database/IInsert.java?ref=885cea737ae30c4671573fa48fd5ef6b757b76ba",
    "patch": "@@ -0,0 +1,5 @@\n+package database;\n+\n+public interface IInsert<T> {\n+    boolean insert(T data);\n+}"
  },
  {
    "sha": "f03850922b111cce8d0d1c96235549a07a0369b4",
    "filename": "src/main/java/main/Main.java",
    "status": "modified",
    "additions": 14,
    "deletions": 1,
    "changes": 15,
    "blob_url": "https://github.com/afgalvan/JavaMySQL/blob/885cea737ae30c4671573fa48fd5ef6b757b76ba/src/main/java/main/Main.java",
    "raw_url": "https://github.com/afgalvan/JavaMySQL/raw/885cea737ae30c4671573fa48fd5ef6b757b76ba/src/main/java/main/Main.java",
    "contents_url": "https://api.github.com/repos/afgalvan/JavaMySQL/contents/src/main/java/main/Main.java?ref=885cea737ae30c4671573fa48fd5ef6b757b76ba",
    "patch": "@@ -1,7 +1,20 @@\n package main;\n \n+import models.Genre;\n+import models.Person;\n+import database.DBPerson;\n+\n public class Main {\n     public static void main(String[] args) {\n-        System.out.println(\"Hello world!\");\n+        Person person = new Person();\n+        DBPerson dbPerson = new DBPerson();\n+        person.setName(\"Andrés Galván\");\n+        person.setAge(18);\n+        person.setGenre(Genre.MALE);\n+        if (dbPerson.insert(person)) {\n+            System.out.println(\"Inserted data.\");\n+        } else {\n+            System.out.println(\"Couldn't create a new camp.\");\n+        }\n     }\n }"
  },
  {
    "sha": "fc4727e67d5eb00e2e3648a98a448686f121ee28",
    "filename": "src/main/java/models/Genre.java",
    "status": "added",
    "additions": 18,
    "deletions": 0,
    "changes": 18,
    "blob_url": "https://github.com/afgalvan/JavaMySQL/blob/885cea737ae30c4671573fa48fd5ef6b757b76ba/src/main/java/models/Genre.java",
    "raw_url": "https://github.com/afgalvan/JavaMySQL/raw/885cea737ae30c4671573fa48fd5ef6b757b76ba/src/main/java/models/Genre.java",
    "contents_url": "https://api.github.com/repos/afgalvan/JavaMySQL/contents/src/main/java/models/Genre.java?ref=885cea737ae30c4671573fa48fd5ef6b757b76ba",
    "patch": "@@ -0,0 +1,18 @@\n+package models;\n+\n+import java.io.Serializable;\n+\n+public enum Genre implements Serializable {\n+    MALE(\"Male\"),\n+    FEMALE(\"Female\"),\n+    OTHER(\"Other\");\n+    private final String genre;\n+\n+    Genre(String _genre) {\n+        genre = _genre;\n+    }\n+\n+    public String getGenre() {\n+        return genre;\n+    }\n+}"
  },
  {
    "sha": "246f89acc395b2ddb4f7dd0cdc4cc5bd0ecfe1ce",
    "filename": "src/main/java/models/Person.java",
    "status": "added",
    "additions": 31,
    "deletions": 0,
    "changes": 31,
    "blob_url": "https://github.com/afgalvan/JavaMySQL/blob/885cea737ae30c4671573fa48fd5ef6b757b76ba/src/main/java/models/Person.java",
    "raw_url": "https://github.com/afgalvan/JavaMySQL/raw/885cea737ae30c4671573fa48fd5ef6b757b76ba/src/main/java/models/Person.java",
    "contents_url": "https://api.github.com/repos/afgalvan/JavaMySQL/contents/src/main/java/models/Person.java?ref=885cea737ae30c4671573fa48fd5ef6b757b76ba",
    "patch": "@@ -0,0 +1,31 @@\n+package models;\n+\n+public class Person {\n+    private String name;\n+    private int age;\n+    private Genre genre;\n+\n+    public String getName() {\n+        return name;\n+    }\n+\n+    public void setName(String name) {\n+        this.name = name;\n+    }\n+\n+    public int getAge() {\n+        return age;\n+    }\n+\n+    public void setAge(int age) {\n+        this.age = age;\n+    }\n+\n+    public String getGenre() {\n+        return genre.getGenre();\n+    }\n+\n+    public void setGenre(Genre genre) {\n+        this.genre = genre;\n+    }\n+}"
  },
  {
    "sha": "7192dded82b80d66e7df92fa1ea4972543bb3aa7",
    "filename": "src/main/java/views/Menu.java",
    "status": "added",
    "additions": 4,
    "deletions": 0,
    "changes": 4,
    "blob_url": "https://github.com/afgalvan/JavaMySQL/blob/885cea737ae30c4671573fa48fd5ef6b757b76ba/src/main/java/views/Menu.java",
    "raw_url": "https://github.com/afgalvan/JavaMySQL/raw/885cea737ae30c4671573fa48fd5ef6b757b76ba/src/main/java/views/Menu.java",
    "contents_url": "https://api.github.com/repos/afgalvan/JavaMySQL/contents/src/main/java/views/Menu.java?ref=885cea737ae30c4671573fa48fd5ef6b757b76ba",
    "patch": "@@ -0,0 +1,4 @@\n+package views;\n+\n+public class Menu {\n+}"
  },
  {
    "sha": "8af47d7c79bf41ea02b64264e454ecfceeb705ef",
    "filename": "src/test/java/database/DbAccessTest.java",
    "status": "added",
    "additions": 13,
    "deletions": 0,
    "changes": 13,
    "blob_url": "https://github.com/afgalvan/JavaMySQL/blob/885cea737ae30c4671573fa48fd5ef6b757b76ba/src/test/java/database/DbAccessTest.java",
    "raw_url": "https://github.com/afgalvan/JavaMySQL/raw/885cea737ae30c4671573fa48fd5ef6b757b76ba/src/test/java/database/DbAccessTest.java",
    "contents_url": "https://api.github.com/repos/afgalvan/JavaMySQL/contents/src/test/java/database/DbAccessTest.java?ref=885cea737ae30c4671573fa48fd5ef6b757b76ba",
    "patch": "@@ -0,0 +1,13 @@\n+package database;\n+\n+import org.junit.jupiter.api.Test;\n+import static org.junit.jupiter.api.Assertions.assertNotNull;\n+\n+public class DbAccessTest {\n+    @Test\n+    public void isDBConnected() {\n+        DbAccess dbAccess = new DbAccess();\n+        dbAccess.open();\n+        assertNotNull(dbAccess._connection, \"Connection should be opened\");\n+    }\n+}"
  }
]
