[
  {
    "sha": "57145d46bee9df40997739218ad24c3d52a20e52",
    "filename": "jsf-app/pom.xml",
    "status": "modified",
    "additions": 25,
    "deletions": 0,
    "changes": 25,
    "blob_url": "https://github.com/PavelTrishkin/firstapp/blob/e127cae26b42b18d5ae68bf28ca6e05097343406/jsf-app/pom.xml",
    "raw_url": "https://github.com/PavelTrishkin/firstapp/raw/e127cae26b42b18d5ae68bf28ca6e05097343406/jsf-app/pom.xml",
    "contents_url": "https://api.github.com/repos/PavelTrishkin/firstapp/contents/jsf-app/pom.xml?ref=e127cae26b42b18d5ae68bf28ca6e05097343406",
    "patch": "@@ -88,6 +88,31 @@\n             <scope>provided</scope>\n         </dependency>\n \n+        <dependency>\n+            <groupId>javax.ws.rs</groupId>\n+            <artifactId>javax.ws.rs-api</artifactId>\n+            <version>2.1.1</version>\n+            <scope>provided</scope>\n+        </dependency>\n+\n+        <dependency>\n+            <groupId>javax.jms</groupId>\n+            <artifactId>javax.jms-api</artifactId>\n+            <version>2.0.1</version>\n+            <scope>provided</scope>\n+        </dependency>\n+\n+        <dependency>\n+            <groupId>org.example</groupId>\n+            <artifactId>product-service-api</artifactId>\n+            <version>1.0-SNAPSHOT</version>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.jboss.logging</groupId>\n+            <artifactId>jboss-logging</artifactId>\n+            <version>3.4.1.Final</version>\n+            <scope>compile</scope>\n+        </dependency>\n     </dependencies>\n \n     <build>"
  },
  {
    "sha": "15a1037f94220d770eabe3d13a0b04599b6130b9",
    "filename": "jsf-app/requests.http",
    "status": "added",
    "additions": 32,
    "deletions": 0,
    "changes": 32,
    "blob_url": "https://github.com/PavelTrishkin/firstapp/blob/e127cae26b42b18d5ae68bf28ca6e05097343406/jsf-app/requests.http",
    "raw_url": "https://github.com/PavelTrishkin/firstapp/raw/e127cae26b42b18d5ae68bf28ca6e05097343406/jsf-app/requests.http",
    "contents_url": "https://api.github.com/repos/PavelTrishkin/firstapp/contents/jsf-app/requests.http?ref=e127cae26b42b18d5ae68bf28ca6e05097343406",
    "patch": "@@ -0,0 +1,32 @@\n+GET http://localhost:8080/first-jsf-app/api/v1/product/\n+\n+###\n+\n+GET http://localhost:8080/first-jsf-app/api/v1/product/6\n+\n+###\n+\n+POST http://localhost:8080/first-jsf-app/api/v1/product/\n+Content-Type: application/json\n+\n+{\n+  \"categoryId\": 1,\n+  \"categoryName\": \"Category 1\",\n+  \"description\": \"Product from REST\",\n+  \"name\": \"Product from REST\",\n+  \"price\": 100.00\n+}\n+\n+###\n+\n+PUT http://localhost:8080/first-jsf-app/api/v1/product/\n+Content-Type: application/json\n+\n+{\n+  \"id\": 6,\n+  \"categoryId\": 1,\n+  \"categoryName\": \"Category 1\",\n+  \"description\": \"Product from REST 1\",\n+  \"name\": \"Product from REST 1\",\n+  \"price\": 150.00\n+}\n\\ No newline at end of file"
  },
  {
    "sha": "01c4e030d50d4e23caf2983241b8a2fe30e74dbb",
    "filename": "jsf-app/src/main/java/ru/geekbrains/controllers/ProductController.java",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/PavelTrishkin/firstapp/blob/e127cae26b42b18d5ae68bf28ca6e05097343406/jsf-app/src/main/java/ru/geekbrains/controllers/ProductController.java",
    "raw_url": "https://github.com/PavelTrishkin/firstapp/raw/e127cae26b42b18d5ae68bf28ca6e05097343406/jsf-app/src/main/java/ru/geekbrains/controllers/ProductController.java",
    "contents_url": "https://api.github.com/repos/PavelTrishkin/firstapp/contents/jsf-app/src/main/java/ru/geekbrains/controllers/ProductController.java?ref=e127cae26b42b18d5ae68bf28ca6e05097343406",
    "patch": "@@ -1,8 +1,8 @@\n package ru.geekbrains.controllers;\n \n-import ru.geekbrains.dto.ProductDto;\n import ru.geekbrains.persist.Category;\n import ru.geekbrains.persist.CategoryRepository;\n+import ru.geekbrains.services.ProductDto;\n import ru.geekbrains.services.ProductService;\n import javax.ejb.EJB;\n import javax.enterprise.context.SessionScoped;"
  },
  {
    "sha": "0fbf5bf18c0f96710cb45c9ed6f893d2ea03626d",
    "filename": "jsf-app/src/main/java/ru/geekbrains/jms/JmsProductReceiver.java",
    "status": "added",
    "additions": 42,
    "deletions": 0,
    "changes": 42,
    "blob_url": "https://github.com/PavelTrishkin/firstapp/blob/e127cae26b42b18d5ae68bf28ca6e05097343406/jsf-app/src/main/java/ru/geekbrains/jms/JmsProductReceiver.java",
    "raw_url": "https://github.com/PavelTrishkin/firstapp/raw/e127cae26b42b18d5ae68bf28ca6e05097343406/jsf-app/src/main/java/ru/geekbrains/jms/JmsProductReceiver.java",
    "contents_url": "https://api.github.com/repos/PavelTrishkin/firstapp/contents/jsf-app/src/main/java/ru/geekbrains/jms/JmsProductReceiver.java?ref=e127cae26b42b18d5ae68bf28ca6e05097343406",
    "patch": "@@ -0,0 +1,42 @@\n+package ru.geekbrains.jms;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import ru.geekbrains.services.ProductDto;\n+import ru.geekbrains.services.ProductService;\n+\n+import javax.ejb.ActivationConfigProperty;\n+import javax.ejb.EJB;\n+import javax.ejb.MessageDriven;\n+import javax.jms.JMSException;\n+import javax.jms.Message;\n+import javax.jms.MessageListener;\n+import javax.jms.ObjectMessage;\n+\n+@MessageDriven(\n+        activationConfig = {\n+                @ActivationConfigProperty(propertyName = \"destinationType\", propertyValue = \"javax.jms.Queue\"),\n+                @ActivationConfigProperty(propertyName = \"destination\", propertyValue = \"java:jboss/exported/jms/productQueue\")\n+        }\n+)\n+public class JmsProductReceiver implements MessageListener {\n+\n+    private final Logger logger = LoggerFactory.getLogger(JmsProductReceiver.class);\n+\n+    @EJB\n+    private ProductService productService;\n+\n+    @Override\n+    public void onMessage(Message message) {\n+        logger.info(\"New JMS message\");\n+\n+        if (message instanceof ObjectMessage) {\n+            ObjectMessage om = (ObjectMessage) message;\n+            try {\n+                productService.saveOrUpdate((ProductDto) om.getObject());\n+            } catch (JMSException e) {\n+                logger.error(\"\", e);\n+            }\n+        }\n+    }\n+}"
  },
  {
    "sha": "0e1c9ee21388c098b31ec88c30b2e9b1aa01ab06",
    "filename": "jsf-app/src/main/java/ru/geekbrains/persist/Product.java",
    "status": "modified",
    "additions": 4,
    "deletions": 3,
    "changes": 7,
    "blob_url": "https://github.com/PavelTrishkin/firstapp/blob/e127cae26b42b18d5ae68bf28ca6e05097343406/jsf-app/src/main/java/ru/geekbrains/persist/Product.java",
    "raw_url": "https://github.com/PavelTrishkin/firstapp/raw/e127cae26b42b18d5ae68bf28ca6e05097343406/jsf-app/src/main/java/ru/geekbrains/persist/Product.java",
    "contents_url": "https://api.github.com/repos/PavelTrishkin/firstapp/contents/jsf-app/src/main/java/ru/geekbrains/persist/Product.java?ref=e127cae26b42b18d5ae68bf28ca6e05097343406",
    "patch": "@@ -1,17 +1,18 @@\n package ru.geekbrains.persist;\n \n-import ru.geekbrains.dto.ProductDto;\n+import ru.geekbrains.services.ProductDto;\n \n import javax.persistence.*;\n import java.math.BigDecimal;\n-import java.util.List;\n \n @Entity\n @Table(name = \"product\")\n @NamedQueries({\n         @NamedQuery(name = \"findAllProduct\", query = \"from Product\"),\n         @NamedQuery(name = \"countAllProduct\", query = \"select count(*) from Product\"),\n-        @NamedQuery(name = \"deleteProductById\", query = \"delete from Product p where p.id = :id\")\n+        @NamedQuery(name = \"deleteProductById\", query = \"delete from Product p where p.id = :id\"),\n+        @NamedQuery(name = \"findByName\", query = \"select p from Product p where p.name = :name\"),\n+        @NamedQuery(name = \"findProductByCategoryId\", query = \"from Product p where p.category.id = :id\")\n })\n public class Product {\n "
  },
  {
    "sha": "a72871c17690062caa7a1f0e4978245c05cd21a3",
    "filename": "jsf-app/src/main/java/ru/geekbrains/persist/ProductRepository.java",
    "status": "modified",
    "additions": 10,
    "deletions": 0,
    "changes": 10,
    "blob_url": "https://github.com/PavelTrishkin/firstapp/blob/e127cae26b42b18d5ae68bf28ca6e05097343406/jsf-app/src/main/java/ru/geekbrains/persist/ProductRepository.java",
    "raw_url": "https://github.com/PavelTrishkin/firstapp/raw/e127cae26b42b18d5ae68bf28ca6e05097343406/jsf-app/src/main/java/ru/geekbrains/persist/ProductRepository.java",
    "contents_url": "https://api.github.com/repos/PavelTrishkin/firstapp/contents/jsf-app/src/main/java/ru/geekbrains/persist/ProductRepository.java?ref=e127cae26b42b18d5ae68bf28ca6e05097343406",
    "patch": "@@ -44,4 +44,14 @@ public void deleteById(Long id) {\n                 .setParameter(\"id\", id)\n                 .executeUpdate();\n     }\n+\n+    public Product findByName(String name) {\n+        return em.createNamedQuery(\"findByName\", Product.class).getSingleResult();\n+    }\n+\n+    public List findProductByCategoryId(Long id) {\n+        return em.createNamedQuery(\"findProductByCategoryId\")\n+                .setParameter(\"id\", id)\n+                .getResultList();\n+    }\n }\n\\ No newline at end of file"
  },
  {
    "sha": "48983f64487e1c5593cab7cd990241d83b7b3a94",
    "filename": "jsf-app/src/main/java/ru/geekbrains/rest/JaxRsApplication.java",
    "status": "added",
    "additions": 8,
    "deletions": 0,
    "changes": 8,
    "blob_url": "https://github.com/PavelTrishkin/firstapp/blob/e127cae26b42b18d5ae68bf28ca6e05097343406/jsf-app/src/main/java/ru/geekbrains/rest/JaxRsApplication.java",
    "raw_url": "https://github.com/PavelTrishkin/firstapp/raw/e127cae26b42b18d5ae68bf28ca6e05097343406/jsf-app/src/main/java/ru/geekbrains/rest/JaxRsApplication.java",
    "contents_url": "https://api.github.com/repos/PavelTrishkin/firstapp/contents/jsf-app/src/main/java/ru/geekbrains/rest/JaxRsApplication.java?ref=e127cae26b42b18d5ae68bf28ca6e05097343406",
    "patch": "@@ -0,0 +1,8 @@\n+package ru.geekbrains.rest;\n+\n+import javax.ws.rs.ApplicationPath;\n+import javax.ws.rs.core.Application;\n+\n+@ApplicationPath(\"/api\")\n+public class JaxRsApplication extends Application {\n+}"
  },
  {
    "sha": "d7140a57653584c03d7b3be5bde11c6a4f1c2003",
    "filename": "jsf-app/src/main/java/ru/geekbrains/rest/ProductServiceRest.java",
    "status": "added",
    "additions": 39,
    "deletions": 0,
    "changes": 39,
    "blob_url": "https://github.com/PavelTrishkin/firstapp/blob/e127cae26b42b18d5ae68bf28ca6e05097343406/jsf-app/src/main/java/ru/geekbrains/rest/ProductServiceRest.java",
    "raw_url": "https://github.com/PavelTrishkin/firstapp/raw/e127cae26b42b18d5ae68bf28ca6e05097343406/jsf-app/src/main/java/ru/geekbrains/rest/ProductServiceRest.java",
    "contents_url": "https://api.github.com/repos/PavelTrishkin/firstapp/contents/jsf-app/src/main/java/ru/geekbrains/rest/ProductServiceRest.java?ref=e127cae26b42b18d5ae68bf28ca6e05097343406",
    "patch": "@@ -0,0 +1,39 @@\n+package ru.geekbrains.rest;\n+\n+import ru.geekbrains.services.ProductDto;\n+\n+import javax.ejb.Local;\n+import javax.ws.rs.*;\n+import javax.ws.rs.core.MediaType;\n+import java.util.List;\n+\n+@Local\n+@Path(\"/v1/product\")\n+public interface ProductServiceRest {\n+\n+    @GET\n+    @Produces(MediaType.APPLICATION_JSON)\n+    List<ProductDto> findAll();\n+\n+    @GET\n+    @Path(\"/{id}\")\n+    @Produces(MediaType.APPLICATION_JSON)\n+    ProductDto findById(@PathParam(\"id\") Long id);\n+\n+    @GET\n+    @Path(\"/count\")\n+    @Produces(MediaType.APPLICATION_JSON)\n+    Long countAll();\n+\n+    @POST\n+    @Consumes(MediaType.APPLICATION_JSON)\n+    void insert(ProductDto product);\n+\n+    @PUT\n+    @Consumes(MediaType.APPLICATION_JSON)\n+    void update(ProductDto product);\n+\n+    @DELETE\n+    @Path(\"/{id}\")\n+    void deleteById(Long id);\n+}"
  },
  {
    "sha": "30635950c5642ee6a79a5873172d3dfc9c516885",
    "filename": "jsf-app/src/main/java/ru/geekbrains/services/ProductService.java",
    "status": "modified",
    "additions": 6,
    "deletions": 0,
    "changes": 6,
    "blob_url": "https://github.com/PavelTrishkin/firstapp/blob/e127cae26b42b18d5ae68bf28ca6e05097343406/jsf-app/src/main/java/ru/geekbrains/services/ProductService.java",
    "raw_url": "https://github.com/PavelTrishkin/firstapp/raw/e127cae26b42b18d5ae68bf28ca6e05097343406/jsf-app/src/main/java/ru/geekbrains/services/ProductService.java",
    "contents_url": "https://api.github.com/repos/PavelTrishkin/firstapp/contents/jsf-app/src/main/java/ru/geekbrains/services/ProductService.java?ref=e127cae26b42b18d5ae68bf28ca6e05097343406",
    "patch": "@@ -1,6 +1,8 @@\n package ru.geekbrains.services;\n \n import ru.geekbrains.dto.ProductDto;\n+import ru.geekbrains.persist.Product;\n+\n import javax.ejb.Local;\n import java.util.List;\n \n@@ -15,4 +17,8 @@\n     void saveOrUpdate(ProductDto product);\n \n     void deleteById(Long id);\n+\n+    Product findByName(String name);\n+\n+    List<Product> findAllByCategoryId(Long id);\n }"
  },
  {
    "sha": "c8e49670eaebc8d46a59ce8864d6dc3db7bf420a",
    "filename": "jsf-app/src/main/java/ru/geekbrains/services/ProductServiceImpl.java",
    "status": "modified",
    "additions": 47,
    "deletions": 5,
    "changes": 52,
    "blob_url": "https://github.com/PavelTrishkin/firstapp/blob/e127cae26b42b18d5ae68bf28ca6e05097343406/jsf-app/src/main/java/ru/geekbrains/services/ProductServiceImpl.java",
    "raw_url": "https://github.com/PavelTrishkin/firstapp/raw/e127cae26b42b18d5ae68bf28ca6e05097343406/jsf-app/src/main/java/ru/geekbrains/services/ProductServiceImpl.java",
    "contents_url": "https://api.github.com/repos/PavelTrishkin/firstapp/contents/jsf-app/src/main/java/ru/geekbrains/services/ProductServiceImpl.java?ref=e127cae26b42b18d5ae68bf28ca6e05097343406",
    "patch": "@@ -2,20 +2,22 @@\n \n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n-import ru.geekbrains.dto.ProductDto;\n import ru.geekbrains.persist.Category;\n import ru.geekbrains.persist.CategoryRepository;\n import ru.geekbrains.persist.Product;\n import ru.geekbrains.persist.ProductRepository;\n+import ru.geekbrains.rest.ProductServiceRest;\n \n import javax.ejb.EJB;\n+import javax.ejb.Remote;\n import javax.ejb.Stateless;\n import javax.ejb.TransactionAttribute;\n import java.util.List;\n import java.util.stream.Collectors;\n \n @Stateless\n-public class ProductServiceImpl implements ProductService, ProductServiceRemote {\n+@Remote(ProductServiceRemote.class)\n+public class ProductServiceImpl implements ProductService, ProductServiceRemote, ProductServiceRest {\n \n     private static final Logger logger = LoggerFactory.getLogger(ProductServiceImpl.class);\n \n@@ -28,15 +30,29 @@\n     @Override\n     public List<ProductDto> findAll() {\n         return productRepository.findAll().stream()\n-                .map(ProductDto::new)\n+                .map(this::buildProductDto)\n                 .collect(Collectors.toList());\n     }\n \n+    private ProductDto buildProductDto(Product product) {\n+        ProductDto dto = new ProductDto();\n+\n+        dto.setId(product.getId());\n+        dto.setName(product.getName());\n+        dto.setDescription(product.getDescription());\n+        dto.setPrice(product.getPrice());\n+        Category category = product.getCategory();\n+        dto.setCategoryId(category != null ? category.getId() : null);\n+        dto.setCategoryName(category != null ? category.getTitle() : null);\n+\n+        return dto;\n+    }\n+\n     @Override\n     public ProductDto findById(Long id) {\n         Product product = productRepository.findById(id);\n         if (product != null) {\n-            return new ProductDto(product);\n+            return buildProductDto(product);\n         }\n         return null;\n     }\n@@ -46,10 +62,26 @@ public Long countAll() {\n         return productRepository.countAll();\n     }\n \n+    @Override\n+    public void insert(ProductDto product) {\n+        if (product.getId() != null) {\n+            throw new IllegalArgumentException();\n+        }\n+        saveOrUpdate(product);\n+    }\n+\n+    @Override\n+    public void update(ProductDto product) {\n+        if (product.getId() == null) {\n+            throw new IllegalArgumentException();\n+        }\n+        saveOrUpdate(product);\n+    }\n+\n     @TransactionAttribute\n     @Override\n     public void saveOrUpdate(ProductDto product) {\n-        logger.info(\"Saving product with id {}\" , product.getId());\n+        logger.info(\"Saving product with id {}\", product.getId());\n \n         Category category = null;\n         if (product.getCategoryId() != null) {\n@@ -63,4 +95,14 @@ public void saveOrUpdate(ProductDto product) {\n     public void deleteById(Long id) {\n         productRepository.deleteById(id);\n     }\n+\n+    @Override\n+    public Product findByName(String name) {\n+        return productRepository.findByName(name);\n+    }\n+\n+    @Override\n+    public List findAllByCategoryId(Long id) {\n+        return productRepository.findProductByCategoryId(id);\n+    }\n }"
  },
  {
    "sha": "e52b551f12eff61f056022be6175b19db2397416",
    "filename": "pom.xml",
    "status": "modified",
    "additions": 2,
    "deletions": 0,
    "changes": 2,
    "blob_url": "https://github.com/PavelTrishkin/firstapp/blob/e127cae26b42b18d5ae68bf28ca6e05097343406/pom.xml",
    "raw_url": "https://github.com/PavelTrishkin/firstapp/raw/e127cae26b42b18d5ae68bf28ca6e05097343406/pom.xml",
    "contents_url": "https://api.github.com/repos/PavelTrishkin/firstapp/contents/pom.xml?ref=e127cae26b42b18d5ae68bf28ca6e05097343406",
    "patch": "@@ -8,7 +8,9 @@\n     <artifactId>firstapp</artifactId>\n     <version>1.0-SNAPSHOT</version>\n     <modules>\n+        <module>product-service-api</module>\n         <module>jsf-app</module>\n+        <module>remote-client</module>\n     </modules>\n     <packaging>pom</packaging>\n "
  },
  {
    "sha": "b44683da208802ca61f7b302ca9b95e3251a33a8",
    "filename": "product-service-api/pom.xml",
    "status": "added",
    "additions": 19,
    "deletions": 0,
    "changes": 19,
    "blob_url": "https://github.com/PavelTrishkin/firstapp/blob/e127cae26b42b18d5ae68bf28ca6e05097343406/product-service-api/pom.xml",
    "raw_url": "https://github.com/PavelTrishkin/firstapp/raw/e127cae26b42b18d5ae68bf28ca6e05097343406/product-service-api/pom.xml",
    "contents_url": "https://api.github.com/repos/PavelTrishkin/firstapp/contents/product-service-api/pom.xml?ref=e127cae26b42b18d5ae68bf28ca6e05097343406",
    "patch": "@@ -0,0 +1,19 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+    <parent>\n+        <artifactId>firstapp</artifactId>\n+        <groupId>org.example</groupId>\n+        <version>1.0-SNAPSHOT</version>\n+    </parent>\n+    <modelVersion>4.0.0</modelVersion>\n+\n+    <artifactId>product-service-api</artifactId>\n+\n+    <properties>\n+        <maven.compiler.source>11</maven.compiler.source>\n+        <maven.compiler.target>11</maven.compiler.target>\n+    </properties>\n+\n+</project>\n\\ No newline at end of file"
  },
  {
    "sha": "a618935c9795b2f89c3839463c623d85e3f4521b",
    "filename": "product-service-api/src/main/java/ru/geekbrains/services/ProductDto.java",
    "status": "renamed",
    "additions": 8,
    "deletions": 12,
    "changes": 20,
    "blob_url": "https://github.com/PavelTrishkin/firstapp/blob/e127cae26b42b18d5ae68bf28ca6e05097343406/product-service-api/src/main/java/ru/geekbrains/services/ProductDto.java",
    "raw_url": "https://github.com/PavelTrishkin/firstapp/raw/e127cae26b42b18d5ae68bf28ca6e05097343406/product-service-api/src/main/java/ru/geekbrains/services/ProductDto.java",
    "contents_url": "https://api.github.com/repos/PavelTrishkin/firstapp/contents/product-service-api/src/main/java/ru/geekbrains/services/ProductDto.java?ref=e127cae26b42b18d5ae68bf28ca6e05097343406",
    "patch": "@@ -1,7 +1,5 @@\n-package ru.geekbrains.dto;\n+package ru.geekbrains.services;\n \n-import ru.geekbrains.persist.Category;\n-import ru.geekbrains.persist.Product;\n \n import java.io.Serializable;\n import java.math.BigDecimal;\n@@ -23,14 +21,13 @@\n     public ProductDto() {\n     }\n \n-    public ProductDto(Product product) {\n-        id = product.getId();\n-        name = product.getName();\n-        description = product.getDescription();\n-        price = product.getPrice();\n-        Category category = product.getCategory();\n-        categoryId = category != null ? category.getId() : null;\n-        categoryName = category != null ? category.getTitle() : null;\n+    public ProductDto(Long id, String name, String description, BigDecimal price, Long categoryId, String categoryName) {\n+        this.id = id;\n+        this.name = name;\n+        this.description = description;\n+        this.price = price;\n+        this.categoryId = categoryId;\n+        this.categoryName = categoryName;\n     }\n \n     public Long getId() {\n@@ -80,5 +77,4 @@ public String getCategoryName() {\n     public void setCategoryName(String categoryName) {\n         this.categoryName = categoryName;\n     }\n-\n }",
    "previous_filename": "jsf-app/src/main/java/ru/geekbrains/dto/ProductDto.java"
  },
  {
    "sha": "a1046415eeff5c6d57ab3bc7f3ddc8e40286f9b9",
    "filename": "product-service-api/src/main/java/ru/geekbrains/services/ProductServiceRemote.java",
    "status": "added",
    "additions": 12,
    "deletions": 0,
    "changes": 12,
    "blob_url": "https://github.com/PavelTrishkin/firstapp/blob/e127cae26b42b18d5ae68bf28ca6e05097343406/product-service-api/src/main/java/ru/geekbrains/services/ProductServiceRemote.java",
    "raw_url": "https://github.com/PavelTrishkin/firstapp/raw/e127cae26b42b18d5ae68bf28ca6e05097343406/product-service-api/src/main/java/ru/geekbrains/services/ProductServiceRemote.java",
    "contents_url": "https://api.github.com/repos/PavelTrishkin/firstapp/contents/product-service-api/src/main/java/ru/geekbrains/services/ProductServiceRemote.java?ref=e127cae26b42b18d5ae68bf28ca6e05097343406",
    "patch": "@@ -0,0 +1,12 @@\n+package ru.geekbrains.services;\n+\n+import java.util.List;\n+\n+public interface ProductServiceRemote {\n+\n+    List<ProductDto> findAll();\n+\n+    ProductDto findById(Long id);\n+\n+    Long countAll();\n+}"
  },
  {
    "sha": "7dfb00a1192fb1eca4da75677a2c2f1c9d8ce83b",
    "filename": "remote-client/pom.xml",
    "status": "added",
    "additions": 57,
    "deletions": 0,
    "changes": 57,
    "blob_url": "https://github.com/PavelTrishkin/firstapp/blob/e127cae26b42b18d5ae68bf28ca6e05097343406/remote-client/pom.xml",
    "raw_url": "https://github.com/PavelTrishkin/firstapp/raw/e127cae26b42b18d5ae68bf28ca6e05097343406/remote-client/pom.xml",
    "contents_url": "https://api.github.com/repos/PavelTrishkin/firstapp/contents/remote-client/pom.xml?ref=e127cae26b42b18d5ae68bf28ca6e05097343406",
    "patch": "@@ -0,0 +1,57 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+    <parent>\n+        <artifactId>firstapp</artifactId>\n+        <groupId>org.example</groupId>\n+        <version>1.0-SNAPSHOT</version>\n+    </parent>\n+    <modelVersion>4.0.0</modelVersion>\n+\n+    <artifactId>remote-client</artifactId>\n+\n+    <dependencies>\n+        <dependency>\n+            <groupId>org.wildfly</groupId>\n+            <artifactId>wildfly-ejb-client-bom</artifactId>\n+            <version>21.0.0.Final</version>\n+            <type>pom</type>\n+        </dependency>\n+\n+        <dependency>\n+            <groupId>org.jboss.spec.javax.ejb</groupId>\n+            <artifactId>jboss-ejb-api_3.2_spec</artifactId>\n+            <version>2.0.0.Final</version>\n+            <scope>compile</scope>\n+        </dependency>\n+\n+        <dependency>\n+            <groupId>org.wildfly</groupId>\n+            <artifactId>wildfly-jms-client-bom</artifactId>\n+            <type>pom</type>\n+            <version>18.0.1.Final</version>\n+        </dependency>\n+\n+        <dependency>\n+            <groupId>org.example</groupId>\n+            <artifactId>product-service-api</artifactId>\n+            <version>1.0-SNAPSHOT</version>\n+        </dependency>\n+        <dependency>\n+            <groupId>javax.jms</groupId>\n+            <artifactId>javax.jms-api</artifactId>\n+            <version>2.0.1</version>\n+            <scope>compile</scope>\n+        </dependency>\n+    </dependencies>\n+\n+    <repositories>\n+        <repository>\n+            <id>JBoss</id>\n+            <name>JBoss repository</name>\n+            <url>https://repository.jboss.org/nexus/content/repositories/thirdparty-releases/</url>\n+        </repository>\n+    </repositories>\n+\n+</project>\n\\ No newline at end of file"
  },
  {
    "sha": "aad4b42d2dedf4149a32eb63a14ef5618f3bfa11",
    "filename": "remote-client/src/main/java/ru/geekbrains/EjbClient.java",
    "status": "added",
    "additions": 28,
    "deletions": 0,
    "changes": 28,
    "blob_url": "https://github.com/PavelTrishkin/firstapp/blob/e127cae26b42b18d5ae68bf28ca6e05097343406/remote-client/src/main/java/ru/geekbrains/EjbClient.java",
    "raw_url": "https://github.com/PavelTrishkin/firstapp/raw/e127cae26b42b18d5ae68bf28ca6e05097343406/remote-client/src/main/java/ru/geekbrains/EjbClient.java",
    "contents_url": "https://api.github.com/repos/PavelTrishkin/firstapp/contents/remote-client/src/main/java/ru/geekbrains/EjbClient.java?ref=e127cae26b42b18d5ae68bf28ca6e05097343406",
    "patch": "@@ -0,0 +1,28 @@\n+package ru.geekbrains;\n+\n+import ru.geekbrains.services.ProductServiceRemote;\n+\n+import javax.naming.Context;\n+import javax.naming.InitialContext;\n+import javax.naming.NamingException;\n+import java.io.IOException;\n+import java.util.Properties;\n+\n+public class EjbClient {\n+\n+    public static void main(String[] args) throws IOException, NamingException {\n+        Context context = createInitialContext();\n+\n+        String jndiServiceName = \"ejb:/first-jsf-app/ProductServiceImpl!ru.geekbrains.service.ProductServiceRemote\";\n+        ProductServiceRemote productService = (ProductServiceRemote) context.lookup(jndiServiceName);\n+\n+        productService.findAll()\n+                .forEach(prod -> System.out.println(prod.getId() + \"\\t\" + prod.getName() + \"\\t\" + prod.getPrice()));\n+    }\n+\n+    public static Context createInitialContext() throws IOException, NamingException {\n+        final Properties env = new Properties();\n+        env.load(EjbClient.class.getClassLoader().getResourceAsStream(\"wildfly-jndi.properties\"));\n+        return new InitialContext(env);\n+    }\n+}"
  },
  {
    "sha": "7022a8797b991a565c8b2bc743d33634c5cfe91c",
    "filename": "remote-client/src/main/java/ru/geekbrains/JmsClient.java",
    "status": "added",
    "additions": 37,
    "deletions": 0,
    "changes": 37,
    "blob_url": "https://github.com/PavelTrishkin/firstapp/blob/e127cae26b42b18d5ae68bf28ca6e05097343406/remote-client/src/main/java/ru/geekbrains/JmsClient.java",
    "raw_url": "https://github.com/PavelTrishkin/firstapp/raw/e127cae26b42b18d5ae68bf28ca6e05097343406/remote-client/src/main/java/ru/geekbrains/JmsClient.java",
    "contents_url": "https://api.github.com/repos/PavelTrishkin/firstapp/contents/remote-client/src/main/java/ru/geekbrains/JmsClient.java?ref=e127cae26b42b18d5ae68bf28ca6e05097343406",
    "patch": "@@ -0,0 +1,37 @@\n+package ru.geekbrains;\n+\n+\n+import ru.geekbrains.services.ProductDto;\n+\n+import javax.jms.*;\n+import javax.naming.Context;\n+import javax.naming.InitialContext;\n+import javax.naming.NamingException;\n+import java.io.IOException;\n+import java.math.BigDecimal;\n+import java.util.Objects;\n+import java.util.Properties;\n+\n+public class JmsClient {\n+    public static void main(String[] args) throws IOException, NamingException {\n+        Context context = createInitialContext();\n+\n+        ConnectionFactory factory = (ConnectionFactory) context.lookup(\"jms/RemoteConnectionFactory\");\n+        JMSContext jmsContext = factory.createContext(\"jmsUser\", \"123\");\n+\n+        Destination dest = (Destination) context.lookup(\"jms/productQueue\");\n+\n+        JMSProducer producer = jmsContext.createProducer();\n+\n+        ObjectMessage om = jmsContext.createObjectMessage(new ProductDto(null, \"Product from JMS\", \"Product from JMS\",\n+                new BigDecimal(100), 1L, null));\n+\n+        producer.send(dest, om);\n+    }\n+\n+    public static Context createInitialContext() throws IOException, NamingException {\n+        final Properties env = new Properties();\n+        env.load(Objects.requireNonNull(EjbClient.class.getClassLoader().getResourceAsStream(\"wildfly-jndi.properties\")));\n+        return new InitialContext(env);\n+    }\n+}"
  },
  {
    "sha": "2931ee50c840676d73126478573ab155795ddccd",
    "filename": "remote-client/src/main/resources/wildfly-jndi.properties",
    "status": "added",
    "additions": 4,
    "deletions": 0,
    "changes": 4,
    "blob_url": "https://github.com/PavelTrishkin/firstapp/blob/e127cae26b42b18d5ae68bf28ca6e05097343406/remote-client/src/main/resources/wildfly-jndi.properties",
    "raw_url": "https://github.com/PavelTrishkin/firstapp/raw/e127cae26b42b18d5ae68bf28ca6e05097343406/remote-client/src/main/resources/wildfly-jndi.properties",
    "contents_url": "https://api.github.com/repos/PavelTrishkin/firstapp/contents/remote-client/src/main/resources/wildfly-jndi.properties?ref=e127cae26b42b18d5ae68bf28ca6e05097343406",
    "patch": "@@ -0,0 +1,4 @@\n+java.naming.factory.initial=org.wildfly.naming.client.WildFlyInitialContextFactory\n+java.naming.provider.url=http-remoting://127.0.0.1:8080\n+jboss.naming.client.ejb.context=true\n+java.naming.factory.url.pkgs=org.jboss.ejb.client.naming\n\\ No newline at end of file"
  }
]
