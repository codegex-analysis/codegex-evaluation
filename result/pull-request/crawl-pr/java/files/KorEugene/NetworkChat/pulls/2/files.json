[
  {
    "sha": "6cdb4915a022a51f9ff7850098b1606d245dd033",
    "filename": ".idea/.gitignore",
    "status": "modified",
    "additions": 1,
    "deletions": 0,
    "changes": 1,
    "blob_url": "https://github.com/KorEugene/NetworkChat/blob/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/.idea/.gitignore",
    "raw_url": "https://github.com/KorEugene/NetworkChat/raw/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/.idea/.gitignore",
    "contents_url": "https://api.github.com/repos/KorEugene/NetworkChat/contents/.idea/.gitignore?ref=ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb",
    "patch": "@@ -1,6 +1,7 @@\n # Default ignored files\n /shelf/\n /workspace.xml\n+/libraries/\n # Datasource local storage ignored files\n /../../../../../../:\\GeekBrainsUniversity\\java\\NetworkChat\\NetworkChat\\.idea/dataSources/\n /dataSources.local.xml"
  },
  {
    "sha": "2089f2ac5f7a1e10270f0a0c3d3a4e48e0c063f4",
    "filename": ".idea/.name",
    "status": "removed",
    "additions": 0,
    "deletions": 1,
    "changes": 1,
    "blob_url": "https://github.com/KorEugene/NetworkChat/blob/26f3406ae57610b467e26d801f35b1eb636b1608/.idea/.name",
    "raw_url": "https://github.com/KorEugene/NetworkChat/raw/26f3406ae57610b467e26d801f35b1eb636b1608/.idea/.name",
    "contents_url": "https://api.github.com/repos/KorEugene/NetworkChat/contents/.idea/.name?ref=26f3406ae57610b467e26d801f35b1eb636b1608",
    "patch": "@@ -1 +0,0 @@\n-ChatClient\n\\ No newline at end of file"
  },
  {
    "sha": "34106f89d4eb63de2a682b6dc8df9df4433ffe4a",
    "filename": ".idea/compiler.xml",
    "status": "modified",
    "additions": 7,
    "deletions": 0,
    "changes": 7,
    "blob_url": "https://github.com/KorEugene/NetworkChat/blob/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/.idea/compiler.xml",
    "raw_url": "https://github.com/KorEugene/NetworkChat/raw/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/.idea/compiler.xml",
    "contents_url": "https://api.github.com/repos/KorEugene/NetworkChat/contents/.idea/compiler.xml?ref=ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb",
    "patch": "@@ -13,5 +13,12 @@\n         <module name=\"ChatCommon\" />\n       </profile>\n     </annotationProcessing>\n+    <bytecodeTargetLevel>\n+      <module name=\"ChatClient\" target=\"15\" />\n+      <module name=\"ChatClientNetwork\" target=\"15\" />\n+      <module name=\"ChatCommon\" target=\"15\" />\n+      <module name=\"ChatServer\" target=\"15\" />\n+      <module name=\"NetworkChat\" target=\"15\" />\n+    </bytecodeTargetLevel>\n   </component>\n </project>\n\\ No newline at end of file"
  },
  {
    "sha": "767d81c3d9cf931d0dc391823c9a8a0dc1dce7e9",
    "filename": ".idea/misc.xml",
    "status": "modified",
    "additions": 2,
    "deletions": 8,
    "changes": 10,
    "blob_url": "https://github.com/KorEugene/NetworkChat/blob/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/.idea/misc.xml",
    "raw_url": "https://github.com/KorEugene/NetworkChat/raw/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/.idea/misc.xml",
    "contents_url": "https://api.github.com/repos/KorEugene/NetworkChat/contents/.idea/misc.xml?ref=ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb",
    "patch": "@@ -1,21 +1,15 @@\n <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n <project version=\"4\">\n-  <component name=\"ExternalStorageConfigurationManager\" enabled=\"true\" />\n   <component name=\"MavenProjectsManager\">\n     <option name=\"originalFiles\">\n       <list>\n         <option value=\"$PROJECT_DIR$/pom.xml\" />\n-        <option value=\"$PROJECT_DIR$/../ChatClient/pom.xml\" />\n-        <option value=\"$PROJECT_DIR$/../ChatCommon/pom.xml\" />\n-        <option value=\"$PROJECT_DIR$/../ChatServer/pom.xml\" />\n         <option value=\"$PROJECT_DIR$/ChatClient/pom.xml\" />\n+        <option value=\"$PROJECT_DIR$/ChatClientNetwork/pom.xml\" />\n         <option value=\"$PROJECT_DIR$/ChatCommon/pom.xml\" />\n         <option value=\"$PROJECT_DIR$/ChatServer/pom.xml\" />\n-        <option value=\"$PROJECT_DIR$/ChatClientNetwork/pom.xml\" />\n       </list>\n     </option>\n   </component>\n-  <component name=\"ProjectRootManager\" version=\"2\" languageLevel=\"JDK_15\" project-jdk-name=\"15\" project-jdk-type=\"JavaSDK\">\n-    <output url=\"file://$PROJECT_DIR$/out\" />\n-  </component>\n+  <component name=\"ProjectRootManager\" version=\"2\" languageLevel=\"JDK_15\" project-jdk-name=\"15\" project-jdk-type=\"JavaSDK\" />\n </project>\n\\ No newline at end of file"
  },
  {
    "sha": "d9fa2e235f7ccce04dbf20243b2242287b5ca338",
    "filename": ".idea/modules.xml",
    "status": "added",
    "additions": 12,
    "deletions": 0,
    "changes": 12,
    "blob_url": "https://github.com/KorEugene/NetworkChat/blob/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/.idea/modules.xml",
    "raw_url": "https://github.com/KorEugene/NetworkChat/raw/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/.idea/modules.xml",
    "contents_url": "https://api.github.com/repos/KorEugene/NetworkChat/contents/.idea/modules.xml?ref=ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb",
    "patch": "@@ -0,0 +1,12 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project version=\"4\">\n+  <component name=\"ProjectModuleManager\">\n+    <modules>\n+      <module fileurl=\"file://$PROJECT_DIR$/ChatClient/ChatClient.iml\" filepath=\"$PROJECT_DIR$/ChatClient/ChatClient.iml\" />\n+      <module fileurl=\"file://$PROJECT_DIR$/ChatClientNetwork/ChatClientNetwork.iml\" filepath=\"$PROJECT_DIR$/ChatClientNetwork/ChatClientNetwork.iml\" />\n+      <module fileurl=\"file://$PROJECT_DIR$/ChatCommon/ChatCommon.iml\" filepath=\"$PROJECT_DIR$/ChatCommon/ChatCommon.iml\" />\n+      <module fileurl=\"file://$PROJECT_DIR$/ChatServer/ChatServer.iml\" filepath=\"$PROJECT_DIR$/ChatServer/ChatServer.iml\" />\n+      <module fileurl=\"file://$PROJECT_DIR$/NetworkChat.iml\" filepath=\"$PROJECT_DIR$/NetworkChat.iml\" />\n+    </modules>\n+  </component>\n+</project>\n\\ No newline at end of file"
  },
  {
    "sha": "e96534fb27b68192f27f985d3879e173ec77adb8",
    "filename": ".idea/uiDesigner.xml",
    "status": "removed",
    "additions": 0,
    "deletions": 124,
    "changes": 124,
    "blob_url": "https://github.com/KorEugene/NetworkChat/blob/26f3406ae57610b467e26d801f35b1eb636b1608/.idea/uiDesigner.xml",
    "raw_url": "https://github.com/KorEugene/NetworkChat/raw/26f3406ae57610b467e26d801f35b1eb636b1608/.idea/uiDesigner.xml",
    "contents_url": "https://api.github.com/repos/KorEugene/NetworkChat/contents/.idea/uiDesigner.xml?ref=26f3406ae57610b467e26d801f35b1eb636b1608",
    "patch": "@@ -1,124 +0,0 @@\n-<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n-<project version=\"4\">\n-  <component name=\"Palette2\">\n-    <group name=\"Swing\">\n-      <item class=\"com.intellij.uiDesigner.HSpacer\" tooltip-text=\"Horizontal Spacer\" icon=\"/com/intellij/uiDesigner/icons/hspacer.png\" removable=\"false\" auto-create-binding=\"false\" can-attach-label=\"false\">\n-        <default-constraints vsize-policy=\"1\" hsize-policy=\"6\" anchor=\"0\" fill=\"1\" />\n-      </item>\n-      <item class=\"com.intellij.uiDesigner.VSpacer\" tooltip-text=\"Vertical Spacer\" icon=\"/com/intellij/uiDesigner/icons/vspacer.png\" removable=\"false\" auto-create-binding=\"false\" can-attach-label=\"false\">\n-        <default-constraints vsize-policy=\"6\" hsize-policy=\"1\" anchor=\"0\" fill=\"2\" />\n-      </item>\n-      <item class=\"javax.swing.JPanel\" icon=\"/com/intellij/uiDesigner/icons/panel.png\" removable=\"false\" auto-create-binding=\"false\" can-attach-label=\"false\">\n-        <default-constraints vsize-policy=\"3\" hsize-policy=\"3\" anchor=\"0\" fill=\"3\" />\n-      </item>\n-      <item class=\"javax.swing.JScrollPane\" icon=\"/com/intellij/uiDesigner/icons/scrollPane.png\" removable=\"false\" auto-create-binding=\"false\" can-attach-label=\"true\">\n-        <default-constraints vsize-policy=\"7\" hsize-policy=\"7\" anchor=\"0\" fill=\"3\" />\n-      </item>\n-      <item class=\"javax.swing.JButton\" icon=\"/com/intellij/uiDesigner/icons/button.png\" removable=\"false\" auto-create-binding=\"true\" can-attach-label=\"false\">\n-        <default-constraints vsize-policy=\"0\" hsize-policy=\"3\" anchor=\"0\" fill=\"1\" />\n-        <initial-values>\n-          <property name=\"text\" value=\"Button\" />\n-        </initial-values>\n-      </item>\n-      <item class=\"javax.swing.JRadioButton\" icon=\"/com/intellij/uiDesigner/icons/radioButton.png\" removable=\"false\" auto-create-binding=\"true\" can-attach-label=\"false\">\n-        <default-constraints vsize-policy=\"0\" hsize-policy=\"3\" anchor=\"8\" fill=\"0\" />\n-        <initial-values>\n-          <property name=\"text\" value=\"RadioButton\" />\n-        </initial-values>\n-      </item>\n-      <item class=\"javax.swing.JCheckBox\" icon=\"/com/intellij/uiDesigner/icons/checkBox.png\" removable=\"false\" auto-create-binding=\"true\" can-attach-label=\"false\">\n-        <default-constraints vsize-policy=\"0\" hsize-policy=\"3\" anchor=\"8\" fill=\"0\" />\n-        <initial-values>\n-          <property name=\"text\" value=\"CheckBox\" />\n-        </initial-values>\n-      </item>\n-      <item class=\"javax.swing.JLabel\" icon=\"/com/intellij/uiDesigner/icons/label.png\" removable=\"false\" auto-create-binding=\"false\" can-attach-label=\"false\">\n-        <default-constraints vsize-policy=\"0\" hsize-policy=\"0\" anchor=\"8\" fill=\"0\" />\n-        <initial-values>\n-          <property name=\"text\" value=\"Label\" />\n-        </initial-values>\n-      </item>\n-      <item class=\"javax.swing.JTextField\" icon=\"/com/intellij/uiDesigner/icons/textField.png\" removable=\"false\" auto-create-binding=\"true\" can-attach-label=\"true\">\n-        <default-constraints vsize-policy=\"0\" hsize-policy=\"6\" anchor=\"8\" fill=\"1\">\n-          <preferred-size width=\"150\" height=\"-1\" />\n-        </default-constraints>\n-      </item>\n-      <item class=\"javax.swing.JPasswordField\" icon=\"/com/intellij/uiDesigner/icons/passwordField.png\" removable=\"false\" auto-create-binding=\"true\" can-attach-label=\"true\">\n-        <default-constraints vsize-policy=\"0\" hsize-policy=\"6\" anchor=\"8\" fill=\"1\">\n-          <preferred-size width=\"150\" height=\"-1\" />\n-        </default-constraints>\n-      </item>\n-      <item class=\"javax.swing.JFormattedTextField\" icon=\"/com/intellij/uiDesigner/icons/formattedTextField.png\" removable=\"false\" auto-create-binding=\"true\" can-attach-label=\"true\">\n-        <default-constraints vsize-policy=\"0\" hsize-policy=\"6\" anchor=\"8\" fill=\"1\">\n-          <preferred-size width=\"150\" height=\"-1\" />\n-        </default-constraints>\n-      </item>\n-      <item class=\"javax.swing.JTextArea\" icon=\"/com/intellij/uiDesigner/icons/textArea.png\" removable=\"false\" auto-create-binding=\"true\" can-attach-label=\"true\">\n-        <default-constraints vsize-policy=\"6\" hsize-policy=\"6\" anchor=\"0\" fill=\"3\">\n-          <preferred-size width=\"150\" height=\"50\" />\n-        </default-constraints>\n-      </item>\n-      <item class=\"javax.swing.JTextPane\" icon=\"/com/intellij/uiDesigner/icons/textPane.png\" removable=\"false\" auto-create-binding=\"true\" can-attach-label=\"true\">\n-        <default-constraints vsize-policy=\"6\" hsize-policy=\"6\" anchor=\"0\" fill=\"3\">\n-          <preferred-size width=\"150\" height=\"50\" />\n-        </default-constraints>\n-      </item>\n-      <item class=\"javax.swing.JEditorPane\" icon=\"/com/intellij/uiDesigner/icons/editorPane.png\" removable=\"false\" auto-create-binding=\"true\" can-attach-label=\"true\">\n-        <default-constraints vsize-policy=\"6\" hsize-policy=\"6\" anchor=\"0\" fill=\"3\">\n-          <preferred-size width=\"150\" height=\"50\" />\n-        </default-constraints>\n-      </item>\n-      <item class=\"javax.swing.JComboBox\" icon=\"/com/intellij/uiDesigner/icons/comboBox.png\" removable=\"false\" auto-create-binding=\"true\" can-attach-label=\"true\">\n-        <default-constraints vsize-policy=\"0\" hsize-policy=\"2\" anchor=\"8\" fill=\"1\" />\n-      </item>\n-      <item class=\"javax.swing.JTable\" icon=\"/com/intellij/uiDesigner/icons/table.png\" removable=\"false\" auto-create-binding=\"true\" can-attach-label=\"false\">\n-        <default-constraints vsize-policy=\"6\" hsize-policy=\"6\" anchor=\"0\" fill=\"3\">\n-          <preferred-size width=\"150\" height=\"50\" />\n-        </default-constraints>\n-      </item>\n-      <item class=\"javax.swing.JList\" icon=\"/com/intellij/uiDesigner/icons/list.png\" removable=\"false\" auto-create-binding=\"true\" can-attach-label=\"false\">\n-        <default-constraints vsize-policy=\"6\" hsize-policy=\"2\" anchor=\"0\" fill=\"3\">\n-          <preferred-size width=\"150\" height=\"50\" />\n-        </default-constraints>\n-      </item>\n-      <item class=\"javax.swing.JTree\" icon=\"/com/intellij/uiDesigner/icons/tree.png\" removable=\"false\" auto-create-binding=\"true\" can-attach-label=\"false\">\n-        <default-constraints vsize-policy=\"6\" hsize-policy=\"6\" anchor=\"0\" fill=\"3\">\n-          <preferred-size width=\"150\" height=\"50\" />\n-        </default-constraints>\n-      </item>\n-      <item class=\"javax.swing.JTabbedPane\" icon=\"/com/intellij/uiDesigner/icons/tabbedPane.png\" removable=\"false\" auto-create-binding=\"true\" can-attach-label=\"false\">\n-        <default-constraints vsize-policy=\"3\" hsize-policy=\"3\" anchor=\"0\" fill=\"3\">\n-          <preferred-size width=\"200\" height=\"200\" />\n-        </default-constraints>\n-      </item>\n-      <item class=\"javax.swing.JSplitPane\" icon=\"/com/intellij/uiDesigner/icons/splitPane.png\" removable=\"false\" auto-create-binding=\"false\" can-attach-label=\"false\">\n-        <default-constraints vsize-policy=\"3\" hsize-policy=\"3\" anchor=\"0\" fill=\"3\">\n-          <preferred-size width=\"200\" height=\"200\" />\n-        </default-constraints>\n-      </item>\n-      <item class=\"javax.swing.JSpinner\" icon=\"/com/intellij/uiDesigner/icons/spinner.png\" removable=\"false\" auto-create-binding=\"true\" can-attach-label=\"true\">\n-        <default-constraints vsize-policy=\"0\" hsize-policy=\"6\" anchor=\"8\" fill=\"1\" />\n-      </item>\n-      <item class=\"javax.swing.JSlider\" icon=\"/com/intellij/uiDesigner/icons/slider.png\" removable=\"false\" auto-create-binding=\"true\" can-attach-label=\"false\">\n-        <default-constraints vsize-policy=\"0\" hsize-policy=\"6\" anchor=\"8\" fill=\"1\" />\n-      </item>\n-      <item class=\"javax.swing.JSeparator\" icon=\"/com/intellij/uiDesigner/icons/separator.png\" removable=\"false\" auto-create-binding=\"false\" can-attach-label=\"false\">\n-        <default-constraints vsize-policy=\"6\" hsize-policy=\"6\" anchor=\"0\" fill=\"3\" />\n-      </item>\n-      <item class=\"javax.swing.JProgressBar\" icon=\"/com/intellij/uiDesigner/icons/progressbar.png\" removable=\"false\" auto-create-binding=\"true\" can-attach-label=\"false\">\n-        <default-constraints vsize-policy=\"0\" hsize-policy=\"6\" anchor=\"0\" fill=\"1\" />\n-      </item>\n-      <item class=\"javax.swing.JToolBar\" icon=\"/com/intellij/uiDesigner/icons/toolbar.png\" removable=\"false\" auto-create-binding=\"false\" can-attach-label=\"false\">\n-        <default-constraints vsize-policy=\"0\" hsize-policy=\"6\" anchor=\"0\" fill=\"1\">\n-          <preferred-size width=\"-1\" height=\"20\" />\n-        </default-constraints>\n-      </item>\n-      <item class=\"javax.swing.JToolBar$Separator\" icon=\"/com/intellij/uiDesigner/icons/toolbarSeparator.png\" removable=\"false\" auto-create-binding=\"false\" can-attach-label=\"false\">\n-        <default-constraints vsize-policy=\"0\" hsize-policy=\"0\" anchor=\"0\" fill=\"1\" />\n-      </item>\n-      <item class=\"javax.swing.JScrollBar\" icon=\"/com/intellij/uiDesigner/icons/scrollbar.png\" removable=\"false\" auto-create-binding=\"true\" can-attach-label=\"false\">\n-        <default-constraints vsize-policy=\"6\" hsize-policy=\"0\" anchor=\"0\" fill=\"2\" />\n-      </item>\n-    </group>\n-  </component>\n-</project>\n\\ No newline at end of file"
  },
  {
    "sha": "35eb1ddfbbc029bcab630581847471d7f238ec53",
    "filename": ".idea/vcs.xml",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/KorEugene/NetworkChat/blob/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/.idea/vcs.xml",
    "raw_url": "https://github.com/KorEugene/NetworkChat/raw/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/.idea/vcs.xml",
    "contents_url": "https://api.github.com/repos/KorEugene/NetworkChat/contents/.idea/vcs.xml?ref=ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb",
    "patch": "@@ -1,6 +1,6 @@\n <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n <project version=\"4\">\n   <component name=\"VcsDirectoryMappings\">\n-    <mapping directory=\"$PROJECT_DIR$\" vcs=\"Git\" />\n+    <mapping directory=\"\" vcs=\"Git\" />\n   </component>\n </project>\n\\ No newline at end of file"
  },
  {
    "sha": "f33535298c57b96e6a9d91ee56be814f6ed1be9e",
    "filename": "ChatClient/ChatClient.iml",
    "status": "added",
    "additions": 26,
    "deletions": 0,
    "changes": 26,
    "blob_url": "https://github.com/KorEugene/NetworkChat/blob/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/ChatClient/ChatClient.iml",
    "raw_url": "https://github.com/KorEugene/NetworkChat/raw/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/ChatClient/ChatClient.iml",
    "contents_url": "https://api.github.com/repos/KorEugene/NetworkChat/contents/ChatClient/ChatClient.iml?ref=ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb",
    "patch": "@@ -0,0 +1,26 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<module org.jetbrains.idea.maven.project.MavenProjectsManager.isMavenModule=\"true\" type=\"JAVA_MODULE\" version=\"4\">\n+  <component name=\"NewModuleRootManager\" LANGUAGE_LEVEL=\"JDK_15\">\n+    <output url=\"file://$MODULE_DIR$/target/classes\" />\n+    <output-test url=\"file://$MODULE_DIR$/target/test-classes\" />\n+    <content url=\"file://$MODULE_DIR$\">\n+      <sourceFolder url=\"file://$MODULE_DIR$/src/main/java\" isTestSource=\"false\" />\n+      <sourceFolder url=\"file://$MODULE_DIR$/src/main/resources\" type=\"java-resource\" />\n+      <sourceFolder url=\"file://$MODULE_DIR$/src/test/java\" isTestSource=\"true\" />\n+      <excludeFolder url=\"file://$MODULE_DIR$/target\" />\n+    </content>\n+    <orderEntry type=\"inheritedJdk\" />\n+    <orderEntry type=\"sourceFolder\" forTests=\"false\" />\n+    <orderEntry type=\"library\" name=\"Maven: org.openjfx:javafx-controls:16\" level=\"project\" />\n+    <orderEntry type=\"library\" name=\"Maven: org.openjfx:javafx-controls:win:16\" level=\"project\" />\n+    <orderEntry type=\"library\" name=\"Maven: org.openjfx:javafx-graphics:16\" level=\"project\" />\n+    <orderEntry type=\"library\" name=\"Maven: org.openjfx:javafx-graphics:win:16\" level=\"project\" />\n+    <orderEntry type=\"library\" name=\"Maven: org.openjfx:javafx-base:16\" level=\"project\" />\n+    <orderEntry type=\"library\" name=\"Maven: org.openjfx:javafx-base:win:16\" level=\"project\" />\n+    <orderEntry type=\"library\" name=\"Maven: org.openjfx:javafx-fxml:16\" level=\"project\" />\n+    <orderEntry type=\"library\" name=\"Maven: org.openjfx:javafx-fxml:win:16\" level=\"project\" />\n+    <orderEntry type=\"module\" module-name=\"ChatClientNetwork\" />\n+    <orderEntry type=\"module\" module-name=\"ChatCommon\" />\n+    <orderEntry type=\"library\" name=\"Maven: com.google.code.gson:gson:2.8.6\" level=\"project\" />\n+  </component>\n+</module>\n\\ No newline at end of file"
  },
  {
    "sha": "1b1b9ec515c646bfb0657759736ef627ca093dbd",
    "filename": "ChatClient/pom.xml",
    "status": "modified",
    "additions": 21,
    "deletions": 14,
    "changes": 35,
    "blob_url": "https://github.com/KorEugene/NetworkChat/blob/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/ChatClient/pom.xml",
    "raw_url": "https://github.com/KorEugene/NetworkChat/raw/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/ChatClient/pom.xml",
    "contents_url": "https://api.github.com/repos/KorEugene/NetworkChat/contents/ChatClient/pom.xml?ref=ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb",
    "patch": "@@ -8,6 +8,27 @@\n     <artifactId>ChatClient</artifactId>\n     <version>1.0-SNAPSHOT</version>\n \n+    <build>\n+        <plugins>\n+            <plugin>\n+                <groupId>org.openjfx</groupId>\n+                <artifactId>javafx-maven-plugin</artifactId>\n+                <version>0.0.5</version>\n+                <configuration>\n+                    <mainClass>ClientApp</mainClass>\n+                </configuration>\n+            </plugin>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-compiler-plugin</artifactId>\n+                <configuration>\n+                    <source>15</source>\n+                    <target>15</target>\n+                </configuration>\n+            </plugin>\n+        </plugins>\n+    </build>\n+\n     <properties>\n         <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n         <maven.compiler.source>15</maven.compiler.source>\n@@ -45,18 +66,4 @@\n         </dependency>\n     </dependencies>\n \n-    <build>\n-        <plugins>\n-            <plugin>\n-                <groupId>org.openjfx</groupId>\n-                <artifactId>javafx-maven-plugin</artifactId>\n-                <version>0.0.5</version>\n-                <configuration>\n-                    <mainClass>ClientApp</mainClass>\n-                </configuration>\n-            </plugin>\n-        </plugins>\n-    </build>\n-\n-\n </project>\n\\ No newline at end of file"
  },
  {
    "sha": "975e473d6ac633735c70aa174d0b024279d80b2b",
    "filename": "ChatClient/src/main/java/ru/online/controllers/MainSceneController.java",
    "status": "modified",
    "additions": 28,
    "deletions": 33,
    "changes": 61,
    "blob_url": "https://github.com/KorEugene/NetworkChat/blob/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/ChatClient/src/main/java/ru/online/controllers/MainSceneController.java",
    "raw_url": "https://github.com/KorEugene/NetworkChat/raw/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/ChatClient/src/main/java/ru/online/controllers/MainSceneController.java",
    "contents_url": "https://api.github.com/repos/KorEugene/NetworkChat/contents/ChatClient/src/main/java/ru/online/controllers/MainSceneController.java?ref=ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb",
    "patch": "@@ -8,7 +8,6 @@\n import javafx.scene.control.Button;\n import javafx.scene.control.Label;\n import javafx.scene.control.TextArea;\n-import javafx.scene.control.TextField;\n import javafx.scene.control.*;\n import javafx.scene.input.KeyCode;\n import javafx.scene.input.KeyEvent;\n@@ -34,6 +33,8 @@\n \n     private static final String URI_JAVAFX = \"https://openjfx.io/\";\n \n+    private final String ALL = \"SEND TO ALL\";\n+\n     @FXML\n     private TextArea chatArea;\n     @FXML\n@@ -48,12 +49,11 @@\n     @Override\n     public void initialize(URL location, ResourceBundle resources) {\n         messageService = new ChatMessageService(\"localhost\", 65500, this);\n-        onlineUsers.setItems(FXCollections.observableArrayList(\"Vasya\", \"Petya\", \"Kolya\"));\n     }\n \n     @FXML\n     private void logout(ActionEvent actionEvent) throws IOException {\n-        messageService.sendMessage(\"/exit\");\n+//        messageService.sendMessage(\"/exit\");\n         MainWindow.getMainWindow().close();\n         MainWindow.getMainWindow().close();\n         LoginWindow.displayLoginWindow(ClientApp.getMainStage());\n@@ -75,6 +75,12 @@ private void getSettings(ActionEvent actionEvent) throws IOException {\n         SettingsWindow.display();\n     }\n \n+    private void refreshUserList(MessageDTO dto) {\n+        dto.getUsersOnline().add(0, ALL);\n+        onlineUsers.setItems(FXCollections.observableArrayList(dto.getUsersOnline()));\n+        onlineUsers.getSelectionModel().selectFirst();\n+    }\n+\n     @FXML\n     private void pressEnter(KeyEvent keyEvent) {\n         if (keyEvent.getCode() == KeyCode.ENTER && keyEvent.isShiftDown()) {\n@@ -91,47 +97,36 @@ private void btnSend(ActionEvent actionEvent) {\n     }\n \n     private void sendMessage() {\n-        String message = input.getText().trim();\n-        if (message.length() > 0) {\n-            MessageDTO dto = new MessageDTO();\n-            dto.setMessageType(checkMessageType(message));\n-            if (dto.getMessageType().equals(MessageType.PRIVATE_MESSAGE)) {\n-                dto.setTo((message.split(\" \", 3))[1]);\n-                dto.setBody((message.split(\" \", 3))[2]);\n-            } else {\n-                dto.setBody(message);\n-            }\n-            System.out.println(dto.toString());\n-            messageService.sendMessage(dto.convertToJson());\n-            input.clear();\n+        String msg = input.getText().trim();\n+        if (msg.length() == 0) return;\n+\n+        MessageDTO dto = new MessageDTO();\n+        String selected = (String) onlineUsers.getSelectionModel().getSelectedItem();\n+        if (selected.equals(ALL)) dto.setMessageType(MessageType.PUBLIC_MESSAGE);\n+        else {\n+            dto.setMessageType(MessageType.PRIVATE_MESSAGE);\n+            dto.setTo(selected);\n         }\n-    }\n \n-    private MessageType checkMessageType(String message) {\n-        if (message.startsWith(\"/w\")) {\n-            return MessageType.PRIVATE_MESSAGE;\n-        }\n-        return MessageType.PUBLIC_MESSAGE;\n+        dto.setBody(msg);\n+        messageService.sendMessage(dto.convertToJson());\n+        input.clear();\n+\n     }\n \n-    private void showMessage(String message) {\n-        chatArea.appendText(message + System.lineSeparator());\n+    private void showMessage(MessageDTO message) {\n+        String msg = String.format(\"[%s] [%s] -> %s\\n\", message.getMessageType(), message.getFrom(), message.getBody());\n+        chatArea.appendText(msg);\n     }\n \n     @Override\n     public void processMessage(String msg) {\n         Platform.runLater(() -> {\n             MessageDTO dto = MessageDTO.convertFromJson(msg);\n-            System.out.println(\"Received message: \" + dto.toString());\n+            System.out.println(\"Received message: \");\n             switch (dto.getMessageType()) {\n-                case PUBLIC_MESSAGE -> showMessage(dto.getFrom() + \": \" + dto.getBody());\n-                case PRIVATE_MESSAGE -> {\n-                    if (dto.getFrom().equals(MainWindow.getUserLogin())) {\n-                        showMessage(String.format(\"[private to: %s] \", dto.getTo()) + dto.getBody());\n-                    } else {\n-                        showMessage(String.format(\"[private from: %s] \", dto.getFrom()) + dto.getBody());\n-                    }\n-                }\n+                case PUBLIC_MESSAGE, PRIVATE_MESSAGE -> showMessage(dto);\n+                case CLIENTS_LIST_MESSAGE -> refreshUserList(dto);\n                 case AUTH_CONFIRM -> {\n                     try {\n                         MainWindow.displayMainWindow(dto.getBody());"
  },
  {
    "sha": "14e6fb23862c71ffb3c11adc954dbaf8b2f4bcbc",
    "filename": "ChatClientNetwork/ChatClientNetwork.iml",
    "status": "added",
    "additions": 19,
    "deletions": 0,
    "changes": 19,
    "blob_url": "https://github.com/KorEugene/NetworkChat/blob/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/ChatClientNetwork/ChatClientNetwork.iml",
    "raw_url": "https://github.com/KorEugene/NetworkChat/raw/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/ChatClientNetwork/ChatClientNetwork.iml",
    "contents_url": "https://api.github.com/repos/KorEugene/NetworkChat/contents/ChatClientNetwork/ChatClientNetwork.iml?ref=ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb",
    "patch": "@@ -0,0 +1,19 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<module org.jetbrains.idea.maven.project.MavenProjectsManager.isMavenModule=\"true\" type=\"JAVA_MODULE\" version=\"4\">\n+  <component name=\"NewModuleRootManager\" LANGUAGE_LEVEL=\"JDK_15\">\n+    <output url=\"file://$MODULE_DIR$/target/classes\" />\n+    <output-test url=\"file://$MODULE_DIR$/target/test-classes\" />\n+    <content url=\"file://$MODULE_DIR$\">\n+      <sourceFolder url=\"file://$MODULE_DIR$/src/main/java\" isTestSource=\"false\" />\n+      <sourceFolder url=\"file://$MODULE_DIR$/src/main/resources\" type=\"java-resource\" />\n+      <sourceFolder url=\"file://$MODULE_DIR$/src/test/java\" isTestSource=\"true\" />\n+      <excludeFolder url=\"file://$MODULE_DIR$/target\" />\n+    </content>\n+    <orderEntry type=\"inheritedJdk\" />\n+    <orderEntry type=\"sourceFolder\" forTests=\"false\" />\n+    <orderEntry type=\"library\" name=\"Maven: org.openjfx:javafx-graphics:16\" level=\"project\" />\n+    <orderEntry type=\"library\" name=\"Maven: org.openjfx:javafx-graphics:win:16\" level=\"project\" />\n+    <orderEntry type=\"library\" name=\"Maven: org.openjfx:javafx-base:16\" level=\"project\" />\n+    <orderEntry type=\"library\" name=\"Maven: org.openjfx:javafx-base:win:16\" level=\"project\" />\n+  </component>\n+</module>\n\\ No newline at end of file"
  },
  {
    "sha": "330d08a6db0c5c33e437c723e83f618dc0b12918",
    "filename": "ChatClientNetwork/pom.xml",
    "status": "modified",
    "additions": 13,
    "deletions": 0,
    "changes": 13,
    "blob_url": "https://github.com/KorEugene/NetworkChat/blob/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/ChatClientNetwork/pom.xml",
    "raw_url": "https://github.com/KorEugene/NetworkChat/raw/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/ChatClientNetwork/pom.xml",
    "contents_url": "https://api.github.com/repos/KorEugene/NetworkChat/contents/ChatClientNetwork/pom.xml?ref=ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb",
    "patch": "@@ -8,6 +8,19 @@\n     <artifactId>ChatClientNetwork</artifactId>\n     <version>1.0-SNAPSHOT</version>\n \n+    <build>\n+        <plugins>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-compiler-plugin</artifactId>\n+                <configuration>\n+                    <source>15</source>\n+                    <target>15</target>\n+                </configuration>\n+            </plugin>\n+        </plugins>\n+    </build>\n+\n     <dependencies>\n         <dependency>\n             <groupId>org.openjfx</groupId>"
  },
  {
    "sha": "1b74a92f663b4b22ad12acf04d55ccfd249d4149",
    "filename": "ChatClientNetwork/src/main/java/ru/online/network/NetworkService.java",
    "status": "modified",
    "additions": 7,
    "deletions": 3,
    "changes": 10,
    "blob_url": "https://github.com/KorEugene/NetworkChat/blob/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/ChatClientNetwork/src/main/java/ru/online/network/NetworkService.java",
    "raw_url": "https://github.com/KorEugene/NetworkChat/raw/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/ChatClientNetwork/src/main/java/ru/online/network/NetworkService.java",
    "contents_url": "https://api.github.com/repos/KorEugene/NetworkChat/contents/ChatClientNetwork/src/main/java/ru/online/network/NetworkService.java?ref=ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb",
    "patch": "@@ -16,16 +16,20 @@ public NetworkService(String address, int port, MessageService messageService) t\n         this.inputStream = new DataInputStream(socket.getInputStream());\n         this.outputStream = new DataOutputStream(socket.getOutputStream());\n \n-        new Thread(() -> {\n+        Thread t = new Thread(() -> {\n             while (true) {\n                 try {\n                     String msg = inputStream.readUTF();\n                     messageService.receiveMessage(msg);\n                 } catch (IOException e) {\n-                    e.printStackTrace();\n+//                    e.printStackTrace();\n+                    System.out.println(\"Socket closed by time out!\");\n+                    break;\n                 }\n             }\n-        }).start();\n+        });\n+        t.setDaemon(true);\n+        t.start();\n     }\n \n     public void writeMessage(String msg) {"
  },
  {
    "sha": "65098983a0e223a48832eca0002c49095dfe3f90",
    "filename": "ChatCommon/ChatCommon.iml",
    "status": "added",
    "additions": 16,
    "deletions": 0,
    "changes": 16,
    "blob_url": "https://github.com/KorEugene/NetworkChat/blob/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/ChatCommon/ChatCommon.iml",
    "raw_url": "https://github.com/KorEugene/NetworkChat/raw/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/ChatCommon/ChatCommon.iml",
    "contents_url": "https://api.github.com/repos/KorEugene/NetworkChat/contents/ChatCommon/ChatCommon.iml?ref=ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb",
    "patch": "@@ -0,0 +1,16 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<module org.jetbrains.idea.maven.project.MavenProjectsManager.isMavenModule=\"true\" type=\"JAVA_MODULE\" version=\"4\">\n+  <component name=\"NewModuleRootManager\" LANGUAGE_LEVEL=\"JDK_15\">\n+    <output url=\"file://$MODULE_DIR$/target/classes\" />\n+    <output-test url=\"file://$MODULE_DIR$/target/test-classes\" />\n+    <content url=\"file://$MODULE_DIR$\">\n+      <sourceFolder url=\"file://$MODULE_DIR$/src/main/java\" isTestSource=\"false\" />\n+      <sourceFolder url=\"file://$MODULE_DIR$/src/main/resources\" type=\"java-resource\" />\n+      <sourceFolder url=\"file://$MODULE_DIR$/src/test/java\" isTestSource=\"true\" />\n+      <excludeFolder url=\"file://$MODULE_DIR$/target\" />\n+    </content>\n+    <orderEntry type=\"inheritedJdk\" />\n+    <orderEntry type=\"sourceFolder\" forTests=\"false\" />\n+    <orderEntry type=\"library\" name=\"Maven: com.google.code.gson:gson:2.8.6\" level=\"project\" />\n+  </component>\n+</module>\n\\ No newline at end of file"
  },
  {
    "sha": "4593ddcc2aa78ac6d11f2a07e65d0ab5dcc34a1b",
    "filename": "ChatCommon/pom.xml",
    "status": "modified",
    "additions": 14,
    "deletions": 1,
    "changes": 15,
    "blob_url": "https://github.com/KorEugene/NetworkChat/blob/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/ChatCommon/pom.xml",
    "raw_url": "https://github.com/KorEugene/NetworkChat/raw/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/ChatCommon/pom.xml",
    "contents_url": "https://api.github.com/repos/KorEugene/NetworkChat/contents/ChatCommon/pom.xml?ref=ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb",
    "patch": "@@ -8,6 +8,19 @@\n     <artifactId>ChatCommon</artifactId>\n     <version>1.0-SNAPSHOT</version>\n \n+    <build>\n+        <plugins>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-compiler-plugin</artifactId>\n+                <configuration>\n+                    <source>15</source>\n+                    <target>15</target>\n+                </configuration>\n+            </plugin>\n+        </plugins>\n+    </build>\n+\n     <properties>\n         <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n         <maven.compiler.source>15</maven.compiler.source>\n@@ -18,7 +31,7 @@\n         <dependency>\n             <groupId>com.google.code.gson</groupId>\n             <artifactId>gson</artifactId>\n-            <version>2.8.5</version>\n+            <version>2.8.6</version>\n         </dependency>\n \n     </dependencies>"
  },
  {
    "sha": "a5ed2aac8015fce1837ec19b9002784fb38aa736",
    "filename": "ChatCommon/src/main/java/ru/online/messages/MessageDTO.java",
    "status": "modified",
    "additions": 11,
    "deletions": 0,
    "changes": 11,
    "blob_url": "https://github.com/KorEugene/NetworkChat/blob/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/ChatCommon/src/main/java/ru/online/messages/MessageDTO.java",
    "raw_url": "https://github.com/KorEugene/NetworkChat/raw/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/ChatCommon/src/main/java/ru/online/messages/MessageDTO.java",
    "contents_url": "https://api.github.com/repos/KorEugene/NetworkChat/contents/ChatCommon/src/main/java/ru/online/messages/MessageDTO.java?ref=ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb",
    "patch": "@@ -2,6 +2,8 @@\n \n import com.google.gson.Gson;\n \n+import java.util.List;\n+\n public class MessageDTO {\n \n     private MessageType messageType;\n@@ -10,6 +12,7 @@\n     private String password;\n     private String to;\n     private String from;\n+    private List<String> usersOnline;\n \n     public static MessageDTO convertFromJson(String json) {\n         return new Gson().fromJson(json, MessageDTO.class);\n@@ -67,6 +70,14 @@ public void setFrom(String from) {\n         this.from = from;\n     }\n \n+    public List<String> getUsersOnline() {\n+        return usersOnline;\n+    }\n+\n+    public void setUsersOnline(List<String> usersOnline) {\n+        this.usersOnline = usersOnline;\n+    }\n+\n     @Override\n     public String toString() {\n         return \"MessageDTO{\" +"
  },
  {
    "sha": "68a9a3373be544a2bd7c3a35c5b460058b27b324",
    "filename": "ChatCommon/src/main/java/ru/online/messages/MessageType.java",
    "status": "modified",
    "additions": 1,
    "deletions": 0,
    "changes": 1,
    "blob_url": "https://github.com/KorEugene/NetworkChat/blob/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/ChatCommon/src/main/java/ru/online/messages/MessageType.java",
    "raw_url": "https://github.com/KorEugene/NetworkChat/raw/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/ChatCommon/src/main/java/ru/online/messages/MessageType.java",
    "contents_url": "https://api.github.com/repos/KorEugene/NetworkChat/contents/ChatCommon/src/main/java/ru/online/messages/MessageType.java?ref=ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb",
    "patch": "@@ -4,6 +4,7 @@\n \n     PUBLIC_MESSAGE,\n     PRIVATE_MESSAGE,\n+    CLIENTS_LIST_MESSAGE,\n     SEND_AUTH_MESSAGE,\n     AUTH_CONFIRM,\n     ERROR_MESSAGE"
  },
  {
    "sha": "5f8036b250981108fb8aff3012745f56dfb482be",
    "filename": "ChatServer/ChatServer.iml",
    "status": "added",
    "additions": 17,
    "deletions": 0,
    "changes": 17,
    "blob_url": "https://github.com/KorEugene/NetworkChat/blob/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/ChatServer/ChatServer.iml",
    "raw_url": "https://github.com/KorEugene/NetworkChat/raw/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/ChatServer/ChatServer.iml",
    "contents_url": "https://api.github.com/repos/KorEugene/NetworkChat/contents/ChatServer/ChatServer.iml?ref=ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb",
    "patch": "@@ -0,0 +1,17 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<module org.jetbrains.idea.maven.project.MavenProjectsManager.isMavenModule=\"true\" type=\"JAVA_MODULE\" version=\"4\">\n+  <component name=\"NewModuleRootManager\" LANGUAGE_LEVEL=\"JDK_15\">\n+    <output url=\"file://$MODULE_DIR$/target/classes\" />\n+    <output-test url=\"file://$MODULE_DIR$/target/test-classes\" />\n+    <content url=\"file://$MODULE_DIR$\">\n+      <sourceFolder url=\"file://$MODULE_DIR$/src/main/java\" isTestSource=\"false\" />\n+      <sourceFolder url=\"file://$MODULE_DIR$/src/main/resources\" type=\"java-resource\" />\n+      <sourceFolder url=\"file://$MODULE_DIR$/src/test/java\" isTestSource=\"true\" />\n+      <excludeFolder url=\"file://$MODULE_DIR$/target\" />\n+    </content>\n+    <orderEntry type=\"inheritedJdk\" />\n+    <orderEntry type=\"sourceFolder\" forTests=\"false\" />\n+    <orderEntry type=\"module\" module-name=\"ChatCommon\" />\n+    <orderEntry type=\"library\" name=\"Maven: com.google.code.gson:gson:2.8.6\" level=\"project\" />\n+  </component>\n+</module>\n\\ No newline at end of file"
  },
  {
    "sha": "382716bbb40947a5b37127f8b661f680bc2be264",
    "filename": "ChatServer/pom.xml",
    "status": "modified",
    "additions": 13,
    "deletions": 0,
    "changes": 13,
    "blob_url": "https://github.com/KorEugene/NetworkChat/blob/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/ChatServer/pom.xml",
    "raw_url": "https://github.com/KorEugene/NetworkChat/raw/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/ChatServer/pom.xml",
    "contents_url": "https://api.github.com/repos/KorEugene/NetworkChat/contents/ChatServer/pom.xml?ref=ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb",
    "patch": "@@ -8,6 +8,19 @@\n     <artifactId>ChatServer</artifactId>\n     <version>1.0-SNAPSHOT</version>\n \n+    <build>\n+        <plugins>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-compiler-plugin</artifactId>\n+                <configuration>\n+                    <source>15</source>\n+                    <target>15</target>\n+                </configuration>\n+            </plugin>\n+        </plugins>\n+    </build>\n+\n     <properties>\n         <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n         <maven.compiler.source>15</maven.compiler.source>"
  },
  {
    "sha": "567b8a75cd5b144d0ce6b9829bf0986261950a4d",
    "filename": "ChatServer/src/main/java/ru/online/ChatServer.java",
    "status": "modified",
    "additions": 32,
    "deletions": 13,
    "changes": 45,
    "blob_url": "https://github.com/KorEugene/NetworkChat/blob/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/ChatServer/src/main/java/ru/online/ChatServer.java",
    "raw_url": "https://github.com/KorEugene/NetworkChat/raw/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/ChatServer/src/main/java/ru/online/ChatServer.java",
    "contents_url": "https://api.github.com/repos/KorEugene/NetworkChat/contents/ChatServer/src/main/java/ru/online/ChatServer.java?ref=ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb",
    "patch": "@@ -3,6 +3,7 @@\n import ru.online.auth.AuthService;\n import ru.online.auth.PrimitiveAuthService;\n import ru.online.messages.MessageDTO;\n+import ru.online.messages.MessageType;\n \n import java.io.IOException;\n import java.net.ServerSocket;\n@@ -14,15 +15,15 @@\n \n     private static final int PORT_NUMBER = 65500;\n \n-    private List<ClientHandler> clientHandlers;\n+    private List<ClientHandler> onlineClientsList;\n     private AuthService authService;\n \n     public ChatServer() {\n         try (ServerSocket serverSocket = new ServerSocket(PORT_NUMBER)) {\n             System.out.println(\"Server started\");\n             authService = new PrimitiveAuthService();\n             authService.start();\n-            clientHandlers = new LinkedList<>();\n+            onlineClientsList = new LinkedList<>();\n             while (true) {\n                 System.out.println(\"Waiting for connection...\");\n                 Socket socket = serverSocket.accept();\n@@ -34,29 +35,47 @@ public ChatServer() {\n         }\n     }\n \n-    public synchronized void broadcastMessage(MessageDTO dto) {\n-        for (ClientHandler clientHandler : clientHandlers) {\n-            clientHandler.sendMessage(dto);\n+    public synchronized void sendPrivateMessage(MessageDTO dto) {\n+        for (ClientHandler clientHandler : onlineClientsList) {\n+            if (clientHandler.getCurrentUserName().equals(dto.getTo())) {\n+                clientHandler.sendMessage(dto);\n+                break;\n+            }\n         }\n     }\n \n-    public synchronized ClientHandler isSubscribed(String username) {\n-        for (ClientHandler clientHandler : clientHandlers) {\n-            if (clientHandler.getUser().equals(username)) return clientHandler;\n+    public synchronized void broadcastOnlineClients() {\n+        MessageDTO dto = new MessageDTO();\n+        dto.setMessageType(MessageType.CLIENTS_LIST_MESSAGE);\n+        List<String> onlines = new LinkedList<>();\n+        for (ClientHandler clientHandler : onlineClientsList) {\n+            onlines.add(clientHandler.getCurrentUserName());\n         }\n-        return null;\n+        dto.setUsersOnline(onlines);\n+        broadcastMessage(dto);\n     }\n \n-    public void sendPrivateMessage(ClientHandler addressee, MessageDTO dto) {\n-        addressee.sendMessage(dto);\n+    public synchronized boolean isUserBusy(String username) {\n+        for (ClientHandler clientHandler : onlineClientsList) {\n+            if (clientHandler.getCurrentUserName().equals(username)) return true;\n+        }\n+        return false;\n+    }\n+\n+    public synchronized void broadcastMessage(MessageDTO dto) {\n+        for (ClientHandler clientHandler : onlineClientsList) {\n+            clientHandler.sendMessage(dto);\n+        }\n     }\n \n     public synchronized void subscribe(ClientHandler c) {\n-        clientHandlers.add(c);\n+        onlineClientsList.add(c);\n+        broadcastOnlineClients();\n     }\n \n     public synchronized void unsubscribe(ClientHandler c) {\n-        clientHandlers.remove(c);\n+        onlineClientsList.remove(c);\n+        broadcastOnlineClients();\n     }\n \n     public AuthService getAuthService() {"
  },
  {
    "sha": "d5917b2706892c14dcf7f009a79c8b5d45df8815",
    "filename": "ChatServer/src/main/java/ru/online/ClientHandler.java",
    "status": "modified",
    "additions": 35,
    "deletions": 27,
    "changes": 62,
    "blob_url": "https://github.com/KorEugene/NetworkChat/blob/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/ChatServer/src/main/java/ru/online/ClientHandler.java",
    "raw_url": "https://github.com/KorEugene/NetworkChat/raw/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/ChatServer/src/main/java/ru/online/ClientHandler.java",
    "contents_url": "https://api.github.com/repos/KorEugene/NetworkChat/contents/ChatServer/src/main/java/ru/online/ClientHandler.java?ref=ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb",
    "patch": "@@ -7,14 +7,15 @@\n import java.io.DataOutputStream;\n import java.io.IOException;\n import java.net.Socket;\n+import java.util.concurrent.*;\n \n public class ClientHandler {\n \n     private Socket socket;\n     private DataOutputStream outputStream;\n     private DataInputStream inputStream;\n     private ChatServer chatServer;\n-    private String user;\n+    private String currentUserName;\n \n     public ClientHandler(Socket socket, ChatServer chatServer) {\n         try {\n@@ -43,56 +44,63 @@ public void sendMessage(MessageDTO dto) {\n \n     private void readMessages() {\n         try {\n-            while (true) {\n+            while (!Thread.currentThread().isInterrupted() || socket.isConnected()) {\n                 String msg = inputStream.readUTF();\n                 MessageDTO dto = MessageDTO.convertFromJson(msg);\n-                dto.setFrom(user);\n+                dto.setFrom(currentUserName);\n \n                 switch (dto.getMessageType()) {\n-//                    case SEND_AUTH_MESSAGE -> authenticate(dto);\n                     case PUBLIC_MESSAGE -> chatServer.broadcastMessage(dto);\n-                    case PRIVATE_MESSAGE -> {\n-                        ClientHandler addressee = chatServer.isSubscribed(dto.getTo());\n-                        if (addressee != null) {\n-                            chatServer.sendPrivateMessage(addressee, dto);\n-                            chatServer.sendPrivateMessage(this, dto);\n-                        }\n-                    }\n+                    case PRIVATE_MESSAGE -> chatServer.sendPrivateMessage(dto);\n                 }\n             }\n         } catch (IOException e) {\n-            e.printStackTrace();\n+//            e.printStackTrace();\n+            System.out.println(e.getMessage());\n+            Thread.currentThread().interrupt();\n+        } finally {\n+            closeHandler();\n         }\n     }\n \n     private void authenticate() {\n+        ExecutorService executorService = Executors.newSingleThreadExecutor();\n         System.out.println(\"Authenticate started!\");\n-        try {\n+        Future<Boolean> task = executorService.submit(() -> {\n             while (true) {\n                 String authMessage = inputStream.readUTF();\n                 System.out.println(\"received msg \");\n                 MessageDTO dto = MessageDTO.convertFromJson(authMessage);\n                 String username = chatServer.getAuthService().getUsernameByLoginPass(dto.getLogin(), dto.getPassword());\n-                MessageDTO send = new MessageDTO();\n+                MessageDTO response = new MessageDTO();\n                 if (username == null) {\n-                    send.setMessageType(MessageType.ERROR_MESSAGE);\n-                    send.setBody(\"Wrong login or pass!\");\n+                    response.setMessageType(MessageType.ERROR_MESSAGE);\n+                    response.setBody(\"Wrong login or pass!\");\n                     System.out.println(\"Wrong auth\");\n-                    sendMessage(send);\n+                    sendMessage(response);\n+                } else if (chatServer.isUserBusy(username)) {\n+                    response.setMessageType(MessageType.ERROR_MESSAGE);\n+                    response.setBody(\"U're clone!!!\");\n+                    System.out.println(\"Clone\");\n                 } else {\n-                    send.setMessageType(MessageType.AUTH_CONFIRM);\n-                    send.setBody(username);\n-                    user = username;\n+                    response.setMessageType(MessageType.AUTH_CONFIRM);\n+                    response.setBody(username);\n+                    currentUserName = username;\n                     chatServer.subscribe(this);\n                     System.out.println(\"Subscribed\");\n-                    sendMessage(send);\n-                    break;\n+                    sendMessage(response);\n+                    return true;\n                 }\n-\n             }\n-        } catch (IOException e) {\n-            e.printStackTrace();\n+        });\n+        try {\n+            task.get(120, TimeUnit.SECONDS);\n+        } catch (InterruptedException | ExecutionException | TimeoutException e) {\n+//            e.printStackTrace();\n+            System.out.println(\"Client timed out!\");\n+            closeHandler();\n         }\n+        executorService.shutdown();\n     }\n \n     public void closeHandler() {\n@@ -104,7 +112,7 @@ public void closeHandler() {\n         }\n     }\n \n-    public String getUser() {\n-        return user;\n+    public String getCurrentUserName() {\n+        return currentUserName;\n     }\n }"
  },
  {
    "sha": "a20d47450026b615f74f5be14bc49b7fc6785389",
    "filename": "NetworkChat.iml",
    "status": "modified",
    "additions": 11,
    "deletions": 1,
    "changes": 12,
    "blob_url": "https://github.com/KorEugene/NetworkChat/blob/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/NetworkChat.iml",
    "raw_url": "https://github.com/KorEugene/NetworkChat/raw/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/NetworkChat.iml",
    "contents_url": "https://api.github.com/repos/KorEugene/NetworkChat/contents/NetworkChat.iml?ref=ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb",
    "patch": "@@ -1,2 +1,12 @@\n <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n-<module type=\"JAVA_MODULE\" version=\"4\" />\n\\ No newline at end of file\n+<module org.jetbrains.idea.maven.project.MavenProjectsManager.isMavenModule=\"true\" type=\"JAVA_MODULE\" version=\"4\">\n+  <component name=\"NewModuleRootManager\" LANGUAGE_LEVEL=\"JDK_15\">\n+    <output url=\"file://$MODULE_DIR$/target/classes\" />\n+    <output-test url=\"file://$MODULE_DIR$/target/test-classes\" />\n+    <content url=\"file://$MODULE_DIR$\">\n+      <excludeFolder url=\"file://$MODULE_DIR$/target\" />\n+    </content>\n+    <orderEntry type=\"inheritedJdk\" />\n+    <orderEntry type=\"sourceFolder\" forTests=\"false\" />\n+  </component>\n+</module>\n\\ No newline at end of file"
  },
  {
    "sha": "5656692ce9fbf251dba8267b1cc793f875605a24",
    "filename": "pom.xml",
    "status": "modified",
    "additions": 14,
    "deletions": 27,
    "changes": 41,
    "blob_url": "https://github.com/KorEugene/NetworkChat/blob/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/pom.xml",
    "raw_url": "https://github.com/KorEugene/NetworkChat/raw/ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb/pom.xml",
    "contents_url": "https://api.github.com/repos/KorEugene/NetworkChat/contents/pom.xml?ref=ad4e41765a355ab3fd97c4ccad210b2c8cef1dbb",
    "patch": "@@ -8,37 +8,24 @@\n     <artifactId>NetworkChat</artifactId>\n     <version>1.0-SNAPSHOT</version>\n \n+    <build>\n+        <plugins>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-compiler-plugin</artifactId>\n+                <configuration>\n+                    <source>15</source>\n+                    <target>15</target>\n+                </configuration>\n+            </plugin>\n+        </plugins>\n+    </build>\n+\n+\n     <properties>\n         <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n         <maven.compiler.source>15</maven.compiler.source>\n         <maven.compiler.target>15</maven.compiler.target>\n     </properties>\n \n-<!--    <dependencies>-->\n-<!--        <dependency>-->\n-<!--            <groupId>ru.online</groupId>-->\n-<!--            <artifactId>ChatClient</artifactId>-->\n-<!--            <version>1.0-SNAPSHOT</version>-->\n-<!--            <scope>compile</scope>-->\n-<!--        </dependency>-->\n-<!--        <dependency>-->\n-<!--            <groupId>ru.online</groupId>-->\n-<!--            <artifactId>ChatClientNetwork</artifactId>-->\n-<!--            <version>1.0-SNAPSHOT</version>-->\n-<!--            <scope>compile</scope>-->\n-<!--        </dependency>-->\n-<!--        <dependency>-->\n-<!--            <groupId>ru.online</groupId>-->\n-<!--            <artifactId>ChatCommon</artifactId>-->\n-<!--            <version>1.0-SNAPSHOT</version>-->\n-<!--            <scope>compile</scope>-->\n-<!--        </dependency>-->\n-<!--        <dependency>-->\n-<!--            <groupId>ru.online</groupId>-->\n-<!--            <artifactId>ChatServer</artifactId>-->\n-<!--            <version>1.0-SNAPSHOT</version>-->\n-<!--            <scope>compile</scope>-->\n-<!--        </dependency>-->\n-<!--    </dependencies>-->\n-\n </project>\n\\ No newline at end of file"
  }
]
