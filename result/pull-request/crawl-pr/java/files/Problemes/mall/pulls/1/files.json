[
  {
    "sha": "d1f561465b863440a5cf1aa6607e3cba3eacf19e",
    "filename": "LICENSE",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/Problemes/mall/blob/10163c966b36288b145e399d367883bfc44ce807/LICENSE",
    "raw_url": "https://github.com/Problemes/mall/raw/10163c966b36288b145e399d367883bfc44ce807/LICENSE",
    "contents_url": "https://api.github.com/repos/Problemes/mall/contents/LICENSE?ref=10163c966b36288b145e399d367883bfc44ce807",
    "patch": "@@ -186,7 +186,7 @@\n       same \"printed page\" as the copyright notice for easier\n       identification within third-party archives.\n \n-   Copyright [2018-2020] [macrozheng]\n+   Copyright [2018-2021] [macrozheng]\n \n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License."
  },
  {
    "sha": "cfa9498030d633f21e09c89235bbab5c845a4d91",
    "filename": "README.md",
    "status": "modified",
    "additions": 67,
    "deletions": 48,
    "changes": 115,
    "blob_url": "https://github.com/Problemes/mall/blob/10163c966b36288b145e399d367883bfc44ce807/README.md",
    "raw_url": "https://github.com/Problemes/mall/raw/10163c966b36288b145e399d367883bfc44ce807/README.md",
    "contents_url": "https://api.github.com/repos/Problemes/mall/contents/README.md?ref=10163c966b36288b145e399d367883bfc44ce807",
    "patch": "@@ -2,14 +2,21 @@\n \n <p>\n   <a href=\"#公众号\"><img src=\"http://macro-oss.oss-cn-shenzhen.aliyuncs.com/mall/badge/%E5%85%AC%E4%BC%97%E5%8F%B7-macrozheng-blue.svg\" alt=\"公众号\"></a>\n+  <a href=\"#公众号\"><img src=\"http://macro-oss.oss-cn-shenzhen.aliyuncs.com/mall/badge/%E4%BA%A4%E6%B5%81-%E5%BE%AE%E4%BF%A1%E7%BE%A4-2BA245.svg\" alt=\"交流\"></a>\n   <a href=\"https://github.com/macrozheng/mall-learning\"><img src=\"http://macro-oss.oss-cn-shenzhen.aliyuncs.com/mall/badge/%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B-mall--learning-green.svg\" alt=\"学习教程\"></a>\n   <a href=\"https://github.com/macrozheng/mall-swarm\"><img src=\"http://macro-oss.oss-cn-shenzhen.aliyuncs.com/mall/badge/Cloud%E7%89%88%E6%9C%AC-mall--swarm-brightgreen.svg\" alt=\"SpringCloud版本\"></a>\n   <a href=\"https://github.com/macrozheng/mall-admin-web\"><img src=\"http://macro-oss.oss-cn-shenzhen.aliyuncs.com/mall/badge/%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE-mall--admin--web-green.svg\" alt=\"前端项目\"></a>\n-  <a href=\"http://qm.qq.com/cgi-bin/qm/qr?k=V6xu5c12j9qhnMUNdDRzakNxRKzOxibQ\"><img src=\"http://macro-oss.oss-cn-shenzhen.aliyuncs.com/mall/badge/QQ%E7%BE%A4-959351312-red.svg\" alt=\"QQ群\"></a>\n-  <a href=\"#公众号\"><img src=\"http://macro-oss.oss-cn-shenzhen.aliyuncs.com/mall/badge/%E4%BA%A4%E6%B5%81-%E5%BE%AE%E4%BF%A1%E7%BE%A4-2BA245.svg\" alt=\"交流\"></a>\n   <a href=\"https://gitee.com/macrozheng/mall\"><img src=\"http://macro-oss.oss-cn-shenzhen.aliyuncs.com/mall/badge/%E7%A0%81%E4%BA%91-%E9%A1%B9%E7%9B%AE%E5%9C%B0%E5%9D%80-orange.svg\" alt=\"码云\"></a>\n </p>\n \n+## 友情提示\n+\n+> 1. **快速体验项目**：[在线访问地址](http://www.macrozheng.com/admin/index.html)。\n+> 2. **全套学习教程**：[《mall学习教程》](http://www.macrozheng.com/#/README)。\n+> 3. **微服务版本**：基于Spring Cloud Hoxton & Alibaba的项目：[mall-swarm](https://github.com/macrozheng/mall-swarm)。\n+> 4. **专属学习路线**：学习不走弯路，整理了套非常不错的[《mall专属学习路线》](#公众号)。\n+> 5. **项目交流**：想要加群交流项目的朋友，可以加入[mall项目交流群](#公众号)。\n+\n ## 前言\n \n `mall`项目致力于打造一个完整的电商系统，采用现阶段流行技术实现。\n@@ -31,15 +38,15 @@\n \n 项目演示地址： [http://www.macrozheng.com/admin/index.html](http://www.macrozheng.com/admin/index.html)  \n \n-![后台管理系统功能演示.gif](/document/resource/mall-admin.gif)\n+![后台管理系统功能演示](http://img.macrozheng.com/mall/project/mall_admin_show.png)\n \n #### 前台商城系统\n \n 前端项目`mall-app-web`地址：敬请期待......\n \n-项目演示地址：[http://www.macrozheng.com/app/index.html](http://www.macrozheng.com/app/index.html)\n+项目演示地址：[http://www.macrozheng.com/app/mainpage.html](http://www.macrozheng.com/app/mainpage.html)\n \n-![前台商城系统功能演示.gif](/document/resource/mall-app.gif)\n+![前台商城系统功能演示](http://img.macrozheng.com/mall/project/mall_app_show.png)\n \n ### 组织结构\n \n@@ -58,27 +65,30 @@ mall\n \n #### 后端技术\n \n-| 技术                 | 说明                | 官网                                                 |\n-| -------------------- | ------------------- | ---------------------------------------------------- |\n-| SpringBoot           | 容器+MVC框架        | https://spring.io/projects/spring-boot               |\n-| SpringSecurity       | 认证和授权框架      | https://spring.io/projects/spring-security           |\n-| MyBatis              | ORM框架             | http://www.mybatis.org/mybatis-3/zh/index.html       |\n-| MyBatisGenerator     | 数据层代码生成      | http://www.mybatis.org/generator/index.html          |\n-| PageHelper           | MyBatis物理分页插件 | http://git.oschina.net/free/Mybatis_PageHelper       |\n-| Swagger-UI           | 文档生产工具        | https://github.com/swagger-api/swagger-ui            |\n-| Hibernator-Validator | 验证框架            | http://hibernate.org/validator                       |\n-| Elasticsearch        | 搜索引擎            | https://github.com/elastic/elasticsearch             |\n-| RabbitMq             | 消息队列            | https://www.rabbitmq.com/                            |\n-| Redis                | 分布式缓存          | https://redis.io/                                    |\n-| MongoDb              | NoSql数据库         | https://www.mongodb.com                              |\n-| Docker               | 应用容器引擎        | https://www.docker.com                               |\n-| Druid                | 数据库连接池        | https://github.com/alibaba/druid                     |\n-| OSS                  | 对象存储            | https://github.com/aliyun/aliyun-oss-java-sdk        |\n-| MinIO                | 对象存储            | https://github.com/minio/minio                       |\n-| JWT                  | JWT登录支持         | https://github.com/jwtk/jjwt                         |\n-| LogStash             | 日志收集工具        | https://github.com/logstash/logstash-logback-encoder |\n-| Lombok               | 简化对象封装工具    | https://github.com/rzwitserloot/lombok               |\n-| Jenkins              | 自动化部署工具      | https://github.com/jenkinsci/jenkins                 |\n+| 技术                 | 说明                | 官网                                           |\n+| -------------------- | ------------------- | ---------------------------------------------- |\n+| SpringBoot           | 容器+MVC框架        | https://spring.io/projects/spring-boot         |\n+| SpringSecurity       | 认证和授权框架      | https://spring.io/projects/spring-security     |\n+| MyBatis              | ORM框架             | http://www.mybatis.org/mybatis-3/zh/index.html |\n+| MyBatisGenerator     | 数据层代码生成      | http://www.mybatis.org/generator/index.html    |\n+| Elasticsearch        | 搜索引擎            | https://github.com/elastic/elasticsearch       |\n+| RabbitMQ             | 消息队列            | https://www.rabbitmq.com/                      |\n+| Redis                | 分布式缓存          | https://redis.io/                              |\n+| MongoDB              | NoSql数据库         | https://www.mongodb.com                        |\n+| LogStash             | 日志收集工具        | https://github.com/elastic/logstash            |\n+| Kibina               | 日志可视化查看工具  | https://github.com/elastic/kibana              |\n+| Nginx                | 静态资源服务器      | https://www.nginx.com/                         |\n+| Docker               | 应用容器引擎        | https://www.docker.com                         |\n+| Jenkins              | 自动化部署工具      | https://github.com/jenkinsci/jenkins           |\n+| Druid                | 数据库连接池        | https://github.com/alibaba/druid               |\n+| OSS                  | 对象存储            | https://github.com/aliyun/aliyun-oss-java-sdk  |\n+| MinIO                | 对象存储            | https://github.com/minio/minio                 |\n+| JWT                  | JWT登录支持         | https://github.com/jwtk/jjwt                   |\n+| Lombok               | 简化对象封装工具    | https://github.com/rzwitserloot/lombok         |\n+| Hutool               | Java工具类库        | https://github.com/looly/hutool                |\n+| PageHelper           | MyBatis物理分页插件 | http://git.oschina.net/free/Mybatis_PageHelper |\n+| Swagger-UI           | 文档生成工具        | https://github.com/swagger-api/swagger-ui      |\n+| Hibernator-Validator | 验证框架            | http://hibernate.org/validator                 |\n \n #### 前端技术\n \n@@ -97,11 +107,11 @@ mall\n \n ##### 系统架构图\n \n-![系统架构图](document/resource/mall_micro_service_arch.jpg)\n+![系统架构图](http://img.macrozheng.com/mall/project/mall_micro_service_arch.jpg)\n \n ##### 业务架构图\n \n-![系统架构图](document/resource/mall_business_arch.png)\n+![系统架构图](http://img.macrozheng.com/mall/project/mall_business_arch.png)\n \n #### 模块介绍\n \n@@ -119,7 +129,7 @@ mall\n \n #### 开发进度\n \n-![项目开发进度图](document/resource/mall_dev_flow.png)\n+![项目开发进度图](http://img.macrozheng.com/mall/project/mall_dev_flow.png)\n \n ## 环境搭建\n \n@@ -128,7 +138,7 @@ mall\n | 工具          | 说明                | 官网                                            |\n | ------------- | ------------------- | ----------------------------------------------- |\n | IDEA          | 开发IDE             | https://www.jetbrains.com/idea/download         |\n-| RedisDesktop  | redis客户端连接工具 | https://redisdesktop.com/download               |\n+| RedisDesktop  | redis客户端连接工具 | https://github.com/qishibo/AnotherRedisDesktopManager  |\n | Robomongo     | mongo客户端连接工具 | https://robomongo.org/download                  |\n | SwitchHosts   | 本地host管理        | https://oldj.github.io/SwitchHosts/             |\n | X-shell       | Linux远程连接工具   | http://www.netsarang.com/download/software.html |\n@@ -140,49 +150,58 @@ mall\n | ProcessOn     | 流程图绘制工具      | https://www.processon.com/                      |\n | PicPick       | 图片处理工具        | https://picpick.app/zh/                         |\n | Snipaste      | 屏幕截图工具        | https://www.snipaste.com/                       |\n+| Postman       | API接口调试工具      | https://www.postman.com/                        |\n+| Typora        | Markdown编辑器      | https://typora.io/                              |\n \n ### 开发环境\n \n | 工具          | 版本号 | 下载                                                         |\n | ------------- | ------ | ------------------------------------------------------------ |\n | JDK           | 1.8    | https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html |\n | Mysql         | 5.7    | https://www.mysql.com/                                       |\n-| Redis         | 3.2    | https://redis.io/download                                    |\n-| Elasticsearch | 6.2.2  | https://www.elastic.co/downloads                             |\n-| MongoDb       | 3.2    | https://www.mongodb.com/download-center                      |\n-| RabbitMq      | 3.7.14 | http://www.rabbitmq.com/download.html                        |\n+| Redis         | 5.0    | https://redis.io/download                                    |\n+| MongoDB       | 4.2.5  | https://www.mongodb.com/download-center                      |\n+| RabbitMQ      | 3.7.14 | http://www.rabbitmq.com/download.html                        |\n | Nginx         | 1.10   | http://nginx.org/en/download.html                            |\n+| Elasticsearch | 7.6.2  | https://www.elastic.co/downloads/elasticsearch               |\n+| Logstash      | 7.6.2  | https://www.elastic.co/cn/downloads/logstash                 |\n+| Kibana        | 7.6.2  | https://www.elastic.co/cn/downloads/kibana                   |\n \n ### 搭建步骤\n \n > Windows环境部署\n \n-- Windows环境搭建请参考：[mall在Windows环境下的部署](https://github.com/macrozheng/mall-learning/blob/master/docs/deploy/mall_deploy_windows.md);\n-- 注意：只启动mall-admin,仅需安装mysql即可;\n+- Windows环境搭建请参考：[mall在Windows环境下的部署](http://www.macrozheng.com/#/deploy/mall_deploy_windows);\n+- 注意：只启动mall-admin,仅需安装Mysql、Redis即可;\n - 克隆`mall-admin-web`项目，并导入到IDEA中完成编译：[前端项目地址](https://github.com/macrozheng/mall-admin-web);\n-- `mall-admin-web`项目的安装及部署请参考：[mall前端项目的安装与部署](https://github.com/macrozheng/mall-learning/blob/master/docs/deploy/mall_deploy_web.md);\n-- ELK日志收集系统的搭建请参考：[SpringBoot应用整合ELK实现日志收集](https://github.com/macrozheng/mall-learning/blob/master/docs/technology/mall_tiny_elk.md);\n-- 使用MinIO存储文件请参考：[前后端分离项目，如何优雅实现文件存储](https://github.com/macrozheng/mall-learning/blob/master/docs/technology/minio_use.md)。\n+- `mall-admin-web`项目的安装及部署请参考：[mall前端项目的安装与部署](http://www.macrozheng.com/#/deploy/mall_deploy_web)。\n \n > Docker环境部署\n \n-- 使用虚拟机安装CentOS7.6请参考：[虚拟机安装及使用Linux，看这一篇就够了！](https://github.com/macrozheng/mall-learning/blob/master/docs/reference/linux_install.md);\n-- Docker环境的安装请参考：[开发者必备Docker命令](https://github.com/macrozheng/mall-learning/blob/master/docs/reference/docker.md);\n-- 本项目Docker镜像构建请参考：[使用Maven插件为SpringBoot应用构建Docker镜像](https://github.com/macrozheng/mall-learning/blob/master/docs/reference/docker_maven.md);\n-- 本项目在Docker容器下的部署请参考：[mall在Linux环境下的部署（基于Docker容器）](https://github.com/macrozheng/mall-learning/blob/master/docs/deploy/mall_deploy_docker.md);\n-- 本项目使用Docker Compose请参考： [mall在Linux环境下的部署（基于Docker Compose）](https://github.com/macrozheng/mall-learning/blob/master/docs/deploy/mall_deploy_docker_compose.md);\n-- 本项目在Linux下的自动化部署请参考：[mall在Linux环境下的自动化部署（基于Jenkins）](https://github.com/macrozheng/mall-learning/blob/master/docs/deploy/mall_deploy_jenkins.md)。\n+- 使用虚拟机安装CentOS7.6请参考：[虚拟机安装及使用Linux，看这一篇就够了](http://www.macrozheng.com/#/reference/linux_install);\n+- Docker环境的安装请参考：[开发者必备Docker命令](http://www.macrozheng.com/#/reference/docker);\n+- 本项目Docker镜像构建请参考：[使用Maven插件为SpringBoot应用构建Docker镜像](http://www.macrozheng.com/#/reference/docker_maven);\n+- 本项目在Docker容器下的部署请参考：[mall在Linux环境下的部署（基于Docker容器）](http://www.macrozheng.com/#/deploy/mall_deploy_docker);\n+- 本项目使用Docker Compose请参考： [mall在Linux环境下的部署（基于Docker Compose）](http://www.macrozheng.com/#/deploy/mall_deploy_docker_compose);\n+- 本项目在Linux下的自动化部署请参考：[mall在Linux环境下的自动化部署（基于Jenkins）](http://www.macrozheng.com/#/deploy/mall_deploy_jenkins);\n+\n+> 相关环境部署\n+\n+- ELK日志收集系统的搭建请参考：[SpringBoot应用整合ELK实现日志收集](http://www.macrozheng.com/#/technology/mall_tiny_elk);\n+- 使用MinIO存储文件请参考：[前后端分离项目，如何优雅实现文件存储](http://www.macrozheng.com/#/technology/minio_use);\n+- 读写分离解决方案请参考：[你还在代码里做读写分离么，试试这个中间件吧](http://www.macrozheng.com/#/reference/gaea);\n+- Redis集群解决方案请参考：[Docker环境下秒建Redis集群，连SpringBoot也整上了！](http://www.macrozheng.com/#/reference/redis_cluster)。\n \n ## 公众号\n \n-mall项目全套学习教程连载中，**关注公众号**第一时间获取。\n+学习不走弯路，关注公众号「**macrozheng**」，回复「**学习路线**」，获取mall项目专属学习路线！\n \n-加微信群交流，公众号后台回复**加群**即可。\n+加微信群交流，公众号后台回复「**加群**」即可。\n \n ![公众号图片](http://macro-oss.oss-cn-shenzhen.aliyuncs.com/mall/banner/qrcode_for_macrozheng_258.jpg)\n \n ## 许可证\n \n [Apache License 2.0](https://github.com/macrozheng/mall/blob/master/LICENSE)\n \n-Copyright (c) 2018-2020 macrozheng\n+Copyright (c) 2018-2021 macrozheng"
  },
  {
    "sha": "7469953a763e8f4294bec29c99ca6fa5d9c30913",
    "filename": "document/docker/docker-compose-app.yml",
    "status": "modified",
    "additions": 15,
    "deletions": 0,
    "changes": 15,
    "blob_url": "https://github.com/Problemes/mall/blob/10163c966b36288b145e399d367883bfc44ce807/document/docker/docker-compose-app.yml",
    "raw_url": "https://github.com/Problemes/mall/raw/10163c966b36288b145e399d367883bfc44ce807/document/docker/docker-compose-app.yml",
    "contents_url": "https://api.github.com/repos/Problemes/mall/contents/document/docker/docker-compose-app.yml?ref=10163c966b36288b145e399d367883bfc44ce807",
    "patch": "@@ -5,13 +5,23 @@ services:\n     container_name: mall-admin\n     ports:\n       - 8080:8080\n+    volumes:\n+      - /mydata/app/mall-admin/logs:/var/logs\n+      - /etc/localtime:/etc/localtime\n+    environment:\n+      - 'TZ=\"Asia/Shanghai\"'\n     external_links:\n       - mysql:db #可以用db这个域名访问mysql服务\n   mall-search:\n     image: mall/mall-search:1.0-SNAPSHOT\n     container_name: mall-search\n     ports:\n       - 8081:8081\n+    volumes:\n+      - /mydata/app/mall-search/logs:/var/logs\n+      - /etc/localtime:/etc/localtime\n+    environment:\n+      - 'TZ=\"Asia/Shanghai\"'\n     external_links:\n       - elasticsearch:es #可以用es这个域名访问elasticsearch服务\n       - mysql:db #可以用db这个域名访问mysql服务\n@@ -20,6 +30,11 @@ services:\n     container_name: mall-portal\n     ports:\n       - 8085:8085\n+    volumes:\n+      - /mydata/app/mall-portal/logs:/var/logs\n+      - /etc/localtime:/etc/localtime\n+    environment:\n+      - 'TZ=\"Asia/Shanghai\"'\n     external_links:\n       - redis:redis #可以用redis这个域名访问redis服务\n       - mongo:mongo #可以用mongo这个域名访问mongo服务"
  },
  {
    "sha": "bd5bc5184ca01b258ed05715e55223bfb876d7e7",
    "filename": "document/docker/docker-compose-env.yml",
    "status": "modified",
    "additions": 20,
    "deletions": 4,
    "changes": 24,
    "blob_url": "https://github.com/Problemes/mall/blob/10163c966b36288b145e399d367883bfc44ce807/document/docker/docker-compose-env.yml",
    "raw_url": "https://github.com/Problemes/mall/raw/10163c966b36288b145e399d367883bfc44ce807/document/docker/docker-compose-env.yml",
    "contents_url": "https://api.github.com/repos/Problemes/mall/contents/document/docker/docker-compose-env.yml?ref=10163c966b36288b145e399d367883bfc44ce807",
    "patch": "@@ -14,7 +14,7 @@ services:\n       - /mydata/mysql/data/conf:/etc/mysql/conf.d #配置文件挂载\n       - /mydata/mysql/log:/var/log/mysql #日志文件挂载\n   redis:\n-    image: redis:3.2\n+    image: redis:5\n     container_name: redis\n     command: redis-server --appendonly yes\n     volumes:\n@@ -40,7 +40,7 @@ services:\n       - 5672:5672\n       - 15672:15672\n   elasticsearch:\n-    image: elasticsearch:6.4.0\n+    image: elasticsearch:7.6.2\n     container_name: elasticsearch\n     environment:\n       - \"cluster.name=elasticsearch\" #设置集群名称为elasticsearch\n@@ -52,8 +52,24 @@ services:\n     ports:\n       - 9200:9200\n       - 9300:9300\n+  logstash:\n+    image: logstash:7.6.2\n+    container_name: logstash\n+    environment:\n+      - TZ=Asia/Shanghai\n+    volumes:\n+      - /mydata/logstash/logstash.conf:/usr/share/logstash/pipeline/logstash.conf #挂载logstash的配置文件\n+    depends_on:\n+      - elasticsearch #kibana在elasticsearch启动之后再启动\n+    links:\n+      - elasticsearch:es #可以用es这个域名访问elasticsearch服务\n+    ports:\n+      - 4560:4560\n+      - 4561:4561\n+      - 4562:4562\n+      - 4563:4563\n   kibana:\n-    image: kibana:6.4.0\n+    image: kibana:7.6.2\n     container_name: kibana\n     links:\n       - elasticsearch:es #可以用es这个域名访问elasticsearch服务\n@@ -64,7 +80,7 @@ services:\n     ports:\n       - 5601:5601\n   mongo:\n-    image: mongo:3.2\n+    image: mongo:4.2.5\n     container_name: mongo\n     volumes:\n       - /mydata/mongo/db:/data/db #数据文件挂载"
  },
  {
    "sha": "8cd872f0a98f38f4f9204fcd484c3e0206ade397",
    "filename": "document/docker/docker-deploy.md",
    "status": "removed",
    "additions": 0,
    "deletions": 149,
    "changes": 149,
    "blob_url": "https://github.com/Problemes/mall/blob/47ec2f0a2b4420c81c7ebdba5be6c13bdcfcf3f7/document/docker/docker-deploy.md",
    "raw_url": "https://github.com/Problemes/mall/raw/47ec2f0a2b4420c81c7ebdba5be6c13bdcfcf3f7/document/docker/docker-deploy.md",
    "contents_url": "https://api.github.com/repos/Problemes/mall/contents/document/docker/docker-deploy.md?ref=47ec2f0a2b4420c81c7ebdba5be6c13bdcfcf3f7",
    "patch": "@@ -1,149 +0,0 @@\n-# docker环境部署\n-\n-## docker环境安装\n-### docker安装\n-1. 安装yum-utils：\n-yum install -y yum-utils \\\n-device-mapper-persistent-data \\\n-lvm2\n-2. 为yum源添加docker仓库位置：\n-yum-config-manager \\\n---add-repo \\\n-https://download.docker.com/linux/centos/docker-ce.repo\n-3. 安装docker:\n-yum install docker-ce\n-4. 启动docker:\n-systemctl start docker\n-注：常见命令见document/reference文件夹中的docker.md\n-5. 安装上传下载插件：\n-yum -y install lrzsz\n-### docker compose安装\n-1. 下载地址：https://github.com/docker/compose/releases\n-2. 安装地址：/usr/local/bin/docker-compose\n-3. 设置为可执行：sudo chmod +x /usr/local/bin/docker-compose\n-4. 测试是否安装成功：docker-compose --version\n-\n-## mysql安装\n-### 下载镜像文件\n-docker pull mysql:5.7 \n-### 创建实例并启动\n-docker run -p 3306:3306 --name mysql \\\n--v /mydata/mysql/log:/var/log/mysql \\\n--v /mydata/mysql/data:/var/lib/mysql \\\n--v /mydata/mysql/conf:/etc/mysql \\\n--e MYSQL_ROOT_PASSWORD=root  \\\n--d mysql:5.7\n-> 参数说明\n-- -p 3306:3306：将容器的3306端口映射到主机的3306端口\n-- -v /mydata/mysql/conf:/etc/mysql：将配置文件夹挂在到主机\n-- -v /mydata/mysql/log:/var/log/mysql：将日志文件夹挂载到主机\n-- -v /mydata/mysql/data:/var/lib/mysql/：将配置文件夹挂载到主机\n-- -e MYSQL_ROOT_PASSWORD=root：初始化root用户的密码\n-### 通过容器的mysql命令行工具连接\n-docker exec -it mysql mysql -uroot -proot\n-### 设置远程访问\n-grant all privileges on *.* to 'root' @'%' identified by 'root';\n-flush privileges;\n-### 进入容器文件系统\n-docker exec -it mysql /bin/bash\n-\n-## redis安装\n-### 下载镜像文件\n-docker pull redis:3.2\n-### 创建实例并启动\n-docker run -p 6379:6379 --name redis -v /mydata/redis/data:/data -d redis:3.2 redis-server --appendonly yes\n-### 使用redis镜像执行redis-cli命令连接\n-docker exec -it redis redis-cli\n-\n-## nginx安装\n-### 下载镜像文件\n-docker pull nginx:1.10\n-### 创建实例并启动\n-docker run -p 80:80 --name nginx \\\n--v /mydata/nginx/html:/usr/share/nginx/html \\\n--v /mydata/nginx/logs:/var/log/nginx  \\\n--d nginx:1.10\n-### 修改nginx配置\n-1. 将容器内的配置文件拷贝到当前目录：docker container cp nginx:/etc/nginx .\n-2. 修改文件名称：mv nginx conf\n-3. 终止容器：docker stop nginx\n-4. 执行命令删除原容器：docker rm $ContainerId\n-5. 执行以下命令：\n-docker run -p 80:80 --name nginx \\\n--v /mydata/nginx/html:/usr/share/nginx/html \\\n--v /mydata/nginx/logs:/var/log/nginx  \\\n--v /mydata/nginx/conf:/etc/nginx \\\n--d nginx:1.10\n-\n-## rabbitmq安装\n-### 下载镜像文件\n-docker pull rabbitmq:management\n-### 创建实例并启动\n-docker run -d --name rabbitmq --publish 5671:5671 \\\n- --publish 5672:5672 --publish 4369:4369 --publish 25672:25672 --publish 15671:15671 --publish 15672:15672 \\\n-rabbitmq:management\n-\n-## elasticsearch安装\n-### 下载镜像文件\n-docker pull elasticsearch:6.4.0\n-### 创建实例并运行\n-docker run -p 9200:9200 -p 9300:9300 --name elasticsearch \\\n--v /mydata/elasticsearch/plugins:/usr/share/elasticsearch/plugins \\\n--v /mydata/elasticsearch/data:/usr/share/elasticsearch/data \\\n--d elasticsearch:6.4.0\n-### 测试\n-访问会返回版本信息：http://192.168.1.66:9200/\n-### 安装目录位置\n-/usr/share/elasticsearch\n-### 安装head插件(可以不安装，仅用于测试)\n-1. 进入docker内部bash:docker exec -it elasticsearch /bin/bash\n-2. 安装插件，具体参考：https://github.com/mobz/elasticsearch-head\n-3. 测试：http://192.168.1.66:9200/_plugin/head/\n-### 安装中文分词器IKAnalyzer\n-1. 进入docker内部bash:docker exec -it elasticsearch /bin/bash\n-2. 安装中文分词插件，执行以下命令：elasticsearch-plugin install https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v6.2.2/elasticsearch-analysis-ik-6.2.2.zip\n-3. 测试：\n-    - 访问header插件：打开地址http://192.168.1.66:9200/_plugin/head/ \n-    - 选择复合查询，输入地址：POST:http://192.168.1.66:9200/_analyze \n-    - 输入参数：JSON:{\"analyzer\":\"ik\",\"text\":\"我们是大数据开发人员\"}\n-\n-## mongodb安装\n-### 下载镜像文件\n-docker pull mongo:3.2\n-### 创建实例并运行\n-docker run -p 27017:27017 --name mongo -v /mydata/mongo/db:/data/db -d mongo:3.2\n-### 使用mongo命令进入容器\n-docker exec -it mongo mongo\n-\n-## SpringBoot应用命令部署\n-**docker容器间进行连接才能互相访问**\n-### 部署mall-admin\n-docker run -p 8080:8080 --name mall-admin \\\n---link mysql:db \\\n--v /etc/timezone:/etc/timezone \\\n--v /etc/localtime:/etc/localtime \\\n--v /mydata/app/admin/logs:/var/logs \\\n--d mall/mall-admin:1.0-SNAPSHOT\n-### 部署mall-search\n-docker run -p 8081:8081 --name mall-search \\\n---link elasticsearch:es \\\n---link mysql:db \\\n--v /etc/timezone:/etc/timezone \\\n--v /etc/localtime:/etc/localtime \\\n--v /mydata/app/search/logs:/var/logs \\\n--d mall/mall-search:1.0-SNAPSHOT\n-### 部署mall-port\n-docker run -p 8085:8085 --name mall-portal \\\n---link mysql:db \\\n---link redis:redis \\\n---link mongo:mongo \\\n--v /etc/timezone:/etc/timezone \\\n--v /etc/localtime:/etc/localtime \\\n--v /mydata/app/portal/logs:/var/logs \\\n--d mall/mall-portal:1.0-SNAPSHOT\n-\n-## SpringBoot应用自动化部署\n-### 部署文件\n-document/docker/docker-compose.yml\n-### 部署命令\n-docker-compose up -d\n\\ No newline at end of file"
  },
  {
    "sha": "4b7b6da1314ff801bdd8eb7bd8e00d57620de973",
    "filename": "document/elk/logback-spring.xml",
    "status": "removed",
    "additions": 0,
    "deletions": 14,
    "changes": 14,
    "blob_url": "https://github.com/Problemes/mall/blob/47ec2f0a2b4420c81c7ebdba5be6c13bdcfcf3f7/document/elk/logback-spring.xml",
    "raw_url": "https://github.com/Problemes/mall/raw/47ec2f0a2b4420c81c7ebdba5be6c13bdcfcf3f7/document/elk/logback-spring.xml",
    "contents_url": "https://api.github.com/repos/Problemes/mall/contents/document/elk/logback-spring.xml?ref=47ec2f0a2b4420c81c7ebdba5be6c13bdcfcf3f7",
    "patch": "@@ -1,14 +0,0 @@\n-<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n-<!DOCTYPE configuration>\n-<configuration>\n-    <include resource=\"org/springframework/boot/logging/logback/base.xml\"/>\n-    <appender name=\"LOGSTASH\" class=\"net.logstash.logback.appender.LogstashTcpSocketAppender\">\n-        <destination>localhost:4560</destination>\n-        <encoder charset=\"UTF-8\" class=\"net.logstash.logback.encoder.LogstashEncoder\" />\n-    </appender>\n-    <root level=\"INFO\">\n-        <appender-ref ref=\"LOGSTASH\" />\n-        <appender-ref ref=\"CONSOLE\" />\n-    </root>\n-\n-</configuration>"
  },
  {
    "sha": "a71e91991cfeb89c3a4b09cda600ec0f44705bd7",
    "filename": "document/elk/logstash-springboot.conf",
    "status": "removed",
    "additions": 0,
    "deletions": 14,
    "changes": 14,
    "blob_url": "https://github.com/Problemes/mall/blob/47ec2f0a2b4420c81c7ebdba5be6c13bdcfcf3f7/document/elk/logstash-springboot.conf",
    "raw_url": "https://github.com/Problemes/mall/raw/47ec2f0a2b4420c81c7ebdba5be6c13bdcfcf3f7/document/elk/logstash-springboot.conf",
    "contents_url": "https://api.github.com/repos/Problemes/mall/contents/document/elk/logstash-springboot.conf?ref=47ec2f0a2b4420c81c7ebdba5be6c13bdcfcf3f7",
    "patch": "@@ -1,14 +0,0 @@\n-input {\n-  tcp {\n-    mode => \"server\"\n-    host => \"0.0.0.0\"\n-    port => 4560\n-    codec => json_lines\n-  }\n-}\n-output {\n-  elasticsearch {\n-    hosts => \"es:9200\"\n-    index => \"springboot-logstash-%{+YYYY.MM.dd}\"\n-  }\n-}\n\\ No newline at end of file"
  },
  {
    "sha": "e1b23f4c5a1fbaeecdf91772c4645eb99a1b54a3",
    "filename": "document/elk/logstash.conf",
    "status": "added",
    "additions": 49,
    "deletions": 0,
    "changes": 49,
    "blob_url": "https://github.com/Problemes/mall/blob/10163c966b36288b145e399d367883bfc44ce807/document/elk/logstash.conf",
    "raw_url": "https://github.com/Problemes/mall/raw/10163c966b36288b145e399d367883bfc44ce807/document/elk/logstash.conf",
    "contents_url": "https://api.github.com/repos/Problemes/mall/contents/document/elk/logstash.conf?ref=10163c966b36288b145e399d367883bfc44ce807",
    "patch": "@@ -0,0 +1,49 @@\n+input {\n+  tcp {\n+    mode => \"server\"\n+    host => \"0.0.0.0\"\n+    port => 4560\n+    codec => json_lines\n+    type => \"debug\"\n+  }\n+  tcp {\n+    mode => \"server\"\n+    host => \"0.0.0.0\"\n+    port => 4561\n+    codec => json_lines\n+    type => \"error\"\n+  }\n+  tcp {\n+    mode => \"server\"\n+    host => \"0.0.0.0\"\n+    port => 4562\n+    codec => json_lines\n+    type => \"business\"\n+  }\n+  tcp {\n+    mode => \"server\"\n+    host => \"0.0.0.0\"\n+    port => 4563\n+    codec => json_lines\n+    type => \"record\"\n+  }\n+}\n+filter{\n+  if [type] == \"record\" {\n+    mutate {\n+      remove_field => \"port\"\n+      remove_field => \"host\"\n+      remove_field => \"@version\"\n+    }\n+    json {\n+      source => \"message\"\n+      remove_field => [\"message\"]\n+    }\n+  }\n+}\n+output {\n+  elasticsearch {\n+    hosts => \"localhost:9200\"\n+    index => \"mall-%{type}-%{+YYYY.MM.dd}\"\n+  }\n+}\n\\ No newline at end of file"
  },
  {
    "sha": "74921ec375f681b3c94bd96f282dc04a9f237f59",
    "filename": "document/pdm/mall.pdb",
    "status": "modified",
    "additions": 2521,
    "deletions": 1686,
    "changes": 4207,
    "blob_url": "https://github.com/Problemes/mall/blob/10163c966b36288b145e399d367883bfc44ce807/document/pdm/mall.pdb",
    "raw_url": "https://github.com/Problemes/mall/raw/10163c966b36288b145e399d367883bfc44ce807/document/pdm/mall.pdb",
    "contents_url": "https://api.github.com/repos/Problemes/mall/contents/document/pdm/mall.pdb?ref=10163c966b36288b145e399d367883bfc44ce807"
  },
  {
    "sha": "96503fcfb8173588f7b401ef3c11d0eb9d244253",
    "filename": "document/pdm/mall.pdm",
    "status": "modified",
    "additions": 2520,
    "deletions": 1685,
    "changes": 4205,
    "blob_url": "https://github.com/Problemes/mall/blob/10163c966b36288b145e399d367883bfc44ce807/document/pdm/mall.pdm",
    "raw_url": "https://github.com/Problemes/mall/raw/10163c966b36288b145e399d367883bfc44ce807/document/pdm/mall.pdm",
    "contents_url": "https://api.github.com/repos/Problemes/mall/contents/document/pdm/mall.pdm?ref=10163c966b36288b145e399d367883bfc44ce807"
  },
  {
    "sha": "8e663bf3fcdb6831f0791ba5b329bbbb2c9c2167",
    "filename": "document/resource/mall_dev_flow.png",
    "status": "modified",
    "additions": 0,
    "deletions": 0,
    "changes": 0,
    "blob_url": "https://github.com/Problemes/mall/blob/10163c966b36288b145e399d367883bfc44ce807/document/resource/mall_dev_flow.png",
    "raw_url": "https://github.com/Problemes/mall/raw/10163c966b36288b145e399d367883bfc44ce807/document/resource/mall_dev_flow.png",
    "contents_url": "https://api.github.com/repos/Problemes/mall/contents/document/resource/mall_dev_flow.png?ref=10163c966b36288b145e399d367883bfc44ce807"
  },
  {
    "sha": "da67c257d0710fbdbb7d45f3df6efd4517a012ad",
    "filename": "document/sh/Dockerfile",
    "status": "added",
    "additions": 10,
    "deletions": 0,
    "changes": 10,
    "blob_url": "https://github.com/Problemes/mall/blob/10163c966b36288b145e399d367883bfc44ce807/document/sh/Dockerfile",
    "raw_url": "https://github.com/Problemes/mall/raw/10163c966b36288b145e399d367883bfc44ce807/document/sh/Dockerfile",
    "contents_url": "https://api.github.com/repos/Problemes/mall/contents/document/sh/Dockerfile?ref=10163c966b36288b145e399d367883bfc44ce807",
    "patch": "@@ -0,0 +1,10 @@\n+# 该镜像需要依赖的基础镜像\n+FROM java:8\n+# 将当前目录下的jar包复制到docker容器的/目录下\n+ADD mall-admin-1.0-SNAPSHOT.jar /mall-admin-1.0-SNAPSHOT.jar\n+# 声明服务运行在8088端口\n+EXPOSE 8080\n+# 指定docker容器启动时运行jar包\n+ENTRYPOINT [\"java\", \"-jar\",\"/mall-admin-1.0-SNAPSHOT.jar\"]\n+# 指定维护者的名字\n+MAINTAINER macro\n\\ No newline at end of file"
  },
  {
    "sha": "8952b37c43db7925b3cc7eac52aff29ec09bc56b",
    "filename": "document/sh/mall-admin.sh",
    "status": "modified",
    "additions": 2,
    "deletions": 0,
    "changes": 2,
    "blob_url": "https://github.com/Problemes/mall/blob/10163c966b36288b145e399d367883bfc44ce807/document/sh/mall-admin.sh",
    "raw_url": "https://github.com/Problemes/mall/raw/10163c966b36288b145e399d367883bfc44ce807/document/sh/mall-admin.sh",
    "contents_url": "https://api.github.com/repos/Problemes/mall/contents/document/sh/mall-admin.sh?ref=10163c966b36288b145e399d367883bfc44ce807",
    "patch": "@@ -8,6 +8,8 @@ docker rmi `docker images | grep none | awk '{print $3}'`\n echo '----rm none images----'\n docker run -p 8080:8080 --name ${app_name} \\\n --link mysql:db \\\n+--link redis:redis \\\n+-e TZ=\"Asia/Shanghai\" \\\n -v /etc/localtime:/etc/localtime \\\n -v /mydata/app/${app_name}/logs:/var/logs \\\n -d mall/${app_name}:1.0-SNAPSHOT"
  },
  {
    "sha": "bab9f6c1d4ce16277954698e60dbb79ec4d02fdd",
    "filename": "document/sh/mall-portal.sh",
    "status": "modified",
    "additions": 1,
    "deletions": 0,
    "changes": 1,
    "blob_url": "https://github.com/Problemes/mall/blob/10163c966b36288b145e399d367883bfc44ce807/document/sh/mall-portal.sh",
    "raw_url": "https://github.com/Problemes/mall/raw/10163c966b36288b145e399d367883bfc44ce807/document/sh/mall-portal.sh",
    "contents_url": "https://api.github.com/repos/Problemes/mall/contents/document/sh/mall-portal.sh?ref=10163c966b36288b145e399d367883bfc44ce807",
    "patch": "@@ -11,6 +11,7 @@ docker run -p 8085:8085 --name ${app_name} \\\n --link redis:redis \\\n --link mongo:mongo \\\n --link rabbitmq:rabbit \\\n+-e TZ=\"Asia/Shanghai\" \\\n -v /etc/localtime:/etc/localtime \\\n -v /mydata/app/${app_name}/logs:/var/logs \\\n -d mall/${app_name}:1.0-SNAPSHOT"
  },
  {
    "sha": "658ea001c9bf77b4750d0cd0ff3bd5e4e11f2cad",
    "filename": "document/sh/mall-search.sh",
    "status": "modified",
    "additions": 1,
    "deletions": 0,
    "changes": 1,
    "blob_url": "https://github.com/Problemes/mall/blob/10163c966b36288b145e399d367883bfc44ce807/document/sh/mall-search.sh",
    "raw_url": "https://github.com/Problemes/mall/raw/10163c966b36288b145e399d367883bfc44ce807/document/sh/mall-search.sh",
    "contents_url": "https://api.github.com/repos/Problemes/mall/contents/document/sh/mall-search.sh?ref=10163c966b36288b145e399d367883bfc44ce807",
    "patch": "@@ -9,6 +9,7 @@ echo '----rm none images----'\n docker run -p 8081:8081 --name ${app_name} \\\n --link mysql:db \\\n --link elasticsearch:es \\\n+-e TZ=\"Asia/Shanghai\" \\\n -v /etc/localtime:/etc/localtime \\\n -v /mydata/app/${app_name}/logs:/var/logs \\\n -d mall/${app_name}:1.0-SNAPSHOT"
  },
  {
    "sha": "af0d73b38f1fe52a19798d1706168518212e2ea9",
    "filename": "document/sh/run.sh",
    "status": "added",
    "additions": 28,
    "deletions": 0,
    "changes": 28,
    "blob_url": "https://github.com/Problemes/mall/blob/10163c966b36288b145e399d367883bfc44ce807/document/sh/run.sh",
    "raw_url": "https://github.com/Problemes/mall/raw/10163c966b36288b145e399d367883bfc44ce807/document/sh/run.sh",
    "contents_url": "https://api.github.com/repos/Problemes/mall/contents/document/sh/run.sh?ref=10163c966b36288b145e399d367883bfc44ce807",
    "patch": "@@ -0,0 +1,28 @@\n+#!/usr/bin/env bash\n+# 定义应用组名\n+group_name='mall'\n+# 定义应用名称\n+app_name='mall-admin'\n+# 定义应用版本\n+app_version='1.0-SNAPSHOT'\n+# 定义应用环境\n+profile_active='prod'\n+echo '----copy jar----'\n+docker stop ${app_name}\n+echo '----stop container----'\n+docker rm ${app_name}\n+echo '----rm container----'\n+docker rmi ${group_name}/${app_name}:${app_version}\n+echo '----rm image----'\n+# 打包编译docker镜像\n+docker build -t ${group_name}/${app_name}:${app_version} .\n+echo '----build image----'\n+docker run -p 8080:8080 --name ${app_name} \\\n+--link mysql:db \\\n+--link redis:redis \\\n+-e 'spring.profiles.active'=${profile_active} \\\n+-e TZ=\"Asia/Shanghai\" \\\n+-v /etc/localtime:/etc/localtime \\\n+-v /mydata/app/${app_name}/logs:/var/logs \\\n+-d ${group_name}/${app_name}:${app_version}\n+echo '----start container----'\n\\ No newline at end of file"
  },
  {
    "sha": "8af6f9cbdbb45abd5bafb9556968f8e28eef15cb",
    "filename": "document/sql/mall.sql",
    "status": "modified",
    "additions": 637,
    "deletions": 249,
    "changes": 886,
    "blob_url": "https://github.com/Problemes/mall/blob/10163c966b36288b145e399d367883bfc44ce807/document/sql/mall.sql",
    "raw_url": "https://github.com/Problemes/mall/raw/10163c966b36288b145e399d367883bfc44ce807/document/sql/mall.sql",
    "contents_url": "https://api.github.com/repos/Problemes/mall/contents/document/sql/mall.sql?ref=10163c966b36288b145e399d367883bfc44ce807"
  },
  {
    "sha": "af68190f7b6c57b6c95466f40394a2f9f5b40c9d",
    "filename": "mall-admin/pom.xml",
    "status": "modified",
    "additions": 4,
    "deletions": 32,
    "changes": 36,
    "blob_url": "https://github.com/Problemes/mall/blob/10163c966b36288b145e399d367883bfc44ce807/mall-admin/pom.xml",
    "raw_url": "https://github.com/Problemes/mall/raw/10163c966b36288b145e399d367883bfc44ce807/mall-admin/pom.xml",
    "contents_url": "https://api.github.com/repos/Problemes/mall/contents/mall-admin/pom.xml?ref=10163c966b36288b145e399d367883bfc44ce807",
    "patch": "@@ -29,10 +29,6 @@\n             <groupId>com.aliyun.oss</groupId>\n             <artifactId>aliyun-sdk-oss</artifactId>\n         </dependency>\n-        <dependency>\n-            <groupId>net.logstash.logback</groupId>\n-            <artifactId>logstash-logback-encoder</artifactId>\n-        </dependency>\n         <dependency>\n             <groupId>io.minio</groupId>\n             <artifactId>minio</artifactId>\n@@ -44,34 +40,10 @@\n                 <groupId>org.springframework.boot</groupId>\n                 <artifactId>spring-boot-maven-plugin</artifactId>\n             </plugin>\n-            <!--<plugin>-->\n-                <!--<groupId>com.spotify</groupId>-->\n-                <!--<artifactId>docker-maven-plugin</artifactId>-->\n-                <!--<version>${docker.maven.plugin.version}</version>-->\n-                <!--<executions>-->\n-                    <!--<execution>-->\n-                        <!--<id>build-image</id>-->\n-                        <!--<phase>package</phase>-->\n-                        <!--<goals>-->\n-                            <!--<goal>build</goal>-->\n-                        <!--</goals>-->\n-                    <!--</execution>-->\n-                <!--</executions>-->\n-                <!--<configuration>-->\n-                    <!--<imageName>mall/${project.artifactId}:${project.version}</imageName>-->\n-                    <!--<dockerHost>${docker.host}</dockerHost>-->\n-                    <!--<baseImage>java:8</baseImage>-->\n-                    <!--<entryPoint>[\"java\", \"-jar\", \"-Dspring.profiles.active=prod\",\"/${project.build.finalName}.jar\"]-->\n-                    <!--</entryPoint>-->\n-                    <!--<resources>-->\n-                        <!--<resource>-->\n-                            <!--<targetPath>/</targetPath>-->\n-                            <!--<directory>${project.build.directory}</directory>-->\n-                            <!--<include>${project.build.finalName}.jar</include>-->\n-                        <!--</resource>-->\n-                    <!--</resources>-->\n-                <!--</configuration>-->\n-            <!--</plugin>-->\n+            <plugin>\n+                <groupId>com.spotify</groupId>\n+                <artifactId>docker-maven-plugin</artifactId>\n+            </plugin>\n         </plugins>\n     </build>\n </project>"
  },
  {
    "sha": "a46ab682e9661539cc29cb447a1cc457a04e3f22",
    "filename": "mall-admin/src/main/java/com/macro/mall/bo/AdminUserDetails.java",
    "status": "modified",
    "additions": 7,
    "deletions": 8,
    "changes": 15,
    "blob_url": "https://github.com/Problemes/mall/blob/10163c966b36288b145e399d367883bfc44ce807/mall-admin/src/main/java/com/macro/mall/bo/AdminUserDetails.java",
    "raw_url": "https://github.com/Problemes/mall/raw/10163c966b36288b145e399d367883bfc44ce807/mall-admin/src/main/java/com/macro/mall/bo/AdminUserDetails.java",
    "contents_url": "https://api.github.com/repos/Problemes/mall/contents/mall-admin/src/main/java/com/macro/mall/bo/AdminUserDetails.java?ref=10163c966b36288b145e399d367883bfc44ce807",
    "patch": "@@ -1,7 +1,7 @@\n package com.macro.mall.bo;\n \n import com.macro.mall.model.UmsAdmin;\n-import com.macro.mall.model.UmsPermission;\n+import com.macro.mall.model.UmsResource;\n import org.springframework.security.core.GrantedAuthority;\n import org.springframework.security.core.authority.SimpleGrantedAuthority;\n import org.springframework.security.core.userdetails.UserDetails;\n@@ -16,18 +16,17 @@\n  */\n public class AdminUserDetails implements UserDetails {\n     private UmsAdmin umsAdmin;\n-    private List<UmsPermission> permissionList;\n-    public AdminUserDetails(UmsAdmin umsAdmin,List<UmsPermission> permissionList) {\n+    private List<UmsResource> resourceList;\n+    public AdminUserDetails(UmsAdmin umsAdmin,List<UmsResource> resourceList) {\n         this.umsAdmin = umsAdmin;\n-        this.permissionList = permissionList;\n+        this.resourceList = resourceList;\n     }\n \n     @Override\n     public Collection<? extends GrantedAuthority> getAuthorities() {\n-        //返回当前用户的权限\n-        return permissionList.stream()\n-                .filter(permission -> permission.getValue()!=null)\n-                .map(permission ->new SimpleGrantedAuthority(permission.getValue()))\n+        //返回当前用户的角色\n+        return resourceList.stream()\n+                .map(role ->new SimpleGrantedAuthority(role.getId()+\":\"+role.getName()))\n                 .collect(Collectors.toList());\n     }\n "
  },
  {
    "sha": "98c51dd6d971e3c98c28a28dc28642e8fccb955c",
    "filename": "mall-admin/src/main/java/com/macro/mall/bo/WebLog.java",
    "status": "removed",
    "additions": 0,
    "deletions": 144,
    "changes": 144,
    "blob_url": "https://github.com/Problemes/mall/blob/47ec2f0a2b4420c81c7ebdba5be6c13bdcfcf3f7/mall-admin/src/main/java/com/macro/mall/bo/WebLog.java",
    "raw_url": "https://github.com/Problemes/mall/raw/47ec2f0a2b4420c81c7ebdba5be6c13bdcfcf3f7/mall-admin/src/main/java/com/macro/mall/bo/WebLog.java",
    "contents_url": "https://api.github.com/repos/Problemes/mall/contents/mall-admin/src/main/java/com/macro/mall/bo/WebLog.java?ref=47ec2f0a2b4420c81c7ebdba5be6c13bdcfcf3f7",
    "patch": "@@ -1,144 +0,0 @@\n-package com.macro.mall.bo;\n-\n-/**\n- * Controller层的日志封装类\n- * Created by macro on 2018/4/26.\n- */\n-public class WebLog {\n-    /**\n-     * 操作描述\n-     */\n-    private String description;\n-\n-    /**\n-     * 操作用户\n-     */\n-    private String username;\n-\n-    /**\n-     * 操作时间\n-     */\n-    private Long startTime;\n-\n-    /**\n-     * 消耗时间\n-     */\n-    private Integer spendTime;\n-\n-    /**\n-     * 根路径\n-     */\n-    private String basePath;\n-\n-    /**\n-     * URI\n-     */\n-    private String uri;\n-\n-    /**\n-     * URL\n-     */\n-    private String url;\n-\n-    /**\n-     * 请求类型\n-     */\n-    private String method;\n-\n-    /**\n-     * IP地址\n-     */\n-    private String ip;\n-\n-    private Object parameter;\n-\n-    private Object result;\n-\n-    public String getDescription() {\n-        return description;\n-    }\n-\n-    public void setDescription(String description) {\n-        this.description = description;\n-    }\n-\n-    public String getUsername() {\n-        return username;\n-    }\n-\n-    public void setUsername(String username) {\n-        this.username = username;\n-    }\n-\n-    public Long getStartTime() {\n-        return startTime;\n-    }\n-\n-    public void setStartTime(Long startTime) {\n-        this.startTime = startTime;\n-    }\n-\n-    public Integer getSpendTime() {\n-        return spendTime;\n-    }\n-\n-    public void setSpendTime(Integer spendTime) {\n-        this.spendTime = spendTime;\n-    }\n-\n-    public String getBasePath() {\n-        return basePath;\n-    }\n-\n-    public void setBasePath(String basePath) {\n-        this.basePath = basePath;\n-    }\n-\n-    public String getUri() {\n-        return uri;\n-    }\n-\n-    public void setUri(String uri) {\n-        this.uri = uri;\n-    }\n-\n-    public String getUrl() {\n-        return url;\n-    }\n-\n-    public void setUrl(String url) {\n-        this.url = url;\n-    }\n-\n-    public String getMethod() {\n-        return method;\n-    }\n-\n-    public void setMethod(String method) {\n-        this.method = method;\n-    }\n-\n-    public String getIp() {\n-        return ip;\n-    }\n-\n-    public void setIp(String ip) {\n-        this.ip = ip;\n-    }\n-\n-    public Object getParameter() {\n-        return parameter;\n-    }\n-\n-    public void setParameter(Object parameter) {\n-        this.parameter = parameter;\n-    }\n-\n-    public Object getResult() {\n-        return result;\n-    }\n-\n-    public void setResult(Object result) {\n-        this.result = result;\n-    }\n-}"
  },
  {
    "sha": "f7fb2b32dbad2d2308491c4505fd3458e7c22b49",
    "filename": "mall-admin/src/main/java/com/macro/mall/component/BindingResultAspect.java",
    "status": "removed",
    "additions": 0,
    "deletions": 43,
    "changes": 43,
    "blob_url": "https://github.com/Problemes/mall/blob/47ec2f0a2b4420c81c7ebdba5be6c13bdcfcf3f7/mall-admin/src/main/java/com/macro/mall/component/BindingResultAspect.java",
    "raw_url": "https://github.com/Problemes/mall/raw/47ec2f0a2b4420c81c7ebdba5be6c13bdcfcf3f7/mall-admin/src/main/java/com/macro/mall/component/BindingResultAspect.java",
    "contents_url": "https://api.github.com/repos/Problemes/mall/contents/mall-admin/src/main/java/com/macro/mall/component/BindingResultAspect.java?ref=47ec2f0a2b4420c81c7ebdba5be6c13bdcfcf3f7",
    "patch": "@@ -1,43 +0,0 @@\n-package com.macro.mall.component;\n-\n-import com.macro.mall.common.api.CommonResult;\n-import org.aspectj.lang.ProceedingJoinPoint;\n-import org.aspectj.lang.annotation.Around;\n-import org.aspectj.lang.annotation.Aspect;\n-import org.aspectj.lang.annotation.Pointcut;\n-import org.springframework.core.annotation.Order;\n-import org.springframework.stereotype.Component;\n-import org.springframework.validation.BindingResult;\n-import org.springframework.validation.FieldError;\n-\n-/**\n- * HibernateValidator错误结果处理切面\n- * Created by macro on 2018/4/26.\n- */\n-@Aspect\n-@Component\n-@Order(2)\n-public class BindingResultAspect {\n-    @Pointcut(\"execution(public * com.macro.mall.controller.*.*(..))\")\n-    public void BindingResult() {\n-    }\n-\n-    @Around(\"BindingResult()\")\n-    public Object doAround(ProceedingJoinPoint joinPoint) throws Throwable {\n-        Object[] args = joinPoint.getArgs();\n-        for (Object arg : args) {\n-            if (arg instanceof BindingResult) {\n-                BindingResult result = (BindingResult) arg;\n-                if (result.hasErrors()) {\n-                    FieldError fieldError = result.getFieldError();\n-                    if(fieldError!=null){\n-                        return CommonResult.validateFailed(fieldError.getDefaultMessage());\n-                    }else{\n-                        return CommonResult.validateFailed();\n-                    }\n-                }\n-            }\n-        }\n-        return joinPoint.proceed();\n-    }\n-}"
  },
  {
    "sha": "12706d9caf61bb424f308000b54c68ca811370ae",
    "filename": "mall-admin/src/main/java/com/macro/mall/config/MallSecurityConfig.java",
    "status": "modified",
    "additions": 26,
    "deletions": 1,
    "changes": 27,
    "blob_url": "https://github.com/Problemes/mall/blob/10163c966b36288b145e399d367883bfc44ce807/mall-admin/src/main/java/com/macro/mall/config/MallSecurityConfig.java",
    "raw_url": "https://github.com/Problemes/mall/raw/10163c966b36288b145e399d367883bfc44ce807/mall-admin/src/main/java/com/macro/mall/config/MallSecurityConfig.java",
    "contents_url": "https://api.github.com/repos/Problemes/mall/contents/mall-admin/src/main/java/com/macro/mall/config/MallSecurityConfig.java?ref=10163c966b36288b145e399d367883bfc44ce807",
    "patch": "@@ -1,29 +1,54 @@\n package com.macro.mall.config;\n \n+import com.macro.mall.model.UmsResource;\n+import com.macro.mall.security.component.DynamicSecurityService;\n import com.macro.mall.security.config.SecurityConfig;\n import com.macro.mall.service.UmsAdminService;\n+import com.macro.mall.service.UmsResourceService;\n import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.context.annotation.Bean;\n import org.springframework.context.annotation.Configuration;\n+import org.springframework.security.access.ConfigAttribute;\n import org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\n import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\n import org.springframework.security.core.userdetails.UserDetailsService;\n \n+import java.util.List;\n+import java.util.Map;\n+import java.util.concurrent.ConcurrentHashMap;\n+\n /**\n  * mall-security模块相关配置\n  * Created by macro on 2019/11/9.\n  */\n @Configuration\n @EnableWebSecurity\n-@EnableGlobalMethodSecurity(prePostEnabled=true)\n+@EnableGlobalMethodSecurity(prePostEnabled = true)\n public class MallSecurityConfig extends SecurityConfig {\n \n     @Autowired\n     private UmsAdminService adminService;\n+    @Autowired\n+    private UmsResourceService resourceService;\n \n     @Bean\n     public UserDetailsService userDetailsService() {\n         //获取登录用户信息\n         return username -> adminService.loadUserByUsername(username);\n     }\n+\n+    @Bean\n+    public DynamicSecurityService dynamicSecurityService() {\n+        return new DynamicSecurityService() {\n+            @Override\n+            public Map<String, ConfigAttribute> loadDataSource() {\n+                Map<String, ConfigAttribute> map = new ConcurrentHashMap<>();\n+                List<UmsResource> resourceList = resourceService.listAll();\n+                for (UmsResource resource : resourceList) {\n+                    map.put(resource.getUrl(), new org.springframework.security.access.SecurityConfig(resource.getId() + \":\" + resource.getName()));\n+                }\n+                return map;\n+            }\n+        };\n+    }\n }"
  },
  {
    "sha": "11642560a6be6a52ecb4bdfe55067f1e8539a558",
    "filename": "mall-admin/src/main/java/com/macro/mall/config/MyBatisConfig.java",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/Problemes/mall/blob/10163c966b36288b145e399d367883bfc44ce807/mall-admin/src/main/java/com/macro/mall/config/MyBatisConfig.java",
    "raw_url": "https://github.com/Problemes/mall/raw/10163c966b36288b145e399d367883bfc44ce807/mall-admin/src/main/java/com/macro/mall/config/MyBatisConfig.java",
    "contents_url": "https://api.github.com/repos/Problemes/mall/contents/mall-admin/src/main/java/com/macro/mall/config/MyBatisConfig.java?ref=10163c966b36288b145e399d367883bfc44ce807",
    "patch": "@@ -5,7 +5,7 @@\n import org.springframework.transaction.annotation.EnableTransactionManagement;\n \n /**\n- * MyBatis配置类\n+ * MyBatis相关配置\n  * Created by macro on 2019/4/8.\n  */\n @Configuration"
  },
  {
    "sha": "9f7da2a3650a5092d40c6214672b7f575a1214a6",
    "filename": "mall-admin/src/main/java/com/macro/mall/config/OssConfig.java",
    "status": "modified",
    "additions": 1,
    "deletions": 0,
    "changes": 1,
    "blob_url": "https://github.com/Problemes/mall/blob/10163c966b36288b145e399d367883bfc44ce807/mall-admin/src/main/java/com/macro/mall/config/OssConfig.java",
    "raw_url": "https://github.com/Problemes/mall/raw/10163c966b36288b145e399d367883bfc44ce807/mall-admin/src/main/java/com/macro/mall/config/OssConfig.java",
    "contents_url": "https://api.github.com/repos/Problemes/mall/contents/mall-admin/src/main/java/com/macro/mall/config/OssConfig.java?ref=10163c966b36288b145e399d367883bfc44ce807",
    "patch": "@@ -6,6 +6,7 @@\n import org.springframework.context.annotation.Configuration;\n \n /**\n+ * OSS对象存储相关配置\n  * Created by macro on 2018/5/17.\n  */\n @Configuration"
  },
  {
    "sha": "a3da046da6832dc3ce6de42bacf01b7dfaf45eee",
    "filename": "mall-admin/src/main/java/com/macro/mall/config/Swagger2Config.java",
    "status": "removed",
    "additions": 0,
    "deletions": 80,
    "changes": 80,
    "blob_url": "https://github.com/Problemes/mall/blob/47ec2f0a2b4420c81c7ebdba5be6c13bdcfcf3f7/mall-admin/src/main/java/com/macro/mall/config/Swagger2Config.java",
    "raw_url": "https://github.com/Problemes/mall/raw/47ec2f0a2b4420c81c7ebdba5be6c13bdcfcf3f7/mall-admin/src/main/java/com/macro/mall/config/Swagger2Config.java",
    "contents_url": "https://api.github.com/repos/Problemes/mall/contents/mall-admin/src/main/java/com/macro/mall/config/Swagger2Config.java?ref=47ec2f0a2b4420c81c7ebdba5be6c13bdcfcf3f7",
    "patch": "@@ -1,80 +0,0 @@\n-package com.macro.mall.config;\n-\n-import org.springframework.context.annotation.Bean;\n-import org.springframework.context.annotation.Configuration;\n-import springfox.documentation.builders.ApiInfoBuilder;\n-import springfox.documentation.builders.PathSelectors;\n-import springfox.documentation.builders.RequestHandlerSelectors;\n-import springfox.documentation.service.ApiInfo;\n-import springfox.documentation.service.ApiKey;\n-import springfox.documentation.service.AuthorizationScope;\n-import springfox.documentation.service.SecurityReference;\n-import springfox.documentation.spi.DocumentationType;\n-import springfox.documentation.spi.service.contexts.SecurityContext;\n-import springfox.documentation.spring.web.plugins.Docket;\n-import springfox.documentation.swagger2.annotations.EnableSwagger2;\n-\n-import java.util.ArrayList;\n-import java.util.List;\n-\n-/**\n- * Swagger2API文档的配置\n- * Created by macro on 2018/4/26.\n- */\n-@Configuration\n-@EnableSwagger2\n-public class Swagger2Config {\n-    @Bean\n-    public Docket createRestApi(){\n-        return new Docket(DocumentationType.SWAGGER_2)\n-                .apiInfo(apiInfo())\n-                .select()\n-                .apis(RequestHandlerSelectors.basePackage(\"com.macro.mall.controller\"))\n-                .paths(PathSelectors.any())\n-                .build()\n-                .securitySchemes(securitySchemes())\n-                .securityContexts(securityContexts());\n-    }\n-\n-    private ApiInfo apiInfo() {\n-        return new ApiInfoBuilder()\n-                .title(\"mall后台系统\")\n-                .description(\"mall后台模块\")\n-                .contact(\"macro\")\n-                .version(\"1.0\")\n-                .build();\n-    }\n-\n-    private List<ApiKey> securitySchemes() {\n-        //设置请求头信息\n-        List<ApiKey> result = new ArrayList<>();\n-        ApiKey apiKey = new ApiKey(\"Authorization\", \"Authorization\", \"header\");\n-        result.add(apiKey);\n-        return result;\n-    }\n-\n-    private List<SecurityContext> securityContexts() {\n-        //设置需要登录认证的路径\n-        List<SecurityContext> result = new ArrayList<>();\n-        result.add(getContextByPath(\"/brand/.*\"));\n-        result.add(getContextByPath(\"/product/.*\"));\n-        result.add(getContextByPath(\"/productCategory/.*\"));\n-        return result;\n-    }\n-\n-    private SecurityContext getContextByPath(String pathRegex){\n-        return SecurityContext.builder()\n-                .securityReferences(defaultAuth())\n-                .forPaths(PathSelectors.regex(pathRegex))\n-                .build();\n-    }\n-\n-    private List<SecurityReference> defaultAuth() {\n-        List<SecurityReference> result = new ArrayList<>();\n-        AuthorizationScope authorizationScope = new AuthorizationScope(\"global\", \"accessEverything\");\n-        AuthorizationScope[] authorizationScopes = new AuthorizationScope[1];\n-        authorizationScopes[0] = authorizationScope;\n-        result.add(new SecurityReference(\"Authorization\", authorizationScopes));\n-        return result;\n-    }\n-}"
  },
  {
    "sha": "5b5d324ab14984a1d85c831a30c369a8de7276ad",
    "filename": "mall-admin/src/main/java/com/macro/mall/config/SwaggerConfig.java",
    "status": "added",
    "additions": 27,
    "deletions": 0,
    "changes": 27,
    "blob_url": "https://github.com/Problemes/mall/blob/10163c966b36288b145e399d367883bfc44ce807/mall-admin/src/main/java/com/macro/mall/config/SwaggerConfig.java",
    "raw_url": "https://github.com/Problemes/mall/raw/10163c966b36288b145e399d367883bfc44ce807/mall-admin/src/main/java/com/macro/mall/config/SwaggerConfig.java",
    "contents_url": "https://api.github.com/repos/Problemes/mall/contents/mall-admin/src/main/java/com/macro/mall/config/SwaggerConfig.java?ref=10163c966b36288b145e399d367883bfc44ce807",
    "patch": "@@ -0,0 +1,27 @@\n+package com.macro.mall.config;\n+\n+import com.macro.mall.common.config.BaseSwaggerConfig;\n+import com.macro.mall.common.domain.SwaggerProperties;\n+import org.springframework.context.annotation.Configuration;\n+import springfox.documentation.swagger2.annotations.EnableSwagger2;\n+\n+/**\n+ * Swagger API文档相关配置\n+ * Created by macro on 2018/4/26.\n+ */\n+@Configuration\n+@EnableSwagger2\n+public class SwaggerConfig extends BaseSwaggerConfig {\n+\n+    @Override\n+    public SwaggerProperties swaggerProperties() {\n+        return SwaggerProperties.builder()\n+                .apiBasePackage(\"com.macro.mall.controller\")\n+                .title(\"mall后台系统\")\n+                .description(\"mall后台相关接口文档\")\n+                .contactName(\"macro\")\n+                .version(\"1.0\")\n+                .enableSecurity(true)\n+                .build();\n+    }\n+}"
  },
  {
    "sha": "d36e6947cc9d5f3b270643cae439b9518c66a726",
    "filename": "mall-admin/src/main/java/com/macro/mall/controller/CmsSubjectController.java",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/Problemes/mall/blob/10163c966b36288b145e399d367883bfc44ce807/mall-admin/src/main/java/com/macro/mall/controller/CmsSubjectController.java",
    "raw_url": "https://github.com/Problemes/mall/raw/10163c966b36288b145e399d367883bfc44ce807/mall-admin/src/main/java/com/macro/mall/controller/CmsSubjectController.java",
    "contents_url": "https://api.github.com/repos/Problemes/mall/contents/mall-admin/src/main/java/com/macro/mall/controller/CmsSubjectController.java?ref=10163c966b36288b145e399d367883bfc44ce807",
    "patch": "@@ -16,7 +16,7 @@\n import java.util.List;\n \n /**\n- * 商品专题Controller\n+ * 商品专题管理Controller\n  * Created by macro on 2018/6/1.\n  */\n @Controller"
  },
  {
    "sha": "6d7a404c7961a7e3118685f850c4a12d7116bb1e",
    "filename": "mall-admin/src/main/java/com/macro/mall/controller/MinioController.java",
    "status": "modified",
    "additions": 42,
    "deletions": 9,
    "changes": 51,
    "blob_url": "https://github.com/Problemes/mall/blob/10163c966b36288b145e399d367883bfc44ce807/mall-admin/src/main/java/com/macro/mall/controller/MinioController.java",
    "raw_url": "https://github.com/Problemes/mall/raw/10163c966b36288b145e399d367883bfc44ce807/mall-admin/src/main/java/com/macro/mall/controller/MinioController.java",
    "contents_url": "https://api.github.com/repos/Problemes/mall/contents/mall-admin/src/main/java/com/macro/mall/controller/MinioController.java?ref=10163c966b36288b145e399d367883bfc44ce807",
    "patch": "@@ -1,9 +1,12 @@\n package com.macro.mall.controller;\n \n+import cn.hutool.core.collection.CollUtil;\n+import cn.hutool.core.util.ArrayUtil;\n+import cn.hutool.json.JSONUtil;\n import com.macro.mall.common.api.CommonResult;\n+import com.macro.mall.dto.BucketPolicyConfigDto;\n import com.macro.mall.dto.MinioUploadDto;\n-import io.minio.MinioClient;\n-import io.minio.policy.PolicyType;\n+import io.minio.*;\n import io.swagger.annotations.Api;\n import io.swagger.annotations.ApiOperation;\n import org.slf4j.Logger;\n@@ -20,6 +23,7 @@\n import java.util.Date;\n \n /**\n+ * MinIO对象存储管理Controller\n  * Created by macro on 2019/12/25.\n  */\n @Api(tags = \"MinioController\", description = \"MinIO对象存储管理\")\n@@ -43,39 +47,68 @@\n     public CommonResult upload(@RequestParam(\"file\") MultipartFile file) {\n         try {\n             //创建一个MinIO的Java客户端\n-            MinioClient minioClient = new MinioClient(ENDPOINT, ACCESS_KEY, SECRET_KEY);\n-            boolean isExist = minioClient.bucketExists(BUCKET_NAME);\n+            MinioClient minioClient =MinioClient.builder()\n+                    .endpoint(ENDPOINT)\n+                    .credentials(ACCESS_KEY,SECRET_KEY)\n+                    .build();\n+            boolean isExist = minioClient.bucketExists(BucketExistsArgs.builder().bucket(BUCKET_NAME).build());\n             if (isExist) {\n                 LOGGER.info(\"存储桶已经存在！\");\n             } else {\n                 //创建存储桶并设置只读权限\n-                minioClient.makeBucket(BUCKET_NAME);\n-                minioClient.setBucketPolicy(BUCKET_NAME, \"*.*\", PolicyType.READ_ONLY);\n+                minioClient.makeBucket(MakeBucketArgs.builder().bucket(BUCKET_NAME).build());\n+                BucketPolicyConfigDto bucketPolicyConfigDto = createBucketPolicyConfigDto(BUCKET_NAME);\n+                SetBucketPolicyArgs setBucketPolicyArgs = SetBucketPolicyArgs.builder()\n+                        .bucket(BUCKET_NAME)\n+                        .config(JSONUtil.toJsonStr(bucketPolicyConfigDto))\n+                        .build();\n+                minioClient.setBucketPolicy(setBucketPolicyArgs);\n             }\n             String filename = file.getOriginalFilename();\n             SimpleDateFormat sdf = new SimpleDateFormat(\"yyyyMMdd\");\n             // 设置存储对象名称\n             String objectName = sdf.format(new Date()) + \"/\" + filename;\n             // 使用putObject上传一个文件到存储桶中\n-            minioClient.putObject(BUCKET_NAME, objectName, file.getInputStream(), file.getContentType());\n+            PutObjectArgs putObjectArgs = PutObjectArgs.builder()\n+                    .bucket(BUCKET_NAME)\n+                    .object(objectName)\n+                    .contentType(file.getContentType())\n+                    .stream(file.getInputStream(), file.getSize(), ObjectWriteArgs.MIN_MULTIPART_SIZE).build();\n+            minioClient.putObject(putObjectArgs);\n             LOGGER.info(\"文件上传成功!\");\n             MinioUploadDto minioUploadDto = new MinioUploadDto();\n             minioUploadDto.setName(filename);\n             minioUploadDto.setUrl(ENDPOINT + \"/\" + BUCKET_NAME + \"/\" + objectName);\n             return CommonResult.success(minioUploadDto);\n         } catch (Exception e) {\n+            e.printStackTrace();\n             LOGGER.info(\"上传发生错误: {}！\", e.getMessage());\n         }\n         return CommonResult.failed();\n     }\n \n+    private BucketPolicyConfigDto createBucketPolicyConfigDto(String bucketName) {\n+        BucketPolicyConfigDto.Statement statement = BucketPolicyConfigDto.Statement.builder()\n+                .Effect(\"Allow\")\n+                .Principal(\"*\")\n+                .Action(\"s3:GetObject\")\n+                .Resource(\"arn:aws:s3:::\"+bucketName+\"/*.**\").build();\n+        return BucketPolicyConfigDto.builder()\n+                .Version(\"2012-10-17\")\n+                .Statement(CollUtil.toList(statement))\n+                .build();\n+    }\n+\n     @ApiOperation(\"文件删除\")\n     @RequestMapping(value = \"/delete\", method = RequestMethod.POST)\n     @ResponseBody\n     public CommonResult delete(@RequestParam(\"objectName\") String objectName) {\n         try {\n-            MinioClient minioClient = new MinioClient(ENDPOINT, ACCESS_KEY, SECRET_KEY);\n-            minioClient.removeObject(BUCKET_NAME, objectName);\n+            MinioClient minioClient = MinioClient.builder()\n+                    .endpoint(ENDPOINT)\n+                    .credentials(ACCESS_KEY,SECRET_KEY)\n+                    .build();\n+            minioClient.removeObject(RemoveObjectArgs.builder().bucket(BUCKET_NAME).object(objectName).build());\n             return CommonResult.success(null);\n         } catch (Exception e) {\n             e.printStackTrace();"
  },
  {
    "sha": "cf2bf8c39569d731d45d71443c39c775206afcd0",
    "filename": "mall-admin/src/main/java/com/macro/mall/controller/OmsOrderController.java",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/Problemes/mall/blob/10163c966b36288b145e399d367883bfc44ce807/mall-admin/src/main/java/com/macro/mall/controller/OmsOrderController.java",
    "raw_url": "https://github.com/Problemes/mall/raw/10163c966b36288b145e399d367883bfc44ce807/mall-admin/src/main/java/com/macro/mall/controller/OmsOrderController.java",
    "contents_url": "https://api.github.com/repos/Problemes/mall/contents/mall-admin/src/main/java/com/macro/mall/controller/OmsOrderController.java?ref=10163c966b36288b145e399d367883bfc44ce807",
    "patch": "@@ -67,7 +67,7 @@ public CommonResult delete(@RequestParam(\"ids\") List<Long> ids) {\n         return CommonResult.failed();\n     }\n \n-    @ApiOperation(\"获取订单详情:订单信息、商品信息、操作记录\")\n+    @ApiOperation(\"获取订单详情：订单信息、商品信息、操作记录\")\n     @RequestMapping(value = \"/{id}\", method = RequestMethod.GET)\n     @ResponseBody\n     public CommonResult<OmsOrderDetail> detail(@PathVariable Long id) {"
  },
  {
    "sha": "ce531eb39c690a0b9c3171d76c14595c174099c4",
    "filename": "mall-admin/src/main/java/com/macro/mall/controller/OmsOrderReturnApplyController.java",
    "status": "modified",
    "additions": 3,
    "deletions": 3,
    "changes": 6,
    "blob_url": "https://github.com/Problemes/mall/blob/10163c966b36288b145e399d367883bfc44ce807/mall-admin/src/main/java/com/macro/mall/controller/OmsOrderReturnApplyController.java",
    "raw_url": "https://github.com/Problemes/mall/raw/10163c966b36288b145e399d367883bfc44ce807/mall-admin/src/main/java/com/macro/mall/controller/OmsOrderReturnApplyController.java",
    "contents_url": "https://api.github.com/repos/Problemes/mall/contents/mall-admin/src/main/java/com/macro/mall/controller/OmsOrderReturnApplyController.java?ref=10163c966b36288b145e399d367883bfc44ce807",
    "patch": "@@ -16,7 +16,7 @@\n import java.util.List;\n \n /**\n- * 订单退货申请管理\n+ * 订单退货申请管理Controller\n  * Created by macro on 2018/10/18.\n  */\n @Controller\n@@ -36,7 +36,7 @@\n         return CommonResult.success(CommonPage.restPage(returnApplyList));\n     }\n \n-    @ApiOperation(\"批量删除申请\")\n+    @ApiOperation(\"批量删除退货申请\")\n     @RequestMapping(value = \"/delete\", method = RequestMethod.POST)\n     @ResponseBody\n     public CommonResult delete(@RequestParam(\"ids\") List<Long> ids) {\n@@ -55,7 +55,7 @@ public CommonResult getItem(@PathVariable Long id) {\n         return CommonResult.success(result);\n     }\n \n-    @ApiOperation(\"修改申请状态\")\n+    @ApiOperation(\"修改退货申请状态\")\n     @RequestMapping(value = \"/update/status/{id}\", method = RequestMethod.POST)\n     @ResponseBody\n     public CommonResult updateStatus(@PathVariable Long id, @RequestBody OmsUpdateStatusParam statusParam) {"
  }
]
