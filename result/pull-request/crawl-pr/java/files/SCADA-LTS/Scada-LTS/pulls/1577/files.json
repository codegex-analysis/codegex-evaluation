[
  {
    "sha": "22097fa86c4c0aa0c097fac7bae3c5875683dfba",
    "filename": ".github/workflows/build.yml",
    "status": "added",
    "additions": 108,
    "deletions": 0,
    "changes": 108,
    "blob_url": "https://github.com/SCADA-LTS/Scada-LTS/blob/179479d7745a1570a3d5efdd11216779edd93261/.github/workflows/build.yml",
    "raw_url": "https://github.com/SCADA-LTS/Scada-LTS/raw/179479d7745a1570a3d5efdd11216779edd93261/.github/workflows/build.yml",
    "contents_url": "https://api.github.com/repos/SCADA-LTS/Scada-LTS/contents/.github/workflows/build.yml?ref=179479d7745a1570a3d5efdd11216779edd93261",
    "patch": "@@ -0,0 +1,108 @@\n+name: Simple Scada-LTS workflow\n+on:\n+  pull_request:\n+    types: [opened, synchronize, reopened]\n+jobs:\n+  compile:\n+    name: Compile and Test Scada-LTS application\n+    runs-on: ubuntu-latest\n+    env:\n+      CATALINA_HOME: /home/runner/tomcat/apache-tomcat-7.0.85\n+    steps:\n+      - uses: actions/checkout@v2\n+        with:\n+          fetch-depth: 0\n+      - name: Set up JDK\n+        uses: actions/setup-java@v1\n+        with:\n+          java-version: 11\n+      - name: Install Tomcat\n+        run: mkdir /home/runner/tomcat; cd /home/runner/tomcat; wget https://archive.apache.org/dist/tomcat/tomcat-7/v7.0.85/bin/apache-tomcat-7.0.85.tar.gz; tar xvzf apache-tomcat-7.0.85.tar.gz\n+      - name: Show Tomcat\n+        run: ls $CATALINA_HOME\n+      - name: Cache Tomcat\n+        uses: actions/cache@v2\n+        with:\n+          key: ${{ runner.os }}-tomcat-${{ github.run_id }}\n+          path: /home/runner/tomcat\n+      - name: Build Scada Application with Ant\n+        run: ant -noinput -buildfile build.xml build-project\n+      - name: JUnit Scada Application with Ant\n+        run: ant -noinput -buildfile build.xml junit\n+      - name: Cache Scada-LTS application\n+        uses: actions/cache@v2\n+        with:\n+          key: ${{ runner.os }}-slts-${{ github.run_id }}\n+          path: ./build/\n+\n+  buildui:\n+    name: Test and Build Scada-LTS new User Interface\n+    runs-on: ubuntu-latest\n+    steps:\n+      - uses: actions/checkout@v2\n+      - name: Use Node.js\n+        uses: actions/setup-node@v1\n+        with:\n+          node-version: 12.x\n+      - name: Cache node modules\n+        uses: actions/cache@v2\n+        with:\n+          path: ~/.npm\n+          key: ${{ runner.os }}-node-${{ github.run_id }}\n+      - name: Install dependencies\n+        working-directory: ./scadalts-ui\n+        run: npm install\n+#      - name: Run Frontend UnitTests\n+#        working-directory: ./scadalts-ui\n+#        run: npm run-script test:unit\n+      - name: Prepare Application Vairables\n+        working-directory: ./scadalts-ui\n+        run: npm run-script build-config -- 2.6.0 $GITHUB_RUN_ID $GITHUB_HEAD_REF $GITHUB_SHA $GITHUB_ACTOR $GITHUB_BASE_REF\n+      - name: Build User Interface\n+        working-directory: ./scadalts-ui\n+        run: npm run-script build\n+      - name: Cache Frontend\n+        uses: actions/cache@v2\n+        with:\n+          key: ${{ runner.os }}-frontend-${{ github.run_id }}\n+          path: ./scadalts-ui/dist\n+\n+  deploy:\n+    name: Deploy Scada-LTS application\n+    needs: [compile, buildui]\n+    runs-on: ubuntu-latest\n+    env:\n+      CATALINA_HOME: /home/runner/tomcat/apache-tomcat-7.0.85\n+    steps:\n+      - uses: actions/checkout@v2\n+        with:\n+          fetch-depth: 0\n+      - name: Set up JDK\n+        uses: actions/setup-java@v1\n+        with:\n+          java-version: 11\n+      - name: Load Cached node modules\n+        uses: actions/cache@v2\n+        with:\n+          path: ~/.npm\n+          key: ${{ runner.os }}-node-${{ github.run_id }}\n+      - name: Load Cached Scada-LTS application\n+        uses: actions/cache@v2\n+        with:\n+          key: ${{ runner.os }}-slts-${{ github.run_id }}\n+          path: ./build/\n+      - name: Load Cached Frontend\n+        uses: actions/cache@v2\n+        with:\n+          key: ${{ runner.os }}-frontend-${{ github.run_id }}\n+          path: ./scadalts-ui/dist\n+      - name: Install static web-dependencies\n+        working-directory: ./WebContent/resources\n+        run: npm install\n+      - name: Build Scada Application with Ant\n+        run: ant -noinput -buildfile build.xml just-war\n+      - name: Deploy WAR artifact\n+        uses: actions/upload-artifact@v2\n+        with:\n+          name: Scada-LTS\n+          path: ScadaBR.war\n\\ No newline at end of file"
  },
  {
    "sha": "6a98d7cde57c4a1918adbf443b21485e189517ee",
    "filename": ".github/workflows/main.yml",
    "status": "removed",
    "additions": 0,
    "deletions": 20,
    "changes": 20,
    "blob_url": "https://github.com/SCADA-LTS/Scada-LTS/blob/b763bfe3b7918ea1c4d4995f2075d27ee06f030e/.github/workflows/main.yml",
    "raw_url": "https://github.com/SCADA-LTS/Scada-LTS/raw/b763bfe3b7918ea1c4d4995f2075d27ee06f030e/.github/workflows/main.yml",
    "contents_url": "https://api.github.com/repos/SCADA-LTS/Scada-LTS/contents/.github/workflows/main.yml?ref=b763bfe3b7918ea1c4d4995f2075d27ee06f030e",
    "patch": "@@ -1,20 +0,0 @@\n-.github/workflows/build.ymlname: Build\n-on:\n-  push:\n-    branches:\n-      - master\n-  pull_request:\n-    types: [opened, synchronize, reopened]\n-jobs:\n-  sonarcloud:\n-    name: SonarCloud\n-    runs-on: ubuntu-latest\n-    steps:\n-      - uses: actions/checkout@v2\n-        with:\n-          fetch-depth: 0  # Shallow clones should be disabled for a better relevancy of analysis\n-      - name: SonarCloud Scan\n-        uses: SonarSource/sonarcloud-github-action@master\n-        env:\n-          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}  # Needed to get PR information, if any\n-          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}"
  },
  {
    "sha": "790b1a27c96d770c9512f0f8aa91516724a4e36a",
    "filename": "build.gradle",
    "status": "modified",
    "additions": 21,
    "deletions": 3,
    "changes": 24,
    "blob_url": "https://github.com/SCADA-LTS/Scada-LTS/blob/179479d7745a1570a3d5efdd11216779edd93261/build.gradle",
    "raw_url": "https://github.com/SCADA-LTS/Scada-LTS/raw/179479d7745a1570a3d5efdd11216779edd93261/build.gradle",
    "contents_url": "https://api.github.com/repos/SCADA-LTS/Scada-LTS/contents/build.gradle?ref=179479d7745a1570a3d5efdd11216779edd93261",
    "patch": "@@ -12,25 +12,43 @@\n plugins {\n     id 'war'\n     id 'java'\n+    id \"org.sonarqube\" version \"3.1.1\"\n+}\n+\n+sonarqube {\n+  properties {\n+    property \"sonar.projectKey\", \"SCADA-LTS_Scada-LTS\"\n+    property \"sonar.organization\", \"scada-lts\"\n+    property \"sonar.host.url\", \"https://sonarcloud.io\"\n+  }\n }\n \n sourceCompatibility = 1.11\n targetCompatibility = 1.11\n \n+\n // Environment variables to change\n subprojects {\n     ext {\n         buildUi = true\n     }\n }\n \n+ext {\n+    tomcatVersion = '8.5.61'\n+    webAppLibs = 'WebContent/WEB-INF/lib'\n+}\n+\n repositories {\n     jcenter()\n+    mavenCentral()\n }\n \n dependencies {\n-    compile fileTree(include: ['*.jar'], dir:'WebContent/WEB-INF/lib')\n-    compile fileTree(include: ['*.jar'], dir: System.getenv(\"CATALINA_HOME\") + '/lib')\n+    implementation fileTree(include: ['*.jar'], dir:\"$webAppLibs\")\n+    implementation \"org.apache.tomcat:tomcat-catalina:$tomcatVersion\"\n+    \n+//    providedCompile group: 'javax.servlet', name: 'javax.servlet-api'\n }\n sourceSets {\n     main {\n@@ -63,4 +81,4 @@ task copyWarToDocker(type: Copy, dependsOn: clearDockerDir) {\n task installWebDependency(type: Exec) {\n     workingDir \"./WebContent/resources\"\n     commandLine \"npm\", \"install\"\n-}\n\\ No newline at end of file\n+}"
  },
  {
    "sha": "d24b0608632a3ab450024165c3f53ad41e76cc9f",
    "filename": "build.xml",
    "status": "modified",
    "additions": 167,
    "deletions": 0,
    "changes": 167,
    "blob_url": "https://github.com/SCADA-LTS/Scada-LTS/blob/179479d7745a1570a3d5efdd11216779edd93261/build.xml",
    "raw_url": "https://github.com/SCADA-LTS/Scada-LTS/raw/179479d7745a1570a3d5efdd11216779edd93261/build.xml",
    "contents_url": "https://api.github.com/repos/SCADA-LTS/Scada-LTS/contents/build.xml?ref=179479d7745a1570a3d5efdd11216779edd93261",
    "patch": "@@ -491,6 +491,173 @@\n \t\t<record action=\"stop\" name=\"${war.log.name}\"/>\n \t</target>\n \n+\t<target name=\"just-war\" description=\"Bundles prepared resources of the application as a WAR file\">\n+\t\t<record action=\"start\" name=\"${war.log.name}\"/>\n+\t\t<property name=\"js-ui.dir\"  value=\"WebContent/resources/js-ui\"/>\n+\t\t<property name=\"src-js-ui.dir\" value=\"scadalts-ui/dist\"/>\n+\t\t<property name=\"web.classes.dir\"  value=\"WebContent/WEB-INF/classes\"/>\n+\n+\t\t<delete dir=\"${js-ui.dir}/app\"></delete>\n+\t\t<delete dir=\"${js-ui.dir}/views\"></delete>\n+\t\t<delete dir=\"${js-ui.dir}/pointHierarchy\"></delete>\n+\t\t<delete dir=\"${js-ui.dir}/ds\"></delete>\n+\t\t<delete dir=\"${js-ui.dir}/modernWatchList\"></delete>\n+\n+\n+\t\t<mkdir dir=\"${js-ui.dir}/app\"></mkdir>\n+\t\t<mkdir dir=\"${js-ui.dir}/app/js\"></mkdir>\n+\t\t<mkdir dir=\"${js-ui.dir}/app/css\"></mkdir>\n+\t\t<mkdir dir=\"${js-ui.dir}/app/fonts\"></mkdir>\n+\t\t<mkdir dir=\"${js-ui.dir}/views\"></mkdir>\n+\t\t<mkdir dir=\"${js-ui.dir}/views/js\"></mkdir>\n+\t\t<mkdir dir=\"${js-ui.dir}/views/css\"></mkdir>\n+\t\t<mkdir dir=\"${js-ui.dir}/pointHierarchy\"></mkdir>\n+\t\t<mkdir dir=\"${js-ui.dir}/pointHierarchy/js\"></mkdir>\n+\t\t<mkdir dir=\"${js-ui.dir}/pointHierarchy/css\"></mkdir>\n+\t\t<mkdir dir=\"${js-ui.dir}/ds\"></mkdir>\n+\t\t<mkdir dir=\"${js-ui.dir}/ds/js\"></mkdir>\n+\t\t<mkdir dir=\"${js-ui.dir}/ds/css\"></mkdir>\n+\t\t<mkdir dir=\"${js-ui.dir}/modernWatchList\"></mkdir>\n+\t\t<mkdir dir=\"${js-ui.dir}/modernWatchList/js\"></mkdir>\n+\t\t<mkdir dir=\"${js-ui.dir}/modernWatchList/css\"></mkdir>\n+\n+\t\t<!-- -->\n+\t\t<mkdir dir=\"${src-js-ui.dir}/css/\"></mkdir>\n+\t\t<mkdir dir=\"${src-js-ui.dir}/js/\"></mkdir>\n+\t\t<mkdir dir=\"${src-js-ui.dir}/fonts/\"></mkdir>\n+\n+\t\t<!-- copy content for app -->\n+\t\t<copy includeemptydirs=\"false\" todir=\"${js-ui.dir}/app/css\" taskname=\"copy app css\">\n+\t\t\t<fileset dir=\"${src-js-ui.dir}/css/\">\n+\t\t\t\t<include name=\"app.css\"/>\n+\t\t\t\t<include name=\"chunk-vendors.css\"/>\n+\t\t\t</fileset>\n+\t\t</copy>\n+\n+\t\t<copy includeemptydirs=\"false\" todir=\"${js-ui.dir}/app/js\" taskname=\"copy app.js\">\n+\t\t\t<fileset dir=\"${src-js-ui.dir}/js/\">\n+\t\t\t\t<include name=\"app.js\"/>\n+\t\t\t\t<include name=\"chunk-vendors.js\"/>\n+\t\t\t</fileset>\n+\t\t</copy>\n+\n+\t\t<copy includeemptydirs=\"false\" todir=\"${js-ui.dir}/app/fonts\" taskname=\"copy app.js\">\n+\t\t\t<fileset dir=\"${src-js-ui.dir}/fonts/\">\n+\t\t\t\t<include name=\"glyphicons-halflings-regular.eot\"/>\n+\t\t\t\t<include name=\"glyphicons-halflings-regular.ttf\"/>\n+\t\t\t\t<include name=\"glyphicons-halflings-regular.woff\"/>\n+\t\t\t\t<include name=\"glyphicons-halflings-regular.woff2\"/>\n+\t\t\t\t<include name=\"materialdesignicons-webfont.eot\"/>\n+\t\t\t\t<include name=\"materialdesignicons-webfont.ttf\"/>\n+\t\t\t\t<include name=\"materialdesignicons-webfont.woff\"/>\n+\t\t\t\t<include name=\"materialdesignicons-webfont.woff2\"/>\n+\t\t\t\t<include name=\"Roboto-Black.woff\"/>\n+\t\t\t\t<include name=\"Roboto-Black.woff2\"/>\n+\t\t\t\t<include name=\"Roboto-BlackItalic.woff\"/>\n+\t\t\t\t<include name=\"Roboto-BlackItalic.woff2\"/>\n+\t\t\t\t<include name=\"Roboto-Bold.woff\"/>\n+\t\t\t\t<include name=\"Roboto-Bold.woff2\"/>\n+\t\t\t\t<include name=\"Roboto-BoldItalic.woff\"/>\n+\t\t\t\t<include name=\"Roboto-BoldItalic.woff2\"/>\n+\t\t\t\t<include name=\"Roboto-Light.woff\"/>\n+\t\t\t\t<include name=\"Roboto-Light.woff2\"/>\n+\t\t\t\t<include name=\"Roboto-LightItalic.woff\"/>\n+\t\t\t\t<include name=\"Roboto-LightItalic.woff2\"/>\n+\t\t\t\t<include name=\"Roboto-Medium.woff\"/>\n+\t\t\t\t<include name=\"Roboto-Medium.woff2\"/>\n+\t\t\t\t<include name=\"Roboto-MediumItalic.woff\"/>\n+\t\t\t\t<include name=\"Roboto-MediumItalic.woff2\"/>\n+\t\t\t\t<include name=\"Roboto-Regular.woff\"/>\n+\t\t\t\t<include name=\"Roboto-Regular.woff2\"/>\n+\t\t\t\t<include name=\"Roboto-ReqularItalic.woff\"/>\n+\t\t\t\t<include name=\"Roboto-ReqularItalic.woff2\"/>\n+\t\t\t\t<include name=\"Roboto-Thin.woff\"/>\n+\t\t\t\t<include name=\"Roboto-Thin.woff2\"/>\n+\t\t\t\t<include name=\"Roboto-ThinItalic.woff\"/>\n+\t\t\t\t<include name=\"Roboto-ThinItalic.woff2\"/>\n+\t\t\t</fileset>\n+\t\t</copy>\n+\n+\t\t<!-- copy content for views -->\n+\t\t<copy includeemptydirs=\"false\" todir=\"${js-ui.dir}/views/css\" taskname=\"copy for views css\">\n+\t\t\t<fileset dir=\"${src-js-ui.dir}/css/\">\n+\t\t\t\t<include name=\"cmp-component.css\"/>\n+\t\t\t</fileset>\n+\t\t</copy>\n+\t\t<copy includeemptydirs=\"false\" todir=\"${js-ui.dir}/views/js\" taskname=\"copy for views js\">\n+\t\t\t<fileset dir=\"${src-js-ui.dir}/js/\">\n+\t\t\t\t<include name=\"cmp-component.js\"/>\n+\t\t\t\t<include name=\"isalive-component.js\"/>\n+\t\t\t\t<include name=\"simple-component-svg.js\"/>\n+\t\t\t\t<include name=\"test-component.js\"/>\n+\t\t\t</fileset>\n+\t\t</copy>\n+\n+\t\t<!-- copy content for ds (data source) -->\n+\t\t<copy includeemptydirs=\"false\" todir=\"${js-ui.dir}/ds/css\" taskname=\"copy for ds css\">\n+\t\t\t<fileset dir=\"${src-js-ui.dir}/css/\">\n+\t\t\t\t<include name=\"sleep-and-reactivation-ds-component.css\"/>\n+\t\t\t</fileset>\n+\t\t</copy>\n+\n+\t\t<copy includeemptydirs=\"false\" todir=\"${js-ui.dir}/ds/js\" taskname=\"copy for ds js\">\n+\t\t\t<fileset dir=\"${src-js-ui.dir}/js/\">\n+\t\t\t\t<include name=\"sleep-and-reactivation-ds-component.js\"/>\n+\t\t\t</fileset>\n+\t\t</copy>\n+\n+\t\t<!-- copy content for ph -->\n+\t\t<copy includeemptydirs=\"false\" todir=\"${js-ui.dir}/pointHierarchy/js\" taskname=\"copy for ph js\">\n+\t\t\t<fileset dir=\"${src-js-ui.dir}/js/\">\n+\t\t\t\t<include name=\"ph.js\"/>\n+\t\t\t</fileset>\n+\t\t</copy>\n+\n+\t\t<!-- copy content for modern watch list chart -->\n+\t\t<copy includeemptydirs=\"false\" todir=\"${js-ui.dir}/modernWatchList/js\" taskname=\"copy for mwl js\">\n+\t\t\t<fileset dir=\"${src-js-ui.dir}/js/\">\n+\t\t\t\t<include name=\"example-chart-cmp.js\"/>\n+\t\t\t\t<include name=\"xlsx.js\"/>\n+\t\t\t\t<include name=\"pdfmake.js\"/>\n+\t\t\t\t<include name=\"canvg.js\"/>\n+\t\t\t</fileset>\n+\t\t</copy>\n+\n+\t\t<!-- copy content for modern charts -->\n+\t\t<copy includeemptydirs=\"false\" todir=\"${js-ui.dir}/views/js\" taskname=\"copy for charts js\">\n+\t\t\t<fileset dir=\"${src-js-ui.dir}/js/\">\n+\t\t\t\t<include name=\"step-line-chart-component.js\"/>\n+\t\t\t</fileset>\n+\t\t</copy>\n+\n+\t\t<copy includeemptydirs=\"false\" todir=\"${js-ui.dir}/views/js\" taskname=\"copy for live-alarms js\">\n+\t\t\t<fileset dir=\"${src-js-ui.dir}/js/\">\n+\t\t\t\t<include name=\"live-alarms-component.js\"/>\n+\t\t\t</fileset>\n+\t\t</copy>\n+\n+\t\t<!-- font do zrobienia -->\n+\t\t<!-- img do zrobienia -->\n+\n+\t\t<delete dir=\"${web.classes.dir}\"/>\n+\t\t<mkdir dir=\"${web.classes.dir}\"/>\n+\t\t<copy includeemptydirs=\"false\" todir=\"${web.classes.dir}\">\n+\t\t\t<fileset dir=\"${build-project.src.dir}\">\n+\t\t\t\t<include name=\"**/*.class\"/>\n+\t\t\t</fileset>\n+\t\t</copy>\n+\n+\t\t<copy includeemptydirs=\"false\" todir=\"${web.classes.dir}\">\n+\t\t\t<fileset dir=\"${webapp-resources.dir}\" />\n+\t\t</copy>\n+\n+\t\t<war destfile=\"ScadaBR.war\"\n+\t\t\t basedir=\"WebContent\"\n+\t\t\t needxmlfile=\"false\">\n+\t\t</war>\n+\t\t<record action=\"stop\" name=\"${war.log.name}\"/>\n+\t</target>\n+\n \t<target name=\"junit\">\n \t\t<record action=\"start\" name=\"${junit.log.name}\"/>\n \t\t<junit printsummary=\"yes\" haltonfailure=\"no\">"
  }
]
