[
  {
    "sha": "b4e03ae51985b75eaa7a9d4ec316e9c309b3f239",
    "filename": "commons/src/main/java/org/eclipse/kapua/commons/service/internal/ServiceDAO.java",
    "status": "modified",
    "additions": 11,
    "deletions": 10,
    "changes": 21,
    "blob_url": "https://github.com/eclipse/kapua/blob/2667032116e14abea89131a72f7452b21fbfac14/commons/src/main/java/org/eclipse/kapua/commons/service/internal/ServiceDAO.java",
    "raw_url": "https://github.com/eclipse/kapua/raw/2667032116e14abea89131a72f7452b21fbfac14/commons/src/main/java/org/eclipse/kapua/commons/service/internal/ServiceDAO.java",
    "contents_url": "https://api.github.com/repos/eclipse/kapua/contents/commons/src/main/java/org/eclipse/kapua/commons/service/internal/ServiceDAO.java?ref=2667032116e14abea89131a72f7452b21fbfac14",
    "patch": "@@ -275,10 +275,10 @@ protected ServiceDAO() {\n     /**\n      * Find by fields {@link KapuaEntity} utility method\n      *\n-     * @param em      The {@link EntityManager} that holds the transaction.\n-     * @param clazz   The {@link KapuaEntity} class. This must be the implementing {@code class}.\n-     * @param name    The {@link KapuaEntity} name of the field from which to search.\n-     * @param value   The value of the field from which to search.\n+     * @param em    The {@link EntityManager} that holds the transaction.\n+     * @param clazz The {@link KapuaEntity} class. This must be the implementing {@code class}.\n+     * @param name  The {@link KapuaEntity} name of the field from which to search.\n+     * @param value The value of the field from which to search.\n      * @return The {@link KapuaEntity} found, or {@code null} if not found.\n      * @throws NonUniqueResultException When more than one result is returned\n      * @since 1.0.0\n@@ -392,9 +392,11 @@ protected ServiceDAO() {\n         criteriaSelectQuery.select(entityRoot).distinct(true);\n \n         // Fetch LAZY attributes if necessary\n-        if (kapuaQuery.getFetchAttributes() != null) {\n-            for (String fetchAttribute : kapuaQuery.getFetchAttributes()) {\n+        for (String fetchAttribute : kapuaQuery.getFetchAttributes()) {\n+            if (entityType.getAttribute(fetchAttribute).isAssociation()) {\n                 entityRoot.fetch(entityType.getSingularAttribute(fetchAttribute), JoinType.LEFT);\n+            } else {\n+                entityRoot.fetch(fetchAttribute);\n             }\n         }\n \n@@ -809,8 +811,7 @@ protected static void handleKapuaQueryGroupPredicate(@NotNull KapuaQuery query,\n             if (kapuaSession != null && !kapuaSession.isTrustedMode()) {\n                 handleKapuaQueryGroupPredicate(kapuaSession, query, domain, groupPredicateName);\n             }\n-        }\n-        else {\n+        } else {\n             LOG.warn(\"'Access Group Permission' feature is disabled\");\n         }\n     }\n@@ -822,9 +823,9 @@ private static void handleKapuaQueryGroupPredicate(KapuaSession kapuaSession, Ka\n             AccessInfo accessInfo = KapuaSecurityUtils.doPrivileged(() -> ACCESS_INFO_SERVICE.findByUserId(kapuaSession.getScopeId(), userId));\n \n             List<Permission> groupPermissions = new ArrayList<>();\n-            if (accessInfo!=null) {\n+            if (accessInfo != null) {\n \n-                        AccessPermissionListResult accessPermissions = KapuaSecurityUtils.doPrivileged(() -> ACCESS_PERMISSION_SERVICE.findByAccessInfoId(accessInfo.getScopeId(), accessInfo.getId()));\n+                AccessPermissionListResult accessPermissions = KapuaSecurityUtils.doPrivileged(() -> ACCESS_PERMISSION_SERVICE.findByAccessInfoId(accessInfo.getScopeId(), accessInfo.getId()));\n \n                 for (AccessPermission ap : accessPermissions.getItems()) {\n                     if (checkGroupPermission(domain, groupPermissions, ap.getPermission())) {"
  },
  {
    "sha": "fbae89bfa53fe978eb9f50812ac58a69ac722dcc",
    "filename": "console/module/api/src/main/java/org/eclipse/kapua/app/console/module/api/client/ui/tab/EntityDescriptionTabItem.java",
    "status": "modified",
    "additions": 28,
    "deletions": 13,
    "changes": 41,
    "blob_url": "https://github.com/eclipse/kapua/blob/2667032116e14abea89131a72f7452b21fbfac14/console/module/api/src/main/java/org/eclipse/kapua/app/console/module/api/client/ui/tab/EntityDescriptionTabItem.java",
    "raw_url": "https://github.com/eclipse/kapua/raw/2667032116e14abea89131a72f7452b21fbfac14/console/module/api/src/main/java/org/eclipse/kapua/app/console/module/api/client/ui/tab/EntityDescriptionTabItem.java",
    "contents_url": "https://api.github.com/repos/eclipse/kapua/contents/console/module/api/src/main/java/org/eclipse/kapua/app/console/module/api/client/ui/tab/EntityDescriptionTabItem.java?ref=2667032116e14abea89131a72f7452b21fbfac14",
    "patch": "@@ -75,30 +75,38 @@ protected void onRender(Element parent, int index) {\n         RpcProxy<ListLoadResult<GwtGroupedNVPair>> proxy = getDataProxy();\n         descriptionValuesLoader = new BaseListLoader<ListLoadResult<GwtGroupedNVPair>>(proxy);\n         descriptionValuesLoader.addLoadListener(new DescriptionLoadListener());\n+\n         descriptionValuesStore = new GroupingStore<GwtGroupedNVPair>(descriptionValuesLoader);\n         descriptionValuesStore.groupBy(\"groupLoc\");\n \n         //\n         // Columns\n         List<ColumnConfig> columns = new ArrayList<ColumnConfig>();\n-        ColumnConfig name = new ColumnConfig(\"nameLoc\", MSGS.entityTabDescriptionName(), 50);\n-        ColumnConfig value = new ColumnConfig(\"value\", MSGS.devicePropValue(), 50);\n-        // Name column\n-        GridCellRenderer<GwtGroupedNVPair> renderer = new GridCellRenderer<GwtGroupedNVPair>() {\n+\n+        // Name\n+        ColumnConfig nameColumn = new ColumnConfig();\n+        nameColumn.setId(\"nameLoc\");\n+        nameColumn.setHeader(MSGS.entityTabDescriptionName());\n+        nameColumn.setWidth(50);\n+        columns.add(nameColumn);\n+\n+        // Value\n+        GridCellRenderer<GwtGroupedNVPair> valueColumnRenderer = new GridCellRenderer<GwtGroupedNVPair>() {\n \n             @Override\n             public Object render(GwtGroupedNVPair model, String property, ColumnData config,\n-                    int rowIndex, int colIndex, ListStore<GwtGroupedNVPair> store,\n-                    Grid<GwtGroupedNVPair> grid) {\n-               return renderValueCell(model, property, config, rowIndex, colIndex, store, grid);\n+                                 int rowIndex, int colIndex, ListStore<GwtGroupedNVPair> store,\n+                                 Grid<GwtGroupedNVPair> grid) {\n+                return renderValueCell(model, property, config, rowIndex, colIndex, store, grid);\n             }\n         };\n \n-        value.setRenderer(renderer);\n-        columns.add(name);\n-        columns.add(value);\n-\n-        ColumnModel cm = new ColumnModel(columns);\n+        ColumnConfig valueColumn = new ColumnConfig();\n+        valueColumn.setId(\"value\");\n+        valueColumn.setHeader(MSGS.devicePropValue());\n+        valueColumn.setWidth(50);\n+        valueColumn.setRenderer(valueColumnRenderer);\n+        columns.add(valueColumn);\n \n         //\n         // Grid\n@@ -109,6 +117,8 @@ public Object render(GwtGroupedNVPair model, String property, ColumnData config,\n         groupingView.setShowGroupedColumn(false);\n         groupingView.setEnableNoGroups(false);\n         groupingView.setEnableGroupingMenu(false);\n+\n+        ColumnModel cm = new ColumnModel(columns);\n         descriptionGrid = new KapuaGrid<GwtGroupedNVPair>(descriptionValuesStore, cm);\n         descriptionGrid.setView(groupingView);\n         descriptionGrid.setBorders(false);\n@@ -147,9 +157,14 @@ protected Object renderNameCell(GwtGroupedNVPair model, String property, ColumnD\n \n     protected Object renderValueCell(GwtGroupedNVPair model, String property, ColumnData config, int rowIndex, int colIndex, ListStore<GwtGroupedNVPair> store, Grid<GwtGroupedNVPair> grid) {\n         Object value = model.getValue();\n-        if (value != null && value instanceof Date) {\n+\n+        if (value instanceof Date) {\n             Date dateValue = (Date) value;\n             return DateUtils.formatDateTime(dateValue);\n+        } else if (value instanceof String) {\n+            return ((String) value)\n+                    .replace(\"\\n\", \"<br>\")\n+                    .replace(\" \", \"&nbsp;\");\n         }\n         return value;\n     }"
  },
  {
    "sha": "03d5876b63d82cc9ddca41367e35ba87c6073f90",
    "filename": "console/module/api/src/main/java/org/eclipse/kapua/app/console/module/api/shared/model/GwtGroupedNVPair.java",
    "status": "modified",
    "additions": 23,
    "deletions": 8,
    "changes": 31,
    "blob_url": "https://github.com/eclipse/kapua/blob/2667032116e14abea89131a72f7452b21fbfac14/console/module/api/src/main/java/org/eclipse/kapua/app/console/module/api/shared/model/GwtGroupedNVPair.java",
    "raw_url": "https://github.com/eclipse/kapua/raw/2667032116e14abea89131a72f7452b21fbfac14/console/module/api/src/main/java/org/eclipse/kapua/app/console/module/api/shared/model/GwtGroupedNVPair.java",
    "contents_url": "https://api.github.com/repos/eclipse/kapua/contents/console/module/api/src/main/java/org/eclipse/kapua/app/console/module/api/shared/model/GwtGroupedNVPair.java?ref=2667032116e14abea89131a72f7452b21fbfac14",
    "patch": "@@ -12,25 +12,39 @@\n  *******************************************************************************/\n package org.eclipse.kapua.app.console.module.api.shared.model;\n \n-import java.io.Serializable;\n-\n-\n import com.google.gwt.core.client.GWT;\n import org.eclipse.kapua.app.console.module.api.client.messages.ValidationMessages;\n \n+import java.io.Serializable;\n+\n public class GwtGroupedNVPair extends KapuaBaseModel implements Serializable {\n \n     private static final long serialVersionUID = 6017065568183482351L;\n \n     @Override\n-    @SuppressWarnings(\"unchecked\")\n     public <X> X get(String property) {\n+        ValidationMessages msgs = GWT.create(ValidationMessages.class);\n         if (\"groupLoc\".equals(property)) {\n-            ValidationMessages msgs = GWT.create(ValidationMessages.class);\n-            return (X) msgs.getString(getGroup());\n+            try {\n+                return (X) msgs.getString(getGroup());\n+            } catch (Exception e) {\n+                return (X) getGroup();\n+            }\n         } else if (\"nameLoc\".equals(property)) {\n-            ValidationMessages msgs = GWT.create(ValidationMessages.class);\n-            return (X) msgs.getString(getName());\n+            try {\n+                return (X) msgs.getString(getName());\n+            } catch (Exception e) {\n+                String[] nameSplitted = getName().split(\"_\");\n+\n+                StringBuilder sb = new StringBuilder();\n+                for (String split : nameSplitted) {\n+                    sb.append(split.substring(0, 1).toUpperCase())\n+                            .append(split.substring(1))\n+                            .append(\" \");\n+                }\n+\n+                return (X) sb.deleteCharAt(sb.length()).toString();\n+            }\n         } else {\n             X value = (X) super.get(property);\n             if (value == null || (value instanceof String && ((String) value).isEmpty())) {\n@@ -45,6 +59,7 @@ public GwtGroupedNVPair() {\n \n     public GwtGroupedNVPair(String group, String name, Object value) {\n         this();\n+\n         setGroup(group);\n         setName(name);\n         setValue(value);"
  },
  {
    "sha": "b83417ba53297a7c6870d3095bf245b0405b1f38",
    "filename": "console/module/device/src/main/java/org/eclipse/kapua/app/console/module/device/server/GwtDeviceServiceImpl.java",
    "status": "modified",
    "additions": 13,
    "deletions": 0,
    "changes": 13,
    "blob_url": "https://github.com/eclipse/kapua/blob/2667032116e14abea89131a72f7452b21fbfac14/console/module/device/src/main/java/org/eclipse/kapua/app/console/module/device/server/GwtDeviceServiceImpl.java",
    "raw_url": "https://github.com/eclipse/kapua/raw/2667032116e14abea89131a72f7452b21fbfac14/console/module/device/src/main/java/org/eclipse/kapua/app/console/module/device/server/GwtDeviceServiceImpl.java",
    "contents_url": "https://api.github.com/repos/eclipse/kapua/contents/console/module/device/src/main/java/org/eclipse/kapua/app/console/module/device/server/GwtDeviceServiceImpl.java?ref=2667032116e14abea89131a72f7452b21fbfac14",
    "patch": "@@ -55,6 +55,7 @@\n import org.eclipse.kapua.service.device.registry.DeviceAttributes;\n import org.eclipse.kapua.service.device.registry.DeviceCreator;\n import org.eclipse.kapua.service.device.registry.DeviceDomains;\n+import org.eclipse.kapua.service.device.registry.DeviceExtendedProperty;\n import org.eclipse.kapua.service.device.registry.DeviceFactory;\n import org.eclipse.kapua.service.device.registry.DeviceQuery;\n import org.eclipse.kapua.service.device.registry.DeviceRegistryService;\n@@ -293,6 +294,18 @@ public User call() throws Exception {\n                 pairs.add(new GwtGroupedNVPair(MODEM_INFO, \"modemImei\", device.getImei()));\n                 pairs.add(new GwtGroupedNVPair(MODEM_INFO, \"modemImsi\", device.getImsi()));\n                 pairs.add(new GwtGroupedNVPair(MODEM_INFO, \"modemIccid\", device.getIccid()));\n+\n+                //\n+                // Extended Properties\n+                for (DeviceExtendedProperty deviceExtendedProperty : device.getExtendedProperties()) {\n+                    pairs.add(\n+                            new GwtGroupedNVPair(\n+                                    deviceExtendedProperty.getGroupName(),\n+                                    deviceExtendedProperty.getName(),\n+                                    deviceExtendedProperty.getValue()\n+                            )\n+                    );\n+                }\n             }\n         } catch (Throwable t) {\n             KapuaExceptionHandler.handle(t);"
  },
  {
    "sha": "1fe014fad0620d5c42b7d8130b2178a49028eac7",
    "filename": "message/api/src/main/java/org/eclipse/kapua/message/device/lifecycle/KapuaBirthPayload.java",
    "status": "modified",
    "additions": 15,
    "deletions": 0,
    "changes": 15,
    "blob_url": "https://github.com/eclipse/kapua/blob/2667032116e14abea89131a72f7452b21fbfac14/message/api/src/main/java/org/eclipse/kapua/message/device/lifecycle/KapuaBirthPayload.java",
    "raw_url": "https://github.com/eclipse/kapua/raw/2667032116e14abea89131a72f7452b21fbfac14/message/api/src/main/java/org/eclipse/kapua/message/device/lifecycle/KapuaBirthPayload.java",
    "contents_url": "https://api.github.com/repos/eclipse/kapua/contents/message/api/src/main/java/org/eclipse/kapua/message/device/lifecycle/KapuaBirthPayload.java?ref=2667032116e14abea89131a72f7452b21fbfac14",
    "patch": "@@ -483,4 +483,19 @@\n      */\n     void setModemIccid(String modemIccid);\n \n+    /**\n+     * Gets the extended properties.\n+     *\n+     * @return The extended properties.\n+     * @since 1.5.0\n+     */\n+    String getExtendedProperties();\n+\n+    /**\n+     * Sets the extended properties.\n+     *\n+     * @param extendedProperties The extended properties.\n+     * @since 1.5.0\n+     */\n+    void setExtendedProperties(String extendedProperties);\n }"
  },
  {
    "sha": "4ed2f102c4f909047df2ea5ca8af34ae27531a44",
    "filename": "message/api/src/main/java/org/eclipse/kapua/message/device/lifecycle/KapuaBirthPayloadAttibutes.java",
    "status": "modified",
    "additions": 5,
    "deletions": 0,
    "changes": 5,
    "blob_url": "https://github.com/eclipse/kapua/blob/2667032116e14abea89131a72f7452b21fbfac14/message/api/src/main/java/org/eclipse/kapua/message/device/lifecycle/KapuaBirthPayloadAttibutes.java",
    "raw_url": "https://github.com/eclipse/kapua/raw/2667032116e14abea89131a72f7452b21fbfac14/message/api/src/main/java/org/eclipse/kapua/message/device/lifecycle/KapuaBirthPayloadAttibutes.java",
    "contents_url": "https://api.github.com/repos/eclipse/kapua/contents/message/api/src/main/java/org/eclipse/kapua/message/device/lifecycle/KapuaBirthPayloadAttibutes.java?ref=2667032116e14abea89131a72f7452b21fbfac14",
    "patch": "@@ -168,4 +168,9 @@ private KapuaBirthPayloadAttibutes() {\n      * @since 1.0.0\n      */\n     public static final String MODEM_ICCID = \"modemIccid\";\n+\n+    /**\n+     * @since 1.5.0\n+     */\n+    public static final String EXTENDED_PROPERTIES = \"extendedProperties\";\n }"
  },
  {
    "sha": "74fc0f4b07138583bdf5eadfe7dcfda5266c16b2",
    "filename": "message/internal/src/main/java/org/eclipse/kapua/message/internal/device/lifecycle/KapuaAppsPayloadImpl.java",
    "status": "modified",
    "additions": 6,
    "deletions": 2,
    "changes": 8,
    "blob_url": "https://github.com/eclipse/kapua/blob/2667032116e14abea89131a72f7452b21fbfac14/message/internal/src/main/java/org/eclipse/kapua/message/internal/device/lifecycle/KapuaAppsPayloadImpl.java",
    "raw_url": "https://github.com/eclipse/kapua/raw/2667032116e14abea89131a72f7452b21fbfac14/message/internal/src/main/java/org/eclipse/kapua/message/internal/device/lifecycle/KapuaAppsPayloadImpl.java",
    "contents_url": "https://api.github.com/repos/eclipse/kapua/contents/message/internal/src/main/java/org/eclipse/kapua/message/internal/device/lifecycle/KapuaAppsPayloadImpl.java?ref=2667032116e14abea89131a72f7452b21fbfac14",
    "patch": "@@ -21,6 +21,8 @@\n  */\n public class KapuaAppsPayloadImpl extends KapuaBirthPayloadImpl implements KapuaAppsPayload {\n \n+    private static final long serialVersionUID = -918081814625264739L;\n+\n     /**\n      * Constructor.\n      *\n@@ -63,7 +65,8 @@ public KapuaAppsPayloadImpl(String uptime,\n                                 String osArch,\n                                 String modemImei,\n                                 String modemImsi,\n-                                String modemIccid) {\n+                                String modemIccid,\n+                                String extendedProperties) {\n         super(uptime,\n                 displayName,\n                 modelName,\n@@ -92,6 +95,7 @@ public KapuaAppsPayloadImpl(String uptime,\n                 osArch,\n                 modemImei,\n                 modemImsi,\n-                modemIccid);\n+                modemIccid,\n+                extendedProperties);\n     }\n }"
  },
  {
    "sha": "f19913d7bd59fb10782d519239bd212582f0d6a3",
    "filename": "message/internal/src/main/java/org/eclipse/kapua/message/internal/device/lifecycle/KapuaBirthPayloadImpl.java",
    "status": "modified",
    "additions": 15,
    "deletions": 1,
    "changes": 16,
    "blob_url": "https://github.com/eclipse/kapua/blob/2667032116e14abea89131a72f7452b21fbfac14/message/internal/src/main/java/org/eclipse/kapua/message/internal/device/lifecycle/KapuaBirthPayloadImpl.java",
    "raw_url": "https://github.com/eclipse/kapua/raw/2667032116e14abea89131a72f7452b21fbfac14/message/internal/src/main/java/org/eclipse/kapua/message/internal/device/lifecycle/KapuaBirthPayloadImpl.java",
    "contents_url": "https://api.github.com/repos/eclipse/kapua/contents/message/internal/src/main/java/org/eclipse/kapua/message/internal/device/lifecycle/KapuaBirthPayloadImpl.java?ref=2667032116e14abea89131a72f7452b21fbfac14",
    "patch": "@@ -23,6 +23,8 @@\n  */\n public class KapuaBirthPayloadImpl extends AbstractLifecyclePayloadImpl implements KapuaBirthPayload {\n \n+    private static final long serialVersionUID = 304433271740125817L;\n+\n     /**\n      * Constructor.\n      *\n@@ -66,6 +68,7 @@ public KapuaBirthPayloadImpl() {\n      * @param modemImei                   The {@link KapuaBirthPayloadAttibutes#MODEM_IMEI} of the {@link KapuaBirthMessage}\n      * @param modemImsi                   The {@link KapuaBirthPayloadAttibutes#MODEM_IMSI} of the {@link KapuaBirthMessage}\n      * @param modemIccid                  The {@link KapuaBirthPayloadAttibutes#MODEM_ICCID} of the {@link KapuaBirthMessage}\n+     * @param extendedProperties          The {@link KapuaBirthPayloadAttibutes#EXTENDED_PROPERTIES} of the {@link KapuaBirthMessage}\n      * @since 1.0.0\n      */\n     public KapuaBirthPayloadImpl(String uptime,\n@@ -96,7 +99,8 @@ public KapuaBirthPayloadImpl(String uptime,\n                                  String osArch,\n                                  String modemImei,\n                                  String modemImsi,\n-                                 String modemIccid) {\n+                                 String modemIccid,\n+                                 String extendedProperties) {\n \n         setUptime(uptime);\n         setDisplayName(displayName);\n@@ -127,6 +131,7 @@ public KapuaBirthPayloadImpl(String uptime,\n         setModemImei(modemImei);\n         setModemImsi(modemImsi);\n         setModemIccid(modemIccid);\n+        setExtendedProperties(extendedProperties);\n     }\n \n     @Override\n@@ -419,4 +424,13 @@ public void setModemIccid(String modemIccid) {\n         getMetrics().put(KapuaBirthPayloadAttibutes.MODEM_ICCID, modemIccid);\n     }\n \n+    @Override\n+    public String getExtendedProperties() {\n+        return (String) getMetrics().get(KapuaBirthPayloadAttibutes.EXTENDED_PROPERTIES);\n+    }\n+\n+    @Override\n+    public void setExtendedProperties(String extendedProperties) {\n+        getMetrics().put(KapuaBirthPayloadAttibutes.EXTENDED_PROPERTIES, extendedProperties);\n+    }\n }"
  },
  {
    "sha": "a8b4b996bec0b3df17a178308bc77fcb9a500064",
    "filename": "message/internal/src/main/java/org/eclipse/kapua/message/internal/device/lifecycle/model/BirthExtendedProperties.java",
    "status": "added",
    "additions": 80,
    "deletions": 0,
    "changes": 80,
    "blob_url": "https://github.com/eclipse/kapua/blob/2667032116e14abea89131a72f7452b21fbfac14/message/internal/src/main/java/org/eclipse/kapua/message/internal/device/lifecycle/model/BirthExtendedProperties.java",
    "raw_url": "https://github.com/eclipse/kapua/raw/2667032116e14abea89131a72f7452b21fbfac14/message/internal/src/main/java/org/eclipse/kapua/message/internal/device/lifecycle/model/BirthExtendedProperties.java",
    "contents_url": "https://api.github.com/repos/eclipse/kapua/contents/message/internal/src/main/java/org/eclipse/kapua/message/internal/device/lifecycle/model/BirthExtendedProperties.java?ref=2667032116e14abea89131a72f7452b21fbfac14",
    "patch": "@@ -0,0 +1,80 @@\n+/*******************************************************************************\n+ * Copyright (c) 2021 Eurotech and/or its affiliates and others\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *     Eurotech - initial API and implementation\n+ *******************************************************************************/\n+package org.eclipse.kapua.message.internal.device.lifecycle.model;\n+\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import com.fasterxml.jackson.annotation.JsonRootName;\n+import com.fasterxml.jackson.databind.annotation.JsonDeserialize;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+/**\n+ * Birth extended property definition.\n+ *\n+ * @since 1.5.0\n+ */\n+@JsonRootName(\"deviceExtendedProperties\")\n+public class BirthExtendedProperties {\n+\n+    @JsonProperty(\"version\")\n+    private String version;\n+\n+    @JsonProperty(\"properties\")\n+    @JsonDeserialize(keyAs = String.class, contentAs = BirthExtendedProperty.class)\n+    private Map<String, BirthExtendedProperty> extendedProperties;\n+\n+    /**\n+     * Gets the version.\n+     *\n+     * @return The version.\n+     * @since 1.5.0\n+     */\n+    public String getVersion() {\n+        return version;\n+    }\n+\n+    /**\n+     * Sets the version.\n+     *\n+     * @param version The version.\n+     * @since 1.5.0\n+     */\n+    public void setVersion(String version) {\n+        this.version = version;\n+    }\n+\n+    /**\n+     * Gets the {@link Map} of {@link BirthExtendedProperty}es.\n+     *\n+     * @return The {@link Map} of {@link BirthExtendedProperty}es.\n+     * @since 1.5.0\n+     */\n+    public Map<String, BirthExtendedProperty> getExtendedProperties() {\n+        if (extendedProperties == null) {\n+            extendedProperties = new HashMap<>();\n+        }\n+\n+        return extendedProperties;\n+    }\n+\n+    /**\n+     * Sets the {@link Map} of {@link BirthExtendedProperty}es.\n+     *\n+     * @param extendedProperties The {@link Map} of {@link BirthExtendedProperty}es.\n+     * @since 1.5.0\n+     */\n+    public void setExtendedProperties(Map<String, BirthExtendedProperty> extendedProperties) {\n+        this.extendedProperties = extendedProperties;\n+    }\n+}"
  },
  {
    "sha": "015b2fc4e3f34f3295fe7eab5be2185279c3e070",
    "filename": "message/internal/src/main/java/org/eclipse/kapua/message/internal/device/lifecycle/model/BirthExtendedProperty.java",
    "status": "added",
    "additions": 36,
    "deletions": 0,
    "changes": 36,
    "blob_url": "https://github.com/eclipse/kapua/blob/2667032116e14abea89131a72f7452b21fbfac14/message/internal/src/main/java/org/eclipse/kapua/message/internal/device/lifecycle/model/BirthExtendedProperty.java",
    "raw_url": "https://github.com/eclipse/kapua/raw/2667032116e14abea89131a72f7452b21fbfac14/message/internal/src/main/java/org/eclipse/kapua/message/internal/device/lifecycle/model/BirthExtendedProperty.java",
    "contents_url": "https://api.github.com/repos/eclipse/kapua/contents/message/internal/src/main/java/org/eclipse/kapua/message/internal/device/lifecycle/model/BirthExtendedProperty.java?ref=2667032116e14abea89131a72f7452b21fbfac14",
    "patch": "@@ -0,0 +1,36 @@\n+/*******************************************************************************\n+ * Copyright (c) 2021 Eurotech and/or its affiliates and others\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *     Eurotech - initial API and implementation\n+ *******************************************************************************/\n+package org.eclipse.kapua.message.internal.device.lifecycle.model;\n+\n+import com.fasterxml.jackson.annotation.JsonRootName;\n+\n+import java.util.HashMap;\n+\n+/**\n+ * {@link BirthExtendedProperty} definition.\n+ *\n+ * @since 1.5.0\n+ */\n+@JsonRootName(\"deviceExtendedProperty\")\n+public class BirthExtendedProperty extends HashMap<String, String> {\n+\n+    private static final long serialVersionUID = 650296704022076045L;\n+\n+    /**\n+     * Constructor.\n+     *\n+     * @since 1.5.0\n+     */\n+    public BirthExtendedProperty() {\n+    }\n+}"
  },
  {
    "sha": "0a22fc866b3955efffcd9754f40942b8ca7f1913",
    "filename": "message/internal/src/test/java/org/eclipse/kapua/message/internal/device/lifecycle/KapuaAppsMessageTest.java",
    "status": "modified",
    "additions": 11,
    "deletions": 1,
    "changes": 12,
    "blob_url": "https://github.com/eclipse/kapua/blob/2667032116e14abea89131a72f7452b21fbfac14/message/internal/src/test/java/org/eclipse/kapua/message/internal/device/lifecycle/KapuaAppsMessageTest.java",
    "raw_url": "https://github.com/eclipse/kapua/raw/2667032116e14abea89131a72f7452b21fbfac14/message/internal/src/test/java/org/eclipse/kapua/message/internal/device/lifecycle/KapuaAppsMessageTest.java",
    "contents_url": "https://api.github.com/repos/eclipse/kapua/contents/message/internal/src/test/java/org/eclipse/kapua/message/internal/device/lifecycle/KapuaAppsMessageTest.java?ref=2667032116e14abea89131a72f7452b21fbfac14",
    "patch": "@@ -41,6 +41,7 @@\n             \"~~containerFramework=containerFramework\" +\n             \"~~containerFrameworkVersion=containerFrameworkV-1\" +\n             \"~~displayName=Display Name\" +\n+            \"~~extendedProperties=\" + \"{\\n  \\\"version\\\": \\\"1.0\\\",\\n  \\\"properties\\\": {\\n    \\\"GroupName\\\": {\\n      \\\"propertyName\\\": \\\"propertyValue\\\"\\n    }\\n  }\\n}\" +\n             \"~~firmware=firmware-1\" +\n             \"~~firmwareVersion=firmwareV-1\" +\n             \"~~jvm=Oracle HotSpot\" +\n@@ -91,6 +92,7 @@ public void kapuaAppsPayloadInitConstructor() {\n         assertEquals(\"49-015420-323751\", kapuaAppsPayload.getModemImei());\n         assertEquals(\"359881234567890\", kapuaAppsPayload.getModemImsi());\n         assertEquals(\"8991101200003204510\", kapuaAppsPayload.getModemIccid());\n+        assertEquals(\"{\\n  \\\"version\\\": \\\"1.0\\\",\\n  \\\"properties\\\": {\\n    \\\"GroupName\\\": {\\n      \\\"propertyName\\\": \\\"propertyValue\\\"\\n    }\\n  }\\n}\", kapuaAppsPayload.getExtendedProperties());\n     }\n \n     @Test\n@@ -151,7 +153,15 @@ private static KapuaAppsPayload populateKapuaAppsPayload() {\n                 \"Linux x86\",\n                 \"49-015420-323751\",\n                 \"359881234567890\",\n-                \"8991101200003204510\"\n+                \"8991101200003204510\",\n+                \"{\\n\" +\n+                        \"  \\\"version\\\": \\\"1.0\\\",\\n\" +\n+                        \"  \\\"properties\\\": {\\n\" +\n+                        \"    \\\"GroupName\\\": {\\n\" +\n+                        \"      \\\"propertyName\\\": \\\"propertyValue\\\"\\n\" +\n+                        \"    }\\n\" +\n+                        \"  }\\n\" +\n+                        \"}\"\n         );\n     }\n }"
  },
  {
    "sha": "9a7fe40253d68a8ba62004df39e9641931e05803",
    "filename": "message/internal/src/test/java/org/eclipse/kapua/message/internal/device/lifecycle/KapuaBirthMessageTest.java",
    "status": "modified",
    "additions": 11,
    "deletions": 1,
    "changes": 12,
    "blob_url": "https://github.com/eclipse/kapua/blob/2667032116e14abea89131a72f7452b21fbfac14/message/internal/src/test/java/org/eclipse/kapua/message/internal/device/lifecycle/KapuaBirthMessageTest.java",
    "raw_url": "https://github.com/eclipse/kapua/raw/2667032116e14abea89131a72f7452b21fbfac14/message/internal/src/test/java/org/eclipse/kapua/message/internal/device/lifecycle/KapuaBirthMessageTest.java",
    "contents_url": "https://api.github.com/repos/eclipse/kapua/contents/message/internal/src/test/java/org/eclipse/kapua/message/internal/device/lifecycle/KapuaBirthMessageTest.java?ref=2667032116e14abea89131a72f7452b21fbfac14",
    "patch": "@@ -36,6 +36,7 @@\n             \"~~containerFramework=containerFramework\" +\n             \"~~containerFrameworkVersion=containerFrameworkV-1\" +\n             \"~~displayName=Display Name\" +\n+            \"~~extendedProperties=\" + \"{\\n  \\\"version\\\": \\\"1.0\\\",\\n  \\\"properties\\\": {\\n    \\\"GroupName\\\": {\\n      \\\"propertyName\\\": \\\"propertyValue\\\"\\n    }\\n  }\\n}\" +\n             \"~~firmware=firmware-1\" +\n             \"~~firmwareVersion=firmwareV-1\" +\n             \"~~jvm=Oracle HotSpot\" +\n@@ -86,6 +87,7 @@ public void kapuaBirthPayloadInitConstructor() {\n         assertEquals(\"49-015420-323751\", kapuaBirthPayload.getModemImei());\n         assertEquals(\"359881234567890\", kapuaBirthPayload.getModemImsi());\n         assertEquals(\"8991101200003204510\", kapuaBirthPayload.getModemIccid());\n+        assertEquals(\"{\\n  \\\"version\\\": \\\"1.0\\\",\\n  \\\"properties\\\": {\\n    \\\"GroupName\\\": {\\n      \\\"propertyName\\\": \\\"propertyValue\\\"\\n    }\\n  }\\n}\", kapuaBirthPayload.getExtendedProperties());\n     }\n \n     @Test\n@@ -154,7 +156,15 @@ private static KapuaBirthPayload populateKapuaBirthPayload() {\n                 \"Linux x86\",\n                 \"49-015420-323751\",\n                 \"359881234567890\",\n-                \"8991101200003204510\"\n+                \"8991101200003204510\",\n+                \"{\\n\" +\n+                        \"  \\\"version\\\": \\\"1.0\\\",\\n\" +\n+                        \"  \\\"properties\\\": {\\n\" +\n+                        \"    \\\"GroupName\\\": {\\n\" +\n+                        \"      \\\"propertyName\\\": \\\"propertyValue\\\"\\n\" +\n+                        \"    }\\n\" +\n+                        \"  }\\n\" +\n+                        \"}\"\n         );\n     }\n }"
  },
  {
    "sha": "cd9329942c1258b611a38c4d6fe13453e4aec348",
    "filename": "service/device/call/kura/src/main/java/org/eclipse/kapua/service/device/call/message/kura/lifecycle/AbstractKuraAppsBirthPayload.java",
    "status": "modified",
    "additions": 27,
    "deletions": 1,
    "changes": 28,
    "blob_url": "https://github.com/eclipse/kapua/blob/2667032116e14abea89131a72f7452b21fbfac14/service/device/call/kura/src/main/java/org/eclipse/kapua/service/device/call/message/kura/lifecycle/AbstractKuraAppsBirthPayload.java",
    "raw_url": "https://github.com/eclipse/kapua/raw/2667032116e14abea89131a72f7452b21fbfac14/service/device/call/kura/src/main/java/org/eclipse/kapua/service/device/call/message/kura/lifecycle/AbstractKuraAppsBirthPayload.java",
    "contents_url": "https://api.github.com/repos/eclipse/kapua/contents/service/device/call/kura/src/main/java/org/eclipse/kapua/service/device/call/message/kura/lifecycle/AbstractKuraAppsBirthPayload.java?ref=2667032116e14abea89131a72f7452b21fbfac14",
    "patch": "@@ -227,12 +227,21 @@\n      */\n     protected static final String MODEM_ICCID = \"modem_iccid\";\n \n+    /**\n+     * {@link Device} extended properties metric name.\n+     *\n+     * @since 1.5.0\n+     */\n+    protected static final String EXTENDED_PROPERTIES = \"extended_properties\";\n+\n     /**\n      * {@link Device} default application framework metric name.\n      *\n      * @since 1.0.0\n      */\n     protected static final String DEFAULT_APPLICATION_FRAMEWORK = \"Kura\";\n+    private static final long serialVersionUID = 5490945197263668115L;\n+\n \n     /**\n      * Constructor.\n@@ -273,6 +282,7 @@ public AbstractKuraAppsBirthPayload() {\n      * @param modemImei                   {@link Device} modem IMEI.\n      * @param modemImsi                   {@link Device} modem IMSI.\n      * @param modemIccid                  {@link Device} modem ICCID.\n+     * @param extendedProperties          {@link Device} extended properties.\n      * @since 1.0.0\n      */\n     public AbstractKuraAppsBirthPayload(String uptime,\n@@ -301,7 +311,8 @@ public AbstractKuraAppsBirthPayload(String uptime,\n                                         String osgiFrameworkVersion,\n                                         String modemImei,\n                                         String modemImsi,\n-                                        String modemIccid) {\n+                                        String modemIccid,\n+                                        String extendedProperties) {\n         super();\n \n         if (uptime != null) {\n@@ -385,6 +396,9 @@ public AbstractKuraAppsBirthPayload(String uptime,\n         if (modemIccid != null) {\n             getMetrics().put(MODEM_ICCID, modemIccid);\n         }\n+        if (extendedProperties != null) {\n+            getMetrics().put(EXTENDED_PROPERTIES, extendedProperties);\n+        }\n     }\n \n     /**\n@@ -688,4 +702,16 @@ public String getModemImsi() {\n     public String getModemIccid() {\n         return (String) getMetrics().get(MODEM_ICCID);\n     }\n+\n+    /**\n+     * Gets the {@link Device} extended properties.\n+     *\n+     * @return The {@link Device} extended properties.\n+     * @since 1.5.0\n+     */\n+    public String getExtendedProperties() {\n+        return (String) getMetrics().get(EXTENDED_PROPERTIES);\n+    }\n+\n+\n }"
  },
  {
    "sha": "0ff50ea321e416454fc54211b4efa0b93d1238db",
    "filename": "service/device/registry/api/src/main/java/org/eclipse/kapua/service/device/registry/Device.java",
    "status": "modified",
    "additions": 206,
    "deletions": 122,
    "changes": 328,
    "blob_url": "https://github.com/eclipse/kapua/blob/2667032116e14abea89131a72f7452b21fbfac14/service/device/registry/api/src/main/java/org/eclipse/kapua/service/device/registry/Device.java",
    "raw_url": "https://github.com/eclipse/kapua/raw/2667032116e14abea89131a72f7452b21fbfac14/service/device/registry/api/src/main/java/org/eclipse/kapua/service/device/registry/Device.java",
    "contents_url": "https://api.github.com/repos/eclipse/kapua/contents/service/device/registry/api/src/main/java/org/eclipse/kapua/service/device/registry/Device.java?ref=2667032116e14abea89131a72f7452b21fbfac14",
    "patch": "@@ -15,6 +15,7 @@\n import org.eclipse.kapua.model.KapuaUpdatableEntity;\n import org.eclipse.kapua.model.id.KapuaId;\n import org.eclipse.kapua.model.id.KapuaIdAdapter;\n+import org.eclipse.kapua.service.authorization.group.Group;\n import org.eclipse.kapua.service.device.registry.connection.DeviceConnection;\n import org.eclipse.kapua.service.device.registry.event.DeviceEvent;\n \n@@ -25,6 +26,7 @@\n import javax.xml.bind.annotation.XmlRootElement;\n import javax.xml.bind.annotation.XmlType;\n import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;\n+import java.util.List;\n import java.util.Set;\n \n /**\n@@ -66,6 +68,7 @@\n         \"customAttribute3\",\n         \"customAttribute4\",\n         \"customAttribute5\",\n+        \"extendedProperties\",\n         \"tagIds\"\n }, factoryClass = DeviceXmlRegistry.class, factoryMethod = \"newDevice\")\n public interface Device extends KapuaUpdatableEntity {\n@@ -77,14 +80,6 @@ default String getType() {\n         return TYPE;\n     }\n \n-    /**\n-     * Sets the set of Tag id of this entity.\n-     *\n-     * @param tagIds The set Tag id to assign.\n-     * @since 1.0.0\n-     */\n-    void setTagIds(Set<KapuaId> tagIds);\n-\n     /**\n      * Gets the set of Tag id assigned to this entity.\n      *\n@@ -97,426 +92,515 @@ default String getType() {\n     Set<KapuaId> getTagIds();\n \n     /**\n-     * Get the group identifier\n+     * Sets the set of Tag id of this entity.\n      *\n-     * @return\n+     * @param tagIds The set Tag id to assign.\n+     * @since 1.0.0\n+     */\n+    void setTagIds(Set<KapuaId> tagIds);\n+\n+    /**\n+     * Gets the {@link Group#getId()}.\n+     *\n+     * @return The {@link Group#getId()}.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"groupId\")\n     @XmlJavaTypeAdapter(KapuaIdAdapter.class)\n     KapuaId getGroupId();\n \n     /**\n-     * Set the group identifier\n+     * Sets the {@link Group#getId()}.\n      *\n-     * @param groupId\n+     * @param groupId The {@link Group#getId()}.\n+     * @since 1.0.0\n      */\n     void setGroupId(KapuaId groupId);\n \n     /**\n-     * Get the client identifier\n+     * Gets the client identifier.\n      *\n-     * @return\n+     * @return The client identifier.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"clientId\")\n     String getClientId();\n \n     /**\n-     * Set the client identifier\n+     * Sets the client identifier.\n      *\n-     * @param clientId\n+     * @param clientId The client identifier.\n+     * @since 1.0.0\n      */\n     void setClientId(String clientId);\n \n     /**\n-     * Get the connection identifier\n+     * Gets the {@link DeviceConnection#getId()}.\n      *\n-     * @return\n+     * @return The {@link DeviceConnection#getId()}.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"connectionId\")\n     @XmlJavaTypeAdapter(KapuaIdAdapter.class)\n     KapuaId getConnectionId();\n \n     /**\n-     * Set the connection identifier\n+     * Sets the {@link DeviceConnection#getId()}.\n      *\n-     * @param connectionId\n+     * @param connectionId The {@link DeviceConnection#getId()}.\n+     * @since 1.0.0\n      */\n     void setConnectionId(KapuaId connectionId);\n \n     /**\n-     * Gets the {@link DeviceConnection}\n+     * Gets the {@link DeviceConnection}.\n      *\n-     * @return\n+     * @return The {@link DeviceConnection}.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"connection\")\n-    <C extends DeviceConnection> C getConnection();\n+    DeviceConnection getConnection();\n \n     /**\n-     * Get the connection status\n+     * Gets the {@link DeviceStatus}.\n      *\n-     * @return\n+     * @return The {@link DeviceStatus}.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"status\")\n     DeviceStatus getStatus();\n \n     /**\n-     * Set the connection status\n+     * Sets the {@link DeviceStatus}.\n      *\n-     * @param status\n+     * @param status The {@link DeviceStatus}.\n+     * @since 1.0.0\n      */\n     void setStatus(DeviceStatus status);\n \n     /**\n-     * Get the display name\n+     * Gets the display name.\n      *\n-     * @return\n+     * @return The display name.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"displayName\")\n     String getDisplayName();\n \n     /**\n-     * Set the display name\n+     * Sets the display name.\n      *\n-     * @param diplayName\n+     * @param diplayName The display name.\n+     * @since 1.0.0\n      */\n     void setDisplayName(String diplayName);\n \n     /**\n-     * Gets the last {@link DeviceEvent} {@link KapuaId}.\n+     * Gets the last {@link DeviceEvent#getId()}.\n      *\n-     * @return\n+     * @return The last {@link DeviceEvent#getId()}.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"lastEventId\")\n     @XmlJavaTypeAdapter(KapuaIdAdapter.class)\n     KapuaId getLastEventId();\n \n     /**\n-     * Set the last {@link DeviceEvent} {@link KapuaId}.\n+     * Sets the last {@link DeviceEvent#getId()}.\n      *\n-     * @param lastEventId\n+     * @param lastEventId The last {@link DeviceEvent#getId()}.\n+     * @since 1.0.0\n      */\n     void setLastEventId(KapuaId lastEventId);\n \n     /**\n-     * Get the last {@link DeviceEvent} for this {@link Device}.\n+     * Gets the last {@link DeviceEvent}.\n      *\n-     * @return The last {@link DeviceEvent} for this {@link Device}.\n+     * @return The last {@link DeviceEvent}.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"lastEvent\")\n-    <E extends DeviceEvent> E getLastEvent();\n+    DeviceEvent getLastEvent();\n \n     /**\n-     * Get the serial number\n+     * Gets the serial number.\n      *\n-     * @return\n+     * @return The serial number.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"serialNumber\")\n     String getSerialNumber();\n \n     /**\n-     * Set the serial number\n+     * Sets the serial number.\n      *\n-     * @param serialNumber\n+     * @param serialNumber The serial number.\n+     * @since 1.0.0\n      */\n     void setSerialNumber(String serialNumber);\n \n     /**\n-     * Get the model identifier\n+     * Gets the model identifier.\n      *\n-     * @return\n+     * @return The model identifier.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"modelId\")\n     String getModelId();\n \n     /**\n-     * Set the model identifier\n+     * Sets the model identifier.\n      *\n-     * @param modelId\n+     * @param modelId The model identifier.\n+     * @since 1.0.0\n      */\n     void setModelId(String modelId);\n \n     /**\n-     * Get the model name\n+     * Gets the model name.\n      *\n-     * @return\n+     * @return The model name.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"modelName\")\n     String getModelName();\n \n     /**\n-     * Set the model name\n+     * Sets the model name.\n      *\n-     * @param modelName\n+     * @param modelName The model name.\n+     * @since 1.0.0\n      */\n     void setModelName(String modelName);\n \n     /**\n-     * Get the imei\n+     * Gets the modem imei.\n      *\n-     * @return\n+     * @return The modem imei.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"imei\")\n     String getImei();\n \n     /**\n-     * Set the imei\n+     * Sets the modem imei.\n      *\n-     * @param imei\n+     * @param imei The modem imei.\n+     * @since 1.0.0\n      */\n     void setImei(String imei);\n \n     /**\n-     * Get the imsi\n+     * Gets the modem imsi.\n      *\n-     * @return\n+     * @return The modem imsi.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"imsi\")\n     String getImsi();\n \n     /**\n-     * Set the imsi\n+     * Sets the modem imsi.\n      *\n-     * @param imsi\n+     * @param imsi The modem imsi.\n+     * @since 1.0.0\n      */\n     void setImsi(String imsi);\n \n     /**\n-     * Get the iccid\n+     * Gets the modem iccid.\n      *\n-     * @return\n+     * @return The modem iccid.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"iccid\")\n     String getIccid();\n \n     /**\n-     * Set the iccid\n+     * Sets the modem iccid.\n      *\n-     * @param iccid\n+     * @param iccid The modem iccid.\n+     * @since 1.0.0\n      */\n     void setIccid(String iccid);\n \n     /**\n-     * Get bios version\n+     * Gets the bios version.\n      *\n-     * @return\n+     * @return The bios version.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"biosVersion\")\n     String getBiosVersion();\n \n     /**\n-     * Set bios version\n+     * Sets the bios version.\n      *\n-     * @param biosVersion\n+     * @param biosVersion The bios version.\n+     * @since 1.0.0\n      */\n     void setBiosVersion(String biosVersion);\n \n     /**\n-     * Get firmware version\n+     * Gets the firmware version.\n      *\n-     * @return\n+     * @return The firmware version.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"firmwareVersion\")\n     String getFirmwareVersion();\n \n     /**\n-     * Set firmware version\n+     * Sets the firmware version.\n      *\n-     * @param firmwareVersion\n+     * @param firmwareVersion The firmware version.\n+     * @since 1.0.0\n      */\n     void setFirmwareVersion(String firmwareVersion);\n \n     /**\n-     * Get os version\n+     * Gets the OS version.\n      *\n-     * @return\n+     * @return The OS version.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"osVersion\")\n     String getOsVersion();\n \n     /**\n-     * Set os version\n+     * Sets the OS version.\n      *\n-     * @param osVersion\n+     * @param osVersion The OS version.\n+     * @since 1.0.0\n      */\n     void setOsVersion(String osVersion);\n \n     /**\n-     * Get jvm version\n+     * Gets the JVM version.\n      *\n-     * @return\n+     * @return The JVM version.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"jvmVersion\")\n     String getJvmVersion();\n \n     /**\n-     * Set jvm version\n+     * Sets the JVM version.\n      *\n-     * @param jvmVersion\n+     * @param jvmVersion The JVM version.\n+     * @since 1.0.0\n      */\n     void setJvmVersion(String jvmVersion);\n \n     /**\n-     * Get osgi framework version\n+     * Gets the OSGi framework version.\n      *\n-     * @return\n+     * @return The OSGi framework version.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"osgiFrameworkVersion\")\n     String getOsgiFrameworkVersion();\n \n     /**\n-     * Set osgi framework version\n+     * Sets the OSGi framework version.\n      *\n-     * @param osgiFrameworkVersion\n+     * @param osgiFrameworkVersion The OSGi framework version.\n+     * @since 1.0.0\n      */\n     void setOsgiFrameworkVersion(String osgiFrameworkVersion);\n \n     /**\n-     * Get application framework version\n+     * Gets the application framework version.\n      *\n-     * @return\n+     * @return The application framework version.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"applicationFrameworkVersion\")\n     String getApplicationFrameworkVersion();\n \n     /**\n-     * Set application framework version\n+     * Sets the application framework version.\n      *\n-     * @param appFrameworkVersion\n+     * @param appFrameworkVersion The application framework version.\n+     * @since 1.0.0\n      */\n     void setApplicationFrameworkVersion(String appFrameworkVersion);\n \n     /**\n-     * Gets the device's primary connection interface name\n+     * Gets the device network interfaces name.\n      *\n-     * @return The device's primary connection interface name\n+     * @return The device network interfaces name.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"connectionInterface\")\n     String getConnectionInterface();\n \n     /**\n-     * Sets the device's primary connection interface name\n+     * Sets the device network interfaces name.\n      *\n-     * @param connectionInterface The device's primary connection interface name\n+     * @param connectionInterface The device network interfaces name.\n+     * @since 1.0.0\n      */\n     void setConnectionInterface(String connectionInterface);\n \n     /**\n-     * Gets the device's primary connection interface IP address\n+     * Gets the device network interfaces IP.\n      *\n-     * @return The device's primary connection interface IP address\n+     * @return The device network interfaces IP.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"connectionIp\")\n     String getConnectionIp();\n \n     /**\n-     * Sets the device's primary connection interface IP address\n+     * Sets the device network interfaces IP.\n      *\n-     * @param connectionIp The device's primary connection interface IP address\n+     * @param connectionIp The device network interfaces IP.\n+     * @since 1.0.0\n      */\n     void setConnectionIp(String connectionIp);\n \n     /**\n-     * Get application identifiers\n+     * Gets the application identifiers supported.\n      *\n-     * @return\n+     * @return The application identifiers supported.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"applicationIdentifiers\")\n     String getApplicationIdentifiers();\n \n     /**\n-     * Set application identifiers\n+     * Sets the application identifiers supported.\n      *\n-     * @param applicationIdentifiers\n+     * @param applicationIdentifiers The application identifiers supported.\n+     * @since 1.0.0\n      */\n     void setApplicationIdentifiers(String applicationIdentifiers);\n \n     /**\n-     * Get accept encoding flag\n+     * Gets the accept encodings.\n      *\n-     * @return\n+     * @return The accept encodings.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"acceptEncoding\")\n     String getAcceptEncoding();\n \n     /**\n-     * Set accept encoding flag\n+     * Sets the accept encodings.\n      *\n-     * @param acceptEncoding\n+     * @param acceptEncoding The accept encodings.\n+     * @since 1.0.0\n      */\n     void setAcceptEncoding(String acceptEncoding);\n \n     /**\n-     * Get custom attribute 1\n+     * Gets the custom attribute 1.\n      *\n-     * @return\n+     * @return The custom attribute 1.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"customAttribute1\")\n     String getCustomAttribute1();\n \n     /**\n-     * Set custom attribute 1\n+     * Sets the custom attribute 1.\n      *\n-     * @param customAttribute1\n+     * @param customAttribute1 The custom attribute 1.\n+     * @since 1.0.0\n      */\n     void setCustomAttribute1(String customAttribute1);\n \n     /**\n-     * Get custom attribute 2\n+     * Gets the custom attribute 2.\n      *\n-     * @return\n+     * @return The custom attribute 2.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"customAttribute2\")\n     String getCustomAttribute2();\n \n     /**\n-     * Set custom attribute 2\n+     * Sets the custom attribute 2.\n      *\n-     * @param customAttribute2\n+     * @param customAttribute2 The custom attribute 2.\n+     * @since 1.0.0\n      */\n     void setCustomAttribute2(String customAttribute2);\n \n     /**\n-     * Get custom attribute 3\n+     * Gets the custom attribute 3.\n      *\n-     * @return\n+     * @return The custom attribute 3.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"customAttribute3\")\n     String getCustomAttribute3();\n \n     /**\n-     * Set custom attribute 3\n+     * Sets the custom attribute 3.\n      *\n-     * @param customAttribute3\n+     * @param customAttribute3 The custom attribute 3.\n+     * @since 1.0.0\n      */\n     void setCustomAttribute3(String customAttribute3);\n \n     /**\n-     * Get custom attribute 4\n+     * Gets the custom attribute 4.\n      *\n-     * @return\n+     * @return The custom attribute 4.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"customAttribute4\")\n     String getCustomAttribute4();\n \n     /**\n-     * Set custom attribute 4\n+     * Sets the custom attribute 4.\n      *\n-     * @param customAttribute4\n+     * @param customAttribute4 The custom attribute 4.\n+     * @since 1.0.0\n      */\n     void setCustomAttribute4(String customAttribute4);\n \n     /**\n-     * Get custom attribute 5\n+     * Gets the custom attribute 5.\n      *\n-     * @return\n+     * @return The custom attribute 5.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"customAttribute5\")\n     String getCustomAttribute5();\n \n     /**\n-     * Set custom attribute 5\n+     * Sets the custom attribute 5.\n      *\n-     * @param customAttribute5\n+     * @param customAttribute5 The custom attribute 5.\n+     * @since 1.0.0\n      */\n     void setCustomAttribute5(String customAttribute5);\n+\n+    /**\n+     * Gets the {@link DeviceExtendedProperty} {@link List}.\n+     *\n+     * @return The {@link DeviceExtendedProperty} {@link List}.\n+     * @since 1.5.0\n+     */\n+    @XmlElement(name = \"extendedProperties\")\n+    List<DeviceExtendedProperty> getExtendedProperties();\n+\n+    /**\n+     * Add a {@link DeviceExtendedProperty} to the {@link List}.\n+     *\n+     * @param extendedProperty The {@link DeviceExtendedProperty} to add.\n+     * @since 1.5.0\n+     */\n+    void addExtendedProperty(DeviceExtendedProperty extendedProperty);\n+\n+    /**\n+     * Sets the {@link DeviceExtendedProperty} {@link List}.\n+     *\n+     * @param extendedProperties The {@link DeviceExtendedProperty} {@link List}.\n+     * @since 1.5.0\n+     */\n+    void setExtendedProperties(List<DeviceExtendedProperty> extendedProperties);\n }"
  },
  {
    "sha": "e0feeb23d4376ac611a9bd1a50a22a32ab894679",
    "filename": "service/device/registry/api/src/main/java/org/eclipse/kapua/service/device/registry/DeviceAttributes.java",
    "status": "modified",
    "additions": 144,
    "deletions": 36,
    "changes": 180,
    "blob_url": "https://github.com/eclipse/kapua/blob/2667032116e14abea89131a72f7452b21fbfac14/service/device/registry/api/src/main/java/org/eclipse/kapua/service/device/registry/DeviceAttributes.java",
    "raw_url": "https://github.com/eclipse/kapua/raw/2667032116e14abea89131a72f7452b21fbfac14/service/device/registry/api/src/main/java/org/eclipse/kapua/service/device/registry/DeviceAttributes.java",
    "contents_url": "https://api.github.com/repos/eclipse/kapua/contents/service/device/registry/api/src/main/java/org/eclipse/kapua/service/device/registry/DeviceAttributes.java?ref=2667032116e14abea89131a72f7452b21fbfac14",
    "patch": "@@ -23,170 +23,278 @@\n \n     /**\n      * Group id.\n+     *\n+     * @since 1.0.0\n      */\n     public static final String GROUP_ID = \"groupId\";\n \n     /**\n      * Tag id.\n+     *\n+     * @since 1.0.0\n      */\n     public static final String TAG_IDS = \"tagIds\";\n \n     /**\n-     * Client identifier\n+     * Client identifier.\n+     *\n+     * @since 1.0.0\n      */\n     public static final String CLIENT_ID = \"clientId\";\n     /**\n-     * Display name\n+     * Display name.\n+     *\n+     * @since 1.0.0\n      */\n     public static final String DISPLAY_NAME = \"displayName\";\n \n     /**\n      * Connection id.\n+     *\n+     * @since 1.0.0\n      */\n     public static final String CONNECTION_ID = \"connectionId\";\n \n     /**\n-     * Connection\n+     * Connection.\n+     *\n+     * @since 1.0.0\n      */\n     public static final String CONNECTION = \"connection\";\n \n     /**\n-     * Connection status\n+     * Connection status.\n+     *\n+     * @since 1.0.0\n      */\n     public static final String CONNECTION_STATUS = CONNECTION + \".status\";\n \n     /**\n-     * Connection protocol\n+     * Connection protocol.\n+     *\n+     * @since 1.0.0\n      */\n     public static final String CONNECTION_PROTOCOL = CONNECTION + \".protocol\";\n \n     /**\n-     * Connection clientId\n+     * Connection clientId.\n+     *\n+     * @since 1.0.0\n      */\n     public static final String CONNECTION_CLIENT_ID = CONNECTION + \".clientId\";\n \n     /**\n-     * Connection Client IP\n+     * Connection Client IP.\n+     *\n+     * @since 1.0.0\n      */\n     public static final String CLIENT_IP = CONNECTION + \".clientIp\";\n \n     /**\n-     * Last event\n+     * Last event.\n+     *\n+     * @since 1.0.0\n      */\n     public static final String LAST_EVENT = \"lastEvent\";\n \n     /**\n-     * Last event on\n+     * Last event on.\n+     *\n+     * @since 1.0.0\n      */\n     public static final String LAST_EVENT_ON = LAST_EVENT + \".receivedOn\";\n \n     /**\n-     * Last event resource\n+     * Last event resource.\n+     *\n+     * @since 1.0.0\n      */\n     public static final String LAST_EVENT_RESOURCE = LAST_EVENT + \".resource\";\n \n     /**\n-     * Serial number\n+     * Serial number.\n+     *\n+     * @since 1.0.0\n      */\n     public static final String SERIAL_NUMBER = \"serialNumber\";\n     /**\n-     * Imei\n+     * Imei.\n+     *\n+     * @since 1.0.0\n      */\n     public static final String IMEI = \"imei\";\n     /**\n-     * Imsi\n+     * Imsi.\n+     *\n+     * @since 1.0.0\n      */\n     public static final String IMSI = \"imsi\";\n     /**\n-     * Iccd\n+     * Iccd.\n+     *\n+     * @since 1.0.0\n      */\n     public static final String ICCID = \"iccid\";\n     /**\n-     * Model identifier\n+     * Model identifier.\n+     *\n+     * @since 1.0.0\n      */\n     public static final String MODEL_ID = \"modelId\";\n     /**\n-     * Model name\n+     * Model name.\n+     *\n+     * @since 1.0.0\n      */\n     public static final String MODEL_NAME = \"modelName\";\n     /**\n-     * Bios version\n+     * Bios version.\n+     *\n+     * @since 1.0.0\n      */\n     public static final String BIOS_VERSION = \"biosVersion\";\n     /**\n-     * Firmware version\n+     * Firmware version.\n+     *\n+     * @since 1.0.0\n      */\n     public static final String FIRMWARE_VERSION = \"firmwareVersion\";\n     /**\n-     * Operating system version\n+     * Operating system version.\n+     *\n+     * @since 1.0.0\n      */\n     public static final String OS_VERSION = \"osVersion\";\n     /**\n-     * Jvm version\n+     * Jvm version.\n+     *\n+     * @since 1.0.0\n      */\n     public static final String JVM_VERSION = \"jvmVersion\";\n     /**\n-     * Osgi framework version\n+     * Osgi framework version.\n+     *\n+     * @since 1.0.0\n      */\n     public static final String OSGI_FRAMEWORK_VERSION = \"osgiFrameworkVersion\";\n     /**\n-     * Application framework version\n+     * Application framework version.\n+     *\n+     * @since 1.0.0\n      */\n     public static final String APPLICATION_FRAMEWORK_VERSION = \"applicationFrameworkVersion\";\n     /**\n-     * Application identifier\n+     * Application identifier.\n+     *\n+     * @since 1.0.0\n      */\n     public static final String APPLICATION_IDENTIFIERS = \"applicationIdentifiers\";\n     /**\n-     * Custom attribute 1\n+     * Custom attribute 1.\n+     *\n+     * @since 1.0.0\n      */\n     public static final String CUSTOM_ATTRIBUTE_1 = \"customAttribute1\";\n     /**\n-     * Custom attribute 2\n+     * Custom attribute 2.\n+     *\n+     * @since 1.0.0\n      */\n     public static final String CUSTOM_ATTRIBUTE_2 = \"customAttribute2\";\n     /**\n-     * Custom attribute 3\n+     * Custom attribute 3.\n+     *\n+     * @since 1.0.0\n      */\n     public static final String CUSTOM_ATTRIBUTE_3 = \"customAttribute3\";\n     /**\n-     * Custom attribute 4\n+     * Custom attribute 4.\n+     *\n+     * @since 1.0.0\n      */\n     public static final String CUSTOM_ATTRIBUTE_4 = \"customAttribute4\";\n     /**\n-     * Custom attribute 5\n+     * Custom attribute 5.\n+     *\n+     * @since 1.0.0\n      */\n     public static final String CUSTOM_ATTRIBUTE_5 = \"customAttribute5\";\n     /**\n-     * Accept encoding\n+     * Accept encoding.\n+     *\n+     * @since 1.0.0\n      */\n     public static final String ACCEPT_ENCODING = \"acceptEncoding\";\n     /**\n-     * Gps longitude\n+     * Gps longitude.\n+     *\n+     * @since 1.0.0\n      */\n     public static final String GPS_LONGITUDE = \"gpsLongitude\";\n     /**\n-     * Gps latitude\n+     * Gps latitude.\n+     *\n+     * @since 1.0.0\n      */\n     public static final String GPS_LATITUDE = \"gpsLatitude\";\n     /**\n-     * Device status\n+     * Device status.\n+     *\n+     * @since 1.0.0\n      */\n     public static final String STATUS = \"status\";\n     /**\n-     * Credentials mode\n+     * Credentials mode.\n+     *\n+     * @since 1.0.0\n      */\n     public static final String CREDENTIALS_MODE = \"credentialsMode\";\n     /**\n-     * Preferred user identifier\n+     * Preferred user identifier.\n+     *\n+     * @since 1.0.0\n      */\n     public static final String PREFERRED_USER_ID = \"preferredUserId\";\n     /**\n-     * Connection Interface\n+     * Connection Interface.\n+     *\n+     * @since 1.0.0\n      */\n     public static final String CONNECTION_INTERFACE = \"connectionInterface\";\n     /**\n-     * Connection IP\n+     * Connection IP.\n+     *\n+     * @since 1.0.0\n      */\n     public static final String CONNECTION_IP = \"connectionIp\";\n+\n+    //\n+    // Extended properties\n+    /**\n+     * {@link DeviceExtendedProperty}es\n+     *\n+     * @since 1.5.0\n+     */\n+    public static final String EXTENDED_PROPERTIES = \"extendedProperties\";\n+\n+    /**\n+     * {@link DeviceExtendedProperty}es group name\n+     *\n+     * @since 1.5.0\n+     */\n+    public static final String EXTENDED_PROPERTIES_GROUP_NAME = EXTENDED_PROPERTIES + \".groupName\";\n+\n+    /**\n+     * {@link DeviceExtendedProperty}es name\n+     *\n+     * @since 1.5.0\n+     */\n+    public static final String EXTENDED_PROPERTIES_NAME = EXTENDED_PROPERTIES + \"name\";\n+\n+    /**\n+     * {@link DeviceExtendedProperty}es value\n+     *\n+     * @since 1.5.0\n+     */\n+    public static final String EXTENDED_PROPERTIES_VALUE = EXTENDED_PROPERTIES + \"value\";\n }"
  },
  {
    "sha": "dbe78acd41f2dc25f6199c95d555d18fb3deacb6",
    "filename": "service/device/registry/api/src/main/java/org/eclipse/kapua/service/device/registry/DeviceCreator.java",
    "status": "modified",
    "additions": 207,
    "deletions": 125,
    "changes": 332,
    "blob_url": "https://github.com/eclipse/kapua/blob/2667032116e14abea89131a72f7452b21fbfac14/service/device/registry/api/src/main/java/org/eclipse/kapua/service/device/registry/DeviceCreator.java",
    "raw_url": "https://github.com/eclipse/kapua/raw/2667032116e14abea89131a72f7452b21fbfac14/service/device/registry/api/src/main/java/org/eclipse/kapua/service/device/registry/DeviceCreator.java",
    "contents_url": "https://api.github.com/repos/eclipse/kapua/contents/service/device/registry/api/src/main/java/org/eclipse/kapua/service/device/registry/DeviceCreator.java?ref=2667032116e14abea89131a72f7452b21fbfac14",
    "patch": "@@ -15,6 +15,8 @@\n import org.eclipse.kapua.model.KapuaUpdatableEntityCreator;\n import org.eclipse.kapua.model.id.KapuaId;\n import org.eclipse.kapua.model.id.KapuaIdAdapter;\n+import org.eclipse.kapua.service.authorization.group.Group;\n+import org.eclipse.kapua.service.device.registry.connection.DeviceConnection;\n import org.eclipse.kapua.service.device.registry.event.DeviceEvent;\n \n import javax.xml.bind.annotation.XmlAccessType;\n@@ -23,6 +25,7 @@\n import javax.xml.bind.annotation.XmlRootElement;\n import javax.xml.bind.annotation.XmlType;\n import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;\n+import java.util.List;\n \n /**\n  * {@link DeviceCreator} encapsulates all the information needed to create a new {@link Device} in the system.<br>\n@@ -63,416 +66,495 @@\n         \"customAttribute2\",\n         \"customAttribute3\",\n         \"customAttribute4\",\n-        \"customAttribute5\"\n-}, //\n-        factoryClass = DeviceXmlRegistry.class, factoryMethod = \"newDeviceCreator\")\n+        \"customAttribute5\",\n+        \"extendedProperties\"\n+}, factoryClass = DeviceXmlRegistry.class, factoryMethod = \"newDeviceCreator\")\n public interface DeviceCreator extends KapuaUpdatableEntityCreator<Device> {\n \n     /**\n-     * Get the group identifier\n+     * Gets the {@link Group#getId()}.\n      *\n-     * @return\n+     * @return The {@link Group#getId()}.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"groupId\")\n     @XmlJavaTypeAdapter(KapuaIdAdapter.class)\n     KapuaId getGroupId();\n \n     /**\n-     * Set the group identifier\n+     * Sets the {@link Group#getId()}.\n      *\n-     * @param groupId\n+     * @param groupId The {@link Group#getId()}.\n+     * @since 1.0.0\n      */\n     void setGroupId(KapuaId groupId);\n \n     /**\n-     * Get the client identifier\n+     * Gets the client identifier.\n      *\n-     * @return\n+     * @return The client identifier.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"clientId\")\n     String getClientId();\n \n     /**\n-     * Set the client identifier\n+     * Sets the client identifier.\n      *\n-     * @param clientId\n+     * @param clientId The client identifier.\n+     * @since 1.0.0\n      */\n     void setClientId(String clientId);\n \n     /**\n-     * Get the device status\n+     * Gets the {@link DeviceConnection#getId()}.\n      *\n-     * @return\n+     * @return The {@link DeviceConnection#getId()}.\n+     * @since 1.0.0\n      */\n-    @XmlElement\n-    DeviceStatus getStatus();\n+    @XmlElement(name = \"connectionId\")\n+    @XmlJavaTypeAdapter(KapuaIdAdapter.class)\n+    KapuaId getConnectionId();\n \n     /**\n-     * Sets the device status\n+     * Sets the {@link DeviceConnection#getId()}.\n      *\n-     * @param status\n+     * @param connectionId The {@link DeviceConnection#getId()}.\n+     * @since 1.0.0\n      */\n-    void setStatus(DeviceStatus status);\n+    void setConnectionId(KapuaId connectionId);\n \n     /**\n-     * Get the connection identifier\n+     * Gets the {@link DeviceStatus}.\n      *\n-     * @return\n+     * @return The {@link DeviceStatus}.\n+     * @since 1.0.0\n      */\n-    @XmlElement(name = \"connectionId\")\n-    @XmlJavaTypeAdapter(KapuaIdAdapter.class)\n-    KapuaId getConnectionId();\n+    @XmlElement(name = \"status\")\n+    DeviceStatus getStatus();\n \n     /**\n-     * Set the connection identifier\n+     * Sets the {@link DeviceStatus}.\n      *\n-     * @param connectionId\n+     * @param status The {@link DeviceStatus}.\n+     * @since 1.0.0\n      */\n-    void setConnectionId(KapuaId connectionId);\n+    void setStatus(DeviceStatus status);\n \n     /**\n-     * Get the last {@link DeviceEvent} identifier\n+     * Gets the display name.\n      *\n-     * @return\n+     * @return The display name.\n+     * @since 1.0.0\n      */\n-    @XmlElement(name = \"lastEventId\")\n-    @XmlJavaTypeAdapter(KapuaIdAdapter.class)\n-    KapuaId getLastEventId();\n+    @XmlElement(name = \"displayName\")\n+    String getDisplayName();\n \n     /**\n-     * Set the last {@link DeviceEvent} identifier.\n+     * Sets the display name.\n      *\n-     * @param lastEventId\n+     * @param diplayName The display name.\n+     * @since 1.0.0\n      */\n-    void setLastEventId(KapuaId lastEventId);\n+    void setDisplayName(String diplayName);\n \n     /**\n-     * Get the display name\n+     * Gets the last {@link DeviceEvent#getId()}.\n      *\n-     * @return\n+     * @return The last {@link DeviceEvent#getId()}.\n+     * @since 1.0.0\n      */\n-    @XmlElement(name = \"displayName\")\n-    String getDisplayName();\n+    @XmlElement(name = \"lastEventId\")\n+    @XmlJavaTypeAdapter(KapuaIdAdapter.class)\n+    KapuaId getLastEventId();\n \n     /**\n-     * Set the display name\n+     * Sets the last {@link DeviceEvent#getId()}.\n      *\n-     * @param displayName\n+     * @param lastEventId The last {@link DeviceEvent#getId()}.\n+     * @since 1.0.0\n      */\n-    void setDisplayName(String displayName);\n+    void setLastEventId(KapuaId lastEventId);\n \n     /**\n-     * Get the serial number\n+     * Gets the serial number.\n      *\n-     * @return\n+     * @return The serial number.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"serialNumber\")\n     String getSerialNumber();\n \n     /**\n-     * Set the serial number\n+     * Sets the serial number.\n      *\n-     * @param serialNumber\n+     * @param serialNumber The serial number.\n+     * @since 1.0.0\n      */\n     void setSerialNumber(String serialNumber);\n \n     /**\n-     * Get the model identifier\n+     * Gets the model identifier.\n      *\n-     * @return\n+     * @return The model identifier.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"modelId\")\n     String getModelId();\n \n     /**\n-     * Set the model identifier\n+     * Sets the model identifier.\n      *\n-     * @param modelId\n+     * @param modelId The model identifier.\n+     * @since 1.0.0\n      */\n     void setModelId(String modelId);\n \n     /**\n-     * Get the model name\n+     * Gets the model name.\n      *\n-     * @return\n+     * @return The model name.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"modelName\")\n     String getModelName();\n \n     /**\n-     * Set the model name\n+     * Sets the model name.\n      *\n-     * @param modelName\n+     * @param modelName The model name.\n+     * @since 1.0.0\n      */\n     void setModelName(String modelName);\n \n     /**\n-     * Get the imei\n+     * Gets the modem imei.\n      *\n-     * @return\n+     * @return The modem imei.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"imei\")\n     String getImei();\n \n     /**\n-     * Set the imei\n+     * Sets the modem imei.\n      *\n-     * @param imei\n+     * @param imei The modem imei.\n+     * @since 1.0.0\n      */\n     void setImei(String imei);\n \n     /**\n-     * Get the imsi\n+     * Gets the modem imsi.\n      *\n-     * @return\n+     * @return The modem imsi.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"imsi\")\n     String getImsi();\n \n     /**\n-     * Set the imsi\n+     * Sets the modem imsi.\n      *\n-     * @param imsi\n+     * @param imsi The modem imsi.\n+     * @since 1.0.0\n      */\n     void setImsi(String imsi);\n \n     /**\n-     * Get the iccid\n+     * Gets the modem iccid.\n      *\n-     * @return\n+     * @return The modem iccid.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"iccid\")\n     String getIccid();\n \n     /**\n-     * Set the iccid\n+     * Sets the modem iccid.\n      *\n-     * @param iccid\n+     * @param iccid The modem iccid.\n+     * @since 1.0.0\n      */\n     void setIccid(String iccid);\n \n     /**\n-     * Get bios version\n+     * Gets the bios version.\n      *\n-     * @return\n+     * @return The bios version.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"biosVersion\")\n     String getBiosVersion();\n \n     /**\n-     * Set bios version\n+     * Sets the bios version.\n      *\n-     * @param biosVersion\n+     * @param biosVersion The bios version.\n+     * @since 1.0.0\n      */\n     void setBiosVersion(String biosVersion);\n \n     /**\n-     * Get firmware version\n+     * Gets the firmware version.\n      *\n-     * @return\n+     * @return The firmware version.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"firmwareVersion\")\n     String getFirmwareVersion();\n \n     /**\n-     * Set firmware version\n+     * Sets the firmware version.\n      *\n-     * @param firmwareVersion\n+     * @param firmwareVersion The firmware version.\n+     * @since 1.0.0\n      */\n     void setFirmwareVersion(String firmwareVersion);\n \n     /**\n-     * Get os version\n+     * Gets the OS version.\n      *\n-     * @return\n+     * @return The OS version.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"osVersion\")\n     String getOsVersion();\n \n     /**\n-     * Set os version\n+     * Sets the OS version.\n      *\n-     * @param osVersion\n+     * @param osVersion The OS version.\n+     * @since 1.0.0\n      */\n     void setOsVersion(String osVersion);\n \n     /**\n-     * Get jvm version\n+     * Gets the JVM version.\n      *\n-     * @return\n+     * @return The JVM version.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"jvmVersion\")\n     String getJvmVersion();\n \n     /**\n-     * Set jvm version\n+     * Sets the JVM version.\n      *\n-     * @param jvmVersion\n+     * @param jvmVersion The JVM version.\n+     * @since 1.0.0\n      */\n     void setJvmVersion(String jvmVersion);\n \n     /**\n-     * Get osgi framework version\n+     * Gets the OSGi framework version.\n      *\n-     * @return\n+     * @return The OSGi framework version.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"osgiFrameworkVersion\")\n     String getOsgiFrameworkVersion();\n \n     /**\n-     * Set osgi framework version\n+     * Sets the OSGi framework version.\n      *\n-     * @param osgiFrameworkVersion\n+     * @param osgiFrameworkVersion The OSGi framework version.\n+     * @since 1.0.0\n      */\n     void setOsgiFrameworkVersion(String osgiFrameworkVersion);\n \n     /**\n-     * Get application framework version\n+     * Gets the application framework version.\n      *\n-     * @return\n+     * @return The application framework version.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"applicationFrameworkVersion\")\n     String getApplicationFrameworkVersion();\n \n     /**\n-     * Set application framework version\n+     * Sets the application framework version.\n      *\n-     * @param appFrameworkVersion\n+     * @param appFrameworkVersion The application framework version.\n+     * @since 1.0.0\n      */\n     void setApplicationFrameworkVersion(String appFrameworkVersion);\n \n     /**\n-     * Gets the device's primary connection interface name\n+     * Gets the device network interfaces name.\n      *\n-     * @return The device's primary connection interface name\n+     * @return The device network interfaces name.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"connectionInterface\")\n     String getConnectionInterface();\n \n     /**\n-     * Sets the device's primary connection interface name\n+     * Sets the device network interfaces name.\n      *\n-     * @param connectionInterface The device's primary connection interface name\n+     * @param connectionInterface The device network interfaces name.\n+     * @since 1.0.0\n      */\n     void setConnectionInterface(String connectionInterface);\n \n     /**\n-     * Gets the device's primary connection interface IP address\n+     * Gets the device network interfaces IP.\n      *\n-     * @return The device's primary connection interface IP address\n+     * @return The device network interfaces IP.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"connectionIp\")\n     String getConnectionIp();\n \n     /**\n-     * Sets the device's primary connection interface IP address\n+     * Sets the device network interfaces IP.\n      *\n-     * @param connectionIp The device's primary connection interface IP address\n+     * @param connectionIp The device network interfaces IP.\n+     * @since 1.0.0\n      */\n     void setConnectionIp(String connectionIp);\n \n     /**\n-     * Get application identifiers\n+     * Gets the application identifiers supported.\n      *\n-     * @return\n+     * @return The application identifiers supported.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"applicationIdentifiers\")\n     String getApplicationIdentifiers();\n \n     /**\n-     * Set application identifiers\n+     * Sets the application identifiers supported.\n      *\n-     * @param applicationIdentifiers\n+     * @param applicationIdentifiers The application identifiers supported.\n+     * @since 1.0.0\n      */\n     void setApplicationIdentifiers(String applicationIdentifiers);\n \n     /**\n-     * Get accept encoding flag\n+     * Gets the accept encodings.\n      *\n-     * @return\n+     * @return The accept encodings.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"acceptEncoding\")\n     String getAcceptEncoding();\n \n     /**\n-     * Set accept encoding flag\n+     * Sets the accept encodings.\n      *\n-     * @param acceptEncoding\n+     * @param acceptEncoding The accept encodings.\n+     * @since 1.0.0\n      */\n     void setAcceptEncoding(String acceptEncoding);\n \n     /**\n-     * Get custom attribute 1\n+     * Gets the custom attribute 1.\n      *\n-     * @return\n+     * @return The custom attribute 1.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"customAttribute1\")\n     String getCustomAttribute1();\n \n     /**\n-     * Set custom attribute 1\n+     * Sets the custom attribute 1.\n      *\n-     * @param customAttribute1\n+     * @param customAttribute1 The custom attribute 1.\n+     * @since 1.0.0\n      */\n     void setCustomAttribute1(String customAttribute1);\n \n     /**\n-     * Get custom attribute 2\n+     * Gets the custom attribute 2.\n      *\n-     * @return\n+     * @return The custom attribute 2.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"customAttribute2\")\n     String getCustomAttribute2();\n \n     /**\n-     * Set custom attribute 2\n+     * Sets the custom attribute 2.\n      *\n-     * @param customAttribute2\n+     * @param customAttribute2 The custom attribute 2.\n+     * @since 1.0.0\n      */\n     void setCustomAttribute2(String customAttribute2);\n \n     /**\n-     * Get custom attribute 3\n+     * Gets the custom attribute 3.\n      *\n-     * @return\n+     * @return The custom attribute 3.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"customAttribute3\")\n     String getCustomAttribute3();\n \n     /**\n-     * Set custom attribute 3\n+     * Sets the custom attribute 3.\n      *\n-     * @param customAttribute3\n+     * @param customAttribute3 The custom attribute 3.\n+     * @since 1.0.0\n      */\n     void setCustomAttribute3(String customAttribute3);\n \n     /**\n-     * Get custom attribute 4\n+     * Gets the custom attribute 4.\n      *\n-     * @return\n+     * @return The custom attribute 4.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"customAttribute4\")\n     String getCustomAttribute4();\n \n     /**\n-     * Set custom attribute 4\n+     * Sets the custom attribute 4.\n      *\n-     * @param customAttribute4\n+     * @param customAttribute4 The custom attribute 4.\n+     * @since 1.0.0\n      */\n     void setCustomAttribute4(String customAttribute4);\n \n     /**\n-     * Get custom attribute 5\n+     * Gets the custom attribute 5.\n      *\n-     * @return\n+     * @return The custom attribute 5.\n+     * @since 1.0.0\n      */\n     @XmlElement(name = \"customAttribute5\")\n     String getCustomAttribute5();\n \n     /**\n-     * Set custom attribute 5\n+     * Sets the custom attribute 5.\n      *\n-     * @param customAttribute5\n+     * @param customAttribute5 The custom attribute 5.\n+     * @since 1.0.0\n      */\n     void setCustomAttribute5(String customAttribute5);\n+\n+    /**\n+     * Gets the {@link DeviceExtendedProperty} {@link List}.\n+     *\n+     * @return The {@link DeviceExtendedProperty} {@link List}.\n+     * @since 1.5.0\n+     */\n+    @XmlElement(name = \"extendedProperties\")\n+    List<DeviceExtendedProperty> getExtendedProperties();\n+\n+    /**\n+     * Add a {@link DeviceExtendedProperty} to the {@link List}.\n+     *\n+     * @param extendedProperty The {@link DeviceExtendedProperty} to add.\n+     * @since 1.5.0\n+     */\n+    void addExtendedProperty(DeviceExtendedProperty extendedProperty);\n+\n+    /**\n+     * Sets the {@link DeviceExtendedProperty} {@link List}.\n+     *\n+     * @param extendedProperties The {@link DeviceExtendedProperty} {@link List}.\n+     * @since 1.5.0\n+     */\n+    void setExtendedProperties(List<DeviceExtendedProperty> extendedProperties);\n }"
  },
  {
    "sha": "16f987b388e2e3df2ccf45ff82d0f15d25de222d",
    "filename": "service/device/registry/api/src/main/java/org/eclipse/kapua/service/device/registry/DeviceExtendedProperty.java",
    "status": "added",
    "additions": 79,
    "deletions": 0,
    "changes": 79,
    "blob_url": "https://github.com/eclipse/kapua/blob/2667032116e14abea89131a72f7452b21fbfac14/service/device/registry/api/src/main/java/org/eclipse/kapua/service/device/registry/DeviceExtendedProperty.java",
    "raw_url": "https://github.com/eclipse/kapua/raw/2667032116e14abea89131a72f7452b21fbfac14/service/device/registry/api/src/main/java/org/eclipse/kapua/service/device/registry/DeviceExtendedProperty.java",
    "contents_url": "https://api.github.com/repos/eclipse/kapua/contents/service/device/registry/api/src/main/java/org/eclipse/kapua/service/device/registry/DeviceExtendedProperty.java?ref=2667032116e14abea89131a72f7452b21fbfac14",
    "patch": "@@ -0,0 +1,79 @@\n+/*******************************************************************************\n+ * Copyright (c) 2021 Eurotech and/or its affiliates and others\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *     Eurotech - initial API and implementation\n+ *******************************************************************************/\n+package org.eclipse.kapua.service.device.registry;\n+\n+import org.eclipse.kapua.KapuaSerializable;\n+\n+import javax.xml.bind.annotation.XmlAccessType;\n+import javax.xml.bind.annotation.XmlAccessorType;\n+import javax.xml.bind.annotation.XmlRootElement;\n+import javax.xml.bind.annotation.XmlType;\n+\n+/**\n+ * {@link Device} extended property definition.\n+ *\n+ * @since 1.5.0\n+ */\n+@XmlRootElement(name = \"deviceExtendedProperty\")\n+@XmlAccessorType(XmlAccessType.PROPERTY)\n+@XmlType(factoryClass = DeviceXmlRegistry.class, factoryMethod = \"newDeviceExtendedProperty\")\n+public interface DeviceExtendedProperty extends KapuaSerializable {\n+\n+    /**\n+     * Gets the group name.\n+     *\n+     * @return The group name.\n+     * @since 1.5.0\n+     */\n+    String getGroupName();\n+\n+    /**\n+     * Sets the group name.\n+     *\n+     * @param groupName The group name.\n+     * @since 1.5.0\n+     */\n+    void setGroupName(String groupName);\n+\n+    /**\n+     * Gets the name.\n+     *\n+     * @return The name.\n+     * @since 1.5.0\n+     */\n+    String getName();\n+\n+    /**\n+     * Sets the name.\n+     *\n+     * @param name The name.\n+     * @since 1.5.0\n+     */\n+    void setName(String name);\n+\n+    /**\n+     * Gets the value.\n+     *\n+     * @return The value.\n+     * @since 1.5.0\n+     */\n+    String getValue();\n+\n+    /**\n+     * Sets the value.\n+     *\n+     * @param value The value.\n+     * @since 1.5.0\n+     */\n+    void setValue(String value);\n+}"
  },
  {
    "sha": "49d14efef9ff3692d2122ee5a66977935e207e95",
    "filename": "service/device/registry/api/src/main/java/org/eclipse/kapua/service/device/registry/DeviceFactory.java",
    "status": "modified",
    "additions": 13,
    "deletions": 1,
    "changes": 14,
    "blob_url": "https://github.com/eclipse/kapua/blob/2667032116e14abea89131a72f7452b21fbfac14/service/device/registry/api/src/main/java/org/eclipse/kapua/service/device/registry/DeviceFactory.java",
    "raw_url": "https://github.com/eclipse/kapua/raw/2667032116e14abea89131a72f7452b21fbfac14/service/device/registry/api/src/main/java/org/eclipse/kapua/service/device/registry/DeviceFactory.java",
    "contents_url": "https://api.github.com/repos/eclipse/kapua/contents/service/device/registry/api/src/main/java/org/eclipse/kapua/service/device/registry/DeviceFactory.java?ref=2667032116e14abea89131a72f7452b21fbfac14",
    "patch": "@@ -16,7 +16,7 @@\n import org.eclipse.kapua.model.id.KapuaId;\n \n /**\n- * {@link DeviceFactory} definition.\n+ * {@link Device} {@link KapuaEntityFactory} definition.\n  *\n  * @see org.eclipse.kapua.model.KapuaEntityFactory\n  * @since 1.0.0\n@@ -30,7 +30,19 @@\n      * @param clientId The client id to set into the {@link DeviceCreator}\n      * @return The newly instantiated {@link DeviceCreator}.\n      * @since 1.0.0\n+     * @deprecated Since 1.5.0. Please use {@link #newCreator(KapuaId)}.\n      */\n+    @Deprecated\n     DeviceCreator newCreator(KapuaId scopeId, String clientId);\n \n+    /**\n+     * Instantiates a new {@link DeviceExtendedProperty}.\n+     *\n+     * @param groupName The {@link DeviceExtendedProperty#getGroupName()}.\n+     * @param name      The {@link DeviceExtendedProperty#getName()}.\n+     * @param value     The {@link DeviceExtendedProperty#getValue()}.\n+     * @return The newly instantiated {@link DeviceExtendedProperty}.\n+     * @since 1.5.0\n+     */\n+    DeviceExtendedProperty newExtendedProperty(String groupName, String name, String value);\n }"
  },
  {
    "sha": "c5b83e5cbbfe8b8e2d9bab5a8ad18f3120fb5518",
    "filename": "service/device/registry/api/src/main/java/org/eclipse/kapua/service/device/registry/DeviceXmlRegistry.java",
    "status": "modified",
    "additions": 10,
    "deletions": 0,
    "changes": 10,
    "blob_url": "https://github.com/eclipse/kapua/blob/2667032116e14abea89131a72f7452b21fbfac14/service/device/registry/api/src/main/java/org/eclipse/kapua/service/device/registry/DeviceXmlRegistry.java",
    "raw_url": "https://github.com/eclipse/kapua/raw/2667032116e14abea89131a72f7452b21fbfac14/service/device/registry/api/src/main/java/org/eclipse/kapua/service/device/registry/DeviceXmlRegistry.java",
    "contents_url": "https://api.github.com/repos/eclipse/kapua/contents/service/device/registry/api/src/main/java/org/eclipse/kapua/service/device/registry/DeviceXmlRegistry.java?ref=2667032116e14abea89131a72f7452b21fbfac14",
    "patch": "@@ -57,4 +57,14 @@ public DeviceListResult newDeviceListResult() {\n     public DeviceQuery newQuery() {\n         return DEVICE_FACTORY.newQuery(null);\n     }\n+\n+    /**\n+     * Instantiates a new {@link DeviceExtendedProperty}.\n+     *\n+     * @return The newly instantiated {@link DeviceExtendedProperty}.\n+     * @since 1.5.0\n+     */\n+    public DeviceExtendedProperty newDeviceExtendedProperty() {\n+        return DEVICE_FACTORY.newExtendedProperty(null, null, null);\n+    }\n }"
  },
  {
    "sha": "f2df32fab09b177156ea4015066a28a1c54f1e6c",
    "filename": "service/device/registry/internal/src/main/java/org/eclipse/kapua/service/device/registry/internal/DeviceCreatorImpl.java",
    "status": "modified",
    "additions": 29,
    "deletions": 41,
    "changes": 70,
    "blob_url": "https://github.com/eclipse/kapua/blob/2667032116e14abea89131a72f7452b21fbfac14/service/device/registry/internal/src/main/java/org/eclipse/kapua/service/device/registry/internal/DeviceCreatorImpl.java",
    "raw_url": "https://github.com/eclipse/kapua/raw/2667032116e14abea89131a72f7452b21fbfac14/service/device/registry/internal/src/main/java/org/eclipse/kapua/service/device/registry/internal/DeviceCreatorImpl.java",
    "contents_url": "https://api.github.com/repos/eclipse/kapua/contents/service/device/registry/internal/src/main/java/org/eclipse/kapua/service/device/registry/internal/DeviceCreatorImpl.java?ref=2667032116e14abea89131a72f7452b21fbfac14",
    "patch": "@@ -16,17 +16,21 @@\n import org.eclipse.kapua.model.id.KapuaId;\n import org.eclipse.kapua.service.device.registry.Device;\n import org.eclipse.kapua.service.device.registry.DeviceCreator;\n+import org.eclipse.kapua.service.device.registry.DeviceExtendedProperty;\n import org.eclipse.kapua.service.device.registry.DeviceStatus;\n \n+import javax.validation.constraints.NotNull;\n+import java.util.ArrayList;\n+import java.util.List;\n+\n /**\n  * {@link DeviceCreator} implementation.\n  *\n  * @since 1.0.0\n  */\n public class DeviceCreatorImpl extends AbstractKapuaUpdatableEntityCreator<Device> implements DeviceCreator {\n \n-    private static final long serialVersionUID = 8628137091890107296L;\n-\n+    private static final long serialVersionUID = 8497299443773395462L;\n     private KapuaId groupId;\n     private String clientId;\n     private DeviceStatus status = DeviceStatus.ENABLED;\n@@ -49,18 +53,17 @@\n     private String connectionIp;\n     private String applicationIdentifiers;\n     private String acceptEncoding;\n-    private Double gpsLongitude;\n-    private Double gpsLatitude;\n     private String customAttribute1;\n     private String customAttribute2;\n     private String customAttribute3;\n     private String customAttribute4;\n     private String customAttribute5;\n+    private List<DeviceExtendedProperty> extendedProperties;\n \n     /**\n      * Constructor.\n      *\n-     * @param scopeId\n+     * @param scopeId The scope {@link KapuaId}.\n      * @since 1.0.0\n      */\n     protected DeviceCreatorImpl(KapuaId scopeId) {\n@@ -87,10 +90,12 @@ public void setClientId(String clientId) {\n         this.clientId = clientId;\n     }\n \n+    @Override\n     public DeviceStatus getStatus() {\n         return status;\n     }\n \n+    @Override\n     public void setStatus(DeviceStatus status) {\n         this.status = status;\n     }\n@@ -285,42 +290,6 @@ public void setAcceptEncoding(String acceptEncoding) {\n         this.acceptEncoding = acceptEncoding;\n     }\n \n-    /**\n-     * Get the gps longitude\n-     *\n-     * @return\n-     */\n-    public Double getGpsLongitude() {\n-        return gpsLongitude;\n-    }\n-\n-    /**\n-     * Set the gps longitude\n-     *\n-     * @param gpsLongitude\n-     */\n-    public void setGpsLongitude(Double gpsLongitude) {\n-        this.gpsLongitude = gpsLongitude;\n-    }\n-\n-    /**\n-     * Get the gps latitude\n-     *\n-     * @return\n-     */\n-    public Double getGpsLatitude() {\n-        return gpsLatitude;\n-    }\n-\n-    /**\n-     * Set the gps latitude\n-     *\n-     * @param gpsLatitude\n-     */\n-    public void setGpsLatitude(Double gpsLatitude) {\n-        this.gpsLatitude = gpsLatitude;\n-    }\n-\n     @Override\n     public String getCustomAttribute1() {\n         return customAttribute1;\n@@ -370,4 +339,23 @@ public String getCustomAttribute5() {\n     public void setCustomAttribute5(String customAttribute5) {\n         this.customAttribute5 = customAttribute5;\n     }\n+\n+    @Override\n+    public List<DeviceExtendedProperty> getExtendedProperties() {\n+        if (extendedProperties == null) {\n+            extendedProperties = new ArrayList<>();\n+        }\n+\n+        return extendedProperties;\n+    }\n+\n+    @Override\n+    public void addExtendedProperty(@NotNull DeviceExtendedProperty extendedProperty) {\n+        getExtendedProperties().add(extendedProperty);\n+    }\n+\n+    @Override\n+    public void setExtendedProperties(List<DeviceExtendedProperty> extendedProperties) {\n+        this.extendedProperties = extendedProperties;\n+    }\n }"
  },
  {
    "sha": "186c57dd11d3e6067ad208b0664776ddc7551176",
    "filename": "service/device/registry/internal/src/main/java/org/eclipse/kapua/service/device/registry/internal/DeviceDAO.java",
    "status": "modified",
    "additions": 3,
    "deletions": 2,
    "changes": 5,
    "blob_url": "https://github.com/eclipse/kapua/blob/2667032116e14abea89131a72f7452b21fbfac14/service/device/registry/internal/src/main/java/org/eclipse/kapua/service/device/registry/internal/DeviceDAO.java",
    "raw_url": "https://github.com/eclipse/kapua/raw/2667032116e14abea89131a72f7452b21fbfac14/service/device/registry/internal/src/main/java/org/eclipse/kapua/service/device/registry/internal/DeviceDAO.java",
    "contents_url": "https://api.github.com/repos/eclipse/kapua/contents/service/device/registry/internal/src/main/java/org/eclipse/kapua/service/device/registry/internal/DeviceDAO.java?ref=2667032116e14abea89131a72f7452b21fbfac14",
    "patch": "@@ -68,6 +68,7 @@ public static Device create(EntityManager em, DeviceCreator deviceCreator) {\n         device.setCustomAttribute3(deviceCreator.getCustomAttribute3());\n         device.setCustomAttribute4(deviceCreator.getCustomAttribute4());\n         device.setCustomAttribute5(deviceCreator.getCustomAttribute5());\n+        device.setExtendedProperties(deviceCreator.getExtendedProperties());\n \n         device.setConnectionId(deviceCreator.getConnectionId());\n         device.setLastEventId(deviceCreator.getLastEventId());\n@@ -119,13 +120,13 @@ public static DeviceListResult query(EntityManager em, KapuaQuery query)\n         List<String> fetchAttributes = query.getFetchAttributes();\n \n         boolean deviceConnectionFetchAdded = false;\n-        if (fetchAttributes == null || !fetchAttributes.contains(DeviceAttributes.CONNECTION)) {\n+        if (!fetchAttributes.contains(DeviceAttributes.CONNECTION)) {\n             deviceConnectionFetchAdded = true;\n             query.addFetchAttributes(DeviceAttributes.CONNECTION);\n         }\n \n         boolean deviceLastEventFetchAdded = false;\n-        if (fetchAttributes == null || !fetchAttributes.contains(DeviceAttributes.LAST_EVENT)) {\n+        if (!fetchAttributes.contains(DeviceAttributes.LAST_EVENT)) {\n             deviceLastEventFetchAdded = true;\n             query.addFetchAttributes(DeviceAttributes.LAST_EVENT);\n         }"
  },
  {
    "sha": "fd62e5c85ff995e1df475541b06d5bc43211bb83",
    "filename": "service/device/registry/internal/src/main/java/org/eclipse/kapua/service/device/registry/internal/DeviceExtendedPropertyImpl.java",
    "status": "added",
    "additions": 142,
    "deletions": 0,
    "changes": 142,
    "blob_url": "https://github.com/eclipse/kapua/blob/2667032116e14abea89131a72f7452b21fbfac14/service/device/registry/internal/src/main/java/org/eclipse/kapua/service/device/registry/internal/DeviceExtendedPropertyImpl.java",
    "raw_url": "https://github.com/eclipse/kapua/raw/2667032116e14abea89131a72f7452b21fbfac14/service/device/registry/internal/src/main/java/org/eclipse/kapua/service/device/registry/internal/DeviceExtendedPropertyImpl.java",
    "contents_url": "https://api.github.com/repos/eclipse/kapua/contents/service/device/registry/internal/src/main/java/org/eclipse/kapua/service/device/registry/internal/DeviceExtendedPropertyImpl.java?ref=2667032116e14abea89131a72f7452b21fbfac14",
    "patch": "@@ -0,0 +1,142 @@\n+/*******************************************************************************\n+ * Copyright (c) 2021 Eurotech and/or its affiliates and others\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *     Eurotech - initial API and implementation\n+ *******************************************************************************/\n+package org.eclipse.kapua.service.device.registry.internal;\n+\n+import org.eclipse.kapua.service.device.registry.DeviceExtendedProperty;\n+\n+import javax.persistence.Basic;\n+import javax.persistence.Column;\n+import javax.persistence.Embeddable;\n+import javax.validation.constraints.NotNull;\n+\n+/**\n+ * {@link DeviceExtendedProperty} implementation.\n+ *\n+ * @since 1.5.0\n+ */\n+@Embeddable\n+public class DeviceExtendedPropertyImpl implements DeviceExtendedProperty {\n+\n+    private static final long serialVersionUID = -2417811252908076430L;\n+\n+    @Basic\n+    @Column(name = \"group_name\", nullable = true, updatable = false)\n+    private String groupName;\n+\n+    @Basic\n+    @Column(name = \"name\", nullable = false, updatable = false)\n+    private String name;\n+\n+    @Basic\n+    @Column(name = \"value\", nullable = true, updatable = false)\n+    private String value;\n+\n+    @Basic\n+    @Column(name = \"value_clob\", nullable = true, updatable = false)\n+    private String valueClob;\n+\n+    /**\n+     * Constructor.\n+     *\n+     * @since 1.5.0\n+     */\n+    public DeviceExtendedPropertyImpl() {\n+    }\n+\n+    /**\n+     * Constructor.\n+     *\n+     * @param groupName The {@link #getGroupName()}.\n+     * @param name      The {@link #getName()}.\n+     * @param value     The {@link #getValue()}.\n+     * @since 1.5.0\n+     */\n+    public DeviceExtendedPropertyImpl(String groupName, String name, String value) {\n+        setGroupName(groupName);\n+        setName(name);\n+        setValue(value);\n+    }\n+\n+    public DeviceExtendedPropertyImpl(@NotNull DeviceExtendedProperty deviceExtendedProperty) {\n+        this(deviceExtendedProperty.getGroupName(),\n+                deviceExtendedProperty.getName(),\n+                deviceExtendedProperty.getValue());\n+    }\n+\n+    @Override\n+    public String getGroupName() {\n+        return groupName;\n+    }\n+\n+    @Override\n+    public void setGroupName(String groupName) {\n+        this.groupName = groupName;\n+    }\n+\n+    @Override\n+    public String getName() {\n+        return name;\n+    }\n+\n+    @Override\n+    public void setName(String name) {\n+        this.name = name;\n+    }\n+\n+    @Override\n+    public String getValue() {\n+        return getValueClob() == null ? value : getValueClob();\n+    }\n+\n+    @Override\n+    public void setValue(String value) {\n+        if (value != null && value.length() > 255) {\n+            setValueClob(value);\n+            this.value = value.substring(0, 255);\n+        } else {\n+            this.value = value;\n+        }\n+    }\n+\n+    /**\n+     * Gets the value for big values.\n+     * <p>\n+     * When setting a value which is longer than 255 chars,\n+     * the value is store in {@link #valueClob} while in {@link #value}\n+     * is trimmed at 255 chars for indexing performances.\n+     *\n+     * @return The full value if greather than 255, or {@code null}\n+     * @since 1.5.0\n+     */\n+    private String getValueClob() {\n+        return valueClob;\n+    }\n+\n+    /**\n+     * Sets the value for big values.\n+     *\n+     * @param valueClob The value if greater than 255 chars.\n+     * @since 1.5.0\n+     */\n+    private void setValueClob(String valueClob) {\n+        this.valueClob = valueClob;\n+    }\n+\n+    public static DeviceExtendedPropertyImpl parse(DeviceExtendedProperty deviceExtendedProperty) {\n+        return deviceExtendedProperty != null ?\n+                deviceExtendedProperty instanceof DeviceExtendedPropertyImpl ?\n+                        (DeviceExtendedPropertyImpl) deviceExtendedProperty :\n+                        new DeviceExtendedPropertyImpl(deviceExtendedProperty)\n+                : null;\n+    }\n+}"
  },
  {
    "sha": "62648dcdd4cf68deeeb40e4925a67209cb37f12c",
    "filename": "service/device/registry/internal/src/main/java/org/eclipse/kapua/service/device/registry/internal/DeviceFactoryImpl.java",
    "status": "modified",
    "additions": 6,
    "deletions": 0,
    "changes": 6,
    "blob_url": "https://github.com/eclipse/kapua/blob/2667032116e14abea89131a72f7452b21fbfac14/service/device/registry/internal/src/main/java/org/eclipse/kapua/service/device/registry/internal/DeviceFactoryImpl.java",
    "raw_url": "https://github.com/eclipse/kapua/raw/2667032116e14abea89131a72f7452b21fbfac14/service/device/registry/internal/src/main/java/org/eclipse/kapua/service/device/registry/internal/DeviceFactoryImpl.java",
    "contents_url": "https://api.github.com/repos/eclipse/kapua/contents/service/device/registry/internal/src/main/java/org/eclipse/kapua/service/device/registry/internal/DeviceFactoryImpl.java?ref=2667032116e14abea89131a72f7452b21fbfac14",
    "patch": "@@ -17,6 +17,7 @@\n import org.eclipse.kapua.model.id.KapuaId;\n import org.eclipse.kapua.service.device.registry.Device;\n import org.eclipse.kapua.service.device.registry.DeviceCreator;\n+import org.eclipse.kapua.service.device.registry.DeviceExtendedProperty;\n import org.eclipse.kapua.service.device.registry.DeviceFactory;\n import org.eclipse.kapua.service.device.registry.DeviceListResult;\n import org.eclipse.kapua.service.device.registry.DeviceQuery;\n@@ -64,4 +65,9 @@ public Device clone(Device device) {\n             throw new KapuaEntityCloneException(e, Device.TYPE, device);\n         }\n     }\n+\n+    @Override\n+    public DeviceExtendedProperty newExtendedProperty(String groupName, String name, String value) {\n+        return new DeviceExtendedPropertyImpl(groupName, name, value);\n+    }\n }"
  },
  {
    "sha": "75afd3b69a48a4cfd89e11b10f3c4a801101c3c2",
    "filename": "service/device/registry/internal/src/main/java/org/eclipse/kapua/service/device/registry/internal/DeviceImpl.java",
    "status": "modified",
    "additions": 36,
    "deletions": 1,
    "changes": 37,
    "blob_url": "https://github.com/eclipse/kapua/blob/2667032116e14abea89131a72f7452b21fbfac14/service/device/registry/internal/src/main/java/org/eclipse/kapua/service/device/registry/internal/DeviceImpl.java",
    "raw_url": "https://github.com/eclipse/kapua/raw/2667032116e14abea89131a72f7452b21fbfac14/service/device/registry/internal/src/main/java/org/eclipse/kapua/service/device/registry/internal/DeviceImpl.java",
    "contents_url": "https://api.github.com/repos/eclipse/kapua/contents/service/device/registry/internal/src/main/java/org/eclipse/kapua/service/device/registry/internal/DeviceImpl.java?ref=2667032116e14abea89131a72f7452b21fbfac14",
    "patch": "@@ -18,6 +18,7 @@\n import org.eclipse.kapua.commons.model.id.KapuaEid;\n import org.eclipse.kapua.model.id.KapuaId;\n import org.eclipse.kapua.service.device.registry.Device;\n+import org.eclipse.kapua.service.device.registry.DeviceExtendedProperty;\n import org.eclipse.kapua.service.device.registry.DeviceStatus;\n import org.eclipse.kapua.service.device.registry.connection.DeviceConnection;\n import org.eclipse.kapua.service.device.registry.connection.internal.DeviceConnectionImpl;\n@@ -39,7 +40,9 @@\n import javax.persistence.JoinColumn;\n import javax.persistence.OneToOne;\n import javax.persistence.Table;\n+import java.util.ArrayList;\n import java.util.HashSet;\n+import java.util.List;\n import java.util.Set;\n \n /**\n@@ -182,6 +185,10 @@\n     @Column(name = \"custom_attribute_5\")\n     private String customAttribute5;\n \n+    @ElementCollection(fetch = FetchType.LAZY)\n+    @CollectionTable(name = \"dvc_device_extended_properties\", joinColumns = @JoinColumn(name = \"device_id\", referencedColumnName = \"id\"))\n+    private List<DeviceExtendedPropertyImpl> extendedProperties;\n+\n     /**\n      * Constructor\n      *\n@@ -204,7 +211,7 @@ public DeviceImpl(KapuaId scopeId) {\n     /**\n      * Clone constructor.\n      *\n-     * @param device\n+     * @param device The {@link Device} to clone.\n      * @throws KapuaException\n      * @since 1.1.0\n      */\n@@ -241,6 +248,7 @@ public DeviceImpl(Device device) throws KapuaException {\n         setCustomAttribute3(device.getCustomAttribute3());\n         setCustomAttribute4(device.getCustomAttribute4());\n         setCustomAttribute5(device.getCustomAttribute5());\n+        setExtendedProperties(device.getExtendedProperties());\n     }\n \n     @Override\n@@ -553,6 +561,33 @@ public void setCustomAttribute5(String customAttribute5) {\n         this.customAttribute5 = customAttribute5;\n     }\n \n+    @Override\n+    public List<DeviceExtendedProperty> getExtendedProperties() {\n+        if (extendedProperties == null) {\n+            extendedProperties = new ArrayList<>();\n+        }\n+\n+        return new ArrayList<>(extendedProperties);\n+    }\n+\n+    @Override\n+    public void addExtendedProperty(DeviceExtendedProperty extendedProperty) {\n+        if (extendedProperties == null) {\n+            extendedProperties = new ArrayList<>();\n+        }\n+\n+        extendedProperties.add(DeviceExtendedPropertyImpl.parse(extendedProperty));\n+    }\n+\n+    @Override\n+    public void setExtendedProperties(List<DeviceExtendedProperty> extendedProperties) {\n+        this.extendedProperties = new ArrayList<>();\n+\n+        if (extendedProperties != null) {\n+            extendedProperties.forEach(dep -> this.extendedProperties.add(DeviceExtendedPropertyImpl.parse(dep)));\n+        }\n+    }\n+\n     @Override\n     public String toString() {\n         return ToStringBuilder.reflectionToString(this);"
  },
  {
    "sha": "35cc0d7e05177490ff87d36aa5f9884a57d69031",
    "filename": "service/device/registry/internal/src/main/java/org/eclipse/kapua/service/device/registry/lifecycle/internal/DeviceLifeCycleServiceImpl.java",
    "status": "modified",
    "additions": 97,
    "deletions": 49,
    "changes": 146,
    "blob_url": "https://github.com/eclipse/kapua/blob/2667032116e14abea89131a72f7452b21fbfac14/service/device/registry/internal/src/main/java/org/eclipse/kapua/service/device/registry/lifecycle/internal/DeviceLifeCycleServiceImpl.java",
    "raw_url": "https://github.com/eclipse/kapua/raw/2667032116e14abea89131a72f7452b21fbfac14/service/device/registry/internal/src/main/java/org/eclipse/kapua/service/device/registry/lifecycle/internal/DeviceLifeCycleServiceImpl.java",
    "contents_url": "https://api.github.com/repos/eclipse/kapua/contents/service/device/registry/internal/src/main/java/org/eclipse/kapua/service/device/registry/lifecycle/internal/DeviceLifeCycleServiceImpl.java?ref=2667032116e14abea89131a72f7452b21fbfac14",
    "patch": "@@ -12,6 +12,8 @@\n  *******************************************************************************/\n package org.eclipse.kapua.service.device.registry.lifecycle.internal;\n \n+import com.fasterxml.jackson.databind.DeserializationFeature;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n import com.google.common.base.Strings;\n import org.eclipse.kapua.KapuaEntityNotFoundException;\n import org.eclipse.kapua.KapuaException;\n@@ -27,23 +29,32 @@\n import org.eclipse.kapua.message.device.lifecycle.KapuaDisconnectMessage;\n import org.eclipse.kapua.message.device.lifecycle.KapuaLifecycleMessage;\n import org.eclipse.kapua.message.device.lifecycle.KapuaMissingMessage;\n+import org.eclipse.kapua.message.internal.device.lifecycle.model.BirthExtendedProperties;\n+import org.eclipse.kapua.message.internal.device.lifecycle.model.BirthExtendedProperty;\n import org.eclipse.kapua.model.KapuaEntity;\n import org.eclipse.kapua.model.id.KapuaId;\n import org.eclipse.kapua.service.device.management.message.response.KapuaResponseCode;\n import org.eclipse.kapua.service.device.registry.Device;\n import org.eclipse.kapua.service.device.registry.DeviceCreator;\n+import org.eclipse.kapua.service.device.registry.DeviceExtendedProperty;\n import org.eclipse.kapua.service.device.registry.DeviceFactory;\n import org.eclipse.kapua.service.device.registry.DeviceRegistryService;\n import org.eclipse.kapua.service.device.registry.connection.DeviceConnection;\n import org.eclipse.kapua.service.device.registry.event.DeviceEvent;\n import org.eclipse.kapua.service.device.registry.event.DeviceEventCreator;\n import org.eclipse.kapua.service.device.registry.event.DeviceEventFactory;\n import org.eclipse.kapua.service.device.registry.event.DeviceEventService;\n+import org.eclipse.kapua.service.device.registry.internal.DeviceExtendedPropertyImpl;\n import org.eclipse.kapua.service.device.registry.lifecycle.DeviceLifeCycleService;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n \n+import javax.annotation.Nullable;\n import javax.validation.constraints.NotNull;\n+import java.util.ArrayList;\n+import java.util.Collections;\n+import java.util.List;\n+import java.util.Map;\n \n /**\n  * {@link DeviceLifeCycleService} implementation.\n@@ -58,6 +69,11 @@\n     private static final int MAX_RETRY = 3;\n     private static final double MAX_WAIT = 500d;\n \n+    private static final ObjectMapper JSON_MAPPER = new ObjectMapper()\n+            .disable(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES)\n+            .disable(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES)\n+            .enable(DeserializationFeature.FAIL_ON_TRAILING_TOKENS);\n+\n     private static final KapuaLocator LOCATOR = KapuaLocator.getInstance();\n \n     private static final DeviceEventService DEVICE_EVENT_SERVICE = LOCATOR.getService(DeviceEventService.class);\n@@ -67,51 +83,52 @@\n     private static final DeviceFactory DEVICE_FACTORY = LOCATOR.getFactory(DeviceFactory.class);\n \n     @Override\n-    public void birth(KapuaId connectionId, KapuaBirthMessage message) throws KapuaException {\n+    public void birth(KapuaId connectionId, KapuaBirthMessage birthMessage) throws KapuaException {\n \n-        KapuaId scopeId = message.getScopeId();\n-        KapuaId deviceId = message.getDeviceId();\n+        KapuaId scopeId = birthMessage.getScopeId();\n+        KapuaId deviceId = birthMessage.getDeviceId();\n \n-        KapuaBirthPayload payload = message.getPayload();\n-        KapuaBirthChannel channel = message.getChannel();\n+        KapuaBirthPayload birthPayload = birthMessage.getPayload();\n+        KapuaBirthChannel birthChannel = birthMessage.getChannel();\n \n         //\n         // Device update\n         Device device;\n         if (deviceId == null) {\n-            String clientId = channel.getClientId();\n-\n-            DeviceCreator deviceCreator = DEVICE_FACTORY.newCreator(scopeId, clientId);\n-\n-            deviceCreator.setDisplayName(payload.getDisplayName());\n-            deviceCreator.setSerialNumber(payload.getSerialNumber());\n-            deviceCreator.setModelId(payload.getModelId());\n-            deviceCreator.setModelName(payload.getModelName());\n-            deviceCreator.setImei(payload.getModemImei());\n-            deviceCreator.setImsi(payload.getModemImsi());\n-            deviceCreator.setIccid(payload.getModemIccid());\n-            deviceCreator.setBiosVersion(payload.getBiosVersion());\n-            deviceCreator.setFirmwareVersion(payload.getFirmwareVersion());\n-            deviceCreator.setOsVersion(payload.getOsVersion());\n-            deviceCreator.setJvmVersion(payload.getJvmVersion());\n-            deviceCreator.setOsgiFrameworkVersion(payload.getContainerFrameworkVersion());\n-            deviceCreator.setApplicationFrameworkVersion(payload.getApplicationFrameworkVersion());\n-            deviceCreator.setConnectionInterface(payload.getConnectionInterface());\n-            deviceCreator.setConnectionIp(payload.getConnectionIp());\n-            deviceCreator.setApplicationIdentifiers(payload.getApplicationIdentifiers());\n-            deviceCreator.setAcceptEncoding(payload.getAcceptEncoding());\n+            DeviceCreator deviceCreator = DEVICE_FACTORY.newCreator(scopeId);\n+\n+            deviceCreator.setClientId(birthChannel.getClientId());\n+            deviceCreator.setDisplayName(birthPayload.getDisplayName());\n+            deviceCreator.setSerialNumber(birthPayload.getSerialNumber());\n+            deviceCreator.setModelId(birthPayload.getModelId());\n+            deviceCreator.setModelName(birthPayload.getModelName());\n+            deviceCreator.setImei(birthPayload.getModemImei());\n+            deviceCreator.setImsi(birthPayload.getModemImsi());\n+            deviceCreator.setIccid(birthPayload.getModemIccid());\n+            deviceCreator.setBiosVersion(birthPayload.getBiosVersion());\n+            deviceCreator.setFirmwareVersion(birthPayload.getFirmwareVersion());\n+            deviceCreator.setOsVersion(birthPayload.getOsVersion());\n+            deviceCreator.setJvmVersion(birthPayload.getJvmVersion());\n+            deviceCreator.setOsgiFrameworkVersion(birthPayload.getContainerFrameworkVersion());\n+            deviceCreator.setApplicationFrameworkVersion(birthPayload.getApplicationFrameworkVersion());\n+            deviceCreator.setConnectionInterface(birthPayload.getConnectionInterface());\n+            deviceCreator.setConnectionIp(birthPayload.getConnectionIp());\n+            deviceCreator.setApplicationIdentifiers(birthPayload.getApplicationIdentifiers());\n+            deviceCreator.setAcceptEncoding(birthPayload.getAcceptEncoding());\n+\n+            deviceCreator.setExtendedProperties(buildDeviceExtendedPropertyFromBirth(birthPayload.getExtendedProperties()));\n \n             // issue #57\n             deviceCreator.setConnectionId(connectionId);\n \n             device = DEVICE_REGISTRY_SERVICE.create(deviceCreator);\n         } else {\n-            device = updateDeviceInfoFromMessage(scopeId, deviceId, message.getPayload(), connectionId);\n+            device = updateDeviceInfoFromMessage(scopeId, deviceId, birthPayload, connectionId);\n         }\n \n         //\n         // Event create\n-        createLifecycleEvent(device, \"BIRTH\", message);\n+        createLifecycleEvent(device, \"BIRTH\", birthMessage);\n     }\n \n     @Override\n@@ -151,13 +168,13 @@ public void death(KapuaId connectionId, KapuaDisconnectMessage message) throws K\n      *\n      * @param scopeId      The {@link Device#getScopeId()} to update.\n      * @param deviceId     The {@link Device#getId()} to update.\n-     * @param payload      The {@link KapuaBirthPayload} from which extract data.\n+     * @param birthPayload The {@link KapuaBirthPayload} from which extract data.\n      * @param connectionId The {@link DeviceConnection#getId()}\n      * @return The updated {@link Device}.\n      * @throws KapuaException If {@link Device} does not exists or {@link DeviceRegistryService#update(KapuaEntity)} causes an error.\n      * @since 1.2.0\n      */\n-    private Device updateDeviceInfoFromMessage(KapuaId scopeId, KapuaId deviceId, KapuaBirthPayload payload, KapuaId connectionId) throws KapuaException {\n+    private Device updateDeviceInfoFromMessage(KapuaId scopeId, KapuaId deviceId, KapuaBirthPayload birthPayload, KapuaId connectionId) throws KapuaException {\n \n         Device device = null;\n \n@@ -173,26 +190,28 @@ private Device updateDeviceInfoFromMessage(KapuaId scopeId, KapuaId deviceId, Ka\n                 }\n \n                 // If the BirthMessage does not contain a 'Display Name' keep the one registered on the DeviceRegistryService.\n-                if (!Strings.isNullOrEmpty(payload.getDisplayName())) {\n-                    device.setDisplayName(payload.getDisplayName());\n+                if (!Strings.isNullOrEmpty(birthPayload.getDisplayName())) {\n+                    device.setDisplayName(birthPayload.getDisplayName());\n                 }\n \n-                device.setSerialNumber(payload.getSerialNumber());\n-                device.setModelId(payload.getModelId());\n-                device.setModelName(payload.getModelName());\n-                device.setImei(payload.getModemImei());\n-                device.setImsi(payload.getModemImsi());\n-                device.setIccid(payload.getModemIccid());\n-                device.setBiosVersion(payload.getBiosVersion());\n-                device.setFirmwareVersion(payload.getFirmwareVersion());\n-                device.setOsVersion(payload.getOsVersion());\n-                device.setJvmVersion(payload.getJvmVersion());\n-                device.setOsgiFrameworkVersion(payload.getContainerFrameworkVersion());\n-                device.setApplicationFrameworkVersion(payload.getApplicationFrameworkVersion());\n-                device.setConnectionInterface(payload.getConnectionInterface());\n-                device.setConnectionIp(payload.getConnectionIp());\n-                device.setApplicationIdentifiers(payload.getApplicationIdentifiers());\n-                device.setAcceptEncoding(payload.getAcceptEncoding());\n+                device.setSerialNumber(birthPayload.getSerialNumber());\n+                device.setModelId(birthPayload.getModelId());\n+                device.setModelName(birthPayload.getModelName());\n+                device.setImei(birthPayload.getModemImei());\n+                device.setImsi(birthPayload.getModemImsi());\n+                device.setIccid(birthPayload.getModemIccid());\n+                device.setBiosVersion(birthPayload.getBiosVersion());\n+                device.setFirmwareVersion(birthPayload.getFirmwareVersion());\n+                device.setOsVersion(birthPayload.getOsVersion());\n+                device.setJvmVersion(birthPayload.getJvmVersion());\n+                device.setOsgiFrameworkVersion(birthPayload.getContainerFrameworkVersion());\n+                device.setApplicationFrameworkVersion(birthPayload.getApplicationFrameworkVersion());\n+                device.setConnectionInterface(birthPayload.getConnectionInterface());\n+                device.setConnectionIp(birthPayload.getConnectionIp());\n+                device.setApplicationIdentifiers(birthPayload.getApplicationIdentifiers());\n+                device.setAcceptEncoding(birthPayload.getAcceptEncoding());\n+\n+                device.setExtendedProperties(buildDeviceExtendedPropertyFromBirth(birthPayload.getExtendedProperties()));\n \n                 // issue #57\n                 device.setConnectionId(connectionId);\n@@ -213,7 +232,7 @@ private Device updateDeviceInfoFromMessage(KapuaId scopeId, KapuaId deviceId, Ka\n                 }\n             }\n         }\n-        while (retry < MAX_RETRY);\n+        while (true);\n \n         return device;\n     }\n@@ -265,4 +284,33 @@ private DeviceEvent createLifecycleEvent(@NotNull Device device, @NotNull String\n \n         return KapuaSecurityUtils.doPrivileged(() -> DEVICE_EVENT_SERVICE.create(deviceEventCreator));\n     }\n+\n+    /**\n+     * Builds the {@link List} of {@link DeviceExtendedProperty}es from the {@link KapuaBirthPayload#getExtendedProperties()} property.\n+     *\n+     * @param extendedPropertiesString The {@link KapuaBirthPayload#getExtendedProperties()} to parse.\n+     * @return The {@link List} of {@link DeviceExtendedProperty}es parsed.\n+     * @throws KapuaException If there are exception while parsing the JSON-formatted metric.\n+     * @since 1.5.0\n+     */\n+    private List<DeviceExtendedProperty> buildDeviceExtendedPropertyFromBirth(@Nullable String extendedPropertiesString) throws KapuaException {\n+        if (Strings.isNullOrEmpty(extendedPropertiesString)) {\n+            return Collections.emptyList();\n+        }\n+\n+        try {\n+            BirthExtendedProperties birthExtendedProperties = JSON_MAPPER.readValue(extendedPropertiesString, BirthExtendedProperties.class);\n+\n+            List<DeviceExtendedProperty> deviceExtendedProperties = new ArrayList<>();\n+            for (Map.Entry<String, BirthExtendedProperty> eps : birthExtendedProperties.getExtendedProperties().entrySet()) {\n+                for (Map.Entry<String, String> ep : eps.getValue().entrySet()) {\n+                    deviceExtendedProperties.add(new DeviceExtendedPropertyImpl(eps.getKey(), ep.getKey(), ep.getValue()));\n+                }\n+            }\n+\n+            return deviceExtendedProperties;\n+        } catch (Exception e) {\n+            throw KapuaException.internalError(e, \"Error while parsing Device's extended properties!\");\n+        }\n+    }\n }"
  },
  {
    "sha": "390008fc9b8962433d4423a4dda00f22b22ef0a8",
    "filename": "service/device/registry/internal/src/main/resources/META-INF/persistence.xml",
    "status": "modified",
    "additions": 5,
    "deletions": 5,
    "changes": 10,
    "blob_url": "https://github.com/eclipse/kapua/blob/2667032116e14abea89131a72f7452b21fbfac14/service/device/registry/internal/src/main/resources/META-INF/persistence.xml",
    "raw_url": "https://github.com/eclipse/kapua/raw/2667032116e14abea89131a72f7452b21fbfac14/service/device/registry/internal/src/main/resources/META-INF/persistence.xml",
    "contents_url": "https://api.github.com/repos/eclipse/kapua/contents/service/device/registry/internal/src/main/resources/META-INF/persistence.xml?ref=2667032116e14abea89131a72f7452b21fbfac14",
    "patch": "@@ -13,9 +13,9 @@\n         Red Hat Inc\n -->\n <persistence xmlns=\"http://java.sun.com/xml/ns/persistence\"\n-    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n-    xsi:schemaLocation=\"http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd\"\n-    version=\"2.0\">\n+             xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+             xsi:schemaLocation=\"http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd\"\n+             version=\"2.0\">\n     <persistence-unit name=\"kapua-device\" transaction-type=\"RESOURCE_LOCAL\">\n \n         <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>\n@@ -39,11 +39,11 @@\n         <class>org.eclipse.kapua.message.internal.KapuaPositionImpl</class>\n \n         <properties>\n-            <property name=\"javax.persistence.lock.timeout\" value=\"1000\" />\n+            <property name=\"javax.persistence.lock.timeout\" value=\"1000\"/>\n             <!-- <property name=\"eclipselink.logging.level.sql\" value=\"FINE\"/>\n             <property name=\"eclipselink.logging.parameters\" value=\"true\"/> -->\n \n-            <property name=\"eclipselink.logging.logger\" value=\"org.eclipse.persistence.logging.slf4j.SLF4JLogger\" />\n+            <property name=\"eclipselink.logging.logger\" value=\"org.eclipse.persistence.logging.slf4j.SLF4JLogger\"/>\n         </properties>\n     </persistence-unit>\n </persistence>"
  },
  {
    "sha": "a867a146d9b57f970c5f20529b2436341a57bca5",
    "filename": "service/device/registry/internal/src/main/resources/liquibase/1.5.0/changelog-device-1.5.0.xml",
    "status": "added",
    "additions": 23,
    "deletions": 0,
    "changes": 23,
    "blob_url": "https://github.com/eclipse/kapua/blob/2667032116e14abea89131a72f7452b21fbfac14/service/device/registry/internal/src/main/resources/liquibase/1.5.0/changelog-device-1.5.0.xml",
    "raw_url": "https://github.com/eclipse/kapua/raw/2667032116e14abea89131a72f7452b21fbfac14/service/device/registry/internal/src/main/resources/liquibase/1.5.0/changelog-device-1.5.0.xml",
    "contents_url": "https://api.github.com/repos/eclipse/kapua/contents/service/device/registry/internal/src/main/resources/liquibase/1.5.0/changelog-device-1.5.0.xml?ref=2667032116e14abea89131a72f7452b21fbfac14",
    "patch": "@@ -0,0 +1,23 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+    Copyright (c) 2021 Eurotech and/or its affiliates and others\n+\n+    This program and the accompanying materials are made\n+    available under the terms of the Eclipse Public License 2.0\n+    which is available at https://www.eclipse.org/legal/epl-2.0/\n+\n+    SPDX-License-Identifier: EPL-2.0\n+\n+    Contributors:\n+        Eurotech - initial API and implementation\n+ -->\n+<databaseChangeLog\n+        xmlns=\"http://www.liquibase.org/xml/ns/dbchangelog\"\n+        xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+        xsi:schemaLocation=\"http://www.liquibase.org/xml/ns/dbchangelog\n+                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.0.xsd\"\n+        logicalFilePath=\"KapuaDB/changelog-device-1.5.0.xml\">\n+\n+    <include relativeToChangelogFile=\"true\" file=\"./device_properties.xml\"/>\n+\n+</databaseChangeLog>"
  },
  {
    "sha": "e8a5c004be93a46f6975c1ae1d0137fe8edaa511",
    "filename": "service/device/registry/internal/src/main/resources/liquibase/1.5.0/device_properties.xml",
    "status": "added",
    "additions": 59,
    "deletions": 0,
    "changes": 59,
    "blob_url": "https://github.com/eclipse/kapua/blob/2667032116e14abea89131a72f7452b21fbfac14/service/device/registry/internal/src/main/resources/liquibase/1.5.0/device_properties.xml",
    "raw_url": "https://github.com/eclipse/kapua/raw/2667032116e14abea89131a72f7452b21fbfac14/service/device/registry/internal/src/main/resources/liquibase/1.5.0/device_properties.xml",
    "contents_url": "https://api.github.com/repos/eclipse/kapua/contents/service/device/registry/internal/src/main/resources/liquibase/1.5.0/device_properties.xml?ref=2667032116e14abea89131a72f7452b21fbfac14",
    "patch": "@@ -0,0 +1,59 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+    Copyright (c) 2021 Eurotech and/or its affiliates and others\n+\n+    This program and the accompanying materials are made\n+    available under the terms of the Eclipse Public License 2.0\n+    which is available at https://www.eclipse.org/legal/epl-2.0/\n+\n+    SPDX-License-Identifier: EPL-2.0\n+\n+    Contributors:\n+        Eurotech - initial API and implementation\n+-->\n+<databaseChangeLog\n+        xmlns=\"http://www.liquibase.org/xml/ns/dbchangelog\"\n+        xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+        xsi:schemaLocation=\"http://www.liquibase.org/xml/ns/dbchangelog\n+                            http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.0.xsd\"\n+        logicalFilePath=\"KapuaDB/changelog-job-1.5.0.xml\">\n+\n+    <include relativeToChangelogFile=\"true\" file=\"../common-properties.xml\"/>\n+\n+    <changeSet id=\"changelog-device_properties-1.5.0_createTable\" author=\"eurotech\">\n+        <createTable tableName=\"dvc_device_extended_properties\">\n+            <column name=\"device_id\" type=\"bigint(21) unsigned\">\n+                <constraints nullable=\"false\" primaryKey=\"true\"/>\n+            </column>\n+\n+            <column name=\"group_name\" type=\"varchar(64)\">\n+                <constraints nullable=\"false\" primaryKey=\"true\"/>\n+            </column>\n+            <column name=\"name\" type=\"varchar(64)\">\n+                <constraints nullable=\"false\" primaryKey=\"true\"/>\n+            </column>\n+            <column name=\"value\" type=\"varchar(255)\"/>\n+            <column name=\"value_clob\" type=\"text\"/>\n+        </createTable>\n+\n+        <sql dbms=\"h2\">ALTER TABLE dvc_device_extended_properties ADD CHECK device_id >= 0;</sql>\n+\n+        <createIndex tableName=\"dvc_device_extended_properties\" indexName=\"idx_device_properties_group_name_value_deviceId\">\n+            <column name=\"group_name\"/>\n+            <column name=\"name\"/>\n+            <column name=\"value\"/>\n+            <column name=\"device_id\"/>\n+        </createIndex>\n+\n+        <addForeignKeyConstraint constraintName=\"fk_dvc_device_extended_property_device_id\"\n+                                 baseTableName=\"dvc_device_extended_properties\"\n+                                 baseColumnNames=\"device_id\"\n+                                 referencedTableName=\"dvc_device\"\n+                                 referencedColumnNames=\"id\"\n+                                 onDelete=\"CASCADE\"/>\n+\n+        <rollback>\n+            <dropTable tableName=\"dvc_device_extended_properties\"/>\n+        </rollback>\n+    </changeSet>\n+</databaseChangeLog>"
  },
  {
    "sha": "5abb4f31db18613ea716e7d943e58375105a7703",
    "filename": "service/device/registry/internal/src/main/resources/liquibase/changelog-device-master.xml",
    "status": "modified",
    "additions": 1,
    "deletions": 0,
    "changes": 1,
    "blob_url": "https://github.com/eclipse/kapua/blob/2667032116e14abea89131a72f7452b21fbfac14/service/device/registry/internal/src/main/resources/liquibase/changelog-device-master.xml",
    "raw_url": "https://github.com/eclipse/kapua/raw/2667032116e14abea89131a72f7452b21fbfac14/service/device/registry/internal/src/main/resources/liquibase/changelog-device-master.xml",
    "contents_url": "https://api.github.com/repos/eclipse/kapua/contents/service/device/registry/internal/src/main/resources/liquibase/changelog-device-master.xml?ref=2667032116e14abea89131a72f7452b21fbfac14",
    "patch": "@@ -24,5 +24,6 @@\n     <include relativeToChangelogFile=\"true\" file=\"./1.2.0/changelog-device-1.2.0.xml\"/>\n     <include relativeToChangelogFile=\"true\" file=\"./1.3.0/changelog-device-1.3.0.xml\"/>\n     <include relativeToChangelogFile=\"true\" file=\"./1.4.0/changelog-device-1.4.0.xml\"/>\n+    <include relativeToChangelogFile=\"true\" file=\"./1.5.0/changelog-device-1.5.0.xml\"/>\n \n </databaseChangeLog>"
  },
  {
    "sha": "f4589de226434c209e3dd056ec4991ae57010dfc",
    "filename": "translator/kapua/kura/src/main/java/org/eclipse/kapua/translator/kura/kapua/TranslatorLifeAppsKuraKapua.java",
    "status": "modified",
    "additions": 2,
    "deletions": 1,
    "changes": 3,
    "blob_url": "https://github.com/eclipse/kapua/blob/2667032116e14abea89131a72f7452b21fbfac14/translator/kapua/kura/src/main/java/org/eclipse/kapua/translator/kura/kapua/TranslatorLifeAppsKuraKapua.java",
    "raw_url": "https://github.com/eclipse/kapua/raw/2667032116e14abea89131a72f7452b21fbfac14/translator/kapua/kura/src/main/java/org/eclipse/kapua/translator/kura/kapua/TranslatorLifeAppsKuraKapua.java",
    "contents_url": "https://api.github.com/repos/eclipse/kapua/contents/translator/kapua/kura/src/main/java/org/eclipse/kapua/translator/kura/kapua/TranslatorLifeAppsKuraKapua.java?ref=2667032116e14abea89131a72f7452b21fbfac14",
    "patch": "@@ -113,7 +113,8 @@ private KapuaAppsPayload translate(KuraAppsPayload kuraAppsPayload) {\n                 kuraAppsPayload.getOsArch(),\n                 kuraAppsPayload.getModemImei(),\n                 kuraAppsPayload.getModemImsi(),\n-                kuraAppsPayload.getModemIccid());\n+                kuraAppsPayload.getModemIccid(),\n+                kuraAppsPayload.getExtendedProperties());\n     }\n \n     @Override"
  }
]
