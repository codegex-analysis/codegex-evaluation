[
  {
    "sha": "4524236111c4672c9b47e87f0188b7571346a932",
    "filename": ".github/workflows/main-java11.yml",
    "status": "modified",
    "additions": 3,
    "deletions": 1,
    "changes": 4,
    "blob_url": "https://github.com/finos/kdb-studio/blob/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/.github/workflows/main-java11.yml",
    "raw_url": "https://github.com/finos/kdb-studio/raw/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/.github/workflows/main-java11.yml",
    "contents_url": "https://api.github.com/repos/finos/kdb-studio/contents/.github/workflows/main-java11.yml?ref=c47d03bbf301958bd9dccb66aac21a9b002bfb7c",
    "patch": "@@ -30,7 +30,9 @@ jobs:\n     - name: Build KDB Studio (with Gradle)\n       uses: eskatos/gradle-command-action@v1\n       with:\n-        arguments: install\n+        arguments: check install\n+    - name: Integration Test\n+      run: ./test.sh\n     # Runs a single command using the runners shell\n     - name: Show workspace\n       run: find"
  },
  {
    "sha": "40212bacb40117869f0345c31292c5529b020ef5",
    "filename": ".github/workflows/main.yml",
    "status": "modified",
    "additions": 3,
    "deletions": 3,
    "changes": 6,
    "blob_url": "https://github.com/finos/kdb-studio/blob/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/.github/workflows/main.yml",
    "raw_url": "https://github.com/finos/kdb-studio/raw/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/.github/workflows/main.yml",
    "contents_url": "https://api.github.com/repos/finos/kdb-studio/contents/.github/workflows/main.yml?ref=c47d03bbf301958bd9dccb66aac21a9b002bfb7c",
    "patch": "@@ -27,11 +27,11 @@ jobs:\n       uses: actions/setup-java@v1\n       with:\n         java-version: 8\n-    - name: Build\n+    - name: Build KDB Studio (with gradle)\n       uses: eskatos/gradle-command-action@v1\n       with:\n-        arguments: install\n-    - name: Test\n+        arguments: check install\n+    - name: Integration Test\n       run: ./test.sh\n     - name: Show workspace\n       run: find"
  },
  {
    "sha": "d9a4b390c538b1b1b0ef2c5b083d4aa23702e17a",
    "filename": "build.gradle",
    "status": "modified",
    "additions": 38,
    "deletions": 9,
    "changes": 47,
    "blob_url": "https://github.com/finos/kdb-studio/blob/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/build.gradle",
    "raw_url": "https://github.com/finos/kdb-studio/raw/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/build.gradle",
    "contents_url": "https://api.github.com/repos/finos/kdb-studio/contents/build.gradle?ref=c47d03bbf301958bd9dccb66aac21a9b002bfb7c",
    "patch": "@@ -1,23 +1,23 @@\n+plugins {\n+    id 'checkstyle'\n+}\n apply plugin: 'idea'\n //and standard one\n apply plugin: 'java'\n apply plugin: 'application'\n \n+checkstyle {\n+    toolVersion = '8.41';\n+}\n+\n+checkstyleMain.exclude('**/org/netbeans/editor/**')\n+\n repositories {\n     mavenCentral()\n }\n \n logger.lifecycle('Java version '+JavaVersion.current())\n \n-dependencies {\n-    compile group: 'org.netbeans.api', name: 'org-openide-awt', version: 'RELEASE113'\n-    compile group: 'org.jfree', name: 'jfreechart', version: '1.0.14'\n-    compile group: 'org.apache.poi', name: 'poi', version: '4.1.2'\n-    compile group: 'org.apache.poi', name: 'poi-ooxml', version: '4.1.2'\n-    compile group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version:'2.11.2'\n-    testCompile group: 'org.assertj', name: 'assertj-swing-junit', version:'3.9.2'\n-}\n-\n sourceSets {\n     main {\n         java {\n@@ -33,6 +33,27 @@ sourceSets {\n     test {\n         java.srcDirs += ['src/test']\n     }\n+\n+    intTest {\n+        java.srcDirs += ['src/test-integration']\n+        compileClasspath += sourceSets.main.output\n+        runtimeClasspath += sourceSets.main.output\n+    }\n+}\n+\n+dependencies {\n+    compile group: 'org.netbeans.api', name: 'org-openide-awt', version: 'RELEASE113'\n+    compile group: 'org.jfree', name: 'jfreechart', version: '1.0.14'\n+    compile group: 'org.apache.poi', name: 'poi', version: '4.1.2'\n+    compile group: 'org.apache.poi', name: 'poi-ooxml', version: '4.1.2'\n+    compile group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version:'2.11.2'\n+    testCompile group: 'org.assertj', name: 'assertj-swing-junit', version:'3.9.2'\n+    intTestCompile group: 'org.assertj', name: 'assertj-swing-junit', version:'3.9.2'\n+}\n+\n+configurations {\n+    intTestImplementation.extendsFrom implementation\n+    intTestRunimeOnly.extendsFrom runtimeOnly\n }\n \n test {\n@@ -43,6 +64,14 @@ test {\n     }\n }\n \n+task integrationTest(type: Test) {\n+    description = 'Runs integration tests.'\n+    group = 'verification'\n+\n+    testClassesDirs = sourceSets.intTest.output.classesDirs\n+    classpath = sourceSets.intTest.runtimeClasspath\n+}\n+\n application {\n     mainClassName = 'studio.core.Studio'\n }"
  },
  {
    "sha": "35ca455e06ccc2ad4760a743be7fc9b086aff682",
    "filename": "config/checkstyle/checkstyle.xml",
    "status": "added",
    "additions": 377,
    "deletions": 0,
    "changes": 377,
    "blob_url": "https://github.com/finos/kdb-studio/blob/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/config/checkstyle/checkstyle.xml",
    "raw_url": "https://github.com/finos/kdb-studio/raw/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/config/checkstyle/checkstyle.xml",
    "contents_url": "https://api.github.com/repos/finos/kdb-studio/contents/config/checkstyle/checkstyle.xml?ref=c47d03bbf301958bd9dccb66aac21a9b002bfb7c",
    "patch": "@@ -0,0 +1,377 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+    Licensed to the Apache Software Foundation (ASF) under one or more\n+    contributor license agreements.  See the NOTICE file distributed with\n+    this work for additional information regarding copyright ownership.\n+    The ASF licenses this file to You under the Apache License, Version 2.0\n+    (the \"License\"); you may not use this file except in compliance with\n+    the License.  You may obtain a copy of the License at\n+\n+       http://www.apache.org/licenses/LICENSE-2.0\n+\n+    Unless required by applicable law or agreed to in writing, software\n+    distributed under the License is distributed on an \"AS IS\" BASIS,\n+    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+    See the License for the specific language governing permissions and\n+    limitations under the License.\n+-->\n+<!DOCTYPE module PUBLIC\n+        \"-//Puppy Crawl//DTD Check Configuration 1.3//EN\"\n+        \"http://www.puppycrawl.com/dtds/configuration_1_3.dtd\">\n+\n+<!-- This is a checkstyle configuration file. For descriptions of\n+what the following rules do, please see the checkstyle configuration\n+page at http://checkstyle.sourceforge.net/config.html -->\n+\n+<module name=\"Checker\">\n+    <property name=\"severity\" value=\"error\"/>\n+\n+    <!-- Allows inline SuppressWarnings annotation, by using for example\n+        \"@SuppressWarnings(\"checkstyle:JavadocMethod\")\".\n+    -->\n+    <module name=\"SuppressWarningsFilter\" />\n+\n+    <module name=\"RegexpSingleline\">\n+        <property name=\"format\" value=\"Throwables.propagate\\(\"/>\n+        <property name=\"message\" value=\"Throwables.propagate is deprecated\"/>\n+        <property name=\"severity\" value=\"error\"/>\n+    </module>\n+\n+    <!-- Prevent *Tests.java as tools may not pick them up -->\n+    <module name=\"RegexpOnFilename\">\n+        <property name=\"fileNamePattern\" value=\".*Tests\\.java$\" />\n+    </module>\n+\n+    <!--  Skip check on unsupported file : module-info.java\n+          https://checkstyle.sourceforge.io/config_filefilters.html\n+    -->\n+    <module name=\"BeforeExecutionExclusionFileFilter\">\n+        <property name=\"fileNamePattern\" value=\"module\\-info\\.java$\"/>\n+    </module>\n+\n+    <!-- All Java AST specific tests live under TreeWalker module. -->\n+    <module name=\"TreeWalker\">\n+        <module name=\"MissingDeprecated\" />\n+\n+        <module name=\"RedundantImport\">\n+            <!-- Checks for redundant import statements. -->\n+            <property name=\"severity\" value=\"error\"/>\n+            <message key=\"import.redundancy\"\n+                     value=\"Redundant import {0}.\"/>\n+        </module>\n+\n+        <module name=\"ImportOrder\">\n+            <!-- Checks for out of order import statements. -->\n+            <property name=\"severity\" value=\"error\"/>\n+            <!-- This ensures that static imports go first. -->\n+            <property name=\"option\" value=\"top\"/>\n+            <property name=\"separated\" value=\"true\"/>\n+            <property name=\"sortStaticImportsAlphabetically\" value=\"true\"/>\n+            <property name=\"tokens\" value=\"STATIC_IMPORT, IMPORT\"/>\n+        </module>\n+\n+        <!-- Forbid importing any shaded code, since it does not exist at compile time and this is probably an IDE error -->\n+        <module name=\"IllegalImport\">\n+            <property name=\"illegalPkgs\" value=\"autovalue.shaded, avro.shaded, com.google.api.client.repackaged, com.google.appengine.repackaged, io.netty.util.internal\"/>\n+        </module>\n+\n+        <!-- This is not the Nullable annotation you are looking for -->\n+        <module name=\"IllegalImport\">\n+            <property name=\"illegalPkgs\" value=\"com.sun.istack\" />\n+        </module>\n+\n+        <module name=\"RedundantModifier\">\n+            <!-- Checks for redundant modifiers on various symbol definitions.\n+              See: http://checkstyle.sourceforge.net/config_modifier.html#RedundantModifier\n+            -->\n+            <property name=\"tokens\" value=\"METHOD_DEF, VARIABLE_DEF, ANNOTATION_FIELD_DEF, INTERFACE_DEF, CLASS_DEF, ENUM_DEF\"/>\n+        </module>\n+\n+        <!--\n+            IllegalImport cannot forbid classes, and c.g.api.client.util is used for some shaded\n+            code and some useful code. So we need to fall back to Regexp.\n+        -->\n+        <module name=\"RegexpSinglelineJava\">\n+            <property name=\"format\" value=\"com\\.google\\.api\\.client\\.util\\.(ByteStreams|Charsets|Collections2|Joiner|Lists|Maps|Objects|Preconditions|Sets|Strings|Throwables)\"/>\n+        </module>\n+\n+        <!--\n+            Forbid non-vendored guava imports.\n+            testing import is allowed because it comes from guava-testing for the tests.\n+        -->\n+        <module name=\"RegexpSinglelineJava\">\n+            <property name=\"id\" value=\"ForbidNonVendoredGuava\"/>\n+            <property name=\"format\" value=\"(\\scom\\.google\\.common\\.(?!testing))|(\\scom\\.google\\.thirdparty)\"/>\n+            <property name=\"severity\" value=\"error\"/>\n+            <property name=\"message\" value=\"You are using raw guava, please use vendored guava classes.\"/>\n+        </module>\n+\n+        <!-- Forbid use of Charset.defaultCharset()-->\n+        <module name=\"RegexpSinglelineJava\">\n+            <property name=\"id\" value=\"ForbidDefaultCharset\"/>\n+            <property name=\"format\" value=\"(\\sCharset\\.defaultCharset())\"/>\n+            <property name=\"severity\" value=\"error\"/>\n+            <property name=\"message\" value=\"You are using Charset.defaultCharset(), please use StandardCharsets.UTF_8.\"/>\n+        </module>\n+\n+        <!-- Forbid non-vendored gRPC/protobuf imports. -->\n+        <module name=\"RegexpSinglelineJava\">\n+            <property name=\"id\" value=\"ForbidNonVendoredGrpcProtobuf\"/>\n+            <property name=\"format\" value=\"((\\scom\\.google\\.protobuf)|(\\sio\\.grpc))\"/>\n+            <property name=\"severity\" value=\"error\"/>\n+            <property name=\"message\" value=\"You are using raw grpc/protobuf, please use vendored grpc/protobuf classes.\"/>\n+        </module>\n+\n+        <!-- Forbid guava imports from gRPC vendored guava version. -->\n+        <module name=\"RegexpSinglelineJava\">\n+            <property name=\"id\" value=\"ForbidGrpcVendoredGuava\"/>\n+            <property name=\"format\" value=\"(\\sorg\\.apache\\.beam\\.vendor\\.grpc\\.(.*)\\.com\\.google\\.common\\.(?!testing))|(\\sorg\\.apache\\.beam\\.vendor\\.grpc\\.(.*)\\.com\\.google\\.thirdparty)\"/>\n+            <property name=\"severity\" value=\"error\"/>\n+            <property name=\"message\" value=\"You are using raw guava, please use vendored guava classes.\"/>\n+        </module>\n+\n+        <!-- Forbid deprecated Assert.assertThat. -->\n+        <module name=\"RegexpSinglelineJava\">\n+            <property name=\"id\" value=\"ForbidDeprecatedAssertThat\"/>\n+            <property name=\"ignoreComments\" value=\"true\"/>\n+            <property name=\"format\" value=\"(\\sorg\\.junit\\.Assert\\.assertThat)|(\\sAssert\\.assertThat)\"/>\n+            <property name=\"severity\" value=\"error\"/>\n+            <property name=\"message\" value=\"Using deprecated Assert.assertThat. Please use MatcherAssert.assertThat.\"/>\n+        </module>\n+\n+        <!-- Forbid org.spark_project imports. -->\n+        <module name=\"RegexpSinglelineJava\">\n+            <property name=\"id\" value=\"ForbidSparkProject\"/>\n+            <property name=\"format\" value=\"(\\sorg\\.spark_project)\"/>\n+            <property name=\"severity\" value=\"error\"/>\n+            <property name=\"message\" value=\"You should not use org.spark_project classes in Beam.\"/>\n+        </module>\n+\n+        <!-- Forbid calling Loggers different than LOG. -->\n+        <module name=\"RegexpSinglelineJava\">\n+            <property name=\"id\" value=\"LoggerNamingStyle\"/>\n+            <property name=\"format\" value=\"(\\sprivate static final Logger )(?!LOG )\"/>\n+            <property name=\"severity\" value=\"error\"/>\n+            <property name=\"message\" value=\"You should name sfl4j Loggers as LOG.\"/>\n+        </module>\n+\n+        <!-- Forbid TestNG imports that may leak because of dependencies. -->\n+        <module name=\"RegexpSinglelineJava\">\n+            <property name=\"id\" value=\"ForbidTestNG\"/>\n+            <property name=\"format\" value=\"(\\sorg\\.testng)\"/>\n+            <property name=\"severity\" value=\"error\"/>\n+            <property name=\"message\" value=\"You should not use TestNG classes in Beam.\"/>\n+        </module>\n+\n+        <!-- Forbid Non-vendored byte-buddy imports. -->\n+        <module name=\"RegexpSinglelineJava\">\n+            <property name=\"id\" value=\"ForbidByteBuddy\"/>\n+            <property name=\"format\" value=\"(\\snet\\.bytebuddy)\"/>\n+            <property name=\"severity\" value=\"error\"/>\n+            <property name=\"message\" value=\"You are using raw byte-buddy, please use vendored byte-buddy classes.\"/>\n+        </module>\n+\n+        <!-- Forbid Non-vendored calcite imports. -->\n+        <module name=\"RegexpSinglelineJava\">\n+            <property name=\"id\" value=\"ForbidCalcite\"/>\n+            <property name=\"format\" value=\"(\\sorg\\.apache\\.calcite)\"/>\n+            <property name=\"severity\" value=\"error\"/>\n+            <property name=\"message\" value=\"You are using raw calcite, please use vendored calcite classes.\"/>\n+        </module>\n+\n+        <module name=\"UnusedImports\">\n+            <property name=\"severity\" value=\"error\"/>\n+            <property name=\"processJavadoc\" value=\"true\"/>\n+            <message key=\"import.unused\"\n+                     value=\"Unused import: {0}.\"/>\n+        </module>\n+\n+        <module name=\"IllegalThrows\">\n+            <property name=\"illegalClassNames\"\n+                      value=\"java.lang.Error,java.lang.RuntimeException\" />\n+        </module>\n+\n+        <!--\n+\n+        JAVADOC CHECKS\n+\n+        -->\n+\n+        <!-- Required to work in pair with SuppressWarningsFilter-->\n+        <module name=\"SuppressWarningsHolder\" />\n+\n+        <!--\n+\n+        NAMING CHECKS\n+\n+        -->\n+\n+        <!-- Item 38 - Adhere to generally accepted naming conventions -->\n+\n+        <module name=\"PackageName\">\n+            <!-- Validates identifiers for package names against the\n+              supplied expression. -->\n+            <!-- Here the default checkstyle rule restricts package name parts to\n+              seven characters, this is not in line with common practice at Google.\n+            -->\n+            <property name=\"format\" value=\"^[a-z]+(\\.[a-z][a-z0-9]{1,})*$\"/>\n+            <property name=\"severity\" value=\"error\"/>\n+        </module>\n+\n+        <module name=\"PackageDeclaration\" />\n+\n+        <module name=\"TypeNameCheck\">\n+            <!-- Validates static, final fields against the\n+            expression \"^[A-Z][a-zA-Z0-9]*$\". -->\n+            <metadata name=\"altname\" value=\"TypeName\"/>\n+            <property name=\"severity\" value=\"error\"/>\n+        </module>\n+\n+        <module name=\"ConstantNameCheck\">\n+            <!-- Validates non-private, static, final fields against the supplied\n+            public/package final fields \"^[A-Z][A-Z0-9]*(_[A-Z0-9]+)*$\". -->\n+            <metadata name=\"altname\" value=\"ConstantName\"/>\n+            <property name=\"applyToPublic\" value=\"true\"/>\n+            <property name=\"applyToProtected\" value=\"true\"/>\n+            <property name=\"applyToPackage\" value=\"true\"/>\n+            <property name=\"applyToPrivate\" value=\"false\"/>\n+            <property name=\"format\" value=\"^([A-Z][A-Z0-9]*(_[A-Z0-9]+)*|FLAG_.*)$\"/>\n+            <message key=\"name.invalidPattern\"\n+                     value=\"Variable ''{0}'' should be in ALL_CAPS (if it is a constant) or be private (otherwise).\"/>\n+            <property name=\"severity\" value=\"error\"/>\n+        </module>\n+\n+        <module name=\"StaticVariableNameCheck\">\n+            <!-- Validates static, non-final fields against the supplied\n+            expression \"^[a-z][a-zA-Z0-9]*_?$\". -->\n+            <metadata name=\"altname\" value=\"StaticVariableName\"/>\n+            <property name=\"applyToPublic\" value=\"true\"/>\n+            <property name=\"applyToProtected\" value=\"true\"/>\n+            <property name=\"applyToPackage\" value=\"true\"/>\n+            <property name=\"applyToPrivate\" value=\"true\"/>\n+            <property name=\"format\" value=\"^[a-z][a-zA-Z0-9]*_?$\"/>\n+            <property name=\"severity\" value=\"error\"/>\n+        </module>\n+\n+        <module name=\"MemberNameCheck\">\n+            <!-- Validates non-static members against the supplied expression. -->\n+            <metadata name=\"altname\" value=\"MemberName\"/>\n+            <property name=\"applyToPublic\" value=\"true\"/>\n+            <property name=\"applyToProtected\" value=\"true\"/>\n+            <property name=\"applyToPackage\" value=\"true\"/>\n+            <property name=\"applyToPrivate\" value=\"true\"/>\n+            <property name=\"format\" value=\"^[a-zA-Z][_a-zA-Z0-9]*$\"/>\n+            <property name=\"severity\" value=\"error\"/>\n+        </module>\n+\n+        <module name=\"MethodNameCheck\">\n+            <!-- Validates identifiers for method names. -->\n+            <metadata name=\"altname\" value=\"MethodName\"/>\n+            <property name=\"format\" value=\"^[a-z][a-zA-Z0-9]*(_[a-zA-Z0-9]+)*$\"/>\n+            <property name=\"severity\" value=\"error\"/>\n+        </module>\n+\n+        <module name=\"ParameterName\">\n+            <property name=\"format\" value=\"^[a-zA-Z][_a-zA-Z0-9]*$\"/>\n+            <property name=\"severity\" value=\"error\"/>\n+        </module>\n+\n+        <module name=\"LocalFinalVariableName\">\n+            <property name=\"severity\" value=\"error\"/>\n+        </module>\n+\n+        <module name=\"LocalVariableName\">\n+            <property name=\"format\" value=\"^[a-zA-Z][_a-zA-Z0-9]*$\"/>\n+            <property name=\"severity\" value=\"error\"/>\n+        </module>\n+\n+        <!-- Type parameters must be either one of the four blessed letters\n+        T, K, V, W, X or else be capital-case terminated with a T,\n+        such as MyGenericParameterT -->\n+        <module name=\"ClassTypeParameterName\">\n+            <property name=\"format\" value=\"^(((T|K|V|W|X)[0-9]*)|([A-Z][a-z][a-zA-Z]*T))$\"/>\n+            <property name=\"severity\" value=\"error\"/>\n+        </module>\n+\n+        <module name=\"MethodTypeParameterName\">\n+            <property name=\"format\" value=\"^(((T|K|V|W|X)[0-9]*)|([A-Z][a-z][a-zA-Z]*T))$\"/>\n+            <property name=\"severity\" value=\"error\"/>\n+        </module>\n+\n+        <module name=\"InterfaceTypeParameterName\">\n+            <property name=\"format\" value=\"^(((T|K|V|W|X)[0-9]*)|([A-Z][a-z][a-zA-Z]*T))$\"/>\n+            <property name=\"severity\" value=\"error\"/>\n+        </module>\n+\n+        <!--\n+\n+        LENGTH and CODING CHECKS\n+\n+        -->\n+\n+        <!--\n+        TODO(https://issues.apache.org/jira/browse/BEAM-4669): re-enable after fixing after spotless\n+\n+        When spotless re-indents, multi-line strings are often split so close to 100 chars that the\n+        indentation makes them exceed the max line length. This can be fixed a bit at a time.\n+\n+        <module name=\"LineLength\">\n+          <property name=\"max\" value=\"100\"/>\n+          <property name=\"severity\" value=\"error\"/>\n+          <property name=\"ignorePattern\"\n+              value=\"^(package .*;\\s*)|(import .*;\\s*)|( *\\* .*https?://.*)$\"/>\n+        </module>\n+         -->\n+\n+        <!-- Checks for braces around if and else blocks -->\n+        <module name=\"NeedBraces\">\n+            <property name=\"severity\" value=\"error\"/>\n+            <property name=\"tokens\" value=\"LITERAL_IF, LITERAL_ELSE, LITERAL_FOR, LITERAL_WHILE, LITERAL_DO\"/>\n+        </module>\n+\n+        <module name=\"UpperEll\">\n+            <!-- Checks that long constants are defined with an upper ell.-->\n+            <property name=\"severity\" value=\"error\"/>\n+        </module>\n+\n+        <module name=\"FallThrough\">\n+            <!-- Warn about falling through to the next case statement.  Similar to\n+            javac -Xlint:fallthrough, but the check is suppressed if a single-line comment\n+            on the last non-blank line preceding the fallen-into case contains 'fall through' (or\n+            some other variants that we don't publicized to promote consistency).\n+            -->\n+            <property name=\"reliefPattern\"\n+                      value=\"fall through|Fall through|fallthru|Fallthru|falls through|Falls through|fallthrough|Fallthrough|No break|NO break|no break|continue on\"/>\n+            <property name=\"severity\" value=\"error\"/>\n+        </module>\n+\n+        <!-- Checks for over-complicated boolean expressions. -->\n+        <module name=\"SimplifyBooleanExpression\"/>\n+\n+        <!--\n+\n+        MODIFIERS CHECKS\n+\n+        -->\n+\n+        <module name=\"ModifierOrder\">\n+            <!-- Warn if modifier order is inconsistent with JLS3 8.1.1, 8.3.1, and\n+                 8.4.3.  The prescribed order is:\n+                 public, protected, private, abstract, static, final, transient, volatile,\n+                 synchronized, native, strictfp\n+              -->\n+            <property name=\"severity\" value=\"error\"/>\n+        </module>\n+\n+\n+        <!-- Allow use of comment to suppress javadocstyle -->\n+        <module name=\"SuppressionCommentFilter\">\n+            <property name=\"offCommentFormat\" value=\"CHECKSTYLE.OFF\\: ([\\w\\|]+)\"/>\n+            <property name=\"onCommentFormat\" value=\"CHECKSTYLE.ON\\: ([\\w\\|]+)\"/>\n+            <property name=\"checkFormat\" value=\"$1\"/>\n+        </module>\n+\n+        <module name=\"ArrayTypeStyle\"/>\n+    </module>\n+\n+</module>"
  },
  {
    "sha": "317bf9623bd2e4f850dfce755fbb52132ca03533",
    "filename": "src/main/kx/c.java",
    "status": "modified",
    "additions": 189,
    "deletions": 131,
    "changes": 320,
    "blob_url": "https://github.com/finos/kdb-studio/blob/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/kx/c.java",
    "raw_url": "https://github.com/finos/kdb-studio/raw/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/kx/c.java",
    "contents_url": "https://api.github.com/repos/finos/kdb-studio/contents/src/main/kx/c.java?ref=c47d03bbf301958bd9dccb66aac21a9b002bfb7c",
    "patch": "@@ -1,4 +1,5 @@\n // licensed according to http://code.kx.com/wiki/TermsAndConditions\r\n+\r\n package kx;\r\n \r\n /*\r\n@@ -20,7 +21,13 @@\n 111 f\\:\r\n 112 dynamic load\r\n  */\r\n-import java.io.*;\r\n+\r\n+import java.io.ByteArrayOutputStream;\r\n+import java.io.DataInputStream;\r\n+import java.io.DataOutputStream;\r\n+import java.io.IOException;\r\n+import java.io.OutputStream;\r\n+import java.io.UnsupportedEncodingException;\r\n import java.net.InetSocketAddress;\r\n import java.net.Socket;\r\n import java.util.LinkedList;\r\n@@ -29,10 +36,13 @@\n import java.util.logging.Logger;\r\n import javax.net.ssl.SSLSocket;\r\n import javax.net.ssl.SSLSocketFactory;\r\n-import javax.swing.*;\r\n+import javax.swing.JFrame;\r\n+import javax.swing.ProgressMonitor;\r\n+import javax.swing.UIManager;\r\n import studio.kdb.Config;\r\n import studio.kdb.K;\r\n \r\n+@SuppressWarnings(\"checkstyle:TypeName\")\r\n public class c {\r\n     DataInputStream inputStream;\r\n     OutputStream outputStream;\r\n@@ -46,35 +56,33 @@\n     public void setFrame(JFrame frame) {\r\n         this.frame = frame;\r\n     }\r\n-  \r\n+\r\n     void io(Socket s) throws IOException {\r\n         s.setTcpNoDelay(true);\r\n         inputStream = new DataInputStream(s.getInputStream());\r\n         outputStream = s.getOutputStream();\r\n-        rxBufferSize=s.getReceiveBufferSize();\r\n+        rxBufferSize = s.getReceiveBufferSize();\r\n     }\r\n \r\n     public void close() {\r\n         try {\r\n             // this will force k() to break out i hope\r\n-            if (inputStream != null)\r\n+            if (inputStream != null) {\r\n                 try {\r\n                     inputStream.close();\r\n-                }\r\n-                catch (IOException e) {\r\n-                }\r\n-                finally {\r\n+                } catch (IOException e) {\r\n+                } finally {\r\n                     inputStream = null;\r\n                 }\r\n-            if (outputStream != null)\r\n+            }\r\n+            if (outputStream != null) {\r\n                 try {\r\n                     outputStream.close();\r\n-                }\r\n-                catch (IOException e) {\r\n-                }\r\n-                finally {\r\n+                } catch (IOException e) {\r\n+                } finally {\r\n                     outputStream = null;\r\n                 }\r\n+            }\r\n         }        // synchronized(this)\r\n         finally {\r\n             frame = null;\r\n@@ -85,22 +93,24 @@ public void close() {\n     public c() {\r\n     }\r\n \r\n-/*    public c(Socket s) throws IOException {\r\n-        io(s);\r\n-        inputStream.read(b = new byte[99]);\r\n-        outputStream.write(b,0,1);\r\n-    }\r\n+    /*    public c(Socket s) throws IOException {\r\n+            io(s);\r\n+            inputStream.read(b = new byte[99]);\r\n+            outputStream.write(b,0,1);\r\n+        }\r\n \r\n-    public c(ServerSocket s) throws IOException {\r\n-        this(s.accept());\r\n-    }\r\n-*/\r\n+        public c(ServerSocket s) throws IOException {\r\n+            this(s.accept());\r\n+        }\r\n+    */\r\n     public static class K4AccessException extends Exception {\r\n         K4AccessException(String s) {\r\n             super(s);\r\n         }\r\n     }\r\n-    private final java.util.List responses = java.util.Collections.synchronizedList(new LinkedList());\r\n+\r\n+    private final java.util.List responses =\r\n+        java.util.Collections.synchronizedList(new LinkedList());\r\n \r\n     boolean closed = true;\r\n \r\n@@ -112,35 +122,34 @@ public boolean isClosed() {\n         Object obj;\r\n \r\n         synchronized (responses) {\r\n-            if (responses.size() == 0)\r\n+            if (responses.size() == 0) {\r\n                 try {\r\n                     responses.wait();\r\n+                } catch (InterruptedException e) {\r\n                 }\r\n-                catch (InterruptedException e) {\r\n-                }\r\n+            }\r\n \r\n             obj = responses.remove(0);\r\n         }\r\n \r\n-        if (obj instanceof Throwable)\r\n+        if (obj instanceof Throwable) {\r\n             throw (Throwable) obj;\r\n+        }\r\n \r\n         return (K.KBase) obj;\r\n     }\r\n \r\n-  private void startReader() {\r\n+    private void startReader() {\r\n         Runnable runner = new Runnable() {\r\n             public void run() {\r\n                 while (!closed) {\r\n                     Object o = null;\r\n \r\n                     try {\r\n                         o = k();\r\n-                    }\r\n-                    catch (K4Exception e) {\r\n+                    } catch (K4Exception e) {\r\n                         o = e;\r\n-                    }\r\n-                    catch (Throwable t) {\r\n+                    } catch (Throwable t) {\r\n                         o = t;\r\n                         close();\r\n                     }\r\n@@ -157,47 +166,50 @@ public void run() {\n         t.start();\r\n     }\r\n \r\n-    public void reconnect(boolean retry) throws IOException,K4Exception {\r\n-        Socket s=new Socket();\r\n-        s.setReceiveBufferSize(1024*1024);\r\n-        s.connect(new InetSocketAddress(host,port));\r\n-        \r\n-        if(useTLS){\r\n-          try{\r\n-            s=((SSLSocketFactory)SSLSocketFactory.getDefault()).createSocket(s,host,port,true);\r\n-            ((SSLSocket)s).startHandshake();\r\n-          }\r\n-          catch(Exception e){\r\n-            s.close();\r\n-            throw e;\r\n-          }\r\n-        }        \r\n+    public void reconnect(boolean retry) throws IOException, K4Exception {\r\n+        Socket s = new Socket();\r\n+        s.setReceiveBufferSize(1024 * 1024);\r\n+        s.connect(new InetSocketAddress(host, port));\r\n+\r\n+        if (useTLS) {\r\n+            try {\r\n+                s = ((SSLSocketFactory) SSLSocketFactory.getDefault())\r\n+                    .createSocket(s, host, port, true);\r\n+                ((SSLSocket) s).startHandshake();\r\n+            } catch (Exception e) {\r\n+                s.close();\r\n+                throw e;\r\n+            }\r\n+        }\r\n         io(s);\r\n         java.io.ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n         java.io.DataOutputStream dos = new DataOutputStream(baos);\r\n-        dos.write((up+(retry?\"\\3\":\"\")).getBytes());\r\n+        dos.write((up + (retry ? \"\\3\" : \"\")).getBytes());\r\n         dos.writeByte(0);\r\n         dos.flush();\r\n         outputStream.write(baos.toByteArray());\r\n-        byte[] bytes=new byte[2+up.getBytes().length];\r\n-        if (1 != inputStream.read(bytes,0,1))\r\n-            if(retry)\r\n+        byte[] bytes = new byte[2 + up.getBytes().length];\r\n+        if (1 != inputStream.read(bytes, 0, 1)) {\r\n+            if (retry) {\r\n                 reconnect(false);\r\n-            else\r\n+            } else {\r\n                 throw new K4Exception(\"Authentication failed\");\r\n+            }\r\n+        }\r\n         closed = false;\r\n         startReader();\r\n     }\r\n+\r\n     private String host;\r\n     private int port;\r\n     private String up;\r\n     private boolean useTLS;\r\n \r\n-    public c(String h,int p,String u,boolean useTLS) {\r\n+    public c(String h, int p, String u, boolean useTLS) {\r\n         host = h;\r\n         port = p;\r\n         up = u;\r\n-        this.useTLS=useTLS;\r\n+        this.useTLS = useTLS;\r\n     }\r\n \r\n     boolean rb() {\r\n@@ -226,24 +238,31 @@ float re() {\n     double rf() {\r\n         return Double.longBitsToDouble(rj());\r\n     }\r\n-    \r\n-    UUID rg(){boolean oa=a;a=false;UUID g=new UUID(rj(),rj());a=oa;return g;}\r\n+\r\n+    UUID rg() {\r\n+        boolean oa = a;\r\n+        a = false;\r\n+        UUID g = new UUID(rj(), rj());\r\n+        a = oa;\r\n+        return g;\r\n+    }\r\n \r\n     char rc() {\r\n         return (char) (b[j++] & 0xff);\r\n     }\r\n \r\n     K.KSymbol rs() {\r\n-        int n=j;\r\n-        for (;b[n] != 0;)\r\n+        int n = j;\r\n+        for (; b[n] != 0; ) {\r\n             ++n;\r\n-        String s=null;\r\n+        }\r\n+        String s = null;\r\n         try {\r\n-            s = new String(b, j, n-j, Config.getInstance().getEncoding());\r\n+            s = new String(b, j, n - j, Config.getInstance().getEncoding());\r\n         } catch (UnsupportedEncodingException ex) {\r\n             Logger.getLogger(c.class.getName()).log(Level.WARNING, null, ex);\r\n         }\r\n-        j=n;\r\n+        j = n;\r\n         ++j;\r\n         return new K.KSymbol(s);\r\n     }\r\n@@ -280,8 +299,9 @@ char rc() {\n     K.FComposition rcomposition() {\r\n         int n = ri();\r\n         Object[] objs = new Object[n];\r\n-        for (int i = 0;i < n;i++)\r\n+        for (int i = 0; i < n; i++) {\r\n             objs[i] = r();\r\n+        }\r\n \r\n         return new K.FComposition(objs);\r\n     }\r\n@@ -302,8 +322,9 @@ char rc() {\n         int n = ri();\r\n         K.KList list = new K.KList(n);\r\n         K.KBase[] array = (K.KBase[]) list.getArray();\r\n-        for (int i = 0;i < n;i++)\r\n+        for (int i = 0; i < n; i++) {\r\n             array[i] = r();\r\n+        }\r\n \r\n         return new K.Projection(list);\r\n     }\r\n@@ -342,7 +363,7 @@ char rc() {\n \r\n     K.KBase r() {\r\n         int i = 0, n, t = b[j++];\r\n-        if (t < 0)\r\n+        if (t < 0) {\r\n             switch (t) {\r\n                 case -1:\r\n                     return new K.KBoolean(rb());\r\n@@ -381,51 +402,65 @@ char rc() {\n                 case -19:\r\n                     return rt();\r\n             }\r\n+        }\r\n \r\n-        if (t == 100)\r\n+        if (t == 100) {\r\n             return rfn(); // fn - lambda\r\n-        if (t == 101)\r\n+        }\r\n+        if (t == 101) {\r\n             return rup();  // unary primitive\r\n-        if (t == 102)\r\n+        }\r\n+        if (t == 102) {\r\n             return rbp();  // binary primitive\r\n-        if (t == 103)\r\n+        }\r\n+        if (t == 103) {\r\n             return rternary();\r\n-        if (t == 104)\r\n+        }\r\n+        if (t == 104) {\r\n             return rproj(); // fn projection\r\n-        if (t == 105)\r\n+        }\r\n+        if (t == 105) {\r\n             return rcomposition();\r\n+        }\r\n \r\n-        if (t == 106)\r\n+        if (t == 106) {\r\n             return rfeach(); // f'\r\n-        if (t == 107)\r\n+        }\r\n+        if (t == 107) {\r\n             return rfover(); // f/\r\n-        if (t == 108)\r\n+        }\r\n+        if (t == 108) {\r\n             return rfscan(); //f\\\r\n-        if (t == 109)\r\n+        }\r\n+        if (t == 109) {\r\n             return rfPrior(); // f':\r\n-        if (t == 110)\r\n+        }\r\n+        if (t == 110) {\r\n             return rfEachRight(); // f/:\r\n-        if (t == 111)\r\n+        }\r\n+        if (t == 111) {\r\n             return rfEachLeft(); // f\\:\r\n+        }\r\n         if (t == 112) {\r\n             // dynamic load\r\n             j++;\r\n             return null;\r\n         }\r\n-        if(t==127){\r\n-          K.Dict d=new K.Dict(r(),r());\r\n-          d.setAttr((byte)1);\r\n-          return d;\r\n+        if (t == 127) {\r\n+            K.Dict d = new K.Dict(r(), r());\r\n+            d.setAttr((byte) 1);\r\n+            return d;\r\n         }\r\n         if (t > 99) {\r\n             j++;\r\n             return null;\r\n         }\r\n-        if (t == 99)\r\n-            return new K.Dict(r(),r());\r\n+        if (t == 99) {\r\n+            return new K.Dict(r(), r());\r\n+        }\r\n         byte attr = b[j++];\r\n         if (t == 98) {\r\n-            K.Dict d = (K.Dict)r();\r\n+            K.Dict d = (K.Dict) r();\r\n             if (d.x.type == 11 && d.y.type == 0) {\r\n                 return new K.Flip(d);\r\n             } else {\r\n@@ -438,92 +473,103 @@ char rc() {\n                 K.KList L = new K.KList(n);\r\n                 L.setAttr(attr);\r\n                 K.KBase[] array = (K.KBase[]) L.getArray();\r\n-                for (;i < n;i++)\r\n+                for (; i < n; i++) {\r\n                     array[i] = r();\r\n+                }\r\n                 return L;\r\n             }\r\n             case 1: {\r\n                 K.KBooleanVector B = new K.KBooleanVector(n);\r\n                 B.setAttr(attr);\r\n                 boolean[] array = (boolean[]) B.getArray();\r\n-                for (;i < n;i++)\r\n+                for (; i < n; i++) {\r\n                     array[i] = rb();\r\n+                }\r\n                 return B;\r\n             }\r\n             case 2: {\r\n                 K.KGuidVector B = new K.KGuidVector(n);\r\n                 B.setAttr(attr);\r\n                 UUID[] array = (UUID[]) B.getArray();\r\n-                for (;i < n;i++)\r\n+                for (; i < n; i++) {\r\n                     array[i] = rg();\r\n+                }\r\n                 return B;\r\n             }\r\n             case 4: {\r\n                 K.KByteVector G = new K.KByteVector(n);\r\n                 G.setAttr(attr);\r\n                 byte[] array = (byte[]) G.getArray();\r\n-                for (;i < n;i++)\r\n+                for (; i < n; i++) {\r\n                     array[i] = b[j++];\r\n+                }\r\n                 return G;\r\n             }\r\n             case 5: {\r\n                 K.KShortVector H = new K.KShortVector(n);\r\n                 H.setAttr(attr);\r\n                 short[] array = (short[]) H.getArray();\r\n-                for (;i < n;i++)\r\n+                for (; i < n; i++) {\r\n                     array[i] = rh();\r\n+                }\r\n                 return H;\r\n             }\r\n             case 6: {\r\n                 K.KIntVector I = new K.KIntVector(n);\r\n                 I.setAttr(attr);\r\n                 int[] array = (int[]) I.getArray();\r\n-                for (;i < n;i++)\r\n+                for (; i < n; i++) {\r\n                     array[i] = ri();\r\n+                }\r\n                 return I;\r\n             }\r\n             case 7: {\r\n                 K.KLongVector J = new K.KLongVector(n);\r\n                 J.setAttr(attr);\r\n                 long[] array = (long[]) J.getArray();\r\n-                for (;i < n;i++)\r\n+                for (; i < n; i++) {\r\n                     array[i] = rj();\r\n+                }\r\n                 return J;\r\n             }\r\n             case 8: {\r\n                 K.KFloatVector E = new K.KFloatVector(n);\r\n                 E.setAttr(attr);\r\n                 float[] array = (float[]) E.getArray();\r\n-                for (;i < n;i++)\r\n+                for (; i < n; i++) {\r\n                     array[i] = re();\r\n+                }\r\n                 return E;\r\n             }\r\n             case 9: {\r\n                 K.KDoubleVector F = new K.KDoubleVector(n);\r\n                 F.setAttr(attr);\r\n                 double[] array = (double[]) F.getArray();\r\n-                for (;i < n;i++)\r\n+                for (; i < n; i++) {\r\n                     array[i] = rf();\r\n+                }\r\n                 return F;\r\n             }\r\n             case 10: {\r\n-                K.KCharacterVector C=null;\r\n-                try{\r\n-                    char[] array=new String(b,j,n, Config.getInstance().getEncoding()).toCharArray();\r\n+                K.KCharacterVector C = null;\r\n+                try {\r\n+                    char[] array =\r\n+                        new String(b, j, n, Config.getInstance().getEncoding()).toCharArray();\r\n                     C = new K.KCharacterVector(array);\r\n                     C.setAttr(attr);\r\n-                }catch(UnsupportedEncodingException e){\r\n+                } catch (UnsupportedEncodingException e) {\r\n                     Logger.getLogger(c.class.getName()).log(Level.WARNING, null, e);\r\n                 }\r\n-                j+=n;\r\n+                j += n;\r\n                 return C;\r\n             }\r\n             case 11: {\r\n                 K.KSymbolVector S = new K.KSymbolVector(n);\r\n                 S.setAttr(attr);\r\n                 String[] array = (String[]) S.getArray();\r\n-                for (;i < n;i++)\r\n+                for (; i < n; i++) {\r\n                     array[i] = rs().s;\r\n+                }\r\n                 return S;\r\n             }\r\n             case 12: {\r\n@@ -539,27 +585,30 @@ char rc() {\n                 K.KMonthVector M = new K.KMonthVector(n);\r\n                 M.setAttr(attr);\r\n                 int[] array = (int[]) M.getArray();\r\n-                for (;i < n;i++)\r\n+                for (; i < n; i++) {\r\n                     array[i] = ri();\r\n+                }\r\n                 return M;\r\n             }\r\n             case 14: {\r\n                 K.KDateVector D = new K.KDateVector(n);\r\n                 D.setAttr(attr);\r\n                 int[] array = (int[]) D.getArray();\r\n-                for (;i < n;i++)\r\n+                for (; i < n; i++) {\r\n                     array[i] = ri();\r\n+                }\r\n                 return D;\r\n             }\r\n             case 15: {\r\n                 K.KDatetimeVector Z = new K.KDatetimeVector(n);\r\n                 Z.setAttr(attr);\r\n                 double[] array = (double[]) Z.getArray();\r\n-                for (;i < n;i++)\r\n+                for (; i < n; i++) {\r\n                     array[i] = rf();\r\n+                }\r\n                 return Z;\r\n             }\r\n-            case 16:{\r\n+            case 16: {\r\n                 K.KTimespanVector N = new K.KTimespanVector(n);\r\n                 N.setAttr(attr);\r\n                 long[] array = (long[]) N.getArray();\r\n@@ -572,31 +621,34 @@ char rc() {\n                 K.KMinuteVector U = new K.KMinuteVector(n);\r\n                 U.setAttr(attr);\r\n                 int[] array = (int[]) U.getArray();\r\n-                for (;i < n;i++)\r\n+                for (; i < n; i++) {\r\n                     array[i] = ri();\r\n+                }\r\n                 return U;\r\n             }\r\n             case 18: {\r\n                 K.KSecondVector V = new K.KSecondVector(n);\r\n                 V.setAttr(attr);\r\n                 int[] array = (int[]) V.getArray();\r\n-                for (;i < n;i++)\r\n+                for (; i < n; i++) {\r\n                     array[i] = ri();\r\n+                }\r\n                 return V;\r\n             }\r\n             case 19: {\r\n                 K.KTimeVector T = new K.KTimeVector(n);\r\n                 T.setAttr(attr);\r\n                 int[] array = (int[]) T.getArray();\r\n-                for (;i < n;i++)\r\n+                for (; i < n; i++) {\r\n                     array[i] = ri();\r\n+                }\r\n                 return T;\r\n             }\r\n         }\r\n         return null;\r\n     }\r\n \r\n-    void w(int i,K.KBase x) throws IOException {\r\n+    void w(int i, K.KBase x) throws IOException {\r\n         java.io.ByteArrayOutputStream baosBody = new ByteArrayOutputStream();\r\n         java.io.DataOutputStream dosBody = new DataOutputStream(baosBody);\r\n         x.serialise(dosBody);\r\n@@ -608,7 +660,7 @@ void w(int i,K.KBase x) throws IOException {\n         dosHeader.writeByte(0);\r\n         dosHeader.writeByte(0);\r\n         int msgSize = 8 + dosBody.size();\r\n-        K.write(dosHeader,msgSize);\r\n+        K.write(dosHeader, msgSize);\r\n         byte[] b = baosHeader.toByteArray();\r\n         outputStream.write(b);\r\n         b = baosBody.toByteArray();\r\n@@ -622,29 +674,32 @@ void w(int i,K.KBase x) throws IOException {\n     }\r\n \r\n \r\n-    public Object k() throws K4Exception,IOException {\r\n-        boolean responseMsg=false;\r\n-        boolean c=false;\r\n-        synchronized(inputStream){\r\n-            while(!responseMsg){ // throw away incoming aync, and error out on incoming sync\r\n+    public Object k() throws K4Exception, IOException {\r\n+        boolean responseMsg = false;\r\n+        boolean c = false;\r\n+        synchronized (inputStream) {\r\n+            while (!responseMsg) { // throw away incoming aync, and error out on incoming sync\r\n                 inputStream.readFully(b = new byte[8]);\r\n                 a = b[0] == 1;\r\n                 c = b[2] == 1;\r\n-                byte msgType=b[1];\r\n-                if(msgType==1){close();throw new IOException(\"Cannot process sync msg from remote\");}\r\n-                responseMsg=msgType == 2;\r\n+                byte msgType = b[1];\r\n+                if (msgType == 1) {\r\n+                    close();\r\n+                    throw new IOException(\"Cannot process sync msg from remote\");\r\n+                }\r\n+                responseMsg = msgType == 2;\r\n                 j = 4;\r\n \r\n                 final int msgLength = ri() - 8;\r\n-   \r\n-                final String message = \"Receiving \"+(c?\"compressed \":\"\")+\"data ...\";\r\n+\r\n+                final String message = \"Receiving \" + (c ? \"compressed \" : \"\") + \"data ...\";\r\n                 final String note = \"0 of \" + (msgLength / 1024) + \" kB\";\r\n                 String title = \"Studio for kdb+\";\r\n-                UIManager.put(\"ProgressMonitor.progressText\",title);\r\n+                UIManager.put(\"ProgressMonitor.progressText\", title);\r\n \r\n                 final int min = 0;\r\n                 final int max = msgLength;\r\n-                ProgressMonitor pm = new ProgressMonitor(frame,message,note,min,max);\r\n+                ProgressMonitor pm = new ProgressMonitor(frame, message, note, min, max);\r\n \r\n                 try {\r\n                     pm.setMillisToDecideToPopup(300);\r\n@@ -654,30 +709,33 @@ public Object k() throws K4Exception,IOException {\n                     b = new byte[msgLength];\r\n                     int total = 0;\r\n                     int packetSize = 1 + msgLength / 100;\r\n-                    if (packetSize < rxBufferSize)\r\n+                    if (packetSize < rxBufferSize) {\r\n                         packetSize = rxBufferSize;\r\n+                    }\r\n \r\n                     while (total < msgLength) {\r\n-                        if (pm.isCanceled())\r\n+                        if (pm.isCanceled()) {\r\n                             throw new IOException(\"Cancelled by user\");\r\n+                        }\r\n \r\n                         int remainder = msgLength - total;\r\n-                        if (remainder < packetSize)\r\n+                        if (remainder < packetSize) {\r\n                             packetSize = remainder;\r\n+                        }\r\n \r\n-                        total += inputStream.read(b,total,packetSize);\r\n+                        total += inputStream.read(b, total, packetSize);\r\n                         pm.setProgress(total);\r\n                         pm.setNote((total / 1024) + \" of \" + (msgLength / 1024) + \" kB\");\r\n                     }\r\n-                }\r\n-                finally {\r\n+                } finally {\r\n                     pm.close();\r\n                 }\r\n             }\r\n-            if (c)\r\n-                u();  \r\n-            else\r\n+            if (c) {\r\n+                u();\r\n+            } else {\r\n                 j = 0;\r\n+            }\r\n \r\n             if (b[0] == -128) {\r\n                 j = 1;\r\n@@ -725,7 +783,7 @@ private void u() {\n         j = 8;\r\n     }\r\n \r\n-    public void k(K.KBase x) throws K4Exception,IOException {\r\n-        w(1,x);\r\n+    public void k(K.KBase x) throws K4Exception, IOException {\r\n+        w(1, x);\r\n     }\r\n }\r"
  },
  {
    "sha": "4d3e000c03d2b9c9f3f2b1d7bf4ff0c1b79765ff",
    "filename": "src/main/org/netbeans/editor/Annotations.java",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/finos/kdb-studio/blob/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/org/netbeans/editor/Annotations.java",
    "raw_url": "https://github.com/finos/kdb-studio/raw/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/org/netbeans/editor/Annotations.java",
    "contents_url": "https://api.github.com/repos/finos/kdb-studio/contents/src/main/org/netbeans/editor/Annotations.java?ref=c47d03bbf301958bd9dccb66aac21a9b002bfb7c",
    "patch": "@@ -606,7 +606,7 @@ public JMenu createMenu(BaseKit kit, int line) {\n      * the references to all annotations from one line in List and also\n      * stores which annotation is active, count of visible annotations \n      * and line number. */\n-    static public class LineAnnotations extends Object {\n+    public static class LineAnnotations extends Object {\n \n         /** List with all annotations in this LineAnnotations */\n         private LinkedList annos;"
  },
  {
    "sha": "6b0c955d606c5b18c232fedc64dd4cd6bd363c06",
    "filename": "src/main/org/netbeans/editor/DrawLayer.java",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/finos/kdb-studio/blob/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/org/netbeans/editor/DrawLayer.java",
    "raw_url": "https://github.com/finos/kdb-studio/raw/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/org/netbeans/editor/DrawLayer.java",
    "contents_url": "https://api.github.com/repos/finos/kdb-studio/contents/src/main/org/netbeans/editor/DrawLayer.java?ref=c47d03bbf301958bd9dccb66aac21a9b002bfb7c",
    "patch": "@@ -108,7 +108,7 @@\n     public int updateLineNumberContext(int lineNumber, DrawContext ctx);\n \n     /** Abstract implementation of the draw-layer. */\n-    public static abstract class AbstractLayer implements DrawLayer {\n+    public abstract static  class AbstractLayer implements DrawLayer {\n \n         /** Name of this layer. The name of the layer must be unique among\n         * layers installed into EditorUI"
  },
  {
    "sha": "2dd4bbbf290de0b1bca2927b6323a2522425cffd",
    "filename": "src/main/org/netbeans/editor/DrawLayerFactory.java",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/finos/kdb-studio/blob/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/org/netbeans/editor/DrawLayerFactory.java",
    "raw_url": "https://github.com/finos/kdb-studio/raw/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/org/netbeans/editor/DrawLayerFactory.java",
    "contents_url": "https://api.github.com/repos/finos/kdb-studio/contents/src/main/org/netbeans/editor/DrawLayerFactory.java?ref=c47d03bbf301958bd9dccb66aac21a9b002bfb7c",
    "patch": "@@ -120,7 +120,7 @@ public void updateContext(DrawContext ctx) {\n     * It requires only activation mark since it deactivates automatically\n     * at the end of line.\n     */\n-    public static abstract class ColorLineLayer extends DrawLayer.AbstractLayer {\n+    public abstract static  class ColorLineLayer extends DrawLayer.AbstractLayer {\n \n         /** Coloring to use for highlighting */\n         Coloring coloring;"
  },
  {
    "sha": "406559bf398756431dcc10093fbdf162f83f5389",
    "filename": "src/main/org/netbeans/editor/FinderFactory.java",
    "status": "modified",
    "additions": 5,
    "deletions": 5,
    "changes": 10,
    "blob_url": "https://github.com/finos/kdb-studio/blob/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/org/netbeans/editor/FinderFactory.java",
    "raw_url": "https://github.com/finos/kdb-studio/raw/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/org/netbeans/editor/FinderFactory.java",
    "contents_url": "https://api.github.com/repos/finos/kdb-studio/contents/src/main/org/netbeans/editor/FinderFactory.java?ref=c47d03bbf301958bd9dccb66aac21a9b002bfb7c",
    "patch": "@@ -25,7 +25,7 @@\n     /** Abstract finder implementation. The only <CODE>find()</CODE>\n     * method must be redefined.\n     */\n-    public static abstract class AbstractFinder implements Finder {\n+    public abstract static  class AbstractFinder implements Finder {\n \n         /** Was the string found? */\n         protected boolean found;\n@@ -182,7 +182,7 @@ public int find(int bufferStartPos, char buffer[],\n     }\n \n     /** Generic forward finder that simplifies the search process. */\n-    public static abstract class GenericFwdFinder extends AbstractFinder {\n+    public abstract static  class GenericFwdFinder extends AbstractFinder {\n \n         public final int find(int bufferStartPos, char buffer[],\n                               int offset1, int offset2, int reqPos, int limitPos) {\n@@ -215,7 +215,7 @@ public final int find(int bufferStartPos, char buffer[],\n     }\n \n     /** Generic backward finder that simplifies the search process. */\n-    public static abstract class GenericBwdFinder extends AbstractFinder {\n+    public abstract static  class GenericBwdFinder extends AbstractFinder {\n \n         public final int find(int bufferStartPos, char buffer[],\n                               int offset1, int offset2, int reqPos, int limitPos) {\n@@ -247,7 +247,7 @@ public final int find(int bufferStartPos, char buffer[],\n \n     }\n \n-    public static abstract class GenericFinder extends AbstractFinder {\n+    public abstract static  class GenericFinder extends AbstractFinder {\n \n         /** Flag that determines whether the search is in the forward direction */\n         protected boolean forward;\n@@ -977,7 +977,7 @@ protected int scan(char ch, boolean lastChar) {\n     }\n \n     /** Support for creating blocks finders. */\n-    public static abstract class AbstractBlocksFinder extends AbstractFinder\n+    public abstract static  class AbstractBlocksFinder extends AbstractFinder\n         implements BlocksFinder {\n \n         private static int[] EMPTY_INT_ARRAY = new int[0];"
  },
  {
    "sha": "2a98d1c8569c223671ad80ca197b1c5df37a3456",
    "filename": "src/main/org/netbeans/editor/GlyphGutter.java",
    "status": "modified",
    "additions": 2,
    "deletions": 2,
    "changes": 4,
    "blob_url": "https://github.com/finos/kdb-studio/blob/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/org/netbeans/editor/GlyphGutter.java",
    "raw_url": "https://github.com/finos/kdb-studio/raw/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/org/netbeans/editor/GlyphGutter.java",
    "contents_url": "https://api.github.com/repos/finos/kdb-studio/contents/src/main/org/netbeans/editor/GlyphGutter.java?ref=c47d03bbf301958bd9dccb66aac21a9b002bfb7c",
    "patch": "@@ -73,10 +73,10 @@\n     private int numberWidth;\n \n     /** Predefined width of the glyph icons */\n-    private final static int glyphWidth = 16;\n+    private static final int glyphWidth = 16;\n \n     /** Preddefined width of the cycling button */\n-    private final static int glyphButtonWidth = 9;\n+    private static final int glyphButtonWidth = 9;\n     \n     /** Whether the line numbers are shown or not */\n     private boolean showLineNumbers = true;"
  },
  {
    "sha": "77dbbc101a3c54be0fa5df70f3facd0a193699f6",
    "filename": "src/main/org/netbeans/editor/Settings.java",
    "status": "modified",
    "additions": 2,
    "deletions": 2,
    "changes": 4,
    "blob_url": "https://github.com/finos/kdb-studio/blob/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/org/netbeans/editor/Settings.java",
    "raw_url": "https://github.com/finos/kdb-studio/raw/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/org/netbeans/editor/Settings.java",
    "contents_url": "https://api.github.com/repos/finos/kdb-studio/contents/src/main/org/netbeans/editor/Settings.java?ref=c47d03bbf301958bd9dccb66aac21a9b002bfb7c",
    "patch": "@@ -580,7 +580,7 @@ public KitAndValue(Class kitClass, Object value) {\n     }\n \n     /** Abstract implementation of the initializer dealing with the name. */\n-    public static abstract class AbstractInitializer implements Initializer {\n+    public abstract static  class AbstractInitializer implements Initializer {\n \n         private String name;\n \n@@ -609,7 +609,7 @@ public String toString() {\n     }\n \n     /** Initializer sorter that delegates to another sorter. */\n-    public static abstract class FilterInitializerSorter {\n+    public abstract static  class FilterInitializerSorter {\n \n         private InitializerSorter delegate;\n "
  },
  {
    "sha": "2d935f59ee0c2ab7d708d87d5ef5d2dbb09dcdac",
    "filename": "src/main/org/netbeans/editor/SettingsDefaults.java",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/finos/kdb-studio/blob/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/org/netbeans/editor/SettingsDefaults.java",
    "raw_url": "https://github.com/finos/kdb-studio/raw/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/org/netbeans/editor/SettingsDefaults.java",
    "contents_url": "https://api.github.com/repos/finos/kdb-studio/contents/src/main/org/netbeans/editor/SettingsDefaults.java?ref=c47d03bbf301958bd9dccb66aac21a9b002bfb7c",
    "patch": "@@ -190,7 +190,7 @@ public static final void init()\n           SettingsNames.STATUS_BAR_BOLD_COLORING\n       };\n \n-        private final static int menuShortcutKeyMask= java.awt.Toolkit.getDefaultToolkit().getMenuShortcutKeyMask();\n+        private static final int menuShortcutKeyMask= java.awt.Toolkit.getDefaultToolkit().getMenuShortcutKeyMask();\n \n     public static final MultiKeyBinding[] defaultKeyBindings\n     = new MultiKeyBinding[] {"
  },
  {
    "sha": "8f61955a82853a51de3c53864776469802e97485",
    "filename": "src/main/org/netbeans/editor/SettingsUtil.java",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/finos/kdb-studio/blob/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/org/netbeans/editor/SettingsUtil.java",
    "raw_url": "https://github.com/finos/kdb-studio/raw/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/org/netbeans/editor/SettingsUtil.java",
    "contents_url": "https://api.github.com/repos/finos/kdb-studio/contents/src/main/org/netbeans/editor/SettingsUtil.java?ref=c47d03bbf301958bd9dccb66aac21a9b002bfb7c",
    "patch": "@@ -537,7 +537,7 @@ public Object getValue(Class kitClass, String settingName) {\n \n     /** Initializer for the token-coloring settings.\n     */\n-    public static abstract class TokenColoringInitializer\n+    public abstract static  class TokenColoringInitializer\n     extends Settings.AbstractInitializer {\n \n         /** Token context for which the colorings are being initialized. */"
  },
  {
    "sha": "0b8d541b7ff00802af8a0ff69d257bd7e0e94530",
    "filename": "src/main/org/netbeans/editor/TokenItem.java",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/finos/kdb-studio/blob/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/org/netbeans/editor/TokenItem.java",
    "raw_url": "https://github.com/finos/kdb-studio/raw/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/org/netbeans/editor/TokenItem.java",
    "contents_url": "https://api.github.com/repos/finos/kdb-studio/contents/src/main/org/netbeans/editor/TokenItem.java?ref=c47d03bbf301958bd9dccb66aac21a9b002bfb7c",
    "patch": "@@ -51,7 +51,7 @@\n     public TokenItem getPrevious();\n \n     /** Abstract implementation that doesn't contain chaining methods. */\n-    public static abstract class AbstractItem implements TokenItem {\n+    public abstract static  class AbstractItem implements TokenItem {\n \n         private TokenID tokenID;\n "
  },
  {
    "sha": "e69ab0e71b5fa7ffe80154f09ca4b24ab69b3a04",
    "filename": "src/main/org/netbeans/editor/ext/CompletionQuery.java",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/finos/kdb-studio/blob/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/org/netbeans/editor/ext/CompletionQuery.java",
    "raw_url": "https://github.com/finos/kdb-studio/raw/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/org/netbeans/editor/ext/CompletionQuery.java",
    "contents_url": "https://api.github.com/repos/finos/kdb-studio/contents/src/main/org/netbeans/editor/ext/CompletionQuery.java?ref=c47d03bbf301958bd9dccb66aac21a9b002bfb7c",
    "patch": "@@ -108,7 +108,7 @@\n     * The very basic funztionality of Result is implemented by this class,\n     * but parts general enough to not need to be overriden.\n     */\n-    public static abstract class AbstractResult implements Result {\n+    public abstract static  class AbstractResult implements Result {\n \n         /** The List of the ResultItem instances - the content of the result */\n         private List data;"
  },
  {
    "sha": "0bde2c5f48675c691d6a7184ffe5cdbec335b0d0",
    "filename": "src/main/org/netbeans/editor/ext/ExtFinderFactory.java",
    "status": "modified",
    "additions": 3,
    "deletions": 3,
    "changes": 6,
    "blob_url": "https://github.com/finos/kdb-studio/blob/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/org/netbeans/editor/ext/ExtFinderFactory.java",
    "raw_url": "https://github.com/finos/kdb-studio/raw/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/org/netbeans/editor/ext/ExtFinderFactory.java",
    "contents_url": "https://api.github.com/repos/finos/kdb-studio/contents/src/main/org/netbeans/editor/ext/ExtFinderFactory.java?ref=c47d03bbf301958bd9dccb66aac21a9b002bfb7c",
    "patch": "@@ -33,7 +33,7 @@\n     * the <tt>lineFound()</tt> method that can do a local find.\n     * !!! Udelat to poradne i s vice bufferama\n     */\n-    public static abstract class LineFwdFinder extends FinderFactory.AbstractFinder {\n+    public abstract static  class LineFwdFinder extends FinderFactory.AbstractFinder {\n \n         private char[] lineBuffer = Analyzer.EMPTY_CHAR_ARRAY;\n \n@@ -110,7 +110,7 @@ protected abstract int lineFound(char[] buffer, int lineStartOffset, int lineEnd\n     * the <tt>lineFound()</tt> method that can do a local find.\n     * !!! Udelat to poradne i s vice bufferama\n     */\n-    public static abstract class LineBwdFinder extends FinderFactory.AbstractFinder {\n+    public abstract static  class LineBwdFinder extends FinderFactory.AbstractFinder {\n \n         private char[] lineBuffer = Analyzer.EMPTY_CHAR_ARRAY;\n \n@@ -194,7 +194,7 @@ protected abstract int lineFound(char[] buffer, int lineStartOffset, int lineEnd\n     * the <tt>lineFound()</tt> method that can do a local find.\n     * !!! Udelat to poradne i s vice bufferama\n     */\n-    public static abstract class LineBlocksFinder extends FinderFactory.AbstractBlocksFinder {\n+    public abstract static  class LineBlocksFinder extends FinderFactory.AbstractBlocksFinder {\n \n         private char[] lineBuffer = Analyzer.EMPTY_CHAR_ARRAY;\n "
  },
  {
    "sha": "9e41ceafd12aa3840c8fa1f38677ffe0146f8350",
    "filename": "src/main/studio/core/AuthenticationManager.java",
    "status": "modified",
    "additions": 15,
    "deletions": 14,
    "changes": 29,
    "blob_url": "https://github.com/finos/kdb-studio/blob/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/studio/core/AuthenticationManager.java",
    "raw_url": "https://github.com/finos/kdb-studio/raw/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/studio/core/AuthenticationManager.java",
    "contents_url": "https://api.github.com/repos/finos/kdb-studio/contents/src/main/studio/core/AuthenticationManager.java?ref=c47d03bbf301958bd9dccb66aac21a9b002bfb7c",
    "patch": "@@ -26,34 +26,32 @@ public Class lookup(String autheticationMethod) {\n         return (String[]) s.toArray(new String[0]);\n     }\n \n-    public synchronized static AuthenticationManager getInstance() {\n-        if (instance == null)\n+    public static synchronized AuthenticationManager getInstance() {\n+        if (instance == null) {\n             instance = new AuthenticationManager();\n+        }\n         return instance;\n     }\n \n     private AuthenticationManager() {\n         DefaultAuthenticationMechanism dam = new DefaultAuthenticationMechanism();\n-        classMap.put(dam.getMechanismName(),dam.getClass());\n+        classMap.put(dam.getMechanismName(), dam.getClass());\n \n         String curDir = System.getProperty(\"user.dir\");\n         curDir = curDir + \"/plugins\";\n \n         //   System.out.println(\"Looking for plugins at \" + curDir);\n \n         File dir = new File(curDir);\n-        if (!dir.exists())\n+        if (!dir.exists()) {\n             return;\n+        }\n \n-        FilenameFilter filter = new FilenameFilter() {\n-            public boolean accept(File dir,String name) {\n-                return name.endsWith(\".jar\");\n-            }\n-        };\n+        FilenameFilter filter = (dir1, name) -> name.endsWith(\".jar\");\n \n         String[] children = dir.list(filter);\n-        if (children != null)\n-            for (int child = 0;child < children.length;child++) {\n+        if (children != null) {\n+            for (int child = 0; child < children.length; child++) {\n                 String filename = dir.getAbsolutePath() + \"/\" + children[child];\n                 try {\n                     URL url = new URL(\"jar:file:\" + filename + \"/!/\");\n@@ -65,12 +63,14 @@ public boolean accept(File dir,String name) {\n                         JarEntry entry = (JarEntry) e.nextElement();\n                         String name = entry.getName();\n                         if (!entry.isDirectory() && name.endsWith(\".class\")) {\n-                            URLClassLoader loader = new URLClassLoader(new URL[]{url});\n-                            String externalName = name.substring(0, name.indexOf('.')).replace('/', '.');\n+                            URLClassLoader loader = new URLClassLoader(new URL[] {url});\n+                            String externalName =\n+                                name.substring(0, name.indexOf('.')).replace('/', '.');\n                             try {\n                                 Class c = loader.loadClass(externalName);\n                                 if (IAuthenticationMechanism.class.isAssignableFrom(c)) {\n-                                    IAuthenticationMechanism am = (IAuthenticationMechanism) c.newInstance();\n+                                    IAuthenticationMechanism am =\n+                                        (IAuthenticationMechanism) c.newInstance();\n                                     classMap.put(am.getMechanismName(), c);\n                                 }\n                             } catch (ClassNotFoundException | IllegalAccessException | InstantiationException | Error e1) {\n@@ -82,5 +82,6 @@ public boolean accept(File dir,String name) {\n                     e.printStackTrace(System.err);\n                 }\n             }\n+        }\n     }\n }"
  },
  {
    "sha": "43b14941bf76db51348d8a9c96f5b487867d0f08",
    "filename": "src/main/studio/core/Credentials.java",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/finos/kdb-studio/blob/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/studio/core/Credentials.java",
    "raw_url": "https://github.com/finos/kdb-studio/raw/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/studio/core/Credentials.java",
    "contents_url": "https://api.github.com/repos/finos/kdb-studio/contents/src/main/studio/core/Credentials.java?ref=c47d03bbf301958bd9dccb66aac21a9b002bfb7c",
    "patch": "@@ -4,7 +4,7 @@\n     private String username;\n     private String password;\n \n-    public Credentials(String username,String password) {\n+    public Credentials(String username, String password) {\n         this.username = username;\n         this.password = password;\n     }"
  },
  {
    "sha": "051a494907f91106886c492b85239b69f43c8320",
    "filename": "src/main/studio/core/DefaultAuthenticationMechanism.java",
    "status": "modified",
    "additions": 3,
    "deletions": 3,
    "changes": 6,
    "blob_url": "https://github.com/finos/kdb-studio/blob/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/studio/core/DefaultAuthenticationMechanism.java",
    "raw_url": "https://github.com/finos/kdb-studio/raw/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/studio/core/DefaultAuthenticationMechanism.java",
    "contents_url": "https://api.github.com/repos/finos/kdb-studio/contents/src/main/studio/core/DefaultAuthenticationMechanism.java?ref=c47d03bbf301958bd9dccb66aac21a9b002bfb7c",
    "patch": "@@ -5,10 +5,10 @@\n public class DefaultAuthenticationMechanism implements IAuthenticationMechanism {\n     private static final String USERNAME = \"USERNAME\";\n     private static final String PASSWORD = \"PASSWORD\";\n-    private static final String[] PROP_NAMES = new String[]{USERNAME,PASSWORD};\n+    private static final String[] PROP_NAMES = new String[] {USERNAME, PASSWORD};\n     private Properties props;\n \n-    public final static String NAME = \"Username and password\";\n+    public static final String NAME = \"Username and password\";\n \n     public String getMechanismName() {\n         return NAME;\n@@ -24,6 +24,6 @@ public void setProperties(Properties props) {\n     }\n \n     public Credentials getCredentials() {\n-        return new Credentials((String) props.get(USERNAME),(String) props.get(PASSWORD));\n+        return new Credentials((String) props.get(USERNAME), (String) props.get(PASSWORD));\n     }\n }"
  },
  {
    "sha": "c3a34899d3032da0632bc3b2bd1ebd6b3c6ae2f1",
    "filename": "src/main/studio/core/IAuthenticationMechanism.java",
    "status": "modified",
    "additions": 4,
    "deletions": 4,
    "changes": 8,
    "blob_url": "https://github.com/finos/kdb-studio/blob/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/studio/core/IAuthenticationMechanism.java",
    "raw_url": "https://github.com/finos/kdb-studio/raw/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/studio/core/IAuthenticationMechanism.java",
    "contents_url": "https://api.github.com/repos/finos/kdb-studio/contents/src/main/studio/core/IAuthenticationMechanism.java?ref=c47d03bbf301958bd9dccb66aac21a9b002bfb7c",
    "patch": "@@ -3,11 +3,11 @@\n import java.util.Properties;\n \n public interface IAuthenticationMechanism {\n-    public String getMechanismName();\n+    String getMechanismName();\n \n-    public String[] getMechanismPropertyNames();\n+    String[] getMechanismPropertyNames();\n \n-    public void setProperties(Properties props);\n+    void setProperties(Properties props);\n \n-    public Credentials getCredentials();\n+    Credentials getCredentials();\n }"
  },
  {
    "sha": "0050a595e96d4f8e56a06f8d4664ee00a36a9d64",
    "filename": "src/main/studio/core/Studio.java",
    "status": "modified",
    "additions": 16,
    "deletions": 16,
    "changes": 32,
    "blob_url": "https://github.com/finos/kdb-studio/blob/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/studio/core/Studio.java",
    "raw_url": "https://github.com/finos/kdb-studio/raw/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/studio/core/Studio.java",
    "contents_url": "https://api.github.com/repos/finos/kdb-studio/contents/src/main/studio/core/Studio.java?ref=c47d03bbf301958bd9dccb66aac21a9b002bfb7c",
    "patch": "@@ -1,29 +1,28 @@\n package studio.core;\n \n import java.awt.Font;\n-import java.util.Locale;\n+import java.util.TimeZone;\n+import javax.swing.UIManager;\n import studio.kdb.Config;\n import studio.ui.ExceptionGroup;\n import studio.ui.StudioPanel;\n \n-import java.util.TimeZone;\n-import javax.swing.UIManager;\n-\n public class Studio {\n     public static void main(final String[] args) {\n         TimeZone.setDefault(TimeZone.getTimeZone(\"GMT\"));\n \n-        if(System.getProperty(\"os.name\",\"\").contains(\"OS X\")){ \n-            System.setProperty(\"apple.laf.useScreenMenuBar\",\"true\");\n+        if (System.getProperty(\"os.name\", \"\").contains(\"OS X\")) {\n+            System.setProperty(\"apple.laf.useScreenMenuBar\", \"true\");\n             //     System.setProperty(\"apple.awt.brushMetalLook\", \"true\");\n-            System.setProperty(\"apple.awt.showGrowBox\",\"true\");\n-            System.setProperty(\"com.apple.mrj.application.apple.menu.about.name\",\"Studio for kdb+\");\n-            System.setProperty(\"com.apple.mrj.application.live-resize\",\"true\");\n-            System.setProperty(\"com.apple.macos.smallTabs\",\"true\");\n-            System.setProperty(\"com.apple.mrj.application.growbox.intrudes\",\"false\");\n+            System.setProperty(\"apple.awt.showGrowBox\", \"true\");\n+            System\n+                .setProperty(\"com.apple.mrj.application.apple.menu.about.name\", \"Studio for kdb+\");\n+            System.setProperty(\"com.apple.mrj.application.live-resize\", \"true\");\n+            System.setProperty(\"com.apple.macos.smallTabs\", \"true\");\n+            System.setProperty(\"com.apple.mrj.application.growbox.intrudes\", \"false\");\n         }\n \n-        if(Config.getInstance().getLookAndFeel()!=null){\n+        if (Config.getInstance().getLookAndFeel() != null) {\n             try {\n                 UIManager.setLookAndFeel(Config.getInstance().getLookAndFeel());\n             } catch (Exception ex) {\n@@ -32,13 +31,14 @@ public static void main(final String[] args) {\n             }\n         }\n \n-        UIManager.put(\"Table.font\",new javax.swing.plaf.FontUIResource(\"Monospaced\",Font.PLAIN,UIManager.getFont(\"Table.font\").getSize()));\n-        System.setProperty(\"awt.useSystemAAFontSettings\",\"on\");\n+        UIManager.put(\"Table.font\", new javax.swing.plaf.FontUIResource(\"Monospaced\", Font.PLAIN,\n+            UIManager.getFont(\"Table.font\").getSize()));\n+        System.setProperty(\"awt.useSystemAAFontSettings\", \"on\");\n         System.setProperty(\"swing.aatext\", \"true\");\n-     \n+\n         ThreadGroup exceptionThreadGroup = new ExceptionGroup();\n \n-        new Thread(exceptionThreadGroup,\"Init thread\") {\n+        new Thread(exceptionThreadGroup, \"Init thread\") {\n             public void run() {\n                 StudioPanel.init(args);\n             }"
  },
  {
    "sha": "652a2fa0b13f3be2b9d2dc1a4ace894fce64d203",
    "filename": "src/main/studio/kdb/Config.java",
    "status": "modified",
    "additions": 179,
    "deletions": 93,
    "changes": 272,
    "blob_url": "https://github.com/finos/kdb-studio/blob/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/studio/kdb/Config.java",
    "raw_url": "https://github.com/finos/kdb-studio/raw/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/studio/kdb/Config.java",
    "contents_url": "https://api.github.com/repos/finos/kdb-studio/contents/src/main/studio/kdb/Config.java?ref=c47d03bbf301958bd9dccb66aac21a9b002bfb7c",
    "patch": "@@ -1,38 +1,57 @@\n package studio.kdb;\n \n-import studio.core.Credentials;\n-import studio.core.DefaultAuthenticationMechanism;\n-import studio.ui.ServerList;\n-\n-import java.io.*;\n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import com.fasterxml.jackson.databind.SerializationFeature;\n+import java.awt.Color;\n+import java.awt.DisplayMode;\n+import java.awt.Font;\n+import java.awt.GraphicsEnvironment;\n+import java.awt.Rectangle;\n+import java.io.BufferedReader;\n+import java.io.File;\n+import java.io.FileOutputStream;\n+import java.io.FileWriter;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.io.InputStreamReader;\n+import java.io.OutputStream;\n import java.nio.file.Files;\n import java.nio.file.Path;\n import java.nio.file.Paths;\n-import java.util.*;\n-import java.text.NumberFormat;\n import java.text.DecimalFormat;\n-import java.awt.*;\n+import java.text.NumberFormat;\n+import java.util.ArrayList;\n+import java.util.Collection;\n+import java.util.Collections;\n+import java.util.Date;\n+import java.util.Enumeration;\n+import java.util.HashMap;\n+import java.util.HashSet;\n+import java.util.LinkedHashMap;\n import java.util.List;\n+import java.util.Map;\n+import java.util.Properties;\n import java.util.stream.Collectors;\n import java.util.stream.Stream;\n-import com.fasterxml.jackson.databind.ObjectMapper;\n-import com.fasterxml.jackson.databind.SerializationFeature;\n-import com.fasterxml.jackson.databind.JsonNode;\n-\n import javax.swing.tree.TreeNode;\n+import studio.core.Credentials;\n+import studio.core.DefaultAuthenticationMechanism;\n+import studio.ui.ServerList;\n \n public class Config {\n-    private final static String PATH = System.getProperties().getProperty(\"user.home\") + \"/.studioforkdb/\";\n-    private final static String FILENAME = PATH + \"studio.properties\";\n-    private final static String VERSION = \"1.2\";\n-    private final static String OLD_VERSION = \"1.1\";\n+    private static final String PATH =\n+        System.getProperties().getProperty(\"user.home\") + \"/.studioforkdb/\";\n+    private static final String FILENAME = PATH + \"studio.properties\";\n+    private static final String VERSION = \"1.2\";\n+    private static final String OLD_VERSION = \"1.1\";\n \n     private Properties p = new Properties();\n     private final Map<String, Server> servers = new HashMap<>();\n     private Collection<String> serverNames;\n     private ServerTreeNode serverTree;\n \n-    private final static Config instance = new Config();\n+    private static final Config instance = new Config();\n \n     private Config() {\n         init();\n@@ -42,9 +61,13 @@ public String getLineEnding() {\n         String r = p.getProperty(\"lineEnding\", \"\");\n         if (r.length() == 0) {\n             String ls = System.getProperty(\"line.separator\");\n-            if (ls.equals(\"\\n\")) r = \"LF\";\n-            else if (ls.equals(\"\\r\\n\")) r = \"CRLF\";\n-            else throw new RuntimeException(\"unknown line separator setting\");\n+            if (ls.equals(\"\\n\")) {\n+                r = \"LF\";\n+            } else if (ls.equals(\"\\r\\n\")) {\n+                r = \"CRLF\";\n+            } else {\n+                throw new RuntimeException(\"unknown line separator setting\");\n+            }\n         }\n         return r;\n     }\n@@ -59,12 +82,12 @@ public String getFontName() {\n     }\n \n     public int getFontSize() {\n-        return Integer.parseInt(p.getProperty(\"font.size\",\"14\"));\n+        return Integer.parseInt(p.getProperty(\"font.size\", \"14\"));\n     }\n \n     public Font getFont() {\n         String name = getFontName();\n-        int  size = getFontSize();\n+        int size = getFontSize();\n \n         Font f = new Font(name, Font.PLAIN, size);\n         setFont(f);\n@@ -129,25 +152,34 @@ private void init() {\n             //A user upgrading from such old directory would suddenly \"lose\" their config.\n             String oldpath = null;\n             try {\n-                Process process = Runtime.getRuntime().exec(\"reg query \\\"HKCU\\\\Software\\\\Microsoft\\\\Windows\\\\CurrentVersion\\\\Explorer\\\\Shell Folders\\\" /v Desktop\");\n-                BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));\n+                Process process = Runtime.getRuntime().exec(\n+                    \"reg query \\\"HKCU\\\\Software\\\\Microsoft\\\\Windows\\\\CurrentVersion\\\\Explorer\\\\Shell Folders\\\" /v Desktop\");\n+                BufferedReader reader =\n+                    new BufferedReader(new InputStreamReader(process.getInputStream()));\n                 String line = null;\n                 while ((line = reader.readLine()) != null) {\n                     if (line.contains(\"Desktop\") && line.contains(\"REG_SZ\")) {\n                         //    Desktop    REG_SZ    \\\\path\\to\\Desktop\n                         String[] tokens = line.split(\"[ \\t]\");\n-                        int tc=0;\n-                        for (int i=0; i<tokens.length; ++i) {\n-                            if (tokens[i].length() > 0) ++tc;\n-                            if (tc==3) oldpath = tokens[i];\n+                        int tc = 0;\n+                        for (int i = 0; i < tokens.length; ++i) {\n+                            if (tokens[i].length() > 0) {\n+                                ++tc;\n+                            }\n+                            if (tc == 3) {\n+                                oldpath = tokens[i];\n+                            }\n                         }\n                     }\n                 }\n             } catch (IOException e) {\n                 //ignore\n             }\n-            System.out.println(\"Old path: \"+oldpath);\n-            if (oldpath != null) file = Paths.get(oldpath.substring(0,oldpath.lastIndexOf('\\\\'))+\"\\\\.studioforkdb\\\\studio.properties\");\n+            System.out.println(\"Old path: \" + oldpath);\n+            if (oldpath != null) {\n+                file = Paths.get(oldpath.substring(0, oldpath.lastIndexOf('\\\\')) +\n+                    \"\\\\.studioforkdb\\\\studio.properties\");\n+            }\n         }\n         if (Files.exists(file)) {\n             try {\n@@ -171,18 +203,19 @@ public void save() {\n             out.close();\n         } catch (IOException e) {\n             System.err.println(\"Can't save configuration to \" + FILENAME);\n-            e.printStackTrace(System.err);  //To change body of catch statement use Options | File Templates.\n+            e.printStackTrace(\n+                System.err);  //To change body of catch statement use Options | File Templates.\n         }\n     }\n \n     public Object serverTreeToObj(ServerTreeNode root) {\n         //converts the server tree to an object that can be saved into JSON\n-        LinkedHashMap<String,Object> result = new LinkedHashMap<>();\n+        LinkedHashMap<String, Object> result = new LinkedHashMap<>();\n         result.put(\"name\", root.getName());\n-        if(root.isFolder()) {\n+        if (root.isFolder()) {\n             ArrayList<Object> children = new ArrayList<>();\n             result.put(\"children\", children);\n-            for (Enumeration<TreeNode> e = root.children(); e.hasMoreElements();) {\n+            for (Enumeration<TreeNode> e = root.children(); e.hasMoreElements(); ) {\n                 children.add(serverTreeToObj((ServerTreeNode) e.nextElement()));\n             }\n         }\n@@ -192,10 +225,10 @@ public Object serverTreeToObj(ServerTreeNode root) {\n     public void exportServerListToJSON(File f) {\n         ObjectMapper objectMapper = new ObjectMapper();\n         objectMapper.configure(SerializationFeature.INDENT_OUTPUT, true);\n-        Map<String,Object> cfg = new LinkedHashMap<>();\n-        ArrayList<Map<String,Object>> svs = new ArrayList<>();\n+        Map<String, Object> cfg = new LinkedHashMap<>();\n+        ArrayList<Map<String, Object>> svs = new ArrayList<>();\n         for (Server s : servers.values()) {\n-            LinkedHashMap<String,Object> ps = new LinkedHashMap<>();\n+            LinkedHashMap<String, Object> ps = new LinkedHashMap<>();\n             svs.add(ps);\n             ps.put(\"name\", s.getName());\n             ps.put(\"host\", s.getHost());\n@@ -211,17 +244,18 @@ public void exportServerListToJSON(File f) {\n             color.add(bgc.getBlue());\n             ps.put(\"color\", color);\n         }\n-        cfg.put(\"servers\",svs);\n+        cfg.put(\"servers\", svs);\n         cfg.put(\"serverTree\", serverTreeToObj(serverTree));\n         try {\n             FileWriter sw = new FileWriter(f);\n             objectMapper.writeValue(sw, cfg);\n-        } catch(IOException e) {\n+        } catch (IOException e) {\n             e.printStackTrace(System.err);\n         }\n     }\n \n-    private void importServerTreeFromJSON(HashMap<String, Server> serverMap, boolean isRoot, JsonNode jn, ServerTreeNode tn) {\n+    private void importServerTreeFromJSON(HashMap<String, Server> serverMap, boolean isRoot,\n+                                          JsonNode jn, ServerTreeNode tn) {\n         if (jn.has(\"children\")) {   //is a folder\n             ServerTreeNode ntn = tn;\n             if (!isRoot) {\n@@ -231,10 +265,11 @@ private void importServerTreeFromJSON(HashMap<String, Server> serverMap, boolean\n                     ntn = new ServerTreeNode(folderName);\n                     tn.add(ntn);\n                 }\n-            };\n+            }\n+            ;\n             JsonNode children = jn.get(\"children\");\n             if (children.isArray()) {\n-                for (JsonNode child : (Iterable<JsonNode>) ()->children.elements()) {\n+                for (JsonNode child : (Iterable<JsonNode>) () -> children.elements()) {\n                     importServerTreeFromJSON(serverMap, false, child, ntn);\n                 }\n             }\n@@ -260,21 +295,31 @@ public String importServerListFromJSON(File f) {\n         ArrayList<Integer> noName = new ArrayList<>();\n         try {\n             JsonNode root = objectMapper.readTree(f);\n-            if (!root.isObject()) return \"JSON root node is not an object\";\n-            if (!root.has(\"servers\")) return \"JSON root node doesn't have a \\\"servers\\\" property\";\n-            if (!root.has(\"serverTree\")) return \"JSON root node doesn't have a \\\"serverTree\\\" property\";\n+            if (!root.isObject()) {\n+                return \"JSON root node is not an object\";\n+            }\n+            if (!root.has(\"servers\")) {\n+                return \"JSON root node doesn't have a \\\"servers\\\" property\";\n+            }\n+            if (!root.has(\"serverTree\")) {\n+                return \"JSON root node doesn't have a \\\"serverTree\\\" property\";\n+            }\n             JsonNode serversNode = root.get(\"servers\");\n             JsonNode serverTreeNode = root.get(\"serverTree\");\n-            if (!serversNode.isArray()) return \"\\\"servers\\\" node is not an array\";\n+            if (!serversNode.isArray()) {\n+                return \"\\\"servers\\\" node is not an array\";\n+            }\n             HashSet<String> existingServers = new HashSet<>();\n-            for (Server s : servers.values()) existingServers.add(s.getName());\n+            for (Server s : servers.values()) {\n+                existingServers.add(s.getName());\n+            }\n             HashMap<String, Server> serverMap = new HashMap<>();\n-            int i=0;\n-            for (JsonNode serverNode : (Iterable<JsonNode>) ()->serversNode.elements()) {\n+            int i = 0;\n+            for (JsonNode serverNode : (Iterable<JsonNode>) () -> serversNode.elements()) {\n                 if (!serverNode.isObject()) {\n-                    sb.append(\"Non-object found inside \\\"servers\\\" array at index \"+i+\"\\n\");\n+                    sb.append(\"Non-object found inside \\\"servers\\\" array at index \" + i + \"\\n\");\n                 } else if (!serverNode.has(\"name\")) {\n-                    sb.append(\"Server at index \"+i+\" has no name\\n\");\n+                    sb.append(\"Server at index \" + i + \" has no name\\n\");\n                 } else {\n                     String sname = serverNode.get(\"name\").asText();\n                     if (sname.length() == 0) {\n@@ -284,16 +329,30 @@ public String importServerListFromJSON(File f) {\n                     } else {\n                         Server s = new Server();\n                         s.setName(sname);\n-                        if (serverNode.has(\"host\")) s.setHost(serverNode.get(\"host\").asText(\"\"));\n-                        if (serverNode.has(\"port\")) s.setPort(serverNode.get(\"port\").asInt(0));\n-                        if (serverNode.has(\"username\")) s.setUsername(serverNode.get(\"username\").asText(\"\"));\n-                        if (serverNode.has(\"password\")) s.setPassword(serverNode.get(\"password\").asText(\"\"));\n-                        if (serverNode.has(\"useTls\")) s.setUseTLS(serverNode.get(\"useTls\").asBoolean(false));\n-                        if (serverNode.has(\"authMethod\")) s.setAuthenticationMechanism(serverNode.get(\"authMethod\").asText(\"\"));\n+                        if (serverNode.has(\"host\")) {\n+                            s.setHost(serverNode.get(\"host\").asText(\"\"));\n+                        }\n+                        if (serverNode.has(\"port\")) {\n+                            s.setPort(serverNode.get(\"port\").asInt(0));\n+                        }\n+                        if (serverNode.has(\"username\")) {\n+                            s.setUsername(serverNode.get(\"username\").asText(\"\"));\n+                        }\n+                        if (serverNode.has(\"password\")) {\n+                            s.setPassword(serverNode.get(\"password\").asText(\"\"));\n+                        }\n+                        if (serverNode.has(\"useTls\")) {\n+                            s.setUseTLS(serverNode.get(\"useTls\").asBoolean(false));\n+                        }\n+                        if (serverNode.has(\"authMethod\")) {\n+                            s.setAuthenticationMechanism(serverNode.get(\"authMethod\").asText(\"\"));\n+                        }\n                         if (serverNode.has(\"color\")) {\n                             JsonNode color = serverNode.get(\"color\");\n                             if (color.isArray() && color.size() >= 3) {\n-                                s.setBackgroundColor(new Color(color.get(0).asInt(255),color.get(1).asInt(255),color.get(2).asInt(255)));\n+                                s.setBackgroundColor(\n+                                    new Color(color.get(0).asInt(255), color.get(1).asInt(255),\n+                                        color.get(2).asInt(255)));\n                             }\n                         }\n                         serverMap.put(sname, s);\n@@ -304,9 +363,14 @@ public String importServerListFromJSON(File f) {\n             if (serverTreeNode.isObject()) {\n                 importServerTreeFromJSON(serverMap, true, serverTreeNode, serverTree);\n             }\n-            if (0<noName.size()) sb.append(\"The servers at the following indices have no names: \"+noName);\n-            if (0<alreadyExist.size()) sb.append(\"The following servers already exist and were not imported: \"+alreadyExist);\n-        } catch(IOException e) {\n+            if (0 < noName.size()) {\n+                sb.append(\"The servers at the following indices have no names: \" + noName);\n+            }\n+            if (0 < alreadyExist.size()) {\n+                sb.append(\n+                    \"The following servers already exist and were not imported: \" + alreadyExist);\n+            }\n+        } catch (IOException e) {\n             return e.toString();\n         }\n         int i = 0;\n@@ -320,7 +384,9 @@ public String importServerListFromJSON(File f) {\n     // \"\".split(\",\") return {\"\"}; we need to get zero length array\n     private String[] split(String str) {\n         str = str.trim();\n-        if (str.length() == 0) return new String[0];\n+        if (str.length() == 0) {\n+            return new String[0];\n+        }\n         return str.split(\",\");\n     }\n \n@@ -334,15 +400,17 @@ public String getLRUServer() {\n     }\n \n     public void setLRUServer(Server s) {\n-        if (s == null) return; // May be it should be an exception ?\n+        if (s == null) {\n+            return; // May be it should be an exception ?\n+        }\n \n         p.put(\"lruServer\", s.getFullName());\n         save();\n     }\n \n \n     public void saveQKeywords(String[] keywords) {\n-        p.put(\"qkeywords\", String.join(\",\",keywords));\n+        p.put(\"qkeywords\", String.join(\",\", keywords));\n         save();\n     }\n \n@@ -379,8 +447,12 @@ public void setLookAndFeel(String lf) {\n     // If user and password are not found, defaults form default AuthenticationMechanism are used\n     public Server getServerByConnectionString(String connectionString) {\n         connectionString = connectionString.trim();\n-        if (connectionString.startsWith(\"`\")) connectionString = connectionString.substring(1);\n-        if (connectionString.startsWith(\":\")) connectionString = connectionString.substring(1);\n+        if (connectionString.startsWith(\"`\")) {\n+            connectionString = connectionString.substring(1);\n+        }\n+        if (connectionString.startsWith(\":\")) {\n+            connectionString = connectionString.substring(1);\n+        }\n \n         String[] nodes = connectionString.split(\":\");\n         if (nodes.length < 2) {\n@@ -398,13 +470,15 @@ public Server getServerByConnectionString(String connectionString) {\n             password = credentials.getPassword();\n         } else {\n             user = nodes[2];\n-            password = nodes.length > 3 ? Stream.of(nodes).skip(3).collect(Collectors.joining(\":\")) : \"\";\n+            password =\n+                nodes.length > 3 ? Stream.of(nodes).skip(3).collect(Collectors.joining(\":\")) : \"\";\n         }\n \n         Color bgColor = Config.getInstance().getDefaultBackgroundColor();\n \n-        for (Server s: getServers()) {\n-            if (s.getHost().equals(host) && s.getPort() == port && s.getUsername().equals(user) && s.getPassword().equals(password)) {\n+        for (Server s : getServers()) {\n+            if (s.getHost().equals(host) && s.getPort() == port && s.getUsername().equals(user) &&\n+                s.getPassword().equals(password)) {\n                 return s;\n             }\n         }\n@@ -426,7 +500,10 @@ public void setDefaultCredentials(String authenticationMechanism, Credentials cr\n \n     public String getDefaultAuthMechanism() {\n         String result = p.getProperty(\"auth\", null);\n-        if (result == null) result = System.getenv().getOrDefault(\"KDB_STUDIO_AUTH_METHOD\", DefaultAuthenticationMechanism.NAME);\n+        if (result == null) {\n+            result = System.getenv()\n+                .getOrDefault(\"KDB_STUDIO_AUTH_METHOD\", DefaultAuthenticationMechanism.NAME);\n+        }\n         return result;\n     }\n \n@@ -436,7 +513,7 @@ public void setDefaultAuthMechanism(String authMechanism) {\n     }\n \n     public boolean isShowServerComboBox() {\n-        return Boolean.parseBoolean(p.getProperty(\"showServerComboBox\",\"true\"));\n+        return Boolean.parseBoolean(p.getProperty(\"showServerComboBox\", \"true\"));\n     }\n \n     public boolean isShowConsoleView() {\n@@ -454,7 +531,7 @@ public void setShowConsoleView(boolean value) {\n     }\n \n     public int getResultTabsCount() {\n-        return Integer.parseInt(p.getProperty(\"resultTabsCount\",\"6\"));\n+        return Integer.parseInt(p.getProperty(\"resultTabsCount\", \"6\"));\n     }\n \n     public void setResultTabsCount(int value) {\n@@ -463,10 +540,10 @@ public void setResultTabsCount(int value) {\n     }\n \n     public void setServerListBounds(Rectangle rectangle) {\n-        p.setProperty(\"serverList.x\", \"\" + (int)rectangle.getX());\n-        p.setProperty(\"serverList.y\", \"\" + (int)rectangle.getY());\n-        p.setProperty(\"serverList.width\", \"\" + (int)rectangle.getWidth());\n-        p.setProperty(\"serverList.height\", \"\" + (int)rectangle.getHeight());\n+        p.setProperty(\"serverList.x\", \"\" + (int) rectangle.getX());\n+        p.setProperty(\"serverList.y\", \"\" + (int) rectangle.getY());\n+        p.setProperty(\"serverList.width\", \"\" + (int) rectangle.getWidth());\n+        p.setProperty(\"serverList.height\", \"\" + (int) rectangle.getHeight());\n         save();\n     }\n \n@@ -478,11 +555,11 @@ public Rectangle getServerListBounds() {\n \n         if (strX != null && strY != null && strWidth != null && strHeight != null) {\n             return new Rectangle(Integer.parseInt(strX), Integer.parseInt(strY),\n-                                Integer.parseInt(strWidth), Integer.parseInt(strHeight));\n+                Integer.parseInt(strWidth), Integer.parseInt(strHeight));\n         }\n \n         DisplayMode displayMode = GraphicsEnvironment.getLocalGraphicsEnvironment()\n-                                            .getDefaultScreenDevice().getDisplayMode();\n+            .getDefaultScreenDevice().getDisplayMode();\n \n         int width = displayMode.getWidth();\n         int height = displayMode.getHeight();\n@@ -491,7 +568,7 @@ public Rectangle getServerListBounds() {\n         int h = Math.min(height / 2, ServerList.DEFAULT_HEIGHT);\n         int x = (width - w) / 2;\n         int y = (height - h) / 2;\n-        return new Rectangle(x,y,w,h);\n+        return new Rectangle(x, y, w, h);\n     }\n \n     public Collection<String> getServerNames() {\n@@ -516,9 +593,12 @@ private Server initServerFromKey(String key) {\n         String username = p.getProperty(\"server.\" + key + \".user\", \"\");\n         String password = p.getProperty(\"server.\" + key + \".password\", \"\");\n         String backgroundColor = p.getProperty(\"server.\" + key + \".backgroundColor\", \"FFFFFF\");\n-        String authenticationMechanism = p.getProperty(\"server.\" + key + \".authenticationMechanism\", null);\n-        if (authenticationMechanism == null)\n-            authenticationMechanism = System.getenv().getOrDefault(\"KDB_STUDIO_AUTH_METHOD\", DefaultAuthenticationMechanism.NAME);\n+        String authenticationMechanism =\n+            p.getProperty(\"server.\" + key + \".authenticationMechanism\", null);\n+        if (authenticationMechanism == null) {\n+            authenticationMechanism = System.getenv()\n+                .getOrDefault(\"KDB_STUDIO_AUTH_METHOD\", DefaultAuthenticationMechanism.NAME);\n+        }\n         boolean useTLS = Boolean.parseBoolean(p.getProperty(\"server.\" + key + \".useTLS\", \"false\"));\n         Color c = new Color(Integer.parseInt(backgroundColor, 16));\n         return new Server(\"\", host, port, username, password, c, authenticationMechanism, useTLS);\n@@ -531,7 +611,7 @@ private Server initServerFromProperties(int number) {\n     private void convertFromOldVerion() {\n         try {\n             System.out.println(\"Found old config. Converting...\");\n-            String[] names = p.getProperty(\"Servers\",\"\").split(\",\");\n+            String[] names = p.getProperty(\"Servers\", \"\").split(\",\");\n             List<Server> list = new ArrayList<>();\n             for (String name : names) {\n                 Server server = initServerFromKey(name);\n@@ -551,7 +631,7 @@ private void convertFromOldVerion() {\n     }\n \n     private void initServers() {\n-        if (p.getProperty(\"version\",\"\").equals(OLD_VERSION)) {\n+        if (p.getProperty(\"version\", \"\").equals(OLD_VERSION)) {\n             convertFromOldVerion();\n         }\n         serverNames = new ArrayList<>();\n@@ -596,14 +676,16 @@ private void saveServerDetails(Server server, int number) {\n         p.setProperty(\"server.\" + number + \".port\", \"\" + server.getPort());\n         p.setProperty(\"server.\" + number + \".user\", \"\" + server.getUsername());\n         p.setProperty(\"server.\" + number + \".password\", \"\" + server.getPassword());\n-        p.setProperty(\"server.\" + number + \".backgroundColor\", \"\" + Integer.toHexString(server.getBackgroundColor().getRGB()).substring(2));\n-        p.setProperty(\"server.\" + number + \".authenticationMechanism\", server.getAuthenticationMechanism());\n+        p.setProperty(\"server.\" + number + \".backgroundColor\",\n+            \"\" + Integer.toHexString(server.getBackgroundColor().getRGB()).substring(2));\n+        p.setProperty(\"server.\" + number + \".authenticationMechanism\",\n+            server.getAuthenticationMechanism());\n         p.setProperty(\"server.\" + number + \".useTLS\", \"\" + server.getUseTLS());\n     }\n \n     private int saveServerTree(String keyPrefix, ServerTreeNode node, int number) {\n         int count = node.getChildCount();\n-        for(int index = 0; index<count; index++) {\n+        for (int index = 0; index < count; index++) {\n             String key = keyPrefix + index;\n             ServerTreeNode child = node.getChild(index);\n             if (child.isFolder()) {\n@@ -646,7 +728,8 @@ private void addServerInternal(Server server) {\n         String name = server.getName();\n         String fullName = server.getFullName();\n         if (serverNames.contains(fullName)) {\n-            throw new IllegalArgumentException(\"Server with full name \" + fullName + \" already exist\");\n+            throw new IllegalArgumentException(\n+                \"Server with full name \" + fullName + \" already exist\");\n         }\n         if (name.trim().length() == 0) {\n             throw new IllegalArgumentException(\"Server name can't be empty\");\n@@ -698,20 +781,23 @@ public void setServerTree(ServerTreeNode serverTree) {\n             purgeAll();\n             this.serverTree = serverTree;\n \n-            for(Enumeration e = serverTree.depthFirstEnumeration(); e.hasMoreElements();) {\n+            for (Enumeration e = serverTree.depthFirstEnumeration(); e.hasMoreElements(); ) {\n                 ServerTreeNode node = (ServerTreeNode) e.nextElement();\n-                if (node.isRoot()) continue;\n+                if (node.isRoot()) {\n+                    continue;\n+                }\n \n                 if (node.isFolder()) {\n                     String folder = node.getFolder();\n-                    if (folder.trim().length()==0) {\n+                    if (folder.trim().length() == 0) {\n                         throw new IllegalArgumentException(\"Can't add folder with empty name\");\n                     }\n                     if (folder.contains(\"/\")) {\n                         throw new IllegalArgumentException(\"Folder can't contain /\");\n                     }\n-                    if ( ((ServerTreeNode)node.getParent()).getChild(node.getFolder())!= node ) {\n-                        throw new IllegalArgumentException(\"Duplicate folder is found: \" + node.fullPath());\n+                    if (((ServerTreeNode) node.getParent()).getChild(node.getFolder()) != node) {\n+                        throw new IllegalArgumentException(\n+                            \"Duplicate folder is found: \" + node.fullPath());\n                     }\n                 } else {\n                     Server server = node.getServer();"
  },
  {
    "sha": "c2a2d27ff09ce79d71ad8f8c5eb3d6d2e9445a9c",
    "filename": "src/main/studio/kdb/ConnectionPool.java",
    "status": "modified",
    "additions": 39,
    "deletions": 22,
    "changes": 61,
    "blob_url": "https://github.com/finos/kdb-studio/blob/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/studio/kdb/ConnectionPool.java",
    "raw_url": "https://github.com/finos/kdb-studio/raw/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/studio/kdb/ConnectionPool.java",
    "contents_url": "https://api.github.com/repos/finos/kdb-studio/contents/src/main/studio/kdb/ConnectionPool.java?ref=c47d03bbf301958bd9dccb66aac21a9b002bfb7c",
    "patch": "@@ -1,34 +1,38 @@\n package studio.kdb;\n \n+import java.io.IOException;\n+import java.util.HashMap;\n+import java.util.LinkedList;\n+import java.util.List;\n+import java.util.Map;\n+import kx.c.K4Exception;\n import studio.core.AuthenticationManager;\n import studio.core.Credentials;\n import studio.core.IAuthenticationMechanism;\n-import java.util.*;\n-import java.io.IOException;\n-import kx.c.K4Exception;\n \n public class ConnectionPool {\n-    private final static ConnectionPool instance = new ConnectionPool();\n-    private final Map<Server,List<kx.c>> freeMap = new HashMap<>();\n-    private final Map<Server,List<kx.c>> busyMap = new HashMap<>();\n+    private static final ConnectionPool instance = new ConnectionPool();\n+    private final Map<Server, List<kx.c>> freeMap = new HashMap<>();\n+    private final Map<Server, List<kx.c>> busyMap = new HashMap<>();\n \n     public static ConnectionPool getInstance() {\n         return instance;\n     }\n \n-    private ConnectionPool() {}\n+    private ConnectionPool() {\n+    }\n \n     public synchronized void purge(Server s) {\n         List<kx.c> list = freeMap.computeIfAbsent(s, k -> new LinkedList<>());\n-        for (kx.c c: list) {\n+        for (kx.c c : list) {\n             c.close();\n         }\n         list.clear();\n-        busyMap.put(s,new LinkedList<>());\n+        busyMap.put(s, new LinkedList<>());\n     }\n \n     public synchronized kx.c leaseConnection(Server s) throws IOException, K4Exception {\n-        List<kx.c> list =  freeMap.computeIfAbsent(s, k -> new LinkedList<>());\n+        List<kx.c> list = freeMap.computeIfAbsent(s, k -> new LinkedList<>());\n         List<kx.c> dead = new LinkedList<>();\n \n         kx.c c = null;\n@@ -46,17 +50,23 @@ public synchronized void purge(Server s) {\n             try {\n                 String mech = s.getAuthenticationMechanism();\n                 Class<?> clazz = AuthenticationManager.getInstance().lookup(mech);\n-                if(clazz == null) throw new RuntimeException(\"Can't find authentication mechanism: \"+mech);\n-                IAuthenticationMechanism authenticationMechanism = (IAuthenticationMechanism) clazz.newInstance();\n+                if (clazz == null) {\n+                    throw new RuntimeException(\"Can't find authentication mechanism: \" + mech);\n+                }\n+                IAuthenticationMechanism authenticationMechanism =\n+                    (IAuthenticationMechanism) clazz.newInstance();\n \n                 authenticationMechanism.setProperties(s.getAsProperties());\n                 Credentials credentials = authenticationMechanism.getCredentials();\n                 if (credentials.getUsername().length() > 0) {\n                     String p = credentials.getPassword();\n \n-                    c = new kx.c(s.getHost(), s.getPort(), credentials.getUsername() + ((p.length() == 0) ? \"\" : \":\" + p), s.getUseTLS());\n-                } else\n+                    c = new kx.c(s.getHost(), s.getPort(),\n+                        credentials.getUsername() + ((p.length() == 0) ? \"\" : \":\" + p),\n+                        s.getUseTLS());\n+                } else {\n                     c = new kx.c(s.getHost(), s.getPort(), \"\", s.getUseTLS());\n+                }\n             } catch (InstantiationException | IllegalAccessException | IllegalArgumentException ex) {\n                 System.err.println(\"Failed to initialize connection: \" + ex);\n                 ex.printStackTrace(System.err);\n@@ -72,27 +82,34 @@ public synchronized void purge(Server s) {\n         return c;\n     }\n \n-    public synchronized void freeConnection(Server s,kx.c c) {\n-        if (c == null) return;\n+    public synchronized void freeConnection(Server s, kx.c c) {\n+        if (c == null) {\n+            return;\n+        }\n \n         List<kx.c> list = busyMap.computeIfAbsent(s, k -> new LinkedList<>());\n \n         // If c not in our busy list it has been purged, so close it\n-        if (!list.remove(c))\n+        if (!list.remove(c)) {\n             c.close();\n+        }\n \n         if (!c.isClosed()) {\n             list = freeMap.get(s);\n-            if (list == null)\n+            if (list == null) {\n                 c.close();\n-            else\n+            } else {\n                 list.add(c);\n+            }\n         }\n     }\n \n-    public void checkConnected(kx.c c) throws IOException,K4Exception {\n-        if (c == null) return;\n-        if (c.isClosed())\n+    public void checkConnected(kx.c c) throws IOException, K4Exception {\n+        if (c == null) {\n+            return;\n+        }\n+        if (c.isClosed()) {\n             c.reconnect(true);\n+        }\n     }\n }"
  },
  {
    "sha": "ecde23bd7c06438d578cba752b1ab90b3734860b",
    "filename": "src/main/studio/kdb/DictTableModel.java",
    "status": "modified",
    "additions": 2,
    "deletions": 1,
    "changes": 3,
    "blob_url": "https://github.com/finos/kdb-studio/blob/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/studio/kdb/DictTableModel.java",
    "raw_url": "https://github.com/finos/kdb-studio/raw/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/studio/kdb/DictTableModel.java",
    "contents_url": "https://api.github.com/repos/finos/kdb-studio/contents/src/main/studio/kdb/DictTableModel.java?ref=c47d03bbf301958bd9dccb66aac21a9b002bfb7c",
    "patch": "@@ -10,8 +10,9 @@ public DictTableModel(K.Dict obj) {\n     public boolean isKey(int column) {\n         K.Flip f = (K.Flip) dict.x;\n \n-        if (column < f.x.getLength())\n+        if (column < f.x.getLength()) {\n             return true;\n+        }\n         return false;\n     }\n "
  },
  {
    "sha": "57bd1b22264b54fb5546c36dc13cb82f0923f74c",
    "filename": "src/main/studio/kdb/K.java",
    "status": "modified",
    "additions": 293,
    "deletions": 198,
    "changes": 491,
    "blob_url": "https://github.com/finos/kdb-studio/blob/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/studio/kdb/K.java",
    "raw_url": "https://github.com/finos/kdb-studio/raw/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/studio/kdb/K.java",
    "contents_url": "https://api.github.com/repos/finos/kdb-studio/contents/src/main/studio/kdb/K.java?ref=c47d03bbf301958bd9dccb66aac21a9b002bfb7c",
    "patch": "@@ -8,7 +8,11 @@\n import java.text.DecimalFormat;\n import java.text.NumberFormat;\n import java.text.SimpleDateFormat;\n-import java.util.*;\n+import java.util.Calendar;\n+import java.util.Date;\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.UUID;\n \n public class K {\n     private static final int TO_STRING_MAX_LENGTH = 50_000;\n@@ -73,11 +77,12 @@ public void setAttr(byte attr) {\n             this.attr = attr;\n         }\n \n-        private static final String[] sAttr = new String[]{\"\", \"`s#\", \"`u#\", \"`p#\", \"`g#\"};\n+        private static final String[] sAttr = new String[] {\"\", \"`s#\", \"`u#\", \"`p#\", \"`g#\"};\n \n         public String toString(boolean showType) {\n-            if (attr <= sAttr.length)\n+            if (attr <= sAttr.length) {\n                 return sAttr[attr];\n+            }\n             return \"\";\n         }\n \n@@ -117,7 +122,10 @@ public String toString(boolean showType) {\n     }\n \n     public static class BinaryPrimitive extends Primitive {\n-        private static final String[] ops = {\":\", \"+\", \"-\", \"*\", \"%\", \"&\", \"|\", \"^\", \"=\", \"<\", \">\", \"$\", \",\", \"#\", \"_\", \"~\", \"!\", \"?\", \"@\", \".\", \"0:\", \"1:\", \"2:\", \"in\", \"within\", \"like\", \"bin\", \"ss\", \"insert\", \"wsum\", \"wavg\", \"div\", \"xexp\", \"setenv\", \"binr\", \"cov\", \"cor\"};\n+        private static final String[] ops =\n+            {\":\", \"+\", \"-\", \"*\", \"%\", \"&\", \"|\", \"^\", \"=\", \"<\", \">\", \"$\", \",\", \"#\", \"_\", \"~\", \"!\",\n+                \"?\", \"@\", \".\", \"0:\", \"1:\", \"2:\", \"in\", \"within\", \"like\", \"bin\", \"ss\", \"insert\",\n+                \"wsum\", \"wavg\", \"div\", \"xexp\", \"setenv\", \"binr\", \"cov\", \"cor\"};\n \n         public String getDataType() {\n             return \"Binary Primitive\";\n@@ -329,24 +337,26 @@ public String getDataType() {\n         private static final Map map = new HashMap();\n \n         public static void init(char[] ops, int[] values) {\n-            for (int i = 0; i < values.length; i++)\n+            for (int i = 0; i < values.length; i++) {\n                 map.put(values[i], ops[i]);\n+            }\n         }\n \n         private final int primitive;\n         private char charVal = ' ';\n \n \n         static {\n-            init(\"'/\\\\\".toCharArray(), new int[]{0, 1, 2});\n+            init(\"'/\\\\\".toCharArray(), new int[] {0, 1, 2});\n         }\n \n         public TernaryOperator(int i) {\n             type = 103;\n             primitive = i;\n             Character c = (Character) map.get(i);\n-            if (c != null)\n+            if (c != null) {\n                 charVal = c;\n+            }\n         }\n \n         public char getPrimitive() {\n@@ -363,16 +373,21 @@ public void toString(LimitedWriter w, boolean showType) throws IOException {\n     }\n \n     public static class UnaryPrimitive extends Primitive {\n-        private static final String[] ops = {\"::\", \"+:\", \"-:\", \"*:\", \"%:\", \"&:\", \"|:\", \"^:\", \"=:\", \"<:\", \">:\", \"$:\", \",:\", \"#:\", \"_:\", \"~:\", \"!:\", \"?:\", \"@:\", \".:\", \"0::\", \"1::\", \"2::\", \"avg\", \"last\", \"sum\", \"prd\", \"min\", \"max\", \"exit\", \"getenv\", \"abs\", \"sqrt\", \"log\", \"exp\", \"sin\", \"asin\", \"cos\", \"acos\", \"tan\", \"atan\", \"enlist\", \"var\", \"dev\", \"hopen\"};\n+        private static final String[] ops =\n+            {\"::\", \"+:\", \"-:\", \"*:\", \"%:\", \"&:\", \"|:\", \"^:\", \"=:\", \"<:\", \">:\", \"$:\", \",:\", \"#:\",\n+                \"_:\", \"~:\", \"!:\", \"?:\", \"@:\", \".:\", \"0::\", \"1::\", \"2::\", \"avg\", \"last\", \"sum\",\n+                \"prd\", \"min\", \"max\", \"exit\", \"getenv\", \"abs\", \"sqrt\", \"log\", \"exp\", \"sin\", \"asin\",\n+                \"cos\", \"acos\", \"tan\", \"atan\", \"enlist\", \"var\", \"dev\", \"hopen\"};\n \n         public UnaryPrimitive(int i) {\n             super(ops, i);\n             type = 101;\n         }\n \n         public void toString(LimitedWriter w, boolean showType) throws IOException {\n-            if (getPrimitiveAsInt() == -1)\n+            if (getPrimitiveAsInt() == -1) {\n                 return;\n+            }\n             w.write(getPrimitive());\n         }\n     }\n@@ -424,8 +439,9 @@ public KBoolean(boolean b) {\n \n         public String toString(boolean showType) {\n             String s = b ? \"1\" : \"0\";\n-            if (showType)\n+            if (showType) {\n                 s += \"b\";\n+            }\n             return s;\n         }\n \n@@ -489,16 +505,18 @@ public boolean isNull() {\n \n         public String toString(boolean showType) {\n             String t;\n-            if (s == Short.MIN_VALUE)\n+            if (s == Short.MIN_VALUE) {\n                 t = \"0N\";\n-            else if (s == Short.MAX_VALUE)\n+            } else if (s == Short.MAX_VALUE) {\n                 t = \"0W\";\n-            else if (s == -Short.MAX_VALUE)\n+            } else if (s == -Short.MAX_VALUE) {\n                 t = \"-0W\";\n-            else\n+            } else {\n                 t = Short.toString(s);\n-            if (showType)\n+            }\n+            if (showType) {\n                 t += \"h\";\n+            }\n             return t;\n         }\n \n@@ -529,16 +547,18 @@ public boolean isNull() {\n \n         public String toString(boolean showType) {\n             String s;\n-            if (isNull())\n+            if (isNull()) {\n                 s = \"0N\";\n-            else if (i == Integer.MAX_VALUE)\n+            } else if (i == Integer.MAX_VALUE) {\n                 s = \"0W\";\n-            else if (i == -Integer.MAX_VALUE)\n+            } else if (i == -Integer.MAX_VALUE) {\n                 s = \"-0W\";\n-            else\n+            } else {\n                 s = Integer.toString(i);\n-            if (showType)\n+            }\n+            if (showType) {\n                 s += \"i\";\n+            }\n             return s;\n         }\n \n@@ -568,8 +588,9 @@ public boolean isNull() {\n         }\n \n         public void toString(LimitedWriter w, boolean showType) throws IOException {\n-            if (showType)\n+            if (showType) {\n                 w.write(\"`\");\n+            }\n             w.write(s);\n         }\n \n@@ -600,17 +621,18 @@ public boolean isNull() {\n \n         public String toString(boolean showType) {\n             String s;\n-            if (isNull())\n+            if (isNull()) {\n                 s = \"0N\";\n-            else if (j == Long.MAX_VALUE)\n+            } else if (j == Long.MAX_VALUE) {\n                 s = \"0W\";\n-            else if (j == -Long.MAX_VALUE)\n+            } else if (j == -Long.MAX_VALUE) {\n                 s = \"-0W\";\n-            else {\n+            } else {\n                 s = Long.toString(j);\n             }\n-            if (showType)\n+            if (showType) {\n                 s += \"j\";\n+            }\n \n             return s;\n         }\n@@ -642,10 +664,11 @@ public boolean isNull() {\n         }\n \n         public String toString(boolean showType) {\n-            if (showType)\n+            if (showType) {\n                 return \"\\\"\" + c + \"\\\"\";\n-            else\n+            } else {\n                 return \"\" + c;\n+            }\n         }\n \n         public void toString(LimitedWriter w, boolean showType) throws IOException {\n@@ -679,13 +702,13 @@ public boolean isNull() {\n         }\n \n         public String toString(boolean showType) {\n-            if (isNull())\n+            if (isNull()) {\n                 return showType ? \"0Ne\" : \"0N\";\n-            else if (f == Float.POSITIVE_INFINITY)\n+            } else if (f == Float.POSITIVE_INFINITY) {\n                 return showType ? \"0We\" : \"0W\";\n-            else if (f == Float.NEGATIVE_INFINITY)\n+            } else if (f == Float.NEGATIVE_INFINITY) {\n                 return showType ? \"-0We\" : \"-0W\";\n-            else {\n+            } else {\n                 String s = Config.getInstance().getNumberFormat().format(f);\n                 if (showType) {\n                     s += \"e\";\n@@ -726,13 +749,13 @@ public boolean isNull() {\n         }\n \n         public String toString(boolean showType) {\n-            if (isNull())\n+            if (isNull()) {\n                 return showType ? \"0nf\" : \"0n\";\n-            else if (d == Double.POSITIVE_INFINITY)\n+            } else if (d == Double.POSITIVE_INFINITY) {\n                 return showType ? \"0wf\" : \"0w\";\n-            else if (d == Double.NEGATIVE_INFINITY)\n+            } else if (d == Double.NEGATIVE_INFINITY) {\n                 return showType ? \"-0wf\" : \"-0w\";\n-            else {\n+            } else {\n                 String s = Config.getInstance().getNumberFormat().format(d);\n                 if (showType) {\n                     s += \"f\";\n@@ -769,14 +792,15 @@ public boolean isNull() {\n         }\n \n         public String toString(boolean showType) {\n-            if (isNull())\n+            if (isNull()) {\n                 return \"0Nd\";\n-            else if (date == Integer.MAX_VALUE)\n+            } else if (date == Integer.MAX_VALUE) {\n                 return \"0Wd\";\n-            else if (date == -Integer.MAX_VALUE)\n+            } else if (date == -Integer.MAX_VALUE) {\n                 return \"-0Wd\";\n-            else\n+            } else {\n                 return sd(\"yyyy.MM.dd\", new Date(86400000L * (date + 10957)));\n+            }\n         }\n \n         public void toString(LimitedWriter w, boolean showType) throws IOException {\n@@ -832,14 +856,15 @@ public boolean isNull() {\n         }\n \n         public String toString(boolean showType) {\n-            if (isNull())\n+            if (isNull()) {\n                 return \"0Nt\";\n-            else if (time == Integer.MAX_VALUE)\n+            } else if (time == Integer.MAX_VALUE) {\n                 return \"0Wt\";\n-            else if (time == -Integer.MAX_VALUE)\n+            } else if (time == -Integer.MAX_VALUE) {\n                 return \"-0Wt\";\n-            else\n+            } else {\n                 return sd(\"HH:mm:ss.SSS\", new Time(time));\n+            }\n         }\n \n         public void toString(LimitedWriter w, boolean showType) throws IOException {\n@@ -875,7 +900,8 @@ public String toString(boolean showType) {\n             } else if (time == Double.NEGATIVE_INFINITY) {\n                 return showType ? \"-0Wz\" : \"-0W\";\n             } else {\n-                return sd(showType ? \"yyyy.MM.dd HH:mm:ss.SSS'z'\" : \"yyyy.MM.dd HH:mm:ss.SSS\", toTimestamp());\n+                return sd(showType ? \"yyyy.MM.dd HH:mm:ss.SSS'z'\" : \"yyyy.MM.dd HH:mm:ss.SSS\",\n+                    toTimestamp());\n             }\n         }\n \n@@ -906,13 +932,13 @@ public boolean isNull() {\n         }\n \n         public String toString(boolean showType) {\n-            if (isNull())\n+            if (isNull()) {\n                 return \"0Np\";\n-            else if (time == Long.MAX_VALUE)\n+            } else if (time == Long.MAX_VALUE) {\n                 return \"0Wp\";\n-            else if (time == -Long.MAX_VALUE)\n+            } else if (time == -Long.MAX_VALUE) {\n                 return \"-0Wp\";\n-            else {\n+            } else {\n                 Timestamp ts = toTimestamp();\n                 return sd(\"yyyy.MM.dd HH:mm:ss.\", ts) + nsFormatter.format(ts.getNanos());\n             }\n@@ -950,11 +976,13 @@ public Dict(K.KBase X, K.KBase Y) {\n \n         public void upsert(K.Dict upd) {\n             //if dict is not table\n-            if (!(x instanceof K.Flip) || !(y instanceof K.Flip))\n+            if (!(x instanceof K.Flip) || !(y instanceof K.Flip)) {\n                 return;\n+            }\n             //if upd is not table\n-            if (!(upd.x instanceof K.Flip) || !(upd.y instanceof K.Flip))\n+            if (!(upd.x instanceof K.Flip) || !(upd.y instanceof K.Flip)) {\n                 return;\n+            }\n             Flip cx = (K.Flip) x;\n             Flip cy = (K.Flip) y;\n             Flip updx = (K.Flip) upd.x;\n@@ -966,11 +994,13 @@ public void upsert(K.Dict upd) {\n         public void toString(LimitedWriter w, boolean showType) throws IOException {\n             boolean useBrackets = getAttr() != 0 || x instanceof Flip;\n             super.toString(w, showType);\n-            if (useBrackets)\n+            if (useBrackets) {\n                 w.write(\"(\");\n+            }\n             x.toString(w, showType);\n-            if (useBrackets)\n+            if (useBrackets) {\n                 w.write(\")\");\n+            }\n             w.write(\"!\");\n             y.toString(w, showType);\n         }\n@@ -993,18 +1023,21 @@ public Flip(Dict X) {\n         public void toString(LimitedWriter w, boolean showType) throws IOException {\n             boolean usebracket = x.getLength() == 1;\n             w.write(flip);\n-            if (usebracket)\n+            if (usebracket) {\n                 w.write(\"(\");\n+            }\n             x.toString(w, showType);\n-            if (usebracket)\n+            if (usebracket) {\n                 w.write(\")\");\n+            }\n             w.write(\"!\");\n             y.toString(w, showType);\n         }\n \n         public void append(Flip nf) {\n-            for (int i = 0; i < y.getLength(); i++)\n+            for (int i = 0; i < y.getLength(); i++) {\n                 ((KBaseVector) y.at(i)).append((KBaseVector) nf.y.at(i));\n+            }\n         }\n     }\n \n@@ -1025,17 +1058,18 @@ public boolean isNull() {\n         }\n \n         public String toString(boolean showType) {\n-            if (isNull())\n+            if (isNull()) {\n                 return showType ? \"0Nm\" : \"0N\";\n-            else if (i == Integer.MAX_VALUE)\n+            } else if (i == Integer.MAX_VALUE) {\n                 return showType ? \"0Wm\" : \"0W\";\n-            else if (i == -Integer.MAX_VALUE)\n+            } else if (i == -Integer.MAX_VALUE) {\n                 return showType ? \"-0Wm\" : \"-0W\";\n-            else {\n+            } else {\n                 int m = i + 24000, y = m / 12;\n                 String s = i2(y / 100) + i2(y % 100) + \".\" + i2(1 + m % 12);\n-                if (showType)\n+                if (showType) {\n                     s += \"m\";\n+                }\n                 return s;\n             }\n         }\n@@ -1070,14 +1104,15 @@ public boolean isNull() {\n         }\n \n         public String toString(boolean showType) {\n-            if (isNull())\n+            if (isNull()) {\n                 return \"0Nu\";\n-            else if (i == Integer.MAX_VALUE)\n+            } else if (i == Integer.MAX_VALUE) {\n                 return \"0Wu\";\n-            else if (i == -Integer.MAX_VALUE)\n+            } else if (i == -Integer.MAX_VALUE) {\n                 return \"-0Wu\";\n-            else\n+            } else {\n                 return i2(i / 60) + \":\" + i2(i % 60);\n+            }\n         }\n \n         public void toString(LimitedWriter w, boolean showType) throws IOException {\n@@ -1109,14 +1144,15 @@ public boolean isNull() {\n         }\n \n         public String toString(boolean showType) {\n-            if (isNull())\n+            if (isNull()) {\n                 return \"0Nv\";\n-            else if (i == Integer.MAX_VALUE)\n+            } else if (i == Integer.MAX_VALUE) {\n                 return \"0Wv\";\n-            else if (i == -Integer.MAX_VALUE)\n+            } else if (i == -Integer.MAX_VALUE) {\n                 return \"-0Wv\";\n-            else\n+            } else {\n                 return new Minute(i / 60).toString() + ':' + i2(i % 60);\n+            }\n         }\n \n         public void toString(LimitedWriter w, boolean showType) throws IOException {\n@@ -1149,26 +1185,27 @@ public boolean isNull() {\n         }\n \n         public String toString(boolean showType) {\n-            if (isNull())\n+            if (isNull()) {\n                 return \"0Nn\";\n-            else if (j == Long.MAX_VALUE)\n+            } else if (j == Long.MAX_VALUE) {\n                 return \"0Wn\";\n-            else if (j == -Long.MAX_VALUE)\n+            } else if (j == -Long.MAX_VALUE) {\n                 return \"-0Wn\";\n-            else {\n+            } else {\n                 String s = \"\";\n                 long jj = j;\n                 if (jj < 0) {\n                     jj = -jj;\n                     s = \"-\";\n                 }\n                 int d = ((int) (jj / 86400000000000L));\n-                if (d != 0)\n+                if (d != 0) {\n                     s += d + \"D\";\n+                }\n                 return s + i2((int) ((jj % 86400000000000L) / 3600000000000L)) +\n-                        \":\" + i2((int) ((jj % 3600000000000L) / 60000000000L)) +\n-                        \":\" + i2((int) ((jj % 60000000000L) / 1000000000L)) +\n-                        \".\" + nsFormatter.format((int) (jj % 1000000000L));\n+                    \":\" + i2((int) ((jj % 3600000000000L) / 60000000000L)) +\n+                    \":\" + i2((int) ((jj % 60000000000L) / 1000000000L)) +\n+                    \".\" + nsFormatter.format((int) (jj % 1000000000L));\n             }\n         }\n \n@@ -1187,7 +1224,7 @@ static String i2(int i) {\n         return i2Formatter.format(i);\n     }\n \n-    public static abstract class KBaseVector extends KBase {\n+    public abstract static  class KBaseVector extends KBase {\n         protected Object array;\n         private int length;\n \n@@ -1222,7 +1259,8 @@ protected int calcCapacity(int length) {\n         public void append(KBaseVector x) {\n             if ((x.getLength() + getLength()) > Array.getLength(getArray())) {\n                 int newLength = Array.getLength(getArray()) + x.getLength();\n-                Object tmp = Array.newInstance(getArray().getClass().getComponentType(), 2 * calcCapacity(newLength));\n+                Object tmp = Array.newInstance(getArray().getClass().getComponentType(),\n+                    2 * calcCapacity(newLength));\n                 System.arraycopy(getArray(), 0, tmp, 0, getLength());\n                 array = tmp;\n             }\n@@ -1265,27 +1303,30 @@ public KBase at(int i) {\n         }\n \n         void toStringVector(LimitedWriter w, boolean showType) throws IOException {\n-            if (getLength() == 0)\n+            if (getLength() == 0) {\n                 w.write(\"`short$()\");\n-            else {\n-                if (getLength() == 1)\n+            } else {\n+                if (getLength() == 1) {\n                     w.write(enlist);\n+                }\n                 for (int i = 0; i < getLength(); i++) {\n-                    if (i > 0)\n+                    if (i > 0) {\n                         w.write(\" \");\n+                    }\n                     short v = Array.getShort(array, i);\n-                    if (v == Short.MIN_VALUE)\n+                    if (v == Short.MIN_VALUE) {\n                         w.write(\"0N\");\n-                    else if (v == Short.MAX_VALUE)\n+                    } else if (v == Short.MAX_VALUE) {\n                         w.write(\"0W\");\n-                    else if (v == -Short.MAX_VALUE)\n+                    } else if (v == -Short.MAX_VALUE) {\n                         w.write(\"-0W\");\n-                    else {\n+                    } else {\n                         w.write(\"\" + v);\n                     }\n                 }\n-                if (showType)\n+                if (showType) {\n                     w.write(\"h\");\n+                }\n             }\n         }\n     }\n@@ -1305,26 +1346,30 @@ public KBase at(int i) {\n         }\n \n         void toStringVector(LimitedWriter w, boolean showType) throws IOException {\n-            if (getLength() == 0)\n+            if (getLength() == 0) {\n                 w.write(\"`int$()\");\n-            else {\n-                if (getLength() == 1)\n+            } else {\n+                if (getLength() == 1) {\n                     w.write(enlist);\n+                }\n                 for (int i = 0; i < getLength(); i++) {\n-                    if (i > 0)\n+                    if (i > 0) {\n                         w.write(\" \");\n+                    }\n                     int v = Array.getInt(array, i);\n-                    if (v == Integer.MIN_VALUE)\n+                    if (v == Integer.MIN_VALUE) {\n                         w.write(\"0N\");\n-                    else if (v == Integer.MAX_VALUE)\n+                    } else if (v == Integer.MAX_VALUE) {\n                         w.write(\"0W\");\n-                    else if (v == -Integer.MAX_VALUE)\n+                    } else if (v == -Integer.MAX_VALUE) {\n                         w.write(\"-0W\");\n-                    else\n+                    } else {\n                         w.write(\"\" + v);\n+                    }\n                 }\n-                if (showType)\n+                if (showType) {\n                     w.write(\"i\");\n+                }\n             }\n         }\n     }\n@@ -1344,17 +1389,20 @@ public KBase at(int i) {\n         }\n \n         void toStringVector(LimitedWriter w, boolean showType) throws IOException {\n-            if (getLength() == 1)\n+            if (getLength() == 1) {\n                 w.write(enlist);\n-            else\n+            } else {\n                 w.write(\"(\");\n+            }\n             for (int i = 0; i < getLength(); i++) {\n-                if (i > 0)\n+                if (i > 0) {\n                     w.write(\";\");\n+                }\n                 at(i).toString(w, showType);\n             }\n-            if (getLength() != 1)\n+            if (getLength() != 1) {\n                 w.write(\")\");\n+            }\n         }\n     }\n \n@@ -1376,15 +1424,17 @@ void toStringVector(LimitedWriter w, boolean showType) throws IOException {\n             if (getLength() == 0) {\n                 w.write(\"`float$()\");\n             } else {\n-                if (getLength() == 1)\n+                if (getLength() == 1) {\n                     w.write(enlist);\n+                }\n \n                 boolean printedP = false;\n                 NumberFormat nf = Config.getInstance().getNumberFormat();\n                 for (int i = 0; i < getLength(); i++) {\n                     double d = Array.getDouble(array, i);\n-                    if (i > 0)\n+                    if (i > 0) {\n                         w.write(\" \");\n+                    }\n                     if (Double.isNaN(d)) {\n                         w.write(\"0n\");\n                         printedP = true;\n@@ -1399,8 +1449,9 @@ void toStringVector(LimitedWriter w, boolean showType) throws IOException {\n                         w.write(nf.format(d));\n                     }\n                 }\n-                if (showType && printedP)\n+                if (showType && printedP) {\n                     w.write(\"f\");\n+                }\n             }\n         }\n     }\n@@ -1423,15 +1474,17 @@ void toStringVector(LimitedWriter w, boolean showType) throws IOException {\n             if (getLength() == 0) {\n                 w.write(\"`real$()\");\n             } else {\n-                if (getLength() == 1)\n+                if (getLength() == 1) {\n                     w.write(enlist);\n+                }\n \n                 boolean printedP = false;\n                 NumberFormat nf = Config.getInstance().getNumberFormat();\n                 for (int i = 0; i < getLength(); i++) {\n                     float d = Array.getFloat(array, i);\n-                    if (i > 0)\n+                    if (i > 0) {\n                         w.write(\" \");\n+                    }\n                     if (Float.isNaN(d)) {\n                         w.write(\"0N\");\n                         printedP = true;\n@@ -1446,8 +1499,9 @@ void toStringVector(LimitedWriter w, boolean showType) throws IOException {\n                         w.write(nf.format(d));\n                     }\n                 }\n-                if (showType && printedP)\n+                if (showType && printedP) {\n                     w.write(\"e\");\n+                }\n             }\n         }\n     }\n@@ -1467,27 +1521,30 @@ public KBase at(int i) {\n         }\n \n         void toStringVector(LimitedWriter w, boolean showType) throws IOException {\n-            if (getLength() == 0)\n+            if (getLength() == 0) {\n                 w.write(\"`long$()\");\n-            else {\n-                if (getLength() == 1)\n+            } else {\n+                if (getLength() == 1) {\n                     w.write(enlist);\n+                }\n                 for (int i = 0; i < getLength(); i++) {\n-                    if (i > 0)\n+                    if (i > 0) {\n                         w.write(\" \");\n+                    }\n                     long v = Array.getLong(array, i);\n-                    if (v == Long.MIN_VALUE)\n+                    if (v == Long.MIN_VALUE) {\n                         w.write(\"0N\");\n-                    else if (v == Long.MAX_VALUE)\n+                    } else if (v == Long.MAX_VALUE) {\n                         w.write(\"0W\");\n-                    else if (v == -Long.MAX_VALUE)\n+                    } else if (v == -Long.MAX_VALUE) {\n                         w.write(\"-0W\");\n-                    else {\n+                    } else {\n                         w.write(\"\" + v);\n                     }\n                 }\n-                if (showType)\n+                if (showType) {\n                     w.write(\"j\");\n+                }\n             }\n         }\n     }\n@@ -1507,29 +1564,32 @@ public KBase at(int i) {\n         }\n \n         void toStringVector(LimitedWriter w, boolean showType) throws IOException {\n-            if (getLength() == 0)\n+            if (getLength() == 0) {\n                 w.write(\"`month$()\");\n-            else {\n-                if (getLength() == 1)\n+            } else {\n+                if (getLength() == 1) {\n                     w.write(enlist);\n+                }\n                 for (int i = 0; i < getLength(); i++) {\n-                    if (i > 0)\n+                    if (i > 0) {\n                         w.write(\" \");\n+                    }\n                     int v = Array.getInt(array, i);\n-                    if (v == Integer.MIN_VALUE)\n+                    if (v == Integer.MIN_VALUE) {\n                         w.write(\"0N\");\n-                    else if (v == Integer.MAX_VALUE)\n+                    } else if (v == Integer.MAX_VALUE) {\n                         w.write(\"0W\");\n-                    else if (v == -Integer.MAX_VALUE)\n+                    } else if (v == -Integer.MAX_VALUE) {\n                         w.write(\"-0W\");\n-                    else {\n+                    } else {\n                         int m = v + 24000, y = m / 12;\n                         String s = i2(y / 100) + i2(y % 100) + \".\" + i2(1 + m % 12);\n                         w.write(s);\n                     }\n                 }\n-                if (showType)\n+                if (showType) {\n                     w.write(\"m\");\n+                }\n             }\n         }\n     }\n@@ -1549,29 +1609,32 @@ public KBase at(int i) {\n         }\n \n         void toStringVector(LimitedWriter w, boolean showType) throws IOException {\n-            if (getLength() == 0)\n+            if (getLength() == 0) {\n                 w.write(\"`date$()\");\n-            else {\n+            } else {\n                 boolean printD = true;\n-                if (getLength() == 1)\n+                if (getLength() == 1) {\n                     w.write(enlist);\n+                }\n                 for (int i = 0; i < getLength(); i++) {\n-                    if (i > 0)\n+                    if (i > 0) {\n                         w.write(\" \");\n+                    }\n                     int v = Array.getInt(array, i);\n-                    if (v == Integer.MIN_VALUE)\n+                    if (v == Integer.MIN_VALUE) {\n                         w.write(\"0N\");\n-                    else if (v == Integer.MAX_VALUE)\n+                    } else if (v == Integer.MAX_VALUE) {\n                         w.write(\"0W\");\n-                    else if (v == -Integer.MAX_VALUE)\n+                    } else if (v == -Integer.MAX_VALUE) {\n                         w.write(\"-0W\");\n-                    else {\n+                    } else {\n                         printD = false;\n                         w.write(sd(\"yyyy.MM.dd\", new Date(86400000L * (v + 10957))));\n                     }\n                 }\n-                if (showType && printD)\n+                if (showType && printD) {\n                     w.write(\"d\");\n+                }\n             }\n         }\n     }\n@@ -1591,14 +1654,16 @@ public KBase at(int i) {\n         }\n \n         void toStringVector(LimitedWriter w, boolean showType) throws IOException {\n-            if (getLength() == 0)\n+            if (getLength() == 0) {\n                 w.write(\"`guid$()\");\n-            else {\n-                if (getLength() == 1)\n+            } else {\n+                if (getLength() == 1) {\n                     w.write(enlist);\n+                }\n                 for (int i = 0; i < getLength(); i++) {\n-                    if (i > 0)\n+                    if (i > 0) {\n                         w.write(\" \");\n+                    }\n                     w.write(((UUID) Array.get(array, i)).toString());\n                 }\n             }\n@@ -1620,23 +1685,26 @@ public KBase at(int i) {\n         }\n \n         void toStringVector(LimitedWriter w, boolean showType) throws IOException {\n-            if (getLength() == 0)\n+            if (getLength() == 0) {\n                 w.write(\"`minute$()\");\n-            else {\n-                if (getLength() == 1)\n+            } else {\n+                if (getLength() == 1) {\n                     w.write(enlist);\n+                }\n                 for (int i = 0; i < getLength(); i++) {\n-                    if (i > 0)\n+                    if (i > 0) {\n                         w.write(\" \");\n+                    }\n                     int v = Array.getInt(array, i);\n-                    if (v == Integer.MIN_VALUE)\n+                    if (v == Integer.MIN_VALUE) {\n                         w.write(\"0Nu\");\n-                    else if (v == Integer.MAX_VALUE)\n+                    } else if (v == Integer.MAX_VALUE) {\n                         w.write(\"0Wu\");\n-                    else if (v == -Integer.MAX_VALUE)\n+                    } else if (v == -Integer.MAX_VALUE) {\n                         w.write(\"-0Wu\");\n-                    else\n+                    } else {\n                         w.write(i2(v / 60) + \":\" + i2(v % 60));\n+                    }\n                 }\n             }\n         }\n@@ -1657,27 +1725,31 @@ public KBase at(int i) {\n         }\n \n         void toStringVector(LimitedWriter w, boolean showType) throws IOException {\n-            if (getLength() == 0)\n+            if (getLength() == 0) {\n                 w.write(\"`datetime$()\");\n-            else {\n-                if (getLength() == 1)\n+            } else {\n+                if (getLength() == 1) {\n                     w.write(enlist);\n+                }\n                 for (int i = 0; i < getLength(); i++) {\n                     double d = Array.getDouble(array, i);\n-                    if (i > 0)\n+                    if (i > 0) {\n                         w.write(\" \");\n-                    if (Double.isNaN(d))\n+                    }\n+                    if (Double.isNaN(d)) {\n                         w.write(\"0N\");\n-                    else if (d == Double.POSITIVE_INFINITY)\n+                    } else if (d == Double.POSITIVE_INFINITY) {\n                         w.write(\"0W\");\n-                    else if (d == Double.NEGATIVE_INFINITY)\n+                    } else if (d == Double.NEGATIVE_INFINITY) {\n                         w.write(\"-0W\");\n-                    else {\n-                        w.write(sd(\"yyyy.MM.dd HH:mm:ss.SSS\", new Timestamp(((long) (.5 + 8.64e7 * (d + 10957))))));\n+                    } else {\n+                        w.write(sd(\"yyyy.MM.dd HH:mm:ss.SSS\",\n+                            new Timestamp(((long) (.5 + 8.64e7 * (d + 10957))))));\n                     }\n                 }\n-                if (showType)\n+                if (showType) {\n                     w.write(\"z\");\n+                }\n             }\n         }\n     }\n@@ -1697,14 +1769,16 @@ public KBase at(int i) {\n         }\n \n         void toStringVector(LimitedWriter w, boolean showType) throws IOException {\n-            if (getLength() == 0)\n+            if (getLength() == 0) {\n                 w.write(\"`timestamp$()\");\n-            else {\n-                if (getLength() == 1)\n+            } else {\n+                if (getLength() == 1) {\n                     w.write(enlist);\n+                }\n                 for (int i = 0; i < getLength(); i++) {\n-                    if (i > 0)\n+                    if (i > 0) {\n                         w.write(\" \");\n+                    }\n                     w.write(at(i).toString(false));\n                 }\n             }\n@@ -1726,14 +1800,16 @@ public KBase at(int i) {\n         }\n \n         void toStringVector(LimitedWriter w, boolean showType) throws IOException {\n-            if (getLength() == 0)\n+            if (getLength() == 0) {\n                 w.write(\"`timespan$()\");\n-            else {\n-                if (getLength() == 1)\n+            } else {\n+                if (getLength() == 1) {\n                     w.write(enlist);\n+                }\n                 for (int i = 0; i < getLength(); i++) {\n-                    if (i > 0)\n+                    if (i > 0) {\n                         w.write(\" \");\n+                    }\n                     w.write(at(i).toString(false));\n                 }\n             }\n@@ -1758,28 +1834,32 @@ public void serialise(OutputStream o) throws IOException {\n             super.serialise(o);\n             write(o, (byte) 0);\n             write(o, getLength());\n-            for (int i = 0; i < getLength(); i++)\n+            for (int i = 0; i < getLength(); i++) {\n                 write(o, Array.getInt(array, i));\n+            }\n         }\n \n         void toStringVector(LimitedWriter w, boolean showType) throws IOException {\n-            if (getLength() == 0)\n+            if (getLength() == 0) {\n                 w.write(\"`second$()\");\n-            else {\n-                if (getLength() == 1)\n+            } else {\n+                if (getLength() == 1) {\n                     w.write(enlist);\n+                }\n                 for (int i = 0; i < getLength(); i++) {\n-                    if (i > 0)\n+                    if (i > 0) {\n                         w.write(\" \");\n+                    }\n                     int v = Array.getInt(array, i);\n-                    if (v == Integer.MIN_VALUE)\n+                    if (v == Integer.MIN_VALUE) {\n                         w.write(\"0Nv\");\n-                    else if (v == Integer.MAX_VALUE)\n+                    } else if (v == Integer.MAX_VALUE) {\n                         w.write(\"0Wv\");\n-                    else if (v == -Integer.MAX_VALUE)\n+                    } else if (v == -Integer.MAX_VALUE) {\n                         w.write(\"-0Wv\");\n-                    else\n+                    } else {\n                         w.write(new Minute(v / 60).toString() + ':' + i2(v % 60));\n+                    }\n                 }\n             }\n         }\n@@ -1803,28 +1883,32 @@ public void serialise(OutputStream o) throws IOException {\n             super.serialise(o);\n             write(o, (byte) 0);\n             write(o, getLength());\n-            for (int i = 0; i < getLength(); i++)\n+            for (int i = 0; i < getLength(); i++) {\n                 write(o, Array.getInt(array, i));\n+            }\n         }\n \n         void toStringVector(LimitedWriter w, boolean showType) throws IOException {\n-            if (getLength() == 0)\n+            if (getLength() == 0) {\n                 w.write(\"`time$()\");\n-            else {\n-                if (getLength() == 1)\n+            } else {\n+                if (getLength() == 1) {\n                     w.write(enlist);\n+                }\n                 for (int i = 0; i < getLength(); i++) {\n-                    if (i > 0)\n+                    if (i > 0) {\n                         w.write(\" \");\n+                    }\n                     int v = Array.getInt(array, i);\n-                    if (v == Integer.MIN_VALUE)\n+                    if (v == Integer.MIN_VALUE) {\n                         w.write(\"0Nt\");\n-                    else if (v == Integer.MAX_VALUE)\n+                    } else if (v == Integer.MAX_VALUE) {\n                         w.write(\"0Wt\");\n-                    else if (v == -Integer.MAX_VALUE)\n+                    } else if (v == -Integer.MAX_VALUE) {\n                         w.write(\"-0Wt\");\n-                    else\n+                    } else {\n                         w.write(sd(\"HH:mm:ss.SSS\", new Time(v)));\n+                    }\n                 }\n             }\n         }\n@@ -1848,18 +1932,21 @@ public void serialise(OutputStream o) throws IOException {\n             super.serialise(o);\n             write(o, (byte) 0);\n             write(o, getLength());\n-            for (int i = 0; i < getLength(); i++)\n+            for (int i = 0; i < getLength(); i++) {\n                 write(o, (byte) (Array.getBoolean(array, i) ? 1 : 0));\n+            }\n         }\n \n         void toStringVector(LimitedWriter w, boolean showType) throws IOException {\n-            if (getLength() == 0)\n+            if (getLength() == 0) {\n                 w.write(\"`boolean$()\");\n-            else {\n-                if (getLength() == 1)\n+            } else {\n+                if (getLength() == 1) {\n                     w.write(enlist);\n-                for (int i = 0; i < getLength(); i++)\n+                }\n+                for (int i = 0; i < getLength(); i++) {\n                     w.write((Array.getBoolean(array, i) ? \"1\" : \"0\"));\n+                }\n                 w.write(\"b\");\n             }\n         }\n@@ -1883,16 +1970,18 @@ public void serialise(OutputStream o) throws IOException {\n             super.serialise(o);\n             write(o, (byte) 0);\n             write(o, getLength());\n-            for (int i = 0; i < getLength(); i++)\n+            for (int i = 0; i < getLength(); i++) {\n                 write(o, Array.getByte(array, i));\n+            }\n         }\n \n         void toStringVector(LimitedWriter w, boolean showType) throws IOException {\n-            if (getLength() == 0)\n+            if (getLength() == 0) {\n                 w.write(\"`byte$()\");\n-            else {\n-                if (getLength() == 1)\n+            } else {\n+                if (getLength() == 1) {\n                     w.write(enlist);\n+                }\n \n                 w.write(\"0x\");\n                 for (int i = 0; i < getLength(); i++) {\n@@ -1918,13 +2007,15 @@ public KBase at(int i) {\n         }\n \n         void toStringVector(LimitedWriter w, boolean showType) throws IOException {\n-            if (getLength() == 0)\n+            if (getLength() == 0) {\n                 w.write(\"0#`\");\n-            else if (getLength() == 1)\n+            } else if (getLength() == 1) {\n                 w.write(enlist);\n+            }\n \n-            for (int i = 0; i < getLength(); i++)\n+            for (int i = 0; i < getLength(); i++) {\n                 w.write(\"`\" + Array.get(array, i));\n+            }\n         }\n     }\n \n@@ -1964,15 +2055,19 @@ public void serialise(OutputStream o) throws IOException {\n         }\n \n         void toStringVector(LimitedWriter w, boolean showType) throws IOException {\n-            if (getLength() == 1)\n+            if (getLength() == 1) {\n                 w.write(enlist);\n+            }\n \n-            if (showType)\n+            if (showType) {\n                 w.write(\"\\\"\");\n-            for (int i = 0; i < getLength(); i++)\n+            }\n+            for (int i = 0; i < getLength(); i++) {\n                 w.write(Array.getChar(array, i));\n-            if (showType)\n+            }\n+            if (showType) {\n                 w.write(\"\\\"\");\n+            }\n         }\n     }\n "
  },
  {
    "sha": "da50684885294b33cc3369b506e179d4e8fa3f2a",
    "filename": "src/main/studio/kdb/KTableModel.java",
    "status": "modified",
    "additions": 5,
    "deletions": 3,
    "changes": 8,
    "blob_url": "https://github.com/finos/kdb-studio/blob/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/studio/kdb/KTableModel.java",
    "raw_url": "https://github.com/finos/kdb-studio/raw/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/studio/kdb/KTableModel.java",
    "contents_url": "https://api.github.com/repos/finos/kdb-studio/contents/src/main/studio/kdb/KTableModel.java?ref=c47d03bbf301958bd9dccb66aac21a9b002bfb7c",
    "patch": "@@ -5,8 +5,10 @@\n public abstract class KTableModel extends AbstractTableModel {\n \n     public abstract boolean isKey(int column);\n+\n     public abstract K.KBaseVector getColumn(int col);\n-    public abstract String getColumnName(int col) ;\n+\n+    public abstract String getColumnName(int col);\n \n     public static KTableModel getModel(K.KBase obj) {\n         if (obj instanceof K.Flip) {\n@@ -26,7 +28,7 @@ public static KTableModel getModel(K.KBase obj) {\n         }\n \n         if ((obj instanceof K.KBaseVector) && obj.type != 10) {\n-            return new ListModel((K.KBaseVector)obj);\n+            return new ListModel((K.KBaseVector) obj);\n         }\n         return null;\n     }\n@@ -73,7 +75,7 @@ public Class getColumnClass(int col) {\n         return getColumn(col).getClass();\n     }\n \n-    public Object getValueAt(int row,int col) {\n+    public Object getValueAt(int row, int col) {\n         row = (sortIndex == null) ? row : sortIndex[row];\n         K.KBaseVector v = getColumn(col);\n         return v.at(row);"
  },
  {
    "sha": "b899d578ca2e0fb094af3897fb105d1140c0d3e3",
    "filename": "src/main/studio/kdb/LimitedWriter.java",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/finos/kdb-studio/blob/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/studio/kdb/LimitedWriter.java",
    "raw_url": "https://github.com/finos/kdb-studio/raw/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/studio/kdb/LimitedWriter.java",
    "contents_url": "https://api.github.com/repos/finos/kdb-studio/contents/src/main/studio/kdb/LimitedWriter.java?ref=c47d03bbf301958bd9dccb66aac21a9b002bfb7c",
    "patch": "@@ -23,7 +23,7 @@ public void write(char c) throws IOException {\n \n     public void write(String s) throws IOException {\n         if ((size() + s.length()) > limit) {\n-            super.write(s.substring(0,limit - size()));\n+            super.write(s.substring(0, limit - size()));\n             super.write(\" ... \");\n             throw new LimitException();\n         }"
  },
  {
    "sha": "6fb407b050604417f67e6070566f3524dff1828a",
    "filename": "src/main/studio/kdb/ListModel.java",
    "status": "modified",
    "additions": 1,
    "deletions": 0,
    "changes": 1,
    "blob_url": "https://github.com/finos/kdb-studio/blob/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/studio/kdb/ListModel.java",
    "raw_url": "https://github.com/finos/kdb-studio/raw/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/studio/kdb/ListModel.java",
    "contents_url": "https://api.github.com/repos/finos/kdb-studio/contents/src/main/studio/kdb/ListModel.java?ref=c47d03bbf301958bd9dccb66aac21a9b002bfb7c",
    "patch": "@@ -6,6 +6,7 @@\n     public ListModel(K.KBaseVector list) {\n         this.list = list;\n     }\n+\n     @Override\n     public boolean isKey(int column) {\n         return false;"
  },
  {
    "sha": "b9768fc7e4af4348753f79ef77f215ec7d509bf1",
    "filename": "src/main/studio/kdb/Lm.java",
    "status": "modified",
    "additions": 3,
    "deletions": 4,
    "changes": 7,
    "blob_url": "https://github.com/finos/kdb-studio/blob/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/studio/kdb/Lm.java",
    "raw_url": "https://github.com/finos/kdb-studio/raw/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/studio/kdb/Lm.java",
    "contents_url": "https://api.github.com/repos/finos/kdb-studio/contents/src/main/studio/kdb/Lm.java?ref=c47d03bbf301958bd9dccb66aac21a9b002bfb7c",
    "patch": "@@ -1,9 +1,9 @@\n package studio.kdb;\n \n+import java.text.DecimalFormat;\n+import java.text.NumberFormat;\n import java.text.ParseException;\n import java.text.SimpleDateFormat;\n-import java.text.NumberFormat;\n-import java.text.DecimalFormat;\n import java.util.Date;\n import java.util.TimeZone;\n \n@@ -17,8 +17,7 @@\n             SimpleDateFormat f = new SimpleDateFormat(\"yyyyMMdd\");\n             f.setTimeZone(TimeZone.getTimeZone(\"GMT\"));\n             buildDate = f.parse(\"20190409\");\n-        }\n-        catch (ParseException e) {\n+        } catch (ParseException e) {\n         }\n     }\n "
  },
  {
    "sha": "d3b04f5c559375122255bf99b3d655335f9eb0ee",
    "filename": "src/main/studio/kdb/QErrors.java",
    "status": "modified",
    "additions": 37,
    "deletions": 34,
    "changes": 71,
    "blob_url": "https://github.com/finos/kdb-studio/blob/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/studio/kdb/QErrors.java",
    "raw_url": "https://github.com/finos/kdb-studio/raw/c47d03bbf301958bd9dccb66aac21a9b002bfb7c/src/main/studio/kdb/QErrors.java",
    "contents_url": "https://api.github.com/repos/finos/kdb-studio/contents/src/main/studio/kdb/QErrors.java?ref=c47d03bbf301958bd9dccb66aac21a9b002bfb7c",
    "patch": "@@ -9,41 +9,44 @@\n     public static String lookup(String s) {\n         return (String) map.get(s);\n     }\n-    \n+\n \n     static {\n-        map.put(\"access\",\"attempt to read files above directory, run system commands or failed usr/pwd\");\n-        map.put(\"assign\",\"attempt to assign a value to a reserved word\");\n-        map.put(\"conn\",\"too many incoming connections (1022 max)\");\n-        map.put(\"domain\",\"out of domain\");\n-        map.put(\"glim\",\"`g# limit, kdb+ currently limited to 99 concurrent `g#'s \");\n-        map.put(\"length\",\"incompatible lengths, e.g. 1 2 3 4 + 1 2 3\");\n-        map.put(\"limit\",\"tried to generate a list longer than 2,000,000,000\");\n-        map.put(\"loop\",\"dependency loop\");\n-        map.put(\"mismatch\",\"columns that can't be aligned for R,R or K,K \");\n-        map.put(\"Mlim\",\"more than 999 nested columns in splayed tables\");\n-        map.put(\"nyi\",\"not yet implemented - suggests the\\noperation you are tying to do makes sense\\nbut it has not yet been implemented\");\n-        map.put(\"os\",\"operating system error\");\n-        map.put(\"pl\",\"peach can't handle parallel lambda's (2.3 only)\");\n-        map.put(\"Q7\",\"nyi op on file nested array\");\n-        map.put(\"rank\",\"invalid rank or valence\");\n-        map.put(\"splay\",\"nyi op on splayed table\");\n-        map.put(\"stack\",\"ran out of stack space\");\n-        map.put(\"stop\",\"user interrupt(ctrl-c) or time limit (-T)\");\n-        map.put(\"stype\",\"invalid type used to signal\");\n-        map.put(\"type\",\"wrong type, e.g `a+1\");\n-        map.put(\"value\",\"no value\");\n-        map.put(\"vd1\",\"attempted multithread update\");\n-        map.put(\"wsfull\",\"malloc failed. ran out of swap (or addressability on 32bit). or hit -w limit.\");\n-        map.put(\"branch\",\"a branch(if;do;while;$[.;.;.]) more than 255 byte codes away\");\n-        map.put(\"char\",\"invalid character\");\n-        map.put(\"constants\",\"too many constants (max 96)\");\n-        map.put(\"globals\",\"too many global variables (32 max)\");\n-        map.put(\"locals\",\"too many local variables (24 max)\");\n-        map.put(\"params\",\"too many parameters (8 max)\");\n-        map.put(\"u-fail\",\"cannot apply `u# to data (not unique values), e.g `u#1 1\");\n-        map.put(\"s-fail\",\"cannot apply `s# to data (not ascending values) , e.g `s#2 1\");\n-        map.put(\"noamend\",\"can't change global state inside an amend\");\n-        map.put(\"elim\",\"more than 57 distinct enumerations\");\n+        map.put(\"access\",\n+            \"attempt to read files above directory, run system commands or failed usr/pwd\");\n+        map.put(\"assign\", \"attempt to assign a value to a reserved word\");\n+        map.put(\"conn\", \"too many incoming connections (1022 max)\");\n+        map.put(\"domain\", \"out of domain\");\n+        map.put(\"glim\", \"`g# limit, kdb+ currently limited to 99 concurrent `g#'s \");\n+        map.put(\"length\", \"incompatible lengths, e.g. 1 2 3 4 + 1 2 3\");\n+        map.put(\"limit\", \"tried to generate a list longer than 2,000,000,000\");\n+        map.put(\"loop\", \"dependency loop\");\n+        map.put(\"mismatch\", \"columns that can't be aligned for R,R or K,K \");\n+        map.put(\"Mlim\", \"more than 999 nested columns in splayed tables\");\n+        map.put(\"nyi\",\n+            \"not yet implemented - suggests the\\noperation you are tying to do makes sense\\nbut it has not yet been implemented\");\n+        map.put(\"os\", \"operating system error\");\n+        map.put(\"pl\", \"peach can't handle parallel lambda's (2.3 only)\");\n+        map.put(\"Q7\", \"nyi op on file nested array\");\n+        map.put(\"rank\", \"invalid rank or valence\");\n+        map.put(\"splay\", \"nyi op on splayed table\");\n+        map.put(\"stack\", \"ran out of stack space\");\n+        map.put(\"stop\", \"user interrupt(ctrl-c) or time limit (-T)\");\n+        map.put(\"stype\", \"invalid type used to signal\");\n+        map.put(\"type\", \"wrong type, e.g `a+1\");\n+        map.put(\"value\", \"no value\");\n+        map.put(\"vd1\", \"attempted multithread update\");\n+        map.put(\"wsfull\",\n+            \"malloc failed. ran out of swap (or addressability on 32bit). or hit -w limit.\");\n+        map.put(\"branch\", \"a branch(if;do;while;$[.;.;.]) more than 255 byte codes away\");\n+        map.put(\"char\", \"invalid character\");\n+        map.put(\"constants\", \"too many constants (max 96)\");\n+        map.put(\"globals\", \"too many global variables (32 max)\");\n+        map.put(\"locals\", \"too many local variables (24 max)\");\n+        map.put(\"params\", \"too many parameters (8 max)\");\n+        map.put(\"u-fail\", \"cannot apply `u# to data (not unique values), e.g `u#1 1\");\n+        map.put(\"s-fail\", \"cannot apply `s# to data (not ascending values) , e.g `s#2 1\");\n+        map.put(\"noamend\", \"can't change global state inside an amend\");\n+        map.put(\"elim\", \"more than 57 distinct enumerations\");\n     }\n }"
  }
]
