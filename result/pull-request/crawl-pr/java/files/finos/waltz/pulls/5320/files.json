[
  {
    "sha": "0c1cd49501e9f56d6df7efeab927b1756110bb42",
    "filename": "waltz-ng/.babelrc.hide",
    "status": "added",
    "additions": 13,
    "deletions": 0,
    "changes": 13,
    "blob_url": "https://github.com/finos/waltz/blob/3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df/waltz-ng/.babelrc.hide",
    "raw_url": "https://github.com/finos/waltz/raw/3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df/waltz-ng/.babelrc.hide",
    "contents_url": "https://api.github.com/repos/finos/waltz/contents/waltz-ng/.babelrc.hide?ref=3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df",
    "patch": "@@ -0,0 +1,13 @@\n+{\n+    \"presets\": [\n+        [\n+            \"@babel/env\",\n+            {\n+                \"targets\": {\n+                    \"ie\": \"11\",\n+                    \"chrome\": \"58\"\n+                }\n+            }\n+        ]\n+    ]\n+}"
  },
  {
    "sha": "8a261a3f4a77bcf5b18f06c9a1cc4e94996bfce5",
    "filename": "waltz-ng/babel.config.json",
    "status": "added",
    "additions": 16,
    "deletions": 0,
    "changes": 16,
    "blob_url": "https://github.com/finos/waltz/blob/3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df/waltz-ng/babel.config.json",
    "raw_url": "https://github.com/finos/waltz/raw/3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df/waltz-ng/babel.config.json",
    "contents_url": "https://api.github.com/repos/finos/waltz/contents/waltz-ng/babel.config.json?ref=3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df",
    "patch": "@@ -0,0 +1,16 @@\n+{\n+    \"exclude\": [\n+        \"node_modules/@babel/**\",\n+        \"node_modules/core-js/**\",\n+        \"node_modules/core-js-pure/**\"\n+    ],\n+    \"presets\": [\n+        [\n+            \"@babel/preset-env\",\n+            {\n+                \"useBuiltIns\": \"entry\",\n+                \"corejs\": 3\n+            }\n+        ]\n+    ]\n+}\n\\ No newline at end of file"
  },
  {
    "sha": "b1f9e93ad65aaaa67d3111dcb0ad4eb3de081ed3",
    "filename": "waltz-ng/client/bookmarks/components/bookmark-kind-select/bookmark-kind-select.html",
    "status": "removed",
    "additions": 0,
    "deletions": 34,
    "changes": 34,
    "blob_url": "https://github.com/finos/waltz/blob/7d00bebc2c9a818e315c760a588766b1d381429c/waltz-ng/client/bookmarks/components/bookmark-kind-select/bookmark-kind-select.html",
    "raw_url": "https://github.com/finos/waltz/raw/7d00bebc2c9a818e315c760a588766b1d381429c/waltz-ng/client/bookmarks/components/bookmark-kind-select/bookmark-kind-select.html",
    "contents_url": "https://api.github.com/repos/finos/waltz/contents/waltz-ng/client/bookmarks/components/bookmark-kind-select/bookmark-kind-select.html?ref=7d00bebc2c9a818e315c760a588766b1d381429c",
    "patch": "@@ -1,34 +0,0 @@\n-<!--\n-  ~ Waltz - Enterprise Architecture\n-  ~ Copyright (C) 2016, 2017, 2018, 2019 Waltz open source project\n-  ~ See README.md for more information\n-  ~\n-  ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n-  ~ you may not use this file except in compliance with the License.\n-  ~ You may obtain a copy of the License at\n-  ~\n-  ~     http://www.apache.org/licenses/LICENSE-2.0\n-  ~\n-  ~ Unless required by applicable law or agreed to in writing, software\n-  ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n-  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n-  ~ See the License for the specific\n-  ~\n-  -->\n-\n-<div>\n-    <ui-select ng-model=\"$ctrl.selected\"\n-               on-select=\"$ctrl.onChange($item, $model)\"\n-               ng-disabled=\"$ctrl.disabledCondition\"\n-               theme=\"bootstrap\">\n-        <ui-select-match placeholder=\"Select a kind of bookmark...\">\n-            <span ng-bind=\"$ctrl.selected | toDisplayName:'BookmarkKind'\"></span>\n-        </ui-select-match>\n-        <ui-select-choices repeat=\"kind in $ctrl.kinds | filter:$select.search\">\n-            <waltz-icon name=\"{{kind.icon}}\"\n-                        style=\"display: inline\">\n-            </waltz-icon>\n-            <span ng-bind=\"kind.name\"></span>\n-        </ui-select-choices>\n-    </ui-select>\n-</div>"
  },
  {
    "sha": "55df13e6797f2d6f27a5eb348a5e43bf15fe34c3",
    "filename": "waltz-ng/client/bookmarks/components/bookmark-kind-select/bookmark-kind-select.js",
    "status": "removed",
    "additions": 0,
    "deletions": 81,
    "changes": 81,
    "blob_url": "https://github.com/finos/waltz/blob/7d00bebc2c9a818e315c760a588766b1d381429c/waltz-ng/client/bookmarks/components/bookmark-kind-select/bookmark-kind-select.js",
    "raw_url": "https://github.com/finos/waltz/raw/7d00bebc2c9a818e315c760a588766b1d381429c/waltz-ng/client/bookmarks/components/bookmark-kind-select/bookmark-kind-select.js",
    "contents_url": "https://api.github.com/repos/finos/waltz/contents/waltz-ng/client/bookmarks/components/bookmark-kind-select/bookmark-kind-select.js?ref=7d00bebc2c9a818e315c760a588766b1d381429c",
    "patch": "@@ -1,81 +0,0 @@\n-/*\n- * Waltz - Enterprise Architecture\n- * Copyright (C) 2016, 2017, 2018, 2019 Waltz open source project\n- * See README.md for more information\n- *\n- * Licensed under the Apache License, Version 2.0 (the \"License\");\n- * you may not use this file except in compliance with the License.\n- * You may obtain a copy of the License at\n- *\n- *     http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing, software\n- * distributed under the License is distributed on an \"AS IS\" BASIS,\n- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n- * See the License for the specific\n- *\n- */\n-\n-import _ from \"lodash\";\n-import template from './bookmark-kind-select.html'\n-import {CORE_API} from \"../../../common/services/core-api-utils\";\n-\n-\n-const bindings = {\n-    selected: '<',\n-    disabledCondition: '<',\n-    onSelect: '&'\n-};\n-\n-\n-function createKinds(serviceBroker) {\n-    return serviceBroker\n-        .loadAppData(CORE_API.EnumValueStore.findAll)\n-        .then(r => {\n-            return _\n-                .chain(r.data)\n-                .filter(d => d.type === 'BookmarkKind')\n-                .sortBy('name')\n-                .map(d => ({\n-                    code: d.key,\n-                    name: d.name,\n-                    icon: d.icon\n-                }))\n-                .value();\n-        });\n-}\n-\n-function controller(serviceBroker) {\n-\n-    const vm = this;\n-\n-    vm.$onInit = () => {\n-        createKinds(serviceBroker)\n-            .then(kinds => vm.kinds = kinds);\n-    };\n-\n-    vm.onChange = (kind) => {\n-        if (!vm.onSelect()) {\n-            console.warn('bookmark-kind-select: No handler for change notification is registered.  Please provide an on-select callback')\n-            return;\n-        }\n-        vm.onSelect()(kind.code, kind);\n-    };\n-}\n-\n-\n-controller.$inject = ['ServiceBroker'];\n-\n-\n-const component = {\n-    template,\n-    controller,\n-    bindings\n-};\n-\n-\n-export default {\n-    component,\n-    id: 'waltzBookmarkKindSelect'\n-};\n-"
  },
  {
    "sha": "d157c6a598a1fefeeeb12e1db436c6601790e524",
    "filename": "waltz-ng/client/bookmarks/components/bookmark-kinds/bookmark-kinds.html",
    "status": "removed",
    "additions": 0,
    "deletions": 55,
    "changes": 55,
    "blob_url": "https://github.com/finos/waltz/blob/7d00bebc2c9a818e315c760a588766b1d381429c/waltz-ng/client/bookmarks/components/bookmark-kinds/bookmark-kinds.html",
    "raw_url": "https://github.com/finos/waltz/raw/7d00bebc2c9a818e315c760a588766b1d381429c/waltz-ng/client/bookmarks/components/bookmark-kinds/bookmark-kinds.html",
    "contents_url": "https://api.github.com/repos/finos/waltz/contents/waltz-ng/client/bookmarks/components/bookmark-kinds/bookmark-kinds.html?ref=7d00bebc2c9a818e315c760a588766b1d381429c",
    "patch": "@@ -1,55 +0,0 @@\n-<!--\n-  ~ Waltz - Enterprise Architecture\n-  ~ Copyright (C) 2016, 2017, 2018, 2019 Waltz open source project\n-  ~ See README.md for more information\n-  ~\n-  ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n-  ~ you may not use this file except in compliance with the License.\n-  ~ You may obtain a copy of the License at\n-  ~\n-  ~     http://www.apache.org/licenses/LICENSE-2.0\n-  ~\n-  ~ Unless required by applicable law or agreed to in writing, software\n-  ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n-  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n-  ~ See the License for the specific\n-  ~\n-  -->\n-\n-<div class=\"waltz-bookmark-kinds\">\n-\n-    <div ng-repeat=\"kind in $ctrl.kinds\"\n-         ng-click=\"$ctrl.select(kind)\"\n-         ng-class=\"{\n-                'wbk-no-bookmarks': kind.count === 0,\n-                'wbk-selected': kind.selected,\n-                'clickable': kind.count > 0\n-             }\"\n-         uib-popover=\"{{kind.description}}\"\n-         popover-placement=\"right\"\n-         popover-trigger=\"mouseenter\"\n-         popover-popup-delay=\"300\"\n-         popover-append-to-body=\"true\">\n-\n-        <span>\n-\n-            <waltz-icon name=\"{{kind.icon}}\"\n-                        size=\"lg\"\n-                        ng-class=\"{\n-                            'wbk-has-bookmarks': kind.count > 0,\n-                        }\">\n-            </waltz-icon>\n-\n-            <span ng-bind=\"kind.name\"\n-                  class=\"small\">\n-            </span>\n-\n-        </span>\n-\n-        <waltz-icon name=\"times\"\n-                    ng-if=\"kind.selected\"\n-                    class=\"clickable pull-right\">\n-        </waltz-icon>\n-\n-    </div>\n-</div>\n\\ No newline at end of file"
  },
  {
    "sha": "79cf0d129d87b29bc16dce44832b703134d32dda",
    "filename": "waltz-ng/client/bookmarks/components/bookmark-kinds/bookmark-kinds.js",
    "status": "removed",
    "additions": 0,
    "deletions": 116,
    "changes": 116,
    "blob_url": "https://github.com/finos/waltz/blob/7d00bebc2c9a818e315c760a588766b1d381429c/waltz-ng/client/bookmarks/components/bookmark-kinds/bookmark-kinds.js",
    "raw_url": "https://github.com/finos/waltz/raw/7d00bebc2c9a818e315c760a588766b1d381429c/waltz-ng/client/bookmarks/components/bookmark-kinds/bookmark-kinds.js",
    "contents_url": "https://api.github.com/repos/finos/waltz/contents/waltz-ng/client/bookmarks/components/bookmark-kinds/bookmark-kinds.js?ref=7d00bebc2c9a818e315c760a588766b1d381429c",
    "patch": "@@ -1,116 +0,0 @@\n-/*\n- * Waltz - Enterprise Architecture\n- * Copyright (C) 2016, 2017, 2018, 2019 Waltz open source project\n- * See README.md for more information\n- *\n- * Licensed under the Apache License, Version 2.0 (the \"License\");\n- * you may not use this file except in compliance with the License.\n- * You may obtain a copy of the License at\n- *\n- *     http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing, software\n- * distributed under the License is distributed on an \"AS IS\" BASIS,\n- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n- * See the License for the specific\n- *\n- */\n-\n-import _ from \"lodash\";\n-import {initialiseData, invokeFunction} from \"../../../common\";\n-import {CORE_API} from \"../../../common/services/core-api-utils\";\n-\n-import template from './bookmark-kinds.html';\n-\n-\n-const bindings = {\n-    bookmarks: '<',\n-    onSelect: '<'\n-};\n-\n-\n-const initialState = {\n-    bookmarks: [],\n-    kinds: [],\n-    currentSelection: null,\n-    onSelect: (kind) => 'no onSelect handler defined for bookmark-kinds: ' + kind\n-};\n-\n-\n-function createKinds(serviceBroker, bookmarks = []) {\n-    const bookmarksByKind = _.groupBy(bookmarks, 'bookmarkKind');\n-\n-    return serviceBroker\n-        .loadAppData(CORE_API.EnumValueStore.findAll)\n-        .then(r => {\n-            const enumValues = r.data;\n-            return _\n-                .chain(enumValues)\n-                .filter({ type: 'BookmarkKind' })\n-                .sortBy('name')\n-                .map(k => ({\n-                    code: k.key,\n-                    name: k.name,\n-                    icon: k.icon,\n-                    description: k.description,\n-                    count: (bookmarksByKind[k.key] || []).length,\n-                    selected: false\n-                }))\n-                .value();\n-        });\n-}\n-\n-\n-\n-\n-function controller(serviceBroker) {\n-    const vm = initialiseData(this, initialState);\n-\n-    vm.$onInit = () => {\n-        createKinds(serviceBroker, vm.bookmarks)\n-            .then(kinds => vm.kinds = kinds);\n-    };\n-\n-    const resetCurrentSelection = () => {\n-        if(vm.currentSelection) {\n-            vm.currentSelection.selected = false;\n-        }\n-        vm.currentSelection = null;\n-    };\n-\n-    vm.select = (kind) => {\n-        if (!kind.count) {\n-            return;\n-        }\n-\n-        if (vm.currentSelection != kind) {\n-            resetCurrentSelection();\n-        }\n-\n-        kind.selected = !kind.selected;\n-        invokeFunction(vm.onSelect, kind.selected ? kind.code : null);\n-\n-        vm.currentSelection = kind;\n-    };\n-\n-    vm.clearSelection = () => {\n-        invokeFunction(vm.onSelect, null);\n-        resetCurrentSelection();\n-    };\n-}\n-\n-\n-controller.$inject = ['ServiceBroker'];\n-\n-\n-const component = {\n-    bindings,\n-    template,\n-    controller\n-};\n-\n-\n-export default {\n-    component,\n-    id: 'waltzBookmarkKinds'\n-};\n\\ No newline at end of file"
  },
  {
    "sha": "ca97708da72a04639088b5257910b51d28698353",
    "filename": "waltz-ng/client/bookmarks/components/bookmarks-edit-panel/bookmarks-edit-panel.html",
    "status": "removed",
    "additions": 0,
    "deletions": 123,
    "changes": 123,
    "blob_url": "https://github.com/finos/waltz/blob/7d00bebc2c9a818e315c760a588766b1d381429c/waltz-ng/client/bookmarks/components/bookmarks-edit-panel/bookmarks-edit-panel.html",
    "raw_url": "https://github.com/finos/waltz/raw/7d00bebc2c9a818e315c760a588766b1d381429c/waltz-ng/client/bookmarks/components/bookmarks-edit-panel/bookmarks-edit-panel.html",
    "contents_url": "https://api.github.com/repos/finos/waltz/contents/waltz-ng/client/bookmarks/components/bookmarks-edit-panel/bookmarks-edit-panel.html?ref=7d00bebc2c9a818e315c760a588766b1d381429c",
    "patch": "@@ -1,123 +0,0 @@\n-<!--\n-  ~ Waltz - Enterprise Architecture\n-  ~ Copyright (C) 2016, 2017, 2018, 2019 Waltz open source project\n-  ~ See README.md for more information\n-  ~\n-  ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n-  ~ you may not use this file except in compliance with the License.\n-  ~ You may obtain a copy of the License at\n-  ~\n-  ~     http://www.apache.org/licenses/LICENSE-2.0\n-  ~\n-  ~ Unless required by applicable law or agreed to in writing, software\n-  ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n-  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n-  ~ See the License for the specific\n-  ~\n-  -->\n-\n-<div>\n-    <div ng-if=\"$ctrl.bookmarks.length > 0\">\n-        <table class=\"table table-condensed\" >\n-            <colgroup>\n-                <col width=\"3%\">\n-                <col width=\"15%\">\n-                <col width=\"20%\">\n-                <col width=\"22%\">\n-                <col width=\"25%\">\n-                <col width=\"15%\">\n-            </colgroup>\n-            <thead>\n-            <tr>\n-                <th></th>\n-                <th>Kind</th>\n-                <th>Title</th>\n-                <th>URL</th>\n-                <th>Description</th>\n-                <th>Actions</th>\n-            </tr>\n-            </thead>\n-            <tbody>\n-            <tr ng-repeat=\"bookmark in $ctrl.bookmarks\" class=\"waltz-visibility-parent\">\n-                <td>\n-                    <span ng-if=\"bookmark.isPrimary\">\n-                        <waltz-icon name=\"star\"></waltz-icon>\n-                    </span>\n-                    <span ng-if=\"!bookmark.isPrimary\">\n-                        <waltz-icon name=\"star-o\"></waltz-icon>\n-                    </span>\n-                </td>\n-                <td>\n-                    <waltz-enum-value type=\"'BookmarkKind'\"\n-                                      key=\"bookmark.bookmarkKind\">\n-                    </waltz-enum-value>\n-                </td>\n-\n-                <td>\n-                    <span ng-bind=\"bookmark.title\"></span>\n-                </td>\n-                <td>\n-                    <span ng-bind=\"bookmark.url\"></span>\n-                    <span ng-if=\"bookmark.isRestricted\">\n-                        <waltz-icon name=\"lock\"></waltz-icon>\n-                    </span>\n-                </td>\n-                <td>\n-                    <span ng-bind=\"bookmark.description\"></span>\n-                </td>\n-                <td>\n-                    <span class=\"waltz-visibility-child-50\">\n-                        <a class=\"clickable wbep-action-remove\"\n-                           ng-if=\"! bookmark.isRequired\"\n-                           data-ux=\"bookmarks-remove\"\n-                           ng-click=\"$ctrl.remove(bookmark)\">\n-                            Remove\n-                        </a>\n-                        <span ng-if=\"! bookmark.isRequired\">\n-                            |\n-                        </span>\n-                        <a class=\"clickable wbep-action-edit\"\n-                           data-ux=\"bookmarks-edit\"\n-                           ng-click=\"$ctrl.edit(bookmark)\">\n-                            Edit\n-                        </a>\n-                    </span>\n-                </td>\n-            </tr>\n-            </tbody>\n-        </table>\n-    </div>\n-\n-    <waltz-no-data ng-if=\"$ctrl.bookmarks.length == 0\">\n-        <message>\n-            <strong>No bookmarks</strong> have been registered yet\n-        </message>\n-    </waltz-no-data>\n-\n-    <div>\n-        <div ng-if=\"!$ctrl.visibility.form\">\n-            <button ng-click=\"$ctrl.create()\"\n-                    data-ux=\"bookmarks-add-new\"\n-                    class=\"btn btn-sm btn-primary\">\n-                Add New\n-            </button>\n-            &nbsp;\n-            <a class=\"clickable\"\n-               data-ux=\"bookmarks-done\"\n-               ng-click=\"$ctrl.onDismiss()\">\n-                Done\n-            </a>\n-        </div>\n-    </div>\n-\n-    <div ng-if=\"$ctrl.visibility.form\">\n-        <hr>\n-        <waltz-bookmark-form bookmark=\"$ctrl.selectedBookmark\"\n-                             confirm-label=\"{{ $ctrl.selectedBoookmark.id ? 'Edit' : 'Save'}}\"\n-                             on-cancel=\"$ctrl.onCancel\"\n-                             on-submit=\"$ctrl.onSave\">\n-        </waltz-bookmark-form>\n-    </div>\n-\n-\n-</div>"
  },
  {
    "sha": "69166c4aad6c0202afbf7ed1a6d42d708e78df16",
    "filename": "waltz-ng/client/bookmarks/components/bookmarks-edit-panel/bookmarks-edit-panel.js",
    "status": "removed",
    "additions": 0,
    "deletions": 107,
    "changes": 107,
    "blob_url": "https://github.com/finos/waltz/blob/7d00bebc2c9a818e315c760a588766b1d381429c/waltz-ng/client/bookmarks/components/bookmarks-edit-panel/bookmarks-edit-panel.js",
    "raw_url": "https://github.com/finos/waltz/raw/7d00bebc2c9a818e315c760a588766b1d381429c/waltz-ng/client/bookmarks/components/bookmarks-edit-panel/bookmarks-edit-panel.js",
    "contents_url": "https://api.github.com/repos/finos/waltz/contents/waltz-ng/client/bookmarks/components/bookmarks-edit-panel/bookmarks-edit-panel.js?ref=7d00bebc2c9a818e315c760a588766b1d381429c",
    "patch": "@@ -1,107 +0,0 @@\n-/*\n- * Waltz - Enterprise Architecture\n- * Copyright (C) 2016, 2017, 2018, 2019 Waltz open source project\n- * See README.md for more information\n- *\n- * Licensed under the Apache License, Version 2.0 (the \"License\");\n- * you may not use this file except in compliance with the License.\n- * You may obtain a copy of the License at\n- *\n- *     http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing, software\n- * distributed under the License is distributed on an \"AS IS\" BASIS,\n- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n- * See the License for the specific\n- *\n- */\n-import template from \"./bookmarks-edit-panel.html\";\n-import {initialiseData} from \"../../../common/index\";\n-import {CORE_API} from \"../../../common/services/core-api-utils\";\n-\n-\n-const bindings = {\n-    bookmarks: \"<\",\n-    onDismiss: \"<\",\n-    onReload: \"<\",\n-    parentEntityRef: \"<\"\n-};\n-\n-\n-const initialState = {\n-    showFilter: false,\n-    visibility: {\n-        form: false\n-    },\n-    selectedBookmark: null\n-};\n-\n-\n-function controller(notification, serviceBroker) {\n-    const vm = initialiseData(this, initialState);\n-\n-    vm.edit = (b) => {\n-        vm.selectedBookmark = Object.assign({}, b);\n-        vm.visibility.form = true;\n-    };\n-\n-    vm.create = () => {\n-        vm.selectedBookmark = {\n-            bookmarkKind: \"DOCUMENTATION\",\n-            lastUpdatedBy: \"ignored, server will set\"\n-        };\n-        vm.visibility.form = true;\n-    };\n-\n-    vm.onSave = (b) => {\n-        b.parent = vm.parentEntityRef;\n-        serviceBroker\n-            .execute(CORE_API.BookmarkStore.save, [b])\n-            .then(() => {\n-                vm.onReload();\n-                vm.resetForm();\n-                notification.success(\"Updated bookmarks\")\n-            });\n-    };\n-\n-    vm.onCancel = () => {\n-        vm.visibility.form = false;\n-    };\n-\n-    vm.resetForm = () => {\n-        vm.visibility.form = false;\n-        vm.bookmark = {\n-            bookmarkKind: \"DOCUMENTATION\",\n-            parent: vm.parentEntityRef\n-        };\n-    };\n-\n-    vm.remove = (b) => {\n-        vm.visibility.form = false;\n-        if (confirm(\"Are you sure you want to remove this bookmark ?\")) {\n-            serviceBroker\n-                .execute(CORE_API.BookmarkStore.remove, [b.id])\n-                .then(() => {\n-                    vm.onReload();\n-                    notification.warning(\"Removed bookmark\");\n-                });\n-        }\n-    };\n-\n-}\n-\n-\n-controller.$inject = [\"Notification\", \"ServiceBroker\"];\n-\n-\n-const component = {\n-    controller,\n-    template,\n-    bindings\n-};\n-\n-\n-export default {\n-    id: \"waltzBookmarksEditPanel\",\n-    component\n-};\n\\ No newline at end of file"
  },
  {
    "sha": "25805fc18928ecfcd11311b9da56405b53522c75",
    "filename": "waltz-ng/client/bookmarks/components/bookmarks-section/bookmarks-section.html",
    "status": "removed",
    "additions": 0,
    "deletions": 59,
    "changes": 59,
    "blob_url": "https://github.com/finos/waltz/blob/7d00bebc2c9a818e315c760a588766b1d381429c/waltz-ng/client/bookmarks/components/bookmarks-section/bookmarks-section.html",
    "raw_url": "https://github.com/finos/waltz/raw/7d00bebc2c9a818e315c760a588766b1d381429c/waltz-ng/client/bookmarks/components/bookmarks-section/bookmarks-section.html",
    "contents_url": "https://api.github.com/repos/finos/waltz/contents/waltz-ng/client/bookmarks/components/bookmarks-section/bookmarks-section.html?ref=7d00bebc2c9a818e315c760a588766b1d381429c",
    "patch": "@@ -1,59 +0,0 @@\n-<!--\n-  ~ Waltz - Enterprise Architecture\n-  ~ Copyright (C) 2016, 2017, 2018, 2019 Waltz open source project\n-  ~ See README.md for more information\n-  ~\n-  ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n-  ~ you may not use this file except in compliance with the License.\n-  ~ You may obtain a copy of the License at\n-  ~\n-  ~     http://www.apache.org/licenses/LICENSE-2.0\n-  ~\n-  ~ Unless required by applicable law or agreed to in writing, software\n-  ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n-  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n-  ~ See the License for the specific\n-  ~\n-  -->\n-\n-<div>\n-    <waltz-section-actions>\n-        <a waltz-has-role=\"BOOKMARK_EDITOR\"\n-           ng-if=\"!$ctrl.visibility.editor\"\n-           ng-click=\"$ctrl.visibility.editor = true\"\n-           data-ux='bookmarks-switch-to-edit-mode'\n-           class=\"btn btn-xs btn-primary\">\n-            Edit\n-        </a>\n-        <a waltz-has-role=\"BOOKMARK_EDITOR\"\n-           ng-if=\"$ctrl.visibility.editor\"\n-           ng-click=\"$ctrl.visibility.editor = false\"\n-           data-ux='bookmarks-switch-to-view-mode'\n-           class=\"btn btn-xs btn-info\">\n-            Done\n-        </a>\n-        <button class=\"btn btn-xs waltz-btn-transparent\"\n-                ng-click=\"$ctrl.sourceDataOverlay = ! $ctrl.sourceDataOverlay\">\n-            <waltz-icon name=\"map-signs\"></waltz-icon>\n-        </button>\n-    </waltz-section-actions>\n-\n-    <waltz-source-data-overlay visible=\"$ctrl.sourceDataOverlay\"\n-                               entities=\"['BOOKMARK']\">\n-    </waltz-source-data-overlay>\n-\n-    <div ng-if=\"! $ctrl.visibility.editor\">\n-        <waltz-bookmarks-view-panel bookmarks=\"$ctrl.bookmarks\"\n-                                    parent-entity-ref=\"$ctrl.parentEntityRef\">\n-        </waltz-bookmarks-view-panel>\n-    </div>\n-\n-    <div ng-if=\"$ctrl.visibility.editor\">\n-        <waltz-bookmarks-edit-panel bookmarks=\"$ctrl.bookmarks\"\n-                                    parent-entity-ref=\"$ctrl.parentEntityRef\"\n-                                    on-reload=\"$ctrl.onReload\"\n-                                    on-dismiss=\"$ctrl.onDismiss\">\n-        </waltz-bookmarks-edit-panel>\n-    </div>\n-</div>\n-"
  },
  {
    "sha": "c8bbabf8977960ba2a595d37ae9ec53b0cb8183f",
    "filename": "waltz-ng/client/bookmarks/components/bookmarks-section/bookmarks-section.js",
    "status": "removed",
    "additions": 0,
    "deletions": 79,
    "changes": 79,
    "blob_url": "https://github.com/finos/waltz/blob/7d00bebc2c9a818e315c760a588766b1d381429c/waltz-ng/client/bookmarks/components/bookmarks-section/bookmarks-section.js",
    "raw_url": "https://github.com/finos/waltz/raw/7d00bebc2c9a818e315c760a588766b1d381429c/waltz-ng/client/bookmarks/components/bookmarks-section/bookmarks-section.js",
    "contents_url": "https://api.github.com/repos/finos/waltz/contents/waltz-ng/client/bookmarks/components/bookmarks-section/bookmarks-section.js?ref=7d00bebc2c9a818e315c760a588766b1d381429c",
    "patch": "@@ -1,79 +0,0 @@\n-/*\n- * Waltz - Enterprise Architecture\n- * Copyright (C) 2016, 2017, 2018, 2019 Waltz open source project\n- * See README.md for more information\n- *\n- * Licensed under the Apache License, Version 2.0 (the \"License\");\n- * you may not use this file except in compliance with the License.\n- * You may obtain a copy of the License at\n- *\n- *     http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing, software\n- * distributed under the License is distributed on an \"AS IS\" BASIS,\n- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n- * See the License for the specific\n- *\n- */\n-\n-import {CORE_API} from '../../../common/services/core-api-utils';\n-import {initialiseData} from \"../../../common\";\n-\n-import template from './bookmarks-section.html';\n-\n-\n-const bindings = {\n-    parentEntityRef: '<'\n-};\n-\n-\n-const initialState = {\n-    visibility: {\n-        editor: false\n-    }\n-};\n-\n-\n-\n-function controller(serviceBroker) {\n-    const vm = initialiseData(this, initialState);\n-\n-    const load = (force = false) => {\n-        serviceBroker\n-            .loadViewData(\n-                CORE_API.BookmarkStore.findByParent,\n-                [ vm.parentEntityRef ],\n-                { force })\n-            .then(r => vm.bookmarks = r.data);\n-    };\n-\n-    vm.$onInit = () => {\n-        if(vm.parentEntityRef) {\n-            load();\n-        }\n-    };\n-\n-    vm.onReload = () => {\n-        load(true);\n-    };\n-\n-    vm.onDismiss = () => {\n-        vm.visibility.editor = false;\n-    };\n-}\n-\n-\n-controller.$inject = ['ServiceBroker'];\n-\n-\n-const component = {\n-    bindings,\n-    template,\n-    controller\n-};\n-\n-\n-export default {\n-    component,\n-    id: 'waltzBookmarksSection'\n-};\n\\ No newline at end of file"
  },
  {
    "sha": "073205d96d84618ff50ec115f916fadca6bf63f8",
    "filename": "waltz-ng/client/bookmarks/components/bookmarks-view-panel/bookmarks-view-panel.html",
    "status": "removed",
    "additions": 0,
    "deletions": 120,
    "changes": 120,
    "blob_url": "https://github.com/finos/waltz/blob/7d00bebc2c9a818e315c760a588766b1d381429c/waltz-ng/client/bookmarks/components/bookmarks-view-panel/bookmarks-view-panel.html",
    "raw_url": "https://github.com/finos/waltz/raw/7d00bebc2c9a818e315c760a588766b1d381429c/waltz-ng/client/bookmarks/components/bookmarks-view-panel/bookmarks-view-panel.html",
    "contents_url": "https://api.github.com/repos/finos/waltz/contents/waltz-ng/client/bookmarks/components/bookmarks-view-panel/bookmarks-view-panel.html?ref=7d00bebc2c9a818e315c760a588766b1d381429c",
    "patch": "@@ -1,120 +0,0 @@\n-<!--\n-  ~ Waltz - Enterprise Architecture\n-  ~ Copyright (C) 2016, 2017, 2018, 2019 Waltz open source project\n-  ~ See README.md for more information\n-  ~\n-  ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n-  ~ you may not use this file except in compliance with the License.\n-  ~ You may obtain a copy of the License at\n-  ~\n-  ~     http://www.apache.org/licenses/LICENSE-2.0\n-  ~\n-  ~ Unless required by applicable law or agreed to in writing, software\n-  ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n-  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n-  ~ See the License for the specific\n-  ~\n-  -->\n-\n-<div>\n-    <div class=\"row\"\n-         ng-if=\"$ctrl.bookmarks.length > 0\">\n-\n-        <div class=\"col-sm-3\">\n-            <waltz-bookmark-kinds bookmarks=\"$ctrl.bookmarks\"\n-                                  on-select=\"$ctrl.selectBookmarkKind\">\n-            </waltz-bookmark-kinds>\n-        </div>\n-\n-        <div class=\"col-sm-9\">\n-            <div ng-if=\"$ctrl.bookmarks.length > 5\">\n-\n-                <waltz-search-control min-characters=\"1\"\n-                                      delay=\"250\"\n-                                      on-query=\"$ctrl.onQueryStrChange\"\n-                                      placeholder-text=\"Search bookmarks...\">\n-                </waltz-search-control>\n-\n-                <br>\n-            </div>\n-\n-            <div ng-include=\"'wbvp-bookmarks-table'\"></div>\n-        </div>\n-    </div>\n-\n-    <waltz-no-data ng-if=\"$ctrl.bookmarks.length == 0\">\n-        <message>\n-            <strong>No bookmarks</strong>\n-            for this\n-            <span ng-bind=\"$ctrl.parentEntityRef.kind | toDisplayName:'entity' | lowercase\">\n-            </span>\n-        </message>\n-    </waltz-no-data>\n-</div>\n-\n-\n-<script type=\"text/ng-template\"\n-        id=\"wbvp-bookmarks-table\">\n-    <table class=\"table table-condensed wbs-bookmark-table\"\n-           data-ux=\"bookmarks-view-table\">\n-        <colgroup>\n-            <col width=\"10%\">\n-            <col width=\"70%\">\n-            <col width=\"20%\">\n-        </colgroup>\n-\n-        <tbody ng-repeat=\"bookmarksByKind in $ctrl.filteredBookmarks | orderBy:'bookmarkKind'\">\n-        <tr ng-repeat=\"bookmark in bookmarksByKind.bookmarks\"\n-            class=\"waltz-visibility-parent\">\n-            <td style=\"vertical-align:middle; text-align: center; width: 10%\">\n-                <waltz-icon name=\"{{ bookmark.bookmarkKind | toIconName:'BookmarkKind' }}\"\n-                            size=\"lg\">\n-                </waltz-icon>\n-            </td>\n-            <td>\n-                <waltz-icon ng-if='bookmark.isPrimary'\n-                            name=\"star\">\n-                </waltz-icon>\n-                <waltz-icon ng-if='!bookmark.isPrimary'\n-                            class=\"text-muted\"\n-                            name=\"star-o\">\n-                </waltz-icon>\n-                <waltz-external-link title=\"{{ bookmark.title }}\"\n-                                     url=\"{{ bookmark.url }}\"\n-                                     show-url=\"true\">\n-                </waltz-external-link>\n-\n-                <waltz-icon ng-if='bookmark.isRestricted'\n-                            uib-popover=\"Security permissions apply to this link, you may not have access\"\n-                            popover-trigger=\"mouseenter\"\n-                            name=\"lock\">\n-                </waltz-icon>\n-\n-                <div>\n-                    <div ng-if=\"bookmark.description\"\n-                         class=\"text-muted small\">\n-                                <span ng-bind=\"bookmark.description\">\n-                                </span>\n-                    </div>\n-\n-                    <div ng-if=\"!bookmark.description\"\n-                         class=\"text-muted small\">\n-                        <i>No description provided</i>\n-                    </div>\n-                </div>\n-            </td>\n-            <td>\n-                <div class=\"small waltz-visibility-child-30\">\n-                    Last updated:\n-                    <div>\n-                        <span ng-bind=\"bookmark.lastUpdatedBy\"></span>\n-                        ,\n-                        <waltz-from-now timestamp=\"bookmark.lastUpdatedAt\"></waltz-from-now>\n-                    </div>\n-                </div>\n-            </td>\n-        </tr>\n-        </tbody>\n-    </table>\n-</script>\n-"
  },
  {
    "sha": "7d306d43583e00ff47826f85cc1fa48164d9ebf2",
    "filename": "waltz-ng/client/bookmarks/components/bookmarks-view-panel/bookmarks-view-panel.js",
    "status": "removed",
    "additions": 0,
    "deletions": 102,
    "changes": 102,
    "blob_url": "https://github.com/finos/waltz/blob/7d00bebc2c9a818e315c760a588766b1d381429c/waltz-ng/client/bookmarks/components/bookmarks-view-panel/bookmarks-view-panel.js",
    "raw_url": "https://github.com/finos/waltz/raw/7d00bebc2c9a818e315c760a588766b1d381429c/waltz-ng/client/bookmarks/components/bookmarks-view-panel/bookmarks-view-panel.js",
    "contents_url": "https://api.github.com/repos/finos/waltz/contents/waltz-ng/client/bookmarks/components/bookmarks-view-panel/bookmarks-view-panel.js?ref=7d00bebc2c9a818e315c760a588766b1d381429c",
    "patch": "@@ -1,102 +0,0 @@\n-/*\n- * Waltz - Enterprise Architecture\n- * Copyright (C) 2016, 2017, 2018, 2019 Waltz open source project\n- * See README.md for more information\n- *\n- * Licensed under the Apache License, Version 2.0 (the \"License\");\n- * you may not use this file except in compliance with the License.\n- * You may obtain a copy of the License at\n- *\n- *     http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing, software\n- * distributed under the License is distributed on an \"AS IS\" BASIS,\n- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n- * See the License for the specific\n- *\n- */\n-import _ from 'lodash';\n-import template from './bookmarks-view-panel.html';\n-import {initialiseData} from \"../../../common/index\";\n-\n-\n-const bindings = {\n-    bookmarks: '<',\n-    parentEntityRef: '<'\n-};\n-\n-\n-const initialState = {\n-    qry: null,\n-    bookmarkKind: null,\n-    filteredBookmarks: []\n-};\n-\n-\n-function filterBookmarks(bookmarks = [], kind = null, qry = null) {\n-    if (_.isEmpty(bookmarks)) return [];\n-\n-    const qryStr = _.toLower(qry);\n-\n-    const byKind = _\n-        .chain(bookmarks)\n-        .filter(b => _.isEmpty(qryStr)\n-            ? true\n-            : b.searchStr.indexOf(qryStr) > -1)\n-        .groupBy(b => b.bookmarkKind)\n-        .value();\n-\n-    const groupsToShow = kind\n-        ? { kind : byKind[kind] }\n-        : byKind;\n-\n-    return _.map(groupsToShow, (v, k) => ({ kind: k, bookmarks: v }));\n-}\n-\n-\n-function enrichBookmarkWithSearchStr(bookmark) {\n-    const searchStr = _.toLower(`${bookmark.description} ${bookmark.title} ${bookmark.url}`);\n-    return Object.assign({}, bookmark, { searchStr });\n-}\n-\n-\n-function controller() {\n-    const vm = initialiseData(this, initialState);\n-\n-    const refresh = () => {\n-        vm.filteredBookmarks = filterBookmarks(vm.enrichedBookmarks, vm.bookmarkKind, vm.qry);\n-    };\n-\n-    vm.$onChanges = () => {\n-        if (vm.bookmarks) {\n-            vm.enrichedBookmarks = _.map(\n-                vm.bookmarks,\n-                enrichBookmarkWithSearchStr);\n-        }\n-        refresh();\n-    };\n-\n-    vm.selectBookmarkKind = (kind) => {\n-        vm.bookmarkKind = kind;\n-        refresh();\n-    };\n-\n-    vm.onQueryStrChange = (qry) => {\n-        vm.qry = qry;\n-        refresh();\n-    };\n-\n-}\n-\n-\n-const component = {\n-    controller,\n-    template,\n-    bindings\n-};\n-\n-\n-export default {\n-    id: 'waltzBookmarksViewPanel',\n-    component\n-};\n\\ No newline at end of file"
  },
  {
    "sha": "72d893c7279fc71fa85a8ce3eb805b2fd6861dc4",
    "filename": "waltz-ng/client/bookmarks/components/form/bookmark-form.html",
    "status": "removed",
    "additions": 0,
    "deletions": 126,
    "changes": 126,
    "blob_url": "https://github.com/finos/waltz/blob/7d00bebc2c9a818e315c760a588766b1d381429c/waltz-ng/client/bookmarks/components/form/bookmark-form.html",
    "raw_url": "https://github.com/finos/waltz/raw/7d00bebc2c9a818e315c760a588766b1d381429c/waltz-ng/client/bookmarks/components/form/bookmark-form.html",
    "contents_url": "https://api.github.com/repos/finos/waltz/contents/waltz-ng/client/bookmarks/components/form/bookmark-form.html?ref=7d00bebc2c9a818e315c760a588766b1d381429c",
    "patch": "@@ -1,126 +0,0 @@\n-<!--\n-  ~ Waltz - Enterprise Architecture\n-  ~ Copyright (C) 2016, 2017, 2018, 2019 Waltz open source project\n-  ~ See README.md for more information\n-  ~\n-  ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n-  ~ you may not use this file except in compliance with the License.\n-  ~ You may obtain a copy of the License at\n-  ~\n-  ~     http://www.apache.org/licenses/LICENSE-2.0\n-  ~\n-  ~ Unless required by applicable law or agreed to in writing, software\n-  ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n-  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n-  ~ See the License for the specific\n-  ~\n-  -->\n-\n-<form name=\"bookmarkForm\"\n-      class=\"form-horizontal\"\n-      novalidate\n-      role=\"form\"\n-      ng-submit=\"$ctrl.onSubmit($ctrl.bookmark)\">\n-    <div class=\"form-group\">\n-        <label for=\"title\"\n-               class=\"col-sm-2 control-label\">\n-            Title\n-        </label>\n-        <div class=\"col-sm-10\">\n-            <input class=\"form-control\"\n-                   id=\"title\"\n-                   placeholder=\"Link title\"\n-                   data-ux=\"bookmarks-title-field\"\n-                   ng-disabled=\"$ctrl.bookmark.isRequired\"\n-                   ng-change=\"$ctrl.onFormChange()\"\n-                   ng-model=\"$ctrl.bookmark.title\">\n-            <p class=\"help-block\">Provide a descriptive title for this link</p>\n-        </div>\n-    </div>\n-    <div class=\"form-group\">\n-        <label for=\"url\"\n-               class=\"col-sm-2 control-label\">\n-            * URL\n-        </label>\n-        <div class=\"col-sm-10\">\n-            <input class=\"form-control\"\n-                   id=\"url\"\n-                   data-ux=\"bookmarks-url-field\"\n-                   ng-model=\"$ctrl.bookmark.url\"\n-                   ng-change=\"$ctrl.onFormChange()\"\n-                   maxlength=\"500\"\n-                   placeholder=\"URL\">\n-        </div>\n-    </div>\n-    <div class=\"form-group\">\n-        <label class=\"col-sm-2 control-label\">\n-            Restricted URL\n-        </label>\n-        <div class=\"col-sm-10\">\n-            <waltz-toggle label-on='Restricted'\n-                          label-off='Not restricted'\n-                          icon-on='lock'\n-                          icon-off='unlock'\n-                          on-toggle='$ctrl.toggleRestricted()'\n-                          state='$ctrl.bookmark.isRestricted'>\n-            </waltz-toggle>\n-            <p class=\"help-block\">Security Permissions apply to this link</p>\n-        </div>\n-    </div>\n-    <div class=\"form-group\">\n-        <label class=\"col-sm-2 control-label\">\n-            Kind\n-        </label>\n-        <div class=\"col-sm-10\">\n-            <waltz-bookmark-kind-select selected=\"$ctrl.bookmark.bookmarkKind\"\n-                                        disabled-condition=\"$ctrl.bookmark.isRequired\"\n-                                        on-select=\"$ctrl.onKindSelect\">\n-            </waltz-bookmark-kind-select>\n-            <p class=\"help-block\">Categorize this bookmark according to its purpose</p>\n-        </div>\n-    </div>\n-    <div class=\"form-group\">\n-        <label class=\"col-sm-2 control-label\">\n-            Primary\n-        </label>\n-        <div class=\"col-sm-10\">\n-            <waltz-toggle label-on='Primary'\n-                          label-off='Not primary'\n-                          icon-on='star'\n-                          icon-off='star-o'\n-                          on-toggle='$ctrl.togglePrimary()'\n-                          state='$ctrl.bookmark.isPrimary'>\n-            </waltz-toggle>\n-            <p class=\"help-block\">Primary links will be given preference when shown in views</p>\n-        </div>\n-    </div>\n-    <div class=\"form-group\">\n-        <label for=\"description\"\n-               class=\"col-sm-2 control-label\">\n-            Description\n-        </label>\n-        <div class=\"col-sm-10\">\n-            <textarea rows=\"8\"\n-                      cols=\"80\"\n-                      data-ux=\"bookmarks-description-field\"\n-                      id=\"description\"\n-                      ng-change=\"$ctrl.onFormChange()\"\n-                      ng-model=\"$ctrl.bookmark.description\">\n-            </textarea>\n-        </div>\n-    </div>\n-    <div class=\"form-group\">\n-        <div class=\"col-sm-offset-2 col-sm-10\">\n-            <button type=\"submit\"\n-                    ng-disabled=\"$ctrl.submitDisabled\"\n-                    data-ux=\"bookmarks-submit-new\"\n-                    class=\"btn btn-success\">\n-                {{ $ctrl.confirmLabel }}\n-            </button>\n-            <a ng-click=\"$ctrl.onCancel()\"\n-               class=\"clickable\">\n-                Cancel\n-            </a>\n-        </div>\n-    </div>\n-</form>\n\\ No newline at end of file"
  },
  {
    "sha": "2eb5baec566a894131ca5def57436e60e9d6c87c",
    "filename": "waltz-ng/client/bookmarks/index.js",
    "status": "modified",
    "additions": 1,
    "deletions": 17,
    "changes": 18,
    "blob_url": "https://github.com/finos/waltz/blob/3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df/waltz-ng/client/bookmarks/index.js",
    "raw_url": "https://github.com/finos/waltz/raw/3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df/waltz-ng/client/bookmarks/index.js",
    "contents_url": "https://api.github.com/repos/finos/waltz/contents/waltz-ng/client/bookmarks/index.js?ref=3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df",
    "patch": "@@ -17,16 +17,8 @@\n  */\n \n import angular from \"angular\";\n-\n-import {registerComponents, registerStores} from \"../common/module-utils\";\n-\n+import {registerStores} from \"../common/module-utils\";\n import bookmarkStore from \"./services/bookmark-store\";\n-import bookmarkKindSelect from \"./components/bookmark-kind-select/bookmark-kind-select\";\n-import bookmarksSection from \"./components/bookmarks-section/bookmarks-section\";\n-import bookmarkKinds from \"./components/bookmark-kinds/bookmark-kinds\";\n-import bookmarksViewPanel from \"./components/bookmarks-view-panel/bookmarks-view-panel\";\n-import bookmarksEditPanel from \"./components/bookmarks-edit-panel/bookmarks-edit-panel\";\n-import bookmarkForm from \"./components/form/bookmark-form\";\n \n \n export default () => {\n@@ -35,13 +27,5 @@ export default () => {\n \n     registerStores(module, [bookmarkStore]);\n \n-    registerComponents(module, [\n-        bookmarkForm,\n-        bookmarkKinds,\n-        bookmarkKindSelect,\n-        bookmarksSection,\n-        bookmarksEditPanel,\n-        bookmarksViewPanel]);\n-\n     return module.name;\n };"
  },
  {
    "sha": "f1e2d7301004cdc0fc091f8e90c9c9b70bf506a1",
    "filename": "waltz-ng/client/bookmarks/services/bookmark-store.js",
    "status": "modified",
    "additions": 4,
    "deletions": 5,
    "changes": 9,
    "blob_url": "https://github.com/finos/waltz/blob/3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df/waltz-ng/client/bookmarks/services/bookmark-store.js",
    "raw_url": "https://github.com/finos/waltz/raw/3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df/waltz-ng/client/bookmarks/services/bookmark-store.js",
    "contents_url": "https://api.github.com/repos/finos/waltz/contents/waltz-ng/client/bookmarks/services/bookmark-store.js?ref=3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df",
    "patch": "@@ -18,10 +18,10 @@\n  */\n \n import {checkIsEntityRef} from '../../common/checks';\n+import {$http} from \"../../common/WaltzHttp\";\n \n-\n-function store($http, baseApiUrl) {\n-    const baseUrl = `${baseApiUrl}/bookmarks`;\n+function store() {\n+    const baseUrl = `api/bookmarks`;\n \n     const save = (bookmark) => $http.post(baseUrl, bookmark);\n \n@@ -39,11 +39,10 @@ function store($http, baseApiUrl) {\n         findByParent,\n         remove\n     };\n-\n }\n \n \n-store.$inject = ['$http', 'BaseApiUrl'];\n+store.$inject = [];\n \n \n const serviceName = 'BookmarkStore';"
  },
  {
    "sha": "19146796f4344c1eb672cc938a97ec6dc2ea895b",
    "filename": "waltz-ng/client/bookmarks/svelte/BookmarkCategoryMenu.svelte",
    "status": "added",
    "additions": 63,
    "deletions": 0,
    "changes": 63,
    "blob_url": "https://github.com/finos/waltz/blob/3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df/waltz-ng/client/bookmarks/svelte/BookmarkCategoryMenu.svelte",
    "raw_url": "https://github.com/finos/waltz/raw/3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df/waltz-ng/client/bookmarks/svelte/BookmarkCategoryMenu.svelte",
    "contents_url": "https://api.github.com/repos/finos/waltz/contents/waltz-ng/client/bookmarks/svelte/BookmarkCategoryMenu.svelte?ref=3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df",
    "patch": "@@ -0,0 +1,63 @@\n+<script>\n+    import Icon from '../../common/svelte/Icon.svelte';\n+    import {createEventDispatcher} from \"svelte\";\n+\n+    export let bookmarkKinds = [];\n+\n+    let selected = null;\n+\n+    const dispatch = createEventDispatcher();\n+\n+    function eq(k1, k2) {\n+        if (_.isNil(k1) || _.isNil(k2)) {\n+            return false;\n+        }\n+        return k1 === k2 || k1.key === k2.key;\n+    }\n+\n+\n+    function bookmarkKindSelected(k) {\n+        selected = eq(selected, k)\n+            ? null\n+            : k;\n+\n+        dispatch(\"kindSelect\", { kind: selected });\n+    }\n+</script>\n+\n+\n+<ul class=\"list-group small\">\n+    {#each bookmarkKinds as bookmarkKind}\n+        <li class=\"list-group-item\"\n+            class:selected={eq(selected, bookmarkKind)}\n+            class:clickable={bookmarkKind.count > 0}\n+            class:text-muted={bookmarkKind.count === 0}\n+            on:click={() => bookmarkKind.count > 0 && bookmarkKindSelected(bookmarkKind)}>\n+\n+            <Icon name={bookmarkKind.icon}/>\n+\n+            {bookmarkKind.name}\n+\n+            {#if eq(selected, bookmarkKind)}\n+                <span class=\"pull-right\">\n+                    <Icon name=\"close\"/>\n+                </span>\n+            {/if}\n+        </li>\n+    {/each}\n+</ul>\n+\n+\n+<style>\n+    .selected {\n+        background-color: #e2ffd9;\n+    }\n+\n+    .clickable {\n+        font-size: larger;\n+    }\n+\n+    .clickable > :global(.icon) {\n+        color: #5BB65D;\n+    }\n+</style>\n\\ No newline at end of file"
  },
  {
    "sha": "04eeb3fe3df57a0af3fc648ab81c53765b951e6e",
    "filename": "waltz-ng/client/bookmarks/svelte/BookmarkEditor.svelte",
    "status": "added",
    "additions": 81,
    "deletions": 0,
    "changes": 81,
    "blob_url": "https://github.com/finos/waltz/blob/3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df/waltz-ng/client/bookmarks/svelte/BookmarkEditor.svelte",
    "raw_url": "https://github.com/finos/waltz/raw/3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df/waltz-ng/client/bookmarks/svelte/BookmarkEditor.svelte",
    "contents_url": "https://api.github.com/repos/finos/waltz/contents/waltz-ng/client/bookmarks/svelte/BookmarkEditor.svelte?ref=3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df",
    "patch": "@@ -0,0 +1,81 @@\n+<script>\n+    export let doCancel;\n+    export let doSave;\n+    export let bookmark;\n+    export let kinds;\n+\n+    let workingCopy = Object.assign({}, bookmark);\n+</script>\n+\n+<h4>Bookmark Edit</h4>\n+\n+<form autocomplete=\"off\">\n+    <div class=\"form-group\">\n+        <label for=\"title\">Title</label>\n+        <input class=\"form-control\"\n+               id=\"title\"\n+               placeholder=\"Link Title\"\n+               bind:value={workingCopy.title}>\n+    </div>\n+\n+    <div class=\"form-group\">\n+        <label for=\"url\">\n+            URL\n+            <small class=\"text-muted\">(required)</small>\n+        </label>\n+        <input class=\"form-control\"\n+               id=\"url\"\n+               required=\"required\"\n+               placeholder=\"URL\"\n+               bind:value={workingCopy.url}>\n+    </div>\n+\n+    <div class=\"checkbox\">\n+        <label>\n+            <input type=\"checkbox\"\n+                   bind:checked={workingCopy.isRestricted}>\n+            Is Restricted ?\n+        </label>\n+        <div class=\"help-block\">\n+            Use this flag to indicate if visitors may need special permissions to access the link\n+        </div>\n+    </div>\n+\n+    <div class=\"form-group\">\n+        <label for=\"kind\">\n+            Kind\n+        </label>\n+        <select id=\"kind\"\n+                bind:value={workingCopy.bookmarkKind}\n+                title=\"Select your spell\"\n+                class=\"form-control\">\n+            {#each kinds as kind}\n+                <option value={kind.key}>{kind.name}</option>\n+            {/each}\n+        </select>\n+    </div>\n+\n+    <div class=\"form-group\">\n+        <label for=\"description\">Description</label>\n+        <textarea class=\"form-control\"\n+                  id=\"description\"\n+                  bind:value={workingCopy.description}/>\n+    </div>\n+\n+    <button type=\"submit\"\n+            class=\"btn btn-success\"\n+            on:click|preventDefault={() => doSave(workingCopy)}>\n+        Save\n+    </button>\n+\n+    <button class=\"btn btn-link\"\n+            on:click={doCancel}>\n+        Cancel\n+    </button>\n+</form>\n+\n+<style>\n+    input:invalid {\n+        border: 2px solid red;\n+    }\n+</style>"
  },
  {
    "sha": "4eadfdb64e053b21035f033de6212b0f1f944bf9",
    "filename": "waltz-ng/client/bookmarks/svelte/BookmarkListItem.svelte",
    "status": "added",
    "additions": 52,
    "deletions": 0,
    "changes": 52,
    "blob_url": "https://github.com/finos/waltz/blob/3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df/waltz-ng/client/bookmarks/svelte/BookmarkListItem.svelte",
    "raw_url": "https://github.com/finos/waltz/raw/3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df/waltz-ng/client/bookmarks/svelte/BookmarkListItem.svelte",
    "contents_url": "https://api.github.com/repos/finos/waltz/contents/waltz-ng/client/bookmarks/svelte/BookmarkListItem.svelte?ref=3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df",
    "patch": "@@ -0,0 +1,52 @@\n+<script>\n+    import Icon from \"../../common/svelte/Icon.svelte\";\n+    import MiniActions from \"../../common/svelte/MiniActions.svelte\";\n+    import DateTime from \"../../common/svelte/DateTime.svelte\";\n+\n+    import _ from \"lodash\";\n+    import LastEdited from \"../../common/svelte/LastEdited.svelte\";\n+\n+    export let bookmark;\n+    export let actions = [];\n+</script>\n+\n+\n+<tr class=\"waltz-visibility-parent\">\n+    <td style=\"vertical-align: middle\">\n+        <Icon name={bookmark.icon}/>\n+    </td>\n+    <td>\n+        <a href={bookmark.url}>\n+            {bookmark.title || bookmark.domain}\n+        </a>\n+        {#if bookmark.title}\n+            <small class=\"text-muted\">\n+                ({bookmark.domain})\n+            </small>\n+        {/if}\n+        {#if bookmark.isRestricted}\n+            <small class=\"text-muted\">\n+                <Icon name=\"lock\"/>\n+                Permissions may be required\n+            </small>\n+        {/if}\n+\n+        <div class=\"text-muted\"\n+             class:italics={_.isNil(bookmark.description)}>\n+            {bookmark.description || \"No description provided\"}\n+        </div>\n+    </td>\n+    <td class=\"waltz-visibility-child-20\"\n+        style=\"text-align: right; padding-right: 1em;\">\n+\n+        <MiniActions ctx={bookmark}\n+                     actions={actions}/>\n+\n+        <div class=\"text-muted small\">\n+            Last updated:\n+            <LastEdited entity={bookmark}/>\n+        </div>\n+\n+    </td>\n+</tr>\n+"
  },
  {
    "sha": "16845edea5503f34d1f0962fb90f38c5f7a8f82a",
    "filename": "waltz-ng/client/bookmarks/svelte/BookmarkPanel.svelte",
    "status": "added",
    "additions": 153,
    "deletions": 0,
    "changes": 153,
    "blob_url": "https://github.com/finos/waltz/blob/3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df/waltz-ng/client/bookmarks/svelte/BookmarkPanel.svelte",
    "raw_url": "https://github.com/finos/waltz/raw/3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df/waltz-ng/client/bookmarks/svelte/BookmarkPanel.svelte",
    "contents_url": "https://api.github.com/repos/finos/waltz/contents/waltz-ng/client/bookmarks/svelte/BookmarkPanel.svelte?ref=3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df",
    "patch": "@@ -0,0 +1,153 @@\n+<script>\n+    import BookmarkCategoryMenu from \"./BookmarkCategoryMenu.svelte\";\n+    import BookmarkEditor from \"./BookmarkEditor.svelte\";\n+    import BookmarkTable from \"./BookmarkTable.svelte\";\n+    import BookmarkRemovalConfirmation from \"./BookmarkRemovalConfirmation.svelte\";\n+    import Icon from \"../../common/svelte/Icon.svelte\";\n+    import NoData from \"../../common/svelte/NoData.svelte\";\n+    import SearchInput from \"../../common/svelte/SearchInput.svelte\";\n+    import {nestEnums} from \"../../common/svelte/enum-utils\";\n+    import {filterBookmarks, mkBookmarkKinds, nestBookmarks} from \"./bookmark-utils\";\n+    import {bookmarkStore} from \"../../svelte-stores/bookmark-store\";\n+    import {enumValueStore} from \"../../svelte-stores/enum-value-store\";\n+    import {userStore} from \"../../svelte-stores/user-store\";\n+    import roles from \"../../user/system-roles\";\n+\n+    import _ from \"lodash\";\n+    import {anyErrors, anyLoading, mkOverallStatus} from \"../../svelte-stores/store-utils\";\n+\n+    export let primaryEntityRef = null;\n+\n+    let nestedEnums = {};\n+    let bookmarkKinds = {};\n+    let bookmarkGroups = [];\n+\n+    let removalCandidate = null;\n+    let editCandidate = null;\n+\n+    let selectedKind = null;\n+    let qry = \"\";\n+    let actions = [];\n+\n+    const editAction = {\n+        icon: \"pencil\",\n+        name: \"Edit\",\n+        handleAction: (d) => editCandidate = d\n+    };\n+\n+    const removeAction = {\n+        icon: \"trash\",\n+        name: \"Remove\",\n+        handleAction: (d) => removalCandidate = d\n+    };\n+\n+    function onKindSelect(e) {\n+        selectedKind = e.detail.kind;\n+    }\n+\n+    function doRemove() {\n+        return bookmarkStore\n+            .remove(removalCandidate)\n+            .then(() => removalCandidate = null);\n+    }\n+\n+    function doSave(bookmark) {\n+        return bookmarkStore\n+            .save(bookmark)\n+            .then(() => editCandidate = null);\n+    }\n+\n+    function onCreate() {\n+        editCandidate = {\n+            bookmarkKind: _.get(selectedKind, \"key\", \"DOCUMENTATION\"),\n+            parent: primaryEntityRef,\n+            lastUpdatedBy: \"ignored, server will set\"\n+        };\n+    }\n+\n+    let bookmarks = bookmarkStore.load(primaryEntityRef);\n+    let user = userStore.load();\n+    let enums = enumValueStore.load();\n+\n+    $: nestedEnums = nestEnums($enums.data);\n+    $: bookmarkGroups = nestBookmarks(\n+        nestedEnums,\n+        filterBookmarks($bookmarks.data, selectedKind, qry));\n+    $: bookmarkKinds = mkBookmarkKinds(\n+        nestedEnums,\n+        $bookmarks.data);\n+    $: actions = _.includes($user.data.roles, roles.BOOKMARK_EDITOR.key)\n+        ? [editAction, removeAction]\n+        : [];\n+\n+    $: status = mkOverallStatus([$bookmarks])\n+</script>\n+\n+{#if (status.hasErrors)}\n+    <h1>Error</h1>\n+    <pre>{JSON.stringify(status.errors, \"\", 2)}</pre>\n+{:else if (status.isLoading)}\n+    <h2>Loading</h2>\n+{:else}\n+    <div class=\"row\">\n+        <div class=\"col-sm-4\">\n+            <BookmarkCategoryMenu on:kindSelect={onKindSelect}\n+                                  bookmarkKinds={bookmarkKinds}/>\n+        </div>\n+\n+        <div class=\"col-sm-8\">\n+\n+            {#if removalCandidate}\n+                <BookmarkRemovalConfirmation bookmark={removalCandidate}\n+                                             {doRemove}\n+                                             doCancel={() => removalCandidate = null}/>\n+            {:else if editCandidate}\n+                <BookmarkEditor bookmark={editCandidate}\n+                                kinds={bookmarkKinds}\n+                                {doSave}\n+                                doCancel={() => editCandidate = null} />\n+            {:else}\n+                {#if $bookmarks.data.length > 5}\n+                    <SearchInput bind:value={qry}\n+                                 placeholder=\"Search bookmarks...\"/>\n+                    <br>\n+                {/if}\n+                {#if _.isEmpty(bookmarkGroups)}\n+                    <NoData>\n+                        No bookmarks\n+                        {#if actions.length > 0}\n+                            <div style=\"padding-top: 1em;\">\n+                                <button class=\"btn btn-sm btn-default\"\n+                                        on:click={() => onCreate()}>\n+                                    <Icon name=\"plus\"/>\n+                                    Add bookmark\n+                                </button>\n+                            </div>\n+                        {/if}\n+                    </NoData>\n+\n+                {:else}\n+                    <BookmarkTable {bookmarkGroups} {actions}>\n+                        <tfoot slot=\"footer\">\n+                        {#if actions.length > 0}\n+                            <tr>\n+                                <td colspan=\"3\">\n+                                    <button class=\"btn btn-link\"\n+                                            on:click={() => onCreate()}>\n+                                        <Icon name=\"plus\"/>\n+                                        Add bookmark\n+                                    </button>\n+                                </td>\n+                            </tr>\n+                        {/if}\n+                        </tfoot>\n+                    </BookmarkTable>\n+                {/if}\n+            {/if}\n+\n+        </div>\n+    </div>\n+\n+{/if}\n+\n+"
  },
  {
    "sha": "fe17432fbd20d5ca2a2c07bb936b645186ed6d73",
    "filename": "waltz-ng/client/bookmarks/svelte/BookmarkRemovalConfirmation.svelte",
    "status": "added",
    "additions": 36,
    "deletions": 0,
    "changes": 36,
    "blob_url": "https://github.com/finos/waltz/blob/3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df/waltz-ng/client/bookmarks/svelte/BookmarkRemovalConfirmation.svelte",
    "raw_url": "https://github.com/finos/waltz/raw/3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df/waltz-ng/client/bookmarks/svelte/BookmarkRemovalConfirmation.svelte",
    "contents_url": "https://api.github.com/repos/finos/waltz/contents/waltz-ng/client/bookmarks/svelte/BookmarkRemovalConfirmation.svelte?ref=3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df",
    "patch": "@@ -0,0 +1,36 @@\n+<script>\n+    export let bookmark;\n+    export let doRemove;\n+    export let doCancel;\n+</script>\n+\n+<div class=\"removal-warning\">\n+    <h3>Confirm bookmark removal</h3>\n+    Are you sure you want to remove this bookmark ?\n+\n+    <div>\n+        <b>{bookmark.title}</b>\n+        <p>{bookmark.url}</p>\n+    </div>\n+\n+    <button class=\"btn btn-warning\"\n+            on:click={doRemove}>\n+        Remove\n+    </button>\n+    <button class=\"btn btn-link\"\n+            on:click={() => doCancel()}>\n+        Cancel\n+    </button>\n+</div>\n+\n+\n+<style>\n+    .removal-warning {\n+        border: 1px solid #D9923F;\n+        background-color: #faf8e9;\n+        padding-left: 2em;\n+        padding-right: 2em;\n+        padding-bottom: 1.5em;\n+        border-radius: 2px;\n+    }\n+</style>\n\\ No newline at end of file"
  },
  {
    "sha": "9dfb91aea74a75d7398665ff12627a7bbe057972",
    "filename": "waltz-ng/client/bookmarks/svelte/BookmarkTable.svelte",
    "status": "added",
    "additions": 17,
    "deletions": 0,
    "changes": 17,
    "blob_url": "https://github.com/finos/waltz/blob/3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df/waltz-ng/client/bookmarks/svelte/BookmarkTable.svelte",
    "raw_url": "https://github.com/finos/waltz/raw/3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df/waltz-ng/client/bookmarks/svelte/BookmarkTable.svelte",
    "contents_url": "https://api.github.com/repos/finos/waltz/contents/waltz-ng/client/bookmarks/svelte/BookmarkTable.svelte?ref=3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df",
    "patch": "@@ -0,0 +1,17 @@\n+<script>\n+    import BookmarkListItem from \"./BookmarkListItem.svelte\";\n+    export let bookmarkGroups = {};\n+    export let actions = [];\n+</script>\n+\n+<table class=\"table table-condensed table-hover\">\n+    {#each bookmarkGroups as group}\n+        <tbody>\n+        {#each group.value as bookmark}\n+            <BookmarkListItem {actions} {bookmark}/>\n+        {/each}\n+        </tbody>\n+    {/each}\n+    <slot name=\"footer\">\n+    </slot>\n+</table>\n\\ No newline at end of file"
  },
  {
    "sha": "73a1c46527585207677a4d85f8e5f0c476126a3b",
    "filename": "waltz-ng/client/bookmarks/svelte/bookmark-utils.js",
    "status": "added",
    "additions": 87,
    "deletions": 0,
    "changes": 87,
    "blob_url": "https://github.com/finos/waltz/blob/3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df/waltz-ng/client/bookmarks/svelte/bookmark-utils.js",
    "raw_url": "https://github.com/finos/waltz/raw/3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df/waltz-ng/client/bookmarks/svelte/bookmark-utils.js",
    "contents_url": "https://api.github.com/repos/finos/waltz/contents/waltz-ng/client/bookmarks/svelte/bookmark-utils.js?ref=3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df",
    "patch": "@@ -0,0 +1,87 @@\n+/*\n+ * Waltz - Enterprise Architecture\n+ * Copyright (C) 2016, 2017, 2018, 2019 Waltz open source project\n+ * See README.md for more information\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific\n+ *\n+ */\n+\n+import {ascending} from \"d3-array\";\n+import {nest} from \"d3-collection\";\n+import * as enumUtils from \"../../common/svelte/enum-utils\";\n+import {toDomain} from \"../../common/string-utils\";\n+import _ from \"lodash\";\n+\n+\n+export function mkBookmarkKinds(nestedEnums, bookmarks = []) {\n+    const countsByKind = _.countBy(bookmarks, b => b.bookmarkKind);\n+\n+    const enrichWithCount = bk => {\n+        const count = _.get(countsByKind, bk.key, 0);\n+        return Object.assign({}, bk, { count });\n+    };\n+\n+    return _.chain(_.values(nestedEnums.BookmarkKind))\n+        .map(enrichWithCount)\n+        .orderBy(bk => bk.name)\n+        .value();\n+}\n+\n+\n+/**\n+ * returns bookmarks grouped by kind and sorted by title:\n+ *\n+ * ```\n+ *   [ { key: kind, value: [ ...bookmarks ] }, ... ]\n+ * ```\n+ * @param nestedEnums\n+ * @param bookmarks\n+ */\n+export function nestBookmarks(nestedEnums, bookmarks = []) {\n+    return nest()\n+        .key(d => d.bookmarkKind)\n+        .sortKeys((a, b) => ascending(\n+            getName(nestedEnums, a),\n+            getName(nestedEnums, b)))\n+        .sortValues((a, b) => ascending(a.title, b.title))\n+        .rollup(xs => _.map(xs, x => {\n+            const extension = {\n+                domain: toDomain(x.url),\n+                icon: getIcon(nestedEnums, x.bookmarkKind)\n+            };\n+            return Object.assign({}, x, extension);\n+        }))\n+        .entries(bookmarks);\n+}\n+\n+\n+function getIcon(nestedEnums, key) {\n+    return enumUtils.getIcon(nestedEnums, \"BookmarkKind\", key);\n+}\n+\n+\n+function getName(nestedEnums, key) {\n+    return enumUtils.getName(nestedEnums, \"BookmarkKind\", key);\n+}\n+\n+export function filterBookmarks(xs, kind, qry) {\n+    return _\n+        .chain(xs)\n+        .filter(kind\n+            ? b => b.bookmarkKind === kind.key\n+            : () => true)\n+        .filter(_.isEmpty(qry)\n+            ? () => true\n+            : b => _.join([b.title, b.url, b.description]).toLowerCase().indexOf(qry) > -1)\n+        .value();\n+}"
  },
  {
    "sha": "03010db906f9fa3b7cbb860c033098d2a8f3c86b",
    "filename": "waltz-ng/client/common/WaltzHttp.js",
    "status": "added",
    "additions": 91,
    "deletions": 0,
    "changes": 91,
    "blob_url": "https://github.com/finos/waltz/blob/3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df/waltz-ng/client/common/WaltzHttp.js",
    "raw_url": "https://github.com/finos/waltz/raw/3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df/waltz-ng/client/common/WaltzHttp.js",
    "contents_url": "https://api.github.com/repos/finos/waltz/contents/waltz-ng/client/common/WaltzHttp.js?ref=3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df",
    "patch": "@@ -0,0 +1,91 @@\n+/*\n+ * Waltz - Enterprise Architecture\n+ * Copyright (C) 2016, 2017, 2018, 2019 Waltz open source project\n+ * See README.md for more information\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific\n+ *\n+ */\n+\n+export const $http = {\n+    get,\n+    post,\n+    put,\n+    delete: _delete\n+};\n+\n+\n+\n+const headers = {\n+    \"Content-Type\": \"application/json\",\n+    \"If-Modified-Since\": 0\n+};\n+\n+const satellizerToken = localStorage.getItem(\"satellizer_token\");\n+if (! _.isEmpty(satellizerToken)) {\n+    headers[\"Authorization\"] = `Bearer ${satellizerToken}`;\n+}\n+\n+\n+function get(url) {\n+    const requestOptions = {\n+        method: \"GET\",\n+        headers\n+    };\n+    return fetch(url, requestOptions)\n+        .then(handleResponse);\n+}\n+\n+function post(url, body) {\n+    const requestOptions = {\n+        method: \"POST\",\n+        headers,\n+        body: JSON.stringify(body)\n+    };\n+    return fetch(url, requestOptions)\n+        .then(handleResponse);\n+}\n+\n+function put(url, body) {\n+    const requestOptions = {\n+        method: 'PUT',\n+        headers,\n+        body: JSON.stringify(body)\n+    };\n+    return fetch(url, requestOptions)\n+        .then(handleResponse);\n+}\n+\n+// prefixed with underscored because delete is a reserved word in javascript\n+function _delete(url) {\n+    const requestOptions = {\n+        method: \"DELETE\",\n+        headers\n+    };\n+    return fetch(url, requestOptions)\n+        .then(handleResponse);\n+}\n+\n+// helper functions\n+\n+function handleResponse(response) {\n+    return response.text().then(text => {\n+        const data = text && JSON.parse(text);\n+\n+        if (!response.ok) {\n+            const error = (data && data.message) || response.statusText;\n+            return Promise.reject({error, response, text});\n+        }\n+\n+        return { data};\n+    });\n+}"
  },
  {
    "sha": "f77b5c710e4b718575e788124ffd172888483c02",
    "filename": "waltz-ng/client/common/checks.js",
    "status": "modified",
    "additions": 2,
    "deletions": 1,
    "changes": 3,
    "blob_url": "https://github.com/finos/waltz/blob/3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df/waltz-ng/client/common/checks.js",
    "raw_url": "https://github.com/finos/waltz/raw/3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df/waltz-ng/client/common/checks.js",
    "contents_url": "https://api.github.com/repos/finos/waltz/contents/waltz-ng/client/common/checks.js?ref=3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df",
    "patch": "@@ -122,7 +122,8 @@ const serviceBrokerOptionsShape = {\n \n const dynamicSectionShape = {\n     id: apiCheck.number,\n-    componentId: apiCheck.string,\n+    componentId: apiCheck.string.optional,\n+    svelteComponent: apiCheck.func.optional,\n     name: apiCheck.string,\n     icon: apiCheck.string\n };"
  },
  {
    "sha": "7cb8574e54fca334fe8005f5dd2de98c9fc65e20",
    "filename": "waltz-ng/client/common/promise-utils.js",
    "status": "modified",
    "additions": 4,
    "deletions": 0,
    "changes": 4,
    "blob_url": "https://github.com/finos/waltz/blob/3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df/waltz-ng/client/common/promise-utils.js",
    "raw_url": "https://github.com/finos/waltz/raw/3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df/waltz-ng/client/common/promise-utils.js",
    "contents_url": "https://api.github.com/repos/finos/waltz/contents/waltz-ng/client/common/promise-utils.js?ref=3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df",
    "patch": "@@ -16,6 +16,10 @@\n  *\n  */\n \n+export function sleep(ms) {\n+    return new Promise(resolve => setTimeout(resolve, ms));\n+}\n+\n export function isPromise(obj) {\n     return !!obj && (typeof obj === \"object\" || typeof obj === \"function\") && typeof obj.then === \"function\";\n }"
  },
  {
    "sha": "db66e54c1274af52200f8e0b896c38f3d3a1f1ca",
    "filename": "waltz-ng/client/common/string-utils.js",
    "status": "modified",
    "additions": 4,
    "deletions": 0,
    "changes": 4,
    "blob_url": "https://github.com/finos/waltz/blob/3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df/waltz-ng/client/common/string-utils.js",
    "raw_url": "https://github.com/finos/waltz/raw/3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df/waltz-ng/client/common/string-utils.js",
    "contents_url": "https://api.github.com/repos/finos/waltz/contents/waltz-ng/client/common/string-utils.js?ref=3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df",
    "patch": "@@ -118,6 +118,10 @@ export function stringToBoolean(str){\n  * @returns {*}\n  */\n export function toDomain(url) {\n+    if (_.isEmpty(url)) {\n+        return \"\";\n+    }\n+\n     let domain;\n     //find & remove protocol (http, ftp, etc.) and get domain\n     if (url.indexOf(\"://\") > -1) {"
  },
  {
    "sha": "ec294e26bc8f8049d99b4afe8256368d5ea47422",
    "filename": "waltz-ng/client/common/svelte/DateTime.svelte",
    "status": "added",
    "additions": 20,
    "deletions": 0,
    "changes": 20,
    "blob_url": "https://github.com/finos/waltz/blob/3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df/waltz-ng/client/common/svelte/DateTime.svelte",
    "raw_url": "https://github.com/finos/waltz/raw/3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df/waltz-ng/client/common/svelte/DateTime.svelte",
    "contents_url": "https://api.github.com/repos/finos/waltz/contents/waltz-ng/client/common/svelte/DateTime.svelte?ref=3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df",
    "patch": "@@ -0,0 +1,20 @@\n+<script>\n+    import moment from \"moment\";\n+\n+    export let dateTime;\n+    export let relative = true;\n+    export let formatStr = \"yyyy-MM-DD hh:mm:ss\";\n+\n+    const timeAgo = t => moment.utc(t).fromNow();\n+    const format = t => moment.utc(t).format(formatStr)\n+</script>\n+\n+{#if relative}\n+    <span title={format(dateTime)}>\n+        {timeAgo(dateTime)}\n+    </span>\n+{:else}\n+    <span title={timeAgo(dateTime)}>\n+        {format(dateTime)}\n+    </span>\n+{/if}"
  },
  {
    "sha": "293b288c4613ee0e3b841374473041c92af4137d",
    "filename": "waltz-ng/client/common/svelte/EntityIcon.svelte",
    "status": "added",
    "additions": 16,
    "deletions": 0,
    "changes": 16,
    "blob_url": "https://github.com/finos/waltz/blob/3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df/waltz-ng/client/common/svelte/EntityIcon.svelte",
    "raw_url": "https://github.com/finos/waltz/raw/3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df/waltz-ng/client/common/svelte/EntityIcon.svelte",
    "contents_url": "https://api.github.com/repos/finos/waltz/contents/waltz-ng/client/common/svelte/EntityIcon.svelte?ref=3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df",
    "patch": "@@ -0,0 +1,16 @@\n+<script>\n+    import _ from \"lodash\";\n+    import {entity} from \"../services/enums/entity\";\n+\n+    import Icon from \"./Icon.svelte\";\n+    export let kind;\n+\n+    $: name = _.get(entity, [kind, \"icon\"], \"circle-o\");\n+\n+\n+</script>\n+\n+<style>\n+</style>\n+\n+<Icon {name}/>"
  },
  {
    "sha": "8cf19135750df02c4b0c88920b017d11c1c87eb8",
    "filename": "waltz-ng/client/common/svelte/EntityLabel.svelte",
    "status": "added",
    "additions": 8,
    "deletions": 0,
    "changes": 8,
    "blob_url": "https://github.com/finos/waltz/blob/3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df/waltz-ng/client/common/svelte/EntityLabel.svelte",
    "raw_url": "https://github.com/finos/waltz/raw/3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df/waltz-ng/client/common/svelte/EntityLabel.svelte",
    "contents_url": "https://api.github.com/repos/finos/waltz/contents/waltz-ng/client/common/svelte/EntityLabel.svelte?ref=3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df",
    "patch": "@@ -0,0 +1,8 @@\n+<script>\n+    import EntityIcon from \"./EntityIcon.svelte\";\n+\n+    export let ref;\n+\n+</script>\n+<EntityIcon kind=\"APPLICATION\"/>\n+{ref.name}\n\\ No newline at end of file"
  },
  {
    "sha": "bca63e496e8cdb12708606ec6b4a3748409ca5d3",
    "filename": "waltz-ng/client/common/svelte/EntityLink.svelte",
    "status": "added",
    "additions": 27,
    "deletions": 0,
    "changes": 27,
    "blob_url": "https://github.com/finos/waltz/blob/3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df/waltz-ng/client/common/svelte/EntityLink.svelte",
    "raw_url": "https://github.com/finos/waltz/raw/3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df/waltz-ng/client/common/svelte/EntityLink.svelte",
    "contents_url": "https://api.github.com/repos/finos/waltz/contents/waltz-ng/client/common/svelte/EntityLink.svelte?ref=3d0e13b3b8f6d6564d82eccbeed9cf5c86cbb0df",
    "patch": "@@ -0,0 +1,27 @@\n+<script>\n+    import ViewLink from \"./ViewLink.svelte\";\n+    import EntityLabel from \"./EntityLabel.svelte\";\n+\n+    /**\n+     * Entity Link takes an entity ref\n+     * and generates a page link for the entity.\n+     * By default it will render an icon and the name of the\n+     * entity (if it's on the reference).\n+     *\n+     * If the default slot is provided then that will be used.\n+     *\n+     * @type {{id: number}}\n+     */\n+\n+\n+    export let ref = {};\n+</script>\n+\n+<ViewLink state=\"main.app.view\"\n+          ctx={ref}>\n+    {#if $$slots.default}\n+        <slot/>\n+    {:else}\n+        <EntityLabel {ref}/>\n+    {/if}\n+</ViewLink>"
  }
]
