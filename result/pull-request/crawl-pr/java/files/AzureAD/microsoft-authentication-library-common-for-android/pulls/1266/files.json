[
  {
    "sha": "be796842d13a37009c284edf3ae6a5af71a157e7",
    "filename": "build.gradle",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/blob/a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3/build.gradle",
    "raw_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/raw/a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3/build.gradle",
    "contents_url": "https://api.github.com/repos/AzureAD/microsoft-authentication-library-common-for-android/contents/build.gradle?ref=a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3",
    "patch": "@@ -5,8 +5,8 @@ buildscript {\n     \n     repositories {\n         google()\n-        jcenter()\n         mavenCentral()\n+        jcenter()\n     }\n     dependencies {\n         classpath \"com.android.tools.build:gradle:${rootProject.ext.gradleVersion}\""
  },
  {
    "sha": "bfe94a7ad34f69577e835a05d3628dcdf7411b77",
    "filename": "changelog.txt",
    "status": "modified",
    "additions": 2,
    "deletions": 0,
    "changes": 2,
    "blob_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/blob/a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3/changelog.txt",
    "raw_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/raw/a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3/changelog.txt",
    "contents_url": "https://api.github.com/repos/AzureAD/microsoft-authentication-library-common-for-android/contents/changelog.txt?ref=a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3",
    "patch": "@@ -11,6 +11,8 @@ V.Next\n - [MINOR] Adds new API to support ADAL/MSAL migration off of AuthenticationSettings#setSecretKey to a 'managed key' generated by Common (#1244)\n - [PATCH] Improved performance of getAccounts() call by reducing number of cache round-trips (#1271)\n - [PATCH] Perf: Use an Iterator over SharedPreferences entries via getAllFilteredByKey() (#1262)\n+- [MINOR] Fall back to browser view if we can't open custom tabs. (#1270)\n+- [MINOR] Adds plumbing for new API parameters to reach the token endpoint (#1266)\n \n Version 3.1.2\n ----------"
  },
  {
    "sha": "a494dcb5672a8b70d488212e47041fcaaad02742",
    "filename": "common/src/main/java/com/microsoft/identity/common/internal/broker/BrokerRequest.java",
    "status": "modified",
    "additions": 16,
    "deletions": 324,
    "changes": 340,
    "blob_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/blob/a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3/common/src/main/java/com/microsoft/identity/common/internal/broker/BrokerRequest.java",
    "raw_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/raw/a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3/common/src/main/java/com/microsoft/identity/common/internal/broker/BrokerRequest.java",
    "contents_url": "https://api.github.com/repos/AzureAD/microsoft-authentication-library-common-for-android/contents/common/src/main/java/com/microsoft/identity/common/internal/broker/BrokerRequest.java?ref=a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3",
    "patch": "@@ -31,14 +31,22 @@\n \n import java.io.Serializable;\n \n+import lombok.Builder;\n+import lombok.Getter;\n+import lombok.experimental.Accessors;\n+\n /**\n  * Represents the broker request\n  */\n+@Builder\n+@Accessors(prefix = \"m\")\n+@Getter\n public class BrokerRequest implements Serializable {\n \n-    private static final long serialVersionUID = 542024304389420837L;\n+    private static final long serialVersionUID = -543392127065130474L;\n \n     private class SerializedNames {\n+        final static String EXTRA_OPTIONS = \"extra_options\";\n         final static String AUTHORITY = \"authority\";\n         final static String SCOPE = \"scopes\";\n         final static String REDIRECT = \"redirect_uri\";\n@@ -118,6 +126,13 @@\n     @SerializedName(SerializedNames.EXTRA_QUERY_STRING_PARAMETER)\n     private String mExtraQueryStringParameter;\n \n+    /**\n+     * Extra options flags for the request.\n+     */\n+    @Nullable\n+    @SerializedName(SerializedNames.EXTRA_OPTIONS)\n+    private String mExtraOptions;\n+\n     /**\n      * Correlation id for the request, it should be a unique GUID.\n      */\n@@ -203,327 +218,4 @@\n     @SerializedName(SerializedNames.POWER_OPT_CHECK_ENABLED)\n     private boolean mPowerOptCheckEnabled;\n \n-    private BrokerRequest(BrokerRequest.Builder builder) {\n-        mAuthority = builder.mAuthority;\n-        mScope = builder.mScope;\n-        mRedirect = builder.mRedirect;\n-        mClientId = builder.mClientId;\n-        mHomeAccountId = builder.mHomeAccountId;\n-        mLocalAccountId = builder.mLocalAccountId;\n-        mUserName = builder.mUserName;\n-        mExtraQueryStringParameter = builder.mExtraQueryStringParameter;\n-        mCorrelationId = builder.mCorrelationId;\n-        mPrompt = builder.mPrompt;\n-        mClaims = builder.mClaims;\n-        mForceRefresh = builder.mForceRefresh;\n-        mApplicationName = builder.mApplicationName;\n-        mApplicationVersion = builder.mApplicationVersion;\n-        mMsalVersion = builder.mMsalVersion;\n-        mSdkType = builder.mSdkType;\n-        mEnvironment = builder.mEnvironment;\n-        mMultipleCloudsSupported = builder.mMultipleCloudsSupported;\n-        mAuthorizationAgent = builder.mAuthorizationAgent;\n-        mAuthenticationScheme = builder.mAuthenticationScheme;\n-        mPowerOptCheckEnabled = builder.mPowerOptCheckEnabled;\n-    }\n-\n-    public String getAuthority() {\n-        return mAuthority;\n-    }\n-\n-    public String getScope() {\n-        return mScope;\n-    }\n-\n-    public String getRedirect() {\n-        return mRedirect;\n-    }\n-\n-    public String getClientId() {\n-        return mClientId;\n-    }\n-\n-    public String getHomeAccountId() {\n-        return mHomeAccountId;\n-    }\n-\n-    public String getLocalAccountId() {\n-        return mLocalAccountId;\n-    }\n-\n-    public String getUserName() {\n-        return mUserName;\n-    }\n-\n-    public String getExtraQueryStringParameter() {\n-        return mExtraQueryStringParameter;\n-    }\n-\n-    public String getCorrelationId() {\n-        return mCorrelationId;\n-    }\n-\n-    public String getPrompt() {\n-        return mPrompt;\n-    }\n-\n-    public String getClaims() {\n-        return mClaims;\n-    }\n-\n-    public boolean getForceRefresh() {\n-        return mForceRefresh;\n-    }\n-\n-    public String getApplicationName() {\n-        return mApplicationName;\n-    }\n-\n-    public String getApplicationVersion() {\n-        return mApplicationVersion;\n-    }\n-\n-    public String getMsalVersion() {\n-        return mMsalVersion;\n-    }\n-\n-    public SdkType getSdkType() {\n-        return mSdkType;\n-    }\n-\n-    public String getEnvironment() {\n-        return mEnvironment;\n-    }\n-\n-    public boolean getMultipleCloudsSupported() {\n-        return mMultipleCloudsSupported;\n-    }\n-\n-    public String getAuthorizationAgent() {\n-        return mAuthorizationAgent;\n-    }\n-\n-    public AbstractAuthenticationScheme getAuthenticationScheme() {\n-        return mAuthenticationScheme;\n-    }\n-\n-    public boolean isPowerOptCheckEnabled(){\n-        return mPowerOptCheckEnabled;\n-    }\n-\n-    /**\n-     * Builder class for Broker Request.\n-     */\n-    public static class Builder {\n-\n-        private String mAuthority;\n-\n-        private String mScope;\n-\n-        private String mRedirect;\n-\n-        private String mClientId;\n-\n-        private String mUserName;\n-\n-        private String mHomeAccountId;\n-\n-        private String mLocalAccountId;\n-\n-        private String mExtraQueryStringParameter;\n-\n-        private String mCorrelationId;\n-\n-        private String mPrompt;\n-\n-        private String mClaims;\n-\n-        private boolean mForceRefresh;\n-\n-        private String mApplicationName;\n-\n-        private String mApplicationVersion;\n-\n-        private String mMsalVersion;\n-\n-        private SdkType mSdkType;\n-\n-        private String mEnvironment;\n-\n-        private boolean mMultipleCloudsSupported;\n-\n-        private String mAuthorizationAgent;\n-\n-        private AbstractAuthenticationScheme mAuthenticationScheme;\n-\n-        private boolean mPowerOptCheckEnabled;\n-\n-        /**\n-         * Authority for the request\n-         */\n-        public BrokerRequest.Builder authority(@NonNull final String authority) {\n-            this.mAuthority = authority;\n-            return this;\n-        }\n-\n-        /**\n-         * Scopes for the request. This is expected to be of the format\n-         * \"scope 1 scope2 scope3\" with space as a delimiter\n-         */\n-        public BrokerRequest.Builder scope(@NonNull final String scope) {\n-            this.mScope = scope;\n-            return this;\n-        }\n-\n-        /**\n-         * The redirect uri for the request.\n-         * // TODO : See if this is needed.\n-         */\n-        public BrokerRequest.Builder redirect(@NonNull final String redirect) {\n-            this.mRedirect = redirect;\n-            return this;\n-        }\n-\n-        /**\n-         * The client id of the application.\n-         */\n-        public BrokerRequest.Builder clientId(@NonNull final String clientId) {\n-            this.mClientId = clientId;\n-            return this;\n-        }\n-\n-        /**\n-         * The username for the request.\n-         */\n-        public BrokerRequest.Builder username(@Nullable final String userName) {\n-            this.mUserName = userName;\n-            return this;\n-        }\n-\n-        /**\n-         * Home account id of the user. Needs to be set for silent request\n-         */\n-        public BrokerRequest.Builder homeAccountId(@Nullable final String userId) {\n-            this.mHomeAccountId = userId;\n-            return this;\n-        }\n-\n-        /**\n-         * Local account id of the user. Needs to be set for silent request\n-         */\n-        public BrokerRequest.Builder localAccountId(@Nullable final String localAccountId) {\n-            this.mLocalAccountId = localAccountId;\n-            return this;\n-        }\n-\n-        /**\n-         * Extra query parameters set for the request.\n-         */\n-        public BrokerRequest.Builder extraQueryStringParameter(@Nullable final String extraQueryStringParameter) {\n-            this.mExtraQueryStringParameter = extraQueryStringParameter;\n-            return this;\n-        }\n-\n-        /**\n-         * Correlation id for the request, it should ba unique GUID.\n-         */\n-        public BrokerRequest.Builder correlationId(@Nullable final String correlationId) {\n-            this.mCorrelationId = correlationId;\n-            return this;\n-        }\n-\n-        /**\n-         * Prompt for the request.\n-         * {@link com.microsoft.identity.common.internal.providers.oauth2.OpenIdConnectPromptParameter}\n-         * <p>\n-         * Default value : {@link com.microsoft.identity.common.internal.providers.oauth2.OpenIdConnectPromptParameter#SELECT_ACCOUNT}\n-         */\n-        public BrokerRequest.Builder prompt(@Nullable final String prompt) {\n-            this.mPrompt = prompt;\n-            return this;\n-        }\n-\n-        /**\n-         * Claims for the request. This needs to be a valid json string.\n-         */\n-        public BrokerRequest.Builder claims(@Nullable final String claims) {\n-            this.mClaims = claims;\n-            return this;\n-        }\n-\n-        /**\n-         * Boolean if set, will try to refresh the token instead of using it from cache.\n-         */\n-        public BrokerRequest.Builder forceRefresh(final boolean forceRefresh) {\n-            this.mForceRefresh = forceRefresh;\n-            return this;\n-        }\n-\n-        /**\n-         * Application package name.\n-         */\n-        public BrokerRequest.Builder applicationName(@NonNull final String applicationName) {\n-            this.mApplicationName = applicationName;\n-            return this;\n-        }\n-\n-        /**\n-         * Application version.\n-         */\n-        public BrokerRequest.Builder applicationVersion(@NonNull final String applicationVersion) {\n-            this.mApplicationVersion = applicationVersion;\n-            return this;\n-        }\n-\n-        /**\n-         * Msal version.\n-         */\n-        @NonNull\n-        public BrokerRequest.Builder msalVersion(@NonNull final String version) {\n-            this.mMsalVersion = version;\n-            return this;\n-        }\n-\n-        /**\n-         * Sdk Type.\n-         */\n-        @NonNull\n-        public BrokerRequest.Builder sdkType(@NonNull final SdkType sdkType){\n-            this.mSdkType = sdkType;\n-            return this;\n-        }\n-\n-\n-        public BrokerRequest.Builder environment(@NonNull final String environment) {\n-            this.mEnvironment = environment;\n-            return this;\n-        }\n-\n-        public BrokerRequest.Builder multipleCloudsSupported(@NonNull final boolean multipleCloudsSupported) {\n-            this.mMultipleCloudsSupported = multipleCloudsSupported;\n-            return this;\n-        }\n-\n-        public BrokerRequest.Builder authorizationAgent(@NonNull final String authorizationAgent) {\n-            this.mAuthorizationAgent = authorizationAgent;\n-            return this;\n-        }\n-\n-        public BrokerRequest.Builder authenticationScheme(@NonNull final AbstractAuthenticationScheme authenticationScheme) {\n-            this.mAuthenticationScheme = authenticationScheme;\n-            return this;\n-        }\n-\n-        public BrokerRequest.Builder powerOptCheckEnabled(final boolean powerOptCheckEnabled) {\n-            this.mPowerOptCheckEnabled = powerOptCheckEnabled;\n-            return this;\n-        }\n-\n-        /**\n-         * Builds and returns a BrokerRequest\n-         */\n-        public BrokerRequest build() {\n-            return new BrokerRequest(this);\n-        }\n-    }\n }"
  },
  {
    "sha": "07b00c63667d61d489f651731538780f3bf280c6",
    "filename": "common/src/main/java/com/microsoft/identity/common/internal/commands/parameters/BrokerInteractiveTokenCommandParameters.java",
    "status": "modified",
    "additions": 10,
    "deletions": 2,
    "changes": 12,
    "blob_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/blob/a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3/common/src/main/java/com/microsoft/identity/common/internal/commands/parameters/BrokerInteractiveTokenCommandParameters.java",
    "raw_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/raw/a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3/common/src/main/java/com/microsoft/identity/common/internal/commands/parameters/BrokerInteractiveTokenCommandParameters.java",
    "contents_url": "https://api.github.com/repos/AzureAD/microsoft-authentication-library-common-for-android/contents/common/src/main/java/com/microsoft/identity/common/internal/commands/parameters/BrokerInteractiveTokenCommandParameters.java?ref=a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3",
    "patch": "@@ -28,7 +28,8 @@\n import com.microsoft.identity.common.internal.broker.BrokerValidator;\n import com.microsoft.identity.common.internal.cache.BrokerOAuth2TokenCache;\n import com.microsoft.identity.common.internal.request.BrokerRequestType;\n-import com.microsoft.identity.common.internal.request.SdkType;\n+\n+import java.util.Map;\n \n import lombok.EqualsAndHashCode;\n import lombok.Getter;\n@@ -37,7 +38,8 @@\n @Getter\n @SuperBuilder(toBuilder = true)\n @EqualsAndHashCode(callSuper = true)\n-public class BrokerInteractiveTokenCommandParameters extends InteractiveTokenCommandParameters {\n+public class BrokerInteractiveTokenCommandParameters extends InteractiveTokenCommandParameters\n+          implements IHasExtraParameters {\n \n     private final String callerPackageName;\n     private final int callerUid;\n@@ -47,6 +49,7 @@\n     private final boolean shouldResolveInterrupt;\n     private final BrokerRequestType requestType;\n     private final String negotiatedBrokerProtocolVersion;\n+    private final Iterable<Map.Entry<String, String>> extraParameters;\n \n     private final String enrollmentId;\n \n@@ -115,4 +118,9 @@ public void validate() throws ArgumentException {\n             }\n         }\n     }\n+\n+    @Override\n+    public void setExtraParameters(Iterable<Map.Entry<String, String>> params) {\n+        throw new UnsupportedOperationException();\n+    }\n }"
  },
  {
    "sha": "f50a09ab0f5e461f9b0efbbef1efe1df75bc1042",
    "filename": "common/src/main/java/com/microsoft/identity/common/internal/commands/parameters/IHasExtraParameters.java",
    "status": "added",
    "additions": 51,
    "deletions": 0,
    "changes": 51,
    "blob_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/blob/a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3/common/src/main/java/com/microsoft/identity/common/internal/commands/parameters/IHasExtraParameters.java",
    "raw_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/raw/a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3/common/src/main/java/com/microsoft/identity/common/internal/commands/parameters/IHasExtraParameters.java",
    "contents_url": "https://api.github.com/repos/AzureAD/microsoft-authentication-library-common-for-android/contents/common/src/main/java/com/microsoft/identity/common/internal/commands/parameters/IHasExtraParameters.java?ref=a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3",
    "patch": "@@ -0,0 +1,51 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.common.internal.commands.parameters;\n+\n+import androidx.annotation.Nullable;\n+\n+import java.util.List;\n+import java.util.Map;\n+\n+/**\n+ * Interface indicating that a class carries a set of string/string parameters.\n+ */\n+public interface IHasExtraParameters {\n+    /**\n+     * Get the {@link Iterable} of pairs of String, String parameters.\n+     * @return a list of pairs of String, String parameters - this may be null.  There are no guarantees\n+     * made with regards to the mutability of this structure, but it <strong>should not</strong> be\n+     * mutated by the caller, and attempts to do so <strong>may</strong>may throw\n+     * {@link UnsupportedOperationException} or result in undefined behavior.\n+     */\n+    @Nullable Iterable<Map.Entry<String, String>> getExtraParameters();\n+    \n+    /**\n+     * Set the {@link Iterable} of String, String extra parameters.\n+     * @param params a list of pairs of String, String parameters.  May be null.  There are no\n+     *               guarantees made as to the mutability of this structure, but it\n+     *               <strong>should not</strong> be altered by the caller, and attempts to do so\n+     *               <strong>may</strong> exhibit undefined behavior.\n+     */\n+    void setExtraParameters(Iterable<Map.Entry<String, String>> params);\n+}"
  },
  {
    "sha": "c7998a2ad02cc9d16ee0d61a0651040e8af0486c",
    "filename": "common/src/main/java/com/microsoft/identity/common/internal/commands/parameters/TokenCommandParameters.java",
    "status": "modified",
    "additions": 5,
    "deletions": 0,
    "changes": 5,
    "blob_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/blob/a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3/common/src/main/java/com/microsoft/identity/common/internal/commands/parameters/TokenCommandParameters.java",
    "raw_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/raw/a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3/common/src/main/java/com/microsoft/identity/common/internal/commands/parameters/TokenCommandParameters.java",
    "contents_url": "https://api.github.com/repos/AzureAD/microsoft-authentication-library-common-for-android/contents/common/src/main/java/com/microsoft/identity/common/internal/commands/parameters/TokenCommandParameters.java?ref=a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3",
    "patch": "@@ -22,6 +22,8 @@\n // THE SOFTWARE.\n package com.microsoft.identity.common.internal.commands.parameters;\n \n+import android.util.Pair;\n+\n import com.google.gson.annotations.Expose;\n import com.microsoft.identity.common.exception.ArgumentException;\n import com.microsoft.identity.common.internal.authorities.Authority;\n@@ -31,6 +33,7 @@\n \n import java.util.Arrays;\n import java.util.HashSet;\n+import java.util.List;\n import java.util.Set;\n \n import lombok.EqualsAndHashCode;\n@@ -61,6 +64,8 @@\n     @Expose()\n     private final boolean forceRefresh;\n \n+    private final List<Pair<String, String>> extraOptions;\n+\n     public Set<String> getScopes() {\n         return this.scopes == null ? null : new HashSet<>(this.scopes);\n     }"
  },
  {
    "sha": "26e3681db2a665d8c75a82348566e71377844d9f",
    "filename": "common/src/main/java/com/microsoft/identity/common/internal/controllers/BaseController.java",
    "status": "modified",
    "additions": 9,
    "deletions": 1,
    "changes": 10,
    "blob_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/blob/a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3/common/src/main/java/com/microsoft/identity/common/internal/controllers/BaseController.java",
    "raw_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/raw/a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3/common/src/main/java/com/microsoft/identity/common/internal/controllers/BaseController.java",
    "contents_url": "https://api.github.com/repos/AzureAD/microsoft-authentication-library-common-for-android/contents/common/src/main/java/com/microsoft/identity/common/internal/controllers/BaseController.java?ref=a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3",
    "patch": "@@ -44,6 +44,7 @@\n import com.microsoft.identity.common.internal.cache.MsalOAuth2TokenCache;\n import com.microsoft.identity.common.internal.cache.SchemaUtil;\n import com.microsoft.identity.common.internal.commands.parameters.BrokerSilentTokenCommandParameters;\n+import com.microsoft.identity.common.internal.commands.parameters.IHasExtraParameters;\n import com.microsoft.identity.common.internal.commands.parameters.CommandParameters;\n import com.microsoft.identity.common.internal.commands.parameters.DeviceCodeFlowCommandParameters;\n import com.microsoft.identity.common.internal.commands.parameters.GenerateShrCommandParameters;\n@@ -90,7 +91,10 @@\n import java.util.UUID;\n import java.util.regex.Pattern;\n \n+import lombok.AllArgsConstructor;\n+import lombok.Builder;\n import lombok.EqualsAndHashCode;\n+import lombok.Getter;\n \n import static com.microsoft.identity.common.adal.internal.AuthenticationConstants.OAuth2ErrorCode.INVALID_GRANT;\n import static com.microsoft.identity.common.adal.internal.AuthenticationConstants.OAuth2SubErrorCode.BAD_TOKEN;\n@@ -260,7 +264,7 @@ protected AuthorizationRequest getAuthorizationRequest(@NonNull final OAuth2Stra\n         return builder.build();\n     }\n \n-    protected TokenResult performTokenRequest(@SuppressWarnings(WarningType.rawtype_warning) @NonNull final OAuth2Strategy strategy,\n+   protected TokenResult performTokenRequest(@SuppressWarnings(WarningType.rawtype_warning) @NonNull final OAuth2Strategy strategy,\n                                               @SuppressWarnings(WarningType.rawtype_warning) @NonNull final AuthorizationRequest request,\n                                               @NonNull final AuthorizationResponse response,\n                                               @NonNull final InteractiveTokenCommandParameters parameters)\n@@ -283,6 +287,10 @@ protected TokenResult performTokenRequest(@SuppressWarnings(WarningType.rawtype_\n             ((MicrosoftTokenRequest) tokenRequest).setClientAppVersion(parameters.getApplicationVersion());\n         }\n \n+        if (tokenRequest instanceof IHasExtraParameters && parameters instanceof IHasExtraParameters) {\n+            ((IHasExtraParameters) tokenRequest).setExtraParameters(((IHasExtraParameters)parameters).getExtraParameters());\n+        }\n+\n         logExposedFieldsOfObject(TAG + methodName, tokenRequest);\n \n         // Suppressing unchecked warnings due to casting of type TokenRequest to GenericTokenRequest in argument of method call to requestToken"
  },
  {
    "sha": "840792c6c27d6e986b49c4f34e2f2f2d738e20ea",
    "filename": "common/src/main/java/com/microsoft/identity/common/internal/net/ObjectMapper.java",
    "status": "modified",
    "additions": 12,
    "deletions": 1,
    "changes": 13,
    "blob_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/blob/a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3/common/src/main/java/com/microsoft/identity/common/internal/net/ObjectMapper.java",
    "raw_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/raw/a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3/common/src/main/java/com/microsoft/identity/common/internal/net/ObjectMapper.java",
    "contents_url": "https://api.github.com/repos/AzureAD/microsoft-authentication-library-common-for-android/contents/common/src/main/java/com/microsoft/identity/common/internal/net/ObjectMapper.java?ref=a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3",
    "patch": "@@ -26,6 +26,7 @@\n import com.google.gson.GsonBuilder;\n import com.google.gson.reflect.TypeToken;\n import com.microsoft.identity.common.WarningType;\n+import com.microsoft.identity.common.internal.commands.parameters.IHasExtraParameters;\n import com.microsoft.identity.common.internal.logging.Logger;\n import com.microsoft.identity.common.internal.util.StringUtil;\n \n@@ -100,8 +101,18 @@ public static String serializeObjectToFormUrlEncoded(Object object) throws Unsup\n         Type stringMap = new TypeToken<TreeMap<String, String>>() {\n         }.getType();\n         TreeMap<String, String> fields = new Gson().fromJson(json, stringMap);\n+        if (object instanceof IHasExtraParameters) {\n+            final IHasExtraParameters params = (IHasExtraParameters) object;\n+            if (params.getExtraParameters() != null) {\n+                for (final Map.Entry<String, String> e : params.getExtraParameters()) {\n+                    if (e.getKey() != null) {\n+                        fields.put(e.getKey(), e.getValue());\n+                    }\n+                }\n+            }\n+        }\n \n-        StringBuilder builder = new StringBuilder();\n+        final StringBuilder builder = new StringBuilder();\n \n         Iterator<TreeMap.Entry<String, String>> iterator = fields.entrySet().iterator();\n "
  },
  {
    "sha": "103f86556b79f4db49627aa91405ed01f353df1c",
    "filename": "common/src/main/java/com/microsoft/identity/common/internal/providers/microsoft/MicrosoftTokenRequest.java",
    "status": "modified",
    "additions": 15,
    "deletions": 1,
    "changes": 16,
    "blob_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/blob/a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3/common/src/main/java/com/microsoft/identity/common/internal/providers/microsoft/MicrosoftTokenRequest.java",
    "raw_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/raw/a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3/common/src/main/java/com/microsoft/identity/common/internal/providers/microsoft/MicrosoftTokenRequest.java",
    "contents_url": "https://api.github.com/repos/AzureAD/microsoft-authentication-library-common-for-android/contents/common/src/main/java/com/microsoft/identity/common/internal/providers/microsoft/MicrosoftTokenRequest.java?ref=a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3",
    "patch": "@@ -26,11 +26,13 @@\n \n import com.google.gson.annotations.Expose;\n import com.google.gson.annotations.SerializedName;\n+import com.microsoft.identity.common.internal.commands.parameters.IHasExtraParameters;\n import com.microsoft.identity.common.internal.providers.oauth2.TokenRequest;\n \n+import java.util.Map;\n import java.util.UUID;\n \n-public class MicrosoftTokenRequest extends TokenRequest {\n+public class MicrosoftTokenRequest extends TokenRequest implements IHasExtraParameters {\n \n     public static final String CODE_VERIFIER = \"code_verifier\";\n     public static final String CLIENT_INFO = \"client_info\";\n@@ -93,6 +95,18 @@ public MicrosoftTokenRequest() {\n \n     private String mTokenScope;\n \n+    private transient Iterable<Map.Entry<String, String>> mExtendedParameters;\n+\n+    @Override\n+    public Iterable<Map.Entry<String, String>> getExtraParameters() {\n+        return mExtendedParameters;\n+    }\n+\n+    @Override\n+    public void setExtraParameters(final Iterable<Map.Entry<String, String>> extraParams) {\n+        mExtendedParameters = extraParams;\n+    }\n+\n     // Sent as part of headers if available, so marking it transient.\n     private transient String mBrokerVersion;\n "
  },
  {
    "sha": "6fd251e627823cac455bf9b4fc4d32d5d106dce6",
    "filename": "common/src/main/java/com/microsoft/identity/common/internal/providers/microsoft/MicrosoftTokenResponse.java",
    "status": "modified",
    "additions": 19,
    "deletions": 0,
    "changes": 19,
    "blob_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/blob/a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3/common/src/main/java/com/microsoft/identity/common/internal/providers/microsoft/MicrosoftTokenResponse.java",
    "raw_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/raw/a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3/common/src/main/java/com/microsoft/identity/common/internal/providers/microsoft/MicrosoftTokenResponse.java",
    "contents_url": "https://api.github.com/repos/AzureAD/microsoft-authentication-library-common-for-android/contents/common/src/main/java/com/microsoft/identity/common/internal/providers/microsoft/MicrosoftTokenResponse.java?ref=a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3",
    "patch": "@@ -42,6 +42,25 @@\n      */\n     private Date mExtExpiresOn;\n \n+    /**\n+     * If this request includes an encrypted session key, return it here.\n+     */\n+    @SerializedName(\"session_key_jwe\")\n+    private String mSessionKeyJwe;\n+\n+    /**\n+     * Get the session key JWE associated with this result, or null if none.\n+     * @return the session key JWE associated with this result, or null if none.\n+     */\n+    public String getSessionKeyJwe() { return mSessionKeyJwe; }\n+\n+    /**\n+     * Set the session key JWE associated with this result, or null if none.\n+     * @param sesionKey the session key JWE associated with this result, or null if none.\n+     * @return\n+     */\n+    public String setSessionKeyJwe(String sesionKey) { return mSessionKeyJwe; }\n+\n     /**\n      * Information to uniquely identify the tenant and the user _within_ that tenant.\n      */"
  },
  {
    "sha": "fdac5a1b32e2f316c1dfa5a7a899af05bb19eb02",
    "filename": "common/src/main/java/com/microsoft/identity/common/internal/providers/oauth2/OAuth2Strategy.java",
    "status": "modified",
    "additions": 2,
    "deletions": 1,
    "changes": 3,
    "blob_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/blob/a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3/common/src/main/java/com/microsoft/identity/common/internal/providers/oauth2/OAuth2Strategy.java",
    "raw_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/raw/a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3/common/src/main/java/com/microsoft/identity/common/internal/providers/oauth2/OAuth2Strategy.java",
    "contents_url": "https://api.github.com/repos/AzureAD/microsoft-authentication-library-common-for-android/contents/common/src/main/java/com/microsoft/identity/common/internal/providers/oauth2/OAuth2Strategy.java?ref=a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3",
    "patch": "@@ -210,8 +210,9 @@ protected HttpResponse performTokenRequest(final GenericTokenRequest request) th\n             );\n         }\n \n+        final URL requestUrl = new URL(mTokenEndpoint);\n         final HttpResponse response = httpClient.post(\n-                new URL(mTokenEndpoint),\n+                requestUrl,\n                 headers,\n                 requestBody.getBytes(ObjectMapper.ENCODING_SCHEME)\n         );"
  },
  {
    "sha": "bf23a24942bf8d9c2191312586b487fdf9704fff",
    "filename": "common/src/main/java/com/microsoft/identity/common/internal/request/MsalBrokerRequestAdapter.java",
    "status": "modified",
    "additions": 28,
    "deletions": 25,
    "changes": 53,
    "blob_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/blob/a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3/common/src/main/java/com/microsoft/identity/common/internal/request/MsalBrokerRequestAdapter.java",
    "raw_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/raw/a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3/common/src/main/java/com/microsoft/identity/common/internal/request/MsalBrokerRequestAdapter.java",
    "contents_url": "https://api.github.com/repos/AzureAD/microsoft-authentication-library-common-for-android/contents/common/src/main/java/com/microsoft/identity/common/internal/request/MsalBrokerRequestAdapter.java?ref=a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3",
    "patch": "@@ -94,30 +94,30 @@\n \n     private static final String TAG = MsalBrokerRequestAdapter.class.getName();\n \n-    public static Gson sRequestAdapterGsonInstance;\n-\n-    static {\n-        sRequestAdapterGsonInstance = new GsonBuilder()\n-                .registerTypeAdapter(\n-                        AbstractAuthenticationScheme.class,\n-                        new AuthenticationSchemeTypeAdapter()\n-                ).create();\n-    }\n+    // TODO: provide this from a factory\n+    public static Gson sRequestAdapterGsonInstance = new GsonBuilder()\n+                      .registerTypeAdapter(\n+                            AbstractAuthenticationScheme.class,\n+                            new AuthenticationSchemeTypeAdapter()\n+                      ).create();\n \n     @Override\n     public BrokerRequest brokerRequestFromAcquireTokenParameters(@NonNull final InteractiveTokenCommandParameters parameters) {\n         Logger.info(TAG, \"Constructing result bundle from AcquireTokenOperationParameters.\");\n \n-        final BrokerRequest brokerRequest = new BrokerRequest.Builder()\n+        final String extraQueryStringParameter = parameters.getExtraQueryStringParameters() != null ?\n+                QueryParamsAdapter._toJson(parameters.getExtraQueryStringParameters())\n+                : null;\n+        final String extraOptions = parameters.getExtraOptions() != null ?\n+                QueryParamsAdapter._toJson(parameters.getExtraOptions()) : null;\n+        final BrokerRequest brokerRequest = BrokerRequest.builder()\n                 .authority(parameters.getAuthority().getAuthorityURL().toString())\n                 .scope(TextUtils.join(\" \", parameters.getScopes()))\n                 .redirect(getRedirectUri(parameters))\n                 .clientId(parameters.getClientId())\n-                .username(parameters.getLoginHint())\n-                .extraQueryStringParameter(\n-                        parameters.getExtraQueryStringParameters() != null ?\n-                                QueryParamsAdapter._toJson(parameters.getExtraQueryStringParameters())\n-                                : null)\n+                .userName(parameters.getLoginHint())\n+                .extraQueryStringParameter(extraQueryStringParameter)\n+                .extraOptions(extraOptions)\n                 .prompt((OpenIdConnectPromptParameter.UNSET.name().equals(parameters.getPrompt().name())) ? null : parameters.getPrompt().name())\n                 .claims(parameters.getClaimsRequestJson())\n                 .forceRefresh(parameters.isForceRefresh())\n@@ -143,15 +143,18 @@ public BrokerRequest brokerRequestFromAcquireTokenParameters(@NonNull final Inte\n     public BrokerRequest brokerRequestFromSilentOperationParameters(@NonNull final SilentTokenCommandParameters parameters) {\n \n         Logger.info(TAG, \"Constructing result bundle from AcquireTokenSilentOperationParameters.\");\n+        final String extraOptions = parameters.getExtraOptions() != null ?\n+                QueryParamsAdapter._toJson(parameters.getExtraOptions()) : null;\n \n-        final BrokerRequest brokerRequest = new BrokerRequest.Builder()\n+        final BrokerRequest brokerRequest = BrokerRequest.builder()\n                 .authority(parameters.getAuthority().getAuthorityURL().toString())\n                 .scope(TextUtils.join(\" \", parameters.getScopes()))\n                 .redirect(getRedirectUri(parameters))\n+                .extraOptions(extraOptions)\n                 .clientId(parameters.getClientId())\n                 .homeAccountId(parameters.getAccount().getHomeAccountId())\n                 .localAccountId(parameters.getAccount().getLocalAccountId())\n-                .username(parameters.getAccount().getUsername())\n+                .userName(parameters.getAccount().getUsername())\n                 .claims(parameters.getClaimsRequestJson())\n                 .forceRefresh(parameters.isForceRefresh())\n                 .correlationId(parameters.getCorrelationId())\n@@ -206,19 +209,16 @@ public BrokerInteractiveTokenCommandParameters brokerInteractiveParametersFromAc\n \n         int callingAppUid = intent.getIntExtra(CALLER_INFO_UID, 0);\n \n-        List<Pair<String, String>> extraQP = new ArrayList<>();\n-\n-        if (!TextUtils.isEmpty(brokerRequest.getExtraQueryStringParameter())) {\n-            extraQP = QueryParamsAdapter._fromJson(brokerRequest.getExtraQueryStringParameter());\n-        }\n+        List<Pair<String, String>> extraQP = QueryParamsAdapter._fromJson(brokerRequest.getExtraQueryStringParameter());\n+        List<Pair<String, String>> extraOptions = QueryParamsAdapter._fromJson(brokerRequest.getExtraOptions());;\n \n         final AzureActiveDirectoryAuthority authority = AdalBrokerRequestAdapter.getRequestAuthorityWithExtraQP(\n                 brokerRequest.getAuthority(),\n                 extraQP\n         );\n \n         if (authority != null) {\n-            authority.setMultipleCloudsSupported(brokerRequest.getMultipleCloudsSupported());\n+            authority.setMultipleCloudsSupported(brokerRequest.isMultipleCloudsSupported());\n         }\n \n         String correlationIdString = brokerRequest.getCorrelationId();\n@@ -245,6 +245,7 @@ public BrokerInteractiveTokenCommandParameters brokerInteractiveParametersFromAc\n                 .callerAppVersion(brokerRequest.getApplicationVersion())\n                 .extraQueryStringParameters(extraQP)\n                 .authority(authority)\n+                .extraOptions(extraOptions)\n                 .scopes(getScopesAsSet(brokerRequest.getScope()))\n                 .clientId(brokerRequest.getClientId())\n                 .redirectUri(brokerRequest.getRedirect())\n@@ -309,7 +310,7 @@ public BrokerSilentTokenCommandParameters brokerSilentParametersFromBundle(\n \n         if (authority instanceof AzureActiveDirectoryAuthority) {\n             ((AzureActiveDirectoryAuthority) authority).setMultipleCloudsSupported(\n-                    brokerRequest.getMultipleCloudsSupported()\n+                    brokerRequest.isMultipleCloudsSupported()\n             );\n         }\n \n@@ -322,6 +323,7 @@ public BrokerSilentTokenCommandParameters brokerSilentParametersFromBundle(\n         }\n \n         final String negotiatedBrokerProtocolVersion = bundle.getString(NEGOTIATED_BP_VERSION_KEY);\n+        List<Pair<String, String>> extraOptions = QueryParamsAdapter._fromJson(brokerRequest.getExtraOptions());\n \n         final BrokerSilentTokenCommandParameters commandParameters = BrokerSilentTokenCommandParameters\n                 .builder()\n@@ -339,8 +341,9 @@ public BrokerSilentTokenCommandParameters brokerSilentParametersFromBundle(\n                 .correlationId(correlationIdString)\n                 .scopes(getScopesAsSet(brokerRequest.getScope()))\n                 .redirectUri(brokerRequest.getRedirect())\n+                .extraOptions(extraOptions)\n                 .clientId(brokerRequest.getClientId())\n-                .forceRefresh(brokerRequest.getForceRefresh())\n+                .forceRefresh(brokerRequest.isForceRefresh())\n                 .claimsRequestJson(brokerRequest.getClaims())\n                 .loginHint(brokerRequest.getUserName())\n                 .homeAccountId(brokerRequest.getHomeAccountId())"
  },
  {
    "sha": "f8036b496546741c4071155163d086927356bcef",
    "filename": "common/src/main/java/com/microsoft/identity/common/internal/ui/browser/BrowserAuthorizationStrategy.java",
    "status": "modified",
    "additions": 9,
    "deletions": 4,
    "changes": 13,
    "blob_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/blob/a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3/common/src/main/java/com/microsoft/identity/common/internal/ui/browser/BrowserAuthorizationStrategy.java",
    "raw_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/raw/a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3/common/src/main/java/com/microsoft/identity/common/internal/ui/browser/BrowserAuthorizationStrategy.java",
    "contents_url": "https://api.github.com/repos/AzureAD/microsoft-authentication-library-common-for-android/contents/common/src/main/java/com/microsoft/identity/common/internal/ui/browser/BrowserAuthorizationStrategy.java?ref=a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3",
    "patch": "@@ -81,10 +81,11 @@ public void setBrowserSafeList(final List<BrowserDescriptor> browserSafeList) {\n             throws ClientException {\n         final String methodName = \":requestAuthorization\";\n         checkNotDisposed();\n+        final Context context = getApplicationContext();\n         mOAuth2Strategy = oAuth2Strategy;\n         mAuthorizationRequest = authorizationRequest;\n         mAuthorizationResultFuture = new ResultFuture<>();\n-        final Browser browser = BrowserSelector.select(getApplicationContext(), mBrowserSafeList);\n+        final Browser browser = BrowserSelector.select(context, mBrowserSafeList);\n \n         //ClientException will be thrown if no browser found.\n         Intent authIntent;\n@@ -94,9 +95,13 @@ public void setBrowserSafeList(final List<BrowserDescriptor> browserSafeList) {\n                     \"CustomTabsService is supported.\"\n             );\n             //create customTabsIntent\n-            mCustomTabManager = new CustomTabsManager(getApplicationContext());\n-            mCustomTabManager.bind(browser.getPackageName());\n-            authIntent = mCustomTabManager.getCustomTabsIntent().intent;\n+            mCustomTabManager = new CustomTabsManager(context);\n+            if (!mCustomTabManager.bind(context, browser.getPackageName())) {\n+                //create browser auth intent\n+                authIntent = new Intent(Intent.ACTION_VIEW);\n+            } else {\n+                authIntent = mCustomTabManager.getCustomTabsIntent().intent;\n+            }\n         } else {\n             Logger.warn(\n                     TAG + methodName,"
  },
  {
    "sha": "0da0a240d00e5756737d7a07023b24cf0a34dd69",
    "filename": "common/src/main/java/com/microsoft/identity/common/internal/ui/browser/CustomTabsManager.java",
    "status": "modified",
    "additions": 9,
    "deletions": 4,
    "changes": 13,
    "blob_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/blob/a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3/common/src/main/java/com/microsoft/identity/common/internal/ui/browser/CustomTabsManager.java",
    "raw_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/raw/a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3/common/src/main/java/com/microsoft/identity/common/internal/ui/browser/CustomTabsManager.java",
    "contents_url": "https://api.github.com/repos/AzureAD/microsoft-authentication-library-common-for-android/contents/common/src/main/java/com/microsoft/identity/common/internal/ui/browser/CustomTabsManager.java?ref=a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3",
    "patch": "@@ -99,18 +99,23 @@ public CustomTabsManager(@NonNull final Context context) {\n      * Method to bind Browser {@link androidx.browser.customtabs.CustomTabsService}.\n      * Waits until the {@link CustomTabsServiceConnection} is connected.\n      */\n-    public synchronized void bind(@NonNull String browserPackage) {\n+    public synchronized boolean bind(final @NonNull Context context, @NonNull String browserPackage) {\n         // Initiate the service-bind action\n-        if (mContextRef.get() == null\n-                || !CustomTabsClient.bindCustomTabsService(mContextRef.get(), browserPackage, mCustomTabsServiceConnection)) {\n-            Logger.info(TAG, \"Unable to bind custom tabs service\");\n+        if (context == null\n+                || !CustomTabsClient.bindCustomTabsService(context, browserPackage, mCustomTabsServiceConnection)) {\n+            Logger.info(TAG, \"Unable to bind custom tabs service \" +\n+                    ((context == null)\n+                            ? \"because the context was null\"\n+                            : \"because the bind call failed\") );\n             mClientLatch.countDown();\n+            return false;\n         }\n \n         // Create the Intent used to launch the Url\n         final CustomTabsIntent.Builder builder = new CustomTabsIntent.Builder(createSession(null));\n         mCustomTabsIntent = builder.setShowTitle(true).build();\n         mCustomTabsIntent.intent.setPackage(browserPackage);\n+        return true;\n     }\n \n     /**"
  },
  {
    "sha": "10828361df9a807e7df52d99fad15bc6d7a010a4",
    "filename": "common/src/main/java/com/microsoft/identity/common/internal/util/QueryParamsAdapter.java",
    "status": "modified",
    "additions": 4,
    "deletions": 0,
    "changes": 4,
    "blob_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/blob/a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3/common/src/main/java/com/microsoft/identity/common/internal/util/QueryParamsAdapter.java",
    "raw_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/raw/a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3/common/src/main/java/com/microsoft/identity/common/internal/util/QueryParamsAdapter.java",
    "contents_url": "https://api.github.com/repos/AzureAD/microsoft-authentication-library-common-for-android/contents/common/src/main/java/com/microsoft/identity/common/internal/util/QueryParamsAdapter.java?ref=a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3",
    "patch": "@@ -22,6 +22,7 @@\n // THE SOFTWARE.\n package com.microsoft.identity.common.internal.util;\n \n+import android.text.TextUtils;\n import android.util.Pair;\n \n import com.google.gson.Gson;\n@@ -84,6 +85,9 @@ public static String _toJson(final List<Pair<String, String>> extraQueryStringPa\n     }\n \n     public static List<Pair<String, String>> _fromJson(final String jsonString) {\n+        if (TextUtils.isEmpty(jsonString)) {\n+            return new ArrayList<>();\n+        }\n         final Type listType = new TypeToken<List<Pair<String, String>>>(){}.getType();\n         return mGson.fromJson(jsonString, listType);\n     }"
  },
  {
    "sha": "0bbe0f59910983517509b5dee9d02ad5bd0b7778",
    "filename": "common/src/main/java/com/microsoft/identity/common/internal/util/TriFunction.java",
    "status": "added",
    "additions": 35,
    "deletions": 0,
    "changes": 35,
    "blob_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/blob/a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3/common/src/main/java/com/microsoft/identity/common/internal/util/TriFunction.java",
    "raw_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/raw/a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3/common/src/main/java/com/microsoft/identity/common/internal/util/TriFunction.java",
    "contents_url": "https://api.github.com/repos/AzureAD/microsoft-authentication-library-common-for-android/contents/common/src/main/java/com/microsoft/identity/common/internal/util/TriFunction.java?ref=a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3",
    "patch": "@@ -0,0 +1,35 @@\n+//   Permission is hereby granted, free of charge, to any person obtaining a copy\n+//   of this software and associated documentation files(the \"Software\"), to deal\n+//   in the Software without restriction, including without limitation the rights\n+//   to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//   copies of the Software, and to permit persons to whom the Software is\n+//   furnished to do so, subject to the following conditions :\n+//\n+//   The above copyright notice and this permission notice shall be included in\n+//   all copies or substantial portions of the Software.\n+//\n+//   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//   THE SOFTWARE.\n+package com.microsoft.identity.common.internal.util;\n+\n+/**\n+ * This interface represents a 3-valued function.\n+ * @param <X> The type of param 1.\n+ * @param <Y> The type of param 2.\n+ * @param <Z> The type of param 3.\n+ * @param <U> The type of param 4.\n+ */\n+public interface TriFunction<X, Y, Z, U> {\n+    /**\n+     * @param x parameter 1.\n+     * @param y parameter 2.\n+     * @param z parameter 3.\n+     * @return a U.\n+     */\n+    U apply(X x, Y y, Z z);\n+}"
  },
  {
    "sha": "a0eaf880bc93d60cf2e7d975bf4ad6cfa3e7bd18",
    "filename": "common/versioning/version.properties",
    "status": "modified",
    "additions": 2,
    "deletions": 2,
    "changes": 4,
    "blob_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/blob/a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3/common/versioning/version.properties",
    "raw_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/raw/a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3/common/versioning/version.properties",
    "contents_url": "https://api.github.com/repos/AzureAD/microsoft-authentication-library-common-for-android/contents/common/versioning/version.properties?ref=a2dca95b4fcb60f1e04982c03a4c8ac7b5e3eba3",
    "patch": "@@ -1,4 +1,4 @@\n-#Wed Mar 17 19:49:14 UTC 2021\n+#Wed Mar 17 23:49:42 UTC 2021\n versionName=3.1.2\n versionCode=1\n-latestPatchVersion=160\n+latestPatchVersion=161"
  }
]
