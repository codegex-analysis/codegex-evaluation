[
  {
    "sha": "9a826a9a2e10ef1d6efcefb9e3afcff60532afd6",
    "filename": "azure-pipelines/authclient/azure-pipelines.yml",
    "status": "renamed",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/AzureAD/azure-activedirectory-library-for-android/blob/8acf69a387f3df0b83f02ffcbd2bbd4f45324072/azure-pipelines/authclient/azure-pipelines.yml",
    "raw_url": "https://github.com/AzureAD/azure-activedirectory-library-for-android/raw/8acf69a387f3df0b83f02ffcbd2bbd4f45324072/azure-pipelines/authclient/azure-pipelines.yml",
    "contents_url": "https://api.github.com/repos/AzureAD/azure-activedirectory-library-for-android/contents/azure-pipelines/authclient/azure-pipelines.yml?ref=8acf69a387f3df0b83f02ffcbd2bbd4f45324072",
    "patch": "@@ -20,7 +20,7 @@ steps:\n     echo =============================================\n     echo Run unit and instrumented inside docker container\n     echo =============================================\n-    docker run --privileged --cpus=\"3\" --memory=\"12g\" -v \"$PWD\":/home/gradle/ -w /home/gradle/ authclient.azurecr.io/samples/dbi-instrumented-api30 sh scripts/run-instrumented-tests.sh\n+    docker run --privileged --cpus=\"3\" --memory=\"12g\" -v \"$PWD\":/home/gradle/ -w /home/gradle/ authclient.azurecr.io/samples/dbi-instrumented-api30 sh ../../scripts/run-instrumented-tests.sh\n   displayName: 'Build and test inside docker container'\n - script: |\n     echo =============================================",
    "previous_filename": "azure-pipelines.yml"
  },
  {
    "sha": "3f9f811d8c8ee87a3a9935248ad4de717bad7e59",
    "filename": "azure-pipelines/maven-release/adal-maven-release.yml",
    "status": "added",
    "additions": 55,
    "deletions": 0,
    "changes": 55,
    "blob_url": "https://github.com/AzureAD/azure-activedirectory-library-for-android/blob/8acf69a387f3df0b83f02ffcbd2bbd4f45324072/azure-pipelines/maven-release/adal-maven-release.yml",
    "raw_url": "https://github.com/AzureAD/azure-activedirectory-library-for-android/raw/8acf69a387f3df0b83f02ffcbd2bbd4f45324072/azure-pipelines/maven-release/adal-maven-release.yml",
    "contents_url": "https://api.github.com/repos/AzureAD/azure-activedirectory-library-for-android/contents/azure-pipelines/maven-release/adal-maven-release.yml?ref=8acf69a387f3df0b83f02ffcbd2bbd4f45324072",
    "patch": "@@ -0,0 +1,55 @@\n+# 'Allow scripts to access the OAuth token' was selected in pipeline.  Add the following YAML to any steps requiring access:\n+#       env:\n+#           MY_ACCESS_TOKEN: $(System.AccessToken)\n+# Variable 'AdalVersion' was defined in the Variables tab\n+# Variable 'android:serverUrl' was defined in the Variables tab\n+# Variable 'test_repo_branch' was defined in the Variables tab\n+# Variable 'test_repo_dir' was defined in the Variables tab\n+name: $(date:yyyyMMdd)$(rev:.r)\n+resources:\n+  repositories:\n+  - repository: self\n+    type: git\n+    ref: master\n+  - repository: common\n+    type: github\n+    name: AzureAD/microsoft-authentication-library-common-for-android\n+    ref: dev\n+    endpoint: ANDROID_GITHUB\n+jobs:\n+- job: Phase_1\n+  displayName: SDL and Maven Build\n+  cancelTimeoutInMinutes: 1\n+  pool:\n+    name: Hosted Windows 2019 with VS2019\n+  steps:\n+  - checkout: self\n+    clean: true\n+    submodules: true\n+    persistCredentials: True\n+  - template: azure-pipelines/templates/steps/credscan-policheck.yml@common\n+    parameters:\n+      policheckCmdLineArgsDir: adal\n+  - template: azure-pipelines/templates/steps/maven-release/generate-release-artifacts.yml@common\n+    parameters:\n+      gradleAssembleReleaseTask: adal:clean adal:assembleDist adal:javadocJar\n+      gradleGeneratePomFiletask: adal:generatePomFileForAdalPublication\n+      aarSourceFolder: C:\\Temp\\s\\adal\\outputs\\aar\\\n+      jarSourceFolder: C:\\Temp\\s\\adal\\outputs\\jar\\\n+      pomSourceFolder: C:\\Temp\\s\\adal\\publications\\adal\\\n+- job: Phase_2\n+  displayName: GPG Signing\n+  cancelTimeoutInMinutes: 1\n+  dependsOn: Phase_1\n+  pool:\n+    name: Hosted Ubuntu 1604\n+  steps:\n+  - checkout: self\n+    clean: true\n+    submodules: true\n+  - template: azure-pipelines/templates/steps/maven-release/gpg-signing.yml@common\n+    parameters:\n+      gpgSigning: \"#!/bin/bash\\n\\nsudo apt-get update\\nsudo apt-get install -y gnupg2\\n\\nGPG_TTY=$(tty)\\nexport GPG_TTY\\n\\ngpg --import $(public.secureFilePath)\\ngpg --import $(private.secureFilePath)\\n\\n\\n\\ngpg --batch --no-use-agent --passphrase-file $(passphrase.secureFilePath) --armor --detach-sign $(System.ArtifactsDirectory)/build_outputs/adal-$(AdalVersion).aar\\n\\ngpg --batch --no-use-agent --passphrase-file $(passphrase.secureFilePath) --armor --detach-sign $(System.ArtifactsDirectory)/build_outputs/adal-$(AdalVersion)-javadoc.jar\\n\\ngpg --batch --no-use-agent --passphrase-file $(passphrase.secureFilePath) --armor --detach-sign $(System.ArtifactsDirectory)/build_outputs/adal-$(AdalVersion)-sources.jar\\n\\ngpg --batch --no-use-agent --passphrase-file $(passphrase.secureFilePath) --armor --detach-sign $(System.ArtifactsDirectory)/build_outputs/pom-default.xml\\n\\ncd $(System.ArtifactsDirectory)/build_outputs/ &&\\nfor file in *; do\\n if [[ -f \\\"$file\\\" ]]; then\\n     md5sum -- \\\"$file\\\" > \\\"${file}.md5\\\"\\n fi \\n if [[ -f \\\"$file\\\" ]]; then\\n     shasum -- \\\"$file\\\" > \\\"${file}.sha1\\\"\\n fi\\ndone\\n\\nmkdir  -p $(System.ArtifactsDirectory)/adal/$(AdalVersion)\\n\\nmv $(System.ArtifactsDirectory)/build_outputs/*.jar $(System.ArtifactsDirectory)/adal/$(AdalVersion)\\nmv $(System.ArtifactsDirectory)/build_outputs/*.asc $(System.ArtifactsDirectory)/adal/$(AdalVersion)\\nmv $(System.ArtifactsDirectory)/build_outputs/*.aar $(System.ArtifactsDirectory)/adal/$(AdalVersion)\\nmv $(System.ArtifactsDirectory)/build_outputs/*.xml $(System.ArtifactsDirectory)/adal/$(AdalVersion)\\nmv $(System.ArtifactsDirectory)/build_outputs/*.md5 $(System.ArtifactsDirectory)/adal/$(AdalVersion)\\nmv $(System.ArtifactsDirectory)/build_outputs/*.sha1 $(System.ArtifactsDirectory)/adal/$(AdalVersion)\\n\\n\\n\\n\"\n+  - template: azure-pipelines/templates/steps/maven-release/upload-to-nexus-sonatype.yml@common\n+    parameters:\n+      project: adal"
  },
  {
    "sha": "2edf2c5372e8761ad0653717163f90591732ba15",
    "filename": "azure-pipelines/nightly-snapshot-releases/nightly-adal-unity-vsts-release.yml",
    "status": "added",
    "additions": 79,
    "deletions": 0,
    "changes": 79,
    "blob_url": "https://github.com/AzureAD/azure-activedirectory-library-for-android/blob/8acf69a387f3df0b83f02ffcbd2bbd4f45324072/azure-pipelines/nightly-snapshot-releases/nightly-adal-unity-vsts-release.yml",
    "raw_url": "https://github.com/AzureAD/azure-activedirectory-library-for-android/raw/8acf69a387f3df0b83f02ffcbd2bbd4f45324072/azure-pipelines/nightly-snapshot-releases/nightly-adal-unity-vsts-release.yml",
    "contents_url": "https://api.github.com/repos/AzureAD/azure-activedirectory-library-for-android/contents/azure-pipelines/nightly-snapshot-releases/nightly-adal-unity-vsts-release.yml?ref=8acf69a387f3df0b83f02ffcbd2bbd4f45324072",
    "patch": "@@ -0,0 +1,79 @@\n+# 'Allow scripts to access the OAuth token' was selected in pipeline.  Add the following YAML to any steps requiring access:\n+#       env:\n+#           MY_ACCESS_TOKEN: $(System.AccessToken)\n+# Variable 'android:serverUrl' was defined in the Variables tab\n+# Variable 'ENV_VSTS_MVN_ANDROIDADALUNITY_USERNAME' was defined in the Variables tab\n+# Variable 'test_repo_branch' was defined in the Variables tab\n+# Variable 'test_repo_dir' was defined in the Variables tab\n+# Cron Schedules have been converted using UTC Time Zone and may need to be updated for your location\n+schedules:\n+- cron: 30 21 * * *\n+  branches:\n+    include:\n+    - dev\n+  always: true\n+name: $(date:yyyyMMdd)$(rev:.r)\n+resources:\n+  repositories:\n+  - repository: self\n+    type: git\n+    ref: dev\n+  - repository: common\n+    type: github\n+    name: AzureAD/microsoft-authentication-library-common-for-android\n+    ref: dev\n+    endpoint: ANDROID_GITHUB\n+jobs:\n+- job: Phase_1\n+  displayName: Phase 1\n+  cancelTimeoutInMinutes: 1\n+  pool:\n+    name: Hosted VS2017\n+  steps:\n+  - checkout: self\n+    clean: true\n+    submodules: recursive\n+    persistCredentials: True\n+  - template: azure-pipelines/templates/steps/credscan-policheck.yml@common\n+    parameters:\n+      policheckCmdLineArgsDir: adal\n+  - task: TSAUpload@1\n+    displayName: TSA upload\n+    enabled: False\n+    inputs:\n+      tsaVersion: TsaV2\n+      codebase: NewOrUpdate\n+      codeBaseName: ADALAndroid\n+      notificationAlias: androididentity@microsoft.com\n+      codeBaseAdmins: REDMOND\\androididentity\n+      instanceUrlForTsaV2: IDENTITYDIVISION\n+      projectNameIDENTITYDIVISION: IDDP\n+      areaPath: IDDP\\DevEx-Client-SDK\\Android\n+      iterationPath: IDDP\\FY19\\Q3\n+      uploadAPIScan: false\n+      uploadBinSkim: false\n+      uploadFortifySCA: false\n+      uploadFxCop: false\n+      uploadModernCop: false\n+      uploadPREfast: false\n+      uploadRoslyn: false\n+      uploadTSLint: false\n+  - task: Gradle@2\n+    displayName: Snapshot version update\n+    inputs:\n+      tasks: versionSnapshot\n+      publishJUnitResults: false\n+  - task: Gradle@1\n+    name: Gradle1\n+    displayName: Assemble Release\n+    inputs:\n+      tasks: 'clean build assembleRelease '\n+      publishJUnitResults: false\n+      jdkArchitecture: x86\n+      sqAnalysisBreakBuildIfQualityGateFailed: false\n+  - task: Gradle@2\n+    displayName: Publish to VSTS\n+    inputs:\n+      tasks: publish\n+      publishJUnitResults: false\n+..."
  },
  {
    "sha": "c6cbbc8dd510a782a55ec2e6385c40de0d70599c",
    "filename": "azure-pipelines/nightly-snapshot-releases/nightly-adal-vsts-release.yml",
    "status": "added",
    "additions": 80,
    "deletions": 0,
    "changes": 80,
    "blob_url": "https://github.com/AzureAD/azure-activedirectory-library-for-android/blob/8acf69a387f3df0b83f02ffcbd2bbd4f45324072/azure-pipelines/nightly-snapshot-releases/nightly-adal-vsts-release.yml",
    "raw_url": "https://github.com/AzureAD/azure-activedirectory-library-for-android/raw/8acf69a387f3df0b83f02ffcbd2bbd4f45324072/azure-pipelines/nightly-snapshot-releases/nightly-adal-vsts-release.yml",
    "contents_url": "https://api.github.com/repos/AzureAD/azure-activedirectory-library-for-android/contents/azure-pipelines/nightly-snapshot-releases/nightly-adal-vsts-release.yml?ref=8acf69a387f3df0b83f02ffcbd2bbd4f45324072",
    "patch": "@@ -0,0 +1,80 @@\n+# 'Allow scripts to access the OAuth token' was selected in pipeline.  Add the following YAML to any steps requiring access:\n+#       env:\n+#           MY_ACCESS_TOKEN: $(System.AccessToken)\n+# Variable 'android:serverUrl' was defined in the Variables tab\n+# Variable 'ENV_VSTS_MVN_ANDROIDADAL_USERNAME' was defined in the Variables tab\n+# Variable 'test_repo_branch' was defined in the Variables tab\n+# Variable 'test_repo_dir' was defined in the Variables tab\n+# Variable Group 'Android Common Variables' was defined in the Variables tab\n+# Cron Schedules have been converted using UTC Time Zone and may need to be updated for your location\n+schedules:\n+- cron: 30 22 * * *\n+  branches:\n+    include:\n+    - dev\n+  always: true\n+name: $(date:yyyyMMdd)$(rev:.r)\n+resources:\n+  repositories:\n+  - repository: self\n+    type: git\n+    ref: dev\n+  - repository: common\n+    type: github\n+    name: AzureAD/microsoft-authentication-library-common-for-android\n+    ref: dev\n+    endpoint: ANDROID_GITHUB\n+jobs:\n+- job: Phase_1\n+  displayName: Phase 1\n+  cancelTimeoutInMinutes: 1\n+  pool:\n+    name: Hosted Windows 2019 with VS2019\n+  steps:\n+  - checkout: self\n+    clean: true\n+    submodules: recursive\n+    persistCredentials: True\n+  - template: azure-pipelines/templates/steps/credscan-policheck.yml@common\n+    parameters:\n+      policheckCmdLineArgsDir: adal\n+  - task: CmdLine@1\n+    displayName: Set MVN Access Token in Environment\n+    inputs:\n+      filename: echo\n+      arguments: '##vso[task.setvariable variable=ENV_VSTS_MVN_ANDROIDADAL_ACCESSTOKEN]$(mvn_access_token)'\n+  - task: TSAUpload@1\n+    displayName: TSA upload\n+    enabled: False\n+    inputs:\n+      tsaStamp: Azure\n+      codeBaseName: ADALAndroid_master\n+      uploadAPIScan: false\n+      uploadBinSkim: false\n+      uploadFortifySCA: false\n+      uploadFxCop: false\n+      uploadModernCop: false\n+      uploadPREfast: false\n+      uploadRoslyn: false\n+      uploadTSLint: false\n+  - task: Gradle@2\n+    displayName: Snapshot version update\n+    inputs:\n+      tasks: versionSnapshot\n+      publishJUnitResults: false\n+  - task: Gradle@1\n+    name: Gradle1\n+    displayName: Assemble Release\n+    inputs:\n+      tasks: clean adal:assembleSnapshot\n+      publishJUnitResults: false\n+      jdkArchitecture: x86\n+      sqAnalysisBreakBuildIfQualityGateFailed: false\n+  - task: Gradle@2\n+    displayName: Publish to VSTS\n+    inputs:\n+      tasks: adal:publish\n+      publishJUnitResults: false\n+  - task: ComponentGovernanceComponentDetection@0\n+    displayName: Component Detection\n+..."
  },
  {
    "sha": "e9cd215a16bb7692bd5b1ae6c76e97bacbd95b4d",
    "filename": "azure-pipelines/testapps/adal-test-app.yml",
    "status": "added",
    "additions": 79,
    "deletions": 0,
    "changes": 79,
    "blob_url": "https://github.com/AzureAD/azure-activedirectory-library-for-android/blob/8acf69a387f3df0b83f02ffcbd2bbd4f45324072/azure-pipelines/testapps/adal-test-app.yml",
    "raw_url": "https://github.com/AzureAD/azure-activedirectory-library-for-android/raw/8acf69a387f3df0b83f02ffcbd2bbd4f45324072/azure-pipelines/testapps/adal-test-app.yml",
    "contents_url": "https://api.github.com/repos/AzureAD/azure-activedirectory-library-for-android/contents/azure-pipelines/testapps/adal-test-app.yml?ref=8acf69a387f3df0b83f02ffcbd2bbd4f45324072",
    "patch": "@@ -0,0 +1,79 @@\n+# 'Allow scripts to access the OAuth token' was selected in pipeline.  Add the following YAML to any steps requiring access:\n+#       env:\n+#           MY_ACCESS_TOKEN: $(System.AccessToken)\n+# Variable 'adal_version' was defined in the Variables tab\n+# Variable 'android:serverUrl' was defined in the Variables tab\n+# Variable 'common_version' was defined in the Variables tab\n+# Variable 'ENV_VSTS_MVN_ANDROIDADAL_USERNAME' was defined in the Variables tab\n+# Variable 'mvnAccessToken' was defined in the Variables tab\n+# Variable 'test_repo_branch' was defined in the Variables tab\n+# Variable 'test_repo_dir' was defined in the Variables tab\n+name: $(date:yyyyMMdd)$(rev:.r)\n+resources:\n+  repositories:\n+  - repository: self\n+    type: git\n+    ref: dev\n+  - repository: common\n+    type: github\n+    name: AzureAD/microsoft-authentication-library-common-for-android\n+    ref: dev\n+    endpoint: ANDROID_GITHUB\n+jobs:\n+- job: Phase_1\n+  displayName: Phase 1\n+  cancelTimeoutInMinutes: 1\n+  pool:\n+    name: Hosted Windows 2019 with VS2019\n+  steps:\n+  - checkout: self\n+    clean: true\n+    submodules: recursive\n+    persistCredentials: True\n+  - template: azure-pipelines/templates/steps/credscan-policheck.yml@common\n+    parameters:\n+      policheckCmdLineArgsDir: adal\n+  - task: CmdLine@1\n+    displayName: Set MVN Access Token in Environment\n+    inputs:\n+      filename: echo\n+      arguments: '##vso[task.setvariable variable=ENV_VSTS_MVN_ANDROIDADAL_ACCESSTOKEN]$(mvnAccessToken)'\n+  # Automation cert disabled\n+  #- template: azure-pipelines/templates/steps/automation-cert.yml@common\n+  #  parameters:\n+  #    envVstsMvnAt: ENV_VSTS_MVN_ANDROIDADAL_ACCESSTOKEN\n+  - task: PowerShell@2\n+    displayName: Generate Assemble Task for ADAL Test App\n+    inputs:\n+      targetType: inline\n+      script: >-\n+        $assembleTask = \"assembleDistRelease\"\n+\n+\n+        if ((\"$(adal_version)\" -ne \"\")) {\n+            $assembleTask = $assembleTask + \" -PdistAdalVersion=\" + \"$(adal_version)\"\n+        }\n+\n+\n+        if ((\"$(common_version)\" -ne \"\")) {\n+            $assembleTask = $assembleTask + \" -PdistCommonVersion=\" + \"$(common_version)\"\n+        }\n+\n+\n+        Write-Host \"##vso[task.setvariable variable=AssembleTask;]$assembleTask\"\n+  - task: Gradle@1\n+    name: Gradle1\n+    displayName: Assemble ADAL Test App\n+    inputs:\n+      tasks: userappwithbroker:clean userappwithbroker:$(assembleTask)\n+      publishJUnitResults: false\n+      jdkArchitecture: x86\n+      sqAnalysisBreakBuildIfQualityGateFailed: false\n+  - task: PublishPipelineArtifact@1\n+    displayName: Publish ADAL Test App APK\n+    inputs:\n+      PathtoPublish: c:/temp/adal/userappwithbroker/outputs/apk/dist/release/userappwithbroker-dist-release.apk\n+      ArtifactName: AdalTestAppDistRelease\n+  - task: ComponentGovernanceComponentDetection@0\n+    displayName: Component Detection\n+..."
  },
  {
    "sha": "b3da904bb7f7437cf0f968214fffc80d49f7127e",
    "filename": "azure-pipelines/ui-automation/adal-release-test-pipeline.yml",
    "status": "added",
    "additions": 103,
    "deletions": 0,
    "changes": 103,
    "blob_url": "https://github.com/AzureAD/azure-activedirectory-library-for-android/blob/8acf69a387f3df0b83f02ffcbd2bbd4f45324072/azure-pipelines/ui-automation/adal-release-test-pipeline.yml",
    "raw_url": "https://github.com/AzureAD/azure-activedirectory-library-for-android/raw/8acf69a387f3df0b83f02ffcbd2bbd4f45324072/azure-pipelines/ui-automation/adal-release-test-pipeline.yml",
    "contents_url": "https://api.github.com/repos/AzureAD/azure-activedirectory-library-for-android/contents/azure-pipelines/ui-automation/adal-release-test-pipeline.yml?ref=8acf69a387f3df0b83f02ffcbd2bbd4f45324072",
    "patch": "@@ -0,0 +1,103 @@\n+# 'Allow scripts to access the OAuth token' was selected in pipeline.  Add the following YAML to any steps requiring access:\n+#       env:\n+#           MY_ACCESS_TOKEN: $(System.AccessToken)\n+# Variable 'adal_version' was defined in the Variables tab\n+# Variable 'android:serverUrl' was defined in the Variables tab\n+# Variable 'common_version' was defined in the Variables tab\n+# Variable 'ENV_VSTS_MVN_ANDROIDADACCOUNTS_USERNAME' was defined in the Variables tab\n+# Variable 'gcloud_project_id' was defined in the Variables tab\n+# Variable 'mvnAccessToken' was defined in the Variables tab\n+# Variable 'test_repo_branch' was defined in the Variables tab\n+# Variable 'test_repo_dir' was defined in the Variables tab\n+name: $(date:yyyyMMdd)$(rev:.r)\n+resources:\n+  repositories:\n+  - repository: self\n+    type: git\n+    ref: dev\n+  - repository: common\n+    type: github\n+    name: AzureAD/microsoft-authentication-library-common-for-android\n+    ref: dev\n+    endpoint: ANDROID_GITHUB\n+jobs:\n+- job: Phase_1\n+  displayName: Phase 1\n+  cancelTimeoutInMinutes: 1\n+  pool:\n+    name: Hosted Windows 2019 with VS2019\n+  steps:\n+  - checkout: self\n+    clean: true\n+    submodules: recursive\n+    persistCredentials: True\n+  - template: azure-pipelines/templates/steps/credscan-policheck.yml@common\n+    parameters:\n+      policheckCmdLineArgsDir: adal\n+  - template: azure-pipelines/templates/steps/ui-automation/gcloud.yml@common\n+  - task: PowerShell@2\n+    displayName: Generate Assemble Task Name for Broker automation app\n+    inputs:\n+      targetType: inline\n+      script: >-\n+        $assembleTask = \"assembleDistAutoBrokerDebug\"\n+\n+\n+        if ((\"$(adal_version)\" -ne \"\")) {\n+            $assembleTask = $assembleTask + \" -PdistAdalVersion=\" + \"$(adal_version)\"\n+        }\n+\n+\n+        if ((\"$(common_version)\" -ne \"\")) {\n+            $assembleTask = $assembleTask + \" -PdistCommonVersion=\" + \"$(common_version)\"\n+        }\n+\n+\n+        Write-Host \"##vso[task.setvariable variable=AssembleTask;]$assembleTask\"\n+  - task: Gradle@1\n+    name: Gradle1\n+    displayName: Assemble ADAL Automation App\n+    inputs:\n+      tasks: clean brokerautomationapp:$(assembleTask) -PlabSecret=$(AndroidAutomationRunnerAppSecret) -PpreferPreInstalledApks -PbrokerSource=PlayStore\n+      publishJUnitResults: false\n+      jdkArchitecture: x86\n+      sqAnalysisBreakBuildIfQualityGateFailed: false\n+  - task: Gradle@1\n+    displayName: Assemble ADAL Automation App Instrumented Tests\n+    inputs:\n+      tasks: brokerautomationapp:assembleDistAutoBrokerDebugAndroidTest\n+      publishJUnitResults: false\n+      jdkArchitecture: x86\n+      sqAnalysisBreakBuildIfQualityGateFailed: false\n+  - task: PowerShell@2\n+    displayName: Run UI Automation on Firebase\n+    inputs:\n+      targetType: inline\n+      script: >-\n+        $baseApkPath = \"$(Build.SourcesDirectory)\\brokerautomationapp\\build\\outputs\\apk\"\n+\n+        $appApk = \"$baseApkPath\\distAutoBroker\\debug\\brokerautomationapp-dist-AutoBroker-debug.apk\"\n+\n+        $testApk = \"$baseApkPath\\androidTest\\distAutoBroker\\debug\\brokerautomationapp-dist-AutoBroker-debug-androidTest.apk\"\n+\n+        $appApk\n+\n+        $testApk\n+\n+        gcloud firebase test android run --type instrumentation --app $appApk --test $testApk --device model=flame,version=29 --timeout 45m --results-dir adal-release-$(Build.BuildId)-$(Build.BuildNumber) --directories-to-pull \"/sdcard\" --use-orchestrator  --environment-variables clearPackageData=true --test-targets \"notPackage com.microsoft.identity.client.broker.automationapp.testpass.basic\" --results-history-name \"ADAL Dist w/ PROD Brokers\"\n+  - task: PowerShell@2\n+    displayName: Download Test Result File\n+    condition: succeededOrFailed()\n+    inputs:\n+      targetType: inline\n+      script: gsutil cp gs://test-lab-ffz6x9pu2y62a-is0rq7a7rwdhi/adal-release-$(Build.BuildId)-$(Build.BuildNumber)/flame-29-en-portrait/test_result_1.xml $(Build.SourcesDirectory)\n+  - task: PublishTestResults@2\n+    displayName: Publish Test Results to ADO\n+    condition: succeededOrFailed()\n+    inputs:\n+      testResultsFiles: '*test_result*.xml'\n+      searchFolder: $(Build.SourcesDirectory)\n+      testRunTitle: 'MSAL UI Automation - Build # $(Build.BuildNumber)'\n+  - task: ComponentGovernanceComponentDetection@0\n+    displayName: Component Detection\n+..."
  },
  {
    "sha": "389822533908174303b75ffe2d90f8484f6602d5",
    "filename": "azure-pipelines/vsts-releases/adal-vsts-release.yml",
    "status": "added",
    "additions": 52,
    "deletions": 0,
    "changes": 52,
    "blob_url": "https://github.com/AzureAD/azure-activedirectory-library-for-android/blob/8acf69a387f3df0b83f02ffcbd2bbd4f45324072/azure-pipelines/vsts-releases/adal-vsts-release.yml",
    "raw_url": "https://github.com/AzureAD/azure-activedirectory-library-for-android/raw/8acf69a387f3df0b83f02ffcbd2bbd4f45324072/azure-pipelines/vsts-releases/adal-vsts-release.yml",
    "contents_url": "https://api.github.com/repos/AzureAD/azure-activedirectory-library-for-android/contents/azure-pipelines/vsts-releases/adal-vsts-release.yml?ref=8acf69a387f3df0b83f02ffcbd2bbd4f45324072",
    "patch": "@@ -0,0 +1,52 @@\n+# 'Allow scripts to access the OAuth token' was selected in pipeline.  Add the following YAML to any steps requiring access:\n+#       env:\n+#           MY_ACCESS_TOKEN: $(System.AccessToken)\n+# Variable 'android:serverUrl' was defined in the Variables tab\n+# Variable 'ENV_VSTS_MVN_ANDROIDADAL_USERNAME' was defined in the Variables tab\n+# Variable 'mvnAccessToken' was defined in the Variables tab\n+# Variable 'test_repo_branch' was defined in the Variables tab\n+# Variable 'test_repo_dir' was defined in the Variables tab\n+name: $(date:yyyyMMdd)$(rev:.r)\n+resources:\n+  repositories:\n+  - repository: self\n+    type: git\n+    ref: master\n+  - repository: common\n+    type: github\n+    name: AzureAD/microsoft-authentication-library-common-for-android\n+    ref: dev\n+    endpoint: ANDROID_GITHUB\n+jobs:\n+- job: Phase_1\n+  displayName: Phase 1\n+  cancelTimeoutInMinutes: 1\n+  pool:\n+    name: Hosted Windows 2019 with VS2019\n+  steps:\n+  - checkout: self\n+    clean: true\n+    submodules: recursive\n+    persistCredentials: True\n+  - task: CmdLine@1\n+    displayName: Set MVN Access Token in Environment\n+    inputs:\n+      filename: echo\n+      arguments: '##vso[task.setvariable variable=ENV_VSTS_MVN_ANDROIDADAL_ACCESSTOKEN]$(mvnAccessToken)'\n+  - template: azure-pipelines/templates/steps/credscan-policheck.yml@common\n+    parameters:\n+      policheckCmdLineArgsDir: adal\n+  - task: Gradle@1\n+    name: Gradle1\n+    displayName: Assemble Release\n+    inputs:\n+      tasks: clean adal:assembleDist\n+      publishJUnitResults: false\n+      jdkArchitecture: x86\n+      sqAnalysisBreakBuildIfQualityGateFailed: false\n+  - task: Gradle@2\n+    displayName: Publish to VSTS\n+    inputs:\n+      tasks: adal:publish\n+      publishJUnitResults: false\n+..."
  },
  {
    "sha": "0f3b04c519a3c6ae2a66971c72ebaa2d75c61626",
    "filename": "changelog.txt",
    "status": "modified",
    "additions": 1,
    "deletions": 0,
    "changes": 1,
    "blob_url": "https://github.com/AzureAD/azure-activedirectory-library-for-android/blob/8acf69a387f3df0b83f02ffcbd2bbd4f45324072/changelog.txt",
    "raw_url": "https://github.com/AzureAD/azure-activedirectory-library-for-android/raw/8acf69a387f3df0b83f02ffcbd2bbd4f45324072/changelog.txt",
    "contents_url": "https://api.github.com/repos/AzureAD/azure-activedirectory-library-for-android/contents/changelog.txt?ref=8acf69a387f3df0b83f02ffcbd2bbd4f45324072",
    "patch": "@@ -1,5 +1,6 @@\n v.Next\n ----------\n+- [MINOR] Converting Classic Azure DevOps Pipelines to YAML (#1589)\n - [PATCH] Adds API23 WebViewClient#onReceivedError overload (#1580)\n - [PATCH] Fixes for MFA setup using Authenticator app.(#1579)\n - [MINOR] Changes to Broker Validation to allow setting whether to trust debug brokers (prod brokers are always trusted)."
  }
]
