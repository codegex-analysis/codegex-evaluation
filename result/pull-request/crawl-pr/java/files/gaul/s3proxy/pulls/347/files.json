[
  {
    "sha": "b60d4ca8b84ea7631c3c6b5c7431bad8857bcf72",
    "filename": "pom.xml",
    "status": "modified",
    "additions": 453,
    "deletions": 440,
    "changes": 893,
    "blob_url": "https://github.com/gaul/s3proxy/blob/db6faf46ddaba74da62331a0a39d8f84a7e5ad19/pom.xml",
    "raw_url": "https://github.com/gaul/s3proxy/raw/db6faf46ddaba74da62331a0a39d8f84a7e5ad19/pom.xml",
    "contents_url": "https://api.github.com/repos/gaul/s3proxy/contents/pom.xml?ref=db6faf46ddaba74da62331a0a39d8f84a7e5ad19",
    "patch": "@@ -1,455 +1,468 @@\n-<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n-  <modelVersion>4.0.0</modelVersion>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+    <modelVersion>4.0.0</modelVersion>\n \n-  <parent>\n-    <groupId>org.sonatype.oss</groupId>\n-    <artifactId>oss-parent</artifactId>\n-    <version>7</version>\n-  </parent>\n+    <parent>\n+        <groupId>org.sonatype.oss</groupId>\n+        <artifactId>oss-parent</artifactId>\n+        <version>7</version>\n+    </parent>\n \n-  <groupId>org.gaul</groupId>\n-  <artifactId>s3proxy</artifactId>\n-  <version>1.8.1-SNAPSHOT</version>\n-  <packaging>jar</packaging>\n+    <groupId>org.gaul</groupId>\n+    <artifactId>s3proxy</artifactId>\n+    <version>1.8.1-SNAPSHOT</version>\n+    <packaging>jar</packaging>\n \n-  <name>S3Proxy</name>\n-  <url>https://github.com/gaul/s3proxy</url>\n-  <description>Access other storage backends via the S3 API</description>\n+    <name>S3Proxy</name>\n+    <url>https://github.com/gaul/s3proxy</url>\n+    <description>Access other storage backends via the S3 API</description>\n \n-  <licenses>\n-    <license>\n-      <name>The Apache Software License, Version 2.0</name>\n-      <url>http://www.apache.org/licenses/LICENSE-2.0.txt</url>\n-      <distribution>repo</distribution>\n-    </license>\n-  </licenses>\n+    <licenses>\n+        <license>\n+            <name>The Apache Software License, Version 2.0</name>\n+            <url>http://www.apache.org/licenses/LICENSE-2.0.txt</url>\n+            <distribution>repo</distribution>\n+        </license>\n+    </licenses>\n \n-  <scm>\n-    <connection>scm:git:git@github.com:gaul/s3proxy.git</connection>\n-    <developerConnection>scm:git:git@github.com:gaul/s3proxy.git</developerConnection>\n-    <url>git@github.com:gaul/s3proxy.git</url>\n-  </scm>\n+    <scm>\n+        <connection>scm:git:git@github.com:gaul/s3proxy.git</connection>\n+        <developerConnection>scm:git:git@github.com:gaul/s3proxy.git</developerConnection>\n+        <url>git@github.com:gaul/s3proxy.git</url>\n+    </scm>\n \n-  <developers>\n-    <developer>\n-      <name>Andrew Gaul</name>\n-      <id>gaul</id>\n-      <email>andrew@gaul.org</email>\n-    </developer>\n-  </developers>\n+    <developers>\n+        <developer>\n+            <name>Andrew Gaul</name>\n+            <id>gaul</id>\n+            <email>andrew@gaul.org</email>\n+        </developer>\n+    </developers>\n \n-  <distributionManagement>\n-    <snapshotRepository>\n-      <id>ossrh</id>\n-      <url>https://oss.sonatype.org/content/repositories/snapshots</url>\n-    </snapshotRepository>\n-  </distributionManagement>\n+    <distributionManagement>\n+        <snapshotRepository>\n+            <id>ossrh</id>\n+            <url>https://oss.sonatype.org/content/repositories/snapshots</url>\n+        </snapshotRepository>\n+    </distributionManagement>\n \n-  <profiles>\n-    <profile>\n-      <id>release</id>\n-      <build>\n-        <plugins>\n-          <plugin>\n-            <groupId>org.apache.maven.plugins</groupId>\n-            <artifactId>maven-gpg-plugin</artifactId>\n-            <version>1.6</version>\n-            <executions>\n-              <execution>\n-                <id>sign-artifacts</id>\n-                <phase>verify</phase>\n-                <goals>\n-                  <goal>sign</goal>\n-                </goals>\n-              </execution>\n-            </executions>\n-          </plugin>\n-        </plugins>\n-      </build>\n-    </profile>\n-  </profiles>\n+    <profiles>\n+        <profile>\n+            <id>release</id>\n+            <build>\n+                <plugins>\n+                    <plugin>\n+                        <groupId>org.apache.maven.plugins</groupId>\n+                        <artifactId>maven-gpg-plugin</artifactId>\n+                        <version>1.6</version>\n+                        <executions>\n+                            <execution>\n+                                <id>sign-artifacts</id>\n+                                <phase>verify</phase>\n+                                <goals>\n+                                    <goal>sign</goal>\n+                                </goals>\n+                            </execution>\n+                        </executions>\n+                    </plugin>\n+                </plugins>\n+            </build>\n+        </profile>\n+    </profiles>\n \n-  <build>\n-    <plugins>\n-      <plugin>\n-        <groupId>org.apache.maven.plugins</groupId>\n-        <artifactId>maven-checkstyle-plugin</artifactId>\n-        <version>3.0.0</version>\n-        <executions>\n-          <execution>\n-            <id>check</id>\n-            <phase>verify</phase>\n-            <goals>\n-              <goal>check</goal>\n-            </goals>\n-          </execution>\n-        </executions>\n-        <configuration>\n-          <configLocation>src/main/resources/checkstyle.xml</configLocation>\n-          <headerLocation>src/main/resources/copyright_header.txt</headerLocation>\n-          <includeTestSourceDirectory>true</includeTestSourceDirectory>\n-          <violationSeverity>warning</violationSeverity>\n-        </configuration>\n-      </plugin>\n-      <plugin>\n-        <groupId>org.apache.maven.plugins</groupId>\n-        <artifactId>maven-compiler-plugin</artifactId>\n-        <version>3.6.1</version>\n-        <configuration>\n-          <compilerId>javac-with-errorprone</compilerId>\n-          <forceJavacCompilerUse>true</forceJavacCompilerUse>\n-          <source>${java.version}</source>\n-          <target>${java.version}</target>\n-          <showDeprecation>true</showDeprecation>\n-          <showWarnings>true</showWarnings>\n-          <compilerArguments>\n-            <Xlint />\n-          </compilerArguments>\n-        </configuration>\n-        <dependencies>\n-          <dependency>\n-            <groupId>org.codehaus.plexus</groupId>\n-            <artifactId>plexus-compiler-javac-errorprone</artifactId>\n-            <version>2.6</version>\n-          </dependency>\n-          <dependency>\n-            <groupId>com.google.errorprone</groupId>\n-            <artifactId>error_prone_core</artifactId>\n-            <version>2.0.5</version>\n-          </dependency>\n-        </dependencies>\n-      </plugin>\n-      <plugin>\n-        <groupId>org.apache.maven.plugins</groupId>\n-        <artifactId>maven-jar-plugin</artifactId>\n-        <version>3.0.2</version>\n-        <configuration>\n-          <archive>\n-            <manifest>\n-              <addDefaultImplementationEntries>true</addDefaultImplementationEntries>\n-              <addDefaultSpecificationEntries>true</addDefaultSpecificationEntries>\n-            </manifest>\n-          </archive>\n-        </configuration>\n-      </plugin>\n-      <plugin>\n-        <groupId>org.apache.maven.plugins</groupId>\n-        <artifactId>maven-javadoc-plugin</artifactId>\n-        <version>3.0.1</version>\n-        <executions>\n-          <execution>\n-            <id>attach-javadocs</id>\n-            <goals>\n-              <goal>jar</goal>\n-            </goals>\n-          </execution>\n-        </executions>\n-      </plugin>\n-      <plugin>\n-        <groupId>org.apache.maven.plugins</groupId>\n-        <artifactId>maven-shade-plugin</artifactId>\n-        <version>3.1.0</version>\n-        <executions>\n-          <execution>\n-            <phase>package</phase>\n-            <goals>\n-              <goal>shade</goal>\n-            </goals>\n-            <configuration>\n-             <createDependencyReducedPom>false</createDependencyReducedPom>\n-             <artifactSet>\n-                <includes>\n-                  <include>org.eclipse.jetty:*</include>\n-                </includes>\n-              </artifactSet>\n-              <relocations>\n-                <relocation>\n-                  <pattern>org.eclipse.jetty</pattern>\n-                  <shadedPattern>${shade.prefix}.org.eclipse.jetty</shadedPattern>\n-                </relocation>\n-              </relocations>\n-            </configuration>\n-          </execution>\n-        </executions>\n-      </plugin>      \n-      <plugin>\n-        <groupId>org.apache.maven.plugins</groupId>\n-        <artifactId>maven-assembly-plugin</artifactId>\n-        <version>3.0.0</version>\n-        <configuration>\n-          <descriptors>\n-            <descriptor>src/main/assembly/jar-with-dependencies.xml</descriptor>\n-          </descriptors>\n-          <archive>\n-            <manifest>\n-              <mainClass>org.gaul.s3proxy.Main</mainClass>\n-              <addDefaultImplementationEntries>true</addDefaultImplementationEntries>\n-            </manifest>\n-          </archive>\n-        </configuration>\n-        <executions>\n-          <execution>\n-            <id>make-assembly</id>\n-            <phase>package</phase>\n-            <goals>\n-              <goal>single</goal>\n-            </goals>\n-          </execution>\n-        </executions>\n-      </plugin>\n-      <plugin>\n-        <groupId>org.apache.maven.plugins</groupId>\n-        <artifactId>maven-source-plugin</artifactId>\n-        <version>3.0.1</version>\n-        <executions>\n-          <execution>\n-            <id>attach-sources</id>\n-            <goals>\n-              <goal>jar-no-fork</goal>\n-            </goals>\n-          </execution>\n-        </executions>\n-      </plugin>\n-      <plugin>\n-        <groupId>org.apache.maven.plugins</groupId>\n-        <artifactId>maven-surefire-plugin</artifactId>\n-        <version>${surefire.version}</version>\n-        <dependencies>\n-          <dependency>\n-            <groupId>org.apache.maven.surefire</groupId>\n-            <artifactId>surefire-junit47</artifactId>\n-            <version>${surefire.version}</version>\n-          </dependency>\n-          <dependency>\n-            <groupId>org.apache.maven.surefire</groupId>\n-            <artifactId>surefire-testng</artifactId>\n-            <version>${surefire.version}</version>\n-          </dependency>\n-        </dependencies>\n-        <configuration>\n-          <parallel>all</parallel>\n-          <threadCount>1</threadCount>\n-          <argLine>-Xmx512m</argLine>\n-          <redirectTestOutputToFile>true</redirectTestOutputToFile>\n-          <forkedProcessTimeoutInSeconds>1800</forkedProcessTimeoutInSeconds>\n-          <runOrder>random</runOrder>\n-          <trimStackTrace>false</trimStackTrace>\n-          <properties>\n-            <property>\n-              <name>junit</name>\n-              <value>false</value>\n-            </property>\n-          </properties>\n-        </configuration>\n-      </plugin>\n-      <plugin>\n-        <groupId>com.github.spotbugs</groupId>\n-        <artifactId>spotbugs-maven-plugin</artifactId>\n-        <version>4.0.5</version>\n-        <configuration>\n-          <effort>Max</effort>\n-          <omitVisitors>CrossSiteScripting,DefaultEncodingDetector,FindNullDeref</omitVisitors>\n-          <plugins>\n+    <build>\n+        <plugins>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-checkstyle-plugin</artifactId>\n+                <version>3.0.0</version>\n+                <executions>\n+                    <execution>\n+                        <id>check</id>\n+                        <phase>verify</phase>\n+                        <goals>\n+                            <goal>check</goal>\n+                        </goals>\n+                    </execution>\n+                </executions>\n+                <configuration>\n+                    <configLocation>src/main/resources/checkstyle.xml</configLocation>\n+                    <headerLocation>src/main/resources/copyright_header.txt</headerLocation>\n+                    <includeTestSourceDirectory>true</includeTestSourceDirectory>\n+                    <violationSeverity>warning</violationSeverity>\n+                </configuration>\n+            </plugin>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-compiler-plugin</artifactId>\n+                <version>3.6.1</version>\n+                <configuration>\n+                    <compilerId>javac-with-errorprone</compilerId>\n+                    <forceJavacCompilerUse>true</forceJavacCompilerUse>\n+                    <source>${java.version}</source>\n+                    <target>${java.version}</target>\n+                    <showDeprecation>true</showDeprecation>\n+                    <showWarnings>true</showWarnings>\n+                    <compilerArguments>\n+                        <Xlint/>\n+                    </compilerArguments>\n+                </configuration>\n+                <dependencies>\n+                    <dependency>\n+                        <groupId>org.codehaus.plexus</groupId>\n+                        <artifactId>plexus-compiler-javac-errorprone</artifactId>\n+                        <version>2.6</version>\n+                    </dependency>\n+                    <dependency>\n+                        <groupId>com.google.errorprone</groupId>\n+                        <artifactId>error_prone_core</artifactId>\n+                        <version>2.0.5</version>\n+                    </dependency>\n+                </dependencies>\n+            </plugin>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-jar-plugin</artifactId>\n+                <version>3.0.2</version>\n+                <configuration>\n+                    <archive>\n+                        <manifest>\n+                            <addDefaultImplementationEntries>true</addDefaultImplementationEntries>\n+                            <addDefaultSpecificationEntries>true</addDefaultSpecificationEntries>\n+                        </manifest>\n+                    </archive>\n+                </configuration>\n+            </plugin>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-javadoc-plugin</artifactId>\n+                <version>3.0.1</version>\n+                <executions>\n+                    <execution>\n+                        <id>attach-javadocs</id>\n+                        <goals>\n+                            <goal>jar</goal>\n+                        </goals>\n+                    </execution>\n+                </executions>\n+            </plugin>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-shade-plugin</artifactId>\n+                <version>3.1.0</version>\n+                <executions>\n+                    <execution>\n+                        <phase>package</phase>\n+                        <goals>\n+                            <goal>shade</goal>\n+                        </goals>\n+                        <configuration>\n+                            <createDependencyReducedPom>false</createDependencyReducedPom>\n+                            <artifactSet>\n+                                <includes>\n+                                    <include>org.eclipse.jetty:*</include>\n+                                </includes>\n+                            </artifactSet>\n+                            <relocations>\n+                                <relocation>\n+                                    <pattern>org.eclipse.jetty</pattern>\n+                                    <shadedPattern>${shade.prefix}.org.eclipse.jetty</shadedPattern>\n+                                </relocation>\n+                            </relocations>\n+                        </configuration>\n+                    </execution>\n+                </executions>\n+            </plugin>\n             <plugin>\n-              <groupId>jp.skypencil.findbugs.slf4j</groupId>\n-              <artifactId>bug-pattern</artifactId>\n-              <version>1.5.0</version>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-assembly-plugin</artifactId>\n+                <version>3.0.0</version>\n+                <configuration>\n+                    <descriptors>\n+                        <descriptor>src/main/assembly/jar-with-dependencies.xml</descriptor>\n+                    </descriptors>\n+                    <archive>\n+                        <manifest>\n+                            <mainClass>org.gaul.s3proxy.Main</mainClass>\n+                            <addDefaultImplementationEntries>true</addDefaultImplementationEntries>\n+                        </manifest>\n+                    </archive>\n+                </configuration>\n+                <executions>\n+                    <execution>\n+                        <id>make-assembly</id>\n+                        <phase>package</phase>\n+                        <goals>\n+                            <goal>single</goal>\n+                        </goals>\n+                    </execution>\n+                </executions>\n             </plugin>\n-          </plugins>\n-        </configuration>\n-      </plugin>\n-      <plugin>\n-        <groupId>org.skife.maven</groupId>\n-        <artifactId>really-executable-jar-maven-plugin</artifactId>\n-        <version>1.4.1</version>\n-        <configuration>\n-          <programFile>s3proxy</programFile>\n-        </configuration>\n-        <executions>\n-          <execution>\n-            <phase>package</phase>\n-            <goals>\n-              <goal>really-executable-jar</goal>\n-            </goals>\n-          </execution>\n-        </executions>\n-      </plugin>\n-      <plugin>\n-        <groupId>org.gaul</groupId>\n-        <artifactId>modernizer-maven-plugin</artifactId>\n-        <version>2.1.0</version>\n-        <executions>\n-          <execution>\n-            <id>modernizer</id>\n-            <phase>verify</phase>\n-            <goals>\n-              <goal>modernizer</goal>\n-            </goals>\n-          </execution>\n-        </executions>\n-        <configuration>\n-          <javaVersion>${java.version}</javaVersion>\n-        </configuration>\n-      </plugin>\n-      <plugin>\n-        <groupId>org.sonatype.plugins</groupId>\n-        <artifactId>nexus-staging-maven-plugin</artifactId>\n-        <version>1.6.5</version>\n-        <extensions>true</extensions>\n-        <configuration>\n-          <serverId>ossrh</serverId>\n-          <nexusUrl>https://oss.sonatype.org/</nexusUrl>\n-          <autoReleaseAfterClose>true</autoReleaseAfterClose>\n-        </configuration>\n-      </plugin>\n-    </plugins>\n-  </build>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-source-plugin</artifactId>\n+                <version>3.0.1</version>\n+                <executions>\n+                    <execution>\n+                        <id>attach-sources</id>\n+                        <goals>\n+                            <goal>jar-no-fork</goal>\n+                        </goals>\n+                    </execution>\n+                </executions>\n+            </plugin>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-surefire-plugin</artifactId>\n+                <version>${surefire.version}</version>\n+                <dependencies>\n+                    <dependency>\n+                        <groupId>org.apache.maven.surefire</groupId>\n+                        <artifactId>surefire-junit47</artifactId>\n+                        <version>${surefire.version}</version>\n+                    </dependency>\n+                    <dependency>\n+                        <groupId>org.apache.maven.surefire</groupId>\n+                        <artifactId>surefire-testng</artifactId>\n+                        <version>${surefire.version}</version>\n+                    </dependency>\n+                    <dependency>\n+                        <groupId>org.apache.maven.surefire</groupId>\n+                        <artifactId>surefire-junit-platform</artifactId>\n+                        <version>${surefire.version}</version>\n+                    </dependency>\n+                </dependencies>\n+                <configuration>\n+                    <parallel>all</parallel>\n+                    <threadCount>1</threadCount>\n+                    <argLine>-Xmx512m</argLine>\n+                    <redirectTestOutputToFile>true</redirectTestOutputToFile>\n+                    <forkedProcessTimeoutInSeconds>1800</forkedProcessTimeoutInSeconds>\n+                    <runOrder>random</runOrder>\n+                    <trimStackTrace>false</trimStackTrace>\n+                    <properties>\n+                        <property>\n+                            <name>junit</name>\n+                            <value>false</value>\n+                        </property>\n+                    </properties>\n+                </configuration>\n+            </plugin>\n+            <plugin>\n+                <groupId>com.github.spotbugs</groupId>\n+                <artifactId>spotbugs-maven-plugin</artifactId>\n+                <version>4.2.0</version>\n+                <configuration>\n+                    <effort>Max</effort>\n+                    <omitVisitors>CrossSiteScripting,DefaultEncodingDetector,FindNullDeref</omitVisitors>\n+                    <plugins>\n+                        <plugin>\n+                            <groupId>jp.skypencil.findbugs.slf4j</groupId>\n+                            <artifactId>bug-pattern</artifactId>\n+                            <version>1.5.0</version>\n+                        </plugin>\n+                    </plugins>\n+                </configuration>\n+            </plugin>\n+            <plugin>\n+                <groupId>org.skife.maven</groupId>\n+                <artifactId>really-executable-jar-maven-plugin</artifactId>\n+                <version>1.4.1</version>\n+                <configuration>\n+                    <programFile>s3proxy</programFile>\n+                </configuration>\n+                <executions>\n+                    <execution>\n+                        <phase>package</phase>\n+                        <goals>\n+                            <goal>really-executable-jar</goal>\n+                        </goals>\n+                    </execution>\n+                </executions>\n+            </plugin>\n+            <plugin>\n+                <groupId>org.gaul</groupId>\n+                <artifactId>modernizer-maven-plugin</artifactId>\n+                <version>2.1.0</version>\n+                <executions>\n+                    <execution>\n+                        <id>modernizer</id>\n+                        <phase>verify</phase>\n+                        <goals>\n+                            <goal>modernizer</goal>\n+                        </goals>\n+                    </execution>\n+                </executions>\n+                <configuration>\n+                    <javaVersion>${java.version}</javaVersion>\n+                </configuration>\n+            </plugin>\n+            <plugin>\n+                <groupId>org.sonatype.plugins</groupId>\n+                <artifactId>nexus-staging-maven-plugin</artifactId>\n+                <version>1.6.5</version>\n+                <extensions>true</extensions>\n+                <configuration>\n+                    <serverId>ossrh</serverId>\n+                    <nexusUrl>https://oss.sonatype.org/</nexusUrl>\n+                    <autoReleaseAfterClose>true</autoReleaseAfterClose>\n+                </configuration>\n+            </plugin>\n+        </plugins>\n+    </build>\n \n-  <properties>\n-    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n-    <java.version>1.7</java.version>\n-    <jclouds.version>2.3.0</jclouds.version>\n-    <slf4j.version>1.7.28</slf4j.version>\n-    <shade.prefix>${project.groupId}.shaded</shade.prefix>\n-    <surefire.version>2.20</surefire.version>\n-  </properties>\n+    <properties>\n+        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n+        <java.version>1.7</java.version>\n+        <jclouds.version>2.3.0</jclouds.version>\n+        <slf4j.version>1.7.28</slf4j.version>\n+        <shade.prefix>${project.groupId}.shaded</shade.prefix>\n+        <surefire.version>2.22.2</surefire.version>\n+    </properties>\n \n-  <repositories>\n-    <repository>\n-      <id>apache-snapshots</id>\n-      <url>https://repository.apache.org/content/repositories/snapshots</url>\n-      <snapshots>\n-        <enabled>true</enabled>\n-      </snapshots>\n-    </repository>\n-  </repositories>\n+    <repositories>\n+        <repository>\n+            <id>apache-snapshots</id>\n+            <url>https://repository.apache.org/content/repositories/snapshots</url>\n+            <snapshots>\n+                <enabled>true</enabled>\n+            </snapshots>\n+        </repository>\n+    </repositories>\n \n-  <dependencies>\n-    <dependency>\n-      <groupId>com.amazonaws</groupId>\n-      <artifactId>aws-java-sdk-s3</artifactId>\n-      <version>1.11.655</version>\n-      <scope>test</scope>\n-      <exclusions>\n-        <exclusion>\n-          <groupId>commons-logging</groupId>\n-          <artifactId>commons-logging</artifactId>\n-        </exclusion>\n-      </exclusions>\n-    </dependency>\n-    <dependency>\n-      <groupId>args4j</groupId>\n-      <artifactId>args4j</artifactId>\n-      <version>2.33</version>\n-    </dependency>\n-    <dependency>\n-      <groupId>ch.qos.logback</groupId>\n-      <artifactId>logback-classic</artifactId>\n-      <version>1.2.3</version>\n-    </dependency>\n-    <dependency>\n-      <groupId>javax.xml.bind</groupId>\n-      <artifactId>jaxb-api</artifactId>\n-      <version>2.3.1</version>\n-    </dependency>\n-    <dependency>\n-      <groupId>junit</groupId>\n-      <artifactId>junit</artifactId>\n-      <version>4.12</version>\n-      <!-- Required for S3ProxyRule -->\n-      <scope>provided</scope>\n-    </dependency>\n-    <dependency>\n-      <groupId>com.fasterxml.jackson.dataformat</groupId>\n-      <artifactId>jackson-dataformat-xml</artifactId>\n-      <version>2.10.0</version>\n-    </dependency>\n-    <dependency>\n-      <groupId>com.github.spotbugs</groupId>\n-      <artifactId>spotbugs-annotations</artifactId>\n-      <version>3.1.12</version>\n-      <scope>provided</scope>\n-    </dependency>\n-    <dependency>\n-      <groupId>com.google.code.findbugs</groupId>\n-      <artifactId>jsr305</artifactId>\n-      <version>3.0.2</version>\n-    </dependency>\n-    <dependency>\n-      <groupId>commons-fileupload</groupId>\n-      <artifactId>commons-fileupload</artifactId>\n-      <version>1.4</version>\n-    </dependency>\n-    <dependency>\n-      <groupId>org.apache.jclouds</groupId>\n-      <artifactId>jclouds-allblobstore</artifactId>\n-      <version>${jclouds.version}</version>\n-    </dependency>\n-    <dependency>\n-      <groupId>org.apache.jclouds.api</groupId>\n-      <artifactId>filesystem</artifactId>\n-      <version>${jclouds.version}</version>\n-    </dependency>\n-    <dependency>\n-      <groupId>org.apache.jclouds.driver</groupId>\n-      <artifactId>jclouds-slf4j</artifactId>\n-      <version>${jclouds.version}</version>\n-    </dependency>\n-    <dependency>\n-      <groupId>org.assertj</groupId>\n-      <artifactId>assertj-core</artifactId>\n-      <scope>test</scope>\n-      <!-- we need to use the same version as in jclouds because we pull in their tests -->\n-      <version>1.7.1</version>\n-    </dependency>\n-    <dependency>\n-      <groupId>org.eclipse.jetty</groupId>\n-      <artifactId>jetty-servlet</artifactId>\n-      <version>9.2.28.v20190418</version>\n-    </dependency>\n-    <dependency>\n-      <groupId>org.slf4j</groupId>\n-      <artifactId>slf4j-api</artifactId>\n-      <version>${slf4j.version}</version>\n-    </dependency>\n-    <dependency>\n-      <groupId>org.slf4j</groupId>\n-      <artifactId>jcl-over-slf4j</artifactId>\n-      <version>${slf4j.version}</version>\n-      <scope>test</scope>\n-    </dependency>\n-    <!-- tests dependencies -->\n-    <dependency>\n-      <groupId>org.apache.jclouds</groupId>\n-      <artifactId>jclouds-blobstore</artifactId>\n-      <version>${jclouds.version}</version>\n-      <type>test-jar</type>\n-      <scope>test</scope>\n-    </dependency>\n-    <dependency>\n-      <groupId>org.apache.jclouds.api</groupId>\n-      <artifactId>s3</artifactId>\n-      <version>${jclouds.version}</version>\n-      <type>test-jar</type>\n-      <scope>test</scope>\n-    </dependency>\n-    <dependency>\n-      <groupId>org.apache.jclouds</groupId>\n-      <artifactId>jclouds-core</artifactId>\n-      <version>${jclouds.version}</version>\n-      <type>test-jar</type>\n-      <scope>test</scope>\n-    </dependency>\n-    <dependency>\n-      <groupId>org.testng</groupId>\n-      <artifactId>testng</artifactId>\n-      <version>6.8.21</version>\n-      <scope>test</scope>\n-    </dependency>\n-    <dependency>\n-      <groupId>javax.annotation</groupId>\n-      <artifactId>javax.annotation-api</artifactId>\n-      <version>1.3.2</version>\n-    </dependency>\n-  </dependencies>\n+    <dependencies>\n+        <dependency>\n+            <groupId>com.amazonaws</groupId>\n+            <artifactId>aws-java-sdk-s3</artifactId>\n+            <version>1.11.655</version>\n+            <scope>test</scope>\n+            <exclusions>\n+                <exclusion>\n+                    <groupId>commons-logging</groupId>\n+                    <artifactId>commons-logging</artifactId>\n+                </exclusion>\n+            </exclusions>\n+        </dependency>\n+        <dependency>\n+            <groupId>args4j</groupId>\n+            <artifactId>args4j</artifactId>\n+            <version>2.33</version>\n+        </dependency>\n+        <dependency>\n+            <groupId>ch.qos.logback</groupId>\n+            <artifactId>logback-classic</artifactId>\n+            <version>1.2.3</version>\n+        </dependency>\n+        <dependency>\n+            <groupId>javax.xml.bind</groupId>\n+            <artifactId>jaxb-api</artifactId>\n+            <version>2.3.1</version>\n+        </dependency>\n+        <dependency>\n+            <groupId>junit</groupId>\n+            <artifactId>junit</artifactId>\n+            <version>4.12</version>\n+            <!-- Required for S3ProxyRule -->\n+            <scope>provided</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.junit.jupiter</groupId>\n+            <artifactId>junit-jupiter</artifactId>\n+            <version>5.7.0</version>\n+            <!-- Required for Junit5 Extension -->\n+            <scope>provided</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>com.fasterxml.jackson.dataformat</groupId>\n+            <artifactId>jackson-dataformat-xml</artifactId>\n+            <version>2.10.0</version>\n+        </dependency>\n+        <dependency>\n+            <groupId>com.github.spotbugs</groupId>\n+            <artifactId>spotbugs-annotations</artifactId>\n+            <version>3.1.12</version>\n+            <scope>provided</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>com.google.code.findbugs</groupId>\n+            <artifactId>jsr305</artifactId>\n+            <version>3.0.2</version>\n+        </dependency>\n+        <dependency>\n+            <groupId>commons-fileupload</groupId>\n+            <artifactId>commons-fileupload</artifactId>\n+            <version>1.4</version>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.apache.jclouds</groupId>\n+            <artifactId>jclouds-allblobstore</artifactId>\n+            <version>${jclouds.version}</version>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.apache.jclouds.api</groupId>\n+            <artifactId>filesystem</artifactId>\n+            <version>${jclouds.version}</version>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.apache.jclouds.driver</groupId>\n+            <artifactId>jclouds-slf4j</artifactId>\n+            <version>${jclouds.version}</version>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.assertj</groupId>\n+            <artifactId>assertj-core</artifactId>\n+            <scope>test</scope>\n+            <!-- we need to use the same version as in jclouds because we pull in their tests -->\n+            <version>1.7.1</version>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.eclipse.jetty</groupId>\n+            <artifactId>jetty-servlet</artifactId>\n+            <version>9.2.28.v20190418</version>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.slf4j</groupId>\n+            <artifactId>slf4j-api</artifactId>\n+            <version>${slf4j.version}</version>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.slf4j</groupId>\n+            <artifactId>jcl-over-slf4j</artifactId>\n+            <version>${slf4j.version}</version>\n+            <scope>test</scope>\n+        </dependency>\n+        <!-- tests dependencies -->\n+        <dependency>\n+            <groupId>org.apache.jclouds</groupId>\n+            <artifactId>jclouds-blobstore</artifactId>\n+            <version>${jclouds.version}</version>\n+            <type>test-jar</type>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.apache.jclouds.api</groupId>\n+            <artifactId>s3</artifactId>\n+            <version>${jclouds.version}</version>\n+            <type>test-jar</type>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.apache.jclouds</groupId>\n+            <artifactId>jclouds-core</artifactId>\n+            <version>${jclouds.version}</version>\n+            <type>test-jar</type>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.testng</groupId>\n+            <artifactId>testng</artifactId>\n+            <version>6.8.21</version>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>javax.annotation</groupId>\n+            <artifactId>javax.annotation-api</artifactId>\n+            <version>1.3.2</version>\n+        </dependency>\n+    </dependencies>\n </project>"
  },
  {
    "sha": "1bcdae21f416a3c94114bd53bdeaa40b7be013eb",
    "filename": "src/main/java/org/gaul/s3proxy/junit/S3ProxyExtension.java",
    "status": "added",
    "additions": 189,
    "deletions": 0,
    "changes": 189,
    "blob_url": "https://github.com/gaul/s3proxy/blob/db6faf46ddaba74da62331a0a39d8f84a7e5ad19/src/main/java/org/gaul/s3proxy/junit/S3ProxyExtension.java",
    "raw_url": "https://github.com/gaul/s3proxy/raw/db6faf46ddaba74da62331a0a39d8f84a7e5ad19/src/main/java/org/gaul/s3proxy/junit/S3ProxyExtension.java",
    "contents_url": "https://api.github.com/repos/gaul/s3proxy/contents/src/main/java/org/gaul/s3proxy/junit/S3ProxyExtension.java?ref=db6faf46ddaba74da62331a0a39d8f84a7e5ad19",
    "patch": "@@ -0,0 +1,189 @@\n+/*\n+ * Copyright 2014-2020 Andrew Gaul <andrew@gaul.org>\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.gaul.s3proxy.junit;\n+\n+import java.io.File;\n+import java.io.IOException;\n+import java.net.URI;\n+import java.nio.file.Files;\n+import java.util.Properties;\n+\n+import org.apache.commons.io.FileUtils;\n+import org.eclipse.jetty.util.component.AbstractLifeCycle;\n+import org.gaul.s3proxy.AuthenticationType;\n+import org.gaul.s3proxy.S3Proxy;\n+import org.jclouds.ContextBuilder;\n+import org.jclouds.blobstore.BlobStore;\n+import org.jclouds.blobstore.BlobStoreContext;\n+import org.jclouds.blobstore.domain.StorageMetadata;\n+import org.junit.jupiter.api.extension.AfterAllCallback;\n+import org.junit.jupiter.api.extension.BeforeAllCallback;\n+import org.junit.jupiter.api.extension.ExtensionContext;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+\n+public final class S3ProxyExtension\n+        implements AfterAllCallback, BeforeAllCallback {\n+    private static final Logger logger = LoggerFactory.getLogger(\n+            S3ProxyExtension.class);\n+\n+    private static final String LOCALHOST = \"127.0.0.1\";\n+\n+    private final String accessKey;\n+    private final String secretKey;\n+    private final String endpointFormat;\n+    private final S3Proxy s3Proxy;\n+\n+    private final BlobStoreContext blobStoreContext;\n+    private URI endpointUri;\n+    private final File blobStoreLocation;\n+\n+    public static final class Builder {\n+        private AuthenticationType authType = AuthenticationType.NONE;\n+        private String accessKey;\n+        private String secretKey;\n+        private String secretStorePath;\n+        private String secretStorePassword;\n+        private int port = -1;\n+        private boolean ignoreUnknownHeaders;\n+        private String blobStoreProvider = \"filesystem\";\n+\n+        private Builder() { }\n+\n+        public Builder withCredentials(AuthenticationType authType,\n+                                       String accessKey, String secretKey) {\n+            this.authType = authType;\n+            this.accessKey = accessKey;\n+            this.secretKey = secretKey;\n+            return this;\n+        }\n+\n+        public Builder withCredentials(String accessKey, String secretKey) {\n+            return withCredentials(AuthenticationType.AWS_V2_OR_V4, accessKey,\n+                    secretKey);\n+        }\n+\n+        public Builder withSecretStore(String path, String password) {\n+            secretStorePath = path;\n+            secretStorePassword = password;\n+            return this;\n+        }\n+\n+        public Builder withPort(int port) {\n+            this.port = port;\n+            return this;\n+        }\n+\n+        public Builder withBlobStoreProvider(String blobStoreProvider) {\n+            this.blobStoreProvider = blobStoreProvider;\n+            return this;\n+        }\n+\n+        public Builder ignoreUnknownHeaders() {\n+            ignoreUnknownHeaders = true;\n+            return this;\n+        }\n+\n+        public S3ProxyExtension build() {\n+            return new S3ProxyExtension(this);\n+        }\n+    }\n+\n+    private S3ProxyExtension(Builder builder) {\n+        accessKey = builder.accessKey;\n+        secretKey = builder.secretKey;\n+\n+        Properties properties = new Properties();\n+        try {\n+            blobStoreLocation = Files.createTempDirectory(\"S3ProxyRule\")\n+                    .toFile();\n+            properties.setProperty(\"jclouds.filesystem.basedir\",\n+                    blobStoreLocation.getCanonicalPath());\n+        } catch (IOException e) {\n+            throw new RuntimeException(\"Unable to initialize Blob Store\", e);\n+        }\n+\n+        blobStoreContext = ContextBuilder.newBuilder(\n+                builder.blobStoreProvider)\n+                .credentials(accessKey, secretKey)\n+                .overrides(properties).build(BlobStoreContext.class);\n+\n+        S3Proxy.Builder s3ProxyBuilder = S3Proxy.builder()\n+                .blobStore(blobStoreContext.getBlobStore())\n+                .awsAuthentication(builder.authType, accessKey, secretKey)\n+                .ignoreUnknownHeaders(builder.ignoreUnknownHeaders);\n+\n+        if (builder.secretStorePath != null ||\n+                builder.secretStorePassword != null) {\n+            s3ProxyBuilder.keyStore(builder.secretStorePath,\n+                    builder.secretStorePassword);\n+        }\n+\n+        int port = builder.port < 0 ? 0 : builder.port;\n+        endpointFormat = \"http://%s:%d\";\n+        String endpoint = String.format(endpointFormat, LOCALHOST, port);\n+        s3ProxyBuilder.endpoint(URI.create(endpoint));\n+\n+        s3Proxy = s3ProxyBuilder.build();\n+    }\n+\n+    public static Builder builder() {\n+        return new Builder();\n+    }\n+\n+    @Override\n+    public void beforeAll(ExtensionContext extensionContext) throws Exception {\n+        logger.debug(\"S3 proxy is starting\");\n+        s3Proxy.start();\n+        while (!s3Proxy.getState().equals(AbstractLifeCycle.STARTED)) {\n+            Thread.sleep(10);\n+        }\n+        endpointUri = URI.create(String.format(endpointFormat, LOCALHOST,\n+                s3Proxy.getPort()));\n+        logger.debug(\"S3 proxy is running\");\n+    }\n+\n+    @Override\n+    public void afterAll(ExtensionContext extensionContext) throws Exception {\n+        logger.debug(\"S3 proxy is stopping\");\n+        try {\n+            s3Proxy.stop();\n+            BlobStore blobStore = blobStoreContext.getBlobStore();\n+            for (StorageMetadata metadata : blobStore.list()) {\n+                blobStore.deleteContainer(metadata.getName());\n+            }\n+            blobStoreContext.close();\n+        } catch (Exception e) {\n+            throw new RuntimeException(\"Unable to stop S3 proxy\", e);\n+        }\n+        FileUtils.deleteQuietly(blobStoreLocation);\n+        logger.debug(\"S3 proxy has stopped\");\n+    }\n+\n+    public URI getUri() {\n+        return endpointUri;\n+    }\n+\n+    public String getAccessKey() {\n+        return accessKey;\n+    }\n+\n+    public String getSecretKey() {\n+        return secretKey;\n+    }\n+}"
  },
  {
    "sha": "e0ad6b834f4e15d8e30ec11b26d08cb61832736c",
    "filename": "src/test/java/org/gaul/s3proxy/junit/S3ProxyExtensionTest.java",
    "status": "added",
    "additions": 93,
    "deletions": 0,
    "changes": 93,
    "blob_url": "https://github.com/gaul/s3proxy/blob/db6faf46ddaba74da62331a0a39d8f84a7e5ad19/src/test/java/org/gaul/s3proxy/junit/S3ProxyExtensionTest.java",
    "raw_url": "https://github.com/gaul/s3proxy/raw/db6faf46ddaba74da62331a0a39d8f84a7e5ad19/src/test/java/org/gaul/s3proxy/junit/S3ProxyExtensionTest.java",
    "contents_url": "https://api.github.com/repos/gaul/s3proxy/contents/src/test/java/org/gaul/s3proxy/junit/S3ProxyExtensionTest.java?ref=db6faf46ddaba74da62331a0a39d8f84a7e5ad19",
    "patch": "@@ -0,0 +1,93 @@\n+/*\n+ * Copyright 2014-2020 Andrew Gaul <andrew@gaul.org>\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.gaul.s3proxy.junit;\n+\n+import static org.assertj.core.api.Assertions.assertThat;\n+\n+import java.util.List;\n+\n+import com.amazonaws.auth.AWSStaticCredentialsProvider;\n+import com.amazonaws.auth.BasicAWSCredentials;\n+import com.amazonaws.client.builder.AwsClientBuilder;\n+import com.amazonaws.regions.Regions;\n+import com.amazonaws.services.s3.AmazonS3;\n+import com.amazonaws.services.s3.AmazonS3ClientBuilder;\n+import com.amazonaws.services.s3.model.Bucket;\n+import com.amazonaws.services.s3.model.S3ObjectSummary;\n+\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.api.Test;\n+import org.junit.jupiter.api.extension.RegisterExtension;\n+\n+\n+public class S3ProxyExtensionTest {\n+\n+    @RegisterExtension\n+    static final S3ProxyExtension EXTENSION = S3ProxyExtension\n+            .builder()\n+            .withCredentials(\"access\", \"secret\")\n+            .build();\n+\n+    private static final String MY_TEST_BUCKET = \"my-test-bucket\";\n+\n+    private static AmazonS3 s3Client;\n+\n+    @BeforeAll\n+    public static final void setUp() throws Exception {\n+        s3Client = AmazonS3ClientBuilder\n+        .standard()\n+        .withCredentials(\n+            new AWSStaticCredentialsProvider(\n+                new BasicAWSCredentials(\n+                    EXTENSION.getAccessKey(), EXTENSION.getSecretKey())))\n+        .withEndpointConfiguration(\n+            new AwsClientBuilder.EndpointConfiguration(\n+                EXTENSION.getUri().toString(), Regions.US_EAST_1.getName()))\n+        .build();\n+\n+        s3Client.createBucket(MY_TEST_BUCKET);\n+    }\n+\n+    @Test\n+    public final void listBucket() {\n+        List<Bucket> buckets = s3Client.listBuckets();\n+        assertThat(buckets).hasSize(1);\n+        assertThat(buckets.get(0).getName())\n+                .isEqualTo(MY_TEST_BUCKET);\n+    }\n+\n+    @Test\n+    public final void uploadFile() throws Exception {\n+        String testInput = \"content\";\n+        s3Client.putObject(MY_TEST_BUCKET, \"file.txt\", testInput);\n+\n+        List<S3ObjectSummary> summaries = s3Client\n+                .listObjects(MY_TEST_BUCKET)\n+                .getObjectSummaries();\n+        assertThat(summaries).hasSize(1);\n+        assertThat(summaries.get(0).getKey()).isEqualTo(\"file.txt\");\n+        assertThat(summaries.get(0).getSize()).isEqualTo(testInput.length());\n+    }\n+\n+    @Test\n+    public final void doesBucketExistV2() {\n+        assertThat(s3Client.doesBucketExistV2(MY_TEST_BUCKET)).isTrue();\n+\n+        // Issue #299\n+        assertThat(s3Client.doesBucketExistV2(\"nonexistingbucket\")).isFalse();\n+    }\n+}"
  }
]
