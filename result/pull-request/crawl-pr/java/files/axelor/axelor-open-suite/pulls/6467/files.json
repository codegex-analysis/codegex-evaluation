[
  {
    "sha": "095f2183d06ef786d27c1603e03fa27ec9d6f381",
    "filename": "axelor-account/src/main/resources/i18n/messages.csv",
    "status": "modified",
    "additions": 1,
    "deletions": 0,
    "changes": 1,
    "blob_url": "https://github.com/axelor/axelor-open-suite/blob/448b05156a2836d2d1aacf0440e9841964331edb/axelor-account/src/main/resources/i18n/messages.csv",
    "raw_url": "https://github.com/axelor/axelor-open-suite/raw/448b05156a2836d2d1aacf0440e9841964331edb/axelor-account/src/main/resources/i18n/messages.csv",
    "contents_url": "https://api.github.com/repos/axelor/axelor-open-suite/contents/axelor-account/src/main/resources/i18n/messages.csv?ref=448b05156a2836d2d1aacf0440e9841964331edb",
    "patch": "@@ -1926,6 +1926,7 @@\n \"The sale account or the purchase account are associated to another company. Please make sure to select the right account in the company chart before changing the company.\",,,\n \"The sale account or the purchase account or the cash account are associated to another company. Please make sure to select the right account in the company chart before changing the company.\",,,\n \"The sale order must be the same for all invoices\",,,\n+\"The selected date is out of the accounting period.\",,,\n \"The sum of line amounts (%s) must match the amount of the payment schedule (%s).\",,,\n \"The to date is incorrect\",,,\n \"The total amount is greater than the budget distribution total.\",,,"
  },
  {
    "sha": "6d73d176dbaaa16953c2e4e88d25e022e58284fd",
    "filename": "axelor-account/src/main/resources/i18n/messages_en.csv",
    "status": "modified",
    "additions": 1,
    "deletions": 0,
    "changes": 1,
    "blob_url": "https://github.com/axelor/axelor-open-suite/blob/448b05156a2836d2d1aacf0440e9841964331edb/axelor-account/src/main/resources/i18n/messages_en.csv",
    "raw_url": "https://github.com/axelor/axelor-open-suite/raw/448b05156a2836d2d1aacf0440e9841964331edb/axelor-account/src/main/resources/i18n/messages_en.csv",
    "contents_url": "https://api.github.com/repos/axelor/axelor-open-suite/contents/axelor-account/src/main/resources/i18n/messages_en.csv?ref=448b05156a2836d2d1aacf0440e9841964331edb",
    "patch": "@@ -1926,6 +1926,7 @@\n \"The sale account or the purchase account are associated to another company. Please make sure to select the right account in the company chart before changing the company.\",,,\n \"The sale account or the purchase account or the cash account are associated to another company. Please make sure to select the right account in the company chart before changing the company.\",,,\n \"The sale order must be the same for all invoices\",,,\n+\"The selected date is out of the accounting period.\",,,\n \"The sum of line amounts (%s) must match the amount of the payment schedule (%s).\",,,\n \"The to date is incorrect\",,,\n \"The total amount is greater than the budget distribution total.\",,,"
  },
  {
    "sha": "e013a2a1c9c79dc3233994defa801709f9986be5",
    "filename": "axelor-account/src/main/resources/i18n/messages_fr.csv",
    "status": "modified",
    "additions": 3,
    "deletions": 4,
    "changes": 7,
    "blob_url": "https://github.com/axelor/axelor-open-suite/blob/448b05156a2836d2d1aacf0440e9841964331edb/axelor-account/src/main/resources/i18n/messages_fr.csv",
    "raw_url": "https://github.com/axelor/axelor-open-suite/raw/448b05156a2836d2d1aacf0440e9841964331edb/axelor-account/src/main/resources/i18n/messages_fr.csv",
    "contents_url": "https://api.github.com/repos/axelor/axelor-open-suite/contents/axelor-account/src/main/resources/i18n/messages_fr.csv?ref=448b05156a2836d2d1aacf0440e9841964331edb",
    "patch": "@@ -379,16 +379,16 @@\n \"AccountingReportType2001.company\",\"Société\",,\n \"AccountingReportType2001.currency\",\"Devise\",,\n \"AccountingReportType2001.date\",\"Date\",,\n+\"AccountingReportType2001.description\",\"Description\",,\n \"AccountingReportType2001.endDate\",\"Date de fin\",,\n \"AccountingReportType2001.from\",\"Du\",,\n \"AccountingReportType2001.moveLineName\",\"Ligne d'écriture comptable\",,\n+\"AccountingReportType2001.origin\",\"Origine\",,\n \"AccountingReportType2001.title\",\"Grand livre analytique\",,\n \"AccountingReportType2001.to\",\"Au\",,\n \"AccountingReportType2001.totalPerAnalyticAccount\",\"Total par compte analytique\",,\n \"AccountingReportType2001.totalPerAnalyticAxis\",\"Total par axe analytique\",,\n \"AccountingReportType2001.totalPerAnalyticJournal\",\"Total par journal analytique\",,\n-\"AccountingReportType2001.origin\",\"Origine\",,\n-\"AccountingReportType2001.description\",\"Description\",,\n \"AccountingReportType3.balance\",\"Solde\",,\n \"AccountingReportType3.company\",\"SOCIETE :\",,\n \"AccountingReportType3.credit\",\"Crédit\",,\n@@ -1018,7 +1018,6 @@\n \"Filepath for exported files (Accounting)\",\"Chemin du dossier pour exports comptables\",,\n \"Filepath for rejected reimbursements\",\"Chemin d'import des rejets de remboursements\",,\n \"Filepath for temporary rejected reimbursements import\",\"Chemin d'import temporaire des rejets de remboursements\",,\n-\"Filepath to import rejected records\",,,\n \"Filter\",\"Filtrer\",,\n \"Filter on supplier\",,,\n \"Final\",\"Définitif\",,\n@@ -1897,7 +1896,6 @@\n \"Template Move Lines\",\"Modèle de ligne d'écriture\",,\n \"Template move is not balanced\",\"Le modèle d'écriture n'est pas équilibré\",,\n \"Temporary\",\"Provisoire\",,\n-\"Temporary filepath to import rejected records\",,,\n \"Terms and Conditions\",\"Conditions générales\",,\n \"The Move Balance must be positive\",\"La balance de l'écriture doit être positive.\",,\n \"The account code %s is already used for the company %s, there cannot be two accounts with the same code for the same company.\",\"Le code du compte comptable %s est déja en cours d'utilisation pour la société %s, il ne peut pas y avoir deux comptes avec le même code pour la même société.\",,\n@@ -1928,6 +1926,7 @@\n \"The sale account or the purchase account are associated to another company. Please make sure to select the right account in the company chart before changing the company.\",\"Le compte de vente ou d'achat est associé à une entreprise différente. Veuillez vous assurer de sélectionner le bon compte associé au plan de compte de la société en cours avant de modifier la société.\",,\n \"The sale account or the purchase account or the cash account are associated to another company. Please make sure to select the right account in the company chart before changing the company.\",\"Le compte de vente ou d'achat ou de banque est associé à une entreprise différente. Veuillez vous assurer de sélectionner le bon compte associé au plan de compte de la société en cours avant de modifier la société.\",,\n \"The sale order must be the same for all invoices\",\"La Comm. client doit être la même pour l'ensemble des factures\",,\n+\"The selected date is out of the accounting period.\",\"La date sélectionnée ne fait pas partie de la période comptable de l'écriture.\",,\n \"The sum of line amounts (%s) must match the amount of the payment schedule (%s).\",\"La somme des montants des lignes (%s) doit correspondre au montant de l’échéancier de paiement (%s).\",,\n \"The to date is incorrect\",\"La date d’arrivée est incorrecte\",,\n \"The total amount is greater than the budget distribution total.\",\"Le montant total est supérieur à la totalité de la répartition budgetaire.\",,"
  },
  {
    "sha": "5854115de32d99a1cfcc2b11911e4c5b7884fd7d",
    "filename": "axelor-account/src/main/resources/views/MoveLine.xml",
    "status": "modified",
    "additions": 25,
    "deletions": 7,
    "changes": 32,
    "blob_url": "https://github.com/axelor/axelor-open-suite/blob/448b05156a2836d2d1aacf0440e9841964331edb/axelor-account/src/main/resources/views/MoveLine.xml",
    "raw_url": "https://github.com/axelor/axelor-open-suite/raw/448b05156a2836d2d1aacf0440e9841964331edb/axelor-account/src/main/resources/views/MoveLine.xml",
    "contents_url": "https://api.github.com/repos/axelor/axelor-open-suite/contents/axelor-account/src/main/resources/views/MoveLine.xml?ref=448b05156a2836d2d1aacf0440e9841964331edb",
    "patch": "@@ -11,7 +11,7 @@\n   \t<hilite color=\"info\" if=\"$get('move.statusSelect') == 1\"/>\n   \t<hilite color=\"danger\" if=\"$get('move.statusSelect') == 4\"/>\n     <field name=\"name\" width=\"135\"/>\n-    <field name=\"date\" width=\"90\" onChange=\"account-move-line-record-date-onchange,action-move-line-method-compute-analytic-distribution\"/>\n+    <field name=\"date\" width=\"90\" onChange=\"account-move-line-group-date-onchange\"/>\n  \t\t<field name=\"move.period\" width=\"100\" canView=\"false\"/>\n     <field name=\"move.journal\" width=\"140\"/>\n     <field name=\"partner\" form-view=\"partner-form\" grid-view=\"partner-grid\"/>\n@@ -40,7 +40,7 @@\n \t\t<field name=\"account.isTaxAuthorizedOnMoveLine\" hidden=\"true\"/>\n \t\t<field name=\"account.analyticDistributionAuthorized\" hidden=\"true\"/>\n \t\t<field name=\"account.analyticDistributionRequiredOnMoveLines\" hidden=\"true\"/>\n-\t\t<field name=\"date\" width=\"100\" onChange=\"account-move-line-record-date-onchange,action-move-line-method-compute-analytic-distribution\"/>\n+\t\t<field name=\"date\" width=\"100\" onChange=\"account-move-line-group-date-onchange\"/>\n         <field name=\"partner\" form-view=\"partner-form\" grid-view=\"partner-grid\" onSelect=\"action-account-move-line-partner-group\" width=\"120\" canEdit=\"false\" readonlyIf=\"amountPaid &gt; 0\"/>\n         <field name=\"account\" form-view=\"account-form\" grid-view=\"account-grid\" onSelect=\"action-move-line-attrs-domain-account\" width=\"200\" canEdit=\"false\" readonlyIf=\"amountPaid &gt; 0\" onChange=\"action-move-line-method-compute-analytic-distribution\"/>\n         <field name=\"debit\" onChange=\"action-record-account-moveline-debit-onchange,action-group-account-moveline-debitcredit-onchange\" width=\"90\" readonlyIf=\"amountPaid &gt; 0\"/>\n@@ -61,7 +61,7 @@\n \t\t<hilite color=\"info\" if=\"$get('move.statusSelect') == 1\"/>\n \t\t<hilite color=\"danger\" if=\"$get('move.statusSelect') == 4\"/>\n     <field name=\"name\" width=\"135\"/>\n-    <field name=\"date\" onChange=\"account-move-line-record-date-onchange,action-move-line-method-compute-analytic-distribution\"/>\n+    <field name=\"date\" onChange=\"account-move-line-group-date-onchange\"/>\n  \t\t<field name=\"move.period\" canView=\"false\"/>\n     <field name=\"partner\" form-view=\"partner-form\" grid-view=\"partner-grid\"/>\n     <field name=\"account\" form-view=\"account-form\" grid-view=\"account-grid\" onChange=\"action-move-line-method-compute-analytic-distribution\"/>\n@@ -86,7 +86,7 @@\n     \t<hilite color=\"info\" if=\"$get('move.statusSelect') == 1\"/>\n     \t<hilite color=\"danger\" if=\"$get('move.statusSelect') == 4\"/>\n         <field name=\"name\" width=\"135\"/>\n-        <field name=\"date\" onChange=\"account-move-line-record-date-onchange,action-move-line-method-compute-analytic-distribution\"/>\n+        <field name=\"date\" onChange=\"account-move-line-group-date-onchange\"/>\n \t\t<field name=\"move.period\" canView=\"false\"/>\n         <field name=\"move.journal\"/>\n         <field name=\"description\"/>\n@@ -144,7 +144,7 @@\n \t\t\t\t</viewer>\n \t\t\t</field>\n \t\t\t<panel name=\"datesPanel\" colSpan=\"12\">\n-\t\t\t\t<field name=\"date\" onChange=\"account-move-line-record-date-onchange,action-move-line-method-compute-analytic-distribution\"/>\n+\t\t\t\t<field name=\"date\" onChange=\"account-move-line-group-date-onchange\"/>\n \t\t\t\t<field name=\"dueDate\" showIf=\"dueDate\"/>\n \t\t\t\t<field name=\"originDate\"/>\n \t\t\t</panel>\n@@ -243,7 +243,7 @@\n \t\t\t\t</viewer>\n \t\t\t</field>\n \t\t\t<panel name=\"datesPanel\" colSpan=\"12\">\n-\t\t\t\t<field name=\"date\" onChange=\"account-move-line-record-date-onchange,action-move-line-method-compute-analytic-distribution\"/>\n+\t\t\t\t<field name=\"date\" onChange=\"account-move-line-group-date-onchange\"/>\n \t\t\t\t<field name=\"dueDate\" showIf=\"dueDate\"/>\n \t\t\t\t<field name=\"originDate\"/>\n \t\t\t</panel>\n@@ -356,6 +356,12 @@\n \t    <action name=\"action-move-line-attrs-domain-partner\" if=\"__parent__ == null || __parent__._model != 'com.axelor.apps.account.db.Move'\"/>\n     </action-group>\n \n+\t<action-group name=\"account-move-line-group-date-onchange\">\n+\t\t<action name=\"account-move-line-record-date-onchange\"/>\n+\t\t<action name=\"action-move-line-method-compute-analytic-distribution\"/>\n+    <action name=\"action-move-line-validate-check-date-in-period\"/>\n+\t</action-group>\n+\n     <action-method name=\"action-move-line-method-compute-analytic-distribution\">\n \t\t<call class=\"com.axelor.apps.account.web.MoveLineController\" method=\"computeAnalyticDistribution\"/>\n \t</action-method>\n@@ -493,5 +499,17 @@\n \t\t\t<domain>self.move.invoice.operationTypeSelect = 1 OR self.move.invoice.operationTypeSelect = 2</domain>\n \t\t</filter>\n \t</search-filters>\n-\t\n+\n+\t<action-validate name=\"action-move-line-validate-check-date-in-period\">\n+\t\t<error message=\"The selected date is out of the accounting period.\"\n+\t\t\tif=\"eval: (move &amp;&amp; move.period &amp;&amp; (date &lt; move.period.fromDate || date &gt; move.period.toDate))\n+\t\t\t|| (__parent__ &amp;&amp; __parent__.period &amp;&amp; (date &lt; __parent__.period.fromDate || date &gt; __parent__.period.toDate))\"\n+\t\t\taction=\"action-update-move-line-record-update-date-from-move\"/>\n+\t</action-validate>\n+\n+\t<action-record name=\"action-update-move-line-record-update-date-from-move\" model=\"com.axelor.apps.account.db.MoveLine\">\n+\t\t<field name=\"date\" expr=\"eval: move.date\" if=\"move\"/>\n+\t\t<field name=\"date\" expr=\"eval: __parent__.date\" if=\"__parent__\"/>\n+\t</action-record>\n+\n </object-views>"
  },
  {
    "sha": "92ae668913fbf86a268fa0495f226c84e649d86a",
    "filename": "changelogs/unreleased/move-line-forbid-date-outside-of-period-selection.yml",
    "status": "added",
    "additions": 3,
    "deletions": 0,
    "changes": 3,
    "blob_url": "https://github.com/axelor/axelor-open-suite/blob/448b05156a2836d2d1aacf0440e9841964331edb/changelogs/unreleased/move-line-forbid-date-outside-of-period-selection.yml",
    "raw_url": "https://github.com/axelor/axelor-open-suite/raw/448b05156a2836d2d1aacf0440e9841964331edb/changelogs/unreleased/move-line-forbid-date-outside-of-period-selection.yml",
    "contents_url": "https://api.github.com/repos/axelor/axelor-open-suite/contents/changelogs/unreleased/move-line-forbid-date-outside-of-period-selection.yml?ref=448b05156a2836d2d1aacf0440e9841964331edb",
    "patch": "@@ -0,0 +1,3 @@\n+---\n+title: \"Move line: remove the possibility to select a date for a move line out of the move period.\"\n+type: fix"
  }
]
