[
  {
    "sha": "26b67daf821c25263bbcaa3fe43d7c15fe936617",
    "filename": "pom.xml",
    "status": "modified",
    "additions": 18,
    "deletions": 0,
    "changes": 18,
    "blob_url": "https://github.com/vinkalex/smart-home-2021/blob/a645e008ebcd925ad618ed3dd5abe9b28a36a754/pom.xml",
    "raw_url": "https://github.com/vinkalex/smart-home-2021/raw/a645e008ebcd925ad618ed3dd5abe9b28a36a754/pom.xml",
    "contents_url": "https://api.github.com/repos/vinkalex/smart-home-2021/contents/pom.xml?ref=a645e008ebcd925ad618ed3dd5abe9b28a36a754",
    "patch": "@@ -36,5 +36,23 @@\n             <artifactId>gson</artifactId>\n             <version>2.6.2</version>\n         </dependency>\n+        <dependency>\n+            <groupId>org.junit.jupiter</groupId>\n+            <artifactId>junit-jupiter</artifactId>\n+            <version>RELEASE</version>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.junit.jupiter</groupId>\n+            <artifactId>junit-jupiter</artifactId>\n+            <version>RELEASE</version>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.junit.jupiter</groupId>\n+            <artifactId>junit-jupiter</artifactId>\n+            <version>RELEASE</version>\n+            <scope>test</scope>\n+        </dependency>\n     </dependencies>\n </project>\n\\ No newline at end of file"
  },
  {
    "sha": "837b65ce26104606d7499e73280371a3f6d8e31f",
    "filename": "src/main/java/ru/sbt/mipt/oop/Action.java",
    "status": "added",
    "additions": 5,
    "deletions": 0,
    "changes": 5,
    "blob_url": "https://github.com/vinkalex/smart-home-2021/blob/a645e008ebcd925ad618ed3dd5abe9b28a36a754/src/main/java/ru/sbt/mipt/oop/Action.java",
    "raw_url": "https://github.com/vinkalex/smart-home-2021/raw/a645e008ebcd925ad618ed3dd5abe9b28a36a754/src/main/java/ru/sbt/mipt/oop/Action.java",
    "contents_url": "https://api.github.com/repos/vinkalex/smart-home-2021/contents/src/main/java/ru/sbt/mipt/oop/Action.java?ref=a645e008ebcd925ad618ed3dd5abe9b28a36a754",
    "patch": "@@ -0,0 +1,5 @@\n+package ru.sbt.mipt.oop;\n+\n+public interface Action {\n+    void doAction(Object entity);\n+}"
  },
  {
    "sha": "12b9e0fbbf72532151a6e6c4b5c6854d6724e876",
    "filename": "src/main/java/ru/sbt/mipt/oop/Actionable.java",
    "status": "added",
    "additions": 5,
    "deletions": 0,
    "changes": 5,
    "blob_url": "https://github.com/vinkalex/smart-home-2021/blob/a645e008ebcd925ad618ed3dd5abe9b28a36a754/src/main/java/ru/sbt/mipt/oop/Actionable.java",
    "raw_url": "https://github.com/vinkalex/smart-home-2021/raw/a645e008ebcd925ad618ed3dd5abe9b28a36a754/src/main/java/ru/sbt/mipt/oop/Actionable.java",
    "contents_url": "https://api.github.com/repos/vinkalex/smart-home-2021/contents/src/main/java/ru/sbt/mipt/oop/Actionable.java?ref=a645e008ebcd925ad618ed3dd5abe9b28a36a754",
    "patch": "@@ -0,0 +1,5 @@\n+package ru.sbt.mipt.oop;\n+\n+public interface Actionable {\n+    void handle(Action action);\n+}"
  },
  {
    "sha": "e1d2d95484016f11790945b07d01e2ee98d1a716",
    "filename": "src/main/java/ru/sbt/mipt/oop/Application.java",
    "status": "modified",
    "additions": 0,
    "deletions": 3,
    "changes": 3,
    "blob_url": "https://github.com/vinkalex/smart-home-2021/blob/a645e008ebcd925ad618ed3dd5abe9b28a36a754/src/main/java/ru/sbt/mipt/oop/Application.java",
    "raw_url": "https://github.com/vinkalex/smart-home-2021/raw/a645e008ebcd925ad618ed3dd5abe9b28a36a754/src/main/java/ru/sbt/mipt/oop/Application.java",
    "contents_url": "https://api.github.com/repos/vinkalex/smart-home-2021/contents/src/main/java/ru/sbt/mipt/oop/Application.java?ref=a645e008ebcd925ad618ed3dd5abe9b28a36a754",
    "patch": "@@ -1,8 +1,5 @@\n package ru.sbt.mipt.oop;\n \n-import java.beans.EventHandler;\n-import java.io.IOException;\n-import java.util.ArrayList;\n import java.util.Arrays;\n import java.util.Collection;\n "
  },
  {
    "sha": "343c262e4aa6806e87ee71b096213c03c26f6e39",
    "filename": "src/main/java/ru/sbt/mipt/oop/Door.java",
    "status": "modified",
    "additions": 10,
    "deletions": 1,
    "changes": 11,
    "blob_url": "https://github.com/vinkalex/smart-home-2021/blob/a645e008ebcd925ad618ed3dd5abe9b28a36a754/src/main/java/ru/sbt/mipt/oop/Door.java",
    "raw_url": "https://github.com/vinkalex/smart-home-2021/raw/a645e008ebcd925ad618ed3dd5abe9b28a36a754/src/main/java/ru/sbt/mipt/oop/Door.java",
    "contents_url": "https://api.github.com/repos/vinkalex/smart-home-2021/contents/src/main/java/ru/sbt/mipt/oop/Door.java?ref=a645e008ebcd925ad618ed3dd5abe9b28a36a754",
    "patch": "@@ -1,6 +1,6 @@\n package ru.sbt.mipt.oop;\n \n-public class Door {\n+public class Door implements Actionable{\n     private final String id;\n     private boolean isOpen;\n \n@@ -16,4 +16,13 @@ public String getId() {\n     public void setOpen(boolean open) {\n         isOpen = open;\n     }\n+\n+    public boolean isOpen() {\n+        return isOpen;\n+    }\n+\n+    @Override\n+    public void handle(Action action) {\n+        action.doAction(this);\n+    }\n }"
  },
  {
    "sha": "61789e01596af0e52eb285d04b383e791cf46bd1",
    "filename": "src/main/java/ru/sbt/mipt/oop/DoorSensorEventHandler.java",
    "status": "modified",
    "additions": 5,
    "deletions": 4,
    "changes": 9,
    "blob_url": "https://github.com/vinkalex/smart-home-2021/blob/a645e008ebcd925ad618ed3dd5abe9b28a36a754/src/main/java/ru/sbt/mipt/oop/DoorSensorEventHandler.java",
    "raw_url": "https://github.com/vinkalex/smart-home-2021/raw/a645e008ebcd925ad618ed3dd5abe9b28a36a754/src/main/java/ru/sbt/mipt/oop/DoorSensorEventHandler.java",
    "contents_url": "https://api.github.com/repos/vinkalex/smart-home-2021/contents/src/main/java/ru/sbt/mipt/oop/DoorSensorEventHandler.java?ref=a645e008ebcd925ad618ed3dd5abe9b28a36a754",
    "patch": "@@ -9,10 +9,11 @@ public void handleEvent(SmartHome smartHome, SensorEvent event) {\n     }\n \n     private void changeDoorState(SmartHome smartHome, SensorEvent event) {\n-        Door door = HomeUtils.findDoor(smartHome, event.getObjectId());\n-        if (door != null) {\n-            updateDoorState(event, door);\n-        }\n+        Action doorAction = (obj)->{\n+            if(obj instanceof Door && ((Door) obj).getId().equals(event.getObjectId()))\n+                updateDoorState(event, (Door) obj);\n+        };\n+        smartHome.handle(doorAction);\n     }\n \n     private void updateDoorState(SensorEvent event, Door door) {"
  },
  {
    "sha": "629ae951fab74dbd80b6a330fcaa45f36576ffac",
    "filename": "src/main/java/ru/sbt/mipt/oop/EventLoopProcessor.java",
    "status": "modified",
    "additions": 0,
    "deletions": 1,
    "changes": 1,
    "blob_url": "https://github.com/vinkalex/smart-home-2021/blob/a645e008ebcd925ad618ed3dd5abe9b28a36a754/src/main/java/ru/sbt/mipt/oop/EventLoopProcessor.java",
    "raw_url": "https://github.com/vinkalex/smart-home-2021/raw/a645e008ebcd925ad618ed3dd5abe9b28a36a754/src/main/java/ru/sbt/mipt/oop/EventLoopProcessor.java",
    "contents_url": "https://api.github.com/repos/vinkalex/smart-home-2021/contents/src/main/java/ru/sbt/mipt/oop/EventLoopProcessor.java?ref=a645e008ebcd925ad618ed3dd5abe9b28a36a754",
    "patch": "@@ -1,6 +1,5 @@\n package ru.sbt.mipt.oop;\n \n-import java.beans.EventHandler;\n import java.util.Collection;\n \n public class EventLoopProcessor {"
  },
  {
    "sha": "c23a1dff0cab70566f11faac38d2bd762476b1fa",
    "filename": "src/main/java/ru/sbt/mipt/oop/HallDoorEventHandler.java",
    "status": "modified",
    "additions": 22,
    "deletions": 21,
    "changes": 43,
    "blob_url": "https://github.com/vinkalex/smart-home-2021/blob/a645e008ebcd925ad618ed3dd5abe9b28a36a754/src/main/java/ru/sbt/mipt/oop/HallDoorEventHandler.java",
    "raw_url": "https://github.com/vinkalex/smart-home-2021/raw/a645e008ebcd925ad618ed3dd5abe9b28a36a754/src/main/java/ru/sbt/mipt/oop/HallDoorEventHandler.java",
    "contents_url": "https://api.github.com/repos/vinkalex/smart-home-2021/contents/src/main/java/ru/sbt/mipt/oop/HallDoorEventHandler.java?ref=a645e008ebcd925ad618ed3dd5abe9b28a36a754",
    "patch": "@@ -9,32 +9,33 @@ public void handleEvent(SmartHome smartHome, SensorEvent event) {\n     }\n \n     public void changeDoorAndLightState(SmartHome smartHome, SensorEvent event) {\n-        Door door = HomeUtils.findDoor(smartHome, event.getObjectId());\n-        if (door != null) {\n-            closeTheDoor(door);\n-            turnOffAllLights(smartHome);\n-        }\n-    }\n+        Action turnOff = (obj)->{\n+            if(obj instanceof Light)\n+                updateLightState(event, (Light) obj);\n+        };\n+\n+        Action findDoorAndTurnOffAllLights = (obj)->{\n+            if(obj instanceof Room && ((Room) obj).getName().equals(\"hall\")) {\n+                Door door = ((Room) obj).getDoor(event.getObjectId());\n+                if (door != null) {\n+                    smartHome.handle(turnOff);\n+                }\n+            }\n \n-    private void closeTheDoor(Door door) {\n-        door.setOpen(false);\n-        System.out.println(\"Door \" + door.getId() + \" was \" +  \" closed.\");\n+        };\n+\n+        smartHome.handle(findDoorAndTurnOffAllLights);\n     }\n \n-    private void turnOffAllLights(SmartHome smartHome) {\n-        for (Room room : smartHome.getRooms()) {\n-            for (Light light : room.getLights()) {\n-                light.setOn(false);\n-                SensorCommand command = new SensorCommand(CommandType.LIGHT_OFF, light.getId());\n-                CommandSender sender = new CommandSender();\n-                sender.sendCommand(command);\n-            }\n-        }\n+    private void updateLightState(SensorEvent event, Light light) {\n+        boolean newState = event.getType().equals(SensorEventType.LIGHT_ON);\n+        light.setOn(newState);\n+        SensorCommand command = new SensorCommand(CommandType.LIGHT_OFF, light.getId());\n+        CommandSender sender = new CommandSender();\n+        sender.sendCommand(command);\n     }\n \n     private boolean isHallDoorEvent(SmartHome smartHome, SensorEvent event) {\n-        return (event.getType().equals(SensorEventType.DOOR_CLOSED))\n-                && (HomeUtils.isHallDoor(smartHome, event.getObjectId()));\n+        return (event.getType().equals(SensorEventType.DOOR_CLOSED));\n     }\n-\n }"
  },
  {
    "sha": "3d9d082dccbdb589d66450a164b3ee2f4c2fe02b",
    "filename": "src/main/java/ru/sbt/mipt/oop/HomeUtils.java",
    "status": "removed",
    "additions": 0,
    "deletions": 39,
    "changes": 39,
    "blob_url": "https://github.com/vinkalex/smart-home-2021/blob/6270ec80df048b4864ef5aff050aab5977a30e1f/src/main/java/ru/sbt/mipt/oop/HomeUtils.java",
    "raw_url": "https://github.com/vinkalex/smart-home-2021/raw/6270ec80df048b4864ef5aff050aab5977a30e1f/src/main/java/ru/sbt/mipt/oop/HomeUtils.java",
    "contents_url": "https://api.github.com/repos/vinkalex/smart-home-2021/contents/src/main/java/ru/sbt/mipt/oop/HomeUtils.java?ref=6270ec80df048b4864ef5aff050aab5977a30e1f",
    "patch": "@@ -1,39 +0,0 @@\n-package ru.sbt.mipt.oop;\n-\n-public class HomeUtils {\n-\n-    public static Light findLight(SmartHome smartHome, String lightId) {\n-        for (Room room : smartHome.getRooms()) {\n-            for (Light light : room.getLights()) {\n-                if (light.getId().equals(lightId)) {\n-                    return light;\n-                }\n-            }\n-        }\n-        return null;\n-    }\n-\n-    public static Door findDoor(SmartHome smartHome, String doorId) {\n-        for (Room room : smartHome.getRooms()) {\n-            for (Door door : room.getDoors()) {\n-                if (door.getId().equals(doorId)) {\n-                    return door;\n-                }\n-            }\n-        }\n-        return null;\n-    }\n-\n-    public static boolean isHallDoor(SmartHome smartHome, String doorId) {\n-        for (Room room : smartHome.getRooms()) {\n-            for (Door door : room.getDoors()) {\n-                if (door.getId().equals(doorId)) {\n-                    if (room.getName().equals(\"hall\")) {\n-                        return true;\n-                    }\n-                }\n-            }\n-        }\n-        return false;\n-    }\n-}"
  },
  {
    "sha": "bc0a6603b8954b5a1301de252572e647e1aedee5",
    "filename": "src/main/java/ru/sbt/mipt/oop/Light.java",
    "status": "modified",
    "additions": 6,
    "deletions": 1,
    "changes": 7,
    "blob_url": "https://github.com/vinkalex/smart-home-2021/blob/a645e008ebcd925ad618ed3dd5abe9b28a36a754/src/main/java/ru/sbt/mipt/oop/Light.java",
    "raw_url": "https://github.com/vinkalex/smart-home-2021/raw/a645e008ebcd925ad618ed3dd5abe9b28a36a754/src/main/java/ru/sbt/mipt/oop/Light.java",
    "contents_url": "https://api.github.com/repos/vinkalex/smart-home-2021/contents/src/main/java/ru/sbt/mipt/oop/Light.java?ref=a645e008ebcd925ad618ed3dd5abe9b28a36a754",
    "patch": "@@ -1,6 +1,6 @@\n package ru.sbt.mipt.oop;\n \n-public class Light {\n+public class Light implements Actionable {\n     private boolean isOn;\n     private final String id;\n \n@@ -20,4 +20,9 @@ public String getId() {\n     public void setOn(boolean on) {\n         isOn = on;\n     }\n+\n+    @Override\n+    public void handle(Action action) {\n+        action.doAction(this);\n+    }\n }"
  },
  {
    "sha": "71f88b1d1da5028bd9532499d585b412f16e354b",
    "filename": "src/main/java/ru/sbt/mipt/oop/LightSensorEventHandler.java",
    "status": "modified",
    "additions": 8,
    "deletions": 5,
    "changes": 13,
    "blob_url": "https://github.com/vinkalex/smart-home-2021/blob/a645e008ebcd925ad618ed3dd5abe9b28a36a754/src/main/java/ru/sbt/mipt/oop/LightSensorEventHandler.java",
    "raw_url": "https://github.com/vinkalex/smart-home-2021/raw/a645e008ebcd925ad618ed3dd5abe9b28a36a754/src/main/java/ru/sbt/mipt/oop/LightSensorEventHandler.java",
    "contents_url": "https://api.github.com/repos/vinkalex/smart-home-2021/contents/src/main/java/ru/sbt/mipt/oop/LightSensorEventHandler.java?ref=a645e008ebcd925ad618ed3dd5abe9b28a36a754",
    "patch": "@@ -9,19 +9,22 @@ public void handleEvent(SmartHome smartHome, SensorEvent event) {\n     }\n \n     private void changeLightState(SmartHome smartHome, SensorEvent event) {\n-        Light light = HomeUtils.findLight(smartHome, event.getObjectId());\n-        if (light != null) {\n-            updateLightState(event, light);\n-        }\n+        Action lightAction = (obj) -> {\n+            if (obj instanceof Light && ((Light) obj).getId().equals(event.getObjectId()))\n+                updateLightState(event, (Light) obj);\n+        };\n+\n+        smartHome.handle(lightAction);\n     }\n \n+\n     private void updateLightState(SensorEvent event, Light light) {\n         boolean newState = event.getType().equals(SensorEventType.LIGHT_ON);\n         light.setOn(newState);\n         System.out.println(\"Light \" + light.getId() + \" was turned \" + (newState ? \" on.\" : \" off.\"));\n     }\n \n     private boolean isLightEvent(SensorEvent event) {\n-        return(event.getType().equals(SensorEventType.LIGHT_ON) || (event.getType().equals(SensorEventType.LIGHT_OFF)));\n+        return (event.getType().equals(SensorEventType.LIGHT_ON) || (event.getType().equals(SensorEventType.LIGHT_OFF)));\n     }\n }"
  },
  {
    "sha": "56a485ee1d9c38fbcc51c978f7e977cab775ac20",
    "filename": "src/main/java/ru/sbt/mipt/oop/Room.java",
    "status": "modified",
    "additions": 25,
    "deletions": 1,
    "changes": 26,
    "blob_url": "https://github.com/vinkalex/smart-home-2021/blob/a645e008ebcd925ad618ed3dd5abe9b28a36a754/src/main/java/ru/sbt/mipt/oop/Room.java",
    "raw_url": "https://github.com/vinkalex/smart-home-2021/raw/a645e008ebcd925ad618ed3dd5abe9b28a36a754/src/main/java/ru/sbt/mipt/oop/Room.java",
    "contents_url": "https://api.github.com/repos/vinkalex/smart-home-2021/contents/src/main/java/ru/sbt/mipt/oop/Room.java?ref=a645e008ebcd925ad618ed3dd5abe9b28a36a754",
    "patch": "@@ -2,7 +2,7 @@\n \n import java.util.Collection;\n \n-public class Room {\n+public class Room implements Actionable{\n     private Collection<Light> lights;\n     private Collection<Door> doors;\n     private String name;\n@@ -21,7 +21,31 @@ public Room(Collection<Light> lights, Collection<Door> doors, String name) {\n         return doors;\n     }\n \n+    public Door getDoor(String doorId) {\n+        for(Door door : doors)\n+            if(door.getId().equals(doorId))\n+                return door;\n+        return null;\n+    }\n+\n+    public Light getLight(String lightId) {\n+        for(Light light : lights)\n+            if(light.getId().equals(lightId))\n+                return light;\n+        return null;\n+    }\n+\n     public String getName() {\n         return name;\n     }\n+\n+    public void handle(Action action) {\n+        action.doAction(this);\n+\n+        for(Light light : lights)\n+            light.handle(action);\n+\n+        for (Door door : doors)\n+            door.handle(action);\n+    }\n }"
  },
  {
    "sha": "0c266007ace6c7efe101cf891c39075fcb8d7692",
    "filename": "src/main/java/ru/sbt/mipt/oop/SmartHome.java",
    "status": "modified",
    "additions": 9,
    "deletions": 3,
    "changes": 12,
    "blob_url": "https://github.com/vinkalex/smart-home-2021/blob/a645e008ebcd925ad618ed3dd5abe9b28a36a754/src/main/java/ru/sbt/mipt/oop/SmartHome.java",
    "raw_url": "https://github.com/vinkalex/smart-home-2021/raw/a645e008ebcd925ad618ed3dd5abe9b28a36a754/src/main/java/ru/sbt/mipt/oop/SmartHome.java",
    "contents_url": "https://api.github.com/repos/vinkalex/smart-home-2021/contents/src/main/java/ru/sbt/mipt/oop/SmartHome.java?ref=a645e008ebcd925ad618ed3dd5abe9b28a36a754",
    "patch": "@@ -1,11 +1,9 @@\n package ru.sbt.mipt.oop;\n \n-import com.google.gson.Gson;\n-\n import java.util.ArrayList;\n import java.util.Collection;\n \n-public class SmartHome {\n+public class SmartHome implements Actionable{\n     Collection<Room> rooms;\n \n     public SmartHome() {\n@@ -19,4 +17,12 @@ public SmartHome(Collection<Room> rooms) {\n     public Collection<Room> getRooms() {\n         return rooms;\n     }\n+\n+    public void handle(Action action) {\n+        action.doAction(this);\n+\n+        for(Room room : rooms)\n+            room.handle(action);\n+    }\n+\n }"
  },
  {
    "sha": "6f08d9c1dab3bf4fd806dc198530f9c664fc206a",
    "filename": "src/test/java/ru/sbt/mipt/oop/DoorSensorEventHandlerTest.java",
    "status": "added",
    "additions": 34,
    "deletions": 0,
    "changes": 34,
    "blob_url": "https://github.com/vinkalex/smart-home-2021/blob/a645e008ebcd925ad618ed3dd5abe9b28a36a754/src/test/java/ru/sbt/mipt/oop/DoorSensorEventHandlerTest.java",
    "raw_url": "https://github.com/vinkalex/smart-home-2021/raw/a645e008ebcd925ad618ed3dd5abe9b28a36a754/src/test/java/ru/sbt/mipt/oop/DoorSensorEventHandlerTest.java",
    "contents_url": "https://api.github.com/repos/vinkalex/smart-home-2021/contents/src/test/java/ru/sbt/mipt/oop/DoorSensorEventHandlerTest.java?ref=a645e008ebcd925ad618ed3dd5abe9b28a36a754",
    "patch": "@@ -0,0 +1,34 @@\n+package ru.sbt.mipt.oop;\n+\n+import org.junit.jupiter.api.Test;\n+import java.util.Arrays;\n+\n+import static org.junit.jupiter.api.Assertions.*;\n+\n+class DoorSensorEventHandlerTest {\n+    @Test\n+    public void testChangingDoorState() {\n+        Room kitchen = new Room(Arrays.asList(new Light(\"1\", false), new Light(\"2\", true)),\n+                Arrays.asList(new Door(false, \"1\")),\n+                \"kitchen\");\n+        SmartHome smartHome = new SmartHome(Arrays.asList(kitchen));\n+        SensorEvent event = new SensorEvent(SensorEventType.DOOR_OPEN, \"1\");\n+        SensorEventHandler handler = new DoorSensorEventHandler();\n+        handler.handleEvent(smartHome, event);\n+\n+        assertTrue(kitchen.getDoor(\"1\").isOpen());\n+    }\n+\n+    @Test\n+    public void testRemainingDoorState() {\n+        Room kitchen = new Room(Arrays.asList(new Light(\"1\", false), new Light(\"2\", true)),\n+                Arrays.asList(new Door(true, \"1\")),\n+                \"kitchen\");\n+        SmartHome smartHome = new SmartHome(Arrays.asList(kitchen));\n+        SensorEvent event = new SensorEvent(SensorEventType.DOOR_OPEN, \"1\");\n+        SensorEventHandler handler = new DoorSensorEventHandler();\n+        handler.handleEvent(smartHome, event);\n+\n+        assertTrue(kitchen.getDoor(\"1\").isOpen());\n+    }\n+}\n\\ No newline at end of file"
  },
  {
    "sha": "17b2e5e872e4e783309ef5f9a457e82c9cc04474",
    "filename": "src/test/java/ru/sbt/mipt/oop/HallDoorEventHandlerTest.java",
    "status": "added",
    "additions": 46,
    "deletions": 0,
    "changes": 46,
    "blob_url": "https://github.com/vinkalex/smart-home-2021/blob/a645e008ebcd925ad618ed3dd5abe9b28a36a754/src/test/java/ru/sbt/mipt/oop/HallDoorEventHandlerTest.java",
    "raw_url": "https://github.com/vinkalex/smart-home-2021/raw/a645e008ebcd925ad618ed3dd5abe9b28a36a754/src/test/java/ru/sbt/mipt/oop/HallDoorEventHandlerTest.java",
    "contents_url": "https://api.github.com/repos/vinkalex/smart-home-2021/contents/src/test/java/ru/sbt/mipt/oop/HallDoorEventHandlerTest.java?ref=a645e008ebcd925ad618ed3dd5abe9b28a36a754",
    "patch": "@@ -0,0 +1,46 @@\n+package ru.sbt.mipt.oop;\n+\n+import org.junit.jupiter.api.Test;\n+\n+import java.util.Arrays;\n+\n+import static org.junit.jupiter.api.Assertions.*;\n+\n+class HallDoorEventHandlerTest {\n+    @Test\n+    public void testAllLightsOffAndDoorClosed() {\n+        Room hall = new Room(Arrays.asList(new Light(\"1\", false), new Light(\"2\", true)),\n+                Arrays.asList(new Door(false, \"1\")),\n+                \"hall\");\n+        Room bedroom = new Room(Arrays.asList(new Light(\"4\", true), new Light(\"5\", false), new Light(\"6\", false)),\n+                Arrays.asList(new Door(true, \"3\")),\n+                \"bedroom\");\n+        SmartHome smartHome = new SmartHome(Arrays.asList(hall, bedroom));\n+        SensorEvent event = new SensorEvent(SensorEventType.DOOR_CLOSED, \"1\");\n+        SensorEventHandler handler = new HallDoorEventHandler();\n+        handler.handleEvent(smartHome, event);\n+\n+        for (Light light : hall.getLights()) {\n+            assertFalse(light.isOn());\n+        }\n+\n+        assertFalse(hall.getDoor(\"1\").isOpen());\n+    }\n+\n+    @Test\n+    public void testDoNotHandleDoorExceptForHallDoor() {\n+        Room hall = new Room(Arrays.asList(new Light(\"1\", false), new Light(\"2\", true)),\n+                Arrays.asList(new Door(false, \"1\")),\n+                \"hall\");\n+        Room bedroom = new Room(Arrays.asList(new Light(\"4\", true), new Light(\"5\", false), new Light(\"6\", false)),\n+                Arrays.asList(new Door(true, \"3\")),\n+                \"bedroom\");\n+        SmartHome smartHome = new SmartHome(Arrays.asList(hall, bedroom));\n+        SensorEvent event = new SensorEvent(SensorEventType.DOOR_CLOSED, \"3\");\n+\n+        SensorEventHandler handler = new HallDoorEventHandler();\n+        handler.handleEvent(smartHome, event);\n+\n+        assertTrue(bedroom.getDoor(\"3\").isOpen());\n+    }\n+}\n\\ No newline at end of file"
  },
  {
    "sha": "4cdac2b2aa88171f8c6b04c13280f1cd30c14001",
    "filename": "src/test/java/ru/sbt/mipt/oop/LightSensorEventHandlerTest.java",
    "status": "added",
    "additions": 35,
    "deletions": 0,
    "changes": 35,
    "blob_url": "https://github.com/vinkalex/smart-home-2021/blob/a645e008ebcd925ad618ed3dd5abe9b28a36a754/src/test/java/ru/sbt/mipt/oop/LightSensorEventHandlerTest.java",
    "raw_url": "https://github.com/vinkalex/smart-home-2021/raw/a645e008ebcd925ad618ed3dd5abe9b28a36a754/src/test/java/ru/sbt/mipt/oop/LightSensorEventHandlerTest.java",
    "contents_url": "https://api.github.com/repos/vinkalex/smart-home-2021/contents/src/test/java/ru/sbt/mipt/oop/LightSensorEventHandlerTest.java?ref=a645e008ebcd925ad618ed3dd5abe9b28a36a754",
    "patch": "@@ -0,0 +1,35 @@\n+package ru.sbt.mipt.oop;\n+\n+import org.junit.jupiter.api.Test;\n+\n+import java.util.Arrays;\n+\n+import static org.junit.jupiter.api.Assertions.*;\n+\n+class LightSensorEventHandlerTest {\n+    @Test\n+    public void testChangingLightState() {\n+        Room kitchen = new Room(Arrays.asList(new Light(\"1\", false), new Light(\"2\", true)),\n+                Arrays.asList(new Door(false, \"1\")),\n+                \"kitchen\");\n+        SmartHome smartHome = new SmartHome(Arrays.asList(kitchen));\n+        SensorEvent event = new SensorEvent(SensorEventType.LIGHT_ON, \"1\");\n+        SensorEventHandler handler = new LightSensorEventHandler();\n+        handler.handleEvent(smartHome, event);\n+\n+        assertTrue(kitchen.getLight(\"1\").isOn());\n+    }\n+\n+    @Test\n+    public void testRemainingLightState() {\n+        Room kitchen = new Room(Arrays.asList(new Light(\"1\", true), new Light(\"2\", true)),\n+                Arrays.asList(new Door(true, \"1\")),\n+                \"kitchen\");\n+        SmartHome smartHome = new SmartHome(Arrays.asList(kitchen));\n+        SensorEvent event = new SensorEvent(SensorEventType.LIGHT_ON, \"1\");\n+        SensorEventHandler handler = new LightSensorEventHandler();\n+        handler.handleEvent(smartHome, event);\n+\n+        assertTrue(kitchen.getLight(\"1\").isOn());\n+    }\n+}\n\\ No newline at end of file"
  }
]
