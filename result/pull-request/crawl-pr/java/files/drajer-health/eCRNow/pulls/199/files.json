[
  {
    "sha": "f4aa5563cca0f7bc8c16f9cdf9376c27701de958",
    "filename": "src/main/java/com/drajer/ecrapp/service/impl/EicrServiceImpl.java",
    "status": "modified",
    "additions": 1,
    "deletions": 2,
    "changes": 3,
    "blob_url": "https://github.com/drajer-health/eCRNow/blob/447d9bd88440a4185795121115fd50631ead9ab1/src/main/java/com/drajer/ecrapp/service/impl/EicrServiceImpl.java",
    "raw_url": "https://github.com/drajer-health/eCRNow/raw/447d9bd88440a4185795121115fd50631ead9ab1/src/main/java/com/drajer/ecrapp/service/impl/EicrServiceImpl.java",
    "contents_url": "https://api.github.com/repos/drajer-health/eCRNow/contents/src/main/java/com/drajer/ecrapp/service/impl/EicrServiceImpl.java?ref=447d9bd88440a4185795121115fd50631ead9ab1",
    "patch": "@@ -212,9 +212,8 @@ public void submitDocRefToEhr(DocumentReference docRef, Eicr ecr) {\n \n       if (outcome.getCreated()) {\n         logger.info(\"Successfully sent RR to fhir\");\n-\n         // Update the EHR Doc Ref Id in the eICR table if it was submitted successfully.\n-        ecr.setEhrDocRefId(docRef.getId());\n+        ecr.setEhrDocRefId(outcome.getId().getIdPart());\n         saveOrUpdate(ecr);\n \n       } else {"
  },
  {
    "sha": "2311d564d49508fdd7b38c7d09581a8112395c77",
    "filename": "src/main/java/com/drajer/sof/utils/R4ResourcesData.java",
    "status": "modified",
    "additions": 10,
    "deletions": 13,
    "changes": 23,
    "blob_url": "https://github.com/drajer-health/eCRNow/blob/447d9bd88440a4185795121115fd50631ead9ab1/src/main/java/com/drajer/sof/utils/R4ResourcesData.java",
    "raw_url": "https://github.com/drajer-health/eCRNow/raw/447d9bd88440a4185795121115fd50631ead9ab1/src/main/java/com/drajer/sof/utils/R4ResourcesData.java",
    "contents_url": "https://api.github.com/repos/drajer-health/eCRNow/contents/src/main/java/com/drajer/sof/utils/R4ResourcesData.java?ref=447d9bd88440a4185795121115fd50631ead9ab1",
    "patch": "@@ -35,7 +35,7 @@\n   private static final String CONDITION = \"Condition\";\n \n   private static final String OBSERVATION_SOCIAL_HISTORY = \"social-history\";\n-  private static final String OBSERVATION_STATUS_ENTERED_IN_ERROR = \"entered-in-error\";\n+  private static final String OBSERVATION_STATUS_ENTERED_IN_HISTORY = \"entered-in-error\";\n \n   private static final String ENCOUNTER_DIAGNOSIS_CONDITION = \"encounter-diagnosis\";\n   private static final String PROBLEM_LIST_CONDITION = \"problem-list-item\";\n@@ -210,7 +210,7 @@ public Encounter getEncounterData(\n     List<CodeableConcept> observationCodes = new ArrayList<>();\n     // Filter Observations based on Encounter Reference\n     if (encounter != null && !encounter.getIdElement().getValue().isEmpty() && bundle != null) {\n-      bundle = filterObservationByStatus(bundle, OBSERVATION_STATUS_ENTERED_IN_ERROR);\n+      bundle = filterObservationByStatus(bundle, OBSERVATION_STATUS_ENTERED_IN_HISTORY);\n       for (BundleEntryComponent entry : bundle.getEntry()) {\n         Observation observation = (Observation) entry.getResource();\n         if (!observation.getEncounter().isEmpty()\n@@ -226,7 +226,7 @@ public Encounter getEncounterData(\n       // If Encounter Id is not present using start and end dates to filter\n       // Observations\n     } else if (bundle != null) {\n-      bundle = filterObservationByStatus(bundle, OBSERVATION_STATUS_ENTERED_IN_ERROR);\n+      bundle = filterObservationByStatus(bundle, OBSERVATION_STATUS_ENTERED_IN_HISTORY);\n       for (BundleEntryComponent entry : bundle.getEntry()) {\n         Observation observation = (Observation) entry.getResource();\n         // Checking If Issued Date is present in Observation resource\n@@ -276,7 +276,7 @@ public Encounter getEncounterData(\n                 QueryConstants.LOINC_CODE_SYSTEM);\n     List<Observation> observations = new ArrayList<>();\n     if (bundle != null) {\n-      bundle = filterObservationByStatus(bundle, OBSERVATION_STATUS_ENTERED_IN_ERROR);\n+      bundle = filterObservationByStatus(bundle, OBSERVATION_STATUS_ENTERED_IN_HISTORY);\n       observations = filterObservation(bundle, encounter, start, end);\n     }\n     return observations;\n@@ -301,9 +301,8 @@ public Encounter getEncounterData(\n                 QueryConstants.LOINC_CODE_SYSTEM);\n     List<Observation> observations = new ArrayList<>();\n     if (bundle != null) {\n+      bundle = filterObservationByStatus(bundle, OBSERVATION_STATUS_ENTERED_IN_HISTORY);\n       bundle = filterObservationsBundleByCategory(bundle, OBSERVATION_SOCIAL_HISTORY);\n-      bundle = filterObservationByStatus(bundle, OBSERVATION_STATUS_ENTERED_IN_ERROR);\n-\n       observations = filterObservation(bundle, encounter, start, end);\n     }\n \n@@ -319,14 +318,12 @@ public Encounter getEncounterData(\n                   QueryConstants.SNOMED_CODE_SYSTEM);\n       List<Observation> travelobs = new ArrayList<>();\n       if (travelHisWithSNOMEDCodesbundle != null) {\n-\n+        travelHisWithSNOMEDCodesbundle =\n+            filterObservationByStatus(\n+                travelHisWithSNOMEDCodesbundle, OBSERVATION_STATUS_ENTERED_IN_HISTORY);\n         travelHisWithSNOMEDCodesbundle =\n             filterObservationsBundleByCategory(\n                 travelHisWithSNOMEDCodesbundle, OBSERVATION_SOCIAL_HISTORY);\n-        travelHisWithSNOMEDCodesbundle =\n-            filterObservationByStatus(\n-                travelHisWithSNOMEDCodesbundle, OBSERVATION_STATUS_ENTERED_IN_ERROR);\n-\n         travelobs = filterObservation(travelHisWithSNOMEDCodesbundle, encounter, start, end);\n       }\n       if (!travelobs.isEmpty()) {\n@@ -402,7 +399,7 @@ private Bundle filterObservationsBundleByCategory(\n                   QueryConstants.SNOMED_CODE_SYSTEM);\n       if (occupationCodesbundle != null) {\n         occupationCodesbundle =\n-            filterObservationByStatus(occupationCodesbundle, OBSERVATION_STATUS_ENTERED_IN_ERROR);\n+            filterObservationByStatus(occupationCodesbundle, OBSERVATION_STATUS_ENTERED_IN_HISTORY);\n         for (BundleEntryComponent entryComp : occupationCodesbundle.getEntry()) {\n           observations.add((Observation) entryComp.getResource());\n         }\n@@ -422,7 +419,7 @@ private Bundle filterObservationsBundleByCategory(\n \n       if (occupationCodesbundle != null) {\n         occupationCodesbundle =\n-            filterObservationByStatus(occupationCodesbundle, OBSERVATION_STATUS_ENTERED_IN_ERROR);\n+            filterObservationByStatus(occupationCodesbundle, OBSERVATION_STATUS_ENTERED_IN_HISTORY);\n         for (BundleEntryComponent entryComp : occupationCodesbundle.getEntry()) {\n           observations.add((Observation) entryComp.getResource());\n         }"
  }
]
