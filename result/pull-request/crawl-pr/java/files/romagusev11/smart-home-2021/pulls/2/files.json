[
  {
    "sha": "b175a1d7cbd1db2288608457c7ec62383e284a7b",
    "filename": "pom.xml",
    "status": "modified",
    "additions": 8,
    "deletions": 2,
    "changes": 10,
    "blob_url": "https://github.com/romagusev11/smart-home-2021/blob/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/pom.xml",
    "raw_url": "https://github.com/romagusev11/smart-home-2021/raw/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/pom.xml",
    "contents_url": "https://api.github.com/repos/romagusev11/smart-home-2021/contents/pom.xml?ref=4e0421ff07b5d5d19de43f1b8596b8fcbd72383c",
    "patch": "@@ -17,8 +17,8 @@\n                 <artifactId>maven-compiler-plugin</artifactId>\n                 <version>3.1</version>\n                 <configuration>\n-                    <source>1.8</source>\n-                    <target>1.8</target>\n+                    <source>10</source>\n+                    <target>10</target>\n                 </configuration>\n             </plugin>\n         </plugins>\n@@ -36,5 +36,11 @@\n             <artifactId>gson</artifactId>\n             <version>2.6.2</version>\n         </dependency>\n+        <dependency>\n+            <groupId>org.junit.jupiter</groupId>\n+            <artifactId>junit-jupiter</artifactId>\n+            <version>RELEASE</version>\n+            <scope>test</scope>\n+        </dependency>\n     </dependencies>\n </project>\n\\ No newline at end of file"
  },
  {
    "sha": "7225bd2b960ec0a31a6974686a605eff5ff53980",
    "filename": "src/main/java/ru/sbt/mipt/oop/HomeBuilder.java",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/romagusev11/smart-home-2021/blob/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/main/java/ru/sbt/mipt/oop/HomeBuilder.java",
    "raw_url": "https://github.com/romagusev11/smart-home-2021/raw/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/main/java/ru/sbt/mipt/oop/HomeBuilder.java",
    "contents_url": "https://api.github.com/repos/romagusev11/smart-home-2021/contents/src/main/java/ru/sbt/mipt/oop/HomeBuilder.java?ref=4e0421ff07b5d5d19de43f1b8596b8fcbd72383c",
    "patch": "@@ -33,7 +33,7 @@ public static void main(String[] args) throws IOException {\n         Gson gson = new GsonBuilder().setPrettyPrinting().create();\n         String jsonString = gson.toJson(smartHome);\n         System.out.println(jsonString);\n-        Path path = Paths.get(\"output.js\");\n+        Path path = Paths.get(args[0]);\n         try (BufferedWriter writer = Files.newBufferedWriter(path)) {\n             writer.write(jsonString);\n         }"
  },
  {
    "sha": "4a3520b5ba2c1eb2c244e4b7b7c8368a962c15aa",
    "filename": "src/main/java/ru/sbt/mipt/oop/actions/Action.java",
    "status": "added",
    "additions": 5,
    "deletions": 0,
    "changes": 5,
    "blob_url": "https://github.com/romagusev11/smart-home-2021/blob/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/main/java/ru/sbt/mipt/oop/actions/Action.java",
    "raw_url": "https://github.com/romagusev11/smart-home-2021/raw/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/main/java/ru/sbt/mipt/oop/actions/Action.java",
    "contents_url": "https://api.github.com/repos/romagusev11/smart-home-2021/contents/src/main/java/ru/sbt/mipt/oop/actions/Action.java?ref=4e0421ff07b5d5d19de43f1b8596b8fcbd72383c",
    "patch": "@@ -0,0 +1,5 @@\n+package ru.sbt.mipt.oop.actions;\n+\n+public interface Action {\n+    void execute(Actionable object);\n+}"
  },
  {
    "sha": "c14474119a108fe54eb3bbe33d9de2738ac38d06",
    "filename": "src/main/java/ru/sbt/mipt/oop/actions/Actionable.java",
    "status": "added",
    "additions": 5,
    "deletions": 0,
    "changes": 5,
    "blob_url": "https://github.com/romagusev11/smart-home-2021/blob/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/main/java/ru/sbt/mipt/oop/actions/Actionable.java",
    "raw_url": "https://github.com/romagusev11/smart-home-2021/raw/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/main/java/ru/sbt/mipt/oop/actions/Actionable.java",
    "contents_url": "https://api.github.com/repos/romagusev11/smart-home-2021/contents/src/main/java/ru/sbt/mipt/oop/actions/Actionable.java?ref=4e0421ff07b5d5d19de43f1b8596b8fcbd72383c",
    "patch": "@@ -0,0 +1,5 @@\n+package ru.sbt.mipt.oop.actions;\n+\n+public interface Actionable {\n+    void execute(Action action);\n+}"
  },
  {
    "sha": "f4f7be03c55a1a9f9da4f2a9b2a947506dc3d83a",
    "filename": "src/main/java/ru/sbt/mipt/oop/actions/CloseDoorAction.java",
    "status": "added",
    "additions": 27,
    "deletions": 0,
    "changes": 27,
    "blob_url": "https://github.com/romagusev11/smart-home-2021/blob/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/main/java/ru/sbt/mipt/oop/actions/CloseDoorAction.java",
    "raw_url": "https://github.com/romagusev11/smart-home-2021/raw/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/main/java/ru/sbt/mipt/oop/actions/CloseDoorAction.java",
    "contents_url": "https://api.github.com/repos/romagusev11/smart-home-2021/contents/src/main/java/ru/sbt/mipt/oop/actions/CloseDoorAction.java?ref=4e0421ff07b5d5d19de43f1b8596b8fcbd72383c",
    "patch": "@@ -0,0 +1,27 @@\n+package ru.sbt.mipt.oop.actions;\n+\n+import ru.sbt.mipt.oop.objects.Door;\n+\n+public class CloseDoorAction implements Action {\n+    private final String doorId;\n+    private boolean result = false;\n+\n+    public CloseDoorAction(String doorId) {\n+        this.doorId = doorId;\n+    }\n+\n+    @Override\n+    public void execute(Actionable object) {\n+        if (object instanceof Door) {\n+            Door door = (Door) object;\n+            if (door.getId().equals(doorId)) {\n+                door.setOpen(false);\n+                result = true;\n+            }\n+        }\n+    }\n+\n+    public boolean payload() {\n+        return result;\n+    }\n+}\n\\ No newline at end of file"
  },
  {
    "sha": "1295ebf0d37fc972562bcbdd5ba850dd986be3c9",
    "filename": "src/main/java/ru/sbt/mipt/oop/actions/FindDoorByIdAction.java",
    "status": "added",
    "additions": 26,
    "deletions": 0,
    "changes": 26,
    "blob_url": "https://github.com/romagusev11/smart-home-2021/blob/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/main/java/ru/sbt/mipt/oop/actions/FindDoorByIdAction.java",
    "raw_url": "https://github.com/romagusev11/smart-home-2021/raw/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/main/java/ru/sbt/mipt/oop/actions/FindDoorByIdAction.java",
    "contents_url": "https://api.github.com/repos/romagusev11/smart-home-2021/contents/src/main/java/ru/sbt/mipt/oop/actions/FindDoorByIdAction.java?ref=4e0421ff07b5d5d19de43f1b8596b8fcbd72383c",
    "patch": "@@ -0,0 +1,26 @@\n+package ru.sbt.mipt.oop.actions;\n+\n+import ru.sbt.mipt.oop.objects.Door;\n+\n+public class FindDoorByIdAction implements Action{\n+    private final String doorId;\n+    private Door result = null;\n+\n+    public FindDoorByIdAction(String doorId) {\n+        this.doorId = doorId;\n+    }\n+\n+    @Override\n+    public void execute(Actionable object) {\n+        if (object instanceof Door) {\n+            Door door = (Door) object;\n+            if (door.getId().equals(doorId)) {\n+                result = door;\n+            }\n+        }\n+    }\n+\n+    public Door payload() {\n+        return result;\n+    }\n+}"
  },
  {
    "sha": "bf39fb07e6251020c60b71633a8f7be77774fa30",
    "filename": "src/main/java/ru/sbt/mipt/oop/actions/FindLightByIdAction.java",
    "status": "added",
    "additions": 26,
    "deletions": 0,
    "changes": 26,
    "blob_url": "https://github.com/romagusev11/smart-home-2021/blob/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/main/java/ru/sbt/mipt/oop/actions/FindLightByIdAction.java",
    "raw_url": "https://github.com/romagusev11/smart-home-2021/raw/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/main/java/ru/sbt/mipt/oop/actions/FindLightByIdAction.java",
    "contents_url": "https://api.github.com/repos/romagusev11/smart-home-2021/contents/src/main/java/ru/sbt/mipt/oop/actions/FindLightByIdAction.java?ref=4e0421ff07b5d5d19de43f1b8596b8fcbd72383c",
    "patch": "@@ -0,0 +1,26 @@\n+package ru.sbt.mipt.oop.actions;\n+\n+import ru.sbt.mipt.oop.objects.Light;\n+\n+public class FindLightByIdAction implements Action{\n+    private final String lightId;\n+    private Light result = null;\n+\n+    public FindLightByIdAction(String lightId) {\n+        this.lightId = lightId;\n+    }\n+\n+    @Override\n+    public void execute(Actionable object) {\n+        if (object instanceof Light) {\n+            Light light = (Light) object;\n+            if (light.getId().equals(lightId)) {\n+                result = light;\n+            }\n+        }\n+    }\n+\n+    public Light payload() {\n+        return result;\n+    }\n+}"
  },
  {
    "sha": "f2e26665618796657022008c5e1870c1042242c5",
    "filename": "src/main/java/ru/sbt/mipt/oop/actions/IsDoorInRoomAction.java",
    "status": "added",
    "additions": 32,
    "deletions": 0,
    "changes": 32,
    "blob_url": "https://github.com/romagusev11/smart-home-2021/blob/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/main/java/ru/sbt/mipt/oop/actions/IsDoorInRoomAction.java",
    "raw_url": "https://github.com/romagusev11/smart-home-2021/raw/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/main/java/ru/sbt/mipt/oop/actions/IsDoorInRoomAction.java",
    "contents_url": "https://api.github.com/repos/romagusev11/smart-home-2021/contents/src/main/java/ru/sbt/mipt/oop/actions/IsDoorInRoomAction.java?ref=4e0421ff07b5d5d19de43f1b8596b8fcbd72383c",
    "patch": "@@ -0,0 +1,32 @@\n+package ru.sbt.mipt.oop.actions;\n+\n+import ru.sbt.mipt.oop.objects.Door;\n+import ru.sbt.mipt.oop.objects.Room;\n+\n+public class IsDoorInRoomAction implements Action {\n+    private final String doorId;\n+    private final String roomName;\n+    private String currentRoom = \"\";\n+    private boolean result = false;\n+\n+    public IsDoorInRoomAction(String doorId, String roomName) {\n+        this.doorId = doorId;\n+        this.roomName = roomName;\n+    }\n+\n+    @Override\n+    public void execute(Actionable object) {\n+        if (object instanceof Room) {\n+            currentRoom = ((Room) object).getName();\n+        }\n+        if (object instanceof Door) {\n+            if (((Door) object).getId().equals(doorId) && currentRoom.equals(roomName)) {\n+                result = true;\n+            }\n+        }\n+    }\n+\n+    public boolean payload() {\n+        return result;\n+    }\n+}"
  },
  {
    "sha": "076b5e664eaae4505301655f3211dc352236b85d",
    "filename": "src/main/java/ru/sbt/mipt/oop/actions/OpenDoorAction.java",
    "status": "added",
    "additions": 27,
    "deletions": 0,
    "changes": 27,
    "blob_url": "https://github.com/romagusev11/smart-home-2021/blob/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/main/java/ru/sbt/mipt/oop/actions/OpenDoorAction.java",
    "raw_url": "https://github.com/romagusev11/smart-home-2021/raw/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/main/java/ru/sbt/mipt/oop/actions/OpenDoorAction.java",
    "contents_url": "https://api.github.com/repos/romagusev11/smart-home-2021/contents/src/main/java/ru/sbt/mipt/oop/actions/OpenDoorAction.java?ref=4e0421ff07b5d5d19de43f1b8596b8fcbd72383c",
    "patch": "@@ -0,0 +1,27 @@\n+package ru.sbt.mipt.oop.actions;\n+\n+import ru.sbt.mipt.oop.objects.Door;\n+\n+public class OpenDoorAction implements Action {\n+    private final String doorId;\n+    private boolean result = false;\n+\n+    public OpenDoorAction(String doorId) {\n+        this.doorId = doorId;\n+    }\n+\n+    @Override\n+    public void execute(Actionable object) {\n+        if (object instanceof Door) {\n+            Door door = (Door) object;\n+            if (door.getId().equals(doorId)) {\n+                door.setOpen(true);\n+                result = true;\n+            }\n+        }\n+    }\n+\n+    public boolean payload() {\n+        return result;\n+    }\n+}"
  },
  {
    "sha": "6c9ab4c49558b214b3f55fa2061ea28f7328fd12",
    "filename": "src/main/java/ru/sbt/mipt/oop/actions/SmartHomeActions.java",
    "status": "removed",
    "additions": 0,
    "deletions": 29,
    "changes": 29,
    "blob_url": "https://github.com/romagusev11/smart-home-2021/blob/223da18ea0c17af20924e6980a404e0eab3eafa8/src/main/java/ru/sbt/mipt/oop/actions/SmartHomeActions.java",
    "raw_url": "https://github.com/romagusev11/smart-home-2021/raw/223da18ea0c17af20924e6980a404e0eab3eafa8/src/main/java/ru/sbt/mipt/oop/actions/SmartHomeActions.java",
    "contents_url": "https://api.github.com/repos/romagusev11/smart-home-2021/contents/src/main/java/ru/sbt/mipt/oop/actions/SmartHomeActions.java?ref=223da18ea0c17af20924e6980a404e0eab3eafa8",
    "patch": "@@ -1,29 +0,0 @@\n-package ru.sbt.mipt.oop.actions;\n-\n-import ru.sbt.mipt.oop.commands.CommandSender;\n-import ru.sbt.mipt.oop.commands.CommandType;\n-import ru.sbt.mipt.oop.commands.SensorCommand;\n-import ru.sbt.mipt.oop.objects.Door;\n-import ru.sbt.mipt.oop.objects.Light;\n-import ru.sbt.mipt.oop.objects.Room;\n-import ru.sbt.mipt.oop.objects.SmartHome;\n-\n-public class SmartHomeActions {\n-    static public void closeDoor(Door door) {\n-        door.setOpen(false);\n-    }\n-\n-    static public void openDoor(Door door) {\n-        door.setOpen(true);\n-    }\n-\n-    static public void turnOffLightInHome(SmartHome smartHome, CommandSender sender) {\n-        for (Room homeRoom : smartHome.getRooms()) {\n-            for (Light light : homeRoom.getLights()) {\n-                light.setOn(false);\n-                SensorCommand command = new SensorCommand(CommandType.LIGHT_OFF, light.getId());\n-                sender.sendCommand(command);\n-            }\n-        }\n-    }\n-}"
  },
  {
    "sha": "e769ce1dc9e2eb75de156cfd1b016892e2f4bfd6",
    "filename": "src/main/java/ru/sbt/mipt/oop/actions/TurnLightOffAction.java",
    "status": "added",
    "additions": 27,
    "deletions": 0,
    "changes": 27,
    "blob_url": "https://github.com/romagusev11/smart-home-2021/blob/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/main/java/ru/sbt/mipt/oop/actions/TurnLightOffAction.java",
    "raw_url": "https://github.com/romagusev11/smart-home-2021/raw/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/main/java/ru/sbt/mipt/oop/actions/TurnLightOffAction.java",
    "contents_url": "https://api.github.com/repos/romagusev11/smart-home-2021/contents/src/main/java/ru/sbt/mipt/oop/actions/TurnLightOffAction.java?ref=4e0421ff07b5d5d19de43f1b8596b8fcbd72383c",
    "patch": "@@ -0,0 +1,27 @@\n+package ru.sbt.mipt.oop.actions;\n+\n+import ru.sbt.mipt.oop.objects.Light;\n+\n+public class TurnLightOffAction implements Action{\n+    private final String lightId;\n+    private boolean result = false;\n+\n+    public TurnLightOffAction(String lightId) {\n+        this.lightId = lightId;\n+    }\n+\n+    @Override\n+    public void execute(Actionable object) {\n+        if (object instanceof Light) {\n+            Light light = (Light) object;\n+            if (light.getId().equals(lightId)) {\n+                light.setOn(false);\n+                result = true;\n+            }\n+        }\n+    }\n+\n+    public boolean payload() {\n+        return result;\n+    }\n+}"
  },
  {
    "sha": "21aa8cd9d6e8212dde5fe33d2f58d8cf9b531f8b",
    "filename": "src/main/java/ru/sbt/mipt/oop/actions/TurnLightOnAction.java",
    "status": "added",
    "additions": 27,
    "deletions": 0,
    "changes": 27,
    "blob_url": "https://github.com/romagusev11/smart-home-2021/blob/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/main/java/ru/sbt/mipt/oop/actions/TurnLightOnAction.java",
    "raw_url": "https://github.com/romagusev11/smart-home-2021/raw/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/main/java/ru/sbt/mipt/oop/actions/TurnLightOnAction.java",
    "contents_url": "https://api.github.com/repos/romagusev11/smart-home-2021/contents/src/main/java/ru/sbt/mipt/oop/actions/TurnLightOnAction.java?ref=4e0421ff07b5d5d19de43f1b8596b8fcbd72383c",
    "patch": "@@ -0,0 +1,27 @@\n+package ru.sbt.mipt.oop.actions;\n+\n+import ru.sbt.mipt.oop.objects.Light;\n+\n+public class TurnLightOnAction implements Action {\n+    private final String lightId;\n+    private boolean result = false;\n+\n+    public TurnLightOnAction(String lightId) {\n+        this.lightId = lightId;\n+    }\n+\n+    @Override\n+    public void execute(Actionable object) {\n+        if (object instanceof Light) {\n+            Light light = (Light) object;\n+            if (light.getId().equals(lightId)) {\n+                light.setOn(true);\n+                result = true;\n+            }\n+        }\n+    }\n+\n+    public boolean payload() {\n+        return result;\n+    }\n+}"
  },
  {
    "sha": "d624773e7dc658688802e20ac967be4fa8bc8fe0",
    "filename": "src/main/java/ru/sbt/mipt/oop/actions/TurnOffLightInHomeAction.java",
    "status": "added",
    "additions": 24,
    "deletions": 0,
    "changes": 24,
    "blob_url": "https://github.com/romagusev11/smart-home-2021/blob/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/main/java/ru/sbt/mipt/oop/actions/TurnOffLightInHomeAction.java",
    "raw_url": "https://github.com/romagusev11/smart-home-2021/raw/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/main/java/ru/sbt/mipt/oop/actions/TurnOffLightInHomeAction.java",
    "contents_url": "https://api.github.com/repos/romagusev11/smart-home-2021/contents/src/main/java/ru/sbt/mipt/oop/actions/TurnOffLightInHomeAction.java?ref=4e0421ff07b5d5d19de43f1b8596b8fcbd72383c",
    "patch": "@@ -0,0 +1,24 @@\n+package ru.sbt.mipt.oop.actions;\n+\n+import ru.sbt.mipt.oop.commands.CommandSender;\n+import ru.sbt.mipt.oop.commands.CommandType;\n+import ru.sbt.mipt.oop.commands.SensorCommand;\n+import ru.sbt.mipt.oop.objects.Light;\n+\n+public class TurnOffLightInHomeAction implements Action {\n+    private final CommandSender sender;\n+\n+    public TurnOffLightInHomeAction(CommandSender sender) {\n+        this.sender = sender;\n+    }\n+\n+    @Override\n+    public void execute(Actionable object) {\n+        if (object instanceof Light) {\n+            Light light = (Light) object;\n+            light.setOn(false);\n+            SensorCommand command = new SensorCommand(CommandType.LIGHT_OFF, light.getId());\n+            sender.sendCommand(command);\n+        }\n+    }\n+}"
  },
  {
    "sha": "fc30cdf57eb04dacec2d85766fdac5f1ad7ca680",
    "filename": "src/main/java/ru/sbt/mipt/oop/events/DoorEventHandler.java",
    "status": "modified",
    "additions": 21,
    "deletions": 22,
    "changes": 43,
    "blob_url": "https://github.com/romagusev11/smart-home-2021/blob/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/main/java/ru/sbt/mipt/oop/events/DoorEventHandler.java",
    "raw_url": "https://github.com/romagusev11/smart-home-2021/raw/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/main/java/ru/sbt/mipt/oop/events/DoorEventHandler.java",
    "contents_url": "https://api.github.com/repos/romagusev11/smart-home-2021/contents/src/main/java/ru/sbt/mipt/oop/events/DoorEventHandler.java?ref=4e0421ff07b5d5d19de43f1b8596b8fcbd72383c",
    "patch": "@@ -1,9 +1,9 @@\n package ru.sbt.mipt.oop.events;\n \n-import ru.sbt.mipt.oop.actions.SmartHomeActions;\n+import ru.sbt.mipt.oop.actions.CloseDoorAction;\n+import ru.sbt.mipt.oop.actions.OpenDoorAction;\n import ru.sbt.mipt.oop.io.Logger;\n-import ru.sbt.mipt.oop.commands.*;\n-import ru.sbt.mipt.oop.objects.*;\n+import ru.sbt.mipt.oop.objects.SmartHome;\n \n import static ru.sbt.mipt.oop.events.SensorEventType.DOOR_CLOSED;\n import static ru.sbt.mipt.oop.events.SensorEventType.DOOR_OPEN;\n@@ -19,29 +19,28 @@ public DoorEventHandler(SmartHome smartHome, Logger logger) {\n \n     @Override\n     public void handleEvent(SensorEvent event) {\n-        if (event.getType() == DOOR_OPEN || event.getType() == DOOR_CLOSED) {\n-            // событие от двери\n-            for (Room room : smartHome.getRooms()) {\n-                for (Door door : room.getDoors()) {\n-                    if (door.getId().equals(event.getObjectId())) {\n-                        if (event.getType() == DOOR_OPEN) {\n-                            openDoor(room, door);\n-                        } else {\n-                            closeDoor(room, door);\n-                        }\n-                    }\n-                }\n-            }\n+        if (event.getType() == DOOR_OPEN) {\n+            openDoor(event.getObjectId());\n+        }\n+\n+        if (event.getType() == DOOR_CLOSED) {\n+            closeDoor(event.getObjectId());\n         }\n     }\n \n-    private void closeDoor(Room room, Door door) {\n-        SmartHomeActions.closeDoor(door);\n-        logger.log(\"Door \" + door.getId() + \" in room \" + room.getName() + \" was closed.\");\n+    private void closeDoor(String doorId) {\n+        CloseDoorAction action = new CloseDoorAction(doorId);\n+        smartHome.execute(action);\n+        if (action.payload()) {\n+            logger.log(\"Door \" + doorId + \" was closed.\");\n+        }\n     }\n \n-    private void openDoor(Room room, Door door) {\n-        SmartHomeActions.openDoor(door);\n-        logger.log(\"Door \" + door.getId() + \" in room \" + room.getName() + \" was opened.\");\n+    private void openDoor(String doorId) {\n+        OpenDoorAction action = new OpenDoorAction(doorId);\n+        smartHome.execute(action);\n+        if (action.payload()) {\n+            logger.log(\"Door \" + doorId + \" was opened.\");\n+        }\n     }\n }"
  },
  {
    "sha": "ab006300106c1a131085bcdef9cfe8088e0e6a0c",
    "filename": "src/main/java/ru/sbt/mipt/oop/events/HallDoorEventHandler.java",
    "status": "modified",
    "additions": 6,
    "deletions": 12,
    "changes": 18,
    "blob_url": "https://github.com/romagusev11/smart-home-2021/blob/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/main/java/ru/sbt/mipt/oop/events/HallDoorEventHandler.java",
    "raw_url": "https://github.com/romagusev11/smart-home-2021/raw/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/main/java/ru/sbt/mipt/oop/events/HallDoorEventHandler.java",
    "contents_url": "https://api.github.com/repos/romagusev11/smart-home-2021/contents/src/main/java/ru/sbt/mipt/oop/events/HallDoorEventHandler.java?ref=4e0421ff07b5d5d19de43f1b8596b8fcbd72383c",
    "patch": "@@ -1,10 +1,8 @@\n package ru.sbt.mipt.oop.events;\n \n-import ru.sbt.mipt.oop.actions.SmartHomeActions;\n+import ru.sbt.mipt.oop.actions.IsDoorInRoomAction;\n+import ru.sbt.mipt.oop.actions.TurnOffLightInHomeAction;\n import ru.sbt.mipt.oop.commands.CommandSender;\n-import ru.sbt.mipt.oop.io.Logger;\n-import ru.sbt.mipt.oop.objects.Door;\n-import ru.sbt.mipt.oop.objects.Room;\n import ru.sbt.mipt.oop.objects.SmartHome;\n \n import static ru.sbt.mipt.oop.events.SensorEventType.DOOR_CLOSED;\n@@ -23,14 +21,10 @@ public void handleEvent(SensorEvent event) {\n         // если мы получили событие о закрытие двери в холле - это значит, что была закрыта входная дверь.\n         // в этом случае мы хотим автоматически выключить свет во всем доме (это же умный дом!)\n         if (event.getType() == DOOR_CLOSED) {\n-            for (Room room : smartHome.getRooms()) {\n-                for (Door door : room.getDoors()) {\n-                    if (door.getId().equals(event.getObjectId())) {\n-                        if (room.getName().equals(\"hall\")) {\n-                            SmartHomeActions.turnOffLightInHome(smartHome, sender);\n-                        }\n-                    }\n-                }\n+            IsDoorInRoomAction action = new IsDoorInRoomAction(event.getObjectId(), \"hall\");\n+            smartHome.execute(action);\n+            if (action.payload()) {\n+                smartHome.execute(new TurnOffLightInHomeAction(sender));\n             }\n         }\n     }"
  },
  {
    "sha": "9de03ffd1ba5c39750d9f78735fb199510efb47c",
    "filename": "src/main/java/ru/sbt/mipt/oop/events/LightEventHandler.java",
    "status": "modified",
    "additions": 20,
    "deletions": 20,
    "changes": 40,
    "blob_url": "https://github.com/romagusev11/smart-home-2021/blob/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/main/java/ru/sbt/mipt/oop/events/LightEventHandler.java",
    "raw_url": "https://github.com/romagusev11/smart-home-2021/raw/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/main/java/ru/sbt/mipt/oop/events/LightEventHandler.java",
    "contents_url": "https://api.github.com/repos/romagusev11/smart-home-2021/contents/src/main/java/ru/sbt/mipt/oop/events/LightEventHandler.java?ref=4e0421ff07b5d5d19de43f1b8596b8fcbd72383c",
    "patch": "@@ -1,7 +1,9 @@\n package ru.sbt.mipt.oop.events;\n \n+import ru.sbt.mipt.oop.actions.TurnLightOffAction;\n+import ru.sbt.mipt.oop.actions.TurnLightOnAction;\n import ru.sbt.mipt.oop.io.Logger;\n-import ru.sbt.mipt.oop.objects.*;\n+import ru.sbt.mipt.oop.objects.SmartHome;\n \n import static ru.sbt.mipt.oop.events.SensorEventType.LIGHT_OFF;\n import static ru.sbt.mipt.oop.events.SensorEventType.LIGHT_ON;\n@@ -17,29 +19,27 @@ public LightEventHandler(SmartHome smartHome, Logger logger) {\n \n     @Override\n     public void handleEvent(SensorEvent event) {\n-        if (event.getType() == LIGHT_ON || event.getType() == LIGHT_OFF) {\n-            // событие от источника света\n-            for (Room room : smartHome.getRooms()) {\n-                for (Light light : room.getLights()) {\n-                    if (light.getId().equals(event.getObjectId())) {\n-                        if (event.getType() == LIGHT_ON) {\n-                            turnLightOn(room, light);\n-                        } else {\n-                            turnLightOff(room, light);\n-                        }\n-                    }\n-                }\n-            }\n+        if (event.getType() == LIGHT_ON) {\n+            turnLightOn(event.getObjectId());\n+        }\n+        if (event.getType() == LIGHT_OFF) {\n+            turnLightOff(event.getObjectId());\n         }\n     }\n \n-    private void turnLightOff(Room room, Light light) {\n-        light.setOn(false);\n-        logger.log(\"Light \" + light.getId() + \" in room \" + room.getName() + \" was turned off.\");\n+    private void turnLightOff(String lightId) {\n+        TurnLightOffAction action = new TurnLightOffAction(lightId);\n+        smartHome.execute(action);\n+        if (action.payload()) {\n+            logger.log(\"Light \" + lightId + \" was turned off.\");\n+        }\n     }\n \n-    private void turnLightOn(Room room, Light light) {\n-        light.setOn(true);\n-        logger.log(\"Light \" + light.getId() + \" in room \" + room.getName() + \" was turned on.\");\n+    private void turnLightOn(String lightId) {\n+        TurnLightOnAction action = new TurnLightOnAction(lightId);\n+        smartHome.execute(action);\n+        if (action.payload()) {\n+            logger.log(\"Light \" + lightId + \" was turned on.\");\n+        }\n     }\n }"
  },
  {
    "sha": "71b3aa8cfb1b0e817bb314f0a380f4fc46c0d1c5",
    "filename": "src/main/java/ru/sbt/mipt/oop/objects/Door.java",
    "status": "modified",
    "additions": 13,
    "deletions": 1,
    "changes": 14,
    "blob_url": "https://github.com/romagusev11/smart-home-2021/blob/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/main/java/ru/sbt/mipt/oop/objects/Door.java",
    "raw_url": "https://github.com/romagusev11/smart-home-2021/raw/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/main/java/ru/sbt/mipt/oop/objects/Door.java",
    "contents_url": "https://api.github.com/repos/romagusev11/smart-home-2021/contents/src/main/java/ru/sbt/mipt/oop/objects/Door.java?ref=4e0421ff07b5d5d19de43f1b8596b8fcbd72383c",
    "patch": "@@ -1,6 +1,9 @@\n package ru.sbt.mipt.oop.objects;\n \n-public class Door {\n+import ru.sbt.mipt.oop.actions.Action;\n+import ru.sbt.mipt.oop.actions.Actionable;\n+\n+public class Door implements Actionable {\n     private final String id;\n     private boolean isOpen;\n \n@@ -16,4 +19,13 @@ public String getId() {\n     public void setOpen(boolean open) {\n         isOpen = open;\n     }\n+\n+    public boolean isOpen() {\n+        return isOpen;\n+    }\n+\n+    @Override\n+    public void execute(Action action) {\n+        action.execute(this);\n+    }\n }"
  },
  {
    "sha": "5ce3258a8993f8b9f66d7a03b13d213ba034415b",
    "filename": "src/main/java/ru/sbt/mipt/oop/objects/Light.java",
    "status": "modified",
    "additions": 9,
    "deletions": 1,
    "changes": 10,
    "blob_url": "https://github.com/romagusev11/smart-home-2021/blob/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/main/java/ru/sbt/mipt/oop/objects/Light.java",
    "raw_url": "https://github.com/romagusev11/smart-home-2021/raw/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/main/java/ru/sbt/mipt/oop/objects/Light.java",
    "contents_url": "https://api.github.com/repos/romagusev11/smart-home-2021/contents/src/main/java/ru/sbt/mipt/oop/objects/Light.java?ref=4e0421ff07b5d5d19de43f1b8596b8fcbd72383c",
    "patch": "@@ -1,6 +1,9 @@\n package ru.sbt.mipt.oop.objects;\n \n-public class Light {\n+import ru.sbt.mipt.oop.actions.Action;\n+import ru.sbt.mipt.oop.actions.Actionable;\n+\n+public class Light implements Actionable {\n     private boolean isOn;\n     private final String id;\n \n@@ -20,4 +23,9 @@ public String getId() {\n     public void setOn(boolean on) {\n         isOn = on;\n     }\n+\n+    @Override\n+    public void execute(Action action) {\n+        action.execute(this);\n+    }\n }"
  },
  {
    "sha": "b77a124afab45b1391a61a7d5e41a857e53037f7",
    "filename": "src/main/java/ru/sbt/mipt/oop/objects/Room.java",
    "status": "modified",
    "additions": 15,
    "deletions": 9,
    "changes": 24,
    "blob_url": "https://github.com/romagusev11/smart-home-2021/blob/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/main/java/ru/sbt/mipt/oop/objects/Room.java",
    "raw_url": "https://github.com/romagusev11/smart-home-2021/raw/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/main/java/ru/sbt/mipt/oop/objects/Room.java",
    "contents_url": "https://api.github.com/repos/romagusev11/smart-home-2021/contents/src/main/java/ru/sbt/mipt/oop/objects/Room.java?ref=4e0421ff07b5d5d19de43f1b8596b8fcbd72383c",
    "patch": "@@ -1,8 +1,11 @@\n package ru.sbt.mipt.oop.objects;\n \n+import ru.sbt.mipt.oop.actions.Action;\n+import ru.sbt.mipt.oop.actions.Actionable;\n+\n import java.util.Collection;\n \n-public class Room {\n+public class Room implements Actionable {\n     private Collection<Light> lights;\n     private Collection<Door> doors;\n     private String name;\n@@ -13,15 +16,18 @@ public Room(Collection<Light> lights, Collection<Door> doors, String name) {\n         this.name = name;\n     }\n \n-    public Collection<Light> getLights() {\n-        return lights;\n-    }\n-\n-    public Collection<Door> getDoors() {\n-        return doors;\n-    }\n-\n     public String getName() {\n         return name;\n     }\n+\n+    @Override\n+    public void execute(Action action) {\n+        action.execute(this);\n+        for (Door door: doors) {\n+            door.execute(action);\n+        }\n+        for (Light light: lights) {\n+            light.execute(action);\n+        }\n+    }\n }"
  },
  {
    "sha": "c832324ae086d01371d579df148b687498904d06",
    "filename": "src/main/java/ru/sbt/mipt/oop/objects/SmartHome.java",
    "status": "modified",
    "additions": 10,
    "deletions": 3,
    "changes": 13,
    "blob_url": "https://github.com/romagusev11/smart-home-2021/blob/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/main/java/ru/sbt/mipt/oop/objects/SmartHome.java",
    "raw_url": "https://github.com/romagusev11/smart-home-2021/raw/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/main/java/ru/sbt/mipt/oop/objects/SmartHome.java",
    "contents_url": "https://api.github.com/repos/romagusev11/smart-home-2021/contents/src/main/java/ru/sbt/mipt/oop/objects/SmartHome.java?ref=4e0421ff07b5d5d19de43f1b8596b8fcbd72383c",
    "patch": "@@ -1,9 +1,12 @@\n package ru.sbt.mipt.oop.objects;\n \n+import ru.sbt.mipt.oop.actions.Action;\n+import ru.sbt.mipt.oop.actions.Actionable;\n+\n import java.util.ArrayList;\n import java.util.Collection;\n \n-public class SmartHome {\n+public class SmartHome implements Actionable {\n     Collection<Room> rooms;\n \n     public SmartHome() {\n@@ -18,7 +21,11 @@ public void addRoom(Room room) {\n         rooms.add(room);\n     }\n \n-    public Collection<Room> getRooms() {\n-        return rooms;\n+    @Override\n+    public void execute(Action action) {\n+        action.execute(this);\n+        for (Room room: rooms) {\n+            room.execute(action);\n+        }\n     }\n }"
  },
  {
    "sha": "0d001d0926323457976ac76d17abd73fb2e091c3",
    "filename": "src/test/java/ru/sbt/mipt/oop/events/DoorEventHandlerTest.java",
    "status": "added",
    "additions": 82,
    "deletions": 0,
    "changes": 82,
    "blob_url": "https://github.com/romagusev11/smart-home-2021/blob/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/test/java/ru/sbt/mipt/oop/events/DoorEventHandlerTest.java",
    "raw_url": "https://github.com/romagusev11/smart-home-2021/raw/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/test/java/ru/sbt/mipt/oop/events/DoorEventHandlerTest.java",
    "contents_url": "https://api.github.com/repos/romagusev11/smart-home-2021/contents/src/test/java/ru/sbt/mipt/oop/events/DoorEventHandlerTest.java?ref=4e0421ff07b5d5d19de43f1b8596b8fcbd72383c",
    "patch": "@@ -0,0 +1,82 @@\n+package ru.sbt.mipt.oop.events;\n+\n+import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Test;\n+import ru.sbt.mipt.oop.actions.FindDoorByIdAction;\n+import ru.sbt.mipt.oop.io.FileSmartHomeReader;\n+import ru.sbt.mipt.oop.io.Logger;\n+import ru.sbt.mipt.oop.io.SmartHomeReader;\n+import ru.sbt.mipt.oop.objects.Door;\n+import ru.sbt.mipt.oop.objects.SmartHome;\n+\n+import java.util.Random;\n+\n+import static org.junit.jupiter.api.Assertions.assertFalse;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+public class DoorEventHandlerTest {\n+    private EventHandler doorEventHandler;\n+    private SmartHome smartHome;\n+\n+    @BeforeEach\n+    public void configureSmartHome() {\n+        String filename = \"src/test/resources/smartHomeTesting.js\";\n+        SmartHomeReader reader = new FileSmartHomeReader(filename);\n+        smartHome = reader.readSmartHome();\n+\n+        Logger logger = str -> {};\n+        doorEventHandler = new DoorEventHandler(smartHome, logger);\n+    }\n+\n+    @Test\n+    public void openDoorTest() {\n+        String doorId = \"2\";\n+\n+        FindDoorByIdAction action = new FindDoorByIdAction(doorId);\n+        smartHome.execute(action);\n+        Door door = action.payload();\n+\n+        assertFalse(door.isOpen());\n+\n+        SensorEvent event = new SensorEvent(SensorEventType.DOOR_OPEN, doorId);\n+        doorEventHandler.handleEvent(event);\n+        assertTrue(door.isOpen());\n+    }\n+\n+    @Test\n+    public void closeDoorTest() {\n+        String doorId = \"3\";\n+\n+        FindDoorByIdAction action = new FindDoorByIdAction(doorId);\n+        smartHome.execute(action);\n+        Door door = action.payload();\n+\n+        assertTrue(door.isOpen());\n+\n+        SensorEvent event = new SensorEvent(SensorEventType.DOOR_CLOSED, doorId);\n+        doorEventHandler.handleEvent(event);\n+        assertFalse(door.isOpen());\n+    }\n+\n+    @Test\n+    public void crazyMonkeyFoundTheSwitchTest() {\n+        String doorId = \"1\";\n+\n+        FindDoorByIdAction action = new FindDoorByIdAction(doorId);\n+        smartHome.execute(action);\n+        Door door = action.payload();\n+\n+        // Let the monkey randomly open/close our door\n+        Random random = new Random();\n+        for (int i = 0; i < 100; ++i) {\n+            boolean monkeyChoice = random.nextBoolean();\n+            if (monkeyChoice) {\n+                doorEventHandler.handleEvent(new SensorEvent(SensorEventType.DOOR_OPEN, doorId));\n+                assertTrue(door.isOpen());\n+            } else {\n+                doorEventHandler.handleEvent(new SensorEvent(SensorEventType.DOOR_CLOSED, doorId));\n+                assertFalse(door.isOpen());\n+            }\n+        }\n+    }\n+}"
  },
  {
    "sha": "b06b34ea565d3ea8565337ab0e1a38653a97d196",
    "filename": "src/test/java/ru/sbt/mipt/oop/events/HallDoorEventHandlerTest.java",
    "status": "added",
    "additions": 69,
    "deletions": 0,
    "changes": 69,
    "blob_url": "https://github.com/romagusev11/smart-home-2021/blob/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/test/java/ru/sbt/mipt/oop/events/HallDoorEventHandlerTest.java",
    "raw_url": "https://github.com/romagusev11/smart-home-2021/raw/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/test/java/ru/sbt/mipt/oop/events/HallDoorEventHandlerTest.java",
    "contents_url": "https://api.github.com/repos/romagusev11/smart-home-2021/contents/src/test/java/ru/sbt/mipt/oop/events/HallDoorEventHandlerTest.java?ref=4e0421ff07b5d5d19de43f1b8596b8fcbd72383c",
    "patch": "@@ -0,0 +1,69 @@\n+package ru.sbt.mipt.oop.events;\n+\n+import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Test;\n+import ru.sbt.mipt.oop.actions.Action;\n+import ru.sbt.mipt.oop.actions.FindLightByIdAction;\n+import ru.sbt.mipt.oop.actions.IsDoorInRoomAction;\n+import ru.sbt.mipt.oop.commands.CommandSender;\n+import ru.sbt.mipt.oop.io.FileSmartHomeReader;\n+import ru.sbt.mipt.oop.io.SmartHomeReader;\n+import ru.sbt.mipt.oop.objects.Light;\n+import ru.sbt.mipt.oop.objects.SmartHome;\n+\n+import static org.junit.jupiter.api.Assertions.assertFalse;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+public class HallDoorEventHandlerTest {\n+    private EventHandler hallDoorEventHandler;\n+    private SmartHome smartHome;\n+\n+    @BeforeEach\n+    public void configureSmartHome() {\n+        String filename = \"src/test/resources/smartHomeTesting.js\";\n+        SmartHomeReader reader = new FileSmartHomeReader(filename);\n+        smartHome = reader.readSmartHome();\n+\n+        CommandSender sender = str -> {};\n+        hallDoorEventHandler = new HallDoorEventHandler(smartHome, sender);\n+    }\n+\n+    @Test\n+    public void closeHallDoorTest() {\n+        String hallDoorId = \"4\";\n+\n+        IsDoorInRoomAction action = new IsDoorInRoomAction(hallDoorId, \"hall\");\n+        smartHome.execute(action);\n+        assertTrue(action.payload());\n+\n+        SensorEvent event = new SensorEvent(SensorEventType.DOOR_CLOSED, hallDoorId);\n+        hallDoorEventHandler.handleEvent(event);\n+\n+        Action assertAllLightIsOffAction = object -> {\n+            if (object instanceof Light) {\n+                assertFalse(((Light) object).isOn());\n+            }\n+        };\n+        smartHome.execute(assertAllLightIsOffAction);\n+    }\n+\n+    @Test\n+    public void openHallDoorTest() {\n+        String hallDoorId = \"4\";\n+        String lightId = \"2\";\n+\n+        FindLightByIdAction findLightByIdAction = new FindLightByIdAction(lightId);\n+        smartHome.execute(findLightByIdAction);\n+        Light light = findLightByIdAction.payload();\n+        assertTrue(light.isOn());\n+\n+        IsDoorInRoomAction action = new IsDoorInRoomAction(hallDoorId, \"hall\");\n+        smartHome.execute(action);\n+        assertTrue(action.payload());\n+\n+        SensorEvent event = new SensorEvent(SensorEventType.DOOR_OPEN, hallDoorId);\n+        hallDoorEventHandler.handleEvent(event);\n+\n+        assertTrue(light.isOn());\n+    }\n+}"
  },
  {
    "sha": "2f5cb2d5918dc8a2c3364abda80460de9e3111b8",
    "filename": "src/test/java/ru/sbt/mipt/oop/events/LightEventHandlerTest.java",
    "status": "added",
    "additions": 82,
    "deletions": 0,
    "changes": 82,
    "blob_url": "https://github.com/romagusev11/smart-home-2021/blob/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/test/java/ru/sbt/mipt/oop/events/LightEventHandlerTest.java",
    "raw_url": "https://github.com/romagusev11/smart-home-2021/raw/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/test/java/ru/sbt/mipt/oop/events/LightEventHandlerTest.java",
    "contents_url": "https://api.github.com/repos/romagusev11/smart-home-2021/contents/src/test/java/ru/sbt/mipt/oop/events/LightEventHandlerTest.java?ref=4e0421ff07b5d5d19de43f1b8596b8fcbd72383c",
    "patch": "@@ -0,0 +1,82 @@\n+package ru.sbt.mipt.oop.events;\n+\n+import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Test;\n+import ru.sbt.mipt.oop.actions.FindLightByIdAction;\n+import ru.sbt.mipt.oop.io.FileSmartHomeReader;\n+import ru.sbt.mipt.oop.io.Logger;\n+import ru.sbt.mipt.oop.io.SmartHomeReader;\n+import ru.sbt.mipt.oop.objects.Light;\n+import ru.sbt.mipt.oop.objects.SmartHome;\n+\n+import java.util.Random;\n+\n+import static org.junit.jupiter.api.Assertions.assertFalse;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+public class LightEventHandlerTest {\n+    private EventHandler lightEventHandler;\n+    private SmartHome smartHome;\n+\n+    @BeforeEach\n+    public void configureSmartHome() {\n+        String filename = \"src/test/resources/smartHomeTesting.js\";\n+        SmartHomeReader reader = new FileSmartHomeReader(filename);\n+        smartHome = reader.readSmartHome();\n+\n+        Logger logger = str -> {};\n+        lightEventHandler = new LightEventHandler(smartHome, logger);\n+    }\n+\n+    @Test\n+    public void setLightOnTest() {\n+        String lightId = \"4\";\n+\n+        FindLightByIdAction action = new FindLightByIdAction(lightId);\n+        smartHome.execute(action);\n+        Light light = action.payload();\n+\n+        assertFalse(light.isOn());\n+\n+        SensorEvent event = new SensorEvent(SensorEventType.LIGHT_ON, lightId);\n+        lightEventHandler.handleEvent(event);\n+        assertTrue(light.isOn());\n+    }\n+\n+    @Test\n+    public void setLightOffTest() {\n+        String lightId = \"3\";\n+\n+        FindLightByIdAction action = new FindLightByIdAction(lightId);\n+        smartHome.execute(action);\n+        Light light = action.payload();\n+\n+        assertTrue(light.isOn());\n+\n+        SensorEvent event = new SensorEvent(SensorEventType.LIGHT_OFF, lightId);\n+        lightEventHandler.handleEvent(event);\n+        assertFalse(light.isOn());\n+    }\n+\n+    @Test\n+    public void crazyMonkeyFoundTheSwitchTest() {\n+        String lightId = \"1\";\n+\n+        FindLightByIdAction action = new FindLightByIdAction(lightId);\n+        smartHome.execute(action);\n+        Light light = action.payload();\n+\n+        // Let the monkey randomly turn on/off our light\n+        Random random = new Random();\n+        for (int i = 0; i < 100; ++i) {\n+            boolean monkeyChoice = random.nextBoolean();\n+            if (monkeyChoice) {\n+                lightEventHandler.handleEvent(new SensorEvent(SensorEventType.LIGHT_ON, lightId));\n+                assertTrue(light.isOn());\n+            } else {\n+                lightEventHandler.handleEvent(new SensorEvent(SensorEventType.LIGHT_OFF, lightId));\n+                assertFalse(light.isOn());\n+            }\n+        }\n+    }\n+}"
  },
  {
    "sha": "9fcf3d32b02438ac1e4be5188b65304ce54c3284",
    "filename": "src/test/resources/smartHomeTesting.js",
    "status": "added",
    "additions": 84,
    "deletions": 0,
    "changes": 84,
    "blob_url": "https://github.com/romagusev11/smart-home-2021/blob/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/test/resources/smartHomeTesting.js",
    "raw_url": "https://github.com/romagusev11/smart-home-2021/raw/4e0421ff07b5d5d19de43f1b8596b8fcbd72383c/src/test/resources/smartHomeTesting.js",
    "contents_url": "https://api.github.com/repos/romagusev11/smart-home-2021/contents/src/test/resources/smartHomeTesting.js?ref=4e0421ff07b5d5d19de43f1b8596b8fcbd72383c",
    "patch": "@@ -0,0 +1,84 @@\n+{\n+  \"rooms\": [\n+    {\n+      \"lights\": [\n+        {\n+          \"isOn\": false,\n+          \"id\": \"1\"\n+        },\n+        {\n+          \"isOn\": true,\n+          \"id\": \"2\"\n+        }\n+      ],\n+      \"doors\": [\n+        {\n+          \"id\": \"1\",\n+          \"isOpen\": false\n+        }\n+      ],\n+      \"name\": \"kitchen\"\n+    },\n+    {\n+      \"lights\": [\n+        {\n+          \"isOn\": true,\n+          \"id\": \"3\"\n+        }\n+      ],\n+      \"doors\": [\n+        {\n+          \"id\": \"2\",\n+          \"isOpen\": false\n+        }\n+      ],\n+      \"name\": \"bathroom\"\n+    },\n+    {\n+      \"lights\": [\n+        {\n+          \"isOn\": false,\n+          \"id\": \"4\"\n+        },\n+        {\n+          \"isOn\": false,\n+          \"id\": \"5\"\n+        },\n+        {\n+          \"isOn\": false,\n+          \"id\": \"6\"\n+        }\n+      ],\n+      \"doors\": [\n+        {\n+          \"id\": \"3\",\n+          \"isOpen\": true\n+        }\n+      ],\n+      \"name\": \"bedroom\"\n+    },\n+    {\n+      \"lights\": [\n+        {\n+          \"isOn\": false,\n+          \"id\": \"7\"\n+        },\n+        {\n+          \"isOn\": false,\n+          \"id\": \"8\"\n+        },\n+        {\n+          \"isOn\": false,\n+          \"id\": \"9\"\n+        }\n+      ],\n+      \"doors\": [\n+        {\n+          \"id\": \"4\",\n+          \"isOpen\": false\n+        }\n+      ],\n+      \"name\": \"hall\"\n+    }\n+  ]\n+}\n\\ No newline at end of file"
  }
]
