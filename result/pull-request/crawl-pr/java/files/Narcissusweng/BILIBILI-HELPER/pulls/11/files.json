[
  {
    "sha": "302e5f6637886dd5a1b64e07af4e1d24551c7b87",
    "filename": "README.md",
    "status": "modified",
    "additions": 95,
    "deletions": 137,
    "changes": 232,
    "blob_url": "https://github.com/Narcissusweng/BILIBILI-HELPER/blob/407eea783c780fd69d7f84d54745d3297770a7ff/README.md",
    "raw_url": "https://github.com/Narcissusweng/BILIBILI-HELPER/raw/407eea783c780fd69d7f84d54745d3297770a7ff/README.md",
    "contents_url": "https://api.github.com/repos/Narcissusweng/BILIBILI-HELPER/contents/README.md?ref=407eea783c780fd69d7f84d54745d3297770a7ff",
    "patch": "@@ -21,7 +21,11 @@ BILIBILI-HELPER\n \n **如果觉得好用，顺手点个 Star 吧 ❤**\n \n-**仓库地址：[JunzhouLiu/BILIBILI-HELPER][1]**\n+**仓库地址：[JunzhouLiu/BILIBILI-HELPER](https://github.com/JunzhouLiu/BILIBILI-HELPER)**\n+\n+**B站赛事预测助手已发布，每天自动参与KPL，LPL赛事预测，赚取硬币。**\n+\n+**仓库地址：[JunzhouLiu/bilibili-match-prediction](https://github.com/JunzhouLiu/bilibili-match-prediction)**\n \n **请不要滥用相关API，让我们一起爱护B站 ❤**\n \n@@ -35,70 +39,66 @@ BILIBILI-HELPER\n * [x] 大会员月底使用快到期的 B币券，给自己充电，一点也不会浪费哦，默认开启。*【已支持给指定UP充电】*\n * [x] 大会员月初 1 号自动领取每月 5 张 B 币券和福利。\n * [x] 每日哔哩哔哩直播自动签到，领取签到奖励。*【直播你可以不看，但是奖励咱们一定要领】*\n-* [x] 通过server酱推送执行结果到微信。\n * [x] Linux用户支持自定义配置了。\n * [x] 投币策略更新可配置投币喜好。*【可配置优先给关注的up投币】*\n * [x] 自动送出即将过期的礼物。 *【默认开启，未更新到新版本的用户默认关闭】*\n-\t  \n-[点此查看更新日志][2]\n+* [x] 支持推送执行结果到微信，钉钉，飞书等\n \n-[点击快速开始使用][3]\n+[点击快速开始使用](#使用说明)\n \n-[点击快速查看自定义功能配置][4]\n+[点击快速查看自定义功能配置](#自定义功能配置)\n \n # 目录\n \n-- [目录][5]\n-  - [使用说明][6]\n-\t- [一、Actions 方式][7]\n-\t- [二、使用 Docker][8]\n-\t- [三、使用 Linux Crontab 方式][9]\n-\t- [自定义功能配置][10]\n-  - [微信订阅通知][11]\n-\t- [订阅执行结果][12]\n-  - [Telegram订阅通知](#Telegram订阅通知)\n-      - [Telegram订阅执行结果](#Telegram订阅执行结果)\n-  - [更新和帮助][13]\n-\t- [使用 Github Actions 自动同步源仓库代码][14]\n-\t- [手动拉取最新代码][15]\n-\t- [使用Pull APP［推荐］][16]\n-\t- [常见问题解答][17]\n-  - [免责声明][18]\n-  - [API 参考列表][19]\n-  - [基于本项目的衍生项目][20]\n-  - [致谢][21]\n-  - [License][22]\n-  - [Stargazers over time][23]\n+- [目录](#目录)\n+    - [使用说明](#使用说明)\n+        - [一、Actions 方式](#一actions-方式)\n+        - [二、使用 Docker](#二使用-docker)\n+        - [三、使用 Linux Crontab 方式](#三使用-linux-crontab-方式)\n+        - [自定义功能配置](#自定义功能配置)\n+    - [订阅执行结果](#订阅执行结果)\n+        - [Server酱Turbo版](#server酱turbo版)\n+        - [Telegram订阅执行结果](#telegram订阅执行结果)\n+    - [更新和帮助](#更新和帮助)\n+        - [使用 Github Actions 自动同步源仓库代码](#使用-github-actions-自动同步源仓库代码)\n+        - [手动拉取最新代码](#手动拉取最新代码)\n+        - [使用Pull APP［推荐］](#使用pull-app推荐)\n+        - [常见问题解答](#常见问题解答)\n+    - [免责声明](#免责声明)\n+    - [API 参考列表](#api-参考列表)\n+    - [基于本项目的衍生项目](#基于本项目的衍生项目)\n+    - [致谢](#致谢)\n+    - [License](#license)\n+    - [Stargazers over time](#stargazers-over-time)\n \n ## 使用说明\n \n ### 一、Actions 方式\n \n 1. **Fork 本项目**\n 2. **获取 Bilibili Cookies**\n-3. 浏览器打开并登录 [bilibili 网站][24]\n+3. 浏览器打开并登录 [bilibili 网站]()\n 4. 按 F12 打开 「开发者工具」 找到 应用程序/Application -\\> 存储 -\\> Cookies\n 5. 找到 `bili_jct` `SESSDATA` `DEDEUSERID` 三项，并复制值，创建对应的 GitHub Secrets。\n \n-![图示][image-1]\n+![图示](docs/IMG/20201012001307.png)\n \n-3. **点击项目 Settings -\\> Secrets -\\> New Secrets 添加以下 3 个 Secrets，其中server酱微信推送的sckey可参阅[微信订阅通知][25]**\n+1. **点击项目 Settings -\\> Secrets -\\> New Secrets 添加以下 3 个 Secrets，其中server酱微信推送的sckey可参阅[微信订阅通知](#微信订阅通知)**\n \n-| Name          | Value               |\n-| ------------- | ------------------- |\n-| DEDEUSERID    | 从 Cookie 中获取    |\n-| SESSDATA      | 从 Cookie 中获取    |\n-| BILI\\_JCT     | 从 Cookie 中获取    |\n-| SERVERPUSHKEY | server酱推送的sckey |\n+| Name          | Value                                |\n+| ------------- | ------------------------------------ |\n+| DEDEUSERID    | 从 Cookie 中获取                     |\n+| SESSDATA      | 从 Cookie 中获取                     |\n+| BILI\\_JCT     | 从 Cookie 中获取                     |\n+| SERVERPUSHKEY | server酱推送的sckey（兼容Turbo版本） |\n \n-\n-![图示][image-2]\n+![图示](docs/IMG/20201013210000.png)\n \n 1. **开启 Actions 并触发每日自动执行**\n \n **Github Actions 默认处于关闭状态，还大家请手动开启 Actions ，执行一次工作流，验证是否可以正常工作。**\n \n-![图示][image-3]\n+![图示](docs/IMG/workflow_dispatch.png)\n \n **Fork 仓库后，GitHub 默认不自动执行 Actions 任务，请修改 `.github/trigger.json` 文件,将 `trigger` 的值改为 `1`，这样每天就会自动执行定时任务了。**\n \n@@ -109,9 +109,7 @@ BILIBILI-HELPER\n }\n ```\n \n-**\n-由于[issues/313](https://github.com/JunzhouLiu/BILIBILI-HELPER/issues/313)中反馈接收到了B站的警告，所以跳过每日任务选项默认开启(也就是默认不执行每日任务)，如需关闭，请将`src/main/resources/config.json`中的`skipDailyTask`值改为`false`\n-,**\n+**由于[issues/313](https://github.com/JunzhouLiu/BILIBILI-HELPER/issues/313)中反馈接收到了B站的警告，所以跳过每日任务选项默认开启(也就是默认不执行每日任务)，如需关闭，请将`src/main/resources/config.json`中的`skipDailyTask`值改为`false`**\n \n ```patch\n {\n@@ -149,31 +147,38 @@ BILIBILI-HELPER\n \n **查看 Actions 运行日志**\n \n-[Actions 运行日志详细查看教程][26]\n-\n-[日志示例][27]\n+[Actions 运行日志详细查看教程](https://github.com/JunzhouLiu/BILIBILI-HELPER/issues/21)\n \n+[日志示例](https://github.com/JunzhouLiu/BILIBILI-HELPER/runs/1256484004?check_suite_focus=true#step:4:5069)\n \n ### 二、使用 Docker\n \n-请自行参阅 [Issues/75#issuecomment-731705657][28] 和[基于本项目的衍生项目][29] 。\n+请自行参阅 [Issues/75#issuecomment-731705657][28] 和[基于本项目的衍生项目](#基于本项目的衍生项目)。\n \n+[28]:    https://github.com/JunzhouLiu/BILIBILI-HELPER/issues/75#issuecomment-731705657\n \n ### 三、使用 Linux Crontab 方式\n \n 1. 在linux shell环境执行以下命令，并按照提示输入SESSDATA，DEDEUSERID，BILI\\_JCT，SCKEY四个参数\n+\n ```\n wget https://raw.githubusercontent.com/JunzhouLiu/BILIBILI-HELPER/main/setup.sh && chmod +x ./setup.sh && sudo ./setup.sh\n ```\n \n-**ps：注意，如果使用自定义配置，请将`config.json`和jar包放置在同一目录(使用setup.sh安装则需要将`config.json`放置到`{HOME}/BILIBILI-HELPER`)，`v1.2.2`之后的版本`release`中都会携带一份`config.json`。**\n+**ps：注意，如果使用自定义配置，请将`config.json`和jar包放置在同一目录(使用setup.sh安装则需要将`config.json`放置到`{HOME}/BILIBILI-HELPER`)，`v1.2.2`\n+之后的版本`release`中都会携带一份`config.json`。**\n+\n+2. 除此之外，也可以通过点击 [BILIBILI-HELPER/release][30]，下载已发布的版本，解压后将jar包手动上传到Linux服务器，使用crontab完成定时执行，如果使用`crontab`\n+   请记得`source /etc/profile`和`source ~/.bashrc`,建议直接使用仓库提供的[`start.sh`][31]脚本,注意修改脚本的jar包路径和cookies参数。\n \n-2. 除此之外，也可以通过点击 [BILIBILI-HELPER/release][30]，下载已发布的版本，解压后将jar包手动上传到Linux服务器，使用crontab完成定时执行，如果使用`crontab`请记得`source /etc/profile`和`source ~/.bashrc`,建议直接使用仓库提供的[`start.sh`][31]脚本,注意修改脚本的jar包路径和cookies参数。\n+[30]:    https://github.com/JunzhouLiu/BILIBILI-HELPER/releases/latest\n+\n+[31]:    https://github.com/JunzhouLiu/BILIBILI-HELPER/blob/main/start.sh\n \n \n **crontab命令示例**\n \n-`30 10 * * * sh /home/start.sh` \n+`30 10 * * * sh /home/start.sh`\n \n | args              | 说明               |\n | ----------------- | ------------------ |\n@@ -240,8 +245,10 @@ java -jar /home/BILIBILI-HELPER.jar DEDEUSERID SESSDATA BILI_JCT SCKEY >> /var/l\n | userAgent          | 浏览器UA          | 用户可根据部署平台配置，可根据userAgent参数列表自由选取                 |\n | skipDailyTask      | [false,true]      | 是否跳过每日任务，默认`true`,如果关闭跳过每日任务，请改为`false`        |\n \n-\\*\\*tips:如果你没有上传过视频并开启充电计划，充电会失败，B币券会浪费。此时建议配置为给指定的up主充电。欢迎给即将秃头的我充电\n-uid：[14602398][32] \\*\\*\n+**tips:如果你没有上传过视频并开启充电计划，充电会失败，B币券会浪费。此时建议配置为给指定的up主充电。欢迎给即将秃头的我充电 uid：[14602398][32] **\n+\n+[32]:    https://space.bilibili.com/14602398\n+\n \n userAgent可选参数列表\n \n@@ -257,27 +264,36 @@ userAgent可选参数列表\n \n *投币数量代码做了处理，如果本日投币不能获得经验了，则不会投币，每天只投能获得经验的硬币。假设你设置每日投币 3 个，早上 7 点你自己投了 2 个硬币，则十点半时，程序只会投 1 个）*\n \n+## 订阅执行结果\n+\n+### Server酱Turbo版\n \n-## 微信订阅通知\n+目前Turbo版本的消息通道支持以下渠道\n \n-### 订阅执行结果\n+- 企业微信应用消息\n+- Android，\n+- Bark iOS，\n+- 企业微信群机器人\n+- 钉钉群机器人\n+- 飞书群机器人\n+- 自定义微信测试号\n+- 方糖服务号\n \n-1. 前往 [sc.ftqq.com][33] 点击登入，创建账号（建议使用 GitHub 登录）。\n-2. 点击点[发送消息][34] ，生成一个 Key。将其增加到 Github Secrets 中，变量名为 `SERVERPUSHKEY`\n-3. [绑定微信账号][35] ，开启微信推送。\n-![图示][image-4]\n+1. 前往 [sct.ftqq.com](https://sct.ftqq.com/sendkey)点击登入，创建账号。\n+2. 点击点[SendKey](https://sct.ftqq.com/sendkey) ，生成一个 Key。将其增加到 Github Secrets 中，变量名为 `SERVERPUSHKEY`\n+3. [配置消息通道](https://sct.ftqq.com/forward) ，选择方糖服务号，保存即可。\n 4. 推送效果展示\n-![图示][image-5]\n+   ![图示](docs/IMG/wechatMsgPush.png)\n \n-## Telegram订阅通知\n+**旧版推送渠道[sc.ftqq.com](http://sc.ftqq.com/9.version]即将与4月底下线，请前往[sct.ftqq.com](https://sct.ftqq.com/sendkey)生成`Turbo`版本的`Key`，注意，申请Turbo版Key后请配置消息通道，如果想沿用以前的推送方式，选择方糖服务号即可**\n \n ### Telegram订阅执行结果\n \n 1.在Telegram中添加BotFather这个账号，然后依次发送/start /newbot 按照提示即可创建一个新的机器人。记下来给你生成的token。\n \n 2.搜索刚刚创建的机器人的名字，并给它发送一条消息。\n \n-*特别注意：需要先与机器人之间创建会话，机器人才能下发消息，否则机器人无法主动发送消息，切记！\n+*特别注意：需要先与机器人之间创建会话，机器人才能下发消息，否则机器人无法主动发送消息，切记！*\n \n 3.在Telegram中搜索userinfobot，并给它发送一条消息，它会返回给你chatid。\n \n@@ -289,19 +305,19 @@ userAgent可选参数列表\n \n ### 使用 Github Actions 自动同步源仓库代码\n \n-参阅[Issue8 使用GitHub Actions任务自动同步源仓库代码][36]\n+参阅[Issue8 使用GitHub Actions任务自动同步源仓库代码](https://github.com/JunzhouLiu/BILIBILI-HELPER/issues/8)\n \n ### 手动拉取最新代码\n \n-参阅[Issues4 手动拉取最新代码][37]\n+参阅[Issues4 手动拉取最新代码](https://github.com/JunzhouLiu/BILIBILI-HELPER/issues/4)\n \n ### 使用Pull APP［推荐］\n \n-参阅 [Pull APP][38]\n+参阅 [Pull APP](https://github.com/apps/pull)\n \n ### 常见问题解答\n \n-请参阅[常见问题解答][39]\n+请参阅[常见问题解答](https://github.com/JunzhouLiu/BILIBILI-HELPER/issues/4)\n \n ## 免责声明\n \n@@ -310,96 +326,38 @@ userAgent可选参数列表\n 3. 本工具执行过程中产生的日志，仅会在使用者自行配置推送渠道后进行推送。日志中不包含任何用户敏感信息。\n 4. 如果有人修改了本项目（或者直接使用本项目）盈利恰饭，那和我肯定没关系，我开源的目的单纯是技术分享。\n 5. 如果你使用了第三方修改的，打包的本工具代码，那你可得注意了，指不定人就把你的数据上传到他自己的服务器了，这可和我没关系。（**网络安全教育普及任重而道远**）\n-6. 本工具源码仅在[JunzhouLiu/BILIBILI-HELPER][40]开源，其余的地方的代码均不是我提交的，可能是抄我的，借鉴我的，但绝对不是我发布的，出问题和我也没关系。 \n+6. 本工具源码仅在[JunzhouLiu/BILIBILI-HELPER](https://github.com/JunzhouLiu/BILIBILI-HELPER)开源，其余的地方的代码均不是我提交的，可能是抄我的，借鉴我的，但绝对不是我发布的，出问题和我也没关系。\n 7. 我开源本工具的代码仅仅是技术分享，没有任何丝毫的盈利赚钱目的，如果你非要给我打赏/充电，那我就是网络乞丐，咱们不构成任何雇佣，购买关系的交易。\n 8. 本项目不会增加类似于自动转发抽奖，秒杀，下载版权受限视频等侵犯UP主/B站权益的功能，开发这个应用的目的是单纯的技术分享。下游分支开发者/使用者也请不要滥用相关功能。\n 9. 本项目欢迎其他开发者参与贡献，基于本工具的二次开发，使用其他语言重写都没有什么问题，能在技术上给你带来帮助和收获就很好.\n-10. 本项目遵守[MIT License][41] ，请各位知悉。\n-\n+10. 本项目遵守[MIT License](https://github.com/JunzhouLiu/BILIBILI-HELPER/blob/main/LICENSE)，请各位知悉。\n \n ## API 参考列表\n \n-- [SocialSisterYi/bilibili-API-collect][42]\n-- [happy888888/BiliExp][43]\n+- [SocialSisterYi/bilibili-API-collect](https://github.com/SocialSisterYi/bilibili-API-collect)\n+- [happy888888/BiliExp](https://github.com/happy888888/BiliExp)\n \n ## 基于本项目的衍生项目\n \n-- **基于本项目的docker封装项目：[SuperNG6/docker-bilibili-helper][44]**\n+- **基于本项目的docker封装项目：[SuperNG6/docker-bilibili-helper](https://github.com/SuperNG6/docker-bilibili-helper)**\n+\n+- **基于本项目的docker镜像：[superng6/bilibili-helper](https://hub.docker.com/r/superng6/bilibili-helper)**\n \n-- **基于本项目的docker镜像：[superng6/bilibili-helper][45]**\n-\t \n-- **基于本项目的runer项目：[KurenaiRyu/bilibili-helper-runer][46]**\n+- **基于本项目的runer项目：[KurenaiRyu/bilibili-helper-runer](https://github.com/KurenaiRyu/bilibili-helper-runer)**\n \n-- **基于本项目的k8s项目：[yangyang0507/k8s-bilibili-helper][47]**\n+- **基于本项目的k8s项目：[yangyang0507/k8s-bilibili-helper](https://github.com/yangyang0507/k8s-bilibili-helper)**\n \n ## 致谢\n+\n 感谢 JetBrains 对本项目的支持。\n \n-[![JetBrains][image-6]][48] \n+[![JetBrains](docs/IMG/jetbrains.svg)](https://www.jetbrains.com/?from=BILIBILI-HELPER)\n \n ## License\n-[![FOSSA Status][image-7]][49]\n+\n+[![FOSSA Status](https://app.fossa.com/api/projects/git%2Bgithub.com%2FJunzhouLiu%2FBILIBILI-HELPER.svg?type=large)](https://app.fossa.com/projects/git%2Bgithub.com%2FJunzhouLiu%2FBILIBILI-HELPER?ref=badge_large)\n \n ## Stargazers over time\n \n-[![Stargazers over time][image-8]][50]\n-\n-[1]:\thttps://github.com/JunzhouLiu/BILIBILI-HELPER\n-[2]:\thttps://github.com/JunzhouLiu/BILIBILI-HELPER/releases\n-[3]:\t#%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E\n-[4]:\t#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8A%9F%E8%83%BD%E9%85%8D%E7%BD%AE\n-[5]:\t#%E7%9B%AE%E5%BD%95\n-[6]:\t#%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E\n-[7]:\t#%E4%B8%80actions-%E6%96%B9%E5%BC%8F\n-[8]:\t#%E4%BA%8C%E4%BD%BF%E7%94%A8-docker\n-[9]:\t#%E4%B8%89%E4%BD%BF%E7%94%A8-linux-crontab-%E6%96%B9%E5%BC%8F\n-[10]:\t#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8A%9F%E8%83%BD%E9%85%8D%E7%BD%AE\n-[11]:\t#%E5%BE%AE%E4%BF%A1%E8%AE%A2%E9%98%85%E9%80%9A%E7%9F%A5\n-[12]:\t#%E8%AE%A2%E9%98%85%E6%89%A7%E8%A1%8C%E7%BB%93%E6%9E%9C\n-[13]:\t#%E6%9B%B4%E6%96%B0%E5%92%8C%E5%B8%AE%E5%8A%A9\n-[14]:\t#%E4%BD%BF%E7%94%A8-github-actions-%E8%87%AA%E5%8A%A8%E5%90%8C%E6%AD%A5%E6%BA%90%E4%BB%93%E5%BA%93%E4%BB%A3%E7%A0%81\n-[15]:\t#%E6%89%8B%E5%8A%A8%E6%8B%89%E5%8F%96%E6%9C%80%E6%96%B0%E4%BB%A3%E7%A0%81\n-[16]:\t#%E4%BD%BF%E7%94%A8pull-app%E6%8E%A8%E8%8D%90\n-[17]:\t#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E8%A7%A3%E7%AD%94\n-[18]:\t#%E5%85%8D%E8%B4%A3%E5%A3%B0%E6%98%8E\n-[19]:\t#api-%E5%8F%82%E8%80%83%E5%88%97%E8%A1%A8\n-[20]:\t#%E5%9F%BA%E4%BA%8E%E6%9C%AC%E9%A1%B9%E7%9B%AE%E7%9A%84%E8%A1%8D%E7%94%9F%E9%A1%B9%E7%9B%AE\n-[21]:\t#%E8%87%B4%E8%B0%A2\n-[22]:\t#license\n-[23]:\t#stargazers-over-time\n-[24]:\thttps://www.bilibili.com/\n-[25]:\t#%E5%BE%AE%E4%BF%A1%E8%AE%A2%E9%98%85%E9%80%9A%E7%9F%A5\n-[26]:\thttps://github.com/JunzhouLiu/BILIBILI-HELPER/issues/21\n-[27]:\thttps://github.com/JunzhouLiu/BILIBILI-HELPER/runs/1256484004?check_suite_focus=true#step:4:5069\n-[28]:\thttps://github.com/JunzhouLiu/BILIBILI-HELPER/issues/75#issuecomment-731705657\n-[29]:\t#%E5%9F%BA%E4%BA%8E%E6%9C%AC%E9%A1%B9%E7%9B%AE%E7%9A%84%E8%A1%8D%E7%94%9F%E9%A1%B9%E7%9B%AE\n-[30]:\thttps://github.com/JunzhouLiu/BILIBILI-HELPER/releases/latest\n-[31]:\thttps://github.com/JunzhouLiu/BILIBILI-HELPER/blob/main/start.sh\n-[32]:\thttps://space.bilibili.com/14602398\n-[33]:\thttp://sc.ftqq.com/3.version\n-[34]:\thttp://sc.ftqq.com/?c=code\n-[35]:\thttp://sc.ftqq.com/?c=wechat&a=bind\n-[36]:\thttps://github.com/JunzhouLiu/BILIBILI-HELPER/issues/8\n-[37]:\thttps://github.com/JunzhouLiu/BILIBILI-HELPER/issues/4\n-[38]:\thttps://github.com/apps/pull\n-[39]:\thttps://github.com/JunzhouLiu/BILIBILI-HELPER/issues/4\n-[40]:\thttps://github.com/JunzhouLiu/BILIBILI-HELPER\n-[41]:\thttps://github.com/JunzhouLiu/BILIBILI-HELPER/blob/main/LICENSE\n-[42]:\thttps://github.com/SocialSisterYi/bilibili-API-collect\n-[43]:\thttps://github.com/happy888888/BiliExp\n-[44]:\thttps://github.com/SuperNG6/docker-bilibili-helper\n-[45]:\thttps://hub.docker.com/r/superng6/bilibili-helper\n-[46]:\thttps://github.com/KurenaiRyu/bilibili-helper-runer\n-[47]:\thttps://github.com/yangyang0507/k8s-bilibili-helper\n-[48]:\thttps://www.jetbrains.com/?from=BILIBILI-HELPER\n-[49]:\thttps://app.fossa.com/projects/git%2Bgithub.com%2FJunzhouLiu%2FBILIBILI-HELPER?ref=badge_large\n-[50]:\thttps://starchart.cc/JunzhouLiu/BILIBILI-HELPER\n-\n-[image-1]:\tdocs/IMG/20201012001307.png\n-[image-2]:\tdocs/IMG/20201013210000.png\n-[image-3]:\tdocs/IMG/workflow_dispatch.png\n-[image-4]:\tdocs/IMG/serverpush.png\n-[image-5]:\tdocs/IMG/wechatMsgPush.png\n-[image-6]:\tdocs/IMG/jetbrains.svg\n-[image-7]:\thttps://app.fossa.com/api/projects/git%2Bgithub.com%2FJunzhouLiu%2FBILIBILI-HELPER.svg?type=large\n-[image-8]:\thttps://starchart.cc/JunzhouLiu/BILIBILI-HELPER.svg\n+[![Stargazers over time](https://starchart.cc/JunzhouLiu/BILIBILI-HELPER.svg)](https://starchart.cc/JunzhouLiu/BILIBILI-HELPER)\n+"
  },
  {
    "sha": "8653651f2c6666e0fdb08fbd6c24221a4dcbf85c",
    "filename": "pom.xml",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/Narcissusweng/BILIBILI-HELPER/blob/407eea783c780fd69d7f84d54745d3297770a7ff/pom.xml",
    "raw_url": "https://github.com/Narcissusweng/BILIBILI-HELPER/raw/407eea783c780fd69d7f84d54745d3297770a7ff/pom.xml",
    "contents_url": "https://api.github.com/repos/Narcissusweng/BILIBILI-HELPER/contents/pom.xml?ref=407eea783c780fd69d7f84d54745d3297770a7ff",
    "patch": "@@ -6,7 +6,7 @@\n \n     <groupId>top.misec</groupId>\n     <artifactId>BILIBILI-HELPER</artifactId>\n-    <version>1.3.7</version>\n+    <version>1.3.8</version>\n     <properties>\n         <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n     </properties>"
  },
  {
    "sha": "251d577973126a9a19592038b5f99ef62d7c254c",
    "filename": "setup.sh",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/Narcissusweng/BILIBILI-HELPER/blob/407eea783c780fd69d7f84d54745d3297770a7ff/setup.sh",
    "raw_url": "https://github.com/Narcissusweng/BILIBILI-HELPER/raw/407eea783c780fd69d7f84d54745d3297770a7ff/setup.sh",
    "contents_url": "https://api.github.com/repos/Narcissusweng/BILIBILI-HELPER/contents/setup.sh?ref=407eea783c780fd69d7f84d54745d3297770a7ff",
    "patch": "@@ -1,5 +1,5 @@\n #!/bin/bash\n-version=\"1.3.7\"\n+version=\"1.3.8\"\n \n function installJava(){\n   command -v apt >/dev/null 2>&1 && (apt-get update; apt-get install openjdk-8-jdk -y; return;)"
  },
  {
    "sha": "3e0cd65e4c046053c1b1c00107e482a60393b296",
    "filename": "src/main/java/top/misec/task/ServerPush.java",
    "status": "modified",
    "additions": 19,
    "deletions": 9,
    "changes": 28,
    "blob_url": "https://github.com/Narcissusweng/BILIBILI-HELPER/blob/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/java/top/misec/task/ServerPush.java",
    "raw_url": "https://github.com/Narcissusweng/BILIBILI-HELPER/raw/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/java/top/misec/task/ServerPush.java",
    "contents_url": "https://api.github.com/repos/Narcissusweng/BILIBILI-HELPER/contents/src/main/java/top/misec/task/ServerPush.java?ref=407eea783c780fd69d7f84d54745d3297770a7ff",
    "patch": "@@ -2,7 +2,6 @@\n \n import com.google.gson.JsonObject;\n import lombok.extern.log4j.Log4j2;\n-import org.apache.logging.log4j.core.jmx.Server;\n import top.misec.apiquery.ApiList;\n import top.misec.login.ServerVerify;\n import top.misec.utils.HttpUtil;\n@@ -18,24 +17,34 @@\n \n     private String pushToken = null;\n \n-    public void pushMsg(String text, String desp) {\n+    public void pushServerChan(String text, String desp) {\n+        String url;\n+        String pushBody;\n         if (pushToken == null) {\n             pushToken = ServerVerify.getFtkey();\n         }\n \n-        String url = ApiList.ServerPush + pushToken + \".send\";\n+        if (pushToken.contains(\"SCU\")) {\n+            url = ApiList.ServerPush + pushToken + \".send\";\n+            pushBody = \"text=\" + text + \"&desp=\" + desp;\n+            log.info(\"采用旧版server酱推送渠道推送\");\n+        } else {\n+            url = ApiList.ServerPushV2 + pushToken + \".send\";\n+            pushBody = \"title=\" + text + \"&desp=\" + desp;\n+            log.info(\"采用Turbo版server酱推送渠道推送\");\n+        }\n \n-        String pushBody = \"text=\" + text + \"&desp=\" + desp;\n         int retryTimes = 3;\n         while (retryTimes > 0) {\n             retryTimes--;\n             try {\n                 JsonObject jsonObject = HttpUtil.doPost(url, pushBody);\n-                if (jsonObject != null && \"success\".equals(jsonObject.get(\"errmsg\").getAsString())) {\n+                if (jsonObject.get(\"code\").getAsInt() == 0 || \"success\".equals(jsonObject.get(\"errmsg\").getAsString())) {\n                     log.info(\"任务状态推送成功\");\n                     break;\n                 } else {\n                     log.info(\"任务状态推送失败，开始第{}次重试\", 3 - retryTimes);\n+                    log.debug(jsonObject);\n                 }\n             } catch (Exception e) {\n                 e.printStackTrace();\n@@ -48,13 +57,14 @@ public void pushMsg(String text, String desp) {\n     public static void doServerPush() {\n         if (ServerVerify.getFtkey() != null && ServerVerify.getChatId() == null) {\n             ServerPush serverPush = new ServerPush();\n-            serverPush.pushMsg(\"BILIBILI-HELPER任务简报\", LoadFileResource.loadFile(\"logs/daily.log\"));\n+            log.info(\"Server酱旧版推送渠道即将下线，请前往[sct.ftqq.com](http://sct.ftqq.com/)使用Turbo版本的推送Key\");\n+            serverPush.pushServerChan(\"BILIBILI-HELPER任务简报\", LoadFileResource.loadFile(\"logs/daily.log\"));\n             log.info(\"本次执行推送日志到微信\");\n-        } else if(ServerVerify.getFtkey() != null && ServerVerify.getChatId() != null){\n+        } else if (ServerVerify.getFtkey() != null && ServerVerify.getChatId() != null) {\n             ServerPush serverPush = new ServerPush();\n             serverPush.pushTelegramMsg(\"BILIBILI-HELPER任务简报\\n\" + LoadFileResource.loadFile(\"logs/daily.log\"));\n             log.info(\"本次执行推送日志到Telegram\");\n-        }else{\n+        } else {\n             log.info(\"未配置server酱,本次执行不推送日志到微信\");\n             log.info(\"未配置Telegram,本次执行不推送日志到Telegram\");\n         }\n@@ -64,7 +74,7 @@ public static void doServerPush() {\n     private void pushTelegramMsg(String text) {\n         String url = ApiList.ServerPushTelegram + ServerVerify.getFtkey() + \"/sendMessage\";\n \n-        String pushBody = \"chat_id=\"+ServerVerify.getChatId() + \"&text=\" + text;\n+        String pushBody = \"chat_id=\" + ServerVerify.getChatId() + \"&text=\" + text;\n         int retryTimes = 3;\n         while (retryTimes > 0) {\n             retryTimes--;"
  },
  {
    "sha": "c45e139f90b79e2a6af14986b9a44b4f3ea42826",
    "filename": "src/main/java/top/misec/utils/HelpUtil.java",
    "status": "modified",
    "additions": 0,
    "deletions": 1,
    "changes": 1,
    "blob_url": "https://github.com/Narcissusweng/BILIBILI-HELPER/blob/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/java/top/misec/utils/HelpUtil.java",
    "raw_url": "https://github.com/Narcissusweng/BILIBILI-HELPER/raw/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/java/top/misec/utils/HelpUtil.java",
    "contents_url": "https://api.github.com/repos/Narcissusweng/BILIBILI-HELPER/contents/src/main/java/top/misec/utils/HelpUtil.java?ref=407eea783c780fd69d7f84d54745d3297770a7ff",
    "patch": "@@ -19,7 +19,6 @@ public static void main(String[] args) {\n \n     }\n \n-\n     public static long power(int a, int b) {\n         long power = 1;\n         for (int c = 0; c < b; c++) {"
  },
  {
    "sha": "ae6cb31cf859be80774e40b6fd09b7172c1122df",
    "filename": "src/main/java/top/misec/utils/VersionInfo.java",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/Narcissusweng/BILIBILI-HELPER/blob/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/java/top/misec/utils/VersionInfo.java",
    "raw_url": "https://github.com/Narcissusweng/BILIBILI-HELPER/raw/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/java/top/misec/utils/VersionInfo.java",
    "contents_url": "https://api.github.com/repos/Narcissusweng/BILIBILI-HELPER/contents/src/main/java/top/misec/utils/VersionInfo.java?ref=407eea783c780fd69d7f84d54745d3297770a7ff",
    "patch": "@@ -13,7 +13,7 @@\n @Data\n public class VersionInfo {\n     private static String releaseVersion = \"\";\n-    private static String updateDate = \"2021-01-16\";\n+    private static String updateDate = \"2021-03-16\";\n     private static String projectRepo = \"https://github.com/JunzhouLiu/BILIBILI-HELPER\";\n     private static String releaseInfo = \"\";\n "
  },
  {
    "sha": "faa29a3bfe62ff1cbbff489f671e4b2aa82df659",
    "filename": "src/main/resources/release.info",
    "status": "modified",
    "additions": 2,
    "deletions": 6,
    "changes": 8,
    "blob_url": "https://github.com/Narcissusweng/BILIBILI-HELPER/blob/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/resources/release.info",
    "raw_url": "https://github.com/Narcissusweng/BILIBILI-HELPER/raw/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/resources/release.info",
    "contents_url": "https://api.github.com/repos/Narcissusweng/BILIBILI-HELPER/contents/src/main/resources/release.info?ref=407eea783c780fd69d7f84d54745d3297770a7ff",
    "patch": "@@ -1,6 +1,2 @@\n-\n-1. 对报错提示进行优化。（账号进小黑屋也会导致412）\n-2. 默认跳过每日任务（由于最近出现了大范围的警告）\n-3. 跳过每日任务后进行推送\n-4. 修改说明文档。\n-5. 增加sct推送api\n\\ No newline at end of file\n+1. B站赛事预测助手已发布，每天自动参与KPL，LPL赛事预测，赚取硬币。\n+仓库地址 https://github.com/JunzhouLiu/bilibili-match-prediction"
  },
  {
    "sha": "9e01dd0f406eaecbe8a619e0833754af85798493",
    "filename": "src/main/resources/release.json",
    "status": "modified",
    "additions": 2,
    "deletions": 2,
    "changes": 4,
    "blob_url": "https://github.com/Narcissusweng/BILIBILI-HELPER/blob/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/resources/release.json",
    "raw_url": "https://github.com/Narcissusweng/BILIBILI-HELPER/raw/407eea783c780fd69d7f84d54745d3297770a7ff/src/main/resources/release.json",
    "contents_url": "https://api.github.com/repos/Narcissusweng/BILIBILI-HELPER/contents/src/main/resources/release.json?ref=407eea783c780fd69d7f84d54745d3297770a7ff",
    "patch": "@@ -1,4 +1,4 @@\n {\n-  \"tag_main\": \"1.3.7\",\n-  \"tag_latest\": \"1.3.7\"\n+  \"tag_main\": \"1.3.8\",\n+  \"tag_latest\": \"1.3.8\"\n }\n\\ No newline at end of file"
  },
  {
    "sha": "7f30cf3d8950ae1b2d53d6ad979a297882b16997",
    "filename": "src/test/java/Log4j2Test.java",
    "status": "modified",
    "additions": 3,
    "deletions": 2,
    "changes": 5,
    "blob_url": "https://github.com/Narcissusweng/BILIBILI-HELPER/blob/407eea783c780fd69d7f84d54745d3297770a7ff/src/test/java/Log4j2Test.java",
    "raw_url": "https://github.com/Narcissusweng/BILIBILI-HELPER/raw/407eea783c780fd69d7f84d54745d3297770a7ff/src/test/java/Log4j2Test.java",
    "contents_url": "https://api.github.com/repos/Narcissusweng/BILIBILI-HELPER/contents/src/test/java/Log4j2Test.java?ref=407eea783c780fd69d7f84d54745d3297770a7ff",
    "patch": "@@ -1,13 +1,13 @@\n import org.apache.logging.log4j.LogManager;\n import org.apache.logging.log4j.core.Logger;\n+import org.junit.Test;\n import top.misec.task.ServerPush;\n \n public class Log4j2Test {\n \n     static Logger LOG = (Logger) LogManager.getLogger(Log4j2Test.class.getName());\n \n     public static void main(String[] args) throws Exception {\n-        logAll();\n         System.out.println();\n         ServerPush serverPush = new ServerPush();\n         serverPush.setPushToken(args[0]);\n@@ -16,7 +16,8 @@ public static void main(String[] args) throws Exception {\n     }\n \n     // 打印各种级别的日志用于测试\n-    public static void logAll() throws Exception {\n+    @Test\n+    public void logAll() throws Exception {\n         LOG.trace(\"trace level log\");\n         LOG.debug(\"debug level log\");\n         LOG.info(\"info level log\");"
  },
  {
    "sha": "9b70045b832d2a5e24179b8f4688f8239255950f",
    "filename": "src/test/java/top/misec/task/UnitTest.java",
    "status": "modified",
    "additions": 2,
    "deletions": 1,
    "changes": 3,
    "blob_url": "https://github.com/Narcissusweng/BILIBILI-HELPER/blob/407eea783c780fd69d7f84d54745d3297770a7ff/src/test/java/top/misec/task/UnitTest.java",
    "raw_url": "https://github.com/Narcissusweng/BILIBILI-HELPER/raw/407eea783c780fd69d7f84d54745d3297770a7ff/src/test/java/top/misec/task/UnitTest.java",
    "contents_url": "https://api.github.com/repos/Narcissusweng/BILIBILI-HELPER/contents/src/test/java/top/misec/task/UnitTest.java?ref=407eea783c780fd69d7f84d54745d3297770a7ff",
    "patch": "@@ -35,7 +35,8 @@ public static void main(String[] args) {\n         Config.getInstance().configInit();\n \n         new UserCheck().run();\n-        new CoinAdd().run();\n+        ServerPush.doServerPush();\n+        //new CoinAdd().run();\n \n     }\n }"
  }
]
