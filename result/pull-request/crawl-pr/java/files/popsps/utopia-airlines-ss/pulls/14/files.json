[
  {
    "sha": "da01f950d3d8a3ce194cdbd60a377056c5b00362",
    "filename": "frontend/admin-client/src/app/shared/services/user.service.ts",
    "status": "modified",
    "additions": 32,
    "deletions": 17,
    "changes": 49,
    "blob_url": "https://github.com/popsps/utopia-airlines-ss/blob/5d98ce4d74ec1f091a1ba244e03f10a0ad0aaab0/frontend/admin-client/src/app/shared/services/user.service.ts",
    "raw_url": "https://github.com/popsps/utopia-airlines-ss/raw/5d98ce4d74ec1f091a1ba244e03f10a0ad0aaab0/frontend/admin-client/src/app/shared/services/user.service.ts",
    "contents_url": "https://api.github.com/repos/popsps/utopia-airlines-ss/contents/frontend/admin-client/src/app/shared/services/user.service.ts?ref=5d98ce4d74ec1f091a1ba244e03f10a0ad0aaab0",
    "patch": "@@ -1,9 +1,8 @@\n import { Injectable } from '@angular/core';\n import { HttpClient } from '@angular/common/http';\n+import { Observable } from 'rxjs';\n \n-import { environment } from '../../../environments/environment';\n import { FileSaverService } from 'ngx-filesaver';\n-import { HttpService } from './http.service';\n import { Users, Roles } from '../types';\n import { RouterLinkWithHref } from '@angular/router';\n \n@@ -16,29 +15,45 @@ export class UserService {\n \n \n   constructor(\n-    private httpService: HttpService,\n-    private fileSaverService: FileSaverService\n+    private fileSaverService: FileSaverService,\n+    private http: HttpClient\n   ) { }\n \n-    getCSVRow(user: any): any {\n-      const row = {\n-        id: user.id,\n-        'User Name': user.username ?? '',\n-        'First Name': user.givenName ?? '',\n-        'Last Name': user.familyName ?? '',\n-        Email: user.email ?? '',\n-        Phone: user.phone ?? '',\n-        Role: user.role.name ?? ''\n-      };\n-      return row;\n+  get(url: string): Observable<object> {\n+    return this.http.get(url);\n+  }\n+\n+  post(url: string, payload: object): Observable<object> {\n+    return this.http.post(url, payload);\n+  }\n+\n+  update(url: string, payload: object): Observable<object> {\n+    return this.http.put(url, payload);\n+  }\n+\n+  delete(url: string): Observable<object> {\n+    return this.http.delete(url);\n+  }\n+\n+  getCSVRow(user: any): any {\n+    const row = {\n+      id: user.id,\n+      'User Name': user.username ?? '',\n+      'First Name': user.givenName ?? '',\n+      'Last Name': user.familyName ?? '',\n+      Email: user.email ?? '',\n+      Phone: user.phone ?? '',\n+      Role: user.role.name ?? ''\n+    };\n+    return row;\n   }\n \n   saveUsersAsCSV(users: any[]): void {\n     const header = 'User Id,User Name,First Name,Last Name,Email,Phone,Role,';\n     const csv = users.map(user => Object.values(this.getCSVRow(user)).join(','));\n     csv.unshift(header);\n     const csvList = csv.join('\\n');\n-    const blob = new Blob([csvList], {type: 'text/csv;charset=utf-8'});\n-    this.fileSaverService.save(blob, 'user_data.csv', 'csv', {autoBom: false});\n+    const blob = new Blob([csvList], { type: 'text/csv;charset=utf-8' });\n+    this.fileSaverService.save(blob, 'user_data.csv', 'csv', { autoBom: false });\n   }\n }"
  },
  {
    "sha": "795faa8b0138eb74d5cc03a2628dfdc38d6c37ac",
    "filename": "frontend/admin-client/src/app/user-page/user-page.component.ts",
    "status": "modified",
    "additions": 2,
    "deletions": 3,
    "changes": 5,
    "blob_url": "https://github.com/popsps/utopia-airlines-ss/blob/5d98ce4d74ec1f091a1ba244e03f10a0ad0aaab0/frontend/admin-client/src/app/user-page/user-page.component.ts",
    "raw_url": "https://github.com/popsps/utopia-airlines-ss/raw/5d98ce4d74ec1f091a1ba244e03f10a0ad0aaab0/frontend/admin-client/src/app/user-page/user-page.component.ts",
    "contents_url": "https://api.github.com/repos/popsps/utopia-airlines-ss/contents/frontend/admin-client/src/app/user-page/user-page.component.ts?ref=5d98ce4d74ec1f091a1ba244e03f10a0ad0aaab0",
    "patch": "@@ -1,9 +1,8 @@\n import { Component, OnInit } from '@angular/core';\n import { Router } from '@angular/router';\n import { environment } from '../../environments/environment';\n-import { HttpService } from '../shared/services/http.service';\n+import { UserService } from '../shared/services/user.service';\n import { AuthService } from '../shared/services/auth.service';\n-import { User } from '../shared/models/user';\n import {\n   FormGroup,\n   FormBuilder,\n@@ -36,7 +35,7 @@ export class UserPageComponent implements OnInit {\n \n   constructor(\n     private authService: AuthService,\n-    private userService: HttpService,\n+    private userService: UserService,\n     private router: Router,\n     private formBuilder: FormBuilder\n   ) { }"
  },
  {
    "sha": "f6df32d3ee928aa1b018fcff7f8a864d4ab70e20",
    "filename": "frontend/admin-client/src/app/users/users.component.ts",
    "status": "modified",
    "additions": 10,
    "deletions": 12,
    "changes": 22,
    "blob_url": "https://github.com/popsps/utopia-airlines-ss/blob/5d98ce4d74ec1f091a1ba244e03f10a0ad0aaab0/frontend/admin-client/src/app/users/users.component.ts",
    "raw_url": "https://github.com/popsps/utopia-airlines-ss/raw/5d98ce4d74ec1f091a1ba244e03f10a0ad0aaab0/frontend/admin-client/src/app/users/users.component.ts",
    "contents_url": "https://api.github.com/repos/popsps/utopia-airlines-ss/contents/frontend/admin-client/src/app/users/users.component.ts?ref=5d98ce4d74ec1f091a1ba244e03f10a0ad0aaab0",
    "patch": "@@ -5,7 +5,6 @@ import {\n   Validators\n } from '@angular/forms';\n import { environment } from '../../environments/environment';\n-import { HttpService } from '../shared/services/http.service';\n import { UserService } from '../shared/services/user.service';\n \n import { PagerService } from '../shared/services/pager.service';\n@@ -39,7 +38,6 @@ export class UsersComponent implements OnInit {\n   order: boolean;\n \n   constructor(\n-    private httpService: HttpService,\n     private formBuilder: FormBuilder,\n     private userService: UserService,\n     private pagerService: PagerService,\n@@ -65,21 +63,21 @@ export class UsersComponent implements OnInit {\n   }\n \n   navigate(page: number): void {\n-    // if (page < 1 || page > this.totalUsers / this.limit) {\n-    //   this.isError = true;\n-    //   this.error = {\n-    //     message: \"invalid page\"\n-    //   };\n-    //   return;\n-    // }\n+    if (page < 1 || page > Math.ceil(this.totalUsers / this.limit)) {\n+      this.isError = true;\n+      this.error = {\n+        message: \"invalid page\"\n+      };\n+      return;\n+    }\n     this.page = page;\n     this.initializeUsers();\n   }\n \n   initializeUsers(): void {\n     const offset = this.page - 1;\n     console.log(this.apiUrl + '?offset=' + offset.toString() + '&limit=' + this.limit.toString() + this.currentSorting + this.searchUrl);\n-    this.httpService\n+    this.userService\n       .get(this.apiUrl + '?offset=' + offset.toString() + '&limit=' + this.limit.toString() + this.currentSorting + this.searchUrl)\n       .subscribe((res) => {\n         this.isError = false;\n@@ -160,7 +158,7 @@ export class UsersComponent implements OnInit {\n   }\n \n   addUser(): void {\n-    this.httpService.post(this.apiUrl, this.addUserForm.value).subscribe((res) => {\n+    this.userService.post(this.apiUrl, this.addUserForm.value).subscribe((res) => {\n       this.isError = false;\n       this.initializeUsers();\n       this.initializeForm();\n@@ -171,7 +169,7 @@ export class UsersComponent implements OnInit {\n   }\n \n   onSaveCSVFile(): void {\n-    this.httpService.get(environment.userApiUrl + '?sort=username').subscribe((res) => {\n+    this.userService.get(environment.userApiUrl + '?sort=username').subscribe((res) => {\n       let list: any;\n       list = res;\n       this.userService.saveUsersAsCSV(list.content);"
  }
]
