[
  {
    "sha": "915464c451fce5eb74f5245aec32ffc4af653711",
    "filename": "pom.xml",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/jenkinsci/analysis-model/blob/adf39325023502056fca59c93296529a39a1863e/pom.xml",
    "raw_url": "https://github.com/jenkinsci/analysis-model/raw/adf39325023502056fca59c93296529a39a1863e/pom.xml",
    "contents_url": "https://api.github.com/repos/jenkinsci/analysis-model/contents/pom.xml?ref=adf39325023502056fca59c93296529a39a1863e",
    "patch": "@@ -53,7 +53,7 @@\n \n   <properties>\n     <scmTag>HEAD</scmTag>\n-    <revision>9.8.2</revision>\n+    <revision>9.9.0</revision>\n     <changelist>-SNAPSHOT</changelist>\n     <source.encoding>UTF-8</source.encoding>\n     <project.build.sourceEncoding>${source.encoding}</project.build.sourceEncoding>"
  },
  {
    "sha": "17ad9618f3659b2176669813185b44f90a5577ab",
    "filename": "src/main/java/edu/hm/hafner/analysis/parser/SphinxBuildLinkcheckParser.java",
    "status": "added",
    "additions": 52,
    "deletions": 0,
    "changes": 52,
    "blob_url": "https://github.com/jenkinsci/analysis-model/blob/adf39325023502056fca59c93296529a39a1863e/src/main/java/edu/hm/hafner/analysis/parser/SphinxBuildLinkcheckParser.java",
    "raw_url": "https://github.com/jenkinsci/analysis-model/raw/adf39325023502056fca59c93296529a39a1863e/src/main/java/edu/hm/hafner/analysis/parser/SphinxBuildLinkcheckParser.java",
    "contents_url": "https://api.github.com/repos/jenkinsci/analysis-model/contents/src/main/java/edu/hm/hafner/analysis/parser/SphinxBuildLinkcheckParser.java?ref=adf39325023502056fca59c93296529a39a1863e",
    "patch": "@@ -0,0 +1,52 @@\n+package edu.hm.hafner.analysis.parser;\n+\n+import java.util.Optional;\n+import java.util.regex.Matcher;\n+\n+import edu.hm.hafner.analysis.Issue;\n+import edu.hm.hafner.analysis.IssueBuilder;\n+import edu.hm.hafner.analysis.RegexpLineParser;\n+import edu.hm.hafner.analysis.Severity;\n+\n+import static edu.hm.hafner.analysis.Categories.*;\n+\n+/**\n+ * A parser for the Sphinx warnings generated by the linkcheck builder.\n+ *\n+ * @author Davide Mancusi\n+ */\n+public class SphinxBuildLinkcheckParser extends RegexpLineParser {\n+    private static final long serialVersionUID = 1L;\n+\n+    private static final String SPHINX_BUILD_LINKCHECK_WARNING_PATTERN = \"^(.*):(\\\\d+|None|): \\\\[(.*?)\\\\] (.*)\";\n+\n+    /**\n+     * Creates a new instance of {@link SphinxBuildLinkcheckParser}.\n+     */\n+    public SphinxBuildLinkcheckParser() {\n+        super(SPHINX_BUILD_LINKCHECK_WARNING_PATTERN);\n+    }\n+\n+    @Override\n+    protected Optional<Issue> createIssue(final Matcher matcher, final IssueBuilder builder) {\n+        String message = matcher.group(4);\n+        String category = guessCategoryIfEmpty(matcher.group(3), message);\n+\n+        return builder.setFileName(matcher.group(1))\n+                .setLineStart(matcher.group(2))\n+                .setCategory(category)\n+                .setMessage(message)\n+                .setSeverity(mapPriority(category))\n+                .buildOptional();\n+    }\n+\n+    private Severity mapPriority(final String priority) {\n+        if (equalsIgnoreCase(priority, \"broken\")) {\n+            return Severity.WARNING_HIGH;\n+        }\n+        else {\n+            return Severity.WARNING_NORMAL;\n+        }\n+    }\n+}\n+"
  },
  {
    "sha": "de0d656b8b568c6a48dc8c91957f2397da4a755c",
    "filename": "src/test/java/edu/hm/hafner/analysis/parser/SphinxBuildLinkcheckParserTest.java",
    "status": "added",
    "additions": 79,
    "deletions": 0,
    "changes": 79,
    "blob_url": "https://github.com/jenkinsci/analysis-model/blob/adf39325023502056fca59c93296529a39a1863e/src/test/java/edu/hm/hafner/analysis/parser/SphinxBuildLinkcheckParserTest.java",
    "raw_url": "https://github.com/jenkinsci/analysis-model/raw/adf39325023502056fca59c93296529a39a1863e/src/test/java/edu/hm/hafner/analysis/parser/SphinxBuildLinkcheckParserTest.java",
    "contents_url": "https://api.github.com/repos/jenkinsci/analysis-model/contents/src/test/java/edu/hm/hafner/analysis/parser/SphinxBuildLinkcheckParserTest.java?ref=adf39325023502056fca59c93296529a39a1863e",
    "patch": "@@ -0,0 +1,79 @@\n+package edu.hm.hafner.analysis.parser;\n+\n+import org.junit.jupiter.api.Test;\n+\n+import edu.hm.hafner.analysis.AbstractParserTest;\n+import edu.hm.hafner.analysis.Report;\n+import edu.hm.hafner.analysis.Severity;\n+import edu.hm.hafner.analysis.assertions.SoftAssertions;\n+\n+import static edu.hm.hafner.analysis.assertions.Assertions.*;\n+\n+/**\n+ * Tests the class {@link SphinxBuildLinkcheckParser}.\n+ */\n+class SphinxBuildLinkcheckParserTest extends AbstractParserTest {\n+    SphinxBuildLinkcheckParserTest() {\n+        super(\"sphinxbuildlinkcheck.txt\");\n+    }\n+\n+    private static final String SPHINX_LINKCHECK_BROKEN = \"Broken\";\n+    private static final String SPHINX_LINKCHECK_RED_FOUND = \"Redirected with Found\";\n+    private static final String SPHINX_LINKCHECK_RED_PERM = \"Redirected permanently\";\n+    private static final String SPHINX_LINKCHECK_RED_TEMP = \"Redirected temporarily\";\n+    private static final String SPHINX_LINKCHECK_RED_OTH = \"Redirected with See Other\";\n+\n+    @Override\n+    protected void assertThatIssuesArePresent(final Report report, final SoftAssertions softly) {\n+        assertThat(report).hasSize(6);\n+\n+        softly.assertThat(report.get(0))\n+                .hasSeverity(Severity.WARNING_HIGH)\n+                .hasCategory(SPHINX_LINKCHECK_BROKEN)\n+                .hasLineStart(451)\n+                .hasLineEnd(451)\n+                .hasMessage(\"https://matplotlib.org/api/_as_gen/matplotlib.figure.Figure.html#matplotlib.figure.Figure: Anchor 'matplotlib.figure.Figure' not found\")\n+                .hasFileName(\"modules/javert/mpl.rst\");\n+        softly.assertThat(report.get(1))\n+                .hasSeverity(Severity.WARNING_HIGH)\n+                .hasCategory(SPHINX_LINKCHECK_BROKEN)\n+                .hasLineStart(451)\n+                .hasLineEnd(451)\n+                .hasMessage(\"https://matplotlib.org/api/_as_gen/matplotlib.pyplot.errorbar.html#matplotlib.pyplot.errorbar: Ancre 'matplotlib.pyplot.errorbar' non trouvée\")\n+                .hasFileName(\"modules/javert/mpl.rst\");\n+        softly.assertThat(report.get(2))\n+                .hasSeverity(Severity.WARNING_NORMAL)\n+                .hasCategory(SPHINX_LINKCHECK_RED_FOUND)\n+                .hasLineStart(9)\n+                .hasLineEnd(9)\n+                .hasMessage(\"https://www.sphinx-doc.org/en/stable/ to https://www.sphinx-doc.org/en/master/\")\n+                .hasFileName(\"devs/documentation.rst\");\n+        softly.assertThat(report.get(3))\n+                .hasSeverity(Severity.WARNING_NORMAL)\n+                .hasCategory(SPHINX_LINKCHECK_RED_PERM)\n+                .hasLineStart(52)\n+                .hasLineEnd(52)\n+                .hasMessage(\"https://docs.scipy.org/doc/numpy/user/basics.rec.html to https://numpy.org/doc/stable/user/basics.rec.html\")\n+                .hasFileName(\"modules/eponine/tripoli4/common.rst\");\n+        softly.assertThat(report.get(4))\n+                .hasSeverity(Severity.WARNING_NORMAL)\n+                .hasCategory(SPHINX_LINKCHECK_RED_OTH)\n+                .hasLineStart(221)\n+                .hasLineEnd(221)\n+                .hasMessage(\"https://docs.scipy.org/doc/numpy/user/basics.rec.html to https://numpy.org/doc/stable/user/basics.rec.html\")\n+                .hasFileName(\"modules/eponine/tripoli4/common.rst\");\n+        softly.assertThat(report.get(5))\n+                .hasSeverity(Severity.WARNING_NORMAL)\n+                .hasCategory(SPHINX_LINKCHECK_RED_TEMP)\n+                .hasLineStart(224)\n+                .hasLineEnd(224)\n+                .hasMessage(\"https://docs.scipy.org/doc/numpy/user/basics.rec.html to https://numpy.org/doc/stable/user/basics.rec.html\")\n+                .hasFileName(\"modules/eponine/tripoli4/common.rst\");\n+    }\n+\n+    @Override\n+    protected SphinxBuildLinkcheckParser createParser() {\n+        return new SphinxBuildLinkcheckParser();\n+    }\n+}\n+"
  },
  {
    "sha": "985c3ebe928c65a387bcfe72cf3212d7eeaf0e91",
    "filename": "src/test/resources/edu/hm/hafner/analysis/parser/sphinxbuildlinkcheck.txt",
    "status": "added",
    "additions": 6,
    "deletions": 0,
    "changes": 6,
    "blob_url": "https://github.com/jenkinsci/analysis-model/blob/adf39325023502056fca59c93296529a39a1863e/src/test/resources/edu/hm/hafner/analysis/parser/sphinxbuildlinkcheck.txt",
    "raw_url": "https://github.com/jenkinsci/analysis-model/raw/adf39325023502056fca59c93296529a39a1863e/src/test/resources/edu/hm/hafner/analysis/parser/sphinxbuildlinkcheck.txt",
    "contents_url": "https://api.github.com/repos/jenkinsci/analysis-model/contents/src/test/resources/edu/hm/hafner/analysis/parser/sphinxbuildlinkcheck.txt?ref=adf39325023502056fca59c93296529a39a1863e",
    "patch": "@@ -0,0 +1,6 @@\n+modules/javert/mpl.rst:451: [broken] https://matplotlib.org/api/_as_gen/matplotlib.figure.Figure.html#matplotlib.figure.Figure: Anchor 'matplotlib.figure.Figure' not found\n+modules/javert/mpl.rst:451: [broken] https://matplotlib.org/api/_as_gen/matplotlib.pyplot.errorbar.html#matplotlib.pyplot.errorbar: Ancre 'matplotlib.pyplot.errorbar' non trouvée\n+devs/documentation.rst:9: [redirected with Found] https://www.sphinx-doc.org/en/stable/ to https://www.sphinx-doc.org/en/master/\n+modules/eponine/tripoli4/common.rst:52: [redirected permanently] https://docs.scipy.org/doc/numpy/user/basics.rec.html to https://numpy.org/doc/stable/user/basics.rec.html\n+modules/eponine/tripoli4/common.rst:221: [redirected with See Other] https://docs.scipy.org/doc/numpy/user/basics.rec.html to https://numpy.org/doc/stable/user/basics.rec.html\n+modules/eponine/tripoli4/common.rst:224: [redirected temporarily] https://docs.scipy.org/doc/numpy/user/basics.rec.html to https://numpy.org/doc/stable/user/basics.rec.html"
  }
]
