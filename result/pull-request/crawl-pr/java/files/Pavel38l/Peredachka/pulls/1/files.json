[
  {
    "sha": "56df53219ed14bd54cfd5675ebaeb9541df2af43",
    "filename": "backend/pom.xml",
    "status": "modified",
    "additions": 16,
    "deletions": 0,
    "changes": 16,
    "blob_url": "https://github.com/Pavel38l/Peredachka/blob/12f38df60e3f3733758db0bdaaf5f143c343f5e1/backend/pom.xml",
    "raw_url": "https://github.com/Pavel38l/Peredachka/raw/12f38df60e3f3733758db0bdaaf5f143c343f5e1/backend/pom.xml",
    "contents_url": "https://api.github.com/repos/Pavel38l/Peredachka/contents/backend/pom.xml?ref=12f38df60e3f3733758db0bdaaf5f143c343f5e1",
    "patch": "@@ -13,6 +13,7 @@\n \t<version>0.0.1-SNAPSHOT</version>\n \t<name>Peredachka</name>\n \n+\n \t<properties>\n \t\t<java.version>11</java.version>\n \t</properties>\n@@ -22,6 +23,11 @@\n \t\t\t<groupId>org.springframework.boot</groupId>\n \t\t\t<artifactId>spring-boot-starter-data-jpa</artifactId>\n \t\t</dependency>\n+\t\t<dependency>\n+\t\t\t<groupId>org.slf4j</groupId>\n+\t\t\t<artifactId>slf4j-api</artifactId>\n+\t\t\t<version>1.7.25</version>\n+\t\t</dependency>\n <!--\t\t<dependency>-->\n <!--\t\t\t<groupId>org.springframework.boot</groupId>-->\n <!--\t\t\t<artifactId>spring-boot-starter-security</artifactId>-->\n@@ -86,6 +92,16 @@\n \t\t\t<artifactId>modelmapper</artifactId>\n \t\t\t<version>2.3.5</version>\n \t\t</dependency>\n+\t\t<dependency>\n+\t\t\t<groupId>ch.qos.logback</groupId>\n+\t\t\t<artifactId>logback-classic</artifactId>\n+\t\t\t<version>1.2.3</version>\n+\t\t</dependency>\n+\t\t<dependency>\n+\t\t\t<groupId>org.slf4j</groupId>\n+\t\t\t<artifactId>slf4j-api</artifactId>\n+\t\t\t<version>${slf4j.version}</version>\n+\t\t</dependency>\n \t</dependencies>\n \n \t<build>"
  },
  {
    "sha": "ae1c139ba3ff741bb339629d5693231c07f259fb",
    "filename": "backend/src/main/java/ru/vsu/Peredachka/controller/SecurityController.java",
    "status": "modified",
    "additions": 5,
    "deletions": 4,
    "changes": 9,
    "blob_url": "https://github.com/Pavel38l/Peredachka/blob/12f38df60e3f3733758db0bdaaf5f143c343f5e1/backend/src/main/java/ru/vsu/Peredachka/controller/SecurityController.java",
    "raw_url": "https://github.com/Pavel38l/Peredachka/raw/12f38df60e3f3733758db0bdaaf5f143c343f5e1/backend/src/main/java/ru/vsu/Peredachka/controller/SecurityController.java",
    "contents_url": "https://api.github.com/repos/Pavel38l/Peredachka/contents/backend/src/main/java/ru/vsu/Peredachka/controller/SecurityController.java?ref=12f38df60e3f3733758db0bdaaf5f143c343f5e1",
    "patch": "@@ -50,21 +50,22 @@ public MsgDto getAuth(Authentication auth) {\n \n     @RequestMapping(method = POST, path = \"/register\")\n     @ResponseStatus(HttpStatus.CREATED)\n-    public void register(@RequestBody RegisterUserDto dto) {\n+    public User register(@RequestBody RegisterUserDto dto) {\n         UserRole userRole = userRoleService.findByName(\"ROLE_USER\");\n         User user = mapper.toEntity(dto);\n         user.setUserRole(userRole);\n-        userService.updateOrCreateUser(user);\n+        return userService.updateOrCreateUser(user);\n     }\n \n     @RequestMapping(method = POST, path = \"/login\")\n     public AuthResponseDto login(@RequestBody LoginUserDto dto) {\n         Optional<User> userOptional = userService.findByLoginAndPassword(dto.getEmail(), dto.getPassword());\n         if (userOptional.isEmpty()) {\n-            throw new RuntimeException(\"Invalid username or password!\");\n+            //throw new RuntimeException(\"Invalid username or password!\");\n+            return new AuthResponseDto(\"\");\n         }\n         User user = userOptional.get();\n         String token = jwtProvider.generateToken(user.getEmail(), user.getUserRole());\n         return new AuthResponseDto(token);\n     }\n-}\n+}\n\\ No newline at end of file"
  },
  {
    "sha": "fae26a92931b4bf4f498f0c6b1f63f67ed7a1cc1",
    "filename": "backend/src/main/java/ru/vsu/Peredachka/service/UserService.java",
    "status": "modified",
    "additions": 13,
    "deletions": 2,
    "changes": 15,
    "blob_url": "https://github.com/Pavel38l/Peredachka/blob/12f38df60e3f3733758db0bdaaf5f143c343f5e1/backend/src/main/java/ru/vsu/Peredachka/service/UserService.java",
    "raw_url": "https://github.com/Pavel38l/Peredachka/raw/12f38df60e3f3733758db0bdaaf5f143c343f5e1/backend/src/main/java/ru/vsu/Peredachka/service/UserService.java",
    "contents_url": "https://api.github.com/repos/Pavel38l/Peredachka/contents/backend/src/main/java/ru/vsu/Peredachka/service/UserService.java?ref=12f38df60e3f3733758db0bdaaf5f143c343f5e1",
    "patch": "@@ -1,6 +1,8 @@\n package ru.vsu.Peredachka.service;\n \n import javassist.NotFoundException;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n import org.springframework.security.crypto.password.PasswordEncoder;\n import org.springframework.stereotype.Service;\n import ru.vsu.Peredachka.data.entity.User;\n@@ -10,11 +12,13 @@\n import java.util.List;\n import java.util.Optional;\n \n+\n @Service\n public class UserService {\n     private final UserRepository userRepository;\n     private final PasswordEncoder passwordEncoder;\n-\n+    private static final Logger logger = LoggerFactory.getLogger(\n+            UserService.class);\n     public UserService(UserRepository userRepository, PasswordEncoder passwordEncoder) {\n         this.userRepository = userRepository;\n         this.passwordEncoder = passwordEncoder;\n@@ -29,14 +33,21 @@ public User findById(Long id) throws NotFoundException {\n         if (userOptional.isPresent()) {\n             User user = userOptional.get();\n             if (passwordEncoder.matches(password, user.getPassword())) {\n+                logger.info(\"Just a log message.\");\n+                //logger.debug(\"Message for debug level.\");\n                 return Optional.of(user);\n             }\n         }\n         return Optional.empty();\n     }\n \n+\n     public User updateOrCreateUser(User user) {\n-        return userRepository.save(user);\n+        Optional<User> userOptional = userRepository.findByEmail(user.getEmail());\n+        if(userOptional.isEmpty())\n+            return userRepository.save(user);\n+        else\n+            return null;\n     }\n \n     public void deleteUserById(Long id) throws NotFoundException {"
  },
  {
    "sha": "0949bf45bf4c1ae2071e3a8517d9143d890c2c56",
    "filename": "backend/src/main/resources/application.properties",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/Pavel38l/Peredachka/blob/12f38df60e3f3733758db0bdaaf5f143c343f5e1/backend/src/main/resources/application.properties",
    "raw_url": "https://github.com/Pavel38l/Peredachka/raw/12f38df60e3f3733758db0bdaaf5f143c343f5e1/backend/src/main/resources/application.properties",
    "contents_url": "https://api.github.com/repos/Pavel38l/Peredachka/contents/backend/src/main/resources/application.properties?ref=12f38df60e3f3733758db0bdaaf5f143c343f5e1",
    "patch": "@@ -1,7 +1,7 @@\n spring.jpa.properties.hibernate.dialect = org.hibernate.dialect.PostgreSQLDialect\n spring.datasource.url=jdbc:postgresql://localhost:5432/peredachka\n spring.datasource.username=postgres\n-spring.datasource.password=admin\n+spring.datasource.password=danya54321\n spring.jpa.hibernate.ddl-auto=validate\n server.port=8080\n "
  },
  {
    "sha": "4b50ffccf0273663d0a0f428f0ca769a033a0995",
    "filename": "backend/src/main/resources/logback.xml",
    "status": "added",
    "additions": 36,
    "deletions": 0,
    "changes": 36,
    "blob_url": "https://github.com/Pavel38l/Peredachka/blob/12f38df60e3f3733758db0bdaaf5f143c343f5e1/backend/src/main/resources/logback.xml",
    "raw_url": "https://github.com/Pavel38l/Peredachka/raw/12f38df60e3f3733758db0bdaaf5f143c343f5e1/backend/src/main/resources/logback.xml",
    "contents_url": "https://api.github.com/repos/Pavel38l/Peredachka/contents/backend/src/main/resources/logback.xml?ref=12f38df60e3f3733758db0bdaaf5f143c343f5e1",
    "patch": "@@ -0,0 +1,36 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<configuration>\n+    <appender name=\"STDOUT\"\n+              class=\"ch.qos.logback.core.ConsoleAppender\">\n+        <!-- encoders are assigned the type ch.qos.logback.classic.encoder.PatternLayoutEncoder\n+            by default -->\n+        <encoder>\n+            <pattern>%d{dd.MM.yyyy HH:mm:ss.SSS} [%thread] %-5level  %logger{20} - %msg%n</pattern>\n+        </encoder>\n+    </appender>\n+\n+    <appender name=\"FILE\"\n+              class=\"ch.qos.logback.core.rolling.RollingFileAppender\">\n+        <file>slf4jlogbackexample.log</file>\n+        <rollingPolicy\n+                class=\"ch.qos.logback.core.rolling.TimeBasedRollingPolicy\">\n+            <!-- daily rollover -->\n+            <fileNamePattern>slf4jlogbackexample.%d{yyyy-MM-dd}.log</fileNamePattern>\n+\n+            <!-- Храним файлы логов 10 дней -->\n+            <maxHistory>10</maxHistory>\n+\n+            <!-- Максимальный размер файлов лога 30 гигабайт -->\n+            <totalSizeCap>10GB</totalSizeCap>\n+\n+        </rollingPolicy>\n+        <encoder>\n+            <pattern>%d{dd.MM.yyyy HH:mm:ss.SSS} [%thread] %-5level  %logger{20} - %msg%n</pattern>\n+        </encoder>\n+    </appender>\n+\n+    <root level=\"debug\">\n+        <appender-ref ref=\"STDOUT\" />\n+        <appender-ref ref=\"FILE\" />\n+    </root>\n+</configuration>\n\\ No newline at end of file"
  },
  {
    "sha": "0044cdb6447a4a34b78be2c25ee9162547d5381a",
    "filename": "frontend/package-lock.json",
    "status": "modified",
    "additions": 5,
    "deletions": 0,
    "changes": 5,
    "blob_url": "https://github.com/Pavel38l/Peredachka/blob/12f38df60e3f3733758db0bdaaf5f143c343f5e1/frontend/package-lock.json",
    "raw_url": "https://github.com/Pavel38l/Peredachka/raw/12f38df60e3f3733758db0bdaaf5f143c343f5e1/frontend/package-lock.json",
    "contents_url": "https://api.github.com/repos/Pavel38l/Peredachka/contents/frontend/package-lock.json?ref=12f38df60e3f3733758db0bdaaf5f143c343f5e1",
    "patch": "@@ -9743,6 +9743,11 @@\n         \"object.assign\": \"^4.1.2\"\n       }\n     },\n+    \"jwt-decode\": {\n+      \"version\": \"3.1.2\",\n+      \"resolved\": \"https://registry.npmjs.org/jwt-decode/-/jwt-decode-3.1.2.tgz\",\n+      \"integrity\": \"sha512-UfpWE/VZn0iP50d8cz9NrZLM9lSWhcJ+0Gt/nm4by88UL+J1SiKN8/5dkjMmbEzwL2CAe+67GsegCbIKtbp75A==\"\n+    },\n     \"killable\": {\n       \"version\": \"1.0.1\",\n       \"resolved\": \"https://registry.npmjs.org/killable/-/killable-1.0.1.tgz\","
  },
  {
    "sha": "3d670f1611df10d2ccb04ce9ffca20e8b8970615",
    "filename": "frontend/package.json",
    "status": "modified",
    "additions": 1,
    "deletions": 0,
    "changes": 1,
    "blob_url": "https://github.com/Pavel38l/Peredachka/blob/12f38df60e3f3733758db0bdaaf5f143c343f5e1/frontend/package.json",
    "raw_url": "https://github.com/Pavel38l/Peredachka/raw/12f38df60e3f3733758db0bdaaf5f143c343f5e1/frontend/package.json",
    "contents_url": "https://api.github.com/repos/Pavel38l/Peredachka/contents/frontend/package.json?ref=12f38df60e3f3733758db0bdaaf5f143c343f5e1",
    "patch": "@@ -9,6 +9,7 @@\n     \"antd\": \"^4.13.0\",\n     \"axios\": \"^0.21.1\",\n     \"bootstrap\": \"^4.6.0\",\n+    \"jwt-decode\": \"^3.1.2\",\n     \"lodash\": \"^4.17.21\",\n     \"moment\": \"latest\",\n     \"react\": \"^17.0.1\","
  },
  {
    "sha": "a8a0367ecd9cd3f64fdd1e1d830bf9dd9177d4bb",
    "filename": "frontend/src/App.js",
    "status": "modified",
    "additions": 23,
    "deletions": 6,
    "changes": 29,
    "blob_url": "https://github.com/Pavel38l/Peredachka/blob/12f38df60e3f3733758db0bdaaf5f143c343f5e1/frontend/src/App.js",
    "raw_url": "https://github.com/Pavel38l/Peredachka/raw/12f38df60e3f3733758db0bdaaf5f143c343f5e1/frontend/src/App.js",
    "contents_url": "https://api.github.com/repos/Pavel38l/Peredachka/contents/frontend/src/App.js?ref=12f38df60e3f3733758db0bdaaf5f143c343f5e1",
    "patch": "@@ -5,29 +5,46 @@ import UserComponent from \"./components/UserComponent\";\n import React from \"react\";\n import Header from \"./components/Header\";\n import Home from \"./components/Home\";\n+import Login from \"./components/Login\";\n+import jwtdecoder from 'jwt-decode';\n+import Registration from \"./components/Registration\";\n import {\n     BrowserRouter as Router,\n     Switch,\n     Route,\n     Link\n } from \"react-router-dom\";\n \n+class App extends React.Component {\n+    constructor(props) {\n+        super(props);\n+        let title = (localStorage.getItem(\"token\")) ? jwtdecoder(localStorage.getItem(\"token\")).sub : \"user name\";\n+        this.state = {\n+            title: title\n+        }\n+    }\n+    upTitle = (title) =>{\n+        this.setState({title:jwtdecoder(title).sub})\n+    }\n+    render(){\n+        return (\n+      <div className=\"App\">\n \n-function App() {\n-  return (\n-      <div>\n           <Router>\n-              <Header />\n+              <Header title={this.state.title} />\n               <Switch>\n                   <Route exact path=\"/\" component={Home} />\n                   <Route exact path=\"/users\" component={UserComponent} />\n+                  <Route exact path=\"/login\" render={()=><Login upTitle={this.upTitle}/>} />\n+                  <Route exact path=\"/registration\" component={Registration} />\n               </Switch>\n           </Router>\n       </div>\n \n \n \n-  );\n+     );\n+    }\n }\n-\n export default App;\n+"
  },
  {
    "sha": "3f27204b75353b2663dfe62fadc6c00b71342a43",
    "filename": "frontend/src/components/Header.js",
    "status": "modified",
    "additions": 23,
    "deletions": 7,
    "changes": 30,
    "blob_url": "https://github.com/Pavel38l/Peredachka/blob/12f38df60e3f3733758db0bdaaf5f143c343f5e1/frontend/src/components/Header.js",
    "raw_url": "https://github.com/Pavel38l/Peredachka/raw/12f38df60e3f3733758db0bdaaf5f143c343f5e1/frontend/src/components/Header.js",
    "contents_url": "https://api.github.com/repos/Pavel38l/Peredachka/contents/frontend/src/components/Header.js?ref=12f38df60e3f3733758db0bdaaf5f143c343f5e1",
    "patch": "@@ -3,8 +3,16 @@ import Navbar from \"react-bootstrap/Navbar\";\n import Nav from \"react-bootstrap/Nav\";\n import NavDropdown from \"react-bootstrap/NavDropdown\";\n import Button from \"react-bootstrap/Button\";\n+import jwtdecoder from 'jwt-decode';\n+import { Link, Redirect } from 'react-router-dom';\n+\n \n class Header extends React.Component {\n+    constructor(props) {\n+        super(props);\n+        this.state = {\n+        }\n+    }\n     render() {\n         return (\n             <Navbar collapseOnSelect expand=\"lg\" bg=\"light\" variant=\"light\">\n@@ -16,28 +24,36 @@ class Header extends React.Component {\n                         <Nav.Link href=\"/orders\">Search for orders</Nav.Link>\n \n                     </Nav>\n-                    { this.renderUserState(true)}\n+                    { this.renderUserState(false)}\n                 </Navbar.Collapse>\n             </Navbar>\n         )\n     }\n \n-    renderUserState(authorized) {\n-        if (authorized) {\n+\n+    signOut = event => {\n+        this.setState({title: \"username\"});\n+        localStorage.setItem(\"token\", \"\");\n+\n+    }\n+    renderUserState() {\n+        if (localStorage.getItem(\"token\")) {\n+        //   this.state.title = jwtdecoder(localStorage.getItem(\"token\")).sub;\n+         //   this.setState({title: jwtdecoder(localStorage.getItem(\"token\")).sub});\n             return (\n                 <Nav>\n-                    <NavDropdown title=\"UserName\" id=\"collasible-nav-dropdown\" className=\"mr-5\">\n+                    <NavDropdown title={this.props.title} id=\"collasible-nav-dropdown\" className=\"mr-5\">\n                         <NavDropdown.Item href=\"/user/\">Profile</NavDropdown.Item>\n                         <NavDropdown.Divider />\n-                        <NavDropdown.Item href=\"#action/3.4\">Sign out</NavDropdown.Item>\n+                        <NavDropdown.Item href=\"/\" onClick={this.signOut}>Sign out</NavDropdown.Item>\n                     </NavDropdown>\n                 </Nav>\n             )\n         } else {\n             return (\n                 <Nav>\n-                    <Button variant=\"outline-primary\" className=\"mr-2\" href=\"/sigIn\">Sign in</Button>\n-                    <Nav.Link href=\"/register\">Register</Nav.Link>\n+                    <Button variant=\"outline-primary\" className=\"mr-2\" href=\"/login\">Sign in</Button>\n+                    <Nav.Link href=\"/registration\">Register</Nav.Link>\n                 </Nav>\n             )\n         }"
  },
  {
    "sha": "0a7f2eac0bf0aaa1b020ad708f7dd8ff8af298d0",
    "filename": "frontend/src/components/Home.js",
    "status": "modified",
    "additions": 15,
    "deletions": 7,
    "changes": 22,
    "blob_url": "https://github.com/Pavel38l/Peredachka/blob/12f38df60e3f3733758db0bdaaf5f143c343f5e1/frontend/src/components/Home.js",
    "raw_url": "https://github.com/Pavel38l/Peredachka/raw/12f38df60e3f3733758db0bdaaf5f143c343f5e1/frontend/src/components/Home.js",
    "contents_url": "https://api.github.com/repos/Pavel38l/Peredachka/contents/frontend/src/components/Home.js?ref=12f38df60e3f3733758db0bdaaf5f143c343f5e1",
    "patch": "@@ -1,4 +1,3 @@\n-\n import React from \"react\";\n import JourneyService from \"../services/JourneyService\";\n import Container from \"react-bootstrap/Container\";\n@@ -72,8 +71,6 @@ class Home extends React.Component {\n                 })\n             }))\n         }).catch(err => alert('Can\\'t find the specified destinations! Please check the entered data!'))\n-\n-\n     }\n \n     cancelHandler = event => {\n@@ -116,6 +113,15 @@ class Home extends React.Component {\n                         </td>\n                     </tr>\n                 )\n+                }\n+            <td>\n+                <Button variant=\"outline-success\" className=\"float-right\"\n+                href={\"journey/\" + journey.id}>\n+                    Details\n+                    </Button>\n+                    </td>\n+                    </tr>\n+            )\n             }\n         )\n \n@@ -240,12 +246,13 @@ class Home extends React.Component {\n                          </Button>\n                      </Form.Item>\n                  </Form>\n+\n             </Container>\n             <Container className=\"mt-5\">\n                 <div>\n                     <table className = \"table table-striped\">\n                         <thead>\n-                        <tr>\n+                            <tr>\n                             <td> From </td>\n                             <td> To </td>\n                             <td> First point dispatch date </td>\n@@ -254,18 +261,19 @@ class Home extends React.Component {\n                             <td> Small order cost </td>\n                             <td> Avg order cost </td>\n                             <td> Max order cost </td>\n-                        </tr>\n+                            </tr>\n                         </thead>\n                         <tbody>\n-                            {journeyTable}\n+                        {journeyTable}\n                         </tbody>\n                     </table>\n                 </div>\n+\n             </Container>\n             </div>\n             </YMaps>\n         );\n     }\n }\n \n-export default Home;\n+export default Home;\n\\ No newline at end of file"
  },
  {
    "sha": "c2f5b11ec22b98f8ea6292b4f1ccbed1e42c6e79",
    "filename": "frontend/src/components/Login.js",
    "status": "added",
    "additions": 101,
    "deletions": 0,
    "changes": 101,
    "blob_url": "https://github.com/Pavel38l/Peredachka/blob/12f38df60e3f3733758db0bdaaf5f143c343f5e1/frontend/src/components/Login.js",
    "raw_url": "https://github.com/Pavel38l/Peredachka/raw/12f38df60e3f3733758db0bdaaf5f143c343f5e1/frontend/src/components/Login.js",
    "contents_url": "https://api.github.com/repos/Pavel38l/Peredachka/contents/frontend/src/components/Login.js?ref=12f38df60e3f3733758db0bdaaf5f143c343f5e1",
    "patch": "@@ -0,0 +1,101 @@\n+import React, { Component, PropTypes } from \"react\";\n+import axios from 'axios';\n+import { Form, Button, FormGroup, FormControl, ControlLabel, Col, Route, Row } from \"react-bootstrap\";\n+import Home from \"./Home\"\n+import { Link, Redirect } from 'react-router-dom';\n+\n+class Login extends Component {\n+    constructor(props) {\n+        super(props);\n+        this.state = {\n+            email: '',\n+            password: '',\n+            redirect: false\n+        }\n+    }\n+\n+\n+        handleChange = event => {\n+            this.setState({ [event.target.name]: event.target.value });\n+        }\n+\n+    handleSubmit = event => {\n+        event.preventDefault();\n+\n+\n+\n+        const user = {\n+            email: this.state.email,\n+            password: this.state.password\n+        };\n+\n+        axios.post(`http://localhost:8080/api/v1/security/login`, user)\n+            .then(res => {\n+                console.log(res);\n+                console.log(res.data);\n+                localStorage.setItem('token', res.data.token);\n+                console.log(localStorage.getItem(\"token\"));\n+                if(res.data.token) {\n+                    this.props.upTitle(res.data.token);\n+                    this.setState({redirect: true});\n+                }\n+                else\n+                    alert(\"Неверный логин или пароль\");\n+\n+                 //react router\n+            })\n+\n+\n+\n+\n+    }\n+\n+    render() {\n+        const {email, password, redirect} = this.state\n+        if(redirect){\n+            //this.props.upTitle(localStorage.getItem(\"token\"));\n+            return < Redirect to = \"/\" / >;\n+    }\n+        else return (\n+            <div>\n+            <form onSubmit={this.handleSubmit} >\n+        <Form.Group as={Row} md=\"6\"  controlId=\"email\">\n+            <Form.Label   >Email: </Form.Label>\n+        <Col sm=\"0\">\n+        <Form.Control\n+        type=\"email\"\n+        placeholder=\"Enter email\"\n+        required\n+        name=\"email\"\n+        value={email}\n+        onChange={this.handleChange}\n+        />\n+            </Col>\n+        </Form.Group >\n+\n+\n+        <Form.Group as={Row} md=\"6\" controlId=\"password\">\n+            <Form.Label column sm={2}>Password: </Form.Label>\n+        <Form.Control\n+        type=\"password\"\n+        placeholder=\"Enter password\"\n+        required\n+        name=\"password\"\n+        value={password}\n+        onChange={this.handleChange}\n+        />\n+        </Form.Group >\n+\n+        <Form.Row>\n+        <Col sm={{ span: 2}}>\n+         <button type=\"submit\" className=\"mr-2\" >submit</button>\n+            </Col>\n+        </Form.Row>\n+\n+            </form>\n+            </div>\n+    );\n+    }\n+}\n+\n+export default Login;\n\\ No newline at end of file"
  },
  {
    "sha": "e2f476767d95df2df330af46c44f305071c8580f",
    "filename": "frontend/src/components/Registration.js",
    "status": "added",
    "additions": 155,
    "deletions": 0,
    "changes": 155,
    "blob_url": "https://github.com/Pavel38l/Peredachka/blob/12f38df60e3f3733758db0bdaaf5f143c343f5e1/frontend/src/components/Registration.js",
    "raw_url": "https://github.com/Pavel38l/Peredachka/raw/12f38df60e3f3733758db0bdaaf5f143c343f5e1/frontend/src/components/Registration.js",
    "contents_url": "https://api.github.com/repos/Pavel38l/Peredachka/contents/frontend/src/components/Registration.js?ref=12f38df60e3f3733758db0bdaaf5f143c343f5e1",
    "patch": "@@ -0,0 +1,155 @@\n+import React, { Component } from \"react\";\n+import axios from 'axios';\n+import { Form, Button, FormGroup, FormControl, ControlLabel, Col,Row } from \"react-bootstrap\";\n+import Container from \"react-bootstrap/Container\";\n+import { Link, Redirect } from 'react-router-dom';\n+class Registration extends Component {\n+    constructor(props) {\n+        super(props);\n+        this.state = {\n+            email: '',\n+            password: '',\n+            firstName: '',\n+            lastName: '',\n+            dateOfBirth: '',\n+            sex: 'male',\n+\n+\n+        }\n+    }\n+\n+    handleChange = event => {\n+        this.setState({ [event.target.name]: event.target.value });\n+\n+    }\n+\n+    handleSubmit = event => {\n+        event.preventDefault();\n+\n+        const user = {\n+            email: this.state.email,\n+            password: this.state.password,\n+            firstName: this.state.firstName,\n+            lastName: this.state.lastName,\n+            sex: this.state.sex,\n+            dateOfBirth: this.state.dateOfBirth,\n+            redirect: false\n+        };\n+\n+        axios.post(`http://localhost:8080/api/v1/security/register`, user)\n+            .then(res => {\n+                console.log(res);\n+                console.log(res.data);\n+                if(res.data)\n+                    this.setState({redirect: true});\n+                else\n+                    alert(\"Данная почта уже существует\");\n+            })\n+    }\n+    render() {\n+        const {email, password, firstName, lastName, sex, dateOfBirth, from, redirect} = this.state\n+        if(redirect) return <Redirect to=\"/login\"/>;\n+        else return (\n+            <div>\n+\n+            <Form onSubmit={this.handleSubmit}>\n+\n+        <Form.Group as={Row} md=\"6\" controlId=\"email\">\n+            <Form.Label>Email: </Form.Label>\n+        <Form.Control\n+        type=\"email\"\n+        placeholder=\"Enter email\"\n+        required\n+        name=\"email\"\n+        value={email}\n+        onChange={this.handleChange}\n+        />\n+        </Form.Group >\n+\n+\n+        <Form.Group as={Row} md=\"6\" controlId=\"password\">\n+            <Form.Label>Password: </Form.Label>\n+        <Form.Control\n+        type=\"password\"\n+        placeholder=\"Enter password\"\n+        required\n+        name=\"password\"\n+        value={password}\n+        onChange={this.handleChange}\n+        />\n+        </Form.Group >\n+\n+        <Form.Group as={Row} md=\"6\" controlId=\"firstName\">\n+            <Form.Label>First name: </Form.Label>\n+        <Form.Control\n+        type=\"text\"\n+        placeholder=\"Enter first name\"\n+        required\n+        name=\"firstName\"\n+        value={firstName}\n+        onChange={this.handleChange}\n+        />\n+        </Form.Group >\n+\n+\n+        <Form.Group as={Row} md=\"6\" controlId=\"lastName\">\n+            <Form.Label>Last name: </Form.Label>\n+        <Form.Control\n+        type=\"text\"\n+        placeholder=\"Enter last name\"\n+        required\n+        name=\"lastName\"\n+        value={lastName}\n+        onChange={this.handleChange}\n+        />\n+        </Form.Group>\n+\n+        <Form.Group as={Row} md=\"6\">\n+        <Form.Label>Sex</Form.Label>\n+\n+        <Form.Control as=\"select\"\n+        className=\"mr-sm-2\"\n+        name=\"sex\"\n+        id=\"inlineFormCustomSelect\"\n+        value={sex}\n+        onChange={this.handleChange}\n+            >\n+            <option value=\"male\">male</option>\n+            <option value=\"female\">female</option>\n+        </Form.Control>\n+        </Form.Group>\n+\n+\n+        <Form.Group as={Row} md=\"6\">\n+            <Form.Label>Date of birth</Form.Label>\n+\n+        <Form.Control\n+        required\n+        type=\"datetime-local\"\n+        name=\"dateOfBirth\"\n+        value={dateOfBirth}\n+        onChange={this.handleChange}\n+        />\n+        <Form.Control.Feedback>Looks good!</Form.Control.Feedback>\n+        </Form.Group>\n+\n+\n+        <Form.Row>\n+        <Col sm={{ span: 2}}>\n+        <Button  type=\"submit\">\n+            Submit\n+            </Button>\n+            </Col>\n+            </Form.Row>\n+\n+\n+            </Form>\n+\n+            </div>\n+\n+\n+    );\n+    }\n+}\n+\n+export default Registration;\n\\ No newline at end of file"
  }
]
