[
  {
    "sha": "8d8d6e3c3616bb6c068499dfe80c33c78baea203",
    "filename": ".github/workflows/main.yml",
    "status": "modified",
    "additions": 60,
    "deletions": 0,
    "changes": 60,
    "blob_url": "https://github.com/alexey-lapin/realworld-backend-micronaut/blob/a0370b299ba60a3b8e3b308edd2b1a6a902af436/.github/workflows/main.yml",
    "raw_url": "https://github.com/alexey-lapin/realworld-backend-micronaut/raw/a0370b299ba60a3b8e3b308edd2b1a6a902af436/.github/workflows/main.yml",
    "contents_url": "https://api.github.com/repos/alexey-lapin/realworld-backend-micronaut/contents/.github/workflows/main.yml?ref=a0370b299ba60a3b8e3b308edd2b1a6a902af436",
    "patch": "@@ -51,6 +51,13 @@ jobs:\n           --global-var \"EMAIL=username@example.com\"\n           --global-var \"PASSWORD=password\"\n \n+      - name: Upload Artifact\n+        uses: actions/upload-artifact@v2\n+        with:\n+          name: service-jar\n+          path: service/build/libs/service-*-all.jar\n+          retention-days: 7\n+\n       - name: Deploy to Heroku\n         env:\n           HEROKU_API_TOKEN: ${{ secrets.HEROKU_API_TOKEN }}\n@@ -85,3 +92,56 @@ jobs:\n           ./gradlew --scan --no-parallel --stacktrace --warning-mode=all -PenableJacoco build jacocoRootReport\n \n       - uses: codecov/codecov-action@v1\n+\n+  release-notes:\n+    runs-on: ubuntu-latest\n+    needs: build\n+#    if: startsWith(github.ref, 'refs/tags/')\n+    steps:\n+      - uses: actions/checkout@v2\n+\n+      - name: Dump GitHub context\n+        env:\n+          GITHUB_CONTEXT: ${{ toJSON(github) }}\n+        run: echo \"$GITHUB_CONTEXT\"\n+      - name: Dump job context\n+        env:\n+          JOB_CONTEXT: ${{ toJSON(job) }}\n+        run: echo \"$JOB_CONTEXT\"\n+      - name: Dump steps context\n+        env:\n+          STEPS_CONTEXT: ${{ toJSON(steps) }}\n+        run: echo \"$STEPS_CONTEXT\"\n+      - name: Dump runner context\n+        env:\n+          RUNNER_CONTEXT: ${{ toJSON(runner) }}\n+        run: echo \"$RUNNER_CONTEXT\"\n+      - name: Dump strategy context\n+        env:\n+          STRATEGY_CONTEXT: ${{ toJSON(strategy) }}\n+        run: echo \"$STRATEGY_CONTEXT\"\n+      - name: Dump matrix context\n+        env:\n+          MATRIX_CONTEXT: ${{ toJSON(matrix) }}\n+        run: echo \"$MATRIX_CONTEXT\"\n+\n+      - name: Build Changelog\n+        id: github_release\n+        uses: mikepenz/release-changelog-builder-action@v1\n+        env:\n+          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n+\n+      - name: Download service-jar\n+        uses: actions/download-artifact@v2\n+        with:\n+          name: service-jar\n+\n+      - name: Release\n+        uses: softprops/action-gh-release@v1\n+        with:\n+          body_path: ${{ steps.github_release.outputs.changelog }}\n+          draft: true\n+          files: |\n+            service-*-all.jar\n+        env:\n+          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n\\ No newline at end of file"
  }
]
