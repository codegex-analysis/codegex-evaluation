[
  {
    "sha": "0f7ee18264cd6e1e7eb458e8999694fc0a2ed8ad",
    "filename": ".github/ISSUE_TEMPLATE/bug_report.yml",
    "status": "modified",
    "additions": 2,
    "deletions": 2,
    "changes": 4,
    "blob_url": "https://github.com/Chew/Geyser/blob/b8536ed40e3580c206c55d917bf41930e48d8260/.github/ISSUE_TEMPLATE/bug_report.yml",
    "raw_url": "https://github.com/Chew/Geyser/raw/b8536ed40e3580c206c55d917bf41930e48d8260/.github/ISSUE_TEMPLATE/bug_report.yml",
    "contents_url": "https://api.github.com/repos/Chew/Geyser/contents/.github/ISSUE_TEMPLATE/bug_report.yml?ref=b8536ed40e3580c206c55d917bf41930e48d8260",
    "patch": "@@ -50,14 +50,14 @@ body:\n   attributes:\n     label: Geyser Version\n     description: What version of Geyser are you running?\n-    placeholder: \"For example: 1.2.0-SNAPSHOT (git-master-2d9baf1)\"\n+    placeholder: \"For example: 1.2.0-SNAPSHOT (git-master-09105e)\"\n   validations:\n     required: true\n - type: input\n   attributes:\n     label: \"Minecraft: Bedrock Edition Version\"\n     description: \"What version of Minecraft: Bedrock Edition are you using? Leave empty if the bug happens before you can connect with Minecraft: Bedrock Edition.\"\n-    placeholder: \"For example: 1.16.201\"\n+    placeholder: \"For example: 1.16.210\"\n - type: textarea\n   attributes:\n     label: Additional Context"
  },
  {
    "sha": "959d6dc291a873629b66f19ef3ea30a82b226c86",
    "filename": "connector/src/main/java/org/geysermc/connector/network/translators/bedrock/BedrockItemFrameDropItemTranslator.java",
    "status": "modified",
    "additions": 6,
    "deletions": 3,
    "changes": 9,
    "blob_url": "https://github.com/Chew/Geyser/blob/b8536ed40e3580c206c55d917bf41930e48d8260/connector/src/main/java/org/geysermc/connector/network/translators/bedrock/BedrockItemFrameDropItemTranslator.java",
    "raw_url": "https://github.com/Chew/Geyser/raw/b8536ed40e3580c206c55d917bf41930e48d8260/connector/src/main/java/org/geysermc/connector/network/translators/bedrock/BedrockItemFrameDropItemTranslator.java",
    "contents_url": "https://api.github.com/repos/Chew/Geyser/contents/connector/src/main/java/org/geysermc/connector/network/translators/bedrock/BedrockItemFrameDropItemTranslator.java?ref=b8536ed40e3580c206c55d917bf41930e48d8260",
    "patch": "@@ -28,20 +28,23 @@\n import com.github.steveice10.mc.protocol.data.game.entity.player.Hand;\n import com.github.steveice10.mc.protocol.data.game.entity.player.InteractAction;\n import com.github.steveice10.mc.protocol.packet.ingame.client.player.ClientPlayerInteractEntityPacket;\n-import com.nukkitx.math.vector.Vector3i;\n import com.nukkitx.protocol.bedrock.packet.ItemFrameDropItemPacket;\n import org.geysermc.connector.entity.ItemFrameEntity;\n import org.geysermc.connector.network.session.GeyserSession;\n import org.geysermc.connector.network.translators.PacketTranslator;\n import org.geysermc.connector.network.translators.Translator;\n \n+/**\n+ * Pre-1.16.210: used for both survival and creative item frame item removal\n+ *\n+ * 1.16.210: only used in creative.\n+ */\n @Translator(packet = ItemFrameDropItemPacket.class)\n public class BedrockItemFrameDropItemTranslator extends PacketTranslator<ItemFrameDropItemPacket> {\n \n     @Override\n     public void translate(ItemFrameDropItemPacket packet, GeyserSession session) {\n-        Vector3i position = Vector3i.from(packet.getBlockPosition().getX(), packet.getBlockPosition().getY(), packet.getBlockPosition().getZ());\n-        ClientPlayerInteractEntityPacket interactPacket = new ClientPlayerInteractEntityPacket((int) ItemFrameEntity.getItemFrameEntityId(session, position),\n+        ClientPlayerInteractEntityPacket interactPacket = new ClientPlayerInteractEntityPacket((int) ItemFrameEntity.getItemFrameEntityId(session, packet.getBlockPosition()),\n                 InteractAction.ATTACK, Hand.MAIN_HAND, session.isSneaking());\n         session.sendDownstreamPacket(interactPacket);\n     }"
  },
  {
    "sha": "3079b668d6590cc887d7f295d3bf08dc15709e6a",
    "filename": "connector/src/main/java/org/geysermc/connector/network/translators/bedrock/entity/player/BedrockActionTranslator.java",
    "status": "modified",
    "additions": 15,
    "deletions": 3,
    "changes": 18,
    "blob_url": "https://github.com/Chew/Geyser/blob/b8536ed40e3580c206c55d917bf41930e48d8260/connector/src/main/java/org/geysermc/connector/network/translators/bedrock/entity/player/BedrockActionTranslator.java",
    "raw_url": "https://github.com/Chew/Geyser/raw/b8536ed40e3580c206c55d917bf41930e48d8260/connector/src/main/java/org/geysermc/connector/network/translators/bedrock/entity/player/BedrockActionTranslator.java",
    "contents_url": "https://api.github.com/repos/Chew/Geyser/contents/connector/src/main/java/org/geysermc/connector/network/translators/bedrock/entity/player/BedrockActionTranslator.java?ref=b8536ed40e3580c206c55d917bf41930e48d8260",
    "patch": "@@ -27,12 +27,11 @@\n \n import com.github.steveice10.mc.protocol.data.game.entity.metadata.ItemStack;\n import com.github.steveice10.mc.protocol.data.game.entity.metadata.Position;\n-import com.github.steveice10.mc.protocol.data.game.entity.player.GameMode;\n-import com.github.steveice10.mc.protocol.data.game.entity.player.PlayerAction;\n-import com.github.steveice10.mc.protocol.data.game.entity.player.PlayerState;\n+import com.github.steveice10.mc.protocol.data.game.entity.player.*;\n import com.github.steveice10.mc.protocol.data.game.world.block.BlockFace;\n import com.github.steveice10.mc.protocol.packet.ingame.client.player.ClientPlayerAbilitiesPacket;\n import com.github.steveice10.mc.protocol.packet.ingame.client.player.ClientPlayerActionPacket;\n+import com.github.steveice10.mc.protocol.packet.ingame.client.player.ClientPlayerInteractEntityPacket;\n import com.github.steveice10.mc.protocol.packet.ingame.client.player.ClientPlayerStatePacket;\n import com.github.steveice10.opennbt.tag.builtin.CompoundTag;\n import com.nukkitx.math.vector.Vector3i;\n@@ -44,6 +43,7 @@\n import com.nukkitx.protocol.bedrock.packet.PlayStatusPacket;\n import com.nukkitx.protocol.bedrock.packet.PlayerActionPacket;\n import org.geysermc.connector.entity.Entity;\n+import org.geysermc.connector.entity.ItemFrameEntity;\n import org.geysermc.connector.inventory.PlayerInventory;\n import org.geysermc.connector.network.session.GeyserSession;\n import org.geysermc.connector.network.translators.PacketTranslator;\n@@ -185,6 +185,18 @@ public void translate(PlayerActionPacket packet, GeyserSession session) {\n                 session.sendUpstreamPacket(continueBreakPacket);\n                 break;\n             case ABORT_BREAK:\n+                if (session.getGameMode() != GameMode.CREATIVE) {\n+                    // As of 1.16.210: item frame items are taken out here.\n+                    // Survival also sends START_BREAK, but by attaching our process here adventure mode also works\n+                    long entityId = ItemFrameEntity.getItemFrameEntityId(session, packet.getBlockPosition());\n+                    if (entityId != -1) {\n+                        ClientPlayerInteractEntityPacket interactPacket = new ClientPlayerInteractEntityPacket((int) entityId,\n+                                InteractAction.ATTACK, Hand.MAIN_HAND, session.isSneaking());\n+                        session.sendDownstreamPacket(interactPacket);\n+                        break;\n+                    }\n+                }\n+\n                 ClientPlayerActionPacket abortBreakingPacket = new ClientPlayerActionPacket(PlayerAction.CANCEL_DIGGING, position, BlockFace.DOWN);\n                 session.sendDownstreamPacket(abortBreakingPacket);\n                 LevelEventPacket stopBreak = new LevelEventPacket();"
  }
]
