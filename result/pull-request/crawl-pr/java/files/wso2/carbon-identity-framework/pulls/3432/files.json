[
  {
    "sha": "968e142e69d8d494785508bc24ce31085fea50e4",
    "filename": "components/identity-core/org.wso2.carbon.identity.core/src/main/java/org/wso2/carbon/identity/core/util/IdentityUtil.java",
    "status": "modified",
    "additions": 23,
    "deletions": 0,
    "changes": 23,
    "blob_url": "https://github.com/wso2/carbon-identity-framework/blob/32dfc581fc16ac182e756b61b001e888cf106005/components/identity-core/org.wso2.carbon.identity.core/src/main/java/org/wso2/carbon/identity/core/util/IdentityUtil.java",
    "raw_url": "https://github.com/wso2/carbon-identity-framework/raw/32dfc581fc16ac182e756b61b001e888cf106005/components/identity-core/org.wso2.carbon.identity.core/src/main/java/org/wso2/carbon/identity/core/util/IdentityUtil.java",
    "contents_url": "https://api.github.com/repos/wso2/carbon-identity-framework/contents/components/identity-core/org.wso2.carbon.identity.core/src/main/java/org/wso2/carbon/identity/core/util/IdentityUtil.java?ref=32dfc581fc16ac182e756b61b001e888cf106005",
    "patch": "@@ -29,9 +29,11 @@\n import org.w3c.dom.Document;\n import org.w3c.dom.Node;\n import org.wso2.carbon.CarbonConstants;\n+import org.wso2.carbon.CarbonException;\n import org.wso2.carbon.base.MultitenantConstants;\n import org.wso2.carbon.base.ServerConfiguration;\n import org.wso2.carbon.caching.impl.CachingConstants;\n+import org.wso2.carbon.core.util.AdminServicesUtil;\n import org.wso2.carbon.core.util.Utils;\n import org.wso2.carbon.identity.base.IdentityConstants;\n import org.wso2.carbon.identity.base.IdentityException;\n@@ -51,6 +53,7 @@\n import org.wso2.carbon.user.api.UserStoreException;\n import org.wso2.carbon.user.core.UserCoreConstants;\n import org.wso2.carbon.user.core.UserStoreManager;\n+import org.wso2.carbon.user.core.util.UserCoreUtil;\n import org.wso2.carbon.utils.CarbonUtils;\n import org.wso2.carbon.utils.NetworkUtils;\n import org.wso2.carbon.utils.multitenancy.MultitenantUtils;\n@@ -1397,4 +1400,24 @@ public static int getDefaultItemsPerPage() {\n         }\n         return defaultItemsPerPage;\n     }\n+\n+    /**\n+     * Check with authorization manager whether groups vs roles separation config is set to true.\n+     *\n+     * @return Where groups vs separation enabled or not.\n+     */\n+    public static boolean isGroupsVsRolesSeparationImprovementsEnabled() {\n+\n+        try {\n+            if (AdminServicesUtil.getUserRealm() == null) {\n+                log.warn(\"Unable to find the user realm, thus GroupAndRoleSeparationEnabled is set as FALSE.\");\n+                return Boolean.FALSE;\n+            }\n+            return UserCoreUtil.isGroupsVsRolesSeparationImprovementsEnabled(AdminServicesUtil.getUserRealm()\n+                    .getRealmConfiguration());\n+        } catch (org.wso2.carbon.user.core.UserStoreException | CarbonException e) {\n+            log.warn(\"Property value parsing error: GroupAndRoleSeparationEnabled, thus considered as FALSE\");\n+            return Boolean.FALSE;\n+        }\n+    }\n }"
  }
]
