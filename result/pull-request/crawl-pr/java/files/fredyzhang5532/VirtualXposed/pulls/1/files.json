[
  {
    "sha": "3ba82c5e54cf91e3c80ed82335b93d4c2348657e",
    "filename": ".github/FUNDING.yml",
    "status": "added",
    "additions": 12,
    "deletions": 0,
    "changes": 12,
    "blob_url": "https://github.com/fredyzhang5532/VirtualXposed/blob/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/.github/FUNDING.yml",
    "raw_url": "https://github.com/fredyzhang5532/VirtualXposed/raw/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/.github/FUNDING.yml",
    "contents_url": "https://api.github.com/repos/fredyzhang5532/VirtualXposed/contents/.github/FUNDING.yml?ref=f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7",
    "patch": "@@ -0,0 +1,12 @@\n+# These are supported funding model platforms\n+\n+github: # replace\n+patreon: weishu\n+open_collective: # Replace with a single Open Collective username\n+ko_fi: # Replace with a single Ko-fi username\n+tidelift: # Replace with a single Tidelift platform-name/package-name e.g., npm/babel\n+community_bridge: # Replace with a single Community Bridge project-name e.g., cloud-foundry\n+liberapay: # Replace with a single Liberapay username\n+issuehunt: # Replace with a single IssueHunt username\n+otechie: # Replace with a single Otechie username\n+custom: http://paypal.me/virtualxposed"
  },
  {
    "sha": "d1d37b158b435711ff680228d6bf5c2971c9e067",
    "filename": "README.md",
    "status": "modified",
    "additions": 1,
    "deletions": 0,
    "changes": 1,
    "blob_url": "https://github.com/fredyzhang5532/VirtualXposed/blob/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/README.md",
    "raw_url": "https://github.com/fredyzhang5532/VirtualXposed/raw/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/README.md",
    "contents_url": "https://api.github.com/repos/fredyzhang5532/VirtualXposed/contents/README.md?ref=f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7",
    "patch": "@@ -89,3 +89,4 @@ Credits\n \n 1. [VirtualApp](https://github.com/asLody/VirtualApp)\n 2. [Xposed](https://github.com/rovo89/Xposed)\n+3. [And64InlineHook](https://github.com/Rprop/And64InlineHook)"
  },
  {
    "sha": "71639dbf97b3a20b792886ba70b9a1619c994a40",
    "filename": "VirtualApp/app/build.gradle",
    "status": "modified",
    "additions": 4,
    "deletions": 4,
    "changes": 8,
    "blob_url": "https://github.com/fredyzhang5532/VirtualXposed/blob/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/app/build.gradle",
    "raw_url": "https://github.com/fredyzhang5532/VirtualXposed/raw/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/app/build.gradle",
    "contents_url": "https://api.github.com/repos/fredyzhang5532/VirtualXposed/contents/VirtualApp/app/build.gradle?ref=f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7",
    "patch": "@@ -20,16 +20,16 @@ android {\n     compileSdkVersion 28\n     buildToolsVersion '28.0.3'\n     defaultConfig {\n-        applicationId \"io.va.exposed\"\n+        applicationId \"io.va.exposed64\"\n         minSdkVersion 21\n         targetSdkVersion 23\n-        versionCode 182\n-        versionName \"0.18.2\"\n+        versionCode 203\n+        versionName \"0.20.3\"\n         multiDexEnabled false\n         android {\n             defaultConfig {\n                 ndk {\n-                    abiFilters \"armeabi-v7a\", \"x86\"\n+                    abiFilters \"arm64-v8a\", \"x86_64\"\n                 }\n             }\n         }"
  },
  {
    "sha": "e56921e672b8064fd72338e6cc20e7002bb8a593",
    "filename": "VirtualApp/app/src/main/AndroidManifest.xml",
    "status": "modified",
    "additions": 3,
    "deletions": 3,
    "changes": 6,
    "blob_url": "https://github.com/fredyzhang5532/VirtualXposed/blob/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/app/src/main/AndroidManifest.xml",
    "raw_url": "https://github.com/fredyzhang5532/VirtualXposed/raw/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/app/src/main/AndroidManifest.xml",
    "contents_url": "https://api.github.com/repos/fredyzhang5532/VirtualXposed/contents/VirtualApp/app/src/main/AndroidManifest.xml?ref=f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7",
    "patch": "@@ -87,7 +87,7 @@\n             android:excludeFromRecents=\"true\"\n             android:label=\"@string/shared_to_vxp\"\n             android:screenOrientation=\"portrait\"\n-            android:taskAffinity=\"io.va.exposed.share\"\n+            android:taskAffinity=\"${applicationId}.share\"\n             android:theme=\"@style/Theme.AppCompat.Light.Dialog\">\n             <intent-filter>\n                 <action android:name=\"android.intent.action.SEND\" />\n@@ -105,7 +105,7 @@\n             android:icon=\"@mipmap/ic_launcher\"\n             android:label=\"@string/app_installer_label\"\n             android:noHistory=\"true\"\n-            android:taskAffinity=\"io.va.exposed.installer\"\n+            android:taskAffinity=\"${applicationId}.installer\"\n             android:theme=\"@style/Theme.AppCompat.Light\" />\n \n         <activity-alias\n@@ -157,7 +157,7 @@\n             android:enabled=\"true\"\n             android:exported=\"true\">\n             <intent-filter>\n-                <action android:name=\"io.va.exposed.CMD\" />\n+                <action android:name=\"${applicationId}.CMD\" />\n             </intent-filter>\n         </receiver>\n     </application>"
  },
  {
    "sha": "c296108f6afb59ac6f8b16652e67e6321885c935",
    "filename": "VirtualApp/app/src/main/java/io/virtualapp/dev/CmdReceiver.java",
    "status": "modified",
    "additions": 2,
    "deletions": 1,
    "changes": 3,
    "blob_url": "https://github.com/fredyzhang5532/VirtualXposed/blob/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/app/src/main/java/io/virtualapp/dev/CmdReceiver.java",
    "raw_url": "https://github.com/fredyzhang5532/VirtualXposed/raw/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/app/src/main/java/io/virtualapp/dev/CmdReceiver.java",
    "contents_url": "https://api.github.com/repos/fredyzhang5532/VirtualXposed/contents/VirtualApp/app/src/main/java/io/virtualapp/dev/CmdReceiver.java?ref=f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7",
    "patch": "@@ -12,6 +12,7 @@\n import com.lody.virtual.client.core.VirtualCore;\n import com.lody.virtual.remote.InstallResult;\n \n+import io.virtualapp.BuildConfig;\n import io.virtualapp.home.LoadingActivity;\n \n /**\n@@ -20,7 +21,7 @@\n \n public class CmdReceiver extends BroadcastReceiver {\n \n-    private static final String ACTION = \"io.va.exposed.CMD\";\n+    private static final String ACTION = BuildConfig.APPLICATION_ID + \".CMD\";\n     private static final String KEY_CMD = \"cmd\";\n     private static final String KEY_PKG = \"pkg\";\n     private static final String KEY_UID = \"uid\";"
  },
  {
    "sha": "1aad7b6ac01a45ee0f9d9d89aaf63707c218e42c",
    "filename": "VirtualApp/app/src/main/java/io/virtualapp/home/ListAppActivity.java",
    "status": "modified",
    "additions": 3,
    "deletions": 32,
    "changes": 35,
    "blob_url": "https://github.com/fredyzhang5532/VirtualXposed/blob/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/app/src/main/java/io/virtualapp/home/ListAppActivity.java",
    "raw_url": "https://github.com/fredyzhang5532/VirtualXposed/raw/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/app/src/main/java/io/virtualapp/home/ListAppActivity.java",
    "contents_url": "https://api.github.com/repos/fredyzhang5532/VirtualXposed/contents/VirtualApp/app/src/main/java/io/virtualapp/home/ListAppActivity.java?ref=f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7",
    "patch": "@@ -1,16 +1,11 @@\n package io.virtualapp.home;\n \n-import android.Manifest;\n import android.app.Activity;\n import android.content.Intent;\n-import android.content.pm.PackageManager;\n import android.os.Bundle;\n-import android.support.annotation.NonNull;\n import android.support.annotation.Nullable;\n import android.support.design.widget.TabLayout;\n-import android.support.v4.app.ActivityCompat;\n import android.support.v4.view.ViewPager;\n-import android.support.v7.app.AlertDialog;\n import android.support.v7.widget.Toolbar;\n import android.view.MenuItem;\n \n@@ -37,26 +32,12 @@ public static void gotoListApp(Activity activity) {\n     protected void onCreate(@Nullable Bundle savedInstanceState) {\n         super.onCreate(savedInstanceState);\n         setContentView(R.layout.activity_clone_app);\n-        mToolBar = (Toolbar) findViewById(R.id.clone_app_tool_bar);\n-        mTabLayout = (TabLayout) mToolBar.findViewById(R.id.clone_app_tab_layout);\n-        mViewPager = (ViewPager) findViewById(R.id.clone_app_view_pager);\n+        mToolBar = findViewById(R.id.clone_app_tool_bar);\n+        mTabLayout = mToolBar.findViewById(R.id.clone_app_tab_layout);\n+        mViewPager = findViewById(R.id.clone_app_view_pager);\n         mViewPager.setAdapter(new AppPagerAdapter(getSupportFragmentManager()));\n         mTabLayout.setupWithViewPager(mViewPager);\n \n-        // Request permission to access external storage\n-        if (ActivityCompat.checkSelfPermission(this, Manifest.permission.READ_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED) {\n-            AlertDialog alertDialog = new AlertDialog.Builder(this, R.style.Theme_AppCompat_DayNight_Dialog_Alert)\n-                    .setMessage(R.string.list_app_access_external_storage)\n-                    .setPositiveButton(android.R.string.ok, (dialog, which) -> {\n-                        ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.READ_EXTERNAL_STORAGE}, 0);\n-                    })\n-                    .create();\n-            try {\n-                alertDialog.show();\n-            } catch (Throwable ignored) {\n-                // BadTokenException.\n-            }\n-        }\n     }\n \n     @Override\n@@ -67,14 +48,4 @@ public boolean onOptionsItemSelected(MenuItem item) {\n         }\n         return super.onOptionsItemSelected(item);\n     }\n-\n-    @Override\n-    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\n-        for (int result : grantResults) {\n-            if (result == PackageManager.PERMISSION_GRANTED) {\n-                mViewPager.setAdapter(new AppPagerAdapter(getSupportFragmentManager()));\n-                break;\n-            }\n-        }\n-    }\n }"
  },
  {
    "sha": "161ef61565578f1ca8ad35925be80e69ec06e6d1",
    "filename": "VirtualApp/app/src/main/java/io/virtualapp/home/ListAppFragment.java",
    "status": "modified",
    "additions": 6,
    "deletions": 20,
    "changes": 26,
    "blob_url": "https://github.com/fredyzhang5532/VirtualXposed/blob/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/app/src/main/java/io/virtualapp/home/ListAppFragment.java",
    "raw_url": "https://github.com/fredyzhang5532/VirtualXposed/raw/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/app/src/main/java/io/virtualapp/home/ListAppFragment.java",
    "contents_url": "https://api.github.com/repos/fredyzhang5532/VirtualXposed/contents/VirtualApp/app/src/main/java/io/virtualapp/home/ListAppFragment.java?ref=f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7",
    "patch": "@@ -21,6 +21,8 @@\n import android.widget.ProgressBar;\n import android.widget.Toast;\n \n+import com.lody.virtual.helper.compat.NativeLibraryHelperCompat;\n+\n import java.io.File;\n import java.util.ArrayList;\n import java.util.List;\n@@ -81,26 +83,6 @@ public void onSaveInstanceState(Bundle outState) {\n         mAdapter.saveInstanceState(outState);\n     }\n \n-    private void whatIsTaiChi() {\n-        AlertDialog alertDialog = new AlertDialog.Builder(getContext())\n-                .setTitle(R.string.what_is_exp)\n-                .setMessage(R.string.exp_tips)\n-                .setPositiveButton(R.string.exp_introduce_title, (dialog, which) -> {\n-                    Intent t = new Intent(Intent.ACTION_VIEW);\n-                    t.setData(Uri.parse(\"https://www.coolapk.com/apk/me.weishu.exp\"));\n-                    startActivity(t);\n-                }).setNegativeButton(R.string.about_donate_title, (dialog, which) -> {\n-                    Intent t = new Intent(Intent.ACTION_VIEW);\n-                    t.setData(Uri.parse(\"https://vxposed.com/donate.html\"));\n-                    startActivity(t);\n-                })\n-                .create();\n-        try {\n-            alertDialog.show();\n-        } catch (Throwable ignored) {\n-        }\n-    }\n-\n     private void chooseInstallWay(Runnable runnable, String path) {\n         AlertDialog alertDialog = new AlertDialog.Builder(getContext())\n                 .setTitle(R.string.install_choose_way)\n@@ -169,6 +151,10 @@ public void onViewCreated(View view, Bundle savedInstanceState) {\n         mAdapter.setOnItemClickListener(new CloneAppListAdapter.ItemEventListener() {\n             @Override\n             public void onItemClick(AppInfo info, int position) {\n+                if (!NativeLibraryHelperCompat.isApk64(info.path)) {\n+                    Toast.makeText(getContext(), R.string.unsupported_for_32bit_app, Toast.LENGTH_SHORT).show();\n+                    return;\n+                }\n                 int count = mAdapter.getSelectedCount();\n                 if (!mAdapter.isIndexSelected(position)) {\n                     if (count >= 9) {"
  },
  {
    "sha": "2d67c30a588d4845652ef551037dad690a051f12",
    "filename": "VirtualApp/app/src/main/java/io/virtualapp/home/ListAppPresenterImpl.java",
    "status": "modified",
    "additions": 2,
    "deletions": 6,
    "changes": 8,
    "blob_url": "https://github.com/fredyzhang5532/VirtualXposed/blob/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/app/src/main/java/io/virtualapp/home/ListAppPresenterImpl.java",
    "raw_url": "https://github.com/fredyzhang5532/VirtualXposed/raw/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/app/src/main/java/io/virtualapp/home/ListAppPresenterImpl.java",
    "contents_url": "https://api.github.com/repos/fredyzhang5532/VirtualXposed/contents/VirtualApp/app/src/main/java/io/virtualapp/home/ListAppPresenterImpl.java?ref=f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7",
    "patch": "@@ -1,13 +1,10 @@\n package io.virtualapp.home;\n \n import android.app.Activity;\n-import android.content.Intent;\n \n import java.io.File;\n \n-import io.virtualapp.VCommends;\n import io.virtualapp.home.repo.AppDataSource;\n-import io.virtualapp.home.models.PackageAppData;\n import io.virtualapp.home.repo.AppRepository;\n \n /**\n@@ -33,9 +30,8 @@\n \tpublic void start() {\n \t\tmView.setPresenter(this);\n \t\tmView.startLoading();\n-\t\tif (from == null)\n+\t\tif (from == null) {\n \t\t\tmRepository.getInstalledApps(mActivity).done(mView::loadFinish);\n-\t\telse\n-\t\t\tmRepository.getStorageApps(mActivity, from).done(mView::loadFinish);\n+\t\t}\n \t}\n }"
  },
  {
    "sha": "08bba4f37425611498ca36a52982fadeb588b7cc",
    "filename": "VirtualApp/app/src/main/java/io/virtualapp/home/NewHomeActivity.java",
    "status": "modified",
    "additions": 6,
    "deletions": 3,
    "changes": 9,
    "blob_url": "https://github.com/fredyzhang5532/VirtualXposed/blob/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/app/src/main/java/io/virtualapp/home/NewHomeActivity.java",
    "raw_url": "https://github.com/fredyzhang5532/VirtualXposed/raw/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/app/src/main/java/io/virtualapp/home/NewHomeActivity.java",
    "contents_url": "https://api.github.com/repos/fredyzhang5532/VirtualXposed/contents/VirtualApp/app/src/main/java/io/virtualapp/home/NewHomeActivity.java?ref=f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7",
    "patch": "@@ -40,6 +40,7 @@\n import java.io.InputStream;\n import java.io.OutputStream;\n import java.lang.reflect.Method;\n+import java.util.concurrent.atomic.AtomicBoolean;\n \n import io.virtualapp.R;\n import io.virtualapp.abs.ui.VUiKit;\n@@ -62,7 +63,7 @@\n \n     private Handler mUiHandler;\n     private boolean mDirectlyBack = false;\n-    private boolean checkXposedInstaller = true;\n+    private final AtomicBoolean checkXposedInstaller = new AtomicBoolean(true);\n \n     public static void goHome(Context context) {\n         Intent intent = new Intent(context, NewHomeActivity.class);\n@@ -83,6 +84,9 @@ public void onCreate(Bundle savedInstanceState) {\n     }\n \n     private void installXposed() {\n+        if (!VirtualCore.get().isXposedEnabled()) {\n+            return;\n+        }\n         boolean isXposedInstalled = false;\n         try {\n             isXposedInstalled = VirtualCore.get().isAppInstalled(XPOSED_INSTALLER_PACKAGE);\n@@ -156,8 +160,7 @@ private static void dismissDialog(ProgressDialog dialog) {\n     @Override\n     protected void onResume() {\n         super.onResume();\n-        if (checkXposedInstaller) {\n-            checkXposedInstaller = false;\n+        if (checkXposedInstaller.compareAndSet(true, false)) {\n             installXposed();\n         }\n         // check for update"
  },
  {
    "sha": "55e0ff45e16f998731ff01d73eb2bdda8906eb10",
    "filename": "VirtualApp/app/src/main/java/io/virtualapp/home/adapters/AppPagerAdapter.java",
    "status": "modified",
    "additions": 1,
    "deletions": 32,
    "changes": 33,
    "blob_url": "https://github.com/fredyzhang5532/VirtualXposed/blob/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/app/src/main/java/io/virtualapp/home/adapters/AppPagerAdapter.java",
    "raw_url": "https://github.com/fredyzhang5532/VirtualXposed/raw/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/app/src/main/java/io/virtualapp/home/adapters/AppPagerAdapter.java",
    "contents_url": "https://api.github.com/repos/fredyzhang5532/VirtualXposed/contents/VirtualApp/app/src/main/java/io/virtualapp/home/adapters/AppPagerAdapter.java?ref=f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7",
    "patch": "@@ -1,23 +1,15 @@\n package io.virtualapp.home.adapters;\n \n-import android.content.Context;\n-import android.os.Build;\n-import android.os.Environment;\n-import android.os.storage.StorageManager;\n-import android.os.storage.StorageVolume;\n import android.support.v4.app.Fragment;\n import android.support.v4.app.FragmentManager;\n import android.support.v4.app.FragmentPagerAdapter;\n \n-import com.lody.virtual.helper.utils.DeviceUtil;\n-import com.lody.virtual.helper.utils.Reflect;\n-\n import java.io.File;\n import java.util.ArrayList;\n import java.util.List;\n \n-import io.virtualapp.XApp;\n import io.virtualapp.R;\n+import io.virtualapp.XApp;\n import io.virtualapp.home.ListAppFragment;\n \n /**\n@@ -31,29 +23,6 @@ public AppPagerAdapter(FragmentManager fm) {\n         super(fm);\n         titles.add(XApp.getApp().getResources().getString(R.string.clone_apps));\n         dirs.add(null);\n-        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.N) {\n-            Context ctx = XApp.getApp();\n-            StorageManager storage = (StorageManager) ctx.getSystemService(Context.STORAGE_SERVICE);\n-            for (StorageVolume volume : storage.getStorageVolumes()) {\n-                //Why the fuck are getPathFile and getUserLabel hidden?!\n-                //StorageVolume is kinda useless without those...\n-                File dir = Reflect.on(volume).call(\"getPathFile\").get();\n-                String label = Reflect.on(volume).call(\"getUserLabel\").get();\n-                if (dir.listFiles() != null) {\n-                    titles.add(label);\n-                    dirs.add(dir);\n-                }\n-            }\n-        } else {\n-            // Fallback: only support the default storage sources\n-            if (!DeviceUtil.isMeizuBelowN()) {\n-                File storageFir = Environment.getExternalStorageDirectory();\n-                if (storageFir != null && storageFir.isDirectory()) {\n-                    titles.add(XApp.getApp().getResources().getString(R.string.external_storage));\n-                    dirs.add(storageFir);\n-                }\n-            }\n-        }\n     }\n \n     @Override"
  },
  {
    "sha": "5ff876be3f642c0e63a6511a26bb831b28197f64",
    "filename": "VirtualApp/app/src/main/java/io/virtualapp/home/adapters/CloneAppListAdapter.java",
    "status": "modified",
    "additions": 1,
    "deletions": 9,
    "changes": 10,
    "blob_url": "https://github.com/fredyzhang5532/VirtualXposed/blob/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/app/src/main/java/io/virtualapp/home/adapters/CloneAppListAdapter.java",
    "raw_url": "https://github.com/fredyzhang5532/VirtualXposed/raw/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/app/src/main/java/io/virtualapp/home/adapters/CloneAppListAdapter.java",
    "contents_url": "https://api.github.com/repos/fredyzhang5532/VirtualXposed/contents/VirtualApp/app/src/main/java/io/virtualapp/home/adapters/CloneAppListAdapter.java?ref=f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7",
    "patch": "@@ -83,7 +83,7 @@ public void onBindViewHolder(ViewHolder holder, int position) {\n             GlideUtils.loadPackageIconFromApkFile(mContext, info.path, holder.iconView, android.R.drawable.sym_def_app_icon);\n         }\n \n-        holder.nameView.setText(String.format(\"%s: %s\", info.name, info.version));\n+        holder.nameView.setText(String.format(\"%s: %s%s\", info.name, info.version, info.splitApk ? \" [S]\" : \"\"));\n         if (isIndexSelected(position)) {\n             holder.iconView.setAlpha(1f);\n             holder.appCheckView.setImageResource(R.drawable.ic_check);\n@@ -98,12 +98,6 @@ public void onBindViewHolder(ViewHolder holder, int position) {\n             holder.labelView.setVisibility(View.INVISIBLE);\n         }\n \n-        if (info.path == null) {\n-            holder.summaryView.setVisibility(View.GONE);\n-        } else {\n-            holder.summaryView.setVisibility(View.VISIBLE);\n-            holder.summaryView.setText(info.path);\n-        }\n         holder.itemView.setOnClickListener(v -> {\n             mItemEventListener.onItemClick(info, position);\n         });\n@@ -148,7 +142,6 @@ public AppInfo getItem(int index) {\n         private TextView nameView;\n         private ImageView appCheckView;\n         private LabelView labelView;\n-        private TextView summaryView;\n \n         ViewHolder(View itemView) {\n             super(itemView);\n@@ -157,7 +150,6 @@ public AppInfo getItem(int index) {\n                 nameView = (TextView) itemView.findViewById(R.id.item_app_name);\n                 appCheckView = (ImageView) itemView.findViewById(R.id.item_app_checked);\n                 labelView = (LabelView) itemView.findViewById(R.id.item_app_clone_count);\n-                summaryView = (TextView) itemView.findViewById(R.id.item_app_summary);\n             }\n         }\n     }"
  },
  {
    "sha": "0ae8230aa67e115ec7f43808d933e5b60df198ce",
    "filename": "VirtualApp/app/src/main/java/io/virtualapp/home/models/AppInfo.java",
    "status": "modified",
    "additions": 1,
    "deletions": 0,
    "changes": 1,
    "blob_url": "https://github.com/fredyzhang5532/VirtualXposed/blob/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/app/src/main/java/io/virtualapp/home/models/AppInfo.java",
    "raw_url": "https://github.com/fredyzhang5532/VirtualXposed/raw/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/app/src/main/java/io/virtualapp/home/models/AppInfo.java",
    "contents_url": "https://api.github.com/repos/fredyzhang5532/VirtualXposed/contents/VirtualApp/app/src/main/java/io/virtualapp/home/models/AppInfo.java?ref=f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7",
    "patch": "@@ -15,4 +15,5 @@\n     public CharSequence version;\n     public int cloneCount;\n     public boolean disableMultiVersion;\n+    public boolean splitApk;\n }"
  },
  {
    "sha": "670b8c4beef0d73273a67c74d1cb5ee5923c6649",
    "filename": "VirtualApp/app/src/main/java/io/virtualapp/home/repo/AppRepository.java",
    "status": "modified",
    "additions": 7,
    "deletions": 1,
    "changes": 8,
    "blob_url": "https://github.com/fredyzhang5532/VirtualXposed/blob/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/app/src/main/java/io/virtualapp/home/repo/AppRepository.java",
    "raw_url": "https://github.com/fredyzhang5532/VirtualXposed/raw/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/app/src/main/java/io/virtualapp/home/repo/AppRepository.java",
    "contents_url": "https://api.github.com/repos/fredyzhang5532/VirtualXposed/contents/VirtualApp/app/src/main/java/io/virtualapp/home/repo/AppRepository.java?ref=f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7",
    "patch": "@@ -181,17 +181,23 @@ private static boolean isSystemApplication(PackageInfo packageInfo) {\n             }\n             ApplicationInfo ai = pkg.applicationInfo;\n             String path = ai.publicSourceDir != null ? ai.publicSourceDir : ai.sourceDir;\n+            boolean splitApk = false;\n+            if (ai.splitPublicSourceDirs != null || ai.splitSourceDirs != null) {\n+                splitApk = true;\n+                path = new File(path).getParent();\n+            }\n+\n             if (path == null) {\n                 continue;\n             }\n             AppInfo info = new AppInfo();\n             info.packageName = pkg.packageName;\n             info.fastOpen = fastOpen;\n             info.path = path;\n-//            info.icon = ai.loadIcon(pm);\n             info.icon = null;  // Use Glide to load the icon async\n             info.name = ai.loadLabel(pm);\n             info.version = pkg.versionName;\n+            info.splitApk = splitApk;\n             InstalledAppInfo installedAppInfo = VirtualCore.get().getInstalledAppInfo(pkg.packageName, 0);\n             if (installedAppInfo != null) {\n                 info.cloneCount = installedAppInfo.getInstalledUsers().length;"
  },
  {
    "sha": "fb87bbccab4a9bc4b276000f57404053b2221f0c",
    "filename": "VirtualApp/app/src/main/res/layout/item_clone_app.xml",
    "status": "modified",
    "additions": 17,
    "deletions": 28,
    "changes": 45,
    "blob_url": "https://github.com/fredyzhang5532/VirtualXposed/blob/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/app/src/main/res/layout/item_clone_app.xml",
    "raw_url": "https://github.com/fredyzhang5532/VirtualXposed/raw/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/app/src/main/res/layout/item_clone_app.xml",
    "contents_url": "https://api.github.com/repos/fredyzhang5532/VirtualXposed/contents/VirtualApp/app/src/main/res/layout/item_clone_app.xml?ref=f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7",
    "patch": "@@ -10,29 +10,15 @@\n         android:layout_gravity=\"top|end\"\n         android:src=\"@drawable/ic_no_check\" />\n \n-    <io.virtualapp.widgets.LabelView xmlns:lv=\"http://schemas.android.com/apk/res-auto\"\n-        android:id=\"@+id/item_app_clone_count\"\n-        android:layout_width=\"wrap_content\"\n-        android:layout_height=\"wrap_content\"\n-        android:layout_gravity=\"bottom|start\"\n-        android:visibility=\"invisible\"\n-        lv:lv_background_color=\"#F6CE59\"\n-        lv:lv_fill_triangle=\"true\"\n-        lv:lv_gravity=\"BOTTOM_LEFT\"\n-        lv:lv_text=\"2\"\n-        lv:lv_text_all_caps=\"false\"\n-        lv:lv_text_color=\"@android:color/white\"\n-        lv:lv_text_size=\"12sp\" />\n-\n     <LinearLayout\n         android:layout_width=\"match_parent\"\n         android:layout_height=\"match_parent\"\n         android:layout_gravity=\"start|center\"\n         android:gravity=\"start|center\"\n         android:orientation=\"horizontal\"\n-        android:paddingBottom=\"12dp\"\n         android:paddingLeft=\"24dp\"\n-        android:paddingTop=\"12dp\">\n+        android:paddingTop=\"12dp\"\n+        android:paddingBottom=\"12dp\">\n \n         <ImageView\n             android:id=\"@+id/item_app_icon\"\n@@ -46,7 +32,7 @@\n             android:orientation=\"vertical\"\n             android:paddingLeft=\"10dp\">\n \n-            <io.virtualapp.widgets.MarqueeTextView\n+            <TextView\n                 android:id=\"@+id/item_app_name\"\n                 android:layout_width=\"wrap_content\"\n                 android:layout_height=\"wrap_content\"\n@@ -58,18 +44,21 @@\n                 android:textColor=\"@color/desktopColorB\"\n                 android:textSize=\"14sp\" />\n \n-            <io.virtualapp.widgets.MarqueeTextView\n-                android:id=\"@+id/item_app_summary\"\n-                android:layout_width=\"wrap_content\"\n-                android:layout_height=\"wrap_content\"\n-                android:ellipsize=\"marquee\"\n-                android:focusableInTouchMode=\"true\"\n-                android:gravity=\"center\"\n-                android:marqueeRepeatLimit=\"1\"\n-                android:singleLine=\"true\"\n-                android:textSize=\"12sp\"\n-                android:visibility=\"gone\" />\n         </LinearLayout>\n     </LinearLayout>\n \n+    <io.virtualapp.widgets.LabelView xmlns:lv=\"http://schemas.android.com/apk/res-auto\"\n+        android:id=\"@+id/item_app_clone_count\"\n+        android:layout_width=\"wrap_content\"\n+        android:layout_height=\"wrap_content\"\n+        android:layout_gravity=\"bottom|start\"\n+        android:visibility=\"invisible\"\n+        lv:lv_background_color=\"#F6CE59\"\n+        lv:lv_fill_triangle=\"true\"\n+        lv:lv_gravity=\"BOTTOM_LEFT\"\n+        lv:lv_text=\"2\"\n+        lv:lv_text_all_caps=\"false\"\n+        lv:lv_text_color=\"@android:color/white\"\n+        lv:lv_text_size=\"12sp\" />\n+\n </FrameLayout>\n\\ No newline at end of file"
  },
  {
    "sha": "6ff912cc2d2a487fe8fd62e511787162b5366fed",
    "filename": "VirtualApp/app/src/main/res/values-es/strings.xml",
    "status": "modified",
    "additions": 1,
    "deletions": 0,
    "changes": 1,
    "blob_url": "https://github.com/fredyzhang5532/VirtualXposed/blob/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/app/src/main/res/values-es/strings.xml",
    "raw_url": "https://github.com/fredyzhang5532/VirtualXposed/raw/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/app/src/main/res/values-es/strings.xml",
    "contents_url": "https://api.github.com/repos/fredyzhang5532/VirtualXposed/contents/VirtualApp/app/src/main/res/values-es/strings.xml?ref=f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7",
    "patch": "@@ -167,4 +167,5 @@\n     <string name=\"advance_settings_enable_launcher_summary\">Enable Launcher</string>\n     <string name=\"advance_settings_enable_launcher\">Enable Launcher</string>\n     <string name=\"install_complete_and_open\">Abierto</string>\n+    <string name=\"unsupported_for_32bit_app\">¡Las aplicaciones de 32 bits no son compatibles!</string>\n </resources>"
  },
  {
    "sha": "32280c809be5d08090f2c73dd1bfd099db70ca2c",
    "filename": "VirtualApp/app/src/main/res/values-fr/strings.xml",
    "status": "modified",
    "additions": 1,
    "deletions": 0,
    "changes": 1,
    "blob_url": "https://github.com/fredyzhang5532/VirtualXposed/blob/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/app/src/main/res/values-fr/strings.xml",
    "raw_url": "https://github.com/fredyzhang5532/VirtualXposed/raw/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/app/src/main/res/values-fr/strings.xml",
    "contents_url": "https://api.github.com/repos/fredyzhang5532/VirtualXposed/contents/VirtualApp/app/src/main/res/values-fr/strings.xml?ref=f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7",
    "patch": "@@ -173,4 +173,5 @@\n     <string name=\"install_taichi_while_old_version\">La version de TaiChi installée est trop ancienne, veuillez installer la dernière version de Taichi.</string>\n     <string name=\"install_go_latest_exp\">Installer le dernier TaiChi</string>\n     <string name=\"install_complete_and_open\">Ouvrir</string>\n+    <string name=\"unsupported_for_32bit_app\">Les applications 32 bits ne sont pas prises en charge!</string>\n </resources>"
  },
  {
    "sha": "b9778a377f7310e88612762bbac9307f1c774fb3",
    "filename": "VirtualApp/app/src/main/res/values-ja/strings.xml",
    "status": "modified",
    "additions": 1,
    "deletions": 0,
    "changes": 1,
    "blob_url": "https://github.com/fredyzhang5532/VirtualXposed/blob/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/app/src/main/res/values-ja/strings.xml",
    "raw_url": "https://github.com/fredyzhang5532/VirtualXposed/raw/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/app/src/main/res/values-ja/strings.xml",
    "contents_url": "https://api.github.com/repos/fredyzhang5532/VirtualXposed/contents/VirtualApp/app/src/main/res/values-ja/strings.xml?ref=f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7",
    "patch": "@@ -185,4 +185,5 @@\n     <string name=\"install_taichi_while_old_version\">インストールされているTaiChiのバージョンが古すぎます。最新のTaichiをインストールしてください。</string>\n     <string name=\"install_go_latest_exp\">最新のTaiChiをインストール</string>\n     <string name=\"install_complete_and_open\">開く</string>\n+    <string name=\"unsupported_for_32bit_app\">32ビットアプリケーションはサポートされていません。</string>\n </resources>"
  },
  {
    "sha": "d99ea89c8c24ac2761985a9c4f9a91e429cef492",
    "filename": "VirtualApp/app/src/main/res/values-ru/strings.xml",
    "status": "modified",
    "additions": 1,
    "deletions": 0,
    "changes": 1,
    "blob_url": "https://github.com/fredyzhang5532/VirtualXposed/blob/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/app/src/main/res/values-ru/strings.xml",
    "raw_url": "https://github.com/fredyzhang5532/VirtualXposed/raw/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/app/src/main/res/values-ru/strings.xml",
    "contents_url": "https://api.github.com/repos/fredyzhang5532/VirtualXposed/contents/VirtualApp/app/src/main/res/values-ru/strings.xml?ref=f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7",
    "patch": "@@ -149,4 +149,5 @@\n \t<string name=\"advance_settings_disable_xposed_summary\">Когда отключен, все Xposed модули не будут работать.</string>\n         <string name=\"advance_settings_disable_xposed\">Отключить Xposed</string>\n     <string name=\"install_complete_and_open\">открытый</string>\n+    <string name=\"unsupported_for_32bit_app\">32-битные приложения не поддерживаются!</string>\n </resources>"
  },
  {
    "sha": "73a9226627fd55e2263c3fbaf3a6a2bc3a0386ea",
    "filename": "VirtualApp/app/src/main/res/values-zh-rCN/strings.xml",
    "status": "modified",
    "additions": 1,
    "deletions": 0,
    "changes": 1,
    "blob_url": "https://github.com/fredyzhang5532/VirtualXposed/blob/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/app/src/main/res/values-zh-rCN/strings.xml",
    "raw_url": "https://github.com/fredyzhang5532/VirtualXposed/raw/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/app/src/main/res/values-zh-rCN/strings.xml",
    "contents_url": "https://api.github.com/repos/fredyzhang5532/VirtualXposed/contents/VirtualApp/app/src/main/res/values-zh-rCN/strings.xml?ref=f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7",
    "patch": "@@ -173,4 +173,5 @@\n     <string name=\"install_taichi_while_old_version\">你安装的 太极 版本过低，请使用新版本的太极！</string>\n     <string name=\"install_go_latest_exp\">去安装新版太极</string>\n     <string name=\"install_complete_and_open\">打开</string>\n+    <string name=\"unsupported_for_32bit_app\">不支持 32 位的应用！</string>\n </resources>"
  },
  {
    "sha": "883918fcc175cada407bc8fe2934a94d1c96d97e",
    "filename": "VirtualApp/app/src/main/res/values-zh-rTW/strings.xml",
    "status": "modified",
    "additions": 1,
    "deletions": 0,
    "changes": 1,
    "blob_url": "https://github.com/fredyzhang5532/VirtualXposed/blob/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/app/src/main/res/values-zh-rTW/strings.xml",
    "raw_url": "https://github.com/fredyzhang5532/VirtualXposed/raw/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/app/src/main/res/values-zh-rTW/strings.xml",
    "contents_url": "https://api.github.com/repos/fredyzhang5532/VirtualXposed/contents/VirtualApp/app/src/main/res/values-zh-rTW/strings.xml?ref=f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7",
    "patch": "@@ -162,4 +162,5 @@\n     <string name=\"advance_settings_enable_launcher_summary\">Enable Launcher</string>\n     <string name=\"advance_settings_enable_launcher\">Enable Launcher</string>\n     <string name=\"install_complete_and_open\">打開</string>\n+    <string name=\"unsupported_for_32bit_app\">不支持 32 位的應用！</string>\n </resources>"
  },
  {
    "sha": "dee76a5013f7a02de41aef21458e0cd750c1607f",
    "filename": "VirtualApp/app/src/main/res/values/strings.xml",
    "status": "modified",
    "additions": 1,
    "deletions": 0,
    "changes": 1,
    "blob_url": "https://github.com/fredyzhang5532/VirtualXposed/blob/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/app/src/main/res/values/strings.xml",
    "raw_url": "https://github.com/fredyzhang5532/VirtualXposed/raw/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/app/src/main/res/values/strings.xml",
    "contents_url": "https://api.github.com/repos/fredyzhang5532/VirtualXposed/contents/VirtualApp/app/src/main/res/values/strings.xml?ref=f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7",
    "patch": "@@ -184,4 +184,5 @@ Currently, EXposed has been put on the app store and renamed to Tai Chi. You can\n     <string name=\"install_taichi_while_old_version\">The version of TaiChi installed is too old, Please install the latest Taichi!</string>\n     <string name=\"install_go_latest_exp\">Install the latest TaiChi</string>\n     <string name=\"install_complete_and_open\">Open</string>\n+    <string name=\"unsupported_for_32bit_app\">32bits App is not supported!</string>\n </resources>"
  },
  {
    "sha": "666d274d8a0d29101328552b5ce018d90e4deee6",
    "filename": "VirtualApp/launcher",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": null,
    "raw_url": null,
    "contents_url": "https://api.github.com/repos/fredyzhang5532/VirtualXposed/contents/VirtualApp/launcher?ref=f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7",
    "patch": "@@ -1 +1 @@\n-Subproject commit 3c930960e68aa91a115f6fe8983ab7e91cbf3d2e\n+Subproject commit 666d274d8a0d29101328552b5ce018d90e4deee6"
  },
  {
    "sha": "573f40a2bf2fac7a617b80912486460443a7d68b",
    "filename": "VirtualApp/lib/build.gradle",
    "status": "modified",
    "additions": 9,
    "deletions": 3,
    "changes": 12,
    "blob_url": "https://github.com/fredyzhang5532/VirtualXposed/blob/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/lib/build.gradle",
    "raw_url": "https://github.com/fredyzhang5532/VirtualXposed/raw/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/lib/build.gradle",
    "contents_url": "https://api.github.com/repos/fredyzhang5532/VirtualXposed/contents/VirtualApp/lib/build.gradle?ref=f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7",
    "patch": "@@ -11,7 +11,7 @@ android {\n         versionName \"1.0\"\n         externalNativeBuild {\n             ndkBuild {\n-                abiFilters \"armeabi-v7a\", \"x86\"\n+                abiFilters \"arm64-v8a\", \"x86_64\"\n             }\n         }\n     }\n@@ -39,8 +39,14 @@ android {\n \n dependencies {\n     implementation fileTree(include: ['*.jar'], dir: 'libs')\n-    api \"me.weishu.exposed:exposed-core:0.8.1\"\n-    implementation \"me.weishu:free_reflection:2.2.0\"\n+    api(\"me.weishu.exposed:exposed-core:0.8.1\") {\n+        exclude group: 'me.weishu', module: 'free_reflection'\n+        exclude group: 'me.weishu', module: 'epic'\n+        exclude group: 'me.weishu.exposed', module: 'exposed-xposedapi'\n+    }\n+    implementation \"me.weishu:free_reflection:3.0.1\"\n+    implementation \"me.weishu:epic:0.11.1\"\n+    implementation \"me.weishu.exposed:exposed-xposedapi:0.4.6\"\n }\n \n repositories {"
  },
  {
    "sha": "d8a416efdbb8c05418d7882a8f83c8ec39663dbc",
    "filename": "VirtualApp/lib/src/main/java/android/app/ActivityOptions.java",
    "status": "added",
    "additions": 9,
    "deletions": 0,
    "changes": 9,
    "blob_url": "https://github.com/fredyzhang5532/VirtualXposed/blob/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/lib/src/main/java/android/app/ActivityOptions.java",
    "raw_url": "https://github.com/fredyzhang5532/VirtualXposed/raw/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/lib/src/main/java/android/app/ActivityOptions.java",
    "contents_url": "https://api.github.com/repos/fredyzhang5532/VirtualXposed/contents/VirtualApp/lib/src/main/java/android/app/ActivityOptions.java?ref=f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7",
    "patch": "@@ -0,0 +1,9 @@\n+package android.app;\n+\n+/**\n+ * @author weishu\n+ * @date 2021/2/24.\n+ */\n+\n+class ActivityOptions {\n+}"
  },
  {
    "sha": "72a9078254681a2a8bd8d64a283375a185896645",
    "filename": "VirtualApp/lib/src/main/java/android/app/ClientTransactionHandler.java",
    "status": "modified",
    "additions": 31,
    "deletions": 0,
    "changes": 31,
    "blob_url": "https://github.com/fredyzhang5532/VirtualXposed/blob/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/lib/src/main/java/android/app/ClientTransactionHandler.java",
    "raw_url": "https://github.com/fredyzhang5532/VirtualXposed/raw/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/lib/src/main/java/android/app/ClientTransactionHandler.java",
    "contents_url": "https://api.github.com/repos/fredyzhang5532/VirtualXposed/contents/VirtualApp/lib/src/main/java/android/app/ClientTransactionHandler.java?ref=f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7",
    "patch": "@@ -24,6 +24,7 @@\n import android.content.res.Configuration;\n import android.os.IBinder;\n import android.util.MergedConfiguration;\n+import android.view.DisplayAdjustments;\n \n import java.util.List;\n import java.util.Map;\n@@ -77,6 +78,11 @@ public abstract void handlePauseActivity(IBinder token, boolean finished, boolea\n      */\n     public abstract void handleResumeActivity(IBinder token, boolean finalStateRequest,\n             boolean isForward, String reason);\n+\n+    // Android 12\n+    public abstract void handleResumeActivity(ActivityThread.ActivityClientRecord record, boolean finalStateRequest,\n+                                              boolean isForward, String reason);\n+\n     /**\n      * Stop the activity.\n      * @param token Target activity token.\n@@ -90,6 +96,11 @@ public abstract void handleResumeActivity(IBinder token, boolean finalStateReque\n      */\n     public abstract void handleStopActivity(IBinder token, boolean show, int configChanges,\n             PendingTransactionActions pendingActions, boolean finalStateRequest, String reason);\n+\n+    // Android 11\n+    public abstract void handleStopActivity(IBinder token, int configChanges,\n+                                            PendingTransactionActions pendingActions, boolean finalStateRequest, String reason);\n+\n     /** Report that activity was stopped to server. */\n     public abstract void reportStop(PendingTransactionActions pendingActions);\n     /** Restart the activity after it was stopped. */\n@@ -108,6 +119,10 @@ public abstract void handleNewIntent(IBinder token, List intents,\n     /** Deliver picture-in-picture mode change notification. */\n     public abstract void handlePictureInPictureModeChanged(IBinder token, boolean isInPipMode,\n             Configuration overrideConfig);\n+\n+    // Android 11\n+    public abstract void handlePictureInPictureRequested(IBinder token);\n+\n     /** Update window visibility. */\n     public abstract void handleWindowVisibility(IBinder token, boolean show);\n     /** Perform activity launch. */\n@@ -116,11 +131,24 @@ public abstract Activity handleLaunchActivity(ActivityThread.ActivityClientRecor\n     /** Perform activity start. */\n     public abstract void handleStartActivity(ActivityThread.ActivityClientRecord r,\n             PendingTransactionActions pendingActions);\n+\n+    // Android 12\n+    /** Perform activity start. */\n+    public abstract void handleStartActivity(ActivityThread.ActivityClientRecord r,\n+                                             PendingTransactionActions pendingActions, ActivityOptions options);\n+\n+    // Android 11\n+    public abstract void handleStartActivity(IBinder binder,\n+                                             PendingTransactionActions pendingActions);\n     /** Get package info. */\n     public abstract LoadedApk getPackageInfoNoCheck(ApplicationInfo ai,\n                                                     CompatibilityInfo compatInfo);\n     /** Deliver app configuration change notification. */\n     public abstract void handleConfigurationChanged(Configuration config);\n+\n+    public abstract void handleFixedRotationAdjustments(IBinder token,\n+                                                        DisplayAdjustments.FixedRotationAdjustments fixedRotationAdjustments);\n+\n     /**\n      * Get {@link ActivityThread.ActivityClientRecord} instance that corresponds to the\n      * provided token.\n@@ -166,6 +194,9 @@ public abstract void handleRelaunchActivity(ActivityThread.ActivityClientRecord\n \n     public abstract void handleTopResumedActivityChanged(IBinder arg1, boolean arg2, String arg3);\n \n+    public abstract void handleTopResumedActivityChanged(ActivityThread.ActivityClientRecord record, boolean arg2, String arg3);\n+\n+\n     /** Count how many activities are launching. */\n     public abstract void countLaunchingActivities(int num);\n "
  },
  {
    "sha": "5d1c107018490c31d696a90e41ae1273f06c84d0",
    "filename": "VirtualApp/lib/src/main/java/android/app/TransactionHandlerProxy.java",
    "status": "modified",
    "additions": 36,
    "deletions": 0,
    "changes": 36,
    "blob_url": "https://github.com/fredyzhang5532/VirtualXposed/blob/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/lib/src/main/java/android/app/TransactionHandlerProxy.java",
    "raw_url": "https://github.com/fredyzhang5532/VirtualXposed/raw/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/lib/src/main/java/android/app/TransactionHandlerProxy.java",
    "contents_url": "https://api.github.com/repos/fredyzhang5532/VirtualXposed/contents/VirtualApp/lib/src/main/java/android/app/TransactionHandlerProxy.java?ref=f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7",
    "patch": "@@ -12,6 +12,7 @@\n import android.os.IBinder;\n import android.util.Log;\n import android.util.MergedConfiguration;\n+import android.view.DisplayAdjustments;\n \n import com.lody.virtual.client.VClientImpl;\n import com.lody.virtual.client.core.VirtualCore;\n@@ -76,11 +77,21 @@ public void handleResumeActivity(IBinder token, boolean finalStateRequest, boole\n         originalHandler.handleResumeActivity(token, finalStateRequest, isForward, reason);\n     }\n \n+    @Override\n+    public void handleResumeActivity(ActivityClientRecord record, boolean finalStateRequest, boolean isForward, String reason) {\n+        originalHandler.handleResumeActivity(record, finalStateRequest, isForward, reason);\n+    }\n+\n     @Override\n     public void handleStopActivity(IBinder token, boolean show, int configChanges, PendingTransactionActions pendingActions, boolean finalStateRequest, String reason) {\n         originalHandler.handleStopActivity(token, show, configChanges, pendingActions, finalStateRequest, reason);\n     }\n \n+    @Override\n+    public void handleStopActivity(IBinder token, int configChanges, PendingTransactionActions pendingActions, boolean finalStateRequest, String reason) {\n+        originalHandler.handleStopActivity(token, configChanges, pendingActions, finalStateRequest, reason);\n+    }\n+\n     @Override\n     public void reportStop(PendingTransactionActions pendingActions) {\n         originalHandler.reportStop(pendingActions);\n@@ -116,6 +127,11 @@ public void handlePictureInPictureModeChanged(IBinder token, boolean isInPipMode\n         originalHandler.handlePictureInPictureModeChanged(token, isInPipMode, overrideConfig);\n     }\n \n+    @Override\n+    public void handlePictureInPictureRequested(IBinder token) {\n+        originalHandler.handlePictureInPictureRequested(token);\n+    }\n+\n     @Override\n     public void handleWindowVisibility(IBinder token, boolean show) {\n         originalHandler.handleWindowVisibility(token, show);\n@@ -170,11 +186,21 @@ public Activity handleLaunchActivity(ActivityClientRecord r, PendingTransactionA\n         return originalHandler.handleLaunchActivity(r, pendingActions, customIntent);\n     }\n \n+    @Override\n+    public void handleStartActivity(ActivityClientRecord r, PendingTransactionActions pendingActions, ActivityOptions options) {\n+        originalHandler.handleStartActivity(r, pendingActions, options);\n+    }\n+\n     @Override\n     public void handleStartActivity(ActivityClientRecord r, PendingTransactionActions pendingActions) {\n         originalHandler.handleStartActivity(r, pendingActions);\n     }\n \n+    @Override\n+    public void handleStartActivity(IBinder binder, PendingTransactionActions pendingActions) {\n+        originalHandler.handleStartActivity(binder, pendingActions);\n+    }\n+\n     @Override\n     public LoadedApk getPackageInfoNoCheck(ApplicationInfo ai, CompatibilityInfo compatInfo) {\n         return originalHandler.getPackageInfoNoCheck(ai, compatInfo);\n@@ -185,6 +211,11 @@ public void handleConfigurationChanged(Configuration config) {\n         originalHandler.handleConfigurationChanged(config);\n     }\n \n+    @Override\n+    public void handleFixedRotationAdjustments(IBinder token, DisplayAdjustments.FixedRotationAdjustments fixedRotationAdjustments) {\n+        originalHandler.handleFixedRotationAdjustments(token, fixedRotationAdjustments);\n+    }\n+\n     @Override\n     public ActivityClientRecord getActivityClient(IBinder token) {\n         Log.i(TAG, \"getActivityClient : \" + token);\n@@ -226,6 +257,11 @@ public void handleTopResumedActivityChanged(IBinder arg1, boolean arg2, String a\n         originalHandler.handleTopResumedActivityChanged(arg1, arg2, arg3);\n     }\n \n+    @Override\n+    public void handleTopResumedActivityChanged(ActivityClientRecord record, boolean arg2, String arg3) {\n+        originalHandler.handleTopResumedActivityChanged(record, arg2, arg3);\n+    }\n+\n     @Override\n     public void countLaunchingActivities(int num) {\n         originalHandler.countLaunchingActivities(num);"
  },
  {
    "sha": "aa99d44a3c6e9d10e5fa4c0fdc550bc4d63008ba",
    "filename": "VirtualApp/lib/src/main/java/android/content/pm/PackageParser.java",
    "status": "modified",
    "additions": 7,
    "deletions": 0,
    "changes": 7,
    "blob_url": "https://github.com/fredyzhang5532/VirtualXposed/blob/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/lib/src/main/java/android/content/pm/PackageParser.java",
    "raw_url": "https://github.com/fredyzhang5532/VirtualXposed/raw/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/lib/src/main/java/android/content/pm/PackageParser.java",
    "contents_url": "https://api.github.com/repos/fredyzhang5532/VirtualXposed/contents/VirtualApp/lib/src/main/java/android/content/pm/PackageParser.java?ref=f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7",
    "patch": "@@ -63,6 +63,13 @@ public ComponentName getComponentName() {\n         // Applications requested features\n         public ArrayList<FeatureInfo> reqFeatures = null;\n         public int mSharedUserLabel;\n+\n+        public String[] splitNames;\n+        public String codePath;\n+        public String baseCodePath;\n+        public String[] splitCodePaths;\n+\n+        public ArrayList<String> usesOptionalLibraries;\n     }\n \n     public final class Service extends Component<ServiceIntentInfo> {"
  },
  {
    "sha": "94d2da16d619b19e4377b17e544fb0f424a60167",
    "filename": "VirtualApp/lib/src/main/java/android/view/DisplayAdjustments.java",
    "status": "added",
    "additions": 11,
    "deletions": 0,
    "changes": 11,
    "blob_url": "https://github.com/fredyzhang5532/VirtualXposed/blob/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/lib/src/main/java/android/view/DisplayAdjustments.java",
    "raw_url": "https://github.com/fredyzhang5532/VirtualXposed/raw/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/lib/src/main/java/android/view/DisplayAdjustments.java",
    "contents_url": "https://api.github.com/repos/fredyzhang5532/VirtualXposed/contents/VirtualApp/lib/src/main/java/android/view/DisplayAdjustments.java?ref=f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7",
    "patch": "@@ -0,0 +1,11 @@\n+package android.view;\n+\n+/**\n+ * @author weishu\n+ * @date 2020/11/23.\n+ */\n+\n+// https://cs.android.com/android/platform/superproject/+/master:frameworks/base/core/java/android/view/DisplayAdjustments.java;drc=master;l=184\n+public class DisplayAdjustments {\n+    public static class FixedRotationAdjustments {}\n+}"
  },
  {
    "sha": "00fd2712b8db5b6a3955aa80b9313359420974c6",
    "filename": "VirtualApp/lib/src/main/java/com/lody/virtual/client/NativeEngine.java",
    "status": "modified",
    "additions": 4,
    "deletions": 2,
    "changes": 6,
    "blob_url": "https://github.com/fredyzhang5532/VirtualXposed/blob/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/lib/src/main/java/com/lody/virtual/client/NativeEngine.java",
    "raw_url": "https://github.com/fredyzhang5532/VirtualXposed/raw/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/lib/src/main/java/com/lody/virtual/client/NativeEngine.java",
    "contents_url": "https://api.github.com/repos/fredyzhang5532/VirtualXposed/contents/VirtualApp/lib/src/main/java/com/lody/virtual/client/NativeEngine.java?ref=f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7",
    "patch": "@@ -33,9 +33,11 @@\n \n     private static boolean sFlag = false;\n \n+    private static final String LIB_NAME = \"va++\";\n+\n     static {\n         try {\n-            System.loadLibrary(\"va++\");\n+            System.loadLibrary(LIB_NAME);\n         } catch (Throwable e) {\n             VLog.e(TAG, VLog.getStackTraceString(e));\n         }\n@@ -142,7 +144,7 @@ public static void forbid(String path) {\n \n     public static void enableIORedirect() {\n         try {\n-            String soPath = String.format(\"/data/data/%s/lib/libva++.so\", VirtualCore.get().getHostPkg());\n+            String soPath = VirtualCore.get().getContext().getApplicationInfo().nativeLibraryDir + File.separator + \"lib\" + LIB_NAME + \".so\";\n             if (!new File(soPath).exists()) {\n                 throw new RuntimeException(\"io redirect failed.\");\n             }"
  },
  {
    "sha": "27462a8f704a4c930248cb8bfa6d481aadc7bcb8",
    "filename": "VirtualApp/lib/src/main/java/com/lody/virtual/client/core/InvocationStubManager.java",
    "status": "modified",
    "additions": 3,
    "deletions": 0,
    "changes": 3,
    "blob_url": "https://github.com/fredyzhang5532/VirtualXposed/blob/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/lib/src/main/java/com/lody/virtual/client/core/InvocationStubManager.java",
    "raw_url": "https://github.com/fredyzhang5532/VirtualXposed/raw/f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7/VirtualApp/lib/src/main/java/com/lody/virtual/client/core/InvocationStubManager.java",
    "contents_url": "https://api.github.com/repos/fredyzhang5532/VirtualXposed/contents/VirtualApp/lib/src/main/java/com/lody/virtual/client/core/InvocationStubManager.java?ref=f5b1174b8b0963e20c2d087fe318b8ffa9ee0af7",
    "patch": "@@ -15,6 +15,7 @@\n import com.lody.virtual.client.hook.proxies.appwidget.AppWidgetManagerStub;\n import com.lody.virtual.client.hook.proxies.audio.AudioManagerStub;\n import com.lody.virtual.client.hook.proxies.backup.BackupManagerStub;\n+import com.lody.virtual.client.hook.proxies.battery.BatteryStatsStub;\n import com.lody.virtual.client.hook.proxies.bluetooth.BluetoothStub;\n import com.lody.virtual.client.hook.proxies.clipboard.ClipBoardStub;\n import com.lody.virtual.client.hook.proxies.connectivity.ConnectivityStub;\n@@ -187,6 +188,8 @@ private void injectInternal() throws Throwable {\n                 addInjector(new WifiScannerStub());\n                 addInjector(new ShortcutServiceStub());\n                 addInjector(new DevicePolicyManagerStub());\n+\n+                addInjector(new BatteryStatsStub());\n             }\n             if (BuildCompat.isOreo()) {\n \t\t\t\taddInjector(new AutoFillManagerStub());"
  }
]
