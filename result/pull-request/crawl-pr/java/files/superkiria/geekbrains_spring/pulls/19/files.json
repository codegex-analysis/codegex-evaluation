[
  {
    "sha": "929a99fa83ff4a2588de259f11f21b21d1e78826",
    "filename": ".idea/artifacts/geekbrains_spring_mvc_war.xml",
    "status": "removed",
    "additions": 0,
    "deletions": 14,
    "changes": 14,
    "blob_url": "https://github.com/superkiria/geekbrains_spring/blob/4712485e707ad0926bb975950172ce0bfe8d9d29/.idea/artifacts/geekbrains_spring_mvc_war.xml",
    "raw_url": "https://github.com/superkiria/geekbrains_spring/raw/4712485e707ad0926bb975950172ce0bfe8d9d29/.idea/artifacts/geekbrains_spring_mvc_war.xml",
    "contents_url": "https://api.github.com/repos/superkiria/geekbrains_spring/contents/.idea/artifacts/geekbrains_spring_mvc_war.xml?ref=4712485e707ad0926bb975950172ce0bfe8d9d29",
    "patch": "@@ -1,14 +0,0 @@\n-<component name=\"ArtifactManager\">\n-  <artifact type=\"war\" name=\"geekbrains-spring-mvc:war\">\n-    <output-path>$PROJECT_DIR$/geekbrains-spring-mvc/target</output-path>\n-    <properties id=\"maven-jee-properties\">\n-      <options>\n-        <module>geekbrains-spring-mvc</module>\n-        <packaging>war</packaging>\n-      </options>\n-    </properties>\n-    <root id=\"archive\" name=\"app.war\">\n-      <element id=\"artifact\" artifact-name=\"geekbrains-spring-mvc:war exploded\" />\n-    </root>\n-  </artifact>\n-</component>\n\\ No newline at end of file"
  },
  {
    "sha": "014f9227ea38013c7e7c0835492d591762d75143",
    "filename": ".idea/artifacts/geekbrains_spring_mvc_war_exploded.xml",
    "status": "removed",
    "additions": 0,
    "deletions": 72,
    "changes": 72,
    "blob_url": "https://github.com/superkiria/geekbrains_spring/blob/4712485e707ad0926bb975950172ce0bfe8d9d29/.idea/artifacts/geekbrains_spring_mvc_war_exploded.xml",
    "raw_url": "https://github.com/superkiria/geekbrains_spring/raw/4712485e707ad0926bb975950172ce0bfe8d9d29/.idea/artifacts/geekbrains_spring_mvc_war_exploded.xml",
    "contents_url": "https://api.github.com/repos/superkiria/geekbrains_spring/contents/.idea/artifacts/geekbrains_spring_mvc_war_exploded.xml?ref=4712485e707ad0926bb975950172ce0bfe8d9d29",
    "patch": "@@ -1,72 +0,0 @@\n-<component name=\"ArtifactManager\">\n-  <artifact type=\"exploded-war\" name=\"geekbrains-spring-mvc:war exploded\">\n-    <output-path>$PROJECT_DIR$/geekbrains-spring-mvc/target/app</output-path>\n-    <properties id=\"maven-jee-properties\">\n-      <options>\n-        <exploded>true</exploded>\n-        <module>geekbrains-spring-mvc</module>\n-        <packaging>war</packaging>\n-      </options>\n-    </properties>\n-    <root id=\"root\">\n-      <element id=\"directory\" name=\"WEB-INF\">\n-        <element id=\"directory\" name=\"classes\">\n-          <element id=\"module-output\" name=\"geekbrains-spring-mvc\" />\n-        </element>\n-        <element id=\"directory\" name=\"lib\">\n-          <element id=\"library\" level=\"project\" name=\"Maven: org.springframework:spring-webmvc:5.2.0.RELEASE\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: org.springframework:spring-aop:5.2.0.RELEASE\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: org.springframework:spring-beans:5.2.0.RELEASE\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: org.springframework:spring-context:5.2.0.RELEASE\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: org.springframework:spring-core:5.2.0.RELEASE\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: org.springframework:spring-jcl:5.2.0.RELEASE\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: org.springframework:spring-expression:5.2.0.RELEASE\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: org.springframework:spring-web:5.2.0.RELEASE\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: org.springframework:spring-test:5.2.0.RELEASE\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: ch.qos.logback:logback-classic:1.2.3\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: ch.qos.logback:logback-core:1.2.3\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: org.slf4j:slf4j-api:1.7.25\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: org.thymeleaf:thymeleaf-spring5:3.0.10.RELEASE\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: org.thymeleaf:thymeleaf:3.0.10.RELEASE\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: org.attoparser:attoparser:2.0.5.RELEASE\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: org.unbescape:unbescape:1.1.6.RELEASE\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: org.hibernate.validator:hibernate-validator:6.1.0.Final\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: jakarta.validation:jakarta.validation-api:2.0.2\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: org.jboss.logging:jboss-logging:3.3.2.Final\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: com.fasterxml:classmate:1.3.4\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: org.hibernate.validator:hibernate-validator-annotation-processor:6.0.2.Final\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: javax.el:javax.el-api:3.0.0\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: org.glassfish.web:javax.el:2.2.6\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: org.springframework.data:spring-data-jpa:2.0.9.RELEASE\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: org.springframework.data:spring-data-commons:2.0.9.RELEASE\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: org.springframework:spring-orm:5.0.8.RELEASE\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: org.springframework:spring-jdbc:5.0.8.RELEASE\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: org.springframework:spring-tx:5.0.8.RELEASE\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: org.aspectj:aspectjrt:1.8.13\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: org.hibernate:hibernate-core:5.4.3.Final\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: javax.persistence:javax.persistence-api:2.2\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: org.javassist:javassist:3.24.0-GA\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: net.bytebuddy:byte-buddy:1.9.10\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: antlr:antlr:2.7.7\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: org.jboss.spec.javax.transaction:jboss-transaction-api_1.2_spec:1.1.1.Final\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: org.jboss:jandex:2.0.5.Final\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: javax.activation:javax.activation-api:1.2.0\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: org.dom4j:dom4j:2.1.1\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: org.hibernate.common:hibernate-commons-annotations:5.1.0.Final\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: javax.xml.bind:jaxb-api:2.3.1\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: org.glassfish.jaxb:jaxb-runtime:2.3.1\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: org.glassfish.jaxb:txw2:2.3.1\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: com.sun.istack:istack-commons-runtime:3.0.7\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: org.jvnet.staxex:stax-ex:1.8\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: com.sun.xml.fastinfoset:FastInfoset:1.2.15\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: mysql:mysql-connector-java:8.0.18\" />\n-          <element id=\"library\" level=\"project\" name=\"Maven: com.google.protobuf:protobuf-java:3.6.1\" />\n-        </element>\n-      </element>\n-      <element id=\"directory\" name=\"META-INF\">\n-        <element id=\"file-copy\" path=\"$PROJECT_DIR$/geekbrains-spring-mvc/target/app/META-INF/MANIFEST.MF\" />\n-      </element>\n-      <element id=\"javaee-facet-resources\" facet=\"geekbrains-spring-mvc/web/Web\" />\n-    </root>\n-  </artifact>\n-</component>\n\\ No newline at end of file"
  },
  {
    "sha": "040e9ad80269220bbb82677c8043021305ce2e2a",
    "filename": ".idea/artifacts/geekbrains_spring_servlet_war.xml",
    "status": "removed",
    "additions": 0,
    "deletions": 14,
    "changes": 14,
    "blob_url": "https://github.com/superkiria/geekbrains_spring/blob/4712485e707ad0926bb975950172ce0bfe8d9d29/.idea/artifacts/geekbrains_spring_servlet_war.xml",
    "raw_url": "https://github.com/superkiria/geekbrains_spring/raw/4712485e707ad0926bb975950172ce0bfe8d9d29/.idea/artifacts/geekbrains_spring_servlet_war.xml",
    "contents_url": "https://api.github.com/repos/superkiria/geekbrains_spring/contents/.idea/artifacts/geekbrains_spring_servlet_war.xml?ref=4712485e707ad0926bb975950172ce0bfe8d9d29",
    "patch": "@@ -1,14 +0,0 @@\n-<component name=\"ArtifactManager\">\n-  <artifact type=\"war\" name=\"geekbrains_spring_servlet:war\">\n-    <output-path>$PROJECT_DIR$/geekbrains_spring_servlet/target</output-path>\n-    <properties id=\"maven-jee-properties\">\n-      <options>\n-        <module>geekbrains_spring_servlet</module>\n-        <packaging>war</packaging>\n-      </options>\n-    </properties>\n-    <root id=\"archive\" name=\"geekbrains_spring_servlet-1.0-SNAPSHOT.war\">\n-      <element id=\"artifact\" artifact-name=\"geekbrains_spring_servlet:war exploded\" />\n-    </root>\n-  </artifact>\n-</component>\n\\ No newline at end of file"
  },
  {
    "sha": "80973eb7506ba64b0808b86099363848439a0755",
    "filename": ".idea/artifacts/geekbrains_spring_servlet_war_exploded.xml",
    "status": "removed",
    "additions": 0,
    "deletions": 23,
    "changes": 23,
    "blob_url": "https://github.com/superkiria/geekbrains_spring/blob/4712485e707ad0926bb975950172ce0bfe8d9d29/.idea/artifacts/geekbrains_spring_servlet_war_exploded.xml",
    "raw_url": "https://github.com/superkiria/geekbrains_spring/raw/4712485e707ad0926bb975950172ce0bfe8d9d29/.idea/artifacts/geekbrains_spring_servlet_war_exploded.xml",
    "contents_url": "https://api.github.com/repos/superkiria/geekbrains_spring/contents/.idea/artifacts/geekbrains_spring_servlet_war_exploded.xml?ref=4712485e707ad0926bb975950172ce0bfe8d9d29",
    "patch": "@@ -1,23 +0,0 @@\n-<component name=\"ArtifactManager\">\n-  <artifact type=\"exploded-war\" name=\"geekbrains_spring_servlet:war exploded\">\n-    <output-path>$PROJECT_DIR$/geekbrains_spring_servlet/target/geekbrains_spring_servlet-1.0-SNAPSHOT</output-path>\n-    <properties id=\"maven-jee-properties\">\n-      <options>\n-        <exploded>true</exploded>\n-        <module>geekbrains_spring_servlet</module>\n-        <packaging>war</packaging>\n-      </options>\n-    </properties>\n-    <root id=\"root\">\n-      <element id=\"directory\" name=\"WEB-INF\">\n-        <element id=\"directory\" name=\"classes\">\n-          <element id=\"module-output\" name=\"geekbrains-spring-servlet\" />\n-        </element>\n-      </element>\n-      <element id=\"directory\" name=\"META-INF\">\n-        <element id=\"file-copy\" path=\"$PROJECT_DIR$/geekbrains-spring-servlet/target/geekbrains_spring_servlet-1.0-SNAPSHOT/META-INF/MANIFEST.MF\" />\n-      </element>\n-      <element id=\"javaee-facet-resources\" facet=\"geekbrains-spring-servlet/web/Web\" />\n-    </root>\n-  </artifact>\n-</component>\n\\ No newline at end of file"
  },
  {
    "sha": "1931e20e567986b835c65b20f3da8f3f809e2363",
    "filename": "geekbrains-spring-boot/pom.xml",
    "status": "modified",
    "additions": 31,
    "deletions": 0,
    "changes": 31,
    "blob_url": "https://github.com/superkiria/geekbrains_spring/blob/7300277030f43d1ea4682ccae339f6fc2e7160b0/geekbrains-spring-boot/pom.xml",
    "raw_url": "https://github.com/superkiria/geekbrains_spring/raw/7300277030f43d1ea4682ccae339f6fc2e7160b0/geekbrains-spring-boot/pom.xml",
    "contents_url": "https://api.github.com/repos/superkiria/geekbrains_spring/contents/geekbrains-spring-boot/pom.xml?ref=7300277030f43d1ea4682ccae339f6fc2e7160b0",
    "patch": "@@ -110,6 +110,37 @@\n             <version>2.6</version>\n         </dependency>\n         <!--        sql2o end-->\n+        <!--        websocket start-->\n+        <dependency>\n+            <groupId>org.springframework.boot</groupId>\n+            <artifactId>spring-boot-starter-websocket</artifactId>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.webjars</groupId>\n+            <artifactId>webjars-locator</artifactId>\n+            <version>0.40</version>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.webjars</groupId>\n+            <artifactId>sockjs-client</artifactId>\n+            <version>1.1.2</version>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.webjars</groupId>\n+            <artifactId>stomp-websocket</artifactId>\n+            <version>2.3.3</version>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.webjars</groupId>\n+            <artifactId>bootstrap</artifactId>\n+            <version>3.3.7</version>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.webjars</groupId>\n+            <artifactId>jquery</artifactId>\n+            <version>3.1.0</version>\n+        </dependency>\n+        <!--        websocket end-->\n     </dependencies>\n \n     <build>"
  },
  {
    "sha": "077478b8d0f1bda60a9f1db89e757ab0523da06f",
    "filename": "geekbrains-spring-boot/src/main/java/ru/motrichkin/rest/BucketController.java",
    "status": "modified",
    "additions": 5,
    "deletions": 1,
    "changes": 6,
    "blob_url": "https://github.com/superkiria/geekbrains_spring/blob/7300277030f43d1ea4682ccae339f6fc2e7160b0/geekbrains-spring-boot/src/main/java/ru/motrichkin/rest/BucketController.java",
    "raw_url": "https://github.com/superkiria/geekbrains_spring/raw/7300277030f43d1ea4682ccae339f6fc2e7160b0/geekbrains-spring-boot/src/main/java/ru/motrichkin/rest/BucketController.java",
    "contents_url": "https://api.github.com/repos/superkiria/geekbrains_spring/contents/geekbrains-spring-boot/src/main/java/ru/motrichkin/rest/BucketController.java?ref=7300277030f43d1ea4682ccae339f6fc2e7160b0",
    "patch": "@@ -1,6 +1,8 @@\n package ru.motrichkin.rest;\n \n import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.messaging.handler.annotation.MessageMapping;\n+import org.springframework.messaging.handler.annotation.SendTo;\n import org.springframework.stereotype.Controller;\n import org.springframework.ui.Model;\n import org.springframework.web.bind.annotation.GetMapping;\n@@ -9,6 +11,8 @@\n import org.springframework.web.bind.annotation.RequestParam;\n import ru.motrichkin.service.ProductService;\n import ru.motrichkin.session.Bucket;\n+import ru.motrichkin.websocket.Message;\n+import ru.motrichkin.websocket.OutputMessage;\n \n @Controller\n @RequestMapping(\"/bucket\")\n@@ -30,6 +34,6 @@ public String bucket(Model model) {\n     @PostMapping(\"/put\")\n     public String putProductInBucket(@RequestParam(\"id\") Long productId) {\n         productService.getById(productId).ifPresent(value -> bucket.addProduct(value));\n-        return \"redirect:/bucket\";\n+        return \"redirect:/products\";\n     }\n }"
  },
  {
    "sha": "184fc311d8359fe4d2591de2c6885d3f317b03af",
    "filename": "geekbrains-spring-boot/src/main/java/ru/motrichkin/session/Bucket.java",
    "status": "modified",
    "additions": 2,
    "deletions": 0,
    "changes": 2,
    "blob_url": "https://github.com/superkiria/geekbrains_spring/blob/7300277030f43d1ea4682ccae339f6fc2e7160b0/geekbrains-spring-boot/src/main/java/ru/motrichkin/session/Bucket.java",
    "raw_url": "https://github.com/superkiria/geekbrains_spring/raw/7300277030f43d1ea4682ccae339f6fc2e7160b0/geekbrains-spring-boot/src/main/java/ru/motrichkin/session/Bucket.java",
    "contents_url": "https://api.github.com/repos/superkiria/geekbrains_spring/contents/geekbrains-spring-boot/src/main/java/ru/motrichkin/session/Bucket.java?ref=7300277030f43d1ea4682ccae339f6fc2e7160b0",
    "patch": "@@ -7,5 +7,7 @@\n \n     Page<Product> getProducts();\n \n+    public int getProductsAmount();\n+\n     void addProduct(Product product);\n }"
  },
  {
    "sha": "a99d656dc81d1fc72b8dc0beaa69aefd03f8c800",
    "filename": "geekbrains-spring-boot/src/main/java/ru/motrichkin/session/BucketImpl.java",
    "status": "modified",
    "additions": 7,
    "deletions": 0,
    "changes": 7,
    "blob_url": "https://github.com/superkiria/geekbrains_spring/blob/7300277030f43d1ea4682ccae339f6fc2e7160b0/geekbrains-spring-boot/src/main/java/ru/motrichkin/session/BucketImpl.java",
    "raw_url": "https://github.com/superkiria/geekbrains_spring/raw/7300277030f43d1ea4682ccae339f6fc2e7160b0/geekbrains-spring-boot/src/main/java/ru/motrichkin/session/BucketImpl.java",
    "contents_url": "https://api.github.com/repos/superkiria/geekbrains_spring/contents/geekbrains-spring-boot/src/main/java/ru/motrichkin/session/BucketImpl.java?ref=7300277030f43d1ea4682ccae339f6fc2e7160b0",
    "patch": "@@ -16,10 +16,17 @@\n public class BucketImpl implements Bucket {\n     private List<Product> products = new LinkedList<>();\n \n+    @Override\n     public Page<Product> getProducts() {\n         return new PageImpl<>(products);\n     }\n \n+    @Override\n+    public int getProductsAmount() {\n+        return products.size();\n+    }\n+\n+    @Override\n     public void addProduct(Product product) {\n         products.add(product);\n     }"
  },
  {
    "sha": "9f51c1a31fc07bd7cf51f05e4c56d32988ad49bc",
    "filename": "geekbrains-spring-boot/src/main/java/ru/motrichkin/websocket/Message.java",
    "status": "added",
    "additions": 9,
    "deletions": 0,
    "changes": 9,
    "blob_url": "https://github.com/superkiria/geekbrains_spring/blob/7300277030f43d1ea4682ccae339f6fc2e7160b0/geekbrains-spring-boot/src/main/java/ru/motrichkin/websocket/Message.java",
    "raw_url": "https://github.com/superkiria/geekbrains_spring/raw/7300277030f43d1ea4682ccae339f6fc2e7160b0/geekbrains-spring-boot/src/main/java/ru/motrichkin/websocket/Message.java",
    "contents_url": "https://api.github.com/repos/superkiria/geekbrains_spring/contents/geekbrains-spring-boot/src/main/java/ru/motrichkin/websocket/Message.java?ref=7300277030f43d1ea4682ccae339f6fc2e7160b0",
    "patch": "@@ -0,0 +1,9 @@\n+package ru.motrichkin.websocket;\n+\n+public class Message {\n+    private String name;\n+\n+    public String getName() {\n+        return name;\n+    }\n+}"
  },
  {
    "sha": "1b8580284f20e5477475ac3f0477ff299cd1e7c2",
    "filename": "geekbrains-spring-boot/src/main/java/ru/motrichkin/websocket/OutputMessage.java",
    "status": "added",
    "additions": 13,
    "deletions": 0,
    "changes": 13,
    "blob_url": "https://github.com/superkiria/geekbrains_spring/blob/7300277030f43d1ea4682ccae339f6fc2e7160b0/geekbrains-spring-boot/src/main/java/ru/motrichkin/websocket/OutputMessage.java",
    "raw_url": "https://github.com/superkiria/geekbrains_spring/raw/7300277030f43d1ea4682ccae339f6fc2e7160b0/geekbrains-spring-boot/src/main/java/ru/motrichkin/websocket/OutputMessage.java",
    "contents_url": "https://api.github.com/repos/superkiria/geekbrains_spring/contents/geekbrains-spring-boot/src/main/java/ru/motrichkin/websocket/OutputMessage.java?ref=7300277030f43d1ea4682ccae339f6fc2e7160b0",
    "patch": "@@ -0,0 +1,13 @@\n+package ru.motrichkin.websocket;\n+\n+public class OutputMessage {\n+    private String content;\n+\n+    public OutputMessage(String content) {\n+        this.content = content;\n+    }\n+\n+    public String getContent() {\n+        return content;\n+    }\n+}"
  },
  {
    "sha": "47ca65ce52a10acaaf1e220c430f8b3d6336b4b3",
    "filename": "geekbrains-spring-boot/src/main/java/ru/motrichkin/websocket/WebSocketConfiguration.java",
    "status": "added",
    "additions": 25,
    "deletions": 0,
    "changes": 25,
    "blob_url": "https://github.com/superkiria/geekbrains_spring/blob/7300277030f43d1ea4682ccae339f6fc2e7160b0/geekbrains-spring-boot/src/main/java/ru/motrichkin/websocket/WebSocketConfiguration.java",
    "raw_url": "https://github.com/superkiria/geekbrains_spring/raw/7300277030f43d1ea4682ccae339f6fc2e7160b0/geekbrains-spring-boot/src/main/java/ru/motrichkin/websocket/WebSocketConfiguration.java",
    "contents_url": "https://api.github.com/repos/superkiria/geekbrains_spring/contents/geekbrains-spring-boot/src/main/java/ru/motrichkin/websocket/WebSocketConfiguration.java?ref=7300277030f43d1ea4682ccae339f6fc2e7160b0",
    "patch": "@@ -0,0 +1,25 @@\n+package ru.motrichkin.websocket;\n+\n+import org.springframework.context.annotation.Configuration;\n+import org.springframework.messaging.simp.config.MessageBrokerRegistry;\n+import org.springframework.web.socket.config.annotation.AbstractWebSocketMessageBrokerConfigurer;\n+import org.springframework.web.socket.config.annotation.EnableWebSocketMessageBroker;\n+import org.springframework.web.socket.config.annotation.StompEndpointRegistry;\n+import org.springframework.web.socket.config.annotation.WebSocketMessageBrokerConfigurer;\n+\n+@Configuration\n+@EnableWebSocketMessageBroker\n+public class WebSocketConfiguration implements WebSocketMessageBrokerConfigurer {\n+\n+    @Override\n+    public void configureMessageBroker(MessageBrokerRegistry config) {\n+        config.enableSimpleBroker(\"/topic\");\n+        config.setApplicationDestinationPrefixes(\"/app\");\n+    }\n+\n+    @Override\n+    public void registerStompEndpoints(StompEndpointRegistry registry) {\n+        registry.addEndpoint(\"/hello\").withSockJS();\n+    }\n+\n+}\n\\ No newline at end of file"
  },
  {
    "sha": "c4224c5173f81284f4aaf650a9c2afc60352e90a",
    "filename": "geekbrains-spring-boot/src/main/java/ru/motrichkin/websocket/WebSocketController.java",
    "status": "added",
    "additions": 26,
    "deletions": 0,
    "changes": 26,
    "blob_url": "https://github.com/superkiria/geekbrains_spring/blob/7300277030f43d1ea4682ccae339f6fc2e7160b0/geekbrains-spring-boot/src/main/java/ru/motrichkin/websocket/WebSocketController.java",
    "raw_url": "https://github.com/superkiria/geekbrains_spring/raw/7300277030f43d1ea4682ccae339f6fc2e7160b0/geekbrains-spring-boot/src/main/java/ru/motrichkin/websocket/WebSocketController.java",
    "contents_url": "https://api.github.com/repos/superkiria/geekbrains_spring/contents/geekbrains-spring-boot/src/main/java/ru/motrichkin/websocket/WebSocketController.java?ref=7300277030f43d1ea4682ccae339f6fc2e7160b0",
    "patch": "@@ -0,0 +1,26 @@\n+package ru.motrichkin.websocket;\n+\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.messaging.handler.annotation.SendTo;\n+import org.springframework.stereotype.Controller;\n+import org.springframework.messaging.handler.annotation.MessageMapping;\n+import ru.motrichkin.session.Bucket;\n+\n+import java.util.concurrent.atomic.AtomicLong;\n+\n+@Controller\n+public class WebSocketController {\n+\n+    private AtomicLong counter = new AtomicLong(0);\n+\n+    @Autowired\n+    private Bucket bucket;\n+\n+    @MessageMapping(\"/hello\")\n+    @SendTo(\"/topic/greetings\")\n+    public OutputMessage getMessage(Message message) throws InterruptedException {\n+        Thread.sleep(300);\n+        counter.addAndGet(1);\n+        return new OutputMessage(\"Сообщение через вебсокет \" + counter.toString());\n+    }\n+}"
  },
  {
    "sha": "adcec62e366653f89c12391107d24ca9af011413",
    "filename": "geekbrains-spring-boot/src/main/resources/static/js/script.js",
    "status": "added",
    "additions": 24,
    "deletions": 0,
    "changes": 24,
    "blob_url": "https://github.com/superkiria/geekbrains_spring/blob/7300277030f43d1ea4682ccae339f6fc2e7160b0/geekbrains-spring-boot/src/main/resources/static/js/script.js",
    "raw_url": "https://github.com/superkiria/geekbrains_spring/raw/7300277030f43d1ea4682ccae339f6fc2e7160b0/geekbrains-spring-boot/src/main/resources/static/js/script.js",
    "contents_url": "https://api.github.com/repos/superkiria/geekbrains_spring/contents/geekbrains-spring-boot/src/main/resources/static/js/script.js?ref=7300277030f43d1ea4682ccae339f6fc2e7160b0",
    "patch": "@@ -0,0 +1,24 @@\n+var stompClient = null;\n+\n+window.onload = connect();\n+\n+function connect() {\n+    var socket = new SockJS('/app/hello');\n+    stompClient = Stomp.over(socket);\n+    stompClient.connect({}, function(frame) {\n+        console.log('Connected: ' + frame);\n+        stompClient.subscribe('/topic/greetings', function(greeting) {\n+            showGreeting(JSON.parse(greeting.body).content);\n+        });\n+    });\n+}\n+\n+function sendName() {\n+    var name = 'товар';\n+    stompClient.send(\"/app/hello\", {}, JSON.stringify({ 'name': name }));\n+}\n+\n+function showGreeting(message) {\n+    console.log(message);\n+    document.getElementById(\"resultInput\").value=message;\n+}"
  },
  {
    "sha": "5a276a201a7569d389bed403b47cb93798b6dd26",
    "filename": "geekbrains-spring-boot/src/main/resources/templates/products.html",
    "status": "modified",
    "additions": 10,
    "deletions": 0,
    "changes": 10,
    "blob_url": "https://github.com/superkiria/geekbrains_spring/blob/7300277030f43d1ea4682ccae339f6fc2e7160b0/geekbrains-spring-boot/src/main/resources/templates/products.html",
    "raw_url": "https://github.com/superkiria/geekbrains_spring/raw/7300277030f43d1ea4682ccae339f6fc2e7160b0/geekbrains-spring-boot/src/main/resources/templates/products.html",
    "contents_url": "https://api.github.com/repos/superkiria/geekbrains_spring/contents/geekbrains-spring-boot/src/main/resources/templates/products.html?ref=7300277030f43d1ea4682ccae339f6fc2e7160b0",
    "patch": "@@ -4,9 +4,19 @@\n     <meta charset=\"UTF-8\">\n     <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n     <title>Products</title>\n+    <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css\">\n+\n+    <script type=\"text/javascript\" th:src=\"@{https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.js}\"></script>\n+    <script type=\"text/javascript\" th:src=\"@{https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.4.0/sockjs.js}\"></script>\n+    <script type=\"text/javascript\" th:src=\"@{/js/script.js}\"></script>\n </head>\n <body>\n     <nav th:replace=\"fragments/navbar.html\"/>\n+\n+    <button id=\"connect\" onclick=\"connect();\">Connect</button>\n+    <button id=\"sendName\" onclick=\"sendName();\">Send</button>\n+    <input id=\"resultInput\" type=\"text\" size=\"40\">\n+\n     <h1>Products list</h1>\n     <form method=\"get\" th:action=\"@{/products/filter}\">\n         <input type=\"hidden\" id=\"page\" name=\"page\" value=\"1\">"
  }
]
