[
  {
    "sha": "23a89bbb6ca829a47211d20c8b11960088ea4950",
    "filename": ".idea/gradle.xml",
    "status": "modified",
    "additions": 1,
    "deletions": 0,
    "changes": 1,
    "blob_url": "https://github.com/awesome66613/Calculate/blob/8e403324ac53f5f055fe0b44a58cd3f967e0804d/.idea/gradle.xml",
    "raw_url": "https://github.com/awesome66613/Calculate/raw/8e403324ac53f5f055fe0b44a58cd3f967e0804d/.idea/gradle.xml",
    "contents_url": "https://api.github.com/repos/awesome66613/Calculate/contents/.idea/gradle.xml?ref=8e403324ac53f5f055fe0b44a58cd3f967e0804d",
    "patch": "@@ -1,5 +1,6 @@\n <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n <project version=\"4\">\n+  <component name=\"GradleMigrationSettings\" migrationVersion=\"1\" />\n   <component name=\"GradleSettings\">\n     <option name=\"linkedExternalProjectsSettings\">\n       <GradleProjectSettings>"
  },
  {
    "sha": "f5712fb2e56f360d288c75c427e16dfa9a2cbcf2",
    "filename": "app/build.gradle",
    "status": "modified",
    "additions": 1,
    "deletions": 0,
    "changes": 1,
    "blob_url": "https://github.com/awesome66613/Calculate/blob/8e403324ac53f5f055fe0b44a58cd3f967e0804d/app/build.gradle",
    "raw_url": "https://github.com/awesome66613/Calculate/raw/8e403324ac53f5f055fe0b44a58cd3f967e0804d/app/build.gradle",
    "contents_url": "https://api.github.com/repos/awesome66613/Calculate/contents/app/build.gradle?ref=8e403324ac53f5f055fe0b44a58cd3f967e0804d",
    "patch": "@@ -33,6 +33,7 @@ dependencies {\n     implementation 'androidx.appcompat:appcompat:1.2.0'\n     implementation 'com.google.android.material:material:1.3.0'\n     implementation 'androidx.constraintlayout:constraintlayout:2.0.4'\n+    implementation 'androidx.appcompat:appcompat:1.2.0'\n     testImplementation 'junit:junit:4.+'\n     androidTestImplementation 'androidx.test.ext:junit:1.1.2'\n     androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'"
  },
  {
    "sha": "067ae5138aad2592862b5bb0f26365b9f54a927b",
    "filename": "app/src/main/java/com/example/calculate/MainActivity.java",
    "status": "modified",
    "additions": 104,
    "deletions": 1,
    "changes": 105,
    "blob_url": "https://github.com/awesome66613/Calculate/blob/8e403324ac53f5f055fe0b44a58cd3f967e0804d/app/src/main/java/com/example/calculate/MainActivity.java",
    "raw_url": "https://github.com/awesome66613/Calculate/raw/8e403324ac53f5f055fe0b44a58cd3f967e0804d/app/src/main/java/com/example/calculate/MainActivity.java",
    "contents_url": "https://api.github.com/repos/awesome66613/Calculate/contents/app/src/main/java/com/example/calculate/MainActivity.java?ref=8e403324ac53f5f055fe0b44a58cd3f967e0804d",
    "patch": "@@ -1,14 +1,117 @@\n package com.example.calculate;\n \n-import androidx.appcompat.app.AppCompatActivity;\n \n import android.os.Bundle;\n \n+\n+import android.view.View;\n+import android.widget.Button;\n+import android.widget.EditText;\n+import android.widget.TextView;\n+\n+\n+import androidx.appcompat.app.AppCompatActivity;\n+\n+\n public class MainActivity extends AppCompatActivity {\n \n+    TextView resultField; // текстовое поле для вывода результата\n+    EditText numberField;   // поле для ввода числа\n+    TextView operationField;    // текстовое поле для вывода знака операции\n+    Double operand = null;  // операнд операции\n+    String lastOperation = \"=\"; // последняя операция\n+\n     @Override\n     protected void onCreate(Bundle savedInstanceState) {\n         super.onCreate(savedInstanceState);\n         setContentView(R.layout.activity_main);\n+        // получаем все поля по id из activity_main.xml\n+        resultField = (TextView) findViewById(R.id.resultField);\n+        numberField = (EditText) findViewById(R.id.numberField);\n+        operationField = (TextView) findViewById(R.id.operationField);\n+    }\n+\n+    // сохранение состояния\n+    @Override\n+    protected void onSaveInstanceState(Bundle outState) {\n+        outState.putString(\"OPERATION\", lastOperation);\n+        if (operand != null)\n+            outState.putDouble(\"OPERAND\", operand);\n+        super.onSaveInstanceState(outState);\n+    }\n+\n+    // получение ранее сохраненного состояния\n+    @Override\n+    protected void onRestoreInstanceState(Bundle savedInstanceState) {\n+        super.onRestoreInstanceState(savedInstanceState);\n+        lastOperation = savedInstanceState.getString(\"OPERATION\");\n+        operand = savedInstanceState.getDouble(\"OPERAND\");\n+        resultField.setText(operand.toString());\n+        operationField.setText(lastOperation);\n+    }\n+\n+    // обработка нажатия на числовую кнопку\n+    public void onNumberClick(View view) {\n+\n+        Button button = (Button) view;\n+        numberField.append(button.getText());\n+\n+        if (lastOperation.equals(\"=\") && operand != null) {\n+            operand = null;\n+        }\n+    }\n+\n+    // обработка нажатия на кнопку операции\n+    public void onOperationClick(View view) {\n+\n+        Button button = (Button) view;\n+        String op = button.getText().toString();\n+        String number = numberField.getText().toString();\n+        // если введенно что-нибудь\n+        if (number.length() > 0) {\n+            number = number.replace(',', '.');\n+            try {\n+                performOperation(Double.valueOf(number), op);\n+            } catch (NumberFormatException ex) {\n+                numberField.setText(\"\");\n+            }\n+        }\n+        lastOperation = op;\n+        operationField.setText(lastOperation);\n+    }\n+\n+    private void performOperation(Double number, String operation) {\n+\n+        // если операнд ранее не был установлен (при вводе самой первой операции)\n+        if (operand == null) {\n+            operand = number;\n+        } else {\n+            if (lastOperation.equals(\"=\")) {\n+                lastOperation = operation;\n+            }\n+            switch (lastOperation) {\n+                case \"=\":\n+                    operand = number;\n+                    break;\n+                case \"/\":\n+                    if (number == 0) {\n+                        operand = 0.0;\n+                    } else {\n+                        operand /= number;\n+                    }\n+                    break;\n+                case \"*\":\n+                    operand *= number;\n+                    break;\n+                case \"+\":\n+                    operand += number;\n+                    break;\n+                case \"-\":\n+                    operand -= number;\n+                    break;\n+            }\n+        }\n+        resultField.setText(operand.toString().replace('.', ','));\n+        numberField.setText(\"\");\n     }\n }\n\\ No newline at end of file"
  },
  {
    "sha": "10a3066dffe15ab545988faae569115dc932e243",
    "filename": "app/src/main/res/layout/activity_main.xml",
    "status": "modified",
    "additions": 110,
    "deletions": 77,
    "changes": 187,
    "blob_url": "https://github.com/awesome66613/Calculate/blob/8e403324ac53f5f055fe0b44a58cd3f967e0804d/app/src/main/res/layout/activity_main.xml",
    "raw_url": "https://github.com/awesome66613/Calculate/raw/8e403324ac53f5f055fe0b44a58cd3f967e0804d/app/src/main/res/layout/activity_main.xml",
    "contents_url": "https://api.github.com/repos/awesome66613/Calculate/contents/app/src/main/res/layout/activity_main.xml?ref=8e403324ac53f5f055fe0b44a58cd3f967e0804d",
    "patch": "@@ -1,139 +1,172 @@\n <?xml version=\"1.0\" encoding=\"utf-8\"?>\n-<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n+<androidx.constraintlayout.widget.ConstraintLayout\n+    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n+    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n     android:layout_width=\"match_parent\"\n     android:layout_height=\"match_parent\"\n-    android:orientation=\"vertical\">\n-    <Space\n-        android:layout_width=\"match_parent\"\n+    android:padding=\"8dp\">\n+    <!-- поле результата -->\n+    <TextView\n+        android:id=\"@+id/resultField\"\n+        android:layout_width=\"0dp\"\n         android:layout_height=\"wrap_content\"\n-        android:layout_weight=\"1\" />\n+        app:layout_constraintHorizontal_weight=\"1\"\n+        android:textSize=\"18sp\"\n+        app:layout_constraintTop_toTopOf=\"parent\"\n+        app:layout_constraintLeft_toLeftOf=\"parent\"\n+        app:layout_constraintRight_toLeftOf=\"@+id/operationField\"/>\n+    <!-- поле знака операции -->\n+    <TextView\n+        android:id=\"@+id/operationField\"\n+        android:layout_width=\"0dp\"\n+        android:layout_height=\"wrap_content\"\n+        app:layout_constraintHorizontal_weight=\"1\"\n+        android:textSize=\"18sp\"\n+        app:layout_constraintTop_toTopOf=\"parent\"\n+        app:layout_constraintRight_toRightOf=\"parent\"\n+        app:layout_constraintLeft_toRightOf=\"@+id/resultField\"\n+        />\n+    <!-- поле ввода чисел -->\n+    <EditText\n+        android:id=\"@+id/numberField\"\n+        android:layout_width=\"0dp\"\n+        android:layout_height=\"wrap_content\"\n+        android:inputType=\"phone\"\n+        app:layout_constraintTop_toBottomOf=\"@+id/resultField\"\n+        app:layout_constraintLeft_toLeftOf=\"parent\"\n+        app:layout_constraintRight_toRightOf=\"parent\"/>\n+\n     <LinearLayout\n-        android:layout_width=\"match_parent\"\n+        android:id=\"@+id/firstButtonPanel\"\n+        android:layout_width=\"0dp\"\n         android:layout_height=\"wrap_content\"\n-        android:orientation=\"horizontal\">\n+        android:layout_marginTop=\"16dp\"\n+        app:layout_constraintTop_toBottomOf=\"@+id/numberField\"\n+        app:layout_constraintLeft_toLeftOf=\"parent\"\n+        app:layout_constraintRight_toRightOf=\"parent\">\n         <Button\n-            android:id=\"@+id/button_1\"\n+            android:layout_weight=\"1\"\n             android:layout_width=\"0dp\"\n             android:layout_height=\"wrap_content\"\n-            android:layout_weight=\"1\"\n-            android:text=\"@string/_1\"\n-            android:textSize=\"17sp\" />\n+            android:text=\"7\"\n+            android:onClick=\"onNumberClick\"/>\n         <Button\n-            android:id=\"@+id/button_2\"\n+            android:layout_weight=\"1\"\n             android:layout_width=\"0dp\"\n             android:layout_height=\"wrap_content\"\n-            android:layout_weight=\"1\"\n-            android:text=\"@string/_2\"\n-            android:textSize=\"17sp\" />\n+            android:text=\"8\"\n+            android:onClick=\"onNumberClick\"/>\n         <Button\n-            android:id=\"@+id/button_3\"\n+            android:layout_weight=\"1\"\n             android:layout_width=\"0dp\"\n             android:layout_height=\"wrap_content\"\n-            android:layout_weight=\"1\"\n-            android:text=\"@string/_3\"\n-            android:textSize=\"17sp\" />\n+            android:text=\"9\"\n+            android:onClick=\"onNumberClick\"/>\n         <Button\n-            android:id=\"@+id/button_plus\"\n+            android:layout_weight=\"1\"\n             android:layout_width=\"0dp\"\n             android:layout_height=\"wrap_content\"\n-            android:layout_weight=\"1\"\n-            android:text=\"@string/_del\"\n-            android:textSize=\"17sp\" />\n+            android:text=\"/\"\n+            android:onClick=\"onOperationClick\"/>\n     </LinearLayout>\n     <LinearLayout\n-        android:layout_width=\"match_parent\"\n+        android:id=\"@+id/secondButtonPanel\"\n+        android:layout_width=\"0dp\"\n         android:layout_height=\"wrap_content\"\n-        android:orientation=\"horizontal\">\n+        android:layout_marginTop=\"16dp\"\n+        app:layout_constraintTop_toBottomOf=\"@+id/firstButtonPanel\"\n+        app:layout_constraintLeft_toLeftOf=\"parent\"\n+        app:layout_constraintRight_toRightOf=\"parent\">\n         <Button\n-            android:id=\"@+id/button_4\"\n+            android:layout_weight=\"1\"\n             android:layout_width=\"0dp\"\n             android:layout_height=\"wrap_content\"\n-            android:layout_weight=\"1\"\n-            android:text=\"@string/_4\"\n-            android:textSize=\"17sp\" />\n+            android:text=\"4\"\n+            android:onClick=\"onNumberClick\"/>\n         <Button\n-            android:id=\"@+id/button_5\"\n+            android:layout_weight=\"1\"\n             android:layout_width=\"0dp\"\n             android:layout_height=\"wrap_content\"\n-            android:layout_weight=\"1\"\n-            android:text=\"@string/_5\"\n-            android:textSize=\"17sp\" />\n+            android:text=\"5\"\n+            android:onClick=\"onNumberClick\"/>\n         <Button\n-            android:id=\"@+id/button_6\"\n+            android:layout_weight=\"1\"\n             android:layout_width=\"0dp\"\n             android:layout_height=\"wrap_content\"\n-            android:layout_weight=\"1\"\n-            android:text=\"@string/_6\"\n-            android:textSize=\"17sp\" />\n+            android:text=\"6\"\n+            android:onClick=\"onNumberClick\"/>\n         <Button\n-            android:id=\"@+id/button_um\"\n+            android:layout_weight=\"1\"\n             android:layout_width=\"0dp\"\n             android:layout_height=\"wrap_content\"\n-            android:layout_weight=\"1\"\n-            android:text=\"@string/_um\"\n-            android:textSize=\"17sp\" />\n+            android:text=\"*\"\n+            android:onClick=\"onOperationClick\"/>\n     </LinearLayout>\n     <LinearLayout\n-        android:layout_width=\"match_parent\"\n+        android:id=\"@+id/thirdButtonPanel\"\n+        android:layout_width=\"0dp\"\n         android:layout_height=\"wrap_content\"\n-        android:orientation=\"horizontal\">\n+        android:layout_marginTop=\"16dp\"\n+        app:layout_constraintTop_toBottomOf=\"@+id/secondButtonPanel\"\n+        app:layout_constraintLeft_toLeftOf=\"parent\"\n+        app:layout_constraintRight_toRightOf=\"parent\">\n         <Button\n-            android:id=\"@+id/button_7\"\n+            android:layout_weight=\"1\"\n             android:layout_width=\"0dp\"\n             android:layout_height=\"wrap_content\"\n-            android:layout_weight=\"1\"\n-            android:text=\"@string/_7\"\n-            android:textSize=\"17sp\" />\n+            android:text=\"1\"\n+            android:onClick=\"onNumberClick\"/>\n         <Button\n-            android:id=\"@+id/button_8\"\n+            android:layout_weight=\"1\"\n             android:layout_width=\"0dp\"\n             android:layout_height=\"wrap_content\"\n-            android:layout_weight=\"1\"\n-            android:text=\"@string/_8\"\n-            android:textSize=\"17sp\" />\n+            android:text=\"2\"\n+            android:onClick=\"onNumberClick\"/>\n         <Button\n-            android:id=\"@+id/button_9\"\n+            android:layout_weight=\"1\"\n             android:layout_width=\"0dp\"\n             android:layout_height=\"wrap_content\"\n-            android:layout_weight=\"1\"\n-            android:text=\"@string/_9\"\n-            android:textSize=\"17sp\" />\n+            android:text=\"3\"\n+            android:onClick=\"onNumberClick\"/>\n         <Button\n-            android:id=\"@+id/button_minus\"\n+            android:layout_weight=\"1\"\n             android:layout_width=\"0dp\"\n             android:layout_height=\"wrap_content\"\n-            android:layout_weight=\"1\"\n-            android:text=\"@string/_minus\"\n-            android:textSize=\"17sp\" />\n+            android:text=\"-\"\n+            android:onClick=\"onOperationClick\"/>\n     </LinearLayout>\n     <LinearLayout\n-        android:layout_width=\"match_parent\"\n+        android:id=\"@+id/forthButtonPanel\"\n+        android:layout_width=\"0dp\"\n         android:layout_height=\"wrap_content\"\n-        android:orientation=\"horizontal\">\n+        android:layout_marginTop=\"16dp\"\n+        app:layout_constraintTop_toBottomOf=\"@+id/thirdButtonPanel\"\n+        app:layout_constraintLeft_toLeftOf=\"parent\"\n+        app:layout_constraintRight_toRightOf=\"parent\">\n         <Button\n-            android:id=\"@+id/button_0\"\n+            android:layout_weight=\"1\"\n             android:layout_width=\"0dp\"\n             android:layout_height=\"wrap_content\"\n-            android:layout_weight=\"2\"\n-            android:text=\"@string/_0\"\n-            android:textSize=\"17sp\" />\n+            android:text=\"0\"\n+            android:onClick=\"onNumberClick\"/>\n         <Button\n-            android:id=\"@+id/button_point\"\n+            android:layout_weight=\"1\"\n             android:layout_width=\"0dp\"\n             android:layout_height=\"wrap_content\"\n-            android:layout_weight=\"1\"\n-            android:text=\"@string/_point\"\n-            android:textSize=\"17sp\" />\n+            android:text=\",\"\n+            android:onClick=\"onNumberClick\"/>\n         <Button\n-            android:id=\"@+id/button_ravno\"\n+            android:layout_weight=\"1\"\n             android:layout_width=\"0dp\"\n             android:layout_height=\"wrap_content\"\n+            android:text=\"+\"\n+            android:onClick=\"onOperationClick\"/>\n+        <Button\n             android:layout_weight=\"1\"\n-            android:text=\"@string/_rav\"\n-            android:textSize=\"17sp\" />\n+            android:layout_width=\"0dp\"\n+            android:layout_height=\"wrap_content\"\n+            android:text=\"=\"\n+            android:onClick=\"onOperationClick\"/>\n     </LinearLayout>\n-    <Space\n-        android:layout_width=\"match_parent\"\n-        android:layout_height=\"wrap_content\"\n-        android:layout_weight=\"1\" />\n-</LinearLayout>\n\\ No newline at end of file\n+\n+</androidx.constraintlayout.widget.ConstraintLayout>\n\\ No newline at end of file"
  }
]
