[
  {
    "sha": "748da0e24532d91b4d1bbda42e115f241fce175d",
    "filename": "androidlibrary_lib/build.gradle",
    "status": "modified",
    "additions": 3,
    "deletions": 1,
    "changes": 4,
    "blob_url": "https://github.com/odk-x/androidlibrary/blob/ea896848006c234996a6e695590341bef4cb4f1f/androidlibrary_lib/build.gradle",
    "raw_url": "https://github.com/odk-x/androidlibrary/raw/ea896848006c234996a6e695590341bef4cb4f1f/androidlibrary_lib/build.gradle",
    "contents_url": "https://api.github.com/repos/odk-x/androidlibrary/contents/androidlibrary_lib/build.gradle?ref=ea896848006c234996a6e695590341bef4cb4f1f",
    "patch": "@@ -29,6 +29,7 @@ android {\n         versionCode(releaseVersionCode)\n         versionName(versionCodeName)\n         testInstrumentationRunner(instrumentationRunner)\n+        multiDexEnabled true\n     }\n \n     // set by command line arguments\n@@ -107,7 +108,8 @@ dependencies {\n     implementation 'androidx.appcompat:appcompat:1.2.0'\n     implementation 'androidx.preference:preference:1.1.1'\n     implementation 'androidx.fragment:fragment:1.3.0-beta01'\n-\n+    implementation 'com.google.android.material:material:1.4.0-alpha01'\n+    implementation 'androidx.multidex:multidex:2.0.1'\n     // Testing dependencies\n     testImplementation 'junit:junit:4.12'\n     testImplementation 'androidx.annotation:annotation:1.1.0'"
  },
  {
    "sha": "f52eb1774062d299b46afadf89d2540d41fd95a5",
    "filename": "androidlibrary_lib/src/main/java/org/opendatakit/fragment/AlertDialogFragment.java",
    "status": "modified",
    "additions": 11,
    "deletions": 5,
    "changes": 16,
    "blob_url": "https://github.com/odk-x/androidlibrary/blob/ea896848006c234996a6e695590341bef4cb4f1f/androidlibrary_lib/src/main/java/org/opendatakit/fragment/AlertDialogFragment.java",
    "raw_url": "https://github.com/odk-x/androidlibrary/raw/ea896848006c234996a6e695590341bef4cb4f1f/androidlibrary_lib/src/main/java/org/opendatakit/fragment/AlertDialogFragment.java",
    "contents_url": "https://api.github.com/repos/odk-x/androidlibrary/contents/androidlibrary_lib/src/main/java/org/opendatakit/fragment/AlertDialogFragment.java?ref=ea896848006c234996a6e695590341bef4cb4f1f",
    "patch": "@@ -22,6 +22,9 @@\n import androidx.fragment.app.FragmentManager;\n import android.content.DialogInterface;\n import android.os.Bundle;\n+\n+import com.google.android.material.dialog.MaterialAlertDialogBuilder;\n+\n import org.opendatakit.androidlibrary.R;\n import org.opendatakit.properties.RequestCodes;\n import org.opendatakit.utilities.AppNameUtil;\n@@ -165,14 +168,17 @@ private void setTitle(String newTitle) {\n       Fragment f = mgr.findFragmentById(fragmentId);\n       setTargetFragment(f, RequestCodes.ALERT_DIALOG.ordinal());\n \n-      AlertDialog dlg = new AlertDialog.Builder(getActivity())\n-          .setIcon(android.R.drawable.ic_dialog_info).setTitle(title).setMessage(message)\n-          .setCancelable(false).setPositiveButton(getString(R.string.ok), this).create();\n-      dlg.setCanceledOnTouchOutside(false);\n+      androidx.appcompat.app.AlertDialog alertDialog=new MaterialAlertDialogBuilder(getActivity(), R.style.Theme_MaterialComponents_Light_Dialog_Alert)\n+              .setTitle(title)\n+              .setMessage(message)\n+              .setCancelable(false)\n+              .setPositiveButton(getString(R.string.ok), this)\n+              .create();\n+      alertDialog.setCanceledOnTouchOutside(false);\n \n       createDialogCalled = true;\n \n-      return dlg;\n+      return alertDialog;\n    }\n \n    @Override public void onClick(DialogInterface dialog, int i) {"
  },
  {
    "sha": "90602a65f909c122a7beaf4d42006b827b8c6478",
    "filename": "androidlibrary_lib/src/main/java/org/opendatakit/fragment/ProgressDialogFragment.java",
    "status": "modified",
    "additions": 51,
    "deletions": 30,
    "changes": 81,
    "blob_url": "https://github.com/odk-x/androidlibrary/blob/ea896848006c234996a6e695590341bef4cb4f1f/androidlibrary_lib/src/main/java/org/opendatakit/fragment/ProgressDialogFragment.java",
    "raw_url": "https://github.com/odk-x/androidlibrary/raw/ea896848006c234996a6e695590341bef4cb4f1f/androidlibrary_lib/src/main/java/org/opendatakit/fragment/ProgressDialogFragment.java",
    "contents_url": "https://api.github.com/repos/odk-x/androidlibrary/contents/androidlibrary_lib/src/main/java/org/opendatakit/fragment/ProgressDialogFragment.java?ref=ea896848006c234996a6e695590341bef4cb4f1f",
    "patch": "@@ -16,12 +16,21 @@\n \n import android.app.Activity;\n import android.app.Dialog;\n+\n+import androidx.appcompat.app.AlertDialog;\n import androidx.fragment.app.DialogFragment;\n import androidx.fragment.app.Fragment;\n import androidx.fragment.app.FragmentManager;\n-import android.app.ProgressDialog;\n import android.content.DialogInterface;\n+import android.os.Build;\n import android.os.Bundle;\n+import android.view.LayoutInflater;\n+import android.view.View;\n+import android.widget.TextView;\n+\n+import com.google.android.material.dialog.MaterialAlertDialogBuilder;\n+import com.google.android.material.progressindicator.LinearProgressIndicator;\n+\n import org.opendatakit.androidlibrary.R;\n import org.opendatakit.logging.WebLogger;\n import org.opendatakit.utilities.AppNameUtil;\n@@ -171,10 +180,10 @@ private void initState(Bundle bundle) {\n       super.onSaveInstanceState(outState);\n    }\n \n-   private ProgressDialog getProgressDialog() {\n+   private AlertDialog getProgressDialog() {\n       Dialog dialog = getDialog();\n-      if (dialog instanceof ProgressDialog) {\n-         return (ProgressDialog) dialog;\n+      if (dialog instanceof AlertDialog) {\n+         return (AlertDialog) dialog;\n       } else {\n          throw new IllegalStateException(\"Somehow an ProgressDialogFrament does not have an \"\n              + \"ProgressDialog\");\n@@ -188,7 +197,7 @@ private ProgressDialog getProgressDialog() {\n     */\n    public void setMessage(String newMessage) {\n       message = newMessage;\n-      getProgressDialog().setMessage(message);\n+      tvMessage.setText(message);\n    }\n \n    /**\n@@ -198,56 +207,68 @@ public void setMessage(String newMessage) {\n     */\n    private void setTitle(String newTitle) {\n       title = newTitle;\n-      getProgressDialog().setMessage(title);\n+      getProgressDialog().setTitle(title);\n    }\n \n    public void setMessage(String message, int progress, int max) {\n-      ProgressDialog dlg = getProgressDialog();\n-      dlg.setMessage(message);\n-      if (progress == -1) {\n-         dlg.setIndeterminate(true);\n-      } else {\n-         dlg.setIndeterminate(false);\n-         dlg.setMax(max);\n-         dlg.setProgress(progress);\n+      this.message=message;\n+      tvMessage.setText(message);\n+      if(progress<=0)\n+         progressIndicator.setIndeterminate(true);\n+      else {\n+         progressIndicator.setIndeterminate(false);\n+         progressIndicator.setMax(max);\n+         if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.N) {\n+            progressIndicator.setProgress(progress,true);\n+         }\n+         else\n+            progressIndicator.setProgress(progress);\n       }\n    }\n \n+   TextView tvMessage;\n+   LinearProgressIndicator progressIndicator;\n+\n    /**\n     * Called from onCreate when a dialog object needs to be created\n     *\n     * @param savedInstanceState unused\n     * @return a Dialog object with the correct message and title\n     */\n    @Override public Dialog onCreateDialog(Bundle savedInstanceState) {\n-      ProgressDialog mProgressDialog = new ProgressDialog(getActivity(), getTheme());\n-      mProgressDialog.setTitle(title);\n-      mProgressDialog.setMessage(message);\n-      mProgressDialog.setIndeterminate(true);\n-      mProgressDialog.setCancelable(false);\n-      mProgressDialog.setCanceledOnTouchOutside(false);\n+\n+      LayoutInflater inflater=getLayoutInflater();\n+      View view=inflater.inflate(R.layout.progress_indicator_layout,null);\n+\n+      AlertDialog dialog=new MaterialAlertDialogBuilder(getActivity(),R.style.Theme_MaterialComponents_Light_Dialog_Alert)\n+              .setTitle(title)\n+              .setCancelable(false)\n+              .setView(view)\n+              .create();\n+\n+      tvMessage=view.findViewById(R.id.tvMessage);\n+      progressIndicator=view.findViewById(R.id.progress_indicator);\n+\n+      tvMessage.setText(message);\n+      progressIndicator.setIndeterminate(true);\n+\n+      dialog.setCanceledOnTouchOutside(false);\n \n       if (positiveButtonText != null) {\n-         mProgressDialog.setButton(DialogInterface.BUTTON_POSITIVE, positiveButtonText, this);\n+         dialog.setButton(DialogInterface.BUTTON_POSITIVE, positiveButtonText, this);\n       }\n \n       if (negativeButtonText != null) {\n-         mProgressDialog.setButton(DialogInterface.BUTTON_NEGATIVE, negativeButtonText, this);\n+         dialog.setButton(DialogInterface.BUTTON_NEGATIVE, negativeButtonText, this);\n       }\n \n       if (neutralButtonText != null) {\n-         mProgressDialog.setButton(DialogInterface.BUTTON_NEUTRAL, neutralButtonText, this);\n-      }\n-\n-      if (canDismissDialog) {\n-         mProgressDialog.setIcon(android.R.drawable.ic_dialog_info);\n-      } else {\n-         mProgressDialog.setIcon(R.drawable.ic_info_outline_black_24dp);\n+         dialog.setButton(DialogInterface.BUTTON_NEUTRAL, neutralButtonText, this);\n       }\n \n       createDialogCalled = true;\n \n-      return mProgressDialog;\n+      return dialog;\n    }\n \n    @Override public void onClick(DialogInterface dialog, int whichButton) {"
  },
  {
    "sha": "3e6ddc99315d2e4390eec1e5b53f53f9b31a5f4a",
    "filename": "androidlibrary_lib/src/main/res/layout/progress_indicator_layout.xml",
    "status": "added",
    "additions": 37,
    "deletions": 0,
    "changes": 37,
    "blob_url": "https://github.com/odk-x/androidlibrary/blob/ea896848006c234996a6e695590341bef4cb4f1f/androidlibrary_lib/src/main/res/layout/progress_indicator_layout.xml",
    "raw_url": "https://github.com/odk-x/androidlibrary/raw/ea896848006c234996a6e695590341bef4cb4f1f/androidlibrary_lib/src/main/res/layout/progress_indicator_layout.xml",
    "contents_url": "https://api.github.com/repos/odk-x/androidlibrary/contents/androidlibrary_lib/src/main/res/layout/progress_indicator_layout.xml?ref=ea896848006c234996a6e695590341bef4cb4f1f",
    "patch": "@@ -0,0 +1,37 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<FrameLayout\n+    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n+    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n+    xmlns:tools=\"http://schemas.android.com/tools\"\n+    android:layout_width=\"match_parent\"\n+    android:layout_height=\"wrap_content\">\n+\n+    <com.google.android.material.card.MaterialCardView\n+        android:layout_width=\"match_parent\"\n+        android:layout_height=\"match_parent\"\n+        android:theme=\"@style/Theme.MaterialComponents.Light.Dialog.Alert\">\n+\n+        <LinearLayout\n+            android:layout_width=\"match_parent\"\n+            android:layout_height=\"wrap_content\"\n+            android:layout_margin=\"4dp\"\n+            android:orientation=\"vertical\">\n+\n+            <com.google.android.material.progressindicator.LinearProgressIndicator\n+                android:id=\"@+id/progress_indicator\"\n+                android:layout_width=\"match_parent\"\n+                android:layout_height=\"wrap_content\"\n+                android:layout_margin=\"8dp\"\n+                android:indeterminate=\"true\" />\n+\n+            <TextView\n+                android:id=\"@+id/tvMessage\"\n+                android:layout_width=\"match_parent\"\n+                android:layout_height=\"44dp\"\n+                android:layout_margin=\"8dp\"\n+                android:text=\"Message\"\n+                android:textSize=\"15sp\"/>\n+        </LinearLayout>\n+    </com.google.android.material.card.MaterialCardView>\n+\n+</FrameLayout>\n\\ No newline at end of file"
  }
]
