[
  {
    "sha": "ccb81bfdd1a7c9af34348559ca1a1a49d0092f35",
    "filename": "homework01/pom.xml",
    "status": "modified",
    "additions": 8,
    "deletions": 0,
    "changes": 8,
    "blob_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/blob/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/pom.xml",
    "raw_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/raw/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/pom.xml",
    "contents_url": "https://api.github.com/repos/ant-liza/2021-02-otus-spring-prokhorova/contents/homework01/pom.xml?ref=aafc2beba639b8821090f8b696eff5d3c0e98082",
    "patch": "@@ -33,6 +33,14 @@\n             <version>5.8.0-M1</version>\n             <scope>test</scope>\n         </dependency>\n+        <!-- Mockito -->\n+        <!-- https://mvnrepository.com/artifact/org.mockito/mockito-all -->\n+        <dependency>\n+            <groupId>org.mockito</groupId>\n+            <artifactId>mockito-all</artifactId>\n+            <version>1.10.19</version>\n+            <scope>test</scope>\n+        </dependency>\n \n \n     </dependencies>"
  },
  {
    "sha": "4a2eb550699ef7660b748a4f217bb940e2b811d0",
    "filename": "homework01/src/main/java/ru/otus/homework01/Main.java",
    "status": "modified",
    "additions": 7,
    "deletions": 9,
    "changes": 16,
    "blob_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/blob/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/src/main/java/ru/otus/homework01/Main.java",
    "raw_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/raw/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/src/main/java/ru/otus/homework01/Main.java",
    "contents_url": "https://api.github.com/repos/ant-liza/2021-02-otus-spring-prokhorova/contents/homework01/src/main/java/ru/otus/homework01/Main.java?ref=aafc2beba639b8821090f8b696eff5d3c0e98082",
    "patch": "@@ -1,19 +1,17 @@\n package ru.otus.homework01;\n \n-import org.springframework.context.support.ClassPathXmlApplicationContext;\n-import ru.otus.homework01.domain.AnswerOption;\n-import ru.otus.homework01.domain.ExamTest;\n-import ru.otus.homework01.domain.Question;\n-import ru.otus.homework01.service.TestService;\n+import org.springframework.context.annotation.*;\n \n import java.io.IOException;\n+import java.util.Scanner;\n \n+@ComponentScan\n+@Configuration\n+@PropertySource(\"classpath:application.properties\")\n public class Main {\n     public static void main(String[] args) throws IOException {\n-        ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(\"/spring-context.xml\");\n-        TestService service = context.getBean(TestService.class);\n-        ExamTest test = service.loadTest();\n-        test.showQuestions();\n+        AnnotationConfigApplicationContext context =\n+                new AnnotationConfigApplicationContext(Main.class);\n     }\n \n }"
  },
  {
    "sha": "dafba2a368639d1239e02cea0f15cfb403c5386d",
    "filename": "homework01/src/main/java/ru/otus/homework01/dao/TestDao.java",
    "status": "modified",
    "additions": 1,
    "deletions": 16,
    "changes": 17,
    "blob_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/blob/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/src/main/java/ru/otus/homework01/dao/TestDao.java",
    "raw_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/raw/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/src/main/java/ru/otus/homework01/dao/TestDao.java",
    "contents_url": "https://api.github.com/repos/ant-liza/2021-02-otus-spring-prokhorova/contents/homework01/src/main/java/ru/otus/homework01/dao/TestDao.java?ref=aafc2beba639b8821090f8b696eff5d3c0e98082",
    "patch": "@@ -2,24 +2,9 @@\n \n import ru.otus.homework01.domain.ExamTest;\n \n-import java.io.BufferedReader;\n import java.io.IOException;\n \n public interface TestDao {\n-\n-    /**\n-     * Получение BufferedReader из источника для дальнейшего его чтения\n-     * @return\n-     */\n-    BufferedReader getReaderFromDefaultSource();\n-\n-    /**\n-     * Метод принимает BufferedReader в качестве источника(поток) и читает его, заполняя все поля для\n-     * объекта ExamTest\n-     * @return ExamTest - заполненный из источника тест с вопросами и ответами\n-     * @throws IOException\n-     */\n-    ExamTest getTest(BufferedReader reader) throws IOException;\n-\n+    ExamTest getTest() throws IOException;\n \n }"
  },
  {
    "sha": "dea00e84d1153db533696558ca4e6b18b414eee9",
    "filename": "homework01/src/main/java/ru/otus/homework01/dao/TestDaoImpl.java",
    "status": "modified",
    "additions": 10,
    "deletions": 23,
    "changes": 33,
    "blob_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/blob/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/src/main/java/ru/otus/homework01/dao/TestDaoImpl.java",
    "raw_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/raw/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/src/main/java/ru/otus/homework01/dao/TestDaoImpl.java",
    "contents_url": "https://api.github.com/repos/ant-liza/2021-02-otus-spring-prokhorova/contents/homework01/src/main/java/ru/otus/homework01/dao/TestDaoImpl.java?ref=aafc2beba639b8821090f8b696eff5d3c0e98082",
    "patch": "@@ -1,42 +1,29 @@\n package ru.otus.homework01.dao;\n \n+import org.springframework.stereotype.Component;\n import ru.otus.homework01.domain.AnswerOption;\n+import ru.otus.homework01.domain.CSVReaderEnvelop;\n import ru.otus.homework01.domain.ExamTest;\n import ru.otus.homework01.domain.Question;\n \n-import java.io.BufferedReader;\n import java.io.IOException;\n-import java.io.InputStream;\n-import java.io.InputStreamReader;\n import java.util.ArrayList;\n import java.util.List;\n \n+@Component\n public class TestDaoImpl implements TestDao {\n-    private final String defaultSource;\n+    private final CSVReaderEnvelop csvReaderEnvelop;\n \n-    public TestDaoImpl(String defaultSource) {\n-        this.defaultSource = defaultSource;\n-    }\n-\n-\n-    @Override\n-    public BufferedReader getReaderFromDefaultSource() {\n-        ClassLoader classLoader = getClass().getClassLoader();\n-        InputStream inputStream = classLoader.getResourceAsStream(defaultSource);\n-        if (inputStream == null) {\n-            throw new IllegalArgumentException(\"File not found! \" + defaultSource);\n-        } else {\n-            InputStreamReader streamReader = new InputStreamReader(inputStream);\n-            return new BufferedReader(streamReader);\n-        }\n+    public TestDaoImpl(CSVReaderEnvelop csvReaderEnvelop) {\n+        this.csvReaderEnvelop = csvReaderEnvelop;\n     }\n \n     @Override\n-    public ExamTest getTest(BufferedReader reader) throws IOException {\n+    public ExamTest getTest() throws IOException {\n         ExamTest examTest = new ExamTest();\n         List<Question> questions = new ArrayList<>();\n-        String line = reader.readLine();//пропускаем 1-ю строку с наименованием столбцов\n-        while ((line = reader.readLine()) != null && !line.isEmpty()) {\n+        String line = csvReaderEnvelop.getReader().readLine();//пропускаем 1-ю строку с наименованием столбцов\n+        while ((line = csvReaderEnvelop.getReader().readLine()) != null && !line.isEmpty()) {\n             String[] fields = line.split(\";\");\n             String questionId = fields[0];\n             String questionDescription = fields[1];\n@@ -60,7 +47,7 @@ public ExamTest getTest(BufferedReader reader) throws IOException {\n             Question question = new Question(Integer.parseInt(questionId), questionDescription, ansOpList, correctAnswer);\n             questions.add(question);\n         }\n-        reader.close();\n+        csvReaderEnvelop.getReader().close();\n         examTest.setListOfQuestions(questions);\n         examTest.setName(\"Test # 1\");\n         return examTest;"
  },
  {
    "sha": "673b9be614cc712895a7d24d99ecb2f1cd71ce73",
    "filename": "homework01/src/main/java/ru/otus/homework01/dao/TestResultDao.java",
    "status": "added",
    "additions": 8,
    "deletions": 0,
    "changes": 8,
    "blob_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/blob/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/src/main/java/ru/otus/homework01/dao/TestResultDao.java",
    "raw_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/raw/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/src/main/java/ru/otus/homework01/dao/TestResultDao.java",
    "contents_url": "https://api.github.com/repos/ant-liza/2021-02-otus-spring-prokhorova/contents/homework01/src/main/java/ru/otus/homework01/dao/TestResultDao.java?ref=aafc2beba639b8821090f8b696eff5d3c0e98082",
    "patch": "@@ -0,0 +1,8 @@\n+package ru.otus.homework01.dao;\n+\n+import ru.otus.homework01.domain.TestResult;\n+\n+public interface TestResultDao {\n+\n+    TestResult getNewTestResult();\n+}"
  },
  {
    "sha": "49dc8b76ef1116b51de76cfbd2640557a16ecf97",
    "filename": "homework01/src/main/java/ru/otus/homework01/dao/TestResultDaoImpl.java",
    "status": "added",
    "additions": 14,
    "deletions": 0,
    "changes": 14,
    "blob_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/blob/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/src/main/java/ru/otus/homework01/dao/TestResultDaoImpl.java",
    "raw_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/raw/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/src/main/java/ru/otus/homework01/dao/TestResultDaoImpl.java",
    "contents_url": "https://api.github.com/repos/ant-liza/2021-02-otus-spring-prokhorova/contents/homework01/src/main/java/ru/otus/homework01/dao/TestResultDaoImpl.java?ref=aafc2beba639b8821090f8b696eff5d3c0e98082",
    "patch": "@@ -0,0 +1,14 @@\n+package ru.otus.homework01.dao;\n+\n+import org.springframework.stereotype.Component;\n+import ru.otus.homework01.domain.TestResult;\n+\n+@Component\n+public class TestResultDaoImpl implements TestResultDao {\n+\n+\n+    @Override\n+    public TestResult getNewTestResult() {\n+        return new TestResult();\n+    }\n+}"
  },
  {
    "sha": "e9f949d9629562ab06b3802311103a72b1289929",
    "filename": "homework01/src/main/java/ru/otus/homework01/domain/CSVReaderEnvelop.java",
    "status": "added",
    "additions": 29,
    "deletions": 0,
    "changes": 29,
    "blob_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/blob/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/src/main/java/ru/otus/homework01/domain/CSVReaderEnvelop.java",
    "raw_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/raw/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/src/main/java/ru/otus/homework01/domain/CSVReaderEnvelop.java",
    "contents_url": "https://api.github.com/repos/ant-liza/2021-02-otus-spring-prokhorova/contents/homework01/src/main/java/ru/otus/homework01/domain/CSVReaderEnvelop.java?ref=aafc2beba639b8821090f8b696eff5d3c0e98082",
    "patch": "@@ -0,0 +1,29 @@\n+package ru.otus.homework01.domain;\n+\n+import org.springframework.beans.factory.annotation.Value;\n+import org.springframework.stereotype.Component;\n+\n+import java.io.BufferedReader;\n+import java.io.InputStream;\n+import java.io.InputStreamReader;\n+\n+@Component\n+public class CSVReaderEnvelop {\n+    private final BufferedReader reader;\n+\n+    public CSVReaderEnvelop(@Value(\"${questions.file}\")String sourceCSV) {\n+        ClassLoader classLoader = getClass().getClassLoader();\n+        InputStream inputStream = classLoader.getResourceAsStream(sourceCSV);\n+        if (inputStream == null) {\n+            throw new IllegalArgumentException(\"File not found! \" + sourceCSV);\n+        } else {\n+            InputStreamReader streamReader = new InputStreamReader(inputStream);\n+            reader = new BufferedReader(streamReader);\n+        }\n+    }\n+\n+    public BufferedReader getReader() {\n+        return reader;\n+    }\n+\n+}"
  },
  {
    "sha": "cabb0a038c0d7954922145b1553896d8831efb2c",
    "filename": "homework01/src/main/java/ru/otus/homework01/domain/InOutEnvelope.java",
    "status": "added",
    "additions": 25,
    "deletions": 0,
    "changes": 25,
    "blob_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/blob/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/src/main/java/ru/otus/homework01/domain/InOutEnvelope.java",
    "raw_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/raw/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/src/main/java/ru/otus/homework01/domain/InOutEnvelope.java",
    "contents_url": "https://api.github.com/repos/ant-liza/2021-02-otus-spring-prokhorova/contents/homework01/src/main/java/ru/otus/homework01/domain/InOutEnvelope.java?ref=aafc2beba639b8821090f8b696eff5d3c0e98082",
    "patch": "@@ -0,0 +1,25 @@\n+package ru.otus.homework01.domain;\n+\n+import org.springframework.stereotype.Component;\n+\n+import java.io.PrintStream;\n+import java.util.Scanner;\n+\n+@Component\n+public class InOutEnvelope {\n+    private final Scanner scanner;\n+    private final PrintStream out;\n+\n+    public InOutEnvelope() {\n+        this.scanner = new Scanner(System.in);\n+        this.out = System.out;\n+    }\n+\n+    public Scanner getScanner() {\n+        return scanner;\n+    }\n+\n+    public PrintStream getOut() {\n+        return out;\n+    }\n+}"
  },
  {
    "sha": "414d9cf2bbcf34aa1e80434ae920cc3c8afa866d",
    "filename": "homework01/src/main/java/ru/otus/homework01/domain/Question.java",
    "status": "modified",
    "additions": 14,
    "deletions": 0,
    "changes": 14,
    "blob_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/blob/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/src/main/java/ru/otus/homework01/domain/Question.java",
    "raw_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/raw/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/src/main/java/ru/otus/homework01/domain/Question.java",
    "contents_url": "https://api.github.com/repos/ant-liza/2021-02-otus-spring-prokhorova/contents/homework01/src/main/java/ru/otus/homework01/domain/Question.java?ref=aafc2beba639b8821090f8b696eff5d3c0e98082",
    "patch": "@@ -3,6 +3,7 @@\n import org.springframework.lang.NonNull;\n \n import java.util.List;\n+import java.util.Objects;\n \n public class Question {\n \n@@ -46,6 +47,19 @@ public int getNumOfCorrectAnswer(){\n         return correctNum;\n     }\n \n+    @Override\n+    public boolean equals(Object o) {\n+        if (this == o) return true;\n+        if (o == null || getClass() != o.getClass()) return false;\n+        Question question = (Question) o;\n+        return questionId == question.questionId ;\n+    }\n+\n+    @Override\n+    public int hashCode() {\n+        return Objects.hash(questionId, questionDescription, correctAnswer);\n+    }\n+\n     @Override\n     public String toString() {\n         return \"\\nQuestion[ \" +"
  },
  {
    "sha": "e859c39347af71404beb919cc1fd5d6f5f293dd3",
    "filename": "homework01/src/main/java/ru/otus/homework01/domain/Student.java",
    "status": "added",
    "additions": 19,
    "deletions": 0,
    "changes": 19,
    "blob_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/blob/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/src/main/java/ru/otus/homework01/domain/Student.java",
    "raw_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/raw/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/src/main/java/ru/otus/homework01/domain/Student.java",
    "contents_url": "https://api.github.com/repos/ant-liza/2021-02-otus-spring-prokhorova/contents/homework01/src/main/java/ru/otus/homework01/domain/Student.java?ref=aafc2beba639b8821090f8b696eff5d3c0e98082",
    "patch": "@@ -0,0 +1,19 @@\n+package ru.otus.homework01.domain;\n+\n+public class Student {\n+    private final String firstName;\n+    private final String lastName;\n+\n+    public Student(String firstName, String lastName) {\n+        this.firstName = firstName;\n+        this.lastName = lastName;\n+    }\n+\n+    public String getFirstName() {\n+        return firstName;\n+    }\n+\n+    public String getLastName() {\n+        return lastName;\n+    }\n+}"
  },
  {
    "sha": "a0c6abf012a9943fb277e320e00746bc5bc67c8b",
    "filename": "homework01/src/main/java/ru/otus/homework01/domain/StudentAnswer.java",
    "status": "added",
    "additions": 19,
    "deletions": 0,
    "changes": 19,
    "blob_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/blob/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/src/main/java/ru/otus/homework01/domain/StudentAnswer.java",
    "raw_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/raw/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/src/main/java/ru/otus/homework01/domain/StudentAnswer.java",
    "contents_url": "https://api.github.com/repos/ant-liza/2021-02-otus-spring-prokhorova/contents/homework01/src/main/java/ru/otus/homework01/domain/StudentAnswer.java?ref=aafc2beba639b8821090f8b696eff5d3c0e98082",
    "patch": "@@ -0,0 +1,19 @@\n+package ru.otus.homework01.domain;\n+\n+public class StudentAnswer {\n+    private final Question question;\n+    private final int studentAnswer;\n+\n+    public StudentAnswer(Question question, int studentAnswer) {\n+        this.question = question;\n+        this.studentAnswer = studentAnswer;\n+    }\n+\n+    public Question getQuestion() {\n+        return question;\n+    }\n+\n+    public int getStudentAnswer() {\n+        return studentAnswer;\n+    }\n+}"
  },
  {
    "sha": "553b5e6085608e4f19b08159c187d3af785bb4dc",
    "filename": "homework01/src/main/java/ru/otus/homework01/domain/TestResult.java",
    "status": "added",
    "additions": 61,
    "deletions": 0,
    "changes": 61,
    "blob_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/blob/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/src/main/java/ru/otus/homework01/domain/TestResult.java",
    "raw_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/raw/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/src/main/java/ru/otus/homework01/domain/TestResult.java",
    "contents_url": "https://api.github.com/repos/ant-liza/2021-02-otus-spring-prokhorova/contents/homework01/src/main/java/ru/otus/homework01/domain/TestResult.java?ref=aafc2beba639b8821090f8b696eff5d3c0e98082",
    "patch": "@@ -0,0 +1,61 @@\n+package ru.otus.homework01.domain;\n+\n+import java.util.List;\n+\n+/**\n+ * Класс для хранения результатов тестирования:\n+ * студент, ответы студента на вопросы, кол-во вопросов теста,\n+ * кол-во правильных ответов студента\n+ */\n+public class TestResult {\n+    private Student student;\n+    private int numberOfCorrectAnswers;\n+    private List<StudentAnswer> studentAnswers;\n+    private int numberOfQuestions;\n+\n+    public TestResult(Student student, List<StudentAnswer> studentAnswers) {\n+        this.student = student;\n+        this.studentAnswers = studentAnswers;\n+    }\n+\n+    public TestResult() {\n+    }\n+\n+    public void setNumberOfQuestions(int numberOfQuestions) {\n+        this.numberOfQuestions = numberOfQuestions;\n+    }\n+\n+    public List<StudentAnswer> getStudentAnswers() {\n+        return studentAnswers;\n+    }\n+\n+    public Student getStudent() {\n+        return student;\n+    }\n+\n+    public void setNumberOfCorrectAnswers(int numberOfCorrectAnswers) {\n+        this.numberOfCorrectAnswers = numberOfCorrectAnswers;\n+    }\n+\n+    public int getNumberOfCorrectAnswers() {\n+        return numberOfCorrectAnswers;\n+    }\n+\n+\n+    public void setStudent(Student student) {\n+        this.student = student;\n+    }\n+\n+    public int getNumberOfQuestions() {\n+        return numberOfQuestions;\n+    }\n+\n+    public void setStudentAnswers(List<StudentAnswer> studentAnswers) {\n+        this.studentAnswers = studentAnswers;\n+    }\n+\n+\n+    public String getStudentInfo() {\n+        return getStudent().getFirstName() + \" \" + getStudent().getLastName();\n+    }\n+}"
  },
  {
    "sha": "05d5deb0c120097c9980b6152adc5af4bfc9877f",
    "filename": "homework01/src/main/java/ru/otus/homework01/service/ReaderService.java",
    "status": "added",
    "additions": 11,
    "deletions": 0,
    "changes": 11,
    "blob_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/blob/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/src/main/java/ru/otus/homework01/service/ReaderService.java",
    "raw_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/raw/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/src/main/java/ru/otus/homework01/service/ReaderService.java",
    "contents_url": "https://api.github.com/repos/ant-liza/2021-02-otus-spring-prokhorova/contents/homework01/src/main/java/ru/otus/homework01/service/ReaderService.java?ref=aafc2beba639b8821090f8b696eff5d3c0e98082",
    "patch": "@@ -0,0 +1,11 @@\n+package ru.otus.homework01.service;\n+\n+import ru.otus.homework01.domain.Question;\n+\n+import java.util.Scanner;\n+\n+public interface ReaderService {\n+    void showCustomRow(String value);\n+    String readRowStr();\n+    int readRowInt();\n+}"
  },
  {
    "sha": "1239a59ef16430ef9dd6978349aa656a9e9e669d",
    "filename": "homework01/src/main/java/ru/otus/homework01/service/ReaderServiceImpl.java",
    "status": "added",
    "additions": 94,
    "deletions": 0,
    "changes": 94,
    "blob_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/blob/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/src/main/java/ru/otus/homework01/service/ReaderServiceImpl.java",
    "raw_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/raw/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/src/main/java/ru/otus/homework01/service/ReaderServiceImpl.java",
    "contents_url": "https://api.github.com/repos/ant-liza/2021-02-otus-spring-prokhorova/contents/homework01/src/main/java/ru/otus/homework01/service/ReaderServiceImpl.java?ref=aafc2beba639b8821090f8b696eff5d3c0e98082",
    "patch": "@@ -0,0 +1,94 @@\n+package ru.otus.homework01.service;\n+\n+import org.springframework.stereotype.Service;\n+import ru.otus.homework01.dao.TestDao;\n+import ru.otus.homework01.domain.*;\n+\n+import java.io.IOException;\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+@Service\n+public class ReaderServiceImpl implements ReaderService {\n+    private final TestDao testDao;//источник данных\n+    private final TestResultService testResultService;//сервис для хранения результатов input'ов\n+    private final InOutEnvelope inOutEnvelope;\n+\n+    public ReaderServiceImpl(TestDao testDao,\n+                             TestResultService testResultService,\n+                             InOutEnvelope inOutEnvelope) throws IOException {\n+        this.testDao = testDao;\n+        this.testResultService = testResultService;\n+        this.inOutEnvelope = inOutEnvelope;\n+        startReadExam();\n+    }\n+\n+    @Override\n+    public void showCustomRow(String value) {\n+        inOutEnvelope.getOut().println(value);\n+    }\n+\n+\n+    private void showQuestionRow(Question question) {\n+        StringBuilder sb = new StringBuilder();\n+        inOutEnvelope.getOut().println(question.getQuestionDescription());\n+        for (AnswerOption answerOptionObj : question.getListOfOptions()) {\n+            sb.append(answerOptionObj.getOrderNumber())\n+                    .append(\")\")\n+                    .append(answerOptionObj.getDescription())\n+                    .append('\\n');\n+        }\n+        inOutEnvelope.getOut().println(sb.toString());\n+        inOutEnvelope.getOut().println(\"Введите ответ (1-4): \");\n+    }\n+\n+\n+    public String readRowStr() {\n+        return inOutEnvelope.getScanner().nextLine();\n+    }\n+\n+    public int readRowInt() {\n+        return inOutEnvelope.getScanner().nextInt();\n+    }\n+\n+    private void startReadExam() throws IOException {\n+        showCustomRow(\"Введите имя\");\n+        checkStringInput();\n+        String firstName = readRowStr();\n+        showCustomRow(\"Введите фамилию\");\n+        checkStringInput();\n+        String lastName = readRowStr();\n+        Student student = new Student(firstName, lastName);\n+        List<StudentAnswer> studentAnswers = new ArrayList<>();\n+        ExamTest examTest = testDao.getTest();\n+        for (Question question : examTest.getListOfQuestions()) {\n+            showQuestionRow(question);\n+            checkIntInput();\n+            int chosenOption = readRowInt();\n+            studentAnswers.add(new StudentAnswer(question, chosenOption));\n+        }\n+        inOutEnvelope.getScanner().close();\n+        TestResult result = testResultService.getEmptyTestResult();\n+        result.setStudent(student);\n+        result.setNumberOfQuestions(examTest.getListOfQuestions().size());\n+        result.setStudentAnswers(studentAnswers);\n+        result.setNumberOfCorrectAnswers(testResultService.getStudentCorrectAnswers(examTest, studentAnswers));\n+        testResultService.showResults(result);\n+    }\n+\n+    private void checkStringInput() {\n+        String pattern = \"[а-яА-Яa-zA-Z]+\";\n+        while (!inOutEnvelope.getScanner().hasNext(pattern)) {\n+            inOutEnvelope.getOut().println(\"Введите строковое значение\");\n+            inOutEnvelope.getScanner().nextLine();\n+        }\n+    }\n+\n+    private void checkIntInput() {\n+        while (!inOutEnvelope.getScanner().hasNextInt()) {\n+            inOutEnvelope.getOut().println(\"Введите число от 1 до 4\");\n+            inOutEnvelope.getScanner().next();\n+        }\n+    }\n+\n+}"
  },
  {
    "sha": "d9fcedfb1b2d116519fb96cbbad829e457fded1e",
    "filename": "homework01/src/main/java/ru/otus/homework01/service/TestResultService.java",
    "status": "added",
    "additions": 35,
    "deletions": 0,
    "changes": 35,
    "blob_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/blob/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/src/main/java/ru/otus/homework01/service/TestResultService.java",
    "raw_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/raw/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/src/main/java/ru/otus/homework01/service/TestResultService.java",
    "contents_url": "https://api.github.com/repos/ant-liza/2021-02-otus-spring-prokhorova/contents/homework01/src/main/java/ru/otus/homework01/service/TestResultService.java?ref=aafc2beba639b8821090f8b696eff5d3c0e98082",
    "patch": "@@ -0,0 +1,35 @@\n+package ru.otus.homework01.service;\n+\n+import ru.otus.homework01.domain.ExamTest;\n+import ru.otus.homework01.domain.StudentAnswer;\n+import ru.otus.homework01.domain.TestResult;\n+\n+import java.util.List;\n+\n+public interface TestResultService {\n+    /**\n+     * Метод для отображения результатов тестирования\n+     *\n+     * @param testResult - заполненный объект с сохраненными результатами\n+     *                   теста(ответы студента, оценка и т.д.)\n+     */\n+    void showResults(TestResult testResult);\n+\n+    /**\n+     * Метод для получения объекта, который будет хранить результаты теста\n+     *\n+     * @return - пустой объект для хранения результатов тестирования\n+     */\n+    TestResult getEmptyTestResult();\n+\n+    /**\n+     * Метод для рассчета итоговой оценки за тест\n+     *\n+     * @param testResult - заполненный объект с сохраненными результатами\n+     *                   теста(ответы студента, оценка и т.д.)\n+     * @return - рассчитанная оценка за тест\n+     */\n+    int calculateMark(TestResult testResult);\n+\n+    int getStudentCorrectAnswers(ExamTest exam, List<StudentAnswer> studentAnswers);\n+}"
  },
  {
    "sha": "53b6985146427b8da7b5a194c4d7599030f3095e",
    "filename": "homework01/src/main/java/ru/otus/homework01/service/TestResultServiceImpl.java",
    "status": "added",
    "additions": 69,
    "deletions": 0,
    "changes": 69,
    "blob_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/blob/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/src/main/java/ru/otus/homework01/service/TestResultServiceImpl.java",
    "raw_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/raw/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/src/main/java/ru/otus/homework01/service/TestResultServiceImpl.java",
    "contents_url": "https://api.github.com/repos/ant-liza/2021-02-otus-spring-prokhorova/contents/homework01/src/main/java/ru/otus/homework01/service/TestResultServiceImpl.java?ref=aafc2beba639b8821090f8b696eff5d3c0e98082",
    "patch": "@@ -0,0 +1,69 @@\n+package ru.otus.homework01.service;\n+\n+import org.springframework.stereotype.Service;\n+import ru.otus.homework01.dao.TestResultDao;\n+import ru.otus.homework01.domain.ExamTest;\n+import ru.otus.homework01.domain.Question;\n+import ru.otus.homework01.domain.StudentAnswer;\n+import ru.otus.homework01.domain.TestResult;\n+\n+import java.util.List;\n+\n+@Service\n+public class TestResultServiceImpl implements TestResultService {\n+    private final TestResultDao dao;\n+\n+    public TestResultServiceImpl(TestResultDao dao) {\n+        this.dao = dao;\n+    }\n+\n+    @Override\n+    public TestResult getEmptyTestResult() {\n+        return dao.getNewTestResult();\n+    }\n+\n+    @Override\n+    public void showResults(TestResult testResult) {\n+        System.out.println(\"Результаты теста:\");\n+        System.out.println(\"Имя и фамилия: \" + testResult.getStudentInfo());\n+        System.out.println(\"Всего вопросов/Количество правильных ответов : \" +\n+                testResult.getNumberOfQuestions()\n+                + \"/\" + testResult.getNumberOfCorrectAnswers());\n+        System.out.println(\"Оценка : \" + calculateMark(testResult));\n+\n+    }\n+\n+    @Override\n+    public int calculateMark(TestResult testResult) {\n+        int numberOfCorrectAnswers = testResult.getNumberOfCorrectAnswers();\n+        int mark;\n+        switch (numberOfCorrectAnswers) {\n+            case 5:\n+                mark = 5;\n+                break;\n+            case 4:\n+                mark = 4;\n+                break;\n+            case 3:\n+                mark = 3;\n+                break;\n+            default:\n+                mark = 2;\n+                break;\n+        }\n+        return mark;\n+    }\n+    public int getStudentCorrectAnswers(ExamTest exam, List<StudentAnswer> studentAnswers) {\n+        int numberOfCorrectAnswers = 0;\n+        for (Question question : exam.getListOfQuestions()) {\n+            for (StudentAnswer studentAnswer : studentAnswers) {\n+                if (question.equals(studentAnswer.getQuestion())) {\n+                    if (question.getNumOfCorrectAnswer() == studentAnswer.getStudentAnswer()) {\n+                        numberOfCorrectAnswers++;\n+                    }\n+                }\n+            }\n+        }\n+        return numberOfCorrectAnswers;\n+    }\n+}"
  },
  {
    "sha": "899be143146d2c0121d5be54782eb8c22aa83055",
    "filename": "homework01/src/main/java/ru/otus/homework01/service/TestService.java",
    "status": "modified",
    "additions": 0,
    "deletions": 11,
    "changes": 11,
    "blob_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/blob/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/src/main/java/ru/otus/homework01/service/TestService.java",
    "raw_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/raw/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/src/main/java/ru/otus/homework01/service/TestService.java",
    "contents_url": "https://api.github.com/repos/ant-liza/2021-02-otus-spring-prokhorova/contents/homework01/src/main/java/ru/otus/homework01/service/TestService.java?ref=aafc2beba639b8821090f8b696eff5d3c0e98082",
    "patch": "@@ -1,16 +1,5 @@\n package ru.otus.homework01.service;\n \n-import ru.otus.homework01.domain.ExamTest;\n-\n-import java.io.IOException;\n-\n public interface TestService {\n \n-    /**\n-     * Метод для загрузки теста\n-     * @return Возвращает объект ExamTest с заполненными вопросами, ответами и т.д.\n-     * @throws IOException\n-     */\n-    ExamTest loadTest() throws IOException;\n-\n }"
  },
  {
    "sha": "b29cb6ef34db8974ca3449f378da9f3a8f4db7f4",
    "filename": "homework01/src/main/java/ru/otus/homework01/service/TestServiceImpl.java",
    "status": "modified",
    "additions": 5,
    "deletions": 13,
    "changes": 18,
    "blob_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/blob/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/src/main/java/ru/otus/homework01/service/TestServiceImpl.java",
    "raw_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/raw/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/src/main/java/ru/otus/homework01/service/TestServiceImpl.java",
    "contents_url": "https://api.github.com/repos/ant-liza/2021-02-otus-spring-prokhorova/contents/homework01/src/main/java/ru/otus/homework01/service/TestServiceImpl.java?ref=aafc2beba639b8821090f8b696eff5d3c0e98082",
    "patch": "@@ -1,23 +1,15 @@\n package ru.otus.homework01.service;\n \n-import ru.otus.homework01.dao.TestDao;\n-import ru.otus.homework01.domain.ExamTest;\n+import org.springframework.stereotype.Service;\n \n-import java.io.BufferedReader;\n import java.io.IOException;\n \n+@Service\n public class TestServiceImpl implements TestService {\n-    private final TestDao dao;\n+    private final ReaderService readerService;\n \n-    public TestServiceImpl(TestDao dao) {\n-        this.dao = dao;\n+    public TestServiceImpl(ReaderService readerService) throws IOException{\n+        this.readerService = readerService;\n     }\n \n-    @Override\n-    public ExamTest loadTest() throws IOException {\n-        BufferedReader reader = dao.getReaderFromDefaultSource();\n-        return dao.getTest(reader);\n-    }\n-\n-\n }"
  },
  {
    "sha": "0ebe0b9ad78443edd370944827d59bff4e957575",
    "filename": "homework01/src/main/resources/application.properties",
    "status": "added",
    "additions": 1,
    "deletions": 0,
    "changes": 1,
    "blob_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/blob/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/src/main/resources/application.properties",
    "raw_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/raw/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/src/main/resources/application.properties",
    "contents_url": "https://api.github.com/repos/ant-liza/2021-02-otus-spring-prokhorova/contents/homework01/src/main/resources/application.properties?ref=aafc2beba639b8821090f8b696eff5d3c0e98082",
    "patch": "@@ -0,0 +1 @@\n+questions.file=Questions.csv\n\\ No newline at end of file"
  },
  {
    "sha": "258612be6e17c6d30e9c870a1eed3893825d303b",
    "filename": "homework01/src/main/resources/spring-context.xml",
    "status": "removed",
    "additions": 0,
    "deletions": 15,
    "changes": 15,
    "blob_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/blob/f9402f6142c10b63d7284e80f78863d1d0fd11b5/homework01/src/main/resources/spring-context.xml",
    "raw_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/raw/f9402f6142c10b63d7284e80f78863d1d0fd11b5/homework01/src/main/resources/spring-context.xml",
    "contents_url": "https://api.github.com/repos/ant-liza/2021-02-otus-spring-prokhorova/contents/homework01/src/main/resources/spring-context.xml?ref=f9402f6142c10b63d7284e80f78863d1d0fd11b5",
    "patch": "@@ -1,15 +0,0 @@\n-<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n-<beans xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n-       xmlns=\"http://www.springframework.org/schema/beans\"\n-       xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n-        http://www.springframework.org/schema/beans/spring-beans.xsd\">\n-\n-    <bean id=\"testDao\" class=\"ru.otus.homework01.dao.TestDaoImpl\">\n-        <constructor-arg name=\"defaultSource\" value=\"Questions.csv\"/>\n-    </bean>\n-\n-    <bean id=\"testService\" class=\"ru.otus.homework01.service.TestServiceImpl\">\n-        <constructor-arg name=\"dao\" ref=\"testDao\"/>\n-    </bean>\n-\n-</beans>"
  },
  {
    "sha": "3ced788e6112ded30a2a3b16c07173ca261af991",
    "filename": "homework01/src/test/java/ru/otus/homework01/service/TestServiceImplTest.java",
    "status": "added",
    "additions": 7,
    "deletions": 0,
    "changes": 7,
    "blob_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/blob/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/src/test/java/ru/otus/homework01/service/TestServiceImplTest.java",
    "raw_url": "https://github.com/ant-liza/2021-02-otus-spring-prokhorova/raw/aafc2beba639b8821090f8b696eff5d3c0e98082/homework01/src/test/java/ru/otus/homework01/service/TestServiceImplTest.java",
    "contents_url": "https://api.github.com/repos/ant-liza/2021-02-otus-spring-prokhorova/contents/homework01/src/test/java/ru/otus/homework01/service/TestServiceImplTest.java?ref=aafc2beba639b8821090f8b696eff5d3c0e98082",
    "patch": "@@ -0,0 +1,7 @@\n+package ru.otus.homework01.service;\n+\n+import static org.junit.jupiter.api.Assertions.*;\n+\n+class TestServiceImplTest {\n+\n+}\n\\ No newline at end of file"
  }
]
