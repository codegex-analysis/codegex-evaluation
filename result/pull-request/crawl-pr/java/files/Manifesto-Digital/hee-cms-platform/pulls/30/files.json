[
  {
    "sha": "ba31e8a3fdf7ed7c1c8b138caf1348b4c0b9bdef",
    "filename": "repository-data/webfiles/src/main/resources/site/freemarker/hee/eforms/eforms-field-renderer.ftl",
    "status": "modified",
    "additions": 20,
    "deletions": 20,
    "changes": 40,
    "blob_url": "https://github.com/Manifesto-Digital/hee-cms-platform/blob/916a9a276386291af7037a65c3316a9e4505d6c2/repository-data/webfiles/src/main/resources/site/freemarker/hee/eforms/eforms-field-renderer.ftl",
    "raw_url": "https://github.com/Manifesto-Digital/hee-cms-platform/raw/916a9a276386291af7037a65c3316a9e4505d6c2/repository-data/webfiles/src/main/resources/site/freemarker/hee/eforms/eforms-field-renderer.ftl",
    "contents_url": "https://api.github.com/repos/Manifesto-Digital/hee-cms-platform/contents/repository-data/webfiles/src/main/resources/site/freemarker/hee/eforms/eforms-field-renderer.ftl?ref=916a9a276386291af7037a65c3316a9e4505d6c2",
    "patch": "@@ -29,71 +29,71 @@\n \n     <div class=\"<@renderCss field=field />\">\n       <label class=\"nhsuk-label\">${field.label!}</label>\n+      <span class=\"nhsuk-hint\" id=\"${field.formRelativeUniqueName}-hint\">${field.hint!}</span>\n       <span class=\"nhsuk-error-message\" id=\"${field.formRelativeUniqueName}-error\"></span>\n       <input type=\"text\" id=\"${field.formRelativeUniqueName}\" name=\"${field.formRelativeUniqueName}\" class=\"nhsuk-input ${field.styleClass!}\" value=\"${field.value!}\"\n              <#if (field.length > 0)>size=\"${field.length}\"</#if> <#if (field.maxLength > 0)>maxlength=\"${field.maxLength}\"</#if>\n-             <#if (field.autocomplete??)> autocomplete=\"${field.autocomplete}\"</#if> aria-describedby=\"${field.formRelativeUniqueName}-hint ${field.formRelativeUniqueName}-error\"/>\n-      <span class=\"nhsuk-hint\" id=\"${field.formRelativeUniqueName}-hint\">${field.hint!}</span>\n+             <#if (field.autocomplete??)> autocomplete=\"${field.autocomplete}\"</#if> aria-describedby=\"${field.formRelativeUniqueName}-hint\"/>\n     </div>\n \n   <#elseif field.type == \"passwordfield\">\n \n     <div class=\"<@renderCss field=field />\">\n       <label class=\"nhsuk-label\">${field.label!}</label>\n+      <span class=\"nhsuk-hint\" id=\"${field.formRelativeUniqueName}-hint\">${field.hint!}</span>\n       <span class=\"nhsuk-error-message\" id=\"${field.formRelativeUniqueName}-error\"></span>\n       <input type=\"password\" id=\"${field.formRelativeUniqueName}\" name=\"${field.formRelativeUniqueName}\" class=\"${field.styleClass!}\"\n              <#if (field.length > 0)>size=\"${field.length}\"</#if> <#if (field.maxLength > 0)>maxlength=\"${field.maxLength}\"</#if>\n-             aria-describedby=\"${field.formRelativeUniqueName}-hint ${field.formRelativeUniqueName}-error\"/>\n-      <span class=\"nhsuk-hint\" id=\"${field.formRelativeUniqueName}-hint\">${field.hint!}</span>\n+             aria-describedby=\"${field.formRelativeUniqueName}-hint\"/>\n     </div>\n \n   <#elseif field.type == \"textarea\">\n \n     <div class=\"<@renderCss field=field />\">\n       <label class=\"nhsuk-label\">${field.label!}</label>\n+      <span class=\"nhsuk-hint\" id=\"${field.formRelativeUniqueName}-hint\">${field.hint!}</span>\n       <span class=\"nhsuk-error-message\" id=\"${field.formRelativeUniqueName}-error\"></span>\n       <textarea name=\"${field.formRelativeUniqueName}\" class=\"nhsuk-textarea ${field.styleClass!}\"\n                 cols=\"${field.cols}\" rows=\"${field.rows}\"\n-                aria-describedby=\"${field.formRelativeUniqueName}-hint ${field.formRelativeUniqueName}-error\"\n+                aria-describedby=\"${field.formRelativeUniqueName}-hint\"\n                 <#if (field.autocomplete??)> autocomplete=\"${field.autocomplete}\"</#if>\n                 <#if (field.minLength > 0)>minlength=\"${field.minLength}\"</#if> <#if (field.maxLength > 0)>maxlength=\"${field.maxLength}\"</#if>>${field.value!}</textarea>\n-      <span class=\"nhsuk-hint\" id=\"${field.formRelativeUniqueName}-hint\">${field.hint!}</span>\n     </div>\n \n   <#elseif field.type == \"dropdown\">\n \n     <div class=\"<@renderCss field=field />\">\n       <label class=\"nhsuk-label\">${field.label!}</label>\n+      <span class=\"nhsuk-hint\" id=\"${field.formRelativeUniqueName}-hint\">${field.hint!}</span>\n       <span class=\"nhsuk-error-message\" id=\"${field.formRelativeUniqueName}-error\"></span>\n-      <select name=\"${field.formRelativeUniqueName}\" aria-describedby=\"${field.formRelativeUniqueName}-hint ${field.formRelativeUniqueName}-error\" class=\"${field.styleClass!}\"<#if (field.autocomplete??)> autocomplete=\"${field.autocomplete}\"</#if>>\n+      <select name=\"${field.formRelativeUniqueName}\" aria-describedby=\"${field.formRelativeUniqueName}-hint\" class=\"${field.styleClass!}\"<#if (field.autocomplete??)> autocomplete=\"${field.autocomplete}\"</#if>>\n         <#list field.options as option>\n           <option value=\"${option.value!}\" <#if option.selected>selected=\"selected\"</#if>>${option.text!}</option>\n         </#list>\n       </select>\n-      <span class=\"nhsuk-hint\" id=\"${field.formRelativeUniqueName}-hint\">${field.hint!}</span>\n     </div>\n \n   <#elseif field.type == \"fileuploadfield\">\n \n     <div class=\"<@renderCss field=field />\">\n       <label class=\"nhsuk-label\">${field.label!}</label>\n+      <span class=\"nhsuk-hint\" id=\"${field.formRelativeUniqueName}-hint\">${field.hint!}</span>\n       <span class=\"nhsuk-error-message\" id=\"${field.formRelativeUniqueName}-error\"></span>\n       <input type=\"file\" name=\"${field.formRelativeUniqueName}\" class=\"${field.styleClass!}\"\n              data-validate=\"fileSizeAndExtension\" data-max-size=\"${field.maxUploadSize}\"\n              data-allowed-extensions=\"<#if field.fileExtensions?? && (field.fileExtensions?size > 0)>${field.fileExtensions?join(\",\")}</#if>\"\n-             aria-describedby=\"${field.formRelativeUniqueName}-hint ${field.formRelativeUniqueName}-error\"/>\n-      <span class=\"nhsuk-hint\" id=\"${field.formRelativeUniqueName}-hint\">${field.hint!}</span>\n+             aria-describedby=\"${field.formRelativeUniqueName}-hint\"/>\n     </div>\n \n   <#elseif field.type == \"datefield\">\n \n     <div class=\"<@renderCss field=field />\">\n       <label class=\"nhsuk-label\">${field.label!}</label>\n+      <span class=\"nhsuk-hint\" id=\"${field.formRelativeUniqueName}-hint\">${field.hint!}</span>\n       <span class=\"nhsuk-error-message\" id=\"${field.formRelativeUniqueName}-error\"></span>\n       <input type=\"text\" name=\"${field.formRelativeUniqueName}\" class=\"date ${field.styleClass!}\" value=\"${field.value!}\"\n               <#if (field.autocomplete??)> autocomplete=\"${field.autocomplete}\"</#if>\n-             aria-describedby=\"${field.formRelativeUniqueName}-hint ${field.formRelativeUniqueName}-error\"/>\n-      <span class=\"nhsuk-hint\" id=\"${field.formRelativeUniqueName}-hint\">${field.hint!}</span>\n+             aria-describedby=\"${field.formRelativeUniqueName}-hint\"/>\n     </div>\n     <script>\n       $(document).ready(function() {\n@@ -115,21 +115,22 @@\n \n     <div class=\"<@renderCss field=field />\">\n       <label class=\"nhsuk-label\">${field.label!}</label>\n+      <span class=\"nhsuk-hint\" id=\"${field.formRelativeUniqueName}-hint\">${field.hint!}</span>\n       <span class=\"nhsuk-error-message\" id=\"${field.formRelativeUniqueName}-error\"></span>\n       <ul class=\"radiogroup\">\n         <#list field.fields as radio>\n           <li>\n             <input type=\"radio\" name=\"${field.formRelativeUniqueName}\" class=\"${radio.styleClass!}\" value=\"${radio.value!}\"\n                    <#if radio.checked>checked=\"true\"</#if>\n-                   aria-describedby=\"${field.formRelativeUniqueName}-hint ${field.formRelativeUniqueName}-error\"/>\n+                   aria-describedby=\"${field.formRelativeUniqueName}-hint\"/>\n             ${radio.label!}\n           </li>\n         </#list>\n         <#if field.allowOther>\n           <li>\n             <input type=\"radio\" name=\"${field.formRelativeUniqueName}\" class=\"${field.styleClass!}\" value=\"${field.renderOtherValue!}\"\n               <#if field.otherValue>checked=\"true\"</#if>\n-                   aria-describedby=\"${field.formRelativeUniqueName}-hint ${field.formRelativeUniqueName}-error\"/>\n+                   aria-describedby=\"${field.formRelativeUniqueName}-hint\"/>\n             Other:\n             <span>\n               <input type=\"text\" value=\"<#if field.otherValue>${field.value!}</#if>\" name=\"${field.otherFieldName!}\" class=\"textfield-other\"\n@@ -138,41 +139,41 @@\n           </li>\n         </#if>\n       </ul>\n-      <span class=\"nhsuk-hint\" id=\"${field.formRelativeUniqueName}-hint\">${field.hint!}</span>\n     </div>\n \n   <#elseif field.type == \"checkboxgroup\">\n \n     <div class=\"<@renderCss field=field />\">\n       <label class=\"nhsuk-label\">${field.label!}</label>\n+      <span class=\"nhsuk-hint\" id=\"${field.formRelativeUniqueName}-hint\">${field.hint!}</span>\n       <span class=\"nhsuk-error-message\" id=\"${field.formRelativeUniqueName}-error\"></span>\n       <#list field.fields as checkbox>\n         <p>\n           <input type=\"checkbox\" name=\"${checkbox.formRelativeUniqueName}\" class=\"${checkbox.styleClass!}\" value=\"${checkbox.value!}\"\n                  <#if checkbox.checked>checked=\"true\"</#if>\n-                 aria-describedby=\"${field.formRelativeUniqueName}-hint ${field.formRelativeUniqueName}-error\"/>\n+                 aria-describedby=\"${field.formRelativeUniqueName}-hint\"/>\n           ${checkbox.label!}\n         </p>\n       </#list>\n       <#if field.allowOther>\n         <input type=\"checkbox\" name=\"${field.formRelativeUniqueName}\" class=\"${field.styleClass!}\" value=\"${field.renderOtherValue!}\"\n           <#if field.otherValue>checked=\"true\"</#if>\n-               aria-describedby=\"${field.formRelativeUniqueName}-hint ${field.formRelativeUniqueName}-error\"/>\n+               aria-describedby=\"${field.formRelativeUniqueName}-hint\"/>\n         Other:\n         <span>\n           <input type=\"text\" value=\"<#if field.otherValue>${field.value!}</#if>\" name=\"${field.otherFieldName!}\" class=\"textfield-other\"\n                  <#if (field.length > 0)>size=\"${field.length}\"</#if> <#if (field.maxLength > 0)>maxlength=\"${field.maxLength}\"</#if>\n-          aria-describedby=\"${field.formRelativeUniqueName}-hint ${field.formRelativeUniqueName}-error\"/>\n+          aria-describedby=\"${field.formRelativeUniqueName}-hint\"/>\n         </span>\n       </#if>\n-      <span class=\"nhsuk-hint\" id=\"${field.formRelativeUniqueName}-hint\">${field.hint!}</span>\n     </div>\n \n   <#elseif field.type == \"likert\">\n \n     <div class=\"<@renderCss field=field />\">\n       <input type=\"hidden\" name=\"${field.formRelativeUniqueName}\"/>\n       <label class=\"nhsuk-label\">${field.label!}</label>\n+      <span class=\"nhsuk-hint\" id=\"${field.formRelativeUniqueName}-hint\">${field.hint!}</span>\n       <span class=\"nhsuk-error-message\" id=\"${field.formRelativeUniqueName}-error\"></span>\n       <table class=\"eforms-likert-table\">\n         <tr>\n@@ -195,7 +196,6 @@\n           </tr>\n         </#list>\n       </table>\n-      <span class=\"nhsuk-hint\" id=\"${field.formRelativeUniqueName}-hint\">${field.hint!}</span>\n     </div>\n \n   <#elseif field.type == \"antispam\">"
  },
  {
    "sha": "9a33d571ebce209f58754d8a09d9e58363542c1a",
    "filename": "repository-data/webfiles/src/main/resources/site/freemarker/hee/eforms/eforms.ftl",
    "status": "modified",
    "additions": 3,
    "deletions": 0,
    "changes": 3,
    "blob_url": "https://github.com/Manifesto-Digital/hee-cms-platform/blob/916a9a276386291af7037a65c3316a9e4505d6c2/repository-data/webfiles/src/main/resources/site/freemarker/hee/eforms/eforms.ftl",
    "raw_url": "https://github.com/Manifesto-Digital/hee-cms-platform/raw/916a9a276386291af7037a65c3316a9e4505d6c2/repository-data/webfiles/src/main/resources/site/freemarker/hee/eforms/eforms.ftl",
    "contents_url": "https://api.github.com/repos/Manifesto-Digital/hee-cms-platform/contents/repository-data/webfiles/src/main/resources/site/freemarker/hee/eforms/eforms.ftl?ref=916a9a276386291af7037a65c3316a9e4505d6c2",
    "patch": "@@ -332,6 +332,7 @@\n                                         $('#' + errorKey + '-error').html('<span class=\"nhsuk-u-visually-hidden\">Error:</span>' + errorMessage.localizedMessage);\n                                         const inputField = $('#' + errorKey);\n                                         inputField.addClass(\"nhsuk-input--error\");\n+                                        inputField.attr(\"aria-describedby\", errorKey + \"-hint \" + errorKey + \"-error\");\n                                         inputField.parent().addClass(\"nhsuk-form-group--error\");\n                                     }\n                                 }\n@@ -341,6 +342,7 @@\n                                     $('#' + key + '-error').html(\"\");\n                                     const inputField = $('#' + key);\n                                     inputField.removeClass(\"nhsuk-input--error\");\n+                                    inputField.attr(\"aria-describedby\", key + \"-hint\");\n                                     inputField.parent().removeClass(\"nhsuk-form-group--error\");\n                                 }\n                             }\n@@ -545,6 +547,7 @@\n                                     $('#' + fieldName + '-error').html('<span class=\"nhsuk-u-visually-hidden\">Error:</span>' + errorMessage.localizedMessage);\n                                     const inputField = $('#' + fieldName);\n                                     inputField.addClass(\"nhsuk-input--error\");\n+                                    inputField.attr(\"aria-describedby\", fieldName + \"-hint \" + fieldName + \"-error\");\n                                     inputField.parent().addClass(\"nhsuk-form-group--error\");\n                                     count++;\n                                 }"
  }
]
