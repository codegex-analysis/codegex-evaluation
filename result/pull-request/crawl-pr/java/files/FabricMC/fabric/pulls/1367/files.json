[
  {
    "sha": "438721d17deb5c2cc073f54e4779d056c0ceb044",
    "filename": "fabric-item-api-v1/src/main/java/net/fabricmc/fabric/api/item/v1/ShotProjectileEvents.java",
    "status": "added",
    "additions": 81,
    "deletions": 0,
    "changes": 81,
    "blob_url": "https://github.com/FabricMC/fabric/blob/55d476415e54f54bb25a100de0a62e9f55f4f6b6/fabric-item-api-v1/src/main/java/net/fabricmc/fabric/api/item/v1/ShotProjectileEvents.java",
    "raw_url": "https://github.com/FabricMC/fabric/raw/55d476415e54f54bb25a100de0a62e9f55f4f6b6/fabric-item-api-v1/src/main/java/net/fabricmc/fabric/api/item/v1/ShotProjectileEvents.java",
    "contents_url": "https://api.github.com/repos/FabricMC/fabric/contents/fabric-item-api-v1/src/main/java/net/fabricmc/fabric/api/item/v1/ShotProjectileEvents.java?ref=55d476415e54f54bb25a100de0a62e9f55f4f6b6",
    "patch": "@@ -0,0 +1,81 @@\n+/*\n+ * Copyright (c) 2016, 2017, 2018, 2019 FabricMC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package net.fabricmc.fabric.api.item.v1;\n+\n+import org.jetbrains.annotations.NotNull;\n+\n+import net.minecraft.entity.LivingEntity;\n+import net.minecraft.entity.projectile.PersistentProjectileEntity;\n+import net.minecraft.item.ItemStack;\n+\n+import net.fabricmc.fabric.api.event.Event;\n+import net.fabricmc.fabric.api.event.EventFactory;\n+\n+public final class ShotProjectileEvents {\n+\tprivate ShotProjectileEvents() {\n+\t}\n+\n+\t/**\n+\t * This event modifies the projectile entity shot from a crossbow.\n+\t */\n+\tpublic static final Event<ModifyProjectileFromCrossbow> CROSSBOW_MODIFY_SHOT_PROJECTILE = EventFactory.createArrayBacked(ModifyProjectileFromCrossbow.class, callbacks -> (bowStack, projectileStack, user, persistentProjectileEntity) -> {\n+\t\tfor (ModifyProjectileFromCrossbow callback : callbacks) {\n+\t\t\tcallback.modifyProjectileShot(bowStack, projectileStack, user, persistentProjectileEntity);\n+\t\t}\n+\t});\n+\n+\t/**\n+\t * This event replaces the projectile entity shot from a crossbow. Any modifications done in this step without returning a new entity can be erased.\n+\t * Do not use this event to only modify the arrow entity, as {@link ShotProjectileEvents#CROSSBOW_MODIFY_SHOT_PROJECTILE} is the proper event.\n+\t */\n+\tpublic static final Event<ReplaceProjectileFromCrossbow> CROSSBOW_REPLACE_SHOT_PROJECTILE = EventFactory.createArrayBacked(ReplaceProjectileFromCrossbow.class, callbacks -> (bowStack, projectileStack, user, persistentProjectileEntity) -> {\n+\t\tfor (ReplaceProjectileFromCrossbow callback : callbacks) {\n+\t\t\tPersistentProjectileEntity replacedEntity = callback.replaceProjectileShot(bowStack, projectileStack, user, persistentProjectileEntity);\n+\n+\t\t\tif (replacedEntity != null) {\n+\t\t\t\treturn replacedEntity;\n+\t\t\t}\n+\t\t}\n+\n+\t\treturn persistentProjectileEntity;\n+\t});\n+\n+\tpublic interface ReplaceProjectileFromCrossbow {\n+\t\t/**\n+\t\t * In this method you can replace the arrow shot from your custom crossbow. Applies all of the vanilla arrow modifiers first.\n+\t\t *\n+\t\t * @param crossbowStack              the ItemStack for the Crossbow Item\n+\t\t * @param projectileStack            the ItemStack for the projectile currently being shot\n+\t\t * @param user                       the user of the crossbow\n+\t\t * @param persistentProjectileEntity the arrow entity to be spawned\n+\t\t * @return the new projectile entity. Return {@code null} if you do not change the entity.\n+\t\t */\n+\t\tPersistentProjectileEntity replaceProjectileShot(ItemStack crossbowStack, ItemStack projectileStack, LivingEntity user, @NotNull PersistentProjectileEntity persistentProjectileEntity);\n+\t}\n+\n+\tpublic interface ModifyProjectileFromCrossbow {\n+\t\t/**\n+\t\t * In this method you can modify the behavior of arrows shot from your custom crossbow. Applies all of the vanilla arrow modifiers first.\n+\t\t *\n+\t\t * @param crossbowStack              the ItemStack for the Crossbow Item\n+\t\t * @param projectileStack            the ItemStack for the projectile currently being shot\n+\t\t * @param user                       the user of the crossbow\n+\t\t * @param persistentProjectileEntity the arrow entity to be spawned\n+\t\t */\n+\t\tvoid modifyProjectileShot(ItemStack crossbowStack, ItemStack projectileStack, LivingEntity user, @NotNull PersistentProjectileEntity persistentProjectileEntity);\n+\t}\n+}"
  },
  {
    "sha": "f946ba216b018399b91b5480cb60cf84ddf23b67",
    "filename": "fabric-item-api-v1/src/main/java/net/fabricmc/fabric/api/item/v1/crossbow/FabricCrossbowExtensions.java",
    "status": "added",
    "additions": 60,
    "deletions": 0,
    "changes": 60,
    "blob_url": "https://github.com/FabricMC/fabric/blob/55d476415e54f54bb25a100de0a62e9f55f4f6b6/fabric-item-api-v1/src/main/java/net/fabricmc/fabric/api/item/v1/crossbow/FabricCrossbowExtensions.java",
    "raw_url": "https://github.com/FabricMC/fabric/raw/55d476415e54f54bb25a100de0a62e9f55f4f6b6/fabric-item-api-v1/src/main/java/net/fabricmc/fabric/api/item/v1/crossbow/FabricCrossbowExtensions.java",
    "contents_url": "https://api.github.com/repos/FabricMC/fabric/contents/fabric-item-api-v1/src/main/java/net/fabricmc/fabric/api/item/v1/crossbow/FabricCrossbowExtensions.java?ref=55d476415e54f54bb25a100de0a62e9f55f4f6b6",
    "patch": "@@ -0,0 +1,60 @@\n+/*\n+ * Copyright (c) 2016, 2017, 2018, 2019 FabricMC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package net.fabricmc.fabric.api.item.v1.crossbow;\n+\n+import org.jetbrains.annotations.NotNull;\n+\n+import net.minecraft.entity.LivingEntity;\n+import net.minecraft.entity.projectile.PersistentProjectileEntity;\n+import net.minecraft.item.CrossbowItem;\n+import net.minecraft.item.Item;\n+import net.minecraft.item.ItemStack;\n+import net.minecraft.item.Items;\n+\n+import net.fabricmc.fabric.api.item.v1.ShotProjectileEvents;\n+\n+/**\n+ * An interface to implement on all custom crossbows. <br>\n+ * Note: This is meant to be used on a CrossbowItem class, otherwise the functionality won't work\n+ *\n+ * @see SimpleCrossbowItem\n+ */\n+public interface FabricCrossbowExtensions extends ShotProjectileEvents.ModifyProjectileFromCrossbow {\n+\t/**\n+\t * Allows editing of the projectile entity shot from the crossbow. Applies all crossbow\n+\t * projectile properties first.\n+\t *\n+\t * @param crossbowStack              the ItemStack for the crossbow\n+\t * @param projectileStack            the stack for the projectile\n+\t * @param entity                     the entity shooting the crossbow\n+\t * @param persistentProjectileEntity the projectile entity to be shot\n+\t */\n+\tvoid modifyProjectileShot(ItemStack crossbowStack, ItemStack projectileStack, LivingEntity entity, @NotNull PersistentProjectileEntity persistentProjectileEntity);\n+\n+\t/**\n+\t * Allows modifying the speed of the crossbow projectile. <br>\n+\t * To get the projectile from the crossbow, call {@link CrossbowItem#hasProjectile(ItemStack, Item)} passing in {@code stack} and the {@link Item} for the projectile. <br>\n+\t * The default implementation follows the vanilla values for the projectiles\n+\t *\n+\t * @param stack  the ItemStack for the crossbow\n+\t * @param entity the Entity shooting the crossbow\n+\t * @return the speed of the projectile\n+\t */\n+\tdefault float getProjectileSpeed(ItemStack stack, LivingEntity entity) {\n+\t\treturn stack.getItem() == Items.CROSSBOW && CrossbowItem.hasProjectile(stack, Items.FIREWORK_ROCKET) ? 1.6F : 3.15F;\n+\t}\n+}"
  },
  {
    "sha": "ab93a36ebb5285f68d7661b79ce46d272d2d965d",
    "filename": "fabric-item-api-v1/src/main/java/net/fabricmc/fabric/api/item/v1/crossbow/SimpleCrossbowItem.java",
    "status": "added",
    "additions": 43,
    "deletions": 0,
    "changes": 43,
    "blob_url": "https://github.com/FabricMC/fabric/blob/55d476415e54f54bb25a100de0a62e9f55f4f6b6/fabric-item-api-v1/src/main/java/net/fabricmc/fabric/api/item/v1/crossbow/SimpleCrossbowItem.java",
    "raw_url": "https://github.com/FabricMC/fabric/raw/55d476415e54f54bb25a100de0a62e9f55f4f6b6/fabric-item-api-v1/src/main/java/net/fabricmc/fabric/api/item/v1/crossbow/SimpleCrossbowItem.java",
    "contents_url": "https://api.github.com/repos/FabricMC/fabric/contents/fabric-item-api-v1/src/main/java/net/fabricmc/fabric/api/item/v1/crossbow/SimpleCrossbowItem.java?ref=55d476415e54f54bb25a100de0a62e9f55f4f6b6",
    "patch": "@@ -0,0 +1,43 @@\n+/*\n+ * Copyright (c) 2016, 2017, 2018, 2019 FabricMC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package net.fabricmc.fabric.api.item.v1.crossbow;\n+\n+import org.jetbrains.annotations.NotNull;\n+\n+import net.minecraft.entity.LivingEntity;\n+import net.minecraft.entity.projectile.PersistentProjectileEntity;\n+import net.minecraft.item.CrossbowItem;\n+import net.minecraft.item.ItemStack;\n+\n+/**\n+ * This is the default implementation for FabricCrossbow, allowing for the easy creation of new bows with no new modded functionality.\n+ */\n+public class SimpleCrossbowItem extends CrossbowItem implements FabricCrossbowExtensions {\n+\tpublic SimpleCrossbowItem(Settings settings) {\n+\t\tsuper(settings);\n+\t}\n+\n+\t@Override\n+\tpublic void modifyProjectileShot(ItemStack crossbowStack, ItemStack projectileStack, LivingEntity user, @NotNull PersistentProjectileEntity persistentProjectileEntity) {\n+\t\tif (crossbowStack.getItem() == this) {\n+\t\t\tonProjectileShot(crossbowStack, projectileStack, user, persistentProjectileEntity);\n+\t\t}\n+\t}\n+\n+\tpublic void onProjectileShot(ItemStack bowStack, ItemStack arrowStack, LivingEntity user, PersistentProjectileEntity persistentProjectileEntity) {\n+\t}\n+}"
  },
  {
    "sha": "6c0174dd99ebfbf749507ad58ea57ae591ff9074",
    "filename": "fabric-item-api-v1/src/main/java/net/fabricmc/fabric/mixin/crossbow/CrossbowItemMixin.java",
    "status": "added",
    "additions": 52,
    "deletions": 0,
    "changes": 52,
    "blob_url": "https://github.com/FabricMC/fabric/blob/55d476415e54f54bb25a100de0a62e9f55f4f6b6/fabric-item-api-v1/src/main/java/net/fabricmc/fabric/mixin/crossbow/CrossbowItemMixin.java",
    "raw_url": "https://github.com/FabricMC/fabric/raw/55d476415e54f54bb25a100de0a62e9f55f4f6b6/fabric-item-api-v1/src/main/java/net/fabricmc/fabric/mixin/crossbow/CrossbowItemMixin.java",
    "contents_url": "https://api.github.com/repos/FabricMC/fabric/contents/fabric-item-api-v1/src/main/java/net/fabricmc/fabric/mixin/crossbow/CrossbowItemMixin.java?ref=55d476415e54f54bb25a100de0a62e9f55f4f6b6",
    "patch": "@@ -0,0 +1,52 @@\n+/*\n+ * Copyright (c) 2016, 2017, 2018, 2019 FabricMC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package net.fabricmc.fabric.mixin.crossbow;\n+\n+import org.spongepowered.asm.mixin.Mixin;\n+import org.spongepowered.asm.mixin.injection.At;\n+import org.spongepowered.asm.mixin.injection.Inject;\n+import org.spongepowered.asm.mixin.injection.Redirect;\n+import org.spongepowered.asm.mixin.injection.callback.CallbackInfoReturnable;\n+import org.spongepowered.asm.mixin.injection.callback.LocalCapture;\n+\n+import net.minecraft.entity.LivingEntity;\n+import net.minecraft.entity.projectile.PersistentProjectileEntity;\n+import net.minecraft.item.ArrowItem;\n+import net.minecraft.item.CrossbowItem;\n+import net.minecraft.item.ItemStack;\n+import net.minecraft.util.Hand;\n+import net.minecraft.world.World;\n+\n+import net.fabricmc.fabric.api.item.v1.ShotProjectileEvents;\n+import net.fabricmc.fabric.api.item.v1.crossbow.FabricCrossbowExtensions;\n+\n+@Mixin(CrossbowItem.class)\n+public abstract class CrossbowItemMixin {\n+\t@Inject(method = \"createArrow\", at = @At(value = \"RETURN\"), locals = LocalCapture.CAPTURE_FAILSOFT, cancellable = true)\n+\tprivate static void createArrow(World world, LivingEntity entity, ItemStack crossbow, ItemStack projectileStack, CallbackInfoReturnable<PersistentProjectileEntity> cir, ArrowItem arrowItem, PersistentProjectileEntity persistentProjectileEntity) {\n+\t\tpersistentProjectileEntity = ShotProjectileEvents.CROSSBOW_REPLACE_SHOT_PROJECTILE.invoker().replaceProjectileShot(crossbow, projectileStack, entity, persistentProjectileEntity);\n+\t\tShotProjectileEvents.CROSSBOW_MODIFY_SHOT_PROJECTILE.invoker().modifyProjectileShot(crossbow, projectileStack, entity, persistentProjectileEntity);\n+\t\tcir.setReturnValue(persistentProjectileEntity);\n+\t}\n+\n+\t//Redirecting this method in order to get the item stack and shooting entity\n+\t@Redirect(method = \"use\", at = @At(value = \"INVOKE\", target = \"Lnet/minecraft/item/CrossbowItem;shootAll(Lnet/minecraft/world/World;Lnet/minecraft/entity/LivingEntity;Lnet/minecraft/util/Hand;Lnet/minecraft/item/ItemStack;FF)V\"))\n+\tprivate void shootAll(World world, LivingEntity entity, Hand hand, ItemStack stack, float speed, float divergence) {\n+\t\tfloat newSpeed = stack.getItem() instanceof FabricCrossbowExtensions ? ((FabricCrossbowExtensions) stack.getItem()).getProjectileSpeed(stack, entity) : speed;\n+\t\tCrossbowItem.shootAll(world, entity, hand, stack, newSpeed, 1.0F);\n+\t}\n+}"
  },
  {
    "sha": "bfa8185dcb7370ee0757c578f62c5d020ba5e469",
    "filename": "fabric-item-api-v1/src/main/java/net/fabricmc/fabric/mixin/crossbow/EntityUseCrossbowMixin.java",
    "status": "added",
    "additions": 38,
    "deletions": 0,
    "changes": 38,
    "blob_url": "https://github.com/FabricMC/fabric/blob/55d476415e54f54bb25a100de0a62e9f55f4f6b6/fabric-item-api-v1/src/main/java/net/fabricmc/fabric/mixin/crossbow/EntityUseCrossbowMixin.java",
    "raw_url": "https://github.com/FabricMC/fabric/raw/55d476415e54f54bb25a100de0a62e9f55f4f6b6/fabric-item-api-v1/src/main/java/net/fabricmc/fabric/mixin/crossbow/EntityUseCrossbowMixin.java",
    "contents_url": "https://api.github.com/repos/FabricMC/fabric/contents/fabric-item-api-v1/src/main/java/net/fabricmc/fabric/mixin/crossbow/EntityUseCrossbowMixin.java?ref=55d476415e54f54bb25a100de0a62e9f55f4f6b6",
    "patch": "@@ -0,0 +1,38 @@\n+/*\n+ * Copyright (c) 2016, 2017, 2018, 2019 FabricMC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package net.fabricmc.fabric.mixin.crossbow;\n+\n+import org.spongepowered.asm.mixin.Mixin;\n+import org.spongepowered.asm.mixin.injection.At;\n+import org.spongepowered.asm.mixin.injection.Inject;\n+import org.spongepowered.asm.mixin.injection.callback.CallbackInfoReturnable;\n+\n+import net.minecraft.entity.mob.PiglinEntity;\n+import net.minecraft.entity.mob.PillagerEntity;\n+import net.minecraft.item.CrossbowItem;\n+import net.minecraft.item.RangedWeaponItem;\n+\n+// Allows Crossbow users to use custom crossbows\n+@Mixin({PiglinEntity.class, PillagerEntity.class})\n+public class EntityUseCrossbowMixin {\n+\t@Inject(method = \"canUseRangedWeapon\", at = @At(\"HEAD\"))\n+\tpublic void canUseRangedWeapon(RangedWeaponItem weapon, CallbackInfoReturnable<Boolean> cir) {\n+\t\tif (weapon instanceof CrossbowItem) {\n+\t\t\tcir.setReturnValue(true);\n+\t\t}\n+\t}\n+}"
  },
  {
    "sha": "35558648964db105eede00a5169fbc2fe25fa209",
    "filename": "fabric-item-api-v1/src/main/java/net/fabricmc/fabric/mixin/crossbow/client/PlayerEntityRendererMixin.java",
    "status": "added",
    "additions": 46,
    "deletions": 0,
    "changes": 46,
    "blob_url": "https://github.com/FabricMC/fabric/blob/55d476415e54f54bb25a100de0a62e9f55f4f6b6/fabric-item-api-v1/src/main/java/net/fabricmc/fabric/mixin/crossbow/client/PlayerEntityRendererMixin.java",
    "raw_url": "https://github.com/FabricMC/fabric/raw/55d476415e54f54bb25a100de0a62e9f55f4f6b6/fabric-item-api-v1/src/main/java/net/fabricmc/fabric/mixin/crossbow/client/PlayerEntityRendererMixin.java",
    "contents_url": "https://api.github.com/repos/FabricMC/fabric/contents/fabric-item-api-v1/src/main/java/net/fabricmc/fabric/mixin/crossbow/client/PlayerEntityRendererMixin.java?ref=55d476415e54f54bb25a100de0a62e9f55f4f6b6",
    "patch": "@@ -0,0 +1,46 @@\n+/*\n+ * Copyright (c) 2016, 2017, 2018, 2019 FabricMC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package net.fabricmc.fabric.mixin.crossbow.client;\n+\n+import org.spongepowered.asm.mixin.Mixin;\n+import org.spongepowered.asm.mixin.injection.At;\n+import org.spongepowered.asm.mixin.injection.Inject;\n+import org.spongepowered.asm.mixin.injection.callback.CallbackInfoReturnable;\n+\n+import net.minecraft.client.network.AbstractClientPlayerEntity;\n+import net.minecraft.client.render.entity.PlayerEntityRenderer;\n+import net.minecraft.client.render.entity.model.BipedEntityModel;\n+import net.minecraft.item.CrossbowItem;\n+import net.minecraft.item.ItemStack;\n+import net.minecraft.util.Hand;\n+\n+import net.fabricmc.api.EnvType;\n+import net.fabricmc.api.Environment;\n+import net.fabricmc.fabric.api.item.v1.crossbow.FabricCrossbowExtensions;\n+\n+@Environment(EnvType.CLIENT)\n+@Mixin(PlayerEntityRenderer.class)\n+public class PlayerEntityRendererMixin {\n+\t@Inject(method = \"getArmPose\", at = @At(\"HEAD\"), cancellable = true)\n+\tprivate static void getArmPose(AbstractClientPlayerEntity abstractClientPlayerEntity, Hand hand, CallbackInfoReturnable<BipedEntityModel.ArmPose> cir) {\n+\t\tItemStack stackInHand = abstractClientPlayerEntity.getStackInHand(hand);\n+\n+\t\tif (!abstractClientPlayerEntity.handSwinging && stackInHand.getItem() instanceof FabricCrossbowExtensions && CrossbowItem.isCharged(stackInHand)) {\n+\t\t\tcir.setReturnValue(BipedEntityModel.ArmPose.CROSSBOW_HOLD);\n+\t\t}\n+\t}\n+}"
  },
  {
    "sha": "8754c8a6884a8deee63221afafeee5a7338c36e3",
    "filename": "fabric-item-api-v1/src/main/java/net/fabricmc/fabric/mixin/item/ProjectileUtilMixin.java",
    "status": "added",
    "additions": 49,
    "deletions": 0,
    "changes": 49,
    "blob_url": "https://github.com/FabricMC/fabric/blob/55d476415e54f54bb25a100de0a62e9f55f4f6b6/fabric-item-api-v1/src/main/java/net/fabricmc/fabric/mixin/item/ProjectileUtilMixin.java",
    "raw_url": "https://github.com/FabricMC/fabric/raw/55d476415e54f54bb25a100de0a62e9f55f4f6b6/fabric-item-api-v1/src/main/java/net/fabricmc/fabric/mixin/item/ProjectileUtilMixin.java",
    "contents_url": "https://api.github.com/repos/FabricMC/fabric/contents/fabric-item-api-v1/src/main/java/net/fabricmc/fabric/mixin/item/ProjectileUtilMixin.java?ref=55d476415e54f54bb25a100de0a62e9f55f4f6b6",
    "patch": "@@ -0,0 +1,49 @@\n+/*\n+ * Copyright (c) 2016, 2017, 2018, 2019 FabricMC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package net.fabricmc.fabric.mixin.item;\n+\n+import org.spongepowered.asm.mixin.Mixin;\n+import org.spongepowered.asm.mixin.injection.At;\n+import org.spongepowered.asm.mixin.injection.Inject;\n+import org.spongepowered.asm.mixin.injection.callback.CallbackInfoReturnable;\n+\n+import net.minecraft.entity.LivingEntity;\n+import net.minecraft.entity.projectile.ProjectileUtil;\n+import net.minecraft.item.Item;\n+import net.minecraft.item.Items;\n+import net.minecraft.util.Hand;\n+\n+import net.fabricmc.fabric.api.item.v1.crossbow.FabricCrossbowExtensions;\n+\n+@Mixin(ProjectileUtil.class)\n+public abstract class ProjectileUtilMixin {\n+\tprivate static final Hand[] HANDS = {Hand.MAIN_HAND, Hand.OFF_HAND}; // Cache the hands to not create the hands array each time the loop is run\n+\n+\t// Because the uses of this method are hardcoded, checking each hand for the Fabric interfaces of the items is needed.\n+\t// Note: this does not cancel for the vanilla items unless they are holding a custom implementation of the items\n+\t@Inject(method = \"getHandPossiblyHolding\", at = @At(value = \"HEAD\"), cancellable = true)\n+\tprivate static void getHandPossiblyHolding(LivingEntity entity, Item item, CallbackInfoReturnable<Hand> cir) {\n+\t\tfor (Hand hand : HANDS) {\n+\t\t\tif (item == Items.CROSSBOW) { // Make sure we only check for crossbows when searching for crossbows and allow for other items like bows in future\n+\t\t\t\tif (entity.getStackInHand(hand).getItem() instanceof FabricCrossbowExtensions) {\n+\t\t\t\t\tcir.setReturnValue(hand);\n+\t\t\t\t\treturn;\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t}\n+}"
  },
  {
    "sha": "8d0d21d0d487264dc8b11ac9251ebf642144394d",
    "filename": "fabric-item-api-v1/src/main/java/net/fabricmc/fabric/mixin/item/client/HeldItemRendererMixin.java",
    "status": "added",
    "additions": 45,
    "deletions": 0,
    "changes": 45,
    "blob_url": "https://github.com/FabricMC/fabric/blob/55d476415e54f54bb25a100de0a62e9f55f4f6b6/fabric-item-api-v1/src/main/java/net/fabricmc/fabric/mixin/item/client/HeldItemRendererMixin.java",
    "raw_url": "https://github.com/FabricMC/fabric/raw/55d476415e54f54bb25a100de0a62e9f55f4f6b6/fabric-item-api-v1/src/main/java/net/fabricmc/fabric/mixin/item/client/HeldItemRendererMixin.java",
    "contents_url": "https://api.github.com/repos/FabricMC/fabric/contents/fabric-item-api-v1/src/main/java/net/fabricmc/fabric/mixin/item/client/HeldItemRendererMixin.java?ref=55d476415e54f54bb25a100de0a62e9f55f4f6b6",
    "patch": "@@ -0,0 +1,45 @@\n+/*\n+ * Copyright (c) 2016, 2017, 2018, 2019 FabricMC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package net.fabricmc.fabric.mixin.item.client;\n+\n+import org.spongepowered.asm.mixin.Mixin;\n+import org.spongepowered.asm.mixin.injection.At;\n+import org.spongepowered.asm.mixin.injection.Redirect;\n+\n+import net.minecraft.client.render.item.HeldItemRenderer;\n+import net.minecraft.item.Item;\n+import net.minecraft.item.ItemStack;\n+import net.minecraft.item.Items;\n+\n+import net.fabricmc.fabric.api.item.v1.crossbow.FabricCrossbowExtensions;\n+\n+@Mixin(HeldItemRenderer.class)\n+public class HeldItemRendererMixin {\n+\t@Redirect(method = \"renderFirstPersonItem\", at = @At(value = \"INVOKE\", target = \"Lnet/minecraft/item/ItemStack;getItem()Lnet/minecraft/item/Item;\"))\n+\tprivate Item renderFirstPersonItem(ItemStack heldItem) {\n+\t\tif (heldItem.getItem() instanceof FabricCrossbowExtensions) {\n+\t\t\treturn Items.CROSSBOW; // Return true to invoke crossbow rendering path\n+\t\t}\n+\n+\t\treturn heldItem.getItem();\n+\t}\n+\n+\t@Redirect(method = \"renderItem(FLnet/minecraft/client/util/math/MatrixStack;Lnet/minecraft/client/render/VertexConsumerProvider$Immediate;Lnet/minecraft/client/network/ClientPlayerEntity;I)V\", at = @At(value = \"INVOKE\", target = \"Lnet/minecraft/item/ItemStack;getItem()Lnet/minecraft/item/Item;\"))\n+\tprivate Item renderItem(ItemStack heldItem) {\n+\t\treturn (heldItem.getItem() instanceof FabricCrossbowExtensions) ? Items.CROSSBOW : heldItem.getItem();\n+\t}\n+}"
  },
  {
    "sha": "f5b407ec6af6e7658036496770a20c8ee78c2714",
    "filename": "fabric-item-api-v1/src/main/resources/fabric-item-api-v1-crossbow.mixins.json",
    "status": "added",
    "additions": 15,
    "deletions": 0,
    "changes": 15,
    "blob_url": "https://github.com/FabricMC/fabric/blob/55d476415e54f54bb25a100de0a62e9f55f4f6b6/fabric-item-api-v1/src/main/resources/fabric-item-api-v1-crossbow.mixins.json",
    "raw_url": "https://github.com/FabricMC/fabric/raw/55d476415e54f54bb25a100de0a62e9f55f4f6b6/fabric-item-api-v1/src/main/resources/fabric-item-api-v1-crossbow.mixins.json",
    "contents_url": "https://api.github.com/repos/FabricMC/fabric/contents/fabric-item-api-v1/src/main/resources/fabric-item-api-v1-crossbow.mixins.json?ref=55d476415e54f54bb25a100de0a62e9f55f4f6b6",
    "patch": "@@ -0,0 +1,15 @@\n+{\n+  \"required\": true,\n+  \"package\": \"net.fabricmc.fabric.mixin.crossbow\",\n+  \"compatibilityLevel\": \"JAVA_8\",\n+  \"mixins\": [\n+    \"CrossbowItemMixin\",\n+    \"EntityUseCrossbowMixin\"\n+  ],\n+  \"client\": [\n+    \"client.PlayerEntityRendererMixin\"\n+  ],\n+  \"injectors\": {\n+    \"defaultRequire\": 1\n+  }\n+}"
  },
  {
    "sha": "196be8b76e2c0d329bea22f205559bc0d7615ef4",
    "filename": "fabric-item-api-v1/src/main/resources/fabric-item-api-v1.mixins.json",
    "status": "modified",
    "additions": 3,
    "deletions": 1,
    "changes": 4,
    "blob_url": "https://github.com/FabricMC/fabric/blob/55d476415e54f54bb25a100de0a62e9f55f4f6b6/fabric-item-api-v1/src/main/resources/fabric-item-api-v1.mixins.json",
    "raw_url": "https://github.com/FabricMC/fabric/raw/55d476415e54f54bb25a100de0a62e9f55f4f6b6/fabric-item-api-v1/src/main/resources/fabric-item-api-v1.mixins.json",
    "contents_url": "https://api.github.com/repos/FabricMC/fabric/contents/fabric-item-api-v1/src/main/resources/fabric-item-api-v1.mixins.json?ref=55d476415e54f54bb25a100de0a62e9f55f4f6b6",
    "patch": "@@ -5,9 +5,11 @@\n   \"mixins\": [\n     \"ItemStackMixin\",\n     \"ItemMixin\",\n-    \"MobEntityMixin\"\n+    \"MobEntityMixin\",\n+    \"ProjectileUtilMixin\"\n   ],\n   \"client\": [\n+    \"client.HeldItemRendererMixin\",\n     \"client.ItemStackMixin\"\n   ],\n   \"injectors\": {"
  },
  {
    "sha": "a5c5f14c957f63410f90514de6bc5face9180382",
    "filename": "fabric-item-api-v1/src/main/resources/fabric.mod.json",
    "status": "modified",
    "additions": 2,
    "deletions": 1,
    "changes": 3,
    "blob_url": "https://github.com/FabricMC/fabric/blob/55d476415e54f54bb25a100de0a62e9f55f4f6b6/fabric-item-api-v1/src/main/resources/fabric.mod.json",
    "raw_url": "https://github.com/FabricMC/fabric/raw/55d476415e54f54bb25a100de0a62e9f55f4f6b6/fabric-item-api-v1/src/main/resources/fabric.mod.json",
    "contents_url": "https://api.github.com/repos/FabricMC/fabric/contents/fabric-item-api-v1/src/main/resources/fabric.mod.json?ref=55d476415e54f54bb25a100de0a62e9f55f4f6b6",
    "patch": "@@ -16,7 +16,8 @@\n     \"FabricMC\"\n   ],\n   \"mixins\": [\n-    \"fabric-item-api-v1.mixins.json\"\n+    \"fabric-item-api-v1.mixins.json\",\n+    \"fabric-item-api-v1-crossbow.mixins.json\"\n   ],\n   \"depends\": {\n     \"fabricloader\": \">=0.4.0\","
  },
  {
    "sha": "f558e3d6eb647cd00f705cfa01da3d108ae1c8f1",
    "filename": "fabric-item-api-v1/src/testmod/java/net/fabricmc/fabric/test/item/FabricCrossbowTests.java",
    "status": "added",
    "additions": 50,
    "deletions": 0,
    "changes": 50,
    "blob_url": "https://github.com/FabricMC/fabric/blob/55d476415e54f54bb25a100de0a62e9f55f4f6b6/fabric-item-api-v1/src/testmod/java/net/fabricmc/fabric/test/item/FabricCrossbowTests.java",
    "raw_url": "https://github.com/FabricMC/fabric/raw/55d476415e54f54bb25a100de0a62e9f55f4f6b6/fabric-item-api-v1/src/testmod/java/net/fabricmc/fabric/test/item/FabricCrossbowTests.java",
    "contents_url": "https://api.github.com/repos/FabricMC/fabric/contents/fabric-item-api-v1/src/testmod/java/net/fabricmc/fabric/test/item/FabricCrossbowTests.java?ref=55d476415e54f54bb25a100de0a62e9f55f4f6b6",
    "patch": "@@ -0,0 +1,50 @@\n+/*\n+ * Copyright (c) 2016, 2017, 2018, 2019 FabricMC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package net.fabricmc.fabric.test.item;\n+\n+import org.jetbrains.annotations.NotNull;\n+\n+import net.minecraft.entity.LivingEntity;\n+import net.minecraft.entity.projectile.PersistentProjectileEntity;\n+import net.minecraft.item.Item;\n+import net.minecraft.item.ItemGroup;\n+import net.minecraft.item.ItemStack;\n+import net.minecraft.util.Identifier;\n+import net.minecraft.util.registry.Registry;\n+\n+import net.fabricmc.api.ModInitializer;\n+import net.fabricmc.fabric.api.item.v1.crossbow.SimpleCrossbowItem;\n+\n+public class FabricCrossbowTests implements ModInitializer {\n+\tpublic static final Item TEST_CROSSBOW = new SimpleCrossbowItem(new Item.Settings().group(ItemGroup.COMBAT)) {\n+\t\t@Override\n+\t\tpublic void modifyProjectileShot(ItemStack crossbowStack, ItemStack projectileStack, LivingEntity entity, @NotNull PersistentProjectileEntity persistentProjectileEntity) {\n+\t\t\tpersistentProjectileEntity.setDamage(1000);\n+\t\t}\n+\n+\t\t@Override\n+\t\tpublic float getProjectileSpeed(ItemStack stack, LivingEntity entity) {\n+\t\t\treturn 10f;\n+\t\t}\n+\t};\n+\n+\t@Override\n+\tpublic void onInitialize() {\n+\t\t// Registers a custom crossbow.\n+\t\tRegistry.register(Registry.ITEM, new Identifier(\"fabric-extensibility-api-v1-testmod\", \"test_crossbow\"), TEST_CROSSBOW);\n+\t}\n+}"
  },
  {
    "sha": "549f664115c57925ccde93211ec5728147c9f187",
    "filename": "fabric-item-api-v1/src/testmod/resources/fabric.mod.json",
    "status": "modified",
    "additions": 3,
    "deletions": 4,
    "changes": 7,
    "blob_url": "https://github.com/FabricMC/fabric/blob/55d476415e54f54bb25a100de0a62e9f55f4f6b6/fabric-item-api-v1/src/testmod/resources/fabric.mod.json",
    "raw_url": "https://github.com/FabricMC/fabric/raw/55d476415e54f54bb25a100de0a62e9f55f4f6b6/fabric-item-api-v1/src/testmod/resources/fabric.mod.json",
    "contents_url": "https://api.github.com/repos/FabricMC/fabric/contents/fabric-item-api-v1/src/testmod/resources/fabric.mod.json?ref=55d476415e54f54bb25a100de0a62e9f55f4f6b6",
    "patch": "@@ -10,13 +10,12 @@\n   },\n   \"entrypoints\": {\n     \"main\": [\n-      \"net.fabricmc.fabric.test.item.FabricItemSettingsTests\"\n+      \"net.fabricmc.fabric.test.item.FabricItemSettingsTests\",\n+      \"net.fabricmc.fabric.test.item.CustomDamageTest\",\n+      \"net.fabricmc.fabric.test.item.FabricCrossbowTests\"\n     ],\n     \"client\": [\n       \"net.fabricmc.fabric.test.item.client.TooltipTests\"\n-    ],\n-    \"main\": [\n-      \"net.fabricmc.fabric.test.item.CustomDamageTest\"\n     ]\n   }\n }"
  }
]
