[
  {
    "sha": "9fa6604ee2061e8c486c68f12f77cb9664d52ebf",
    "filename": "openmrs-client/src/main/java/org/openmrs/mobile/activities/patientdashboard/details/PatientDetailsFragment.java",
    "status": "modified",
    "additions": 34,
    "deletions": 27,
    "changes": 61,
    "blob_url": "https://github.com/openmrs/openmrs-contrib-android-client/blob/7b35893bef083bd6bd1eb1072047bb40baa1264a/openmrs-client/src/main/java/org/openmrs/mobile/activities/patientdashboard/details/PatientDetailsFragment.java",
    "raw_url": "https://github.com/openmrs/openmrs-contrib-android-client/raw/7b35893bef083bd6bd1eb1072047bb40baa1264a/openmrs-client/src/main/java/org/openmrs/mobile/activities/patientdashboard/details/PatientDetailsFragment.java",
    "contents_url": "https://api.github.com/repos/openmrs/openmrs-contrib-android-client/contents/openmrs-client/src/main/java/org/openmrs/mobile/activities/patientdashboard/details/PatientDetailsFragment.java?ref=7b35893bef083bd6bd1eb1072047bb40baa1264a",
    "patch": "@@ -35,15 +35,16 @@\n import org.openmrs.mobile.activities.patientdashboard.PatientDashboardActivity;\n import org.openmrs.mobile.activities.patientdashboard.PatientDashboardContract;\n import org.openmrs.mobile.activities.patientdashboard.PatientDashboardFragment;\n+import org.openmrs.mobile.databinding.FragmentPatientDetailsBinding;\n import org.openmrs.mobile.models.Patient;\n import org.openmrs.mobile.utilities.DateUtils;\n import org.openmrs.mobile.utilities.ImageUtils;\n import org.openmrs.mobile.utilities.StringUtils;\n import org.openmrs.mobile.utilities.ToastUtil;\n \n public class PatientDetailsFragment extends PatientDashboardFragment implements PatientDashboardContract.ViewPatientDetails {\n-    private View rootView;\n-    private PatientDashboardActivity mPatientDashboardActivity;\n+    private PatientDashboardActivity patientDashboardActivity;\n+    private FragmentPatientDetailsBinding binding = null;\n \n     public static PatientDetailsFragment newInstance() {\n         return new PatientDetailsFragment();\n@@ -57,7 +58,7 @@ public void attachSnackbarToActivity() {\n     @Override\n     public void onAttach(@NotNull Context context) {\n         super.onAttach(context);\n-        mPatientDashboardActivity = (PatientDashboardActivity) context;\n+        patientDashboardActivity = (PatientDashboardActivity) context;\n     }\n \n     @Override\n@@ -88,20 +89,20 @@ public boolean onOptionsItemSelected(MenuItem item) {\n \n     @Override\n     public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\n-        rootView = inflater.inflate(R.layout.fragment_patient_details, null, false);\n-        return rootView;\n+        binding = FragmentPatientDetailsBinding.inflate(inflater, null, false);\n+        return binding.getRoot();\n     }\n \n     @Override\n     public void resolvePatientDataDisplay(final Patient patient) {\n         if (isAdded()) {\n             if ((\"M\").equals(patient.getGender())) {\n-                ((TextView) rootView.findViewById(R.id.patientDetailsGender)).setText(getString(R.string.male));\n+                binding.patientDetailsGender.setText(getString(R.string.male));\n             } else {\n-                ((TextView) rootView.findViewById(R.id.patientDetailsGender)).setText(getString(R.string.female));\n+                binding.patientDetailsGender.setText(getString(R.string.female));\n             }\n         }\n-        ImageView patientImageView = rootView.findViewById(R.id.patientPhoto);\n+        ImageView patientImageView = binding.patientPhoto;\n \n         if (patient.getPhoto() != null) {\n             final Bitmap photo = patient.getResizedPhoto();\n@@ -110,68 +111,74 @@ public void resolvePatientDataDisplay(final Patient patient) {\n             patientImageView.setOnClickListener(view -> ImageUtils.showPatientPhoto(getContext(), photo, patientName));\n         }\n \n-        ((TextView) rootView.findViewById(R.id.patientDetailsName)).setText(patient.getName().getNameString());\n+        binding.patientDetailsName.setText(patient.getName().getNameString());\n \n         Long longTime = DateUtils.convertTime(patient.getBirthdate());\n \n         if (longTime != null) {\n-            ((TextView) rootView.findViewById(R.id.patientDetailsBirthDate)).setText(DateUtils.convertTime(longTime));\n+            binding.patientDetailsBirthDate.setText(DateUtils.convertTime(longTime));\n         }\n \n         if (null != patient.getAddress()) {\n-            ((TextView) rootView.findViewById(R.id.addressDetailsStreet)).setText(patient.getAddress().getAddressString());\n-            showAddressDetailsViewElement(R.id.addressDetailsStateLabel, R.id.addressDetailsState, patient.getAddress().getStateProvince());\n-            showAddressDetailsViewElement(R.id.addressDetailsCountryLabel, R.id.addressDetailsCountry, patient.getAddress().getCountry());\n-            showAddressDetailsViewElement(R.id.addressDetailsPostalCodeLabel, R.id.addressDetailsPostalCode, patient.getAddress().getPostalCode());\n-            showAddressDetailsViewElement(R.id.addressDetailsCityLabel, R.id.addressDetailsCity, patient.getAddress().getCityVillage());\n+            binding.addressDetailsStreet.setText(patient.getAddress().getAddressString());\n+            showAddressDetailsViewElement(binding.addressDetailsStateLabel, binding.addressDetailsState, patient.getAddress().getStateProvince());\n+            showAddressDetailsViewElement(binding.addressDetailsCountryLabel, binding.addressDetailsCountry, patient.getAddress().getCountry());\n+            showAddressDetailsViewElement(binding.addressDetailsPostalCodeLabel, binding.addressDetailsPostalCode, patient.getAddress().getPostalCode());\n+            showAddressDetailsViewElement(binding.addressDetailsCityLabel, binding.addressDetailsCity, patient.getAddress().getCityVillage());\n         }\n \n         if (patient.isDeceased()) {\n-            rootView.findViewById(R.id.deceasedView).setVisibility(View.VISIBLE);\n-            ((TextView) rootView.findViewById(R.id.deceasedView)).setText(getString(R.string.marked_patient_deceased_successfully, patient.getCauseOfDeath().getDisplay()));\n+            binding.deceasedView.setVisibility(View.VISIBLE);\n+            binding.deceasedView.setText(getString(R.string.marked_patient_deceased_successfully, patient.getCauseOfDeath().getDisplay()));\n         }\n     }\n \n     @Override\n     public void showDialog(int resId) {\n-        mPatientDashboardActivity.showProgressDialog(resId);\n+        patientDashboardActivity.showProgressDialog(resId);\n     }\n \n-    private void showAddressDetailsViewElement(int detailsViewLabel, int detailsViewId, String detailsText) {\n+    private void showAddressDetailsViewElement(TextView detailsViewLabel, TextView detailsView, String detailsText) {\n         if (StringUtils.notNull(detailsText) && StringUtils.notEmpty(detailsText)) {\n-            ((TextView) rootView.findViewById(detailsViewId)).setText(detailsText);\n+            detailsView.setText(detailsText);\n         } else {\n-            rootView.findViewById(detailsViewId).setVisibility(View.GONE);\n-            rootView.findViewById(detailsViewLabel).setVisibility(View.GONE);\n+            detailsView.setVisibility(View.GONE);\n+            detailsViewLabel.setVisibility(View.GONE);\n         }\n     }\n \n     @Override\n     public void dismissDialog() {\n-        mPatientDashboardActivity.dismissCustomFragmentDialog();\n+        patientDashboardActivity.dismissCustomFragmentDialog();\n     }\n \n     @Override\n     public void showToast(int stringRes, boolean error) {\n         ToastUtil.ToastType toastType = error ? ToastUtil.ToastType.ERROR : ToastUtil.ToastType.SUCCESS;\n-        ToastUtil.showShortToast(mPatientDashboardActivity, toastType, stringRes);\n+        ToastUtil.showShortToast(patientDashboardActivity, toastType, stringRes);\n     }\n \n     @Override\n     public void setMenuTitle(String nameString, String identifier) {\n-        mPatientDashboardActivity.getSupportActionBar().setTitle(nameString);\n-        mPatientDashboardActivity.getSupportActionBar().setSubtitle(\"#\" + identifier);\n+        patientDashboardActivity.getSupportActionBar().setTitle(nameString);\n+        patientDashboardActivity.getSupportActionBar().setSubtitle(\"#\" + identifier);\n     }\n \n     @Override\n     public void setUserVisibleHint(boolean isVisibleToUser) {\n         super.setUserVisibleHint(isVisibleToUser);\n         if (isVisibleToUser) {\n             try {\n-                mPatientDashboardActivity.hideFABs(false);\n+                patientDashboardActivity.hideFABs(false);\n             } catch (Exception e) {\n                 e.printStackTrace();\n             }\n         }\n     }\n+    \n+    @Override\n+    public void onDestroyView() {\n+        super.onDestroyView();\n+        binding = null;\n+    }\n }"
  },
  {
    "sha": "0e634a2d112b47e8e6177a1b7d9a61be3c292d26",
    "filename": "openmrs-client/src/main/java/org/openmrs/mobile/activities/patientdashboard/details/PatientPhotoActivity.java",
    "status": "modified",
    "additions": 8,
    "deletions": 4,
    "changes": 12,
    "blob_url": "https://github.com/openmrs/openmrs-contrib-android-client/blob/7b35893bef083bd6bd1eb1072047bb40baa1264a/openmrs-client/src/main/java/org/openmrs/mobile/activities/patientdashboard/details/PatientPhotoActivity.java",
    "raw_url": "https://github.com/openmrs/openmrs-contrib-android-client/raw/7b35893bef083bd6bd1eb1072047bb40baa1264a/openmrs-client/src/main/java/org/openmrs/mobile/activities/patientdashboard/details/PatientPhotoActivity.java",
    "contents_url": "https://api.github.com/repos/openmrs/openmrs-contrib-android-client/contents/openmrs-client/src/main/java/org/openmrs/mobile/activities/patientdashboard/details/PatientPhotoActivity.java?ref=7b35893bef083bd6bd1eb1072047bb40baa1264a",
    "patch": "@@ -23,23 +23,27 @@\n import androidx.appcompat.app.AppCompatActivity;\n import androidx.appcompat.widget.Toolbar;\n \n-import org.openmrs.mobile.R;\n+import org.openmrs.mobile.databinding.ActivityPatientPhotoBinding;\n \n import java.io.ByteArrayInputStream;\n \n public class PatientPhotoActivity extends AppCompatActivity {\n+    \n     @Override\n     public void onCreate(Bundle savedInstanceState) {\n         super.onCreate(savedInstanceState);\n-        setContentView(R.layout.activity_patient_photo);\n+\n+        ActivityPatientPhotoBinding binding = ActivityPatientPhotoBinding.inflate(getLayoutInflater());\n+        setContentView(binding.getRoot());\n+\n         byte[] photo = getIntent().getByteArrayExtra(\"photo\");\n \n         ByteArrayInputStream inputStream = new ByteArrayInputStream(photo);\n         Bitmap patientPhoto = BitmapFactory.decodeStream(inputStream);\n-        ImageView patientImageView = findViewById(R.id.patientPhoto);\n+        ImageView patientImageView = binding.patientPhoto;\n         patientImageView.setImageBitmap(patientPhoto);\n \n-        Toolbar toolbar = findViewById(R.id.toolbar);\n+        Toolbar toolbar = binding.toolbar;\n         if (toolbar != null) {\n             String patientName = getIntent().getStringExtra(\"name\");\n             setSupportActionBar(toolbar);"
  }
]
