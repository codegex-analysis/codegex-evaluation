[
  {
    "sha": "02c9174a34c17d352521d3b49a998ac98c2d1a77",
    "filename": "core/src/main/java/com/adobe/aem/commons/assetshare/configuration/Config.java",
    "status": "modified",
    "additions": 24,
    "deletions": 0,
    "changes": 24,
    "blob_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/blob/be246faa611cf7c5247a4cc96053438193ece6fc/core/src/main/java/com/adobe/aem/commons/assetshare/configuration/Config.java",
    "raw_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/raw/be246faa611cf7c5247a4cc96053438193ece6fc/core/src/main/java/com/adobe/aem/commons/assetshare/configuration/Config.java",
    "contents_url": "https://api.github.com/repos/Adobe-Marketing-Cloud/asset-share-commons/contents/core/src/main/java/com/adobe/aem/commons/assetshare/configuration/Config.java?ref=be246faa611cf7c5247a4cc96053438193ece6fc",
    "patch": "@@ -99,6 +99,11 @@\n      * @return the path segment of the URL to call to render the Share action.\n      */\n     String getShareActionUrl();\n+    \n+    /**\n+     * @return the path segment of the URL to call to render the Share action.\n+     */    \n+    String getDownloadsPanelActionUrl();\n \n     /**\n      * @return true if the cart is enabled.\n@@ -115,6 +120,11 @@\n      */\n     boolean isDownloadEnabledCart();\n \n+    /**\n+     * @return true if the license action is enabled.\n+     */\n+    boolean isOriginalDownloadEnabled();\n+    \n     /**\n      * @return true if the license action is enabled.\n      */\n@@ -129,6 +139,11 @@\n      * @return true if the share action is enabled in the cart.\n      */\n     boolean isShareEnabledCart();\n+   \n+    /**\n+     * @return true if the Downloads Panel action is enabled in the page.\n+     */\n+    boolean isDownloadsPanelEnabled();\n \n     /**\n      * @deprecated We no longer detect Dynamic Media; Return false always.\n@@ -137,4 +152,13 @@\n      */\n     @Deprecated\n     default boolean isDynamicMediaEnabled() { return false; }\n+    \n+    /**\n+     * @return the path segment of the URL to call to render the Async download action.\n+     */   \n+\tString getAsyncDownloadActionUrl();\n+\n+\t\n+\n+\t\n }\n\\ No newline at end of file"
  },
  {
    "sha": "b50ff00b0986322ac481fa5679815ace742073c8",
    "filename": "core/src/main/java/com/adobe/aem/commons/assetshare/configuration/impl/ConfigImpl.java",
    "status": "modified",
    "additions": 23,
    "deletions": 1,
    "changes": 24,
    "blob_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/blob/be246faa611cf7c5247a4cc96053438193ece6fc/core/src/main/java/com/adobe/aem/commons/assetshare/configuration/impl/ConfigImpl.java",
    "raw_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/raw/be246faa611cf7c5247a4cc96053438193ece6fc/core/src/main/java/com/adobe/aem/commons/assetshare/configuration/impl/ConfigImpl.java",
    "contents_url": "https://api.github.com/repos/Adobe-Marketing-Cloud/asset-share-commons/contents/core/src/main/java/com/adobe/aem/commons/assetshare/configuration/impl/ConfigImpl.java?ref=be246faa611cf7c5247a4cc96053438193ece6fc",
    "patch": "@@ -66,13 +66,15 @@\n     private static final String DEFAULT_VIEW_SELECTOR = \"partial\";\n     private static final String PN_VIEW_SELECTOR = \"config/actions/viewSelector\";\n \n+    private static final String PN_DOWNLOAD_ORIGINAL_ENABLED = \"config/actions/original-only/enabled\";\n     private static final String PN_LICENSE_ENABLED = \"config/actions/license/enabled\";\n     private static final String PN_LICENSE_AGREEMENT_VIEW_PATH = \"config/actions/license/path\";\n \n     private static final String PN_DOWNLOAD_ENABLED = \"config/actions/download/enabled\";\n     private static final String PN_DOWNLOAD_VIEW_PATH = \"config/actions/download/path\";\n-\n+    private static final String PN_DOWNLOADS_PANNEL_VIEW_PATH = \"config/actions/downloads-panel/path\";\n     private static final String PN_CART_ENABLED = \"config/actions/cart/enabled\";\n+    private static final String PN_DOWNLOAD_PANEL_ENABLED = \"config/actions/downloads-panel/enabled\";\n     private static final String PN_CART_VIEW_PATH = \"config/actions/cart/path\";\n \n     private static final String PN_SHARE_ENABLED = \"config/actions/share/enabled\";\n@@ -187,6 +189,16 @@ public String getShareActionUrl() {\n     public String getCartActionUrl() {\n         return properties.get(PN_CART_VIEW_PATH, rootPath + \"/actions/cart\") + \".\" + viewSelector + HTML_EXTENSION;\n     }\n+    \n+    @Override\n+    public String getDownloadsPanelActionUrl() {\n+        return properties.get(PN_DOWNLOADS_PANNEL_VIEW_PATH, rootPath + \"/actions/download-panel\") + \".\" + viewSelector + HTML_EXTENSION;\n+    }\n+    \n+    @Override\n+    public String getAsyncDownloadActionUrl() {\n+        return properties.get(PN_DOWNLOAD_VIEW_PATH, rootPath + \"/actions/async-download\") + \".\" + viewSelector + HTML_EXTENSION;\n+    }\n \n     @Override\n     public boolean isShareEnabled() {\n@@ -232,6 +244,16 @@ private boolean compareEnablementValue(ValueMap properties, String propertyName,\n     public boolean isCartEnabled() {\n         return properties.get(PN_CART_ENABLED, false);\n     }\n+    \n+    @Override\n+    public boolean isDownloadsPanelEnabled() {\n+        return properties.get(PN_DOWNLOAD_PANEL_ENABLED, false);\n+    }\n+    \n+    @Override\n+    public boolean isOriginalDownloadEnabled() {\n+        return properties.get(PN_DOWNLOAD_ORIGINAL_ENABLED, false);\n+    }\n \n     @Override\n     public boolean isLicenseEnabled() {"
  },
  {
    "sha": "5ad80f8ba4269bfc9b0a6a5c31c6c5c0218d3cac",
    "filename": "ui.apps/src/main/content/jcr_root/apps/asset-share-commons/clientlibs/clientlib-site/js.txt",
    "status": "modified",
    "additions": 1,
    "deletions": 0,
    "changes": 1,
    "blob_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/blob/be246faa611cf7c5247a4cc96053438193ece6fc/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/clientlibs/clientlib-site/js.txt",
    "raw_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/raw/be246faa611cf7c5247a4cc96053438193ece6fc/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/clientlibs/clientlib-site/js.txt",
    "contents_url": "https://api.github.com/repos/Adobe-Marketing-Cloud/asset-share-commons/contents/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/clientlibs/clientlib-site/js.txt?ref=be246faa611cf7c5247a4cc96053438193ece6fc",
    "patch": "@@ -9,5 +9,6 @@ navigation.js\n form-data.js\n ajax.js\n contexthub.js\n+downloads.js\n events.js\n util.js\n\\ No newline at end of file"
  },
  {
    "sha": "89a23ce7fba29296387e61a018d4593b8ed78ec2",
    "filename": "ui.apps/src/main/content/jcr_root/apps/asset-share-commons/clientlibs/clientlib-site/js/downloads.js",
    "status": "added",
    "additions": 57,
    "deletions": 0,
    "changes": 57,
    "blob_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/blob/be246faa611cf7c5247a4cc96053438193ece6fc/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/clientlibs/clientlib-site/js/downloads.js",
    "raw_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/raw/be246faa611cf7c5247a4cc96053438193ece6fc/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/clientlibs/clientlib-site/js/downloads.js",
    "contents_url": "https://api.github.com/repos/Adobe-Marketing-Cloud/asset-share-commons/contents/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/clientlibs/clientlib-site/js/downloads.js?ref=be246faa611cf7c5247a4cc96053438193ece6fc",
    "patch": "@@ -0,0 +1,57 @@\n+/*\n+ * Asset Share Commons\n+ *\n+ * Copyright [2017]  Adobe\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+/*global ContextHub: false, jQuery: false, AssetShare: false */\n+\n+AssetShare.Downloads = (function($, ns, messages) {\n+\t\"use strict\";\n+\n+\tfunction submitDownload(formdata, formurl) {\n+\n+\t\t$.ajax({\n+\t\t\ttype : \"POST\",\n+\t\t\turl : formurl,\n+\t\t\tdata : formdata,\n+\t\t\tsuccess : function(data) {\n+                var downloadIds = sessionStorage.getItem(\"downloadIds\");\n+\t\t\t\tif (data.downlaodID) {\t\t\t\t\t\n+\t\t\t\t\tif (downloadIds == null || downloadIds == \"\") {\n+                        sessionStorage.setItem(\"downloadIds\", data.downlaodID);\n+\t\t\t\t\t} else {\n+                        sessionStorage.setItem(\"downloadIds\", data.downlaodID + ','+downloadIds);\n+\t\t\t\t\t}\n+\n+\t\t\t\t\tdownloadIds = sessionStorage.getItem(\"downloadIds\");\n+\t\t\t\t\tvar count = downloadIds.split(',').length;\n+\t\t\t\t\tns.Elements.element(\"downloads-count\").text(count);\n+\t\t\t\t\tmessages.show('download-add');\n+\t\t\t\t}\n+\t\t\t}\n+\t\t});\n+\t}\n+\n+\n+\tfunction getContextHubStore() {\n+\t\treturn contextHubStore;\n+\t}\n+\n+\treturn {\n+\t\tsubmitDownload : submitDownload\n+\t};\n+\n+}(jQuery, AssetShare, AssetShare.Messages));\n\\ No newline at end of file"
  },
  {
    "sha": "fa2ba250563b407e2234697e22ec4163c04df7dc",
    "filename": "ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/.content.xml",
    "status": "added",
    "additions": 8,
    "deletions": 0,
    "changes": 8,
    "blob_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/blob/be246faa611cf7c5247a4cc96053438193ece6fc/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/.content.xml",
    "raw_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/raw/be246faa611cf7c5247a4cc96053438193ece6fc/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/.content.xml",
    "contents_url": "https://api.github.com/repos/Adobe-Marketing-Cloud/asset-share-commons/contents/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/.content.xml?ref=be246faa611cf7c5247a4cc96053438193ece6fc",
    "patch": "@@ -0,0 +1,8 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<jcr:root xmlns:sling=\"http://sling.apache.org/jcr/sling/1.0\" xmlns:cq=\"http://www.day.com/jcr/cq/1.0\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\"\n+    cq:icon=\"download\"\n+    jcr:description=\"Allows a user to download assets with options for renditions on AEM CS\"\n+    jcr:primaryType=\"cq:Component\"\n+    jcr:title=\"Async Download Modal - AEM CS\"\n+    sling:resourceSuperType=\"asset-share-commons/actions/download\"\n+    componentGroup=\"Asset Share Commons - Modals\"/>"
  },
  {
    "sha": "9feae8d3f0a64339d0388315309ff85bbf32b738",
    "filename": "ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/_cq_dialog/.content.xml",
    "status": "added",
    "additions": 239,
    "deletions": 0,
    "changes": 239,
    "blob_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/blob/be246faa611cf7c5247a4cc96053438193ece6fc/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/_cq_dialog/.content.xml",
    "raw_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/raw/be246faa611cf7c5247a4cc96053438193ece6fc/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/_cq_dialog/.content.xml",
    "contents_url": "https://api.github.com/repos/Adobe-Marketing-Cloud/asset-share-commons/contents/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/_cq_dialog/.content.xml?ref=be246faa611cf7c5247a4cc96053438193ece6fc",
    "patch": "@@ -0,0 +1,239 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<jcr:root xmlns:sling=\"http://sling.apache.org/jcr/sling/1.0\" xmlns:granite=\"http://www.adobe.com/jcr/granite/1.0\" xmlns:cq=\"http://www.day.com/jcr/cq/1.0\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\"\n+    jcr:primaryType=\"nt:unstructured\"\n+    jcr:title=\"Download Modal\"\n+    sling:resourceType=\"cq/gui/components/authoring/dialog\"\n+    extraClientlibs=\"[asset-share-commons.author.dialog.legacy]\"\n+    helpPath=\"https://adobe-marketing-cloud.github.io/asset-share-commons/pages/actions/download/\">\n+    <content\n+        granite:class=\"asset-share-commons__dialog--legacy-support\"\n+        jcr:primaryType=\"nt:unstructured\"\n+        sling:resourceType=\"granite/ui/components/coral/foundation/container\">\n+        <items jcr:primaryType=\"nt:unstructured\">\n+            <tabs\n+                jcr:primaryType=\"nt:unstructured\"\n+                sling:resourceType=\"granite/ui/components/coral/foundation/tabs\"\n+                maxmized=\"{Boolean}true\">\n+                <items jcr:primaryType=\"nt:unstructured\">\n+                    <tab-1\n+                        jcr:primaryType=\"nt:unstructured\"\n+                        jcr:title=\"Labels\"\n+                        sling:resourceType=\"granite/ui/components/coral/foundation/fixedcolumns\"\n+                        margin=\"{Boolean}true\">\n+                        <items jcr:primaryType=\"nt:unstructured\">\n+                            <column\n+                                jcr:primaryType=\"nt:unstructured\"\n+                                sling:resourceType=\"granite/ui/components/coral/foundation/container\">\n+                                <items jcr:primaryType=\"nt:unstructured\">\n+                                    <modal-title\n+                                        jcr:primaryType=\"nt:unstructured\"\n+                                        sling:resourceType=\"granite/ui/components/coral/foundation/form/textfield\"\n+                                        emptyText=\"Download\"\n+                                        fieldLabel=\"Modal Title\"\n+                                        name=\"./modalTitle\"\n+                                        required=\"{Boolean}true\"/>\n+                                    <asset-list-title\n+                                        jcr:primaryType=\"nt:unstructured\"\n+                                        sling:resourceType=\"granite/ui/components/coral/foundation/form/textfield\"\n+                                        emptyText=\"Assets\"\n+                                        fieldLabel=\"Asset List Title\"\n+                                        name=\"./assetListTitle\"\n+                                        required=\"{Boolean}true\"/>\n+                                    <download-options-title\n+                                        jcr:primaryType=\"nt:unstructured\"\n+                                        sling:resourceType=\"granite/ui/components/coral/foundation/form/textfield\"\n+                                        emptyText=\"Download options\"\n+                                        fieldLabel=\"Download Form Title\"\n+                                        name=\"./downloadOptionsTitle\"\n+                                        required=\"{Boolean}true\"/>\n+                                    <cancel-button\n+                                        jcr:primaryType=\"nt:unstructured\"\n+                                        sling:resourceType=\"granite/ui/components/coral/foundation/form/textfield\"\n+                                        emptyText=\"Cancel\"\n+                                        fieldLabel=\"Cancel Button Label\"\n+                                        name=\"./cancelButton\"\n+                                        required=\"{Boolean}true\"/>\n+                                    <download-button\n+                                        jcr:primaryType=\"nt:unstructured\"\n+                                        sling:resourceType=\"granite/ui/components/coral/foundation/form/textfield\"\n+                                        emptyText=\"Download\"\n+                                        fieldLabel=\"Download Button Label\"\n+                                        name=\"./downloadButton\"\n+                                        required=\"{Boolean}true\"/>\n+\t\t\t\t    <download-original\n+                                        jcr:primaryType=\"nt:unstructured\"\n+                                        sling:resourceType=\"granite/ui/components/coral/foundation/form/textfield\"\n+                                        emptyText=\"Download Original\"\n+                                        fieldLabel=\"Download Original Label\"\n+                                        name=\"./downloadOriginal\"\n+                                        required=\"{Boolean}true\"/>\n+                                </items>\n+                            </column>\n+                        </items>\n+                    </tab-1>\n+                    <tab-2\n+                        jcr:primaryType=\"nt:unstructured\"\n+                        jcr:title=\"Download Options\"\n+                        sling:resourceType=\"granite/ui/components/coral/foundation/fixedcolumns\"\n+                        margin=\"{Boolean}true\">\n+                        <items jcr:primaryType=\"nt:unstructured\">\n+                            <column\n+                                jcr:primaryType=\"nt:unstructured\"\n+                                sling:resourceType=\"granite/ui/components/coral/foundation/container\">\n+                                <items jcr:primaryType=\"nt:unstructured\">\n+                                    <renditions-groups\n+                                        jcr:primaryType=\"nt:unstructured\"\n+                                        sling:resourceType=\"granite/ui/components/coral/foundation/form/multifield\"\n+                                        composite=\"{Boolean}true\"\n+                                        fieldDescription=\"The list of Asset Renditions Groups that will be exposed as downloadable options via this Download modal.\"\n+                                        fieldLabel=\"Downloadable Renditions Groups\"\n+                                        renderReadOnly=\"{Boolean}true\">\n+                                        <field\n+                                            granite:class=\"cmp-options--editor-item-multifield-composite-item coral-Well\"\n+                                            jcr:primaryType=\"nt:unstructured\"\n+                                            sling:resourceType=\"granite/ui/components/coral/foundation/container\"\n+                                            name=\"./asset-renditions-groups/items\">\n+                                            <items jcr:primaryType=\"nt:unstructured\">\n+                                                <asset-renditions-group-title\n+                                                    jcr:primaryType=\"nt:unstructured\"\n+                                                    sling:resourceType=\"granite/ui/components/coral/foundation/form/textfield\"\n+                                                    fieldLabel=\"Rendition Group Label\"\n+                                                    name=\"./assetRenditionsGroupTitle\"\n+                                                    required=\"{Boolean}false\"/>\n+                                                <option\n+                                                    granite:class=\"cmp-options--editor-item-multifield-composite-item-container\"\n+                                                    jcr:primaryType=\"nt:unstructured\"\n+                                                    sling:resourceType=\"granite/ui/components/coral/foundation/container\">\n+                                                    <items jcr:primaryType=\"nt:unstructured\">\n+                                                        <renditions\n+                                                            jcr:primaryType=\"nt:unstructured\"\n+                                                            sling:resourceType=\"granite/ui/components/coral/foundation/form/multifield\"\n+                                                            composite=\"{Boolean}true\"\n+                                                            fieldDescription=\"Rendition label\"\n+                                                            fieldLabel=\"Renditions\"\n+                                                            renderReadOnly=\"{Boolean}true\">\n+                                                            <field\n+                                                                granite:class=\"cmp-options--editor-item-multifield-composite-item coral-Well\"\n+                                                                jcr:primaryType=\"nt:unstructured\"\n+                                                                sling:resourceType=\"granite/ui/components/coral/foundation/container\"\n+                                                                name=\"./asset-renditions/items\">\n+                                                                <items jcr:primaryType=\"nt:unstructured\">\n+                                                                    <option\n+                                                                        granite:class=\"cmp-options--editor-item-multifield-composite-item-container\"\n+                                                                        jcr:primaryType=\"nt:unstructured\"\n+                                                                        sling:resourceType=\"granite/ui/components/coral/foundation/container\">\n+                                                                        <items jcr:primaryType=\"nt:unstructured\">\n+                                                                            <selected\n+                                                                                granite:class=\"cmp-form-option-item-active\"\n+                                                                                jcr:primaryType=\"nt:unstructured\"\n+                                                                                sling:resourceType=\"granite/ui/components/coral/foundation/form/checkbox\"\n+                                                                                name=\"./selected\"\n+                                                                                text=\"Selected\"\n+                                                                                uncheckedValue=\"false\"\n+                                                                                value=\"{Boolean}true\"/>\n+                                                                            <text\n+                                                                                jcr:primaryType=\"nt:unstructured\"\n+                                                                                sling:resourceType=\"granite/ui/components/coral/foundation/form/textfield\"\n+                                                                                fieldLabel=\"Rendition Label\"\n+                                                                                name=\"./text\"\n+                                                                                required=\"{Boolean}false\"/>\n+                                                                            <value\n+                                                                                jcr:primaryType=\"nt:unstructured\"\n+                                                                                sling:resourceType=\"granite/ui/components/coral/foundation/form/select\"\n+                                                                                addAssetRenditionDispatcherToLabel=\"{Boolean}true\"\n+                                                                                emptyText=\"Select an asset rendition\"\n+                                                                                fieldDescription=\"Select the rendition to use.\"\n+                                                                                fieldLabel=\"Rendition\"\n+                                                                                name=\"./value\">\n+                                                                                <datasource\n+                                                                                    jcr:primaryType=\"nt:unstructured\"\n+                                                                                    sling:resourceType=\"asset-share-commons/data-sources/asset-renditions\"/>\n+                                                                            </value>\n+                                                                        </items>\n+                                                                    </option>\n+                                                                </items>\n+                                                            </field>\n+                                                        </renditions>\n+                                                    </items>\n+                                                </option>\n+                                            </items>\n+                                        </field>\n+                                    </renditions-groups>\n+                                    <select-all-label\n+                                        jcr:primaryType=\"nt:unstructured\"\n+                                        sling:resourceType=\"granite/ui/components/coral/foundation/form/textfield\"\n+                                        emptyText=\"Leave blank to hide Select All control\"\n+                                        fieldDescription=\"Enter a label to create a checkbox option for toggling the selection of all options in a Rendition Group.\"\n+                                        fieldLabel=\"Select All Label\"\n+                                        name=\"./selectAllLabel\"/>\n+                                    <exclude-original-assets\n+                                        jcr:primaryType=\"nt:unstructured\"\n+                                        sling:resourceType=\"granite/ui/components/coral/foundation/form/checkbox\"\n+                                        fieldDescription=\"Check to exclude the original renditions from the download. Checking this forces Include Renditions to be checked.\"\n+                                        name=\"./excludeOriginalAssets\"\n+                                        text=\"Exclude Original Assets from ZIP File\"\n+                                        uncheckedValue=\"{Boolean}false\"\n+                                        value=\"{Boolean}true\"/>\n+                                    <download-file-name\n+                                        jcr:primaryType=\"nt:unstructured\"\n+                                        sling:resourceType=\"granite/ui/components/coral/foundation/form/textfield\"\n+                                        emptyText=\"Assets\"\n+                                        fieldDescription=\"The name of the file that a user will download.\"\n+                                        fieldLabel=\"File Name\"\n+                                        name=\"./fileName\"\n+                                        required=\"{Boolean}false\"/>\n+                                    <zip-file-name\n+                                        jcr:primaryType=\"nt:unstructured\"\n+                                        sling:resourceType=\"granite/ui/components/coral/foundation/form/textfield\"\n+                                        emptyText=\"Assets\"\n+                                        fieldDescription=\"The name of the file that a user will download.\"\n+                                        fieldLabel=\"ZIP File Name\"\n+                                        name=\"./zipFileName\"\n+                                        required=\"{Boolean}true\"/>\n+                                    <max-content-size-message\n+                                        jcr:primaryType=\"nt:unstructured\"\n+                                        sling:resourceType=\"granite/ui/components/coral/foundation/form/textfield\"\n+                                        emptyText=\"Maximum content size of download exceeded:\"\n+                                        fieldDescription=\"Message displayed if the potential size of assets exceeds the max content size limit set by AEM's AssetDownloadServlet.\"\n+                                        fieldLabel=\"Max Content Size Message\"\n+                                        name=\"./maxContentSizeMessage\"/>\n+                                    <no-content-file-name\n+                                        jcr:primaryType=\"nt:unstructured\"\n+                                        sling:resourceType=\"granite/ui/components/coral/foundation/form/textfield\"\n+                                        emptyText=\"\"\n+                                        fieldDescription=\"Name of the file to add to the downloaded zip when no downloadable renditions can be obtained. This file will contain the text authored in the 'No Content Message' field.\"\n+                                        fieldLabel=\"No Content File Name\"\n+                                        name=\"./noContentFileName\"/>\n+                                    <no-content-message\n+                                        jcr:primaryType=\"nt:unstructured\"\n+                                        sling:resourceType=\"granite/ui/components/coral/foundation/form/textfield\"\n+                                        emptyText=\"\"\n+                                        fieldDescription=\"The message to write to the 'No Content File Name' file in the zip, when no downloadable renditions can be obtained.\"\n+                                        fieldLabel=\"No Content Message\"\n+                                        name=\"./noContentMessage\"/>\n+                                    <legacy-mode\n+                                        granite:class=\"asset-share-commons__legacy-mode\"\n+                                        jcr:primaryType=\"nt:unstructured\"\n+                                        sling:resourceType=\"granite/ui/components/coral/foundation/form/switch\"\n+                                        deleteHint=\"{Boolean}true\"\n+                                        fieldDescription=\"Enable legacy mode only if you have no migrated ot the new Asset Share Commons Assets Rendition framework.\"\n+                                        fieldLabel=\"Legacy mode\"\n+                                        name=\"./legacyMode\"\n+                                        offText=\"Not in legacy mode\"\n+                                        onText=\"Legacy mode activated\"\n+                                        uncheckedValue=\"\"\n+                                        value=\"true\">\n+                                        <granite:data\n+                                            jcr:primaryType=\"nt:unstructured\"\n+                                            legacy-field-names=\"./excludeOriginalAssets,./zipFileName\"\n+                                            modern-field-names=\"./asset-renditions-groups/items,./asset-renditions-groups/items/renditionGroupsTitle,./selectAllLabel,./fileName\"/>\n+                                    </legacy-mode>\n+                                </items>\n+                            </column>\n+                        </items>\n+                    </tab-2>\n+                </items>\n+            </tabs>\n+        </items>\n+    </content>\n+</jcr:root>"
  },
  {
    "sha": "fb0b03f7285d74205227b4b4b97728d73948bbec",
    "filename": "ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/_cq_htmlTag/.content.xml",
    "status": "added",
    "additions": 5,
    "deletions": 0,
    "changes": 5,
    "blob_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/blob/be246faa611cf7c5247a4cc96053438193ece6fc/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/_cq_htmlTag/.content.xml",
    "raw_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/raw/be246faa611cf7c5247a4cc96053438193ece6fc/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/_cq_htmlTag/.content.xml",
    "contents_url": "https://api.github.com/repos/Adobe-Marketing-Cloud/asset-share-commons/contents/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/_cq_htmlTag/.content.xml?ref=be246faa611cf7c5247a4cc96053438193ece6fc",
    "patch": "@@ -0,0 +1,5 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<jcr:root xmlns:cq=\"http://www.day.com/jcr/cq/1.0\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\"\n+    cq:tagName=\"div\"\n+    jcr:primaryType=\"nt:unstructured\"\n+    class=\"cmp cmp-modal-download\"/>"
  },
  {
    "sha": "31cd25e778ee38718d82178f2cd248934e05897f",
    "filename": "ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/_cq_template/.content.xml",
    "status": "added",
    "additions": 34,
    "deletions": 0,
    "changes": 34,
    "blob_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/blob/be246faa611cf7c5247a4cc96053438193ece6fc/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/_cq_template/.content.xml",
    "raw_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/raw/be246faa611cf7c5247a4cc96053438193ece6fc/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/_cq_template/.content.xml",
    "contents_url": "https://api.github.com/repos/Adobe-Marketing-Cloud/asset-share-commons/contents/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/_cq_template/.content.xml?ref=be246faa611cf7c5247a4cc96053438193ece6fc",
    "patch": "@@ -0,0 +1,34 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<jcr:root xmlns:cq=\"http://www.day.com/jcr/cq/1.0\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\"\n+    jcr:primaryType=\"nt:unstructured\"\n+    assetListTitle=\"Assets\"\n+    cancelButton=\"Cancel\"\n+    downloadButton=\"Download\"\n+    downloadOptionsTitle=\"Download options\"\n+    fileName=\"Assets\"\n+    maxContentSizeMessage=\"Maximum content size of download exceeded.\"\n+    modalTitle=\"Download\"\n+    noContentFileName=\"NO DOWNLOADABLE RENDITIONS.txt\"\n+    noContentMessage=\"Sorry, we could not find any downloadable files for the selected assets/renditions combinations.\"\n+    selectAllLabel=\"Select all\">\n+    <asset-renditions-groups jcr:primaryType=\"nt:unstructured\">\n+        <items jcr:primaryType=\"nt:unstructured\">\n+            <item0\n+                jcr:primaryType=\"nt:unstructured\"\n+                assetRenditionsGroupTitle=\"Image renditions\">\n+                <asset-renditions jcr:primaryType=\"nt:unstructured\">\n+                    <items jcr:primaryType=\"nt:unstructured\">\n+                        <item0\n+                            jcr:primaryType=\"nt:unstructured\"\n+                            text=\"Web\"\n+                            value=\"web\"/>\n+                        <item1\n+                            jcr:primaryType=\"nt:unstructured\"\n+                            text=\"Original\"\n+                            value=\"original\"/>\n+                    </items>\n+                </asset-renditions>\n+            </item0>\n+        </items>\n+    </asset-renditions-groups>\n+</jcr:root>"
  },
  {
    "sha": "102db1be5d165069fbc9bbfe04105db4921671a4",
    "filename": "ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/async-download.html",
    "status": "added",
    "additions": 105,
    "deletions": 0,
    "changes": 105,
    "blob_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/blob/be246faa611cf7c5247a4cc96053438193ece6fc/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/async-download.html",
    "raw_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/raw/be246faa611cf7c5247a4cc96053438193ece6fc/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/async-download.html",
    "contents_url": "https://api.github.com/repos/Adobe-Marketing-Cloud/asset-share-commons/contents/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/async-download.html?ref=be246faa611cf7c5247a4cc96053438193ece6fc",
    "patch": "@@ -0,0 +1,105 @@\n+<!--/*\n+  ~ Asset Share Commons\n+  ~\n+  ~ Copyright [2017]  Adobe\n+  ~\n+  ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n+  ~ you may not use this file except in compliance with the License.\n+  ~ You may obtain a copy of the License at\n+  ~\n+  ~     http://www.apache.org/licenses/LICENSE-2.0\n+  ~\n+  ~ Unless required by applicable law or agreed to in writing, software\n+  ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n+  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+  ~ See the License for the specific language governing permissions and\n+  ~ limitations under the License.\n+ */-->\n+\n+<sly\n+\tdata-sly-use.download=\"com.adobe.aem.commons.assetshare.components.actions.download.Download\"></sly>\n+\n+<style data-sly-test=\"${!wccmode.disabled}\">\n+.cmp-modal-download .ui.modal {\n+\tposition: relative !important;\n+\tdisplay: block !important;;\n+\ttop: 0 !important;;\n+}\n+</style>\n+\n+<form data-sly-test=\"${!legacyMode}\" method=\"post\"\n+\tlink=\"${resource.path @ selectors = 'async-download-renditions', extension = 'zip'}\"\n+\ttarget=\"download\" data-asset-share-id=\"download-modal\"\n+\tclass=\"ui modal cmp-modal-download--wrapper cmp-modal\">\n+\n+\t<i class=\"close icon\"></i>\n+\n+\t<div class=\"header\">${properties['modalTitle']}</div>\n+\n+\t<div class=\"image scrolling content cmp-content\">\n+\t\t<div class=\"ui medium image\">\n+\t\t\t<h3 class=\"ui header\">${properties['assetListTitle']}</h3>\n+\n+\t\t\t<div class=\"ui list\" data-sly-list.asset=\"${download.assets}\">\n+\t\t\t\t<div class=\"item\">\n+\t\t\t\t\t<i class=\"file icon\"></i>\n+\t\t\t\t\t<div class=\"content\">\n+\t\t\t\t\t\t<div class=\"header\">${asset.title}</div>\n+\t\t\t\t\t</div>\n+\t\t\t\t</div>\n+\t\t\t</div>\n+\t\t</div>\n+\n+\t\t<div class=\"description ui form\">\n+\t\t\t<h3 class=\"ui header\">${properties['downloadOptionsTitle']}</h3>\n+\n+\t\t\t<sly data-sly-list.asset=\"${download.assets}\"> <input\n+\t\t\t\ttype=\"hidden\" name=\"path\" value=\"${asset.url}\" /> </sly>\n+\n+\t\t\t<sly\n+\t\t\t\tdata-sly-list.assetRenditionsGroup=\"${download.assetRenditionsGroups}\">\n+\n+\t\t\t<div class=\"field cmp-modal-download__asset-rendition-group\">\n+\n+\t\t\t\t<h4\n+\t\t\t\t\tclass=\"ui header cmp-modal-download__asset-rendition-group-title\">${assetRenditionsGroup.title}</h4>\n+\n+\t\t\t\t<sly\n+\t\t\t\t\tdata-sly-test=\"${properties.selectAllLabel && assetRenditionsGroup.items.size > 1}\">\n+\t\t\t\t<div\n+\t\t\t\t\tclass=\"ui checkbox cmp-modal-download__asset-rendition-group-option\">\n+\t\t\t\t\t<input type=\"checkbox\"\n+\t\t\t\t\t\tonchange=\"$(this).closest('.cmp-modal-download__asset-rendition-group').find('input[type=\\'checkbox\\']').prop('checked', $(this).prop('checked'));\">\n+\t\t\t\t\t<label>${properties.selectAllLabel}</label>\n+\t\t\t\t</div>\n+\t\t\t\t<br />\n+\t\t\t\t</sly>\n+\n+\t\t\t\t<sly data-sly-list.assetRendition=\"${assetRenditionsGroup.items}\">\n+\t\t\t\t<div\n+\t\t\t\t\tclass=\"ui checkbox cmp-modal-download__asset-rendition-group-option\">\n+\t\t\t\t\t<input type=\"checkbox\" class=\"hidden\"\n+\t\t\t\t\t\tname=\"${assetRenditionsGroup.groupID}\"\n+\t\t\t\t\t\tvalue=\"${assetRendition.value}\"\n+\t\t\t\t\t\tchecked=\"${assetRendition.selected}\"> <label>${assetRendition.text}</label>\n+\t\t\t\t</div>\n+\t\t\t\t<br />\n+\t\t\t\t</sly>\n+\t\t\t</div>\n+\t\t\t</sly>\n+\t\t</div>\n+\t</div>\n+\n+\t<div class=\"actions cmp-footer__actions\">\n+\t\t<div class=\"ui deny button\">${properties['cancelButton']}</div>\n+\t\t<button type=\"submit\"\n+\t\t\tclass=\"ui positive primary right labeled icon button ${isMaxSize ? 'disabled': ''}\">\n+\t\t\t${properties['downloadButton']} <i class=\"download icon\"></i>\n+\t\t</button>\n+\t</div>\n+\t<script>\n+\t\t$(function() {\n+\t\t\t$('[data-asset-share-id=\"download-modal\"] .ui.checkbox').checkbox();\n+\t\t});\n+\t</script>\n+</form>\n\\ No newline at end of file"
  },
  {
    "sha": "491392d5391e676bf44a39606c61657199cad3f0",
    "filename": "ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/clientlibs/.content.xml",
    "status": "added",
    "additions": 3,
    "deletions": 0,
    "changes": 3,
    "blob_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/blob/be246faa611cf7c5247a4cc96053438193ece6fc/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/clientlibs/.content.xml",
    "raw_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/raw/be246faa611cf7c5247a4cc96053438193ece6fc/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/clientlibs/.content.xml",
    "contents_url": "https://api.github.com/repos/Adobe-Marketing-Cloud/asset-share-commons/contents/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/clientlibs/.content.xml?ref=be246faa611cf7c5247a4cc96053438193ece6fc",
    "patch": "@@ -0,0 +1,3 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<jcr:root xmlns:sling=\"http://sling.apache.org/jcr/sling/1.0\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\"\n+    jcr:primaryType=\"sling:Folder\"/>"
  },
  {
    "sha": "13d1abe766bd9f870119afca07c03a92812da8ab",
    "filename": "ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/clientlibs/site/.content.xml",
    "status": "added",
    "additions": 6,
    "deletions": 0,
    "changes": 6,
    "blob_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/blob/be246faa611cf7c5247a4cc96053438193ece6fc/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/clientlibs/site/.content.xml",
    "raw_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/raw/be246faa611cf7c5247a4cc96053438193ece6fc/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/clientlibs/site/.content.xml",
    "contents_url": "https://api.github.com/repos/Adobe-Marketing-Cloud/asset-share-commons/contents/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/clientlibs/site/.content.xml?ref=be246faa611cf7c5247a4cc96053438193ece6fc",
    "patch": "@@ -0,0 +1,6 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<jcr:root xmlns:cq=\"http://www.day.com/jcr/cq/1.0\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\"\n+    jcr:primaryType=\"cq:ClientLibraryFolder\"\n+    categories=\"[asset-share-commons.site.semantic-ui.components,asset-share-commons.site.semantic-ui.components.modals.download]\"\n+    dependencies=\"[asset-share-commons.common,asset-share-commons.site.semantic-ui.modal,asset-share-commons.site.semantic-ui.components.modals.license]\"\n+    jsProcessor=\"[min:gcc,default:none]\"/>"
  },
  {
    "sha": "9348db6601b8b083e628e3adc66ea5f2acc42a1e",
    "filename": "ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/clientlibs/site/css.txt",
    "status": "added",
    "additions": 3,
    "deletions": 0,
    "changes": 3,
    "blob_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/blob/be246faa611cf7c5247a4cc96053438193ece6fc/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/clientlibs/site/css.txt",
    "raw_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/raw/be246faa611cf7c5247a4cc96053438193ece6fc/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/clientlibs/site/css.txt",
    "contents_url": "https://api.github.com/repos/Adobe-Marketing-Cloud/asset-share-commons/contents/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/clientlibs/site/css.txt?ref=be246faa611cf7c5247a4cc96053438193ece6fc",
    "patch": "@@ -0,0 +1,3 @@\n+#base=less\n+\n+modal.less"
  },
  {
    "sha": "50c1b3f56572c9857706d0a0f11b98408ce4039d",
    "filename": "ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/clientlibs/site/js.txt",
    "status": "added",
    "additions": 3,
    "deletions": 0,
    "changes": 3,
    "blob_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/blob/be246faa611cf7c5247a4cc96053438193ece6fc/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/clientlibs/site/js.txt",
    "raw_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/raw/be246faa611cf7c5247a4cc96053438193ece6fc/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/clientlibs/site/js.txt",
    "contents_url": "https://api.github.com/repos/Adobe-Marketing-Cloud/asset-share-commons/contents/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/clientlibs/site/js.txt?ref=be246faa611cf7c5247a4cc96053438193ece6fc",
    "patch": "@@ -0,0 +1,3 @@\n+#base=js\n+\n+async-download.js\n\\ No newline at end of file"
  },
  {
    "sha": "799bd3d436ae72525b3f617444f92287f2d4c70f",
    "filename": "ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/clientlibs/site/js/async-download.js",
    "status": "added",
    "additions": 55,
    "deletions": 0,
    "changes": 55,
    "blob_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/blob/be246faa611cf7c5247a4cc96053438193ece6fc/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/clientlibs/site/js/async-download.js",
    "raw_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/raw/be246faa611cf7c5247a4cc96053438193ece6fc/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/clientlibs/site/js/async-download.js",
    "contents_url": "https://api.github.com/repos/Adobe-Marketing-Cloud/asset-share-commons/contents/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/clientlibs/site/js/async-download.js?ref=be246faa611cf7c5247a4cc96053438193ece6fc",
    "patch": "@@ -0,0 +1,55 @@\n+/*\n+ * Asset Share Commons\n+ *\n+ * Copyright [2017]  Adobe\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+/*global jQuery: false, AssetShare: false*/\n+\n+jQuery((function(ns, downloads, semanticModal, licenseModal, messages) {\n+\t\"use strict\";\n+\tAssetShare.SemanticUI.Modals.AsyncDownloadModal = (function() {\n+\t\tvar DOWNLOAD_URL = ns.Data.val(\"download-url\"), \n+\t\t\tDOWNLOAD_MODAL_ID = \"download-modal\"\n+\n+\t\tfunction getId() {\n+\t\t\treturn DOWNLOAD_MODAL_ID;\n+\t\t}\n+\n+\t\tfunction getUrl() {\n+\t\t\treturn DOWNLOAD_URL;\n+\t\t}\n+\n+\t\t/** REGISTER EVENTS WHEN DOCUMENT IS READY * */\n+\t\t$((function registerEvents() {\n+\t\t\t$(\"body\").on(\"submit\", ns.Elements.selector([ \"download-modal\" ]),\n+\t\t\t\t\tfunction(e) {\n+\t\t\t\t\t\tvar formEl = $(this);\n+\t\t\t\t\t\te.preventDefault();\n+\t\t\t\t\t\te.stopPropagation();\n+\t\t\t\t\t\tif (formEl.form('is valid')) {\n+\t\t\t\t\t\t\tvar form = $(formEl);\n+\t\t\t\t\t\t\tdownloads.submitDownload(form.serialize(), form.attr(\"link\"));\n+\t\t\t\t\t\t}\n+\t\t\t\t\t});\n+\t\t}()));\n+\n+\t\treturn {\n+\t\t\tid : getId,\n+\t\t\turl : getUrl\n+\t\t};\n+\t}());\n+}(AssetShare, AssetShare.Downloads, AssetShare.SemanticUI.Modal,\n+\t\tAssetShare.SemanticUI.Modals.LicenseModal, AssetShare.Messages)));\n\\ No newline at end of file"
  },
  {
    "sha": "8f560e6ce7f543ef890f5217f1620ef43ca31963",
    "filename": "ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/clientlibs/site/less/modal.less",
    "status": "added",
    "additions": 54,
    "deletions": 0,
    "changes": 54,
    "blob_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/blob/be246faa611cf7c5247a4cc96053438193ece6fc/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/clientlibs/site/less/modal.less",
    "raw_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/raw/be246faa611cf7c5247a4cc96053438193ece6fc/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/clientlibs/site/less/modal.less",
    "contents_url": "https://api.github.com/repos/Adobe-Marketing-Cloud/asset-share-commons/contents/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/clientlibs/site/less/modal.less?ref=be246faa611cf7c5247a4cc96053438193ece6fc",
    "patch": "@@ -0,0 +1,54 @@\n+/*\n+ * Asset Share Commons\n+ *\n+ * Copyright [2017]  Adobe\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+/* applies to all modals */\n+.cmp-modal { \n+\t.list .item{\n+\t\ti {\n+\t\t\tfloat: left;\n+\t\t\twidth: 1em;\n+\t\t}\n+\t\t.content {\n+\t\t\twidth: ~\"calc(100% - 2em)\";\n+\t\t\tfloat: left;\n+\t\t\t\n+\t\t\t.header {\n+\t\t\t\ttext-overflow: ellipsis;\n+    \t\t\toverflow: hidden;\n+\t\t\t}\n+\t\t}\n+\t}\n+\n+\t.cmp-message {\n+\t\ttext-transform: unset;\n+\t}\n+}\n+\n+.cmp-modal-download--wrapper {\n+\t.field.cmp-modal-download__asset-rendition-group {\n+\t\tmargin-bottom: 2rem;\n+\t}\n+\n+\t.cmp-modal-download__asset-rendition-group-title {\n+\t\tmargin-bottom: .5rem;\n+\t}\n+\n+\t.cmp-modal-download__asset-rendition-group-option {\n+\t\tmargin: .25rem 0;\n+\t}\n+}\n\\ No newline at end of file"
  },
  {
    "sha": "f33fdcfce5873c7c8e9c6408a0bc663ee292a7ea",
    "filename": "ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/templates/legacy.html",
    "status": "added",
    "additions": 104,
    "deletions": 0,
    "changes": 104,
    "blob_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/blob/be246faa611cf7c5247a4cc96053438193ece6fc/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/templates/legacy.html",
    "raw_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/raw/be246faa611cf7c5247a4cc96053438193ece6fc/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/templates/legacy.html",
    "contents_url": "https://api.github.com/repos/Adobe-Marketing-Cloud/asset-share-commons/contents/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/async-download/templates/legacy.html?ref=be246faa611cf7c5247a4cc96053438193ece6fc",
    "patch": "@@ -0,0 +1,104 @@\n+<!--\n+  ~ Asset Share Commons\n+  ~\n+  ~ Copyright (C) 2019 Adobe\n+  ~\n+  ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n+  ~ you may not use this file except in compliance with the License.\n+  ~ You may obtain a copy of the License at\n+  ~\n+  ~       http://www.apache.org/licenses/LICENSE-2.0\n+  ~\n+  ~ Unless required by applicable law or agreed to in writing, software\n+  ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n+  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+  ~ See the License for the specific language governing permissions and\n+  ~ limitations under the License.\n+  ~\n+  -->\n+\n+<!--/* Computed Properties Format */-->\n+<template data-sly-template.legacy=\"${@ download}\">\n+    <sly data-sly-test.downloadAssets=\"${properties.excludeOriginalAssets ? false : true}\"></sly>\n+\n+    <form method=\"post\"\n+          action=\"/content/dam.assetdownload.zip/${download.zipFileName}.zip\"\n+          target=\"download\"\n+          data-asset-share-id=\"download-modal\"\n+          class=\"ui modal cmp-modal-download--wrapper cmp-modal\">\n+\n+        <input type=\"hidden\" name=\"licenseCheck\" value=\"true\"/>\n+        <input type=\"hidden\" name=\"flatStructure\" value=\"false\"/>\n+\n+        <input type=\"hidden\" name=\"downloadAssets\"\n+               value=\"${downloadAssets ? 'true' : 'false'}\"/>\n+\n+        <i class=\"close icon\"></i>\n+\n+        <div data-sly-test.isMaxSize=\"${download.maxContentSize > 0 && download.maxContentSize < download.downloadContentSize}\"\n+             class=\"ui attached warning message cmp-message\">\n+            ${properties['maxContentSizeMessage']}\n+            <br/>\n+            <label>${\"Limit\" @ i18n}:</label> <span class=\"detail\">${download.maxContentSizeLabel}</span> |\n+            <label>${\"Current Size\" @ i18n}:</label> <span class=\"detail\">${download.downloadContentSizeLabel}</span>\n+        </div>\n+        <div class=\"header\">\n+            ${properties['modalTitle']}\n+        </div>\n+        <div class=\"image scrolling content cmp-content\">\n+            <div class=\"ui medium image\">\n+                <div class=\"ui header\">${properties['assetListTitle']}</div>\n+\n+                <div class=\"ui list\" data-sly-list.asset=\"${download.assets}\">\n+                    <div class=\"item\">\n+                        <i class=\"file icon\"></i>\n+                        <div class=\"content\">\n+                            <div class=\"header\">${asset.title}</div>\n+                        </div>\n+                    </div>\n+                </div>\n+\n+            </div>\n+            <div class=\"description ui form\">\n+                <div class=\"ui header\">${properties['downloadOptionsTitle']}</div>\n+\n+                <sly data-sly-list.asset=\"${download.assets}\">\n+                    <input type=\"hidden\" name=\"path\"  value=\"${asset.url}\"/>\n+                </sly>\n+\n+                <div class=\"field\">\n+                    <div class=\"ui checkbox\">\n+                        <input type=\"checkbox\" tabindex=\"3\" class=\"hidden\" name=\"downloadRenditions\" value=\"true\"\n+                               data-sly-attribute.checked=\"${!downloadAssets}\"\n+                               data-sly-attribute.required=\"${!downloadAssets}\"\n+                               data-sly-attribute.readonly=\"${!downloadAssets}\">\n+                        <label>${\"Include Renditions\" @ i18n}</label>\n+                    </div>\n+                </div>\n+\n+                <div class=\"field\">\n+                    <div class=\"ui checkbox\">\n+                        <input type=\"checkbox\" tabindex=\"4\" class=\"hidden\" name=\"downloadSubassets\" value=\"true\">\n+                        <label>${\"Include Sub-assets\" @ i18n}</label>\n+                    </div>\n+                </div>\n+            </div>\n+        </div>\n+        <div class=\"actions cmp-footer__actions\">\n+            <div class=\"ui deny button\">\n+                ${properties['cancelButton']}\n+            </div>\n+            <button type=\"submit\" class=\"ui positive primary right labeled icon button ${isMaxSize ? 'disabled': ''}\">\n+                ${properties['downloadButton']}\n+                <i class=\"download icon\"></i>\n+            </button>\n+        </div>\n+        <script>\n+            $(function() {\n+                $('[data-asset-share-id=\"download-modal\"] .ui.checkbox').checkbox();\n+            });\n+        </script>\n+    </form>\n+\n+\n+</template>"
  },
  {
    "sha": "9d81b933be16c93466eb7b185bf4462ba041f1f1",
    "filename": "ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/cart/cart.html",
    "status": "modified",
    "additions": 9,
    "deletions": 1,
    "changes": 10,
    "blob_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/blob/be246faa611cf7c5247a4cc96053438193ece6fc/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/cart/cart.html",
    "raw_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/raw/be246faa611cf7c5247a4cc96053438193ece6fc/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/cart/cart.html",
    "contents_url": "https://api.github.com/repos/Adobe-Marketing-Cloud/asset-share-commons/contents/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/cart/cart.html?ref=be246faa611cf7c5247a4cc96053438193ece6fc",
    "patch": "@@ -31,6 +31,8 @@\n \n <form method=\"post\"\n       action=\"${currentPage.path}.assetdownload.zip/Cart.zip\"\n+      id=\"cart\"\n+      data-asset-share-link=\"${resource.path @ selectors = 'async-download-renditions', extension = 'zip'}\"\n       data-asset-share-id=\"cart\"\n       data-asset-share-id=\"cart-modal\"\n       data-asset-share-update-method=\"replace\"\n@@ -96,7 +98,13 @@\n             ${properties['shareButton']}\n              <i class=\"send icon\"></i>\n         </div>\n-        <button data-sly-test=\"${config.downloadEnabledCart && cart.assets.size > 0}\"\n+\t\t<button data-sly-test=\"${config.originalDownloadEnabled\n+\t\t\t&& config.downloadEnabledCart && cart.assets.size>\n+\t\t\t0}\" data-asset-share-id=\"download-original\" type=\"submit\" class=\"ui\n+\t\t\tpostive ok primary right labeled icon button\">\n+\t\t\t${properties['downloadButton']} <i class=\"download icon\"></i>\n+\t\t</button>\n+\t    <button data-sly-test=\"${!config.originalDownloadEnabled && config.downloadEnabledCart && cart.assets.size > 0}\"\n         \t    data-asset-share-id=\"download-all\"\n                 type=\"submit\"\n                 class=\"ui postive primary right labeled icon button\">"
  },
  {
    "sha": "9eab81a8143d1880b6cad8ae5cf08fc8943e3489",
    "filename": "ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/cart/clientlibs/site/js/cart.js",
    "status": "modified",
    "additions": 18,
    "deletions": 2,
    "changes": 20,
    "blob_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/blob/be246faa611cf7c5247a4cc96053438193ece6fc/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/cart/clientlibs/site/js/cart.js",
    "raw_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/raw/be246faa611cf7c5247a4cc96053438193ece6fc/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/cart/clientlibs/site/js/cart.js",
    "contents_url": "https://api.github.com/repos/Adobe-Marketing-Cloud/asset-share-commons/contents/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/modals/cart/clientlibs/site/js/cart.js?ref=be246faa611cf7c5247a4cc96053438193ece6fc",
    "patch": "@@ -18,7 +18,7 @@\n \n /*global jQuery: false, AssetShare: false*/\n \n-jQuery((function($, ns, cart, semanticModal, downloadModal, licenseModal, shareModal) {\n+jQuery((function($, ns, cart, semanticModal, downloadModal, licenseModal, shareModal, downloads) {\n     \"use strict\";\n     AssetShare.SemanticUI.Modals.CartModal = (function () {\n         var CART_URL = ns.Data.val(\"cart-url\"),\n@@ -75,6 +75,19 @@ jQuery((function($, ns, cart, semanticModal, downloadModal, licenseModal, shareM\n             semanticModal.show([downloadModal.modal(asFormData())]);\n         }\n \n+        function downloadOriginal(e,url) {\n+            debugger;\n+            e.preventDefault();\n+            e.stopPropagation();\n+\n+\t\t\tconst cart = document.querySelector('#cart');\n+\t\t\tif(cart)\n+              url = cart.dataset.assetShareLink;\n+\n+            downloads.submitDownload(serialize(),url);\n+\n+        }\n+\n         function share(e) {\n             e.preventDefault();\n             e.stopPropagation();\n@@ -107,6 +120,8 @@ jQuery((function($, ns, cart, semanticModal, downloadModal, licenseModal, shareM\n \n             $(\"body\").on(\"click\", ns.Elements.selector([\"download-all\"]), download);\n \n+            $(\"body\").on(\"click\", ns.Elements.selector([\"download-original\"]), downloadOriginal);\n+\n             $(\"body\").on(\"click\", ns.Elements.selector([\"share-all\"]), share);\n \n             $(\"body\").on(\"click\", ns.Elements.selector([\"remove-from-cart\"]), remove);\n@@ -124,4 +139,5 @@ jQuery((function($, ns, cart, semanticModal, downloadModal, licenseModal, shareM\n     AssetShare.SemanticUI.Modal,\n     AssetShare.SemanticUI.Modals.DownloadModal,\n     AssetShare.SemanticUI.Modals.LicenseModal,\n-    AssetShare.SemanticUI.Modals.ShareModal)));\n+    AssetShare.SemanticUI.Modals.ShareModal,\n+    AssetShare.Downloads)));"
  },
  {
    "sha": "fe1a183d6353b7b5d6fdd15fddf8871d9d69caa1",
    "filename": "ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/structure/page/init.html",
    "status": "modified",
    "additions": 8,
    "deletions": 1,
    "changes": 9,
    "blob_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/blob/be246faa611cf7c5247a4cc96053438193ece6fc/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/structure/page/init.html",
    "raw_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/raw/be246faa611cf7c5247a4cc96053438193ece6fc/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/structure/page/init.html",
    "contents_url": "https://api.github.com/repos/Adobe-Marketing-Cloud/asset-share-commons/contents/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/structure/page/init.html?ref=be246faa611cf7c5247a4cc96053438193ece6fc",
    "patch": "@@ -36,5 +36,12 @@\n        data-sly-test=\"${config.cartEnabled}\"\n        data-asset-share-id=\"cart-url\"\n        value=\"${config.cartActionUrl}\"/>\n-\n+<input type=\"hidden\"\n+       data-sly-test=\"${config.downloadsPanelEnabled}\"\n+       data-asset-share-id=\"downloads-panel-url\"\n+       value=\"${config.downloadsPanelActionUrl}\"/>\n+<input type=\"hidden\"\n+       data-sly-test=\"${config.downloadEnabled || config.downloadEnabledCart}\"\n+       data-asset-share-id=\"async-download-url\"\n+       value=\"${config.asyncDownloadActionUrl}\"/>\n </sly>\n\\ No newline at end of file"
  },
  {
    "sha": "c489a01551ab463b4130ab29c224370d509d8fc3",
    "filename": "ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/structure/search-page/_cq_dialog/asset-share-commons/actions/.content.xml",
    "status": "modified",
    "additions": 21,
    "deletions": 0,
    "changes": 21,
    "blob_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/blob/be246faa611cf7c5247a4cc96053438193ece6fc/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/structure/search-page/_cq_dialog/asset-share-commons/actions/.content.xml",
    "raw_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/raw/be246faa611cf7c5247a4cc96053438193ece6fc/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/structure/search-page/_cq_dialog/asset-share-commons/actions/.content.xml",
    "contents_url": "https://api.github.com/repos/Adobe-Marketing-Cloud/asset-share-commons/contents/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/structure/search-page/_cq_dialog/asset-share-commons/actions/.content.xml?ref=be246faa611cf7c5247a4cc96053438193ece6fc",
    "patch": "@@ -53,6 +53,13 @@\n                                         value=\"cart\"/>\n                             </items>\n                         </download-enabled>\n+ \t\t\t<download-original\n+                                 jcr:primaryType=\"nt:unstructured\"\n+                                 sling:resourceType=\"granite/ui/components/coral/foundation/form/checkbox\"\n+                                 name=\"./config/actions/original-only/enabled\"\n+                                 text=\"Download Original Rendition Only And Skip Download Options\"\n+                                 uncheckedValue=\"false\"\n+                                 value=\"true\"/>\n                         <download\n                                 jcr:primaryType=\"nt:unstructured\"\n                                 sling:resourceType=\"granite/ui/components/coral/foundation/form/pathfield\"\n@@ -115,6 +122,20 @@\n                                 fieldLabel=\"Cart\"\n                                 name=\"./config/actions/cart/path\"\n                                 rootPath=\"/content\"/>\n+                               <downloads-panel-enabled\n+                                    jcr:primaryType=\"nt:unstructured\"\n+                                    sling:resourceType=\"granite/ui/components/coral/foundation/form/checkbox\"\n+                                    name=\"./config/actions/downloads-panel/enabled\"\n+                                    text=\"Enable Downloads Panel\"\n+                                    uncheckedValue=\"false\"\n+                                    value=\"true\"/>\n+                                <downloads-panel\n+                                    jcr:primaryType=\"nt:unstructured\"\n+                                    sling:resourceType=\"granite/ui/components/coral/foundation/form/pathfield\"\n+                                    fieldDescription=\"Path to downloads panel action page.\"\n+                                    fieldLabel=\"Downloads Panel\"\n+                                    name=\"./config/actions/downloads-panel/path\"\n+                                    rootPath=\"/content\"/>\n                     </items>\n                 </fieldset>\n             </items>"
  },
  {
    "sha": "9112f56f6df5155493806ac64da2156a2f4eae0c",
    "filename": "ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/structure/search-page/_cq_dialog/asset-share-commons/messages/.content.xml",
    "status": "modified",
    "additions": 41,
    "deletions": 0,
    "changes": 41,
    "blob_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/blob/be246faa611cf7c5247a4cc96053438193ece6fc/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/structure/search-page/_cq_dialog/asset-share-commons/messages/.content.xml",
    "raw_url": "https://github.com/Adobe-Marketing-Cloud/asset-share-commons/raw/be246faa611cf7c5247a4cc96053438193ece6fc/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/structure/search-page/_cq_dialog/asset-share-commons/messages/.content.xml",
    "contents_url": "https://api.github.com/repos/Adobe-Marketing-Cloud/asset-share-commons/contents/ui.apps/src/main/content/jcr_root/apps/asset-share-commons/components/structure/search-page/_cq_dialog/asset-share-commons/messages/.content.xml?ref=be246faa611cf7c5247a4cc96053438193ece6fc",
    "patch": "@@ -112,6 +112,47 @@\n                                         name=\"./config/messages/cart-remove/text\"/>\n                             </items>\n                         </cart-remove-fieldset>\n+                         <download-add-fieldset\n+                                    jcr:primaryType=\"nt:unstructured\"\n+                                    jcr:title=\"Archive Added To Downloads\"\n+                                    sling:resourceType=\"granite/ui/components/coral/foundation/form/fieldset\">\n+                                    <items jcr:primaryType=\"nt:unstructured\">\n+                                        <event-id\n+                                            jcr:primaryType=\"nt:unstructured\"\n+                                            sling:resourceType=\"granite/ui/components/coral/foundation/form/hidden\"\n+                                            name=\"./config/messages/download-add/eventId\"\n+                                            value=\"download-add\"/>\n+                                        <style\n+                                            jcr:primaryType=\"nt:unstructured\"\n+                                            sling:resourceType=\"granite/ui/components/coral/foundation/form/select\"\n+                                            fieldLabel=\"Message Style\"\n+                                            name=\"./config/messages/download-add/style\">\n+                                            <items jcr:primaryType=\"nt:unstructured\">\n+                                                <success\n+                                                    jcr:primaryType=\"nt:unstructured\"\n+                                                    text=\"Success\"\n+                                                    value=\"success\"/>\n+                                                <info\n+                                                    jcr:primaryType=\"nt:unstructured\"\n+                                                    text=\"Info\"\n+                                                    value=\"info\"/>\n+                                                <warn\n+                                                    jcr:primaryType=\"nt:unstructured\"\n+                                                    text=\"Warn\"\n+                                                    value=\"warn\"/>\n+                                                <error\n+                                                    jcr:primaryType=\"nt:unstructured\"\n+                                                    text=\"Error\"\n+                                                    value=\"error\"/>\n+                                            </items>\n+                                        </style>\n+                                        <text\n+                                            jcr:primaryType=\"nt:unstructured\"\n+                                            sling:resourceType=\"granite/ui/components/coral/foundation/form/textfield\"\n+                                            fieldLabel=\"Message Text\"\n+                                            name=\"./config/messages/download-add/text\"/>\n+                                    </items>\n+                          </download-add-fieldset>\n                     </items>\n                 </fieldset>\n             </items>"
  }
]
