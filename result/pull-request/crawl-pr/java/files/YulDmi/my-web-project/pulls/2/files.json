[
  {
    "sha": "2ea1a778a65ddae37bc67bbc10fba4e60b8a0575",
    "filename": "pom.xml",
    "status": "modified",
    "additions": 30,
    "deletions": 7,
    "changes": 37,
    "blob_url": "https://github.com/YulDmi/my-web-project/blob/00f7c2bef91b52faf080defba75799b97f49f828/pom.xml",
    "raw_url": "https://github.com/YulDmi/my-web-project/raw/00f7c2bef91b52faf080defba75799b97f49f828/pom.xml",
    "contents_url": "https://api.github.com/repos/YulDmi/my-web-project/contents/pom.xml?ref=00f7c2bef91b52faf080defba75799b97f49f828",
    "patch": "@@ -13,18 +13,34 @@\n \t<version>0.0.1-SNAPSHOT</version>\n \t<name>my-web-project</name>\n \t<description>Demo project for Spring Boot</description>\n+\n \t<properties>\n \t\t<java.version>1.8</java.version>\n \t</properties>\n+\n \t<dependencies>\n \t\t<dependency>\n \t\t\t<groupId>org.springframework.boot</groupId>\n-\t\t\t<artifactId>spring-boot-starter</artifactId>\n+\t\t\t<artifactId>spring-boot-starter-data-jpa</artifactId>\n+\t\t</dependency>\n+\t\t<dependency>\n+\t\t\t<groupId>org.springframework.boot</groupId>\n+\t\t\t<artifactId>spring-boot-starter-thymeleaf</artifactId>\n \t\t</dependency>\n \t\t<dependency>\n \t\t\t<groupId>org.springframework.boot</groupId>\n \t\t\t<artifactId>spring-boot-starter-web</artifactId>\n \t\t</dependency>\n+\t\t<dependency>\n+\t\t\t<groupId>com.h2database</groupId>\n+\t\t\t<artifactId>h2</artifactId>\n+\t\t\t<version>1.4.199</version>\n+\t\t</dependency>\n+\t\t<dependency>\n+\t\t\t<groupId>org.flywaydb</groupId>\n+\t\t\t<artifactId>flyway-core</artifactId>\n+\t\t</dependency>\n+\n \t\t<dependency>\n \t\t\t<groupId>org.projectlombok</groupId>\n \t\t\t<artifactId>lombok</artifactId>\n@@ -34,6 +50,12 @@\n \t\t\t<groupId>org.springframework.boot</groupId>\n \t\t\t<artifactId>spring-boot-starter-test</artifactId>\n \t\t\t<scope>test</scope>\n+\t\t\t<exclusions>\n+\t\t\t\t<exclusion>\n+\t\t\t\t\t<groupId>org.junit.vintage</groupId>\n+\t\t\t\t\t<artifactId>junit-vintage-engine</artifactId>\n+\t\t\t\t</exclusion>\n+\t\t\t</exclusions>\n \t\t</dependency>\n \t</dependencies>\n \n@@ -42,15 +64,16 @@\n \t\t\t<plugin>\n \t\t\t\t<groupId>org.springframework.boot</groupId>\n \t\t\t\t<artifactId>spring-boot-maven-plugin</artifactId>\n+\t\t\t</plugin>\n+\t\t\t<plugin>\n+\t\t\t\t<groupId>org.flywaydb</groupId>\n+\t\t\t\t<artifactId>flyway-maven-plugin</artifactId>\n+\t\t\t\t<version>6.0.1</version>\n \t\t\t\t<configuration>\n-\t\t\t\t\t<excludes>\n-\t\t\t\t\t\t<exclude>\n-\t\t\t\t\t\t\t<groupId>org.projectlombok</groupId>\n-\t\t\t\t\t\t\t<artifactId>lombok</artifactId>\n-\t\t\t\t\t\t</exclude>\n-\t\t\t\t\t</excludes>\n+\t\t\t\t\t<configFiles>src/main/resources/flyway.conf</configFiles>\n \t\t\t\t</configuration>\n \t\t\t</plugin>\n+\n \t\t</plugins>\n \t</build>\n "
  },
  {
    "sha": "81273579e873434061afacacafe008b7726fffe6",
    "filename": "src/main/java/com/geekbrains/spring/MarketApplication.java",
    "status": "added",
    "additions": 13,
    "deletions": 0,
    "changes": 13,
    "blob_url": "https://github.com/YulDmi/my-web-project/blob/00f7c2bef91b52faf080defba75799b97f49f828/src/main/java/com/geekbrains/spring/MarketApplication.java",
    "raw_url": "https://github.com/YulDmi/my-web-project/raw/00f7c2bef91b52faf080defba75799b97f49f828/src/main/java/com/geekbrains/spring/MarketApplication.java",
    "contents_url": "https://api.github.com/repos/YulDmi/my-web-project/contents/src/main/java/com/geekbrains/spring/MarketApplication.java?ref=00f7c2bef91b52faf080defba75799b97f49f828",
    "patch": "@@ -0,0 +1,13 @@\n+package com.geekbrains.spring;\n+\n+import org.springframework.boot.SpringApplication;\n+import org.springframework.boot.autoconfigure.SpringBootApplication;\n+\n+@SpringBootApplication\n+public class MarketApplication {\n+\n+\tpublic static void main(String[] args) {\n+\t\tSpringApplication.run(MarketApplication.class, args);\n+\t}\n+\n+}"
  },
  {
    "sha": "07fef1d6dd919774b22732456a74b3e7c9520469",
    "filename": "src/main/java/com/geekbrains/spring/Student.java",
    "status": "added",
    "additions": 24,
    "deletions": 0,
    "changes": 24,
    "blob_url": "https://github.com/YulDmi/my-web-project/blob/00f7c2bef91b52faf080defba75799b97f49f828/src/main/java/com/geekbrains/spring/Student.java",
    "raw_url": "https://github.com/YulDmi/my-web-project/raw/00f7c2bef91b52faf080defba75799b97f49f828/src/main/java/com/geekbrains/spring/Student.java",
    "contents_url": "https://api.github.com/repos/YulDmi/my-web-project/contents/src/main/java/com/geekbrains/spring/Student.java?ref=00f7c2bef91b52faf080defba75799b97f49f828",
    "patch": "@@ -0,0 +1,24 @@\n+package com.geekbrains.spring;\n+\n+import lombok.Data;\n+import lombok.NoArgsConstructor;\n+\n+import javax.persistence.*;\n+\n+@Entity\n+@Table(name = \"students\")\n+@Data\n+@NoArgsConstructor\n+public class Student {\n+    @Id\n+    @GeneratedValue(strategy = GenerationType.IDENTITY)\n+    @Column(name = \"id\")\n+    private Long id;\n+\n+    @Column(name = \"name\")\n+    private String name;\n+\n+    @Column(name = \"age\")\n+    private Integer age;\n+\n+}"
  },
  {
    "sha": "87492353179ba930f015558dab1f4a701d559d33",
    "filename": "src/main/java/com/geekbrains/spring/StudentController.java",
    "status": "added",
    "additions": 43,
    "deletions": 0,
    "changes": 43,
    "blob_url": "https://github.com/YulDmi/my-web-project/blob/00f7c2bef91b52faf080defba75799b97f49f828/src/main/java/com/geekbrains/spring/StudentController.java",
    "raw_url": "https://github.com/YulDmi/my-web-project/raw/00f7c2bef91b52faf080defba75799b97f49f828/src/main/java/com/geekbrains/spring/StudentController.java",
    "contents_url": "https://api.github.com/repos/YulDmi/my-web-project/contents/src/main/java/com/geekbrains/spring/StudentController.java?ref=00f7c2bef91b52faf080defba75799b97f49f828",
    "patch": "@@ -0,0 +1,43 @@\n+package com.geekbrains.spring;\n+\n+import lombok.AllArgsConstructor;\n+import org.springframework.stereotype.Controller;\n+import org.springframework.ui.Model;\n+import org.springframework.web.bind.annotation.*;\n+\n+import java.util.List;\n+\n+@Controller\n+@AllArgsConstructor\n+public class StudentController {\n+    private StudentService studentService;\n+\n+    @GetMapping(\"/students\")\n+    public String getAll(Model model){\n+        List<Student> students = studentService.findAll();\n+        model.addAttribute(\"students\", students);\n+        return \"students\";\n+    }\n+\n+\n+    @PostMapping(\"/save\")\n+    public String save(@ModelAttribute  Student student) {\n+        studentService.save(student);\n+\n+        return \"redirect:/students\";\n+    }\n+\n+    @GetMapping(\"/update/{id}\")\n+    public String update(@PathVariable Long id, Model model) {\n+        model.addAttribute(studentService.findById(id).get());\n+        return \"student_change\";\n+    }\n+\n+    @GetMapping(\"/delete/{id}\")\n+    public String delete(@PathVariable Long id){\n+        studentService.delete(id);\n+        return \"redirect:/students\";\n+    }\n+\n+\n+}"
  },
  {
    "sha": "d6c6390f838772404612a6860b228eeed520e659",
    "filename": "src/main/java/com/geekbrains/spring/StudentRepository.java",
    "status": "added",
    "additions": 14,
    "deletions": 0,
    "changes": 14,
    "blob_url": "https://github.com/YulDmi/my-web-project/blob/00f7c2bef91b52faf080defba75799b97f49f828/src/main/java/com/geekbrains/spring/StudentRepository.java",
    "raw_url": "https://github.com/YulDmi/my-web-project/raw/00f7c2bef91b52faf080defba75799b97f49f828/src/main/java/com/geekbrains/spring/StudentRepository.java",
    "contents_url": "https://api.github.com/repos/YulDmi/my-web-project/contents/src/main/java/com/geekbrains/spring/StudentRepository.java?ref=00f7c2bef91b52faf080defba75799b97f49f828",
    "patch": "@@ -0,0 +1,14 @@\n+package com.geekbrains.spring;\n+\n+import org.springframework.data.jpa.repository.JpaRepository;\n+import org.springframework.data.jpa.repository.JpaSpecificationExecutor;\n+import org.springframework.stereotype.Repository;\n+\n+import java.util.Optional;\n+\n+@Repository\n+public interface StudentRepository extends JpaRepository<Student, Long>, JpaSpecificationExecutor<Student> {\n+\n+    Optional<Student> findById(Long id);\n+\n+}\n\\ No newline at end of file"
  },
  {
    "sha": "4285d2062e37ae3e2e080ac579f88df1fe199477",
    "filename": "src/main/java/com/geekbrains/spring/StudentService.java",
    "status": "added",
    "additions": 31,
    "deletions": 0,
    "changes": 31,
    "blob_url": "https://github.com/YulDmi/my-web-project/blob/00f7c2bef91b52faf080defba75799b97f49f828/src/main/java/com/geekbrains/spring/StudentService.java",
    "raw_url": "https://github.com/YulDmi/my-web-project/raw/00f7c2bef91b52faf080defba75799b97f49f828/src/main/java/com/geekbrains/spring/StudentService.java",
    "contents_url": "https://api.github.com/repos/YulDmi/my-web-project/contents/src/main/java/com/geekbrains/spring/StudentService.java?ref=00f7c2bef91b52faf080defba75799b97f49f828",
    "patch": "@@ -0,0 +1,31 @@\n+package com.geekbrains.spring;\n+\n+import lombok.AllArgsConstructor;\n+import org.springframework.stereotype.Service;\n+\n+import java.util.List;\n+import java.util.Optional;\n+\n+@Service\n+@AllArgsConstructor\n+public class StudentService {\n+\n+    private StudentRepository studentRepository;\n+\n+    public Optional<Student> findById(Long id) {\n+        return studentRepository.findById(id);\n+    }\n+\n+    public Student save(Student student){\n+        return studentRepository.save(student);\n+    }\n+\n+    public List<Student> findAll() {\n+        return studentRepository.findAll();\n+    }\n+\n+    public void delete(Long id) {\n+        studentRepository.deleteById(id);\n+    }\n+\n+}"
  },
  {
    "sha": "d89cbd69bd3d4860aa2cdcea17914646859bc6d5",
    "filename": "src/main/resources/application.yaml",
    "status": "modified",
    "additions": 12,
    "deletions": 1,
    "changes": 13,
    "blob_url": "https://github.com/YulDmi/my-web-project/blob/00f7c2bef91b52faf080defba75799b97f49f828/src/main/resources/application.yaml",
    "raw_url": "https://github.com/YulDmi/my-web-project/raw/00f7c2bef91b52faf080defba75799b97f49f828/src/main/resources/application.yaml",
    "contents_url": "https://api.github.com/repos/YulDmi/my-web-project/contents/src/main/resources/application.yaml?ref=00f7c2bef91b52faf080defba75799b97f49f828",
    "patch": "@@ -1,4 +1,15 @@\n server:\n    port: 8189\n    servlet:\n-      context-path: /socket\n\\ No newline at end of file\n+      context-path: /spring\n+      spring:\n+         datasource:\n+            driver-class-name: org.h2.Driver\n+            url: jdbc:h2:mem:springbase;MODE=PostgreSQL\n+            username: sa\n+            password:\n+         jpa:\n+            show-sql: true\n+            properties:\n+               hibernate:\n+                  dialect: org.hibernate.dialect.H2Dialect"
  },
  {
    "sha": "ef840464658a92cf2186c1cb04eb6045ddcb08a2",
    "filename": "src/main/resources/db/migration/V1__initialize.sql",
    "status": "added",
    "additions": 16,
    "deletions": 0,
    "changes": 16,
    "blob_url": "https://github.com/YulDmi/my-web-project/blob/00f7c2bef91b52faf080defba75799b97f49f828/src/main/resources/db/migration/V1__initialize.sql",
    "raw_url": "https://github.com/YulDmi/my-web-project/raw/00f7c2bef91b52faf080defba75799b97f49f828/src/main/resources/db/migration/V1__initialize.sql",
    "contents_url": "https://api.github.com/repos/YulDmi/my-web-project/contents/src/main/resources/db/migration/V1__initialize.sql?ref=00f7c2bef91b52faf080defba75799b97f49f828",
    "patch": "@@ -0,0 +1,16 @@\n+DROP TABLE IF EXISTS students;\n+\n+CREATE TABLE IF NOT EXISTS students\n+(\n+    id    bigint AUTO_INCREMENT PRIMARY KEY,\n+    name VARCHAR(255) UNIQUE NOT NULL,\n+    age  INTEGER\n+);\n+\n+INSERT INTO students (name, age)\n+VALUES\n+('Student1', 30),\n+('Student2', 21),\n+('Student3', 22),\n+('Student4', 18),\n+('Student5', 24);\n\\ No newline at end of file"
  },
  {
    "sha": "1d0996efed9fc43bccc3a2a379d9b8e60371117f",
    "filename": "src/main/resources/flyway.conf",
    "status": "added",
    "additions": 4,
    "deletions": 0,
    "changes": 4,
    "blob_url": "https://github.com/YulDmi/my-web-project/blob/00f7c2bef91b52faf080defba75799b97f49f828/src/main/resources/flyway.conf",
    "raw_url": "https://github.com/YulDmi/my-web-project/raw/00f7c2bef91b52faf080defba75799b97f49f828/src/main/resources/flyway.conf",
    "contents_url": "https://api.github.com/repos/YulDmi/my-web-project/contents/src/main/resources/flyway.conf?ref=00f7c2bef91b52faf080defba75799b97f49f828",
    "patch": "@@ -0,0 +1,4 @@\n+flyway.url=jdbc:h2:mem:springbase;\n+flyway.schemas=springbase\n+flyway.user=sa\n+flyway.password=\n\\ No newline at end of file"
  },
  {
    "sha": "02a9354134b7e59eb5bf63a411c7fc8481ddc302",
    "filename": "src/main/resources/templates/student_change.html",
    "status": "added",
    "additions": 34,
    "deletions": 0,
    "changes": 34,
    "blob_url": "https://github.com/YulDmi/my-web-project/blob/00f7c2bef91b52faf080defba75799b97f49f828/src/main/resources/templates/student_change.html",
    "raw_url": "https://github.com/YulDmi/my-web-project/raw/00f7c2bef91b52faf080defba75799b97f49f828/src/main/resources/templates/student_change.html",
    "contents_url": "https://api.github.com/repos/YulDmi/my-web-project/contents/src/main/resources/templates/student_change.html?ref=00f7c2bef91b52faf080defba75799b97f49f828",
    "patch": "@@ -0,0 +1,34 @@\n+<!DOCTYPE html>\n+\n+<html xmlns:th=\"http://www.thymeleaf.org\">\n+<head>\n+    <meta charset=\"utf-8\">\n+    <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css\">\n+    <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js\"></script>\n+    <script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js\"></script>\n+</head>\n+<body>\n+<div class=\"container\">\n+\n+    <h2>Редактировать студента</h2>\n+\n+    <form method=\"POST\" th:action=\"@{/save}\" th:object=${student}>\n+        <input th:field=\"*{id}\" type=\"hidden\" class=\"form-control\">\n+        <div class=\"form-row\">\n+            <div class=\"col form-group\">\n+                <label>Имя</label>\n+                <input th:field=\"*{name}\" type=\"text\" class=\"form-control\" placeholder=\"Имя\">\n+            </div>\n+            <div class=\"col form-group\">\n+                <label>Возраст</label>\n+                <input th:field=\"*{age}\" type=\"number\" class=\"form-control\" placeholder=\"Возраст\">\n+            </div>\n+        </div>\n+        <div class=\"form-group\">\n+            <button class=\"btn btn-primary\" type=\"submit\">Сохранить</button>\n+            <a class=\"btn btn-primary\" th:href=\"@{/students}\">Отменить</a>\n+        </div>\n+    </form>\n+</div>\n+</body>\n+</html>\n\\ No newline at end of file"
  },
  {
    "sha": "10fa630e68ef5de596bbd371de54c098fe9356bf",
    "filename": "src/main/resources/templates/students.html",
    "status": "added",
    "additions": 61,
    "deletions": 0,
    "changes": 61,
    "blob_url": "https://github.com/YulDmi/my-web-project/blob/00f7c2bef91b52faf080defba75799b97f49f828/src/main/resources/templates/students.html",
    "raw_url": "https://github.com/YulDmi/my-web-project/raw/00f7c2bef91b52faf080defba75799b97f49f828/src/main/resources/templates/students.html",
    "contents_url": "https://api.github.com/repos/YulDmi/my-web-project/contents/src/main/resources/templates/students.html?ref=00f7c2bef91b52faf080defba75799b97f49f828",
    "patch": "@@ -0,0 +1,61 @@\n+<!DOCTYPE html>\n+\n+<html xmlns:th=\"http://www.thymeleaf.org\">\n+<head>\n+    <meta charset=\"utf-8\">\n+    <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css\">\n+    <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js\"></script>\n+    <script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js\"></script>\n+</head>\n+<body>\n+<div class=\"container\">\n+    <h1>Студенты</h1>\n+\n+    <br>\n+    <span th:if=\"${students.isEmpty()}\">Студентов нет</span>\n+    <table class=\"table\" th:if=\"${!students.isEmpty()}\">\n+        <thead>\n+        <tr>\n+            <td>ID</td>\n+            <td>Имя</td>\n+            <td>Возраст</td>\n+            <td> </td>\n+            <td> </td>\n+        </tr>\n+        </thead>\n+        <tbody>\n+        <tr th:each=\"s : ${students}\">\n+            <td th:text=\"${s.id}\"/>\n+            <td th:text=\"${s.name}\"/>\n+            <td th:text=\"${s.age}\"/>\n+            <td>\n+                <a class=\"btn btn-success\" th:href=\"@{'/delete/' + ${s.id}}\">Удалить</a>\n+            </td>\n+            <td>\n+                <a class=\"btn btn-success\" th:href=\"@{'/update/' + ${s.id}}\">Редактировать</a>\n+            </td>\n+            </td>\n+        </tr>\n+        </tbody>\n+    </table>\n+    <br>\n+    <h2>Добавить студента</h2>\n+\n+    <form method=\"POST\" th:action=\"@{/save}\" >\n+        <div class=\"form-row\">\n+            <div class=\"col form-group\">\n+                <label>Имя</label>\n+                <input  name=\"name\" type=\"text\" class=\"form-control\" placeholder=\"Имя\">\n+            </div>\n+            <div class=\"col form-group\">\n+                <label>Возраст</label>\n+                <input name=\"age\" type=\"number\" class=\"form-control\" placeholder=\"Возраст\">\n+            </div>\n+        </div>\n+        <div class=\"form-group\">\n+            <button class=\"btn btn-primary\" type=\"submit\">Добавить</button>\n+            <a class=\"btn btn-primary\" th:href=\"@{/students}\">Отменить</a>\n+        </div>\n+    </form>\n+</div>\n+</body>"
  }
]
