[
  {
    "sha": "a2515869fc13c0b2be07da7dc01c2ce48c1bd7af",
    "filename": ".github/workflows/build.yml",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/vivo-project/VIVO/blob/a17f45c20fe5d5d4f7523cb154c01473a0dcdc57/.github/workflows/build.yml",
    "raw_url": "https://github.com/vivo-project/VIVO/raw/a17f45c20fe5d5d4f7523cb154c01473a0dcdc57/.github/workflows/build.yml",
    "contents_url": "https://api.github.com/repos/vivo-project/VIVO/contents/.github/workflows/build.yml?ref=a17f45c20fe5d5d4f7523cb154c01473a0dcdc57",
    "patch": "@@ -28,4 +28,4 @@ jobs:\n           java-version: 11\n \n       - name: Maven Build\n-        run: mvn clean install\n+        run: mvn clean package -s installer/example-settings.xml"
  },
  {
    "sha": "82012b89624eab1be1d8ad5c1ed81e2b4a5d02b3",
    "filename": ".github/workflows/deploy.yml",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/vivo-project/VIVO/blob/a17f45c20fe5d5d4f7523cb154c01473a0dcdc57/.github/workflows/deploy.yml",
    "raw_url": "https://github.com/vivo-project/VIVO/raw/a17f45c20fe5d5d4f7523cb154c01473a0dcdc57/.github/workflows/deploy.yml",
    "contents_url": "https://api.github.com/repos/vivo-project/VIVO/contents/.github/workflows/deploy.yml?ref=a17f45c20fe5d5d4f7523cb154c01473a0dcdc57",
    "patch": "@@ -35,7 +35,7 @@ jobs:\n           server-password: MAVEN_PASSWORD\n \n       - name: Maven Deploy\n-        run: mvn --batch-mode deploy\n+        run: mvn --batch-mode deploy -Pskip\n         env:\n           MAVEN_USERNAME: ${{ secrets.OSSRH_USERNAME }}\n           MAVEN_PASSWORD: ${{ secrets.OSSRH_TOKEN }}"
  },
  {
    "sha": "26a2cf4a3f7fa9850a46695c295550bfaf5ded48",
    "filename": ".github/workflows/docker.yml",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/vivo-project/VIVO/blob/a17f45c20fe5d5d4f7523cb154c01473a0dcdc57/.github/workflows/docker.yml",
    "raw_url": "https://github.com/vivo-project/VIVO/raw/a17f45c20fe5d5d4f7523cb154c01473a0dcdc57/.github/workflows/docker.yml",
    "contents_url": "https://api.github.com/repos/vivo-project/VIVO/contents/.github/workflows/docker.yml?ref=a17f45c20fe5d5d4f7523cb154c01473a0dcdc57",
    "patch": "@@ -32,7 +32,7 @@ jobs:\n           java-version: 11\n \n       - name: Maven Build\n-        run: mvn clean install\n+        run: mvn clean package -s installer/example-settings.xml\n \n       - name: Set up QEMU\n         uses: docker/setup-qemu-action@v1"
  },
  {
    "sha": "6632d8b3b9a27773c7c406ded8d4d99ff63bcc04",
    "filename": "Dockerfile",
    "status": "modified",
    "additions": 5,
    "deletions": 7,
    "changes": 12,
    "blob_url": "https://github.com/vivo-project/VIVO/blob/a17f45c20fe5d5d4f7523cb154c01473a0dcdc57/Dockerfile",
    "raw_url": "https://github.com/vivo-project/VIVO/raw/a17f45c20fe5d5d4f7523cb154c01473a0dcdc57/Dockerfile",
    "contents_url": "https://api.github.com/repos/vivo-project/VIVO/contents/Dockerfile?ref=a17f45c20fe5d5d4f7523cb154c01473a0dcdc57",
    "patch": "@@ -1,20 +1,18 @@\n FROM tomcat:9-jdk11-openjdk\n \n ARG SOLR_URL=http://localhost:8983/solr/vivocore\n-ARG VIVO_DIR=/opt/vivo/home\n+ARG VIVO_DIR=/usr/local/vivo/home\n ARG TDB_FILE_MODE=direct\n \n ENV SOLR_URL=${SOLR_URL}\n-ENV JAVA_OPTS=\"${JAVA_OPTS} -Dvivo-dir=$VIVO_DIR -Dtdb:fileMode=$TDB_FILE_MODE\"\n+ENV JAVA_OPTS=\"${JAVA_OPTS} -Dtdb:fileMode=$TDB_FILE_MODE\"\n \n-RUN mkdir /opt/vivo\n-RUN mkdir /opt/vivo/home\n+RUN mkdir /usr/local/vivo\n+RUN mkdir /usr/local/vivo/home\n \n+COPY ./installer/home/target/vivo /vivo-home\n COPY ./installer/webapp/target/vivo.war /usr/local/tomcat/webapps/ROOT.war\n \n-COPY ./home/src/main/resources/config/default.applicationSetup.n3 /applicationSetup.n3\n-COPY ./home/src/main/resources/config/default.runtime.properties /runtime.properties\n-\n COPY start.sh /start.sh\n \n EXPOSE 8080"
  },
  {
    "sha": "3b7f659837d546e92fb8a900ca4e38b3a80a1faf",
    "filename": "README.md",
    "status": "modified",
    "additions": 3,
    "deletions": 3,
    "changes": 6,
    "blob_url": "https://github.com/vivo-project/VIVO/blob/a17f45c20fe5d5d4f7523cb154c01473a0dcdc57/README.md",
    "raw_url": "https://github.com/vivo-project/VIVO/raw/a17f45c20fe5d5d4f7523cb154c01473a0dcdc57/README.md",
    "contents_url": "https://api.github.com/repos/vivo-project/VIVO/contents/README.md?ref=a17f45c20fe5d5d4f7523cb154c01473a0dcdc57",
    "patch": "@@ -37,13 +37,13 @@ RESET_CORE=false\n ```\n \n - `LOCAL_VIVO_HOME`: VIVO home directory on your host machine which will mount to volume in docker container.\n-- `RESET_HOME`: Convinience to reset VIVO home when starting container. **Caution** will delete local configuration, content, and configuration model.\n-- `RESET_CORE`: Convinience to reset VIVO Solr core when starting container. **Caution** will require complete reindex.\n+- `RESET_HOME`: Convinience to reset VIVO home when starting container. **Caution**, will delete local configuration, content, and configuration model.\n+- `RESET_CORE`: Convinience to reset VIVO Solr core when starting container. **Caution**, will require complete reindex.\n \n Build and start VIVO.\n \n ```\n-mvn clean install\n+mvn clean package -s installer/example-settings.xml\n docker-compose up\n ```\n "
  },
  {
    "sha": "d47dcf7d0df57bc64e862fef174947adc822532a",
    "filename": "docker-compose.yml",
    "status": "modified",
    "additions": 2,
    "deletions": 2,
    "changes": 4,
    "blob_url": "https://github.com/vivo-project/VIVO/blob/a17f45c20fe5d5d4f7523cb154c01473a0dcdc57/docker-compose.yml",
    "raw_url": "https://github.com/vivo-project/VIVO/raw/a17f45c20fe5d5d4f7523cb154c01473a0dcdc57/docker-compose.yml",
    "contents_url": "https://api.github.com/repos/vivo-project/VIVO/contents/docker-compose.yml?ref=a17f45c20fe5d5d4f7523cb154c01473a0dcdc57",
    "patch": "@@ -19,7 +19,7 @@ services:\n       context: ./\n       dockerfile: Dockerfile\n       args:\n-        - VIVO_DIR=/opt/vivo/home\n+        - VIVO_DIR=/usr/local/vivo/home\n         - TDB_FILE_MODE=direct\n         - SOLR_URL=http://solr:8983/solr/vivocore\n     environment:\n@@ -28,7 +28,7 @@ services:\n     ports:\n       - 8080:8080\n     volumes:\n-      - ${LOCAL_VIVO_HOME}:/opt/vivo/home\n+      - ${LOCAL_VIVO_HOME}:/usr/local/vivo/home\n     networks:\n       - vivo\n "
  },
  {
    "sha": "0acd91f0f1d3d844ffa80ec71b028c96275bc9bf",
    "filename": "home/src/main/resources/config/example.applicationSetup.n3",
    "status": "renamed",
    "additions": 0,
    "deletions": 0,
    "changes": 0,
    "blob_url": "https://github.com/vivo-project/VIVO/blob/a17f45c20fe5d5d4f7523cb154c01473a0dcdc57/home/src/main/resources/config/example.applicationSetup.n3",
    "raw_url": "https://github.com/vivo-project/VIVO/raw/a17f45c20fe5d5d4f7523cb154c01473a0dcdc57/home/src/main/resources/config/example.applicationSetup.n3",
    "contents_url": "https://api.github.com/repos/vivo-project/VIVO/contents/home/src/main/resources/config/example.applicationSetup.n3?ref=a17f45c20fe5d5d4f7523cb154c01473a0dcdc57",
    "previous_filename": "home/src/main/resources/config/default.applicationSetup.n3"
  },
  {
    "sha": "e5a9da9dc843c42cc2d39e342030205f9116b256",
    "filename": "home/src/main/resources/config/example.runtime.properties",
    "status": "renamed",
    "additions": 20,
    "deletions": 0,
    "changes": 20,
    "blob_url": "https://github.com/vivo-project/VIVO/blob/a17f45c20fe5d5d4f7523cb154c01473a0dcdc57/home/src/main/resources/config/example.runtime.properties",
    "raw_url": "https://github.com/vivo-project/VIVO/raw/a17f45c20fe5d5d4f7523cb154c01473a0dcdc57/home/src/main/resources/config/example.runtime.properties",
    "contents_url": "https://api.github.com/repos/vivo-project/VIVO/contents/home/src/main/resources/config/example.runtime.properties?ref=a17f45c20fe5d5d4f7523cb154c01473a0dcdc57",
    "patch": "@@ -19,6 +19,26 @@\n # BASIC PROPERTIES\n # -----------------------------------------------------------------------------\n \n+  #\n+  # This namespace will be used when generating URIs for objects created in the\n+  # editor. In order to serve linked data, the default namespace must be composed\n+  # as follows (optional elements in parentheses):\n+  #\n+  # scheme + server_name (+ port) (+ servlet_context) + \"/individual/\"\n+  #\n+  # For example, Cornell's default namespace is:\n+  #\n+  # http://vivo.cornell.edu/individual/\n+  #\n+Vitro.defaultNamespace = http://vivo.mydomain.edu/individual/\n+\n+  #\n+  # The email address of the root user for the VIVO application. The password\n+  # for this user is initially set to \"rootPassword\", but you will be asked to\n+  # change the password the first time you log in.\n+  #\n+rootUser.emailAddress = vivo_root@mydomain.edu\n+\n #\n # Argon2 password hashing parameters for time, memory and parallelism required to\n # compute a hash.",
    "previous_filename": "home/src/main/resources/config/default.runtime.properties"
  },
  {
    "sha": "0007c79c9cd60d92685986e227851d0d811db77a",
    "filename": "installer/example-settings.xml",
    "status": "added",
    "additions": 21,
    "deletions": 0,
    "changes": 21,
    "blob_url": "https://github.com/vivo-project/VIVO/blob/a17f45c20fe5d5d4f7523cb154c01473a0dcdc57/installer/example-settings.xml",
    "raw_url": "https://github.com/vivo-project/VIVO/raw/a17f45c20fe5d5d4f7523cb154c01473a0dcdc57/installer/example-settings.xml",
    "contents_url": "https://api.github.com/repos/vivo-project/VIVO/contents/installer/example-settings.xml?ref=a17f45c20fe5d5d4f7523cb154c01473a0dcdc57",
    "patch": "@@ -0,0 +1,21 @@\n+<settings xmlns=\"http://maven.apache.org/SETTINGS/1.1.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+          xsi:schemaLocation=\"http://maven.apache.org/SETTINGS/1.1.0 http://maven.apache.org/xsd/settings-1.1.0.xsd\">\n+\n+    <profiles>\n+        <profile>\n+            <id>defaults</id>\n+            <properties>\n+                <app-name>vivo</app-name>\n+\n+                <vivo-dir>/usr/local/vivo/home</vivo-dir>\n+                <tomcat-dir>/usr/local/tomcat</tomcat-dir>\n+\n+                <default-theme>wilma</default-theme>\n+            </properties>\n+        </profile>\n+    </profiles>\n+\n+    <activeProfiles>\n+        <activeProfile>defaults</activeProfile>\n+    </activeProfiles>\n+</settings>"
  },
  {
    "sha": "059daab37b85f2818c395d50518958ce40b8045a",
    "filename": "installer/home/pom.xml",
    "status": "modified",
    "additions": 97,
    "deletions": 13,
    "changes": 110,
    "blob_url": "https://github.com/vivo-project/VIVO/blob/a17f45c20fe5d5d4f7523cb154c01473a0dcdc57/installer/home/pom.xml",
    "raw_url": "https://github.com/vivo-project/VIVO/raw/a17f45c20fe5d5d4f7523cb154c01473a0dcdc57/installer/home/pom.xml",
    "contents_url": "https://api.github.com/repos/vivo-project/VIVO/contents/installer/home/pom.xml?ref=a17f45c20fe5d5d4f7523cb154c01473a0dcdc57",
    "patch": "@@ -23,24 +23,108 @@\n         <default-theme>wilma</default-theme>\n     </properties>\n \n+    <profiles>\n+        <profile>\n+            <id>package</id>\n+            <activation>\n+                <property><name>vivo-dir</name></property>\n+            </activation>\n+            <build>\n+                <finalName>${app-name}</finalName>\n+                <plugins>\n+                    <plugin>\n+                        <artifactId>maven-assembly-plugin</artifactId>\n+                        <configuration>\n+                            <descriptors>\n+                                <descriptor>src/main/assembly/home.xml</descriptor>\n+                            </descriptors>\n+                            <appendAssemblyId>false</appendAssemblyId>\n+                        </configuration>\n+                        <executions>\n+                            <execution>\n+                                <phase>package</phase>\n+                                <goals>\n+                                    <goal>single</goal>\n+                                </goals>\n+                            </execution>\n+                        </executions>\n+                    </plugin>\n+                </plugins>\n+            </build>\n+        </profile>\n+        <profile>\n+            <id>install</id>\n+            <activation>\n+                <property><name>vivo-dir</name></property>\n+            </activation>\n+            <build>\n+                <plugins>\n+                    <plugin>\n+                        <artifactId>maven-assembly-plugin</artifactId>\n+                        <configuration>\n+                            <descriptors>\n+                                <descriptor>src/main/assembly/home.xml</descriptor>\n+                            </descriptors>\n+                            <appendAssemblyId>false</appendAssemblyId>\n+                        </configuration>\n+                        <executions>\n+                            <execution>\n+                                <phase>package</phase>\n+                                <goals>\n+                                    <goal>single</goal>\n+                                </goals>\n+                            </execution>\n+                        </executions>\n+                    </plugin>\n+                    <plugin>\n+                        <artifactId>maven-antrun-plugin</artifactId>\n+                        <executions>\n+                            <execution>\n+                                <id>remove-webapp</id>\n+                                <phase>verify</phase>\n+                                <goals>\n+                                    <goal>run</goal>\n+                                </goals>\n+                                <configuration>\n+                                    <target>\n+                                        <delete dir=\"${vivo-dir}/rdf\" />\n+                                    </target>\n+                                </configuration>\n+                            </execution>\n+                        </executions>\n+                    </plugin>\n+                    <plugin>\n+                        <artifactId>maven-resources-plugin</artifactId>\n+                        <executions>\n+                            <execution>\n+                                <id>install</id>\n+                                <phase>install</phase>\n+                                <goals>\n+                                    <goal>copy-resources</goal>\n+                                </goals>\n+                                <configuration>\n+                                    <outputDirectory>${vivo-dir}</outputDirectory>\n+                                    <resources>\n+                                        <resource>\n+                                            <directory>${project.build.directory}/${project.build.finalName}</directory>\n+                                        </resource>\n+                                    </resources>\n+                                </configuration>\n+                            </execution>\n+                        </executions>\n+                    </plugin>\n+                </plugins>\n+            </build>\n+        </profile>\n+    </profiles>\n+\n     <build>\n         <plugins>\n             <plugin>\n-                <artifactId>maven-assembly-plugin</artifactId>\n+                <artifactId>maven-install-plugin</artifactId>\n                 <configuration>\n-                    <descriptors>\n-                        <descriptor>src/main/assembly/home.xml</descriptor>\n-                    </descriptors>\n-                    <appendAssemblyId>false</appendAssemblyId>\n+                    <skip>true</skip>\n                 </configuration>\n-                <executions>\n-                    <execution>\n-                        <phase>package</phase>\n-                        <goals>\n-                            <goal>single</goal>\n-                        </goals>\n-                    </execution>\n-                </executions>\n             </plugin>\n         </plugins>\n     </build>"
  },
  {
    "sha": "6de97e21d74d3627486e7cb3a8bdd89788f82f9f",
    "filename": "installer/home/src/main/assembly/home.xml",
    "status": "modified",
    "additions": 0,
    "deletions": 1,
    "changes": 1,
    "blob_url": "https://github.com/vivo-project/VIVO/blob/a17f45c20fe5d5d4f7523cb154c01473a0dcdc57/installer/home/src/main/assembly/home.xml",
    "raw_url": "https://github.com/vivo-project/VIVO/raw/a17f45c20fe5d5d4f7523cb154c01473a0dcdc57/installer/home/src/main/assembly/home.xml",
    "contents_url": "https://api.github.com/repos/vivo-project/VIVO/contents/installer/home/src/main/assembly/home.xml?ref=a17f45c20fe5d5d4f7523cb154c01473a0dcdc57",
    "patch": "@@ -4,7 +4,6 @@\n     <id>home</id>\n     <formats>\n         <format>dir</format>\n-        <format>tar</format>\n     </formats>\n     <includeBaseDirectory>false</includeBaseDirectory>\n     <dependencySets>"
  },
  {
    "sha": "2c966aa85b6385dec62e432f239a2412a193583e",
    "filename": "installer/pom.xml",
    "status": "modified",
    "additions": 66,
    "deletions": 0,
    "changes": 66,
    "blob_url": "https://github.com/vivo-project/VIVO/blob/a17f45c20fe5d5d4f7523cb154c01473a0dcdc57/installer/pom.xml",
    "raw_url": "https://github.com/vivo-project/VIVO/raw/a17f45c20fe5d5d4f7523cb154c01473a0dcdc57/installer/pom.xml",
    "contents_url": "https://api.github.com/repos/vivo-project/VIVO/contents/installer/pom.xml?ref=a17f45c20fe5d5d4f7523cb154c01473a0dcdc57",
    "patch": "@@ -29,6 +29,12 @@\n                     <encoding>UTF-8</encoding>\n                 </configuration>\n             </plugin>\n+            <plugin>\n+                <artifactId>maven-install-plugin</artifactId>\n+                <configuration>\n+                    <skip>true</skip>\n+                </configuration>\n+            </plugin>\n             <plugin>\n                 <groupId>org.apache.maven.plugins</groupId>\n                 <artifactId>maven-gpg-plugin</artifactId>\n@@ -142,6 +148,12 @@\n                             </execution>\n                         </executions>\n                     </plugin>\n+                    <plugin>\n+                        <artifactId>maven-dependency-plugin</artifactId>\n+                        <configuration>\n+                            <skip>true</skip>\n+                        </configuration>\n+                    </plugin>\n                     <plugin>\n                         <artifactId>maven-resources-plugin</artifactId>\n                         <version>2.6</version>\n@@ -165,6 +177,60 @@\n                             </execution>\n                         </executions>\n                     </plugin>\n+                    <plugin>\n+                        <artifactId>maven-war-plugin</artifactId>\n+                        <executions>\n+                            <execution>\n+                                <id>default-war</id>\n+                                <phase/>\n+                            </execution>\n+                        </executions>\n+                    </plugin>\n+                </plugins>\n+            </build>\n+        </profile>\n+        <profile>\n+            <id>install</id>\n+            <activation>\n+                <property><name>vivo-dir</name></property>\n+            </activation>\n+            <build>\n+                <plugins>\n+                    <plugin>\n+                        <artifactId>maven-enforcer-plugin</artifactId>\n+                        <executions>\n+                            <execution>\n+                                <id>enforce-properties</id>\n+                                <phase>validate</phase>\n+                                <goals>\n+                                    <goal>enforce</goal>\n+                                </goals>\n+                                <configuration>\n+                                    <rules>\n+                                        <requireProperty>\n+                                            <property>app-name</property>\n+                                            <message>You must provide an application name (app-name)</message>\n+                                        </requireProperty>\n+                                    </rules>\n+                                </configuration>\n+                            </execution>\n+                        </executions>\n+                    </plugin>\n+                </plugins>\n+            </build>\n+        </profile>\n+        <profile>\n+            <id>skip</id>\n+            <build>\n+                <plugins>\n+                    <plugin>\n+                        <groupId>org.apache.maven.plugins</groupId>\n+                        <artifactId>maven-deploy-plugin</artifactId>\n+                        <version>2.8.2</version>\n+                        <configuration>\n+                          <skip>true</skip>\n+                        </configuration>\n+                      </plugin>\n                 </plugins>\n             </build>\n         </profile>"
  },
  {
    "sha": "78973a347edc57715fc6e1181940ef1c7743cb01",
    "filename": "installer/webapp/pom.xml",
    "status": "modified",
    "additions": 108,
    "deletions": 69,
    "changes": 177,
    "blob_url": "https://github.com/vivo-project/VIVO/blob/a17f45c20fe5d5d4f7523cb154c01473a0dcdc57/installer/webapp/pom.xml",
    "raw_url": "https://github.com/vivo-project/VIVO/raw/a17f45c20fe5d5d4f7523cb154c01473a0dcdc57/installer/webapp/pom.xml",
    "contents_url": "https://api.github.com/repos/vivo-project/VIVO/contents/installer/webapp/pom.xml?ref=a17f45c20fe5d5d4f7523cb154c01473a0dcdc57",
    "patch": "@@ -19,9 +19,117 @@\n \n     <name>VIVO Install Web App</name>\n \n+    <profiles>\n+        <profile>\n+            <id>package</id>\n+            <activation>\n+                <property><name>app-name</name></property>\n+            </activation>\n+            <build>\n+                <finalName>${app-name}</finalName>\n+                <plugins>\n+                    <plugin>\n+                        <groupId>org.apache.maven.plugins</groupId>\n+                        <artifactId>maven-war-plugin</artifactId>\n+                        <configuration>\n+                            <archive>\n+                                <manifest>\n+                                    <addClasspath>true</addClasspath>\n+                                </manifest>\n+                            </archive>\n+                            <archiveClasses>false</archiveClasses>\n+                            <overlays>\n+                                <overlay>\n+                                    <groupId>org.vivoweb</groupId>\n+                                    <artifactId>vivo-webapp</artifactId>\n+                                    <type>war</type>\n+                                </overlay>\n+                                <!-- Overlays for multilingual support -->\n+                                <!-- overlay>\n+                                    <groupId>org.vivoweb</groupId>\n+                                    <artifactId>vitro-languages-webapp</artifactId>\n+                                    <type>war</type>\n+                                </overlay>\n+                                <overlay>\n+                                    <groupId>org.vivoweb</groupId>\n+                                    <artifactId>vivo-languages-webapp</artifactId>\n+                                    <type>war</type>\n+                                </overlay -->\n+                            </overlays>\n+                            <webResources>\n+                                <resource>\n+                                    <directory>src/main/webResources</directory>\n+                                    <filtering>true</filtering>\n+                                </resource>\n+                            </webResources>\n+                        </configuration>\n+                    </plugin>\n+                </plugins>\n+            </build>\n+        </profile>\n+        <profile>\n+            <id>install</id>\n+            <activation>\n+                <property><name>tomcat-dir</name></property>\n+            </activation>\n+            <build>\n+                <plugins>\n+                    <plugin>\n+                        <artifactId>maven-antrun-plugin</artifactId>\n+                        <executions>\n+                            <execution>\n+                                <id>remove-webapp</id>\n+                                <phase>verify</phase>\n+                                <goals>\n+                                    <goal>run</goal>\n+                                </goals>\n+                                <configuration>\n+                                    <target>\n+                                        <delete dir=\"${tomcat-dir}/webapps/${project.build.finalName}\" />\n+                                    </target>\n+                                </configuration>\n+                            </execution>\n+                        </executions>\n+                    </plugin>\n+                    <plugin>\n+                        <groupId>org.apache.maven.plugins</groupId>\n+                        <artifactId>maven-dependency-plugin</artifactId>\n+                        <executions>\n+                            <execution>\n+                                <id>install</id>\n+                                <phase>install</phase>\n+                                <goals>\n+                                    <goal>unpack</goal>\n+                                </goals>\n+                                <configuration>\n+                                    <artifactItems>\n+                                        <artifactItem>\n+                                            <groupId>${project.groupId}</groupId>\n+                                            <artifactId>${project.artifactId}</artifactId>\n+                                            <version>${project.version}</version>\n+                                            <type>war</type>\n+                                            <overWrite>true</overWrite>\n+                                            <outputDirectory>${tomcat-dir}/webapps/${project.build.finalName}</outputDirectory>\n+                                        </artifactItem>\n+                                    </artifactItems>\n+                                </configuration>\n+                            </execution>\n+                        </executions>\n+                    </plugin>\n+                </plugins>\n+            </build>\n+        </profile>\n+    </profiles>\n+\n     <build>\n         <finalName>${app-name}</finalName>\n         <plugins>\n+            <plugin>\n+                <artifactId>maven-install-plugin</artifactId>\n+                <configuration>\n+                    <skip>true</skip>\n+                </configuration>\n+            </plugin>\n             <plugin>\n                 <artifactId>maven-clean-plugin</artifactId>\n                 <configuration>\n@@ -32,75 +140,6 @@\n                     </filesets>\n                 </configuration>\n             </plugin>\n-            <plugin>\n-                <groupId>org.apache.maven.plugins</groupId>\n-                <artifactId>maven-dependency-plugin</artifactId>\n-\n-                <configuration>\n-                    <skip>false</skip>\n-                </configuration>\n-                <executions>\n-                    <execution>\n-                        <id>include-home</id>\n-                        <phase>process-resources</phase>\n-                        <goals>\n-                            <goal>copy</goal>\n-                        </goals>\n-                        <configuration>\n-                            <artifactItems>\n-                                <artifactItem>\n-                                    <groupId>org.vivoweb</groupId>\n-                                    <artifactId>vivo-installer-home</artifactId>\n-                                    <version>${project.version}</version>\n-                                    <type>tar</type>\n-                                    <destFileName>vivo-home.tar</destFileName>\n-                                    <outputDirectory>${project.build.directory}/home-files</outputDirectory>\n-                                </artifactItem>\n-                            </artifactItems>\n-                        </configuration>\n-                    </execution>\n-                </executions>\n-            </plugin>\n-            <plugin>\n-                <groupId>org.apache.maven.plugins</groupId>\n-                <artifactId>maven-war-plugin</artifactId>\n-                <configuration>\n-                    <archive>\n-                        <manifest>\n-                            <addClasspath>true</addClasspath>\n-                        </manifest>\n-                    </archive>\n-                    <archiveClasses>false</archiveClasses>\n-                    <overlays>\n-                        <overlay>\n-                            <groupId>org.vivoweb</groupId>\n-                            <artifactId>vivo-webapp</artifactId>\n-                            <type>war</type>\n-                        </overlay>\n-                        <!-- Overlays for multilingual support -->\n-                        <overlay>\n-                            <groupId>org.vivoweb</groupId>\n-                            <artifactId>vitro-languages-webapp-core</artifactId>\n-                            <type>war</type>\n-                        </overlay>\n-                        <overlay>\n-                            <groupId>org.vivoweb</groupId>\n-                            <artifactId>vivo-languages-webapp-core</artifactId>\n-                            <type>war</type>\n-                        </overlay>\n-                    </overlays>\n-                    <webResources>\n-                        <resource>\n-                            <directory>src/main/webResources</directory>\n-                            <filtering>true</filtering>\n-                        </resource>\n-                        <resource>\n-                            <directory>${project.build.directory}/home-files/</directory>\n-                            <targetPath>WEB-INF/resources/home-files/</targetPath>\n-                        </resource>\n-                    </webResources>\n-                </configuration>\n-            </plugin>\n         </plugins>\n     </build>\n "
  },
  {
    "sha": "f4af100a8515470d5c3cd5b73e7e6ae358c396d4",
    "filename": "installer/webapp/src/main/webResources/META-INF/context.xml",
    "status": "modified",
    "additions": 0,
    "deletions": 43,
    "changes": 43,
    "blob_url": "https://github.com/vivo-project/VIVO/blob/a17f45c20fe5d5d4f7523cb154c01473a0dcdc57/installer/webapp/src/main/webResources/META-INF/context.xml",
    "raw_url": "https://github.com/vivo-project/VIVO/raw/a17f45c20fe5d5d4f7523cb154c01473a0dcdc57/installer/webapp/src/main/webResources/META-INF/context.xml",
    "contents_url": "https://api.github.com/repos/vivo-project/VIVO/contents/installer/webapp/src/main/webResources/META-INF/context.xml?ref=a17f45c20fe5d5d4f7523cb154c01473a0dcdc57",
    "patch": "@@ -1,52 +1,9 @@\n <Context> <!-- useHttpOnly=\"false\" -->\n-\n-   <!--\n-     # The 'home' property specifies the location of VIVO HOME.\n-     # The system user used to run the VIVO web application must have write access\n-     # to the parent directory of the directory defined in this property, if VIVO HOME\n-     # does not already exist.\n-     # If this directory already exists, the system user used to run the VIVO web application\n-     # must have write access to this directory.\n-   -->\n    <Environment\n         type=\"java.lang.String\" \n         name=\"vitro/home\"\n         value=\"${vivo-dir}\" override=\"true\"/>\n \n-   <!--\n-     # The name of the application (possibly not used).\n-   -->\n-   <Environment\n-           type=\"java.lang.String\"\n-           name=\"vitro/appName\"\n-           value=\"${app-name}\" override=\"true\"/>\n-\n-   <!--\n-     # The email address of the root user for the VIVO application. The password\n-     # for this user is initially set to \"rootPassword\", but you will be asked to\n-     # change the password the first time you log in.\n-   -->\n-   <Environment\n-           type=\"java.lang.String\"\n-           name=\"vitro/rootUserAddress\"\n-           value=\"vivo_root@mydomain.edu\" override=\"true\"/>\n-\n-   <!--\n-     # This namespace will be used when generating URIs for objects created in the\n-     # editor. In order to serve linked data, the default namespace must be composed\n-     # as follows (optional elements in parentheses):\n-     #\n-     # scheme + server_name (+ port) (+ servlet_context) + \"/individual/\"\n-     #\n-     # For example, Cornell's default namespace is:\n-     #\n-     # http://vivo.cornell.edu/individual/\n-   -->\n-   <Environment\n-           type=\"java.lang.String\"\n-           name=\"vitro/defaultNamespace\"\n-           value=\"http://vivo.mydomain.edu/individual/\" override=\"true\"/>\n-\n    <!-- Disable persist sessions on shut down.-->\n    <Manager pathname=\"\" />\n </Context>"
  },
  {
    "sha": "1d3c0c4a87095919d91d1b4723bd739254222052",
    "filename": "installer/webapp/src/main/webResources/WEB-INF/classes/log4j.properties",
    "status": "modified",
    "additions": 1,
    "deletions": 1,
    "changes": 2,
    "blob_url": "https://github.com/vivo-project/VIVO/blob/a17f45c20fe5d5d4f7523cb154c01473a0dcdc57/installer/webapp/src/main/webResources/WEB-INF/classes/log4j.properties",
    "raw_url": "https://github.com/vivo-project/VIVO/raw/a17f45c20fe5d5d4f7523cb154c01473a0dcdc57/installer/webapp/src/main/webResources/WEB-INF/classes/log4j.properties",
    "contents_url": "https://api.github.com/repos/vivo-project/VIVO/contents/installer/webapp/src/main/webResources/WEB-INF/classes/log4j.properties?ref=a17f45c20fe5d5d4f7523cb154c01473a0dcdc57",
    "patch": "@@ -24,7 +24,7 @@\n # debug.log4j.properties exists will be used instead, if it exists, but is not stored in Subversion.\n \n log4j.appender.AllAppender=org.apache.log4j.RollingFileAppender\n-log4j.appender.AllAppender.File= ${catalina.base}/logs/vivo.all.log\n+log4j.appender.AllAppender.File=${catalina.base}/logs/${app-name}.all.log\n log4j.appender.AllAppender.MaxFileSize=10MB\n log4j.appender.AllAppender.MaxBackupIndex=10\n log4j.appender.AllAppender.layout=org.apache.log4j.PatternLayout"
  },
  {
    "sha": "0665c5f285ed4890c5b1ddc94774fecd6fb77cfb",
    "filename": "pom.xml",
    "status": "modified",
    "additions": 0,
    "deletions": 1,
    "changes": 1,
    "blob_url": "https://github.com/vivo-project/VIVO/blob/a17f45c20fe5d5d4f7523cb154c01473a0dcdc57/pom.xml",
    "raw_url": "https://github.com/vivo-project/VIVO/raw/a17f45c20fe5d5d4f7523cb154c01473a0dcdc57/pom.xml",
    "contents_url": "https://api.github.com/repos/vivo-project/VIVO/contents/pom.xml?ref=a17f45c20fe5d5d4f7523cb154c01473a0dcdc57",
    "patch": "@@ -56,7 +56,6 @@\n     </scm>\n \n     <properties>\n-        <app-name>vivo</app-name>\n         <vitro-version>${project.version}</vitro-version>\n         <vivo-dir>${basedir}</vivo-dir>\n         <maven.build.timestamp.format>yyyy-MM-dd HH:mm:ss</maven.build.timestamp.format>"
  },
  {
    "sha": "0f9ef7d9212aebe5b2580d4b38cff27233017949",
    "filename": "start.sh",
    "status": "modified",
    "additions": 32,
    "deletions": 24,
    "changes": 56,
    "blob_url": "https://github.com/vivo-project/VIVO/blob/a17f45c20fe5d5d4f7523cb154c01473a0dcdc57/start.sh",
    "raw_url": "https://github.com/vivo-project/VIVO/raw/a17f45c20fe5d5d4f7523cb154c01473a0dcdc57/start.sh",
    "contents_url": "https://api.github.com/repos/vivo-project/VIVO/contents/start.sh?ref=a17f45c20fe5d5d4f7523cb154c01473a0dcdc57",
    "patch": "@@ -9,43 +9,51 @@ fi\n \n # allow easier reset home with `docker run -e RESET_HOME=true`\n if [[ \"$RESET_HOME\" = \"true\" ]]; then\n-  echo 'Clearing VIVO HOME /opt/vivo/home'\n-  rm -rf /opt/vivo/home/*\n+  echo 'Clearing VIVO HOME /usr/local/vivo/home'\n+  rm -rf /usr/local/vivo/home/*\n fi\n \n-# ensure home config directory exists\n-mkdir -p /opt/vivo/home/config\n+# copy home bin if not exists\n+if [ ! -d /usr/local/vivo/home/bin ]; then\n+  echo \"Copying home bin directory to /usr/local/vivo/home/bin\"\n+  cp -r /vivo-home/bin /usr/local/vivo/home/bin\n+fi\n \n-# generate digest.md5 for existing VIVO home if not already exist\n-if [ ! -f /opt/vivo/home/digest.md5 ]; then\n-  find /opt/vivo/home -type f | grep -E '^/opt/vivo/home/bin/|^/opt/vivo/home/config/|^/opt/vivo/home/rdf/' | xargs md5sum > /opt/vivo/home/digest.md5\n-  echo \"Generated digest.md5 for VIVO home\"\n-  cat /opt/vivo/home/digest.md5\n+# copy home config if not exists\n+if [ ! -d /usr/local/vivo/home/config ]; then\n+  echo \"Copying home config directory to /usr/local/vivo/home/config\"\n+  cp -r /vivo-home/config /usr/local/vivo/home/config\n fi\n \n-# only move runtime.properties first time and if it does not already exist in target home directory\n-if [ -f /runtime.properties ]; then\n-  # template runtime.properties vitro.local.solr.url value to $SOLR_URL value\n-  echo \"Templating runtime.properties vitro.local.solr.url = $SOLR_URL\"\n-  sed -i \"s,http://localhost:8983/solr/vivocore,$SOLR_URL,g\" /runtime.properties\n+# copy home rdf if not exists\n+if [ ! -d /usr/local/vivo/home/rdf ]; then\n+  echo \"Copying home rdf directory to /usr/local/vivo/home/rdf\"\n+  cp -r /vivo-home/rdf /usr/local/vivo/home/rdf\n+fi\n \n-  if [ ! -f /opt/vivo/home/config/runtime.properties ]\n+# copy runtime.properties if it does not already exist in target home directory\n+if [ -f /usr/local/vivo/home/config/example.runtime.properties ]; then\n+  if [ ! -f /usr/local/vivo/home/config/runtime.properties ]\n   then\n-    echo \"First time: moving /runtime.properties to /opt/vivo/home/config/runtime.properties\"\n-    mv -n /runtime.properties /opt/vivo/home/config/runtime.properties\n+    echo \"Copying example.runtime.properties to /usr/local/vivo/home/config/runtime.properties\"\n+    cp /usr/local/vivo/home/config/example.runtime.properties /usr/local/vivo/home/config/runtime.properties\n+\n+    # template runtime.properties vitro.local.solr.url value to $SOLR_URL value\n+    echo \"Templating runtime.properties vitro.local.solr.url = $SOLR_URL\"\n+    sed -i \"s,http://localhost:8983/solr/vivocore,$SOLR_URL,g\" /usr/local/vivo/home/config/runtime.properties\n   else\n-    echo \"Using existing /opt/vivo/home/config/runtime.properties\"\n+    echo \"Using existing /usr/local/vivo/home/config/runtime.properties\"\n   fi\n fi\n \n-# only move applicationSetup.n3 first time and if it does not already exist in target home directory\n-if [ -f /applicationSetup.n3 ]; then\n-  if [ ! -f /opt/vivo/home/config/applicationSetup.n3 ]\n+# copy applicationSetup.n3 if it does not already exist in target home directory\n+if [ -f /usr/local/vivo/home/config/example.applicationSetup.n3 ]; then\n+  if [ ! -f /usr/local/vivo/home/config/applicationSetup.n3 ]\n   then\n-    echo \"First time: moving /applicationSetup.n3 to /opt/vivo/home/config/applicationSetup.n3\"\n-    mv -n /applicationSetup.n3 /opt/vivo/home/config/applicationSetup.n3\n+    echo \"Copying example.applicationSetup.n3 to /usr/local/vivo/home/config/applicationSetup.n3\"\n+    cp /usr/local/vivo/home/config/example.applicationSetup.n3 /usr/local/vivo/home/config/applicationSetup.n3\n   else\n-    echo \"Using existing /opt/vivo/home/config/applicationSetup.n3\"\n+    echo \"Using existing /usr/local/vivo/home/config/applicationSetup.n3\"\n   fi\n fi\n "
  }
]
