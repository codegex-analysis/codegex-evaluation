[
  {
    "sha": "62adceffa4197c6e2daad5cbbf2e14bcc8e21125",
    "filename": ".circleci/config-2_1.yml",
    "status": "modified",
    "additions": 16,
    "deletions": 0,
    "changes": 16,
    "blob_url": "https://github.com/ekaterinadimitrova2/cassandra/blob/76b89240213ddddd098f398e58e5e72b548843a8/.circleci/config-2_1.yml",
    "raw_url": "https://github.com/ekaterinadimitrova2/cassandra/raw/76b89240213ddddd098f398e58e5e72b548843a8/.circleci/config-2_1.yml",
    "contents_url": "https://api.github.com/repos/ekaterinadimitrova2/cassandra/contents/.circleci/config-2_1.yml?ref=76b89240213ddddd098f398e58e5e72b548843a8",
    "patch": "@@ -109,6 +109,12 @@ j8_with_dtests_jobs: &j8_with_dtests_jobs\n         requires:\n           - start_utests_fqltool\n           - j8_build\n+    - start_utests_system_keyspace_directory:\n+        type: approval\n+    - utests_system_keyspace_directory:\n+        requires:\n+          - start_utests_fqltool\n+          - j8_build\n     - start_jvm_upgrade_dtest:\n         type: approval\n     - j8_dtest_jars_build:\n@@ -455,6 +461,16 @@ jobs:\n       - run_junit_tests:\n           target: fqltool-test\n \n+  utests_system_keyspace_directory:\n+    <<: *j8_par_executor\n+    steps:\n+      - attach_workspace:\n+          at: /home/cassandra\n+      - create_junit_containers\n+      - log_environment\n+      - run_parallel_junit_tests:\n+          target: testclasslist-system-keyspace-directory\n+\n   j8_dtests-with-vnodes:\n     <<: *j8_par_executor\n     steps:"
  },
  {
    "sha": "c3cfce0b700ff35fb9d05b4784acbebc321b4845",
    "filename": ".circleci/config.yml",
    "status": "modified",
    "additions": 169,
    "deletions": 169,
    "changes": 338,
    "blob_url": "https://github.com/ekaterinadimitrova2/cassandra/blob/76b89240213ddddd098f398e58e5e72b548843a8/.circleci/config.yml",
    "raw_url": "https://github.com/ekaterinadimitrova2/cassandra/raw/76b89240213ddddd098f398e58e5e72b548843a8/.circleci/config.yml",
    "contents_url": "https://api.github.com/repos/ekaterinadimitrova2/cassandra/contents/.circleci/config.yml?ref=76b89240213ddddd098f398e58e5e72b548843a8",
    "patch": "@@ -2,11 +2,11 @@ version: 2\n jobs:\n   j8_jvm_upgrade_dtests:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n-    resource_class: medium\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n+    resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n-    parallelism: 1\n+    parallelism: 4\n     steps:\n     - attach_workspace:\n         at: /home/cassandra\n@@ -93,11 +93,11 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j8_cqlsh-dtests-py2-with-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n-    resource_class: medium\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n+    resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n-    parallelism: 4\n+    parallelism: 50\n     steps:\n     - attach_workspace:\n         at: /home/cassandra\n@@ -170,11 +170,11 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j11_unit_tests:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n-    parallelism: 4\n+    parallelism: 25\n     steps:\n     - attach_workspace:\n         at: /home/cassandra\n@@ -262,11 +262,11 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j8_cqlsh-dtests-py38-no-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n-    resource_class: medium\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n+    resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n-    parallelism: 4\n+    parallelism: 50\n     steps:\n     - attach_workspace:\n         at: /home/cassandra\n@@ -339,11 +339,11 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j11_cqlsh-dtests-py3-with-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n-    resource_class: medium\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n+    resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n-    parallelism: 4\n+    parallelism: 50\n     steps:\n     - attach_workspace:\n         at: /home/cassandra\n@@ -417,11 +417,11 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j11_cqlsh-dtests-py3-no-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n-    resource_class: medium\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n+    resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n-    parallelism: 4\n+    parallelism: 50\n     steps:\n     - attach_workspace:\n         at: /home/cassandra\n@@ -495,11 +495,11 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j11_cqlsh-dtests-py38-with-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n-    resource_class: medium\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n+    resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n-    parallelism: 4\n+    parallelism: 50\n     steps:\n     - attach_workspace:\n         at: /home/cassandra\n@@ -573,11 +573,11 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j8_cqlsh-dtests-py3-with-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n-    resource_class: medium\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n+    resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n-    parallelism: 4\n+    parallelism: 50\n     steps:\n     - attach_workspace:\n         at: /home/cassandra\n@@ -650,11 +650,11 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j8_cqlsh-dtests-py2-no-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n-    resource_class: medium\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n+    resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n-    parallelism: 4\n+    parallelism: 50\n     steps:\n     - attach_workspace:\n         at: /home/cassandra\n@@ -727,11 +727,11 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j11_cqlsh-dtests-py2-with-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n-    resource_class: medium\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n+    resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n-    parallelism: 4\n+    parallelism: 50\n     steps:\n     - attach_workspace:\n         at: /home/cassandra\n@@ -805,11 +805,11 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j11_dtests-with-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n-    resource_class: medium\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n+    resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n-    parallelism: 4\n+    parallelism: 50\n     steps:\n     - attach_workspace:\n         at: /home/cassandra\n@@ -886,11 +886,11 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j8_dtests-no-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n-    resource_class: medium\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n+    resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n-    parallelism: 4\n+    parallelism: 50\n     steps:\n     - attach_workspace:\n         at: /home/cassandra\n@@ -944,11 +944,11 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j8_upgradetests-no-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n-    resource_class: medium\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n+    resource_class: xlarge\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n-    parallelism: 4\n+    parallelism: 100\n     steps:\n     - attach_workspace:\n         at: /home/cassandra\n@@ -1002,7 +1002,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   utests_stress:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1047,11 +1047,11 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j8_unit_tests:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n-    parallelism: 4\n+    parallelism: 25\n     steps:\n     - attach_workspace:\n         at: /home/cassandra\n@@ -1138,7 +1138,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j11_jvm_dtests:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1230,7 +1230,7 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j11_build:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1311,11 +1311,11 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j11_cqlsh-dtests-py2-no-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n-    resource_class: medium\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n+    resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n-    parallelism: 4\n+    parallelism: 50\n     steps:\n     - attach_workspace:\n         at: /home/cassandra\n@@ -1389,7 +1389,7 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j11_cqlshlib_tests:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1426,11 +1426,11 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j8_dtests-with-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n-    resource_class: medium\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n+    resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n-    parallelism: 4\n+    parallelism: 50\n     steps:\n     - attach_workspace:\n         at: /home/cassandra\n@@ -1484,11 +1484,11 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j11_cqlsh-dtests-py38-no-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n-    resource_class: medium\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n+    resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n-    parallelism: 4\n+    parallelism: 50\n     steps:\n     - attach_workspace:\n         at: /home/cassandra\n@@ -1562,11 +1562,11 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j8_jvm_dtests:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n-    resource_class: medium\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n+    resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n-    parallelism: 1\n+    parallelism: 10\n     steps:\n     - attach_workspace:\n         at: /home/cassandra\n@@ -1653,7 +1653,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j8_build:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1733,11 +1733,11 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j8_cqlsh-dtests-py3-no-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n-    resource_class: medium\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n+    resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n-    parallelism: 4\n+    parallelism: 50\n     steps:\n     - attach_workspace:\n         at: /home/cassandra\n@@ -1810,11 +1810,11 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j8_cqlsh-dtests-py38-with-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n-    resource_class: medium\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n+    resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n-    parallelism: 4\n+    parallelism: 50\n     steps:\n     - attach_workspace:\n         at: /home/cassandra\n@@ -1887,7 +1887,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   utests_long:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1930,9 +1930,100 @@ jobs:\n     - CCM_HEAP_NEWSIZE: 256M\n     - JAVA_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n+  utests_system_keyspace_directory:\n+    docker:\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n+    resource_class: medium\n+    working_directory: ~/\n+    shell: /bin/bash -eo pipefail -l\n+    parallelism: 25\n+    steps:\n+    - attach_workspace:\n+        at: /home/cassandra\n+    - run:\n+        name: Determine unit Tests to Run\n+        command: |\n+          # reminder: this code (along with all the steps) is independently executed on every circle container\n+          # so the goal here is to get the circleci script to return the tests *this* container will run\n+          # which we do via the `circleci` cli tool.\n+\n+          rm -fr ~/cassandra-dtest/upgrade_tests\n+          echo \"***java tests***\"\n+\n+          # get all of our unit test filenames\n+          set -eo pipefail && circleci tests glob \"$HOME/cassandra/test/unit/**/*.java\" > /tmp/all_java_unit_tests.txt\n+\n+          # split up the unit tests into groups based on the number of containers we have\n+          set -eo pipefail && circleci tests split --split-by=timings --timings-type=filename --index=${CIRCLE_NODE_INDEX} --total=${CIRCLE_NODE_TOTAL} /tmp/all_java_unit_tests.txt > /tmp/java_tests_${CIRCLE_NODE_INDEX}.txt\n+          set -eo pipefail && cat /tmp/java_tests_${CIRCLE_NODE_INDEX}.txt | sed \"s;^/home/cassandra/cassandra/test/unit/;;g\" | grep \"Test\\.java$\"  > /tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt\n+          echo \"** /tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt\"\n+          cat /tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt\n+        no_output_timeout: 15m\n+    - run:\n+        name: Log Environment Information\n+        command: |\n+          echo '*** id ***'\n+          id\n+          echo '*** cat /proc/cpuinfo ***'\n+          cat /proc/cpuinfo\n+          echo '*** free -m ***'\n+          free -m\n+          echo '*** df -m ***'\n+          df -m\n+          echo '*** ifconfig -a ***'\n+          ifconfig -a\n+          echo '*** uname -a ***'\n+          uname -a\n+          echo '*** mount ***'\n+          mount\n+          echo '*** env ***'\n+          env\n+          echo '*** java ***'\n+          which java\n+          java -version\n+    - run:\n+        name: Run Unit Tests (testclasslist-system-keyspace-directory)\n+        command: |\n+          set -x\n+          export PATH=$JAVA_HOME/bin:$PATH\n+          time mv ~/cassandra /tmp\n+          cd /tmp/cassandra\n+          if [ -d ~/dtest_jars ]; then\n+            cp ~/dtest_jars/dtest* /tmp/cassandra/build/\n+          fi\n+          test_timeout=$(grep 'name=\"test.unit.timeout\"' build.xml | awk -F'\"' '{print $4}' || true)\n+          if [ -z \"$test_timeout\" ]; then\n+            test_timeout=$(grep 'name=\"test.timeout\"' build.xml | awk -F'\"' '{print $4}')\n+          fi\n+          ant testclasslist-system-keyspace-directory -Dtest.timeout=\"$test_timeout\" -Dtest.classlistfile=/tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt  -Dtest.classlistprefix=unit\n+        no_output_timeout: 15m\n+    - store_test_results:\n+        path: /tmp/cassandra/build/test/output/\n+    - store_artifacts:\n+        path: /tmp/cassandra/build/test/output\n+        destination: junitxml\n+    - store_artifacts:\n+        path: /tmp/cassandra/build/test/logs\n+        destination: logs\n+    environment:\n+    - ANT_HOME: /usr/share/ant\n+    - LANG: en_US.UTF-8\n+    - KEEP_TEST_DIR: true\n+    - DEFAULT_DIR: /home/cassandra/cassandra-dtest\n+    - PYTHONIOENCODING: utf-8\n+    - PYTHONUNBUFFERED: true\n+    - CASS_DRIVER_NO_EXTENSIONS: true\n+    - CASS_DRIVER_NO_CYTHON: true\n+    - CASSANDRA_SKIP_SYNC: true\n+    - DTEST_REPO: git://github.com/apache/cassandra-dtest.git\n+    - DTEST_BRANCH: trunk\n+    - CCM_MAX_HEAP_SIZE: 1024M\n+    - CCM_HEAP_NEWSIZE: 256M\n+    - JAVA_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n+    - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j8_cqlshlib_tests:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1968,7 +2059,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   utests_fqltool:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -2013,11 +2104,11 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j11_dtests-no-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n-    resource_class: medium\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n+    resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n-    parallelism: 4\n+    parallelism: 50\n     steps:\n     - attach_workspace:\n         at: /home/cassandra\n@@ -2094,11 +2185,11 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   utests_compression:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n-    parallelism: 4\n+    parallelism: 25\n     steps:\n     - attach_workspace:\n         at: /home/cassandra\n@@ -2183,100 +2274,9 @@ jobs:\n     - CCM_HEAP_NEWSIZE: 256M\n     - JAVA_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n-  utests_system_keyspace_directory:\n-    docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n-    resource_class: medium\n-    working_directory: ~/\n-    shell: /bin/bash -eo pipefail -l\n-    parallelism: 4\n-    steps:\n-    - attach_workspace:\n-        at: /home/cassandra\n-    - run:\n-        name: Determine unit Tests to Run\n-        command: |\n-          # reminder: this code (along with all the steps) is independently executed on every circle container\n-          # so the goal here is to get the circleci script to return the tests *this* container will run\n-          # which we do via the `circleci` cli tool.\n-\n-          rm -fr ~/cassandra-dtest/upgrade_tests\n-          echo \"***java tests***\"\n-\n-          # get all of our unit test filenames\n-          set -eo pipefail && circleci tests glob \"$HOME/cassandra/test/unit/**/*.java\" > /tmp/all_java_unit_tests.txt\n-\n-          # split up the unit tests into groups based on the number of containers we have\n-          set -eo pipefail && circleci tests split --split-by=timings --timings-type=filename --index=${CIRCLE_NODE_INDEX} --total=${CIRCLE_NODE_TOTAL} /tmp/all_java_unit_tests.txt > /tmp/java_tests_${CIRCLE_NODE_INDEX}.txt\n-          set -eo pipefail && cat /tmp/java_tests_${CIRCLE_NODE_INDEX}.txt | sed \"s;^/home/cassandra/cassandra/test/unit/;;g\" | grep \"Test\\.java$\"  > /tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt\n-          echo \"** /tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt\"\n-          cat /tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt\n-        no_output_timeout: 15m\n-    - run:\n-        name: Log Environment Information\n-        command: |\n-          echo '*** id ***'\n-          id\n-          echo '*** cat /proc/cpuinfo ***'\n-          cat /proc/cpuinfo\n-          echo '*** free -m ***'\n-          free -m\n-          echo '*** df -m ***'\n-          df -m\n-          echo '*** ifconfig -a ***'\n-          ifconfig -a\n-          echo '*** uname -a ***'\n-          uname -a\n-          echo '*** mount ***'\n-          mount\n-          echo '*** env ***'\n-          env\n-          echo '*** java ***'\n-          which java\n-          java -version\n-    - run:\n-        name: Run Unit Tests (testclasslist-system-keyspace-directory)\n-        command: |\n-          set -x\n-          export PATH=$JAVA_HOME/bin:$PATH\n-          time mv ~/cassandra /tmp\n-          cd /tmp/cassandra\n-          if [ -d ~/dtest_jars ]; then\n-            cp ~/dtest_jars/dtest* /tmp/cassandra/build/\n-          fi\n-          test_timeout=$(grep 'name=\"test.unit.timeout\"' build.xml | awk -F'\"' '{print $4}' || true)\n-          if [ -z \"$test_timeout\" ]; then\n-            test_timeout=$(grep 'name=\"test.timeout\"' build.xml | awk -F'\"' '{print $4}')\n-          fi\n-          ant testclasslist-system-keyspace-directory -Dtest.timeout=\"$test_timeout\" -Dtest.classlistfile=/tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt  -Dtest.classlistprefix=unit\n-        no_output_timeout: 15m\n-    - store_test_results:\n-        path: /tmp/cassandra/build/test/output/\n-    - store_artifacts:\n-        path: /tmp/cassandra/build/test/output\n-        destination: junitxml\n-    - store_artifacts:\n-        path: /tmp/cassandra/build/test/logs\n-        destination: logs\n-    environment:\n-    - ANT_HOME: /usr/share/ant\n-    - LANG: en_US.UTF-8\n-    - KEEP_TEST_DIR: true\n-    - DEFAULT_DIR: /home/cassandra/cassandra-dtest\n-    - PYTHONIOENCODING: utf-8\n-    - PYTHONUNBUFFERED: true\n-    - CASS_DRIVER_NO_EXTENSIONS: true\n-    - CASS_DRIVER_NO_CYTHON: true\n-    - CASSANDRA_SKIP_SYNC: true\n-    - DTEST_REPO: git://github.com/apache/cassandra-dtest.git\n-    - DTEST_BRANCH: master\n-    - CCM_MAX_HEAP_SIZE: 1024M\n-    - CCM_HEAP_NEWSIZE: 256M\n-    - JAVA_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n-    - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j8_dtest_jars_build:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -2380,12 +2380,6 @@ workflows:\n         requires:\n         - start_utests_compression\n         - j8_build\n-    - start_utests_system_keyspace_directory:\n-        type: approval\n-    - utests_system_keyspace_directory:\n-        requires:\n-        - start_utests_system_keyspace_directory\n-        - j8_build\n     - start_utests_stress:\n         type: approval\n     - utests_stress:\n@@ -2398,6 +2392,12 @@ workflows:\n         requires:\n         - start_utests_fqltool\n         - j8_build\n+    - start_utests_system_keyspace_directory:\n+        type: approval\n+    - utests_system_keyspace_directory:\n+        requires:\n+        - start_utests_fqltool\n+        - j8_build\n     - start_jvm_upgrade_dtest:\n         type: approval\n     - j8_dtest_jars_build:"
  },
  {
    "sha": "85cf9a1be2f947900f473962be925fef5cad422d",
    "filename": ".circleci/config.yml.HIGHRES",
    "status": "modified",
    "additions": 97,
    "deletions": 0,
    "changes": 97,
    "blob_url": "https://github.com/ekaterinadimitrova2/cassandra/blob/76b89240213ddddd098f398e58e5e72b548843a8/.circleci/config.yml.HIGHRES",
    "raw_url": "https://github.com/ekaterinadimitrova2/cassandra/raw/76b89240213ddddd098f398e58e5e72b548843a8/.circleci/config.yml.HIGHRES",
    "contents_url": "https://api.github.com/repos/ekaterinadimitrova2/cassandra/contents/.circleci/config.yml.HIGHRES?ref=76b89240213ddddd098f398e58e5e72b548843a8",
    "patch": "@@ -1930,6 +1930,97 @@ jobs:\n     - CCM_HEAP_NEWSIZE: 256M\n     - JAVA_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n+  utests_system_keyspace_directory:\n+    docker:\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n+    resource_class: xlarge\n+    working_directory: ~/\n+    shell: /bin/bash -eo pipefail -l\n+    parallelism: 100\n+    steps:\n+    - attach_workspace:\n+        at: /home/cassandra\n+    - run:\n+        name: Determine unit Tests to Run\n+        command: |\n+          # reminder: this code (along with all the steps) is independently executed on every circle container\n+          # so the goal here is to get the circleci script to return the tests *this* container will run\n+          # which we do via the `circleci` cli tool.\n+\n+          rm -fr ~/cassandra-dtest/upgrade_tests\n+          echo \"***java tests***\"\n+\n+          # get all of our unit test filenames\n+          set -eo pipefail && circleci tests glob \"$HOME/cassandra/test/unit/**/*.java\" > /tmp/all_java_unit_tests.txt\n+\n+          # split up the unit tests into groups based on the number of containers we have\n+          set -eo pipefail && circleci tests split --split-by=timings --timings-type=filename --index=${CIRCLE_NODE_INDEX} --total=${CIRCLE_NODE_TOTAL} /tmp/all_java_unit_tests.txt > /tmp/java_tests_${CIRCLE_NODE_INDEX}.txt\n+          set -eo pipefail && cat /tmp/java_tests_${CIRCLE_NODE_INDEX}.txt | sed \"s;^/home/cassandra/cassandra/test/unit/;;g\" | grep \"Test\\.java$\"  > /tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt\n+          echo \"** /tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt\"\n+          cat /tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt\n+        no_output_timeout: 15m\n+    - run:\n+        name: Log Environment Information\n+        command: |\n+          echo '*** id ***'\n+          id\n+          echo '*** cat /proc/cpuinfo ***'\n+          cat /proc/cpuinfo\n+          echo '*** free -m ***'\n+          free -m\n+          echo '*** df -m ***'\n+          df -m\n+          echo '*** ifconfig -a ***'\n+          ifconfig -a\n+          echo '*** uname -a ***'\n+          uname -a\n+          echo '*** mount ***'\n+          mount\n+          echo '*** env ***'\n+          env\n+          echo '*** java ***'\n+          which java\n+          java -version\n+    - run:\n+        name: Run Unit Tests (testclasslist-system-keyspace-directory)\n+        command: |\n+          set -x\n+          export PATH=$JAVA_HOME/bin:$PATH\n+          time mv ~/cassandra /tmp\n+          cd /tmp/cassandra\n+          if [ -d ~/dtest_jars ]; then\n+            cp ~/dtest_jars/dtest* /tmp/cassandra/build/\n+          fi\n+          test_timeout=$(grep 'name=\"test.unit.timeout\"' build.xml | awk -F'\"' '{print $4}' || true)\n+          if [ -z \"$test_timeout\" ]; then\n+            test_timeout=$(grep 'name=\"test.timeout\"' build.xml | awk -F'\"' '{print $4}')\n+          fi\n+          ant testclasslist-system-keyspace-directory -Dtest.timeout=\"$test_timeout\" -Dtest.classlistfile=/tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt  -Dtest.classlistprefix=unit\n+        no_output_timeout: 15m\n+    - store_test_results:\n+        path: /tmp/cassandra/build/test/output/\n+    - store_artifacts:\n+        path: /tmp/cassandra/build/test/output\n+        destination: junitxml\n+    - store_artifacts:\n+        path: /tmp/cassandra/build/test/logs\n+        destination: logs\n+    environment:\n+    - ANT_HOME: /usr/share/ant\n+    - LANG: en_US.UTF-8\n+    - KEEP_TEST_DIR: true\n+    - DEFAULT_DIR: /home/cassandra/cassandra-dtest\n+    - PYTHONIOENCODING: utf-8\n+    - PYTHONUNBUFFERED: true\n+    - CASS_DRIVER_NO_EXTENSIONS: true\n+    - CASS_DRIVER_NO_CYTHON: true\n+    - CASSANDRA_SKIP_SYNC: true\n+    - DTEST_REPO: git://github.com/apache/cassandra-dtest.git\n+    - DTEST_BRANCH: trunk\n+    - CCM_MAX_HEAP_SIZE: 1024M\n+    - CCM_HEAP_NEWSIZE: 256M\n+    - JAVA_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n+    - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j8_cqlshlib_tests:\n     docker:\n     - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n@@ -2301,6 +2392,12 @@ workflows:\n         requires:\n         - start_utests_fqltool\n         - j8_build\n+    - start_utests_system_keyspace_directory:\n+        type: approval\n+    - utests_system_keyspace_directory:\n+        requires:\n+        - start_utests_fqltool\n+        - j8_build\n     - start_jvm_upgrade_dtest:\n         type: approval\n     - j8_dtest_jars_build:"
  },
  {
    "sha": "5424da2081bd1ef5f82d3a9507223b5ce67dd938",
    "filename": ".circleci/config.yml.LOWRES",
    "status": "modified",
    "additions": 97,
    "deletions": 0,
    "changes": 97,
    "blob_url": "https://github.com/ekaterinadimitrova2/cassandra/blob/76b89240213ddddd098f398e58e5e72b548843a8/.circleci/config.yml.LOWRES",
    "raw_url": "https://github.com/ekaterinadimitrova2/cassandra/raw/76b89240213ddddd098f398e58e5e72b548843a8/.circleci/config.yml.LOWRES",
    "contents_url": "https://api.github.com/repos/ekaterinadimitrova2/cassandra/contents/.circleci/config.yml.LOWRES?ref=76b89240213ddddd098f398e58e5e72b548843a8",
    "patch": "@@ -1930,6 +1930,97 @@ jobs:\n     - CCM_HEAP_NEWSIZE: 256M\n     - JAVA_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n+  utests_system_keyspace_directory:\n+    docker:\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n+    resource_class: medium\n+    working_directory: ~/\n+    shell: /bin/bash -eo pipefail -l\n+    parallelism: 4\n+    steps:\n+    - attach_workspace:\n+        at: /home/cassandra\n+    - run:\n+        name: Determine unit Tests to Run\n+        command: |\n+          # reminder: this code (along with all the steps) is independently executed on every circle container\n+          # so the goal here is to get the circleci script to return the tests *this* container will run\n+          # which we do via the `circleci` cli tool.\n+\n+          rm -fr ~/cassandra-dtest/upgrade_tests\n+          echo \"***java tests***\"\n+\n+          # get all of our unit test filenames\n+          set -eo pipefail && circleci tests glob \"$HOME/cassandra/test/unit/**/*.java\" > /tmp/all_java_unit_tests.txt\n+\n+          # split up the unit tests into groups based on the number of containers we have\n+          set -eo pipefail && circleci tests split --split-by=timings --timings-type=filename --index=${CIRCLE_NODE_INDEX} --total=${CIRCLE_NODE_TOTAL} /tmp/all_java_unit_tests.txt > /tmp/java_tests_${CIRCLE_NODE_INDEX}.txt\n+          set -eo pipefail && cat /tmp/java_tests_${CIRCLE_NODE_INDEX}.txt | sed \"s;^/home/cassandra/cassandra/test/unit/;;g\" | grep \"Test\\.java$\"  > /tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt\n+          echo \"** /tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt\"\n+          cat /tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt\n+        no_output_timeout: 15m\n+    - run:\n+        name: Log Environment Information\n+        command: |\n+          echo '*** id ***'\n+          id\n+          echo '*** cat /proc/cpuinfo ***'\n+          cat /proc/cpuinfo\n+          echo '*** free -m ***'\n+          free -m\n+          echo '*** df -m ***'\n+          df -m\n+          echo '*** ifconfig -a ***'\n+          ifconfig -a\n+          echo '*** uname -a ***'\n+          uname -a\n+          echo '*** mount ***'\n+          mount\n+          echo '*** env ***'\n+          env\n+          echo '*** java ***'\n+          which java\n+          java -version\n+    - run:\n+        name: Run Unit Tests (testclasslist-system-keyspace-directory)\n+        command: |\n+          set -x\n+          export PATH=$JAVA_HOME/bin:$PATH\n+          time mv ~/cassandra /tmp\n+          cd /tmp/cassandra\n+          if [ -d ~/dtest_jars ]; then\n+            cp ~/dtest_jars/dtest* /tmp/cassandra/build/\n+          fi\n+          test_timeout=$(grep 'name=\"test.unit.timeout\"' build.xml | awk -F'\"' '{print $4}' || true)\n+          if [ -z \"$test_timeout\" ]; then\n+            test_timeout=$(grep 'name=\"test.timeout\"' build.xml | awk -F'\"' '{print $4}')\n+          fi\n+          ant testclasslist-system-keyspace-directory -Dtest.timeout=\"$test_timeout\" -Dtest.classlistfile=/tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt  -Dtest.classlistprefix=unit\n+        no_output_timeout: 15m\n+    - store_test_results:\n+        path: /tmp/cassandra/build/test/output/\n+    - store_artifacts:\n+        path: /tmp/cassandra/build/test/output\n+        destination: junitxml\n+    - store_artifacts:\n+        path: /tmp/cassandra/build/test/logs\n+        destination: logs\n+    environment:\n+    - ANT_HOME: /usr/share/ant\n+    - LANG: en_US.UTF-8\n+    - KEEP_TEST_DIR: true\n+    - DEFAULT_DIR: /home/cassandra/cassandra-dtest\n+    - PYTHONIOENCODING: utf-8\n+    - PYTHONUNBUFFERED: true\n+    - CASS_DRIVER_NO_EXTENSIONS: true\n+    - CASS_DRIVER_NO_CYTHON: true\n+    - CASSANDRA_SKIP_SYNC: true\n+    - DTEST_REPO: git://github.com/apache/cassandra-dtest.git\n+    - DTEST_BRANCH: trunk\n+    - CCM_MAX_HEAP_SIZE: 1024M\n+    - CCM_HEAP_NEWSIZE: 256M\n+    - JAVA_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n+    - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j8_cqlshlib_tests:\n     docker:\n     - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n@@ -2301,6 +2392,12 @@ workflows:\n         requires:\n         - start_utests_fqltool\n         - j8_build\n+    - start_utests_system_keyspace_directory:\n+        type: approval\n+    - utests_system_keyspace_directory:\n+        requires:\n+        - start_utests_fqltool\n+        - j8_build\n     - start_jvm_upgrade_dtest:\n         type: approval\n     - j8_dtest_jars_build:"
  },
  {
    "sha": "c3cfce0b700ff35fb9d05b4784acbebc321b4845",
    "filename": ".circleci/config.yml.MIDRES",
    "status": "modified",
    "additions": 128,
    "deletions": 128,
    "changes": 256,
    "blob_url": "https://github.com/ekaterinadimitrova2/cassandra/blob/76b89240213ddddd098f398e58e5e72b548843a8/.circleci/config.yml.MIDRES",
    "raw_url": "https://github.com/ekaterinadimitrova2/cassandra/raw/76b89240213ddddd098f398e58e5e72b548843a8/.circleci/config.yml.MIDRES",
    "contents_url": "https://api.github.com/repos/ekaterinadimitrova2/cassandra/contents/.circleci/config.yml.MIDRES?ref=76b89240213ddddd098f398e58e5e72b548843a8",
    "patch": "@@ -2,7 +2,7 @@ version: 2\n jobs:\n   j8_jvm_upgrade_dtests:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -93,7 +93,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j8_cqlsh-dtests-py2-with-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -170,7 +170,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j11_unit_tests:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -262,7 +262,7 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j8_cqlsh-dtests-py38-no-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -339,7 +339,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j11_cqlsh-dtests-py3-with-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -417,7 +417,7 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j11_cqlsh-dtests-py3-no-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -495,7 +495,7 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j11_cqlsh-dtests-py38-with-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -573,7 +573,7 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j8_cqlsh-dtests-py3-with-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -650,7 +650,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j8_cqlsh-dtests-py2-no-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -727,7 +727,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j11_cqlsh-dtests-py2-with-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -805,7 +805,7 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j11_dtests-with-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -886,7 +886,7 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j8_dtests-no-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -944,7 +944,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j8_upgradetests-no-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: xlarge\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1002,7 +1002,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   utests_stress:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1047,7 +1047,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j8_unit_tests:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1138,7 +1138,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j11_jvm_dtests:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1230,7 +1230,7 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j11_build:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1311,7 +1311,7 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j11_cqlsh-dtests-py2-no-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1389,7 +1389,7 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j11_cqlshlib_tests:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1426,7 +1426,7 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j8_dtests-with-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1484,7 +1484,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j11_cqlsh-dtests-py38-no-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1562,7 +1562,7 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j8_jvm_dtests:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1653,7 +1653,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j8_build:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1733,7 +1733,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j8_cqlsh-dtests-py3-no-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1810,7 +1810,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j8_cqlsh-dtests-py38-with-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1887,7 +1887,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   utests_long:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1930,9 +1930,100 @@ jobs:\n     - CCM_HEAP_NEWSIZE: 256M\n     - JAVA_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n+  utests_system_keyspace_directory:\n+    docker:\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n+    resource_class: medium\n+    working_directory: ~/\n+    shell: /bin/bash -eo pipefail -l\n+    parallelism: 25\n+    steps:\n+    - attach_workspace:\n+        at: /home/cassandra\n+    - run:\n+        name: Determine unit Tests to Run\n+        command: |\n+          # reminder: this code (along with all the steps) is independently executed on every circle container\n+          # so the goal here is to get the circleci script to return the tests *this* container will run\n+          # which we do via the `circleci` cli tool.\n+\n+          rm -fr ~/cassandra-dtest/upgrade_tests\n+          echo \"***java tests***\"\n+\n+          # get all of our unit test filenames\n+          set -eo pipefail && circleci tests glob \"$HOME/cassandra/test/unit/**/*.java\" > /tmp/all_java_unit_tests.txt\n+\n+          # split up the unit tests into groups based on the number of containers we have\n+          set -eo pipefail && circleci tests split --split-by=timings --timings-type=filename --index=${CIRCLE_NODE_INDEX} --total=${CIRCLE_NODE_TOTAL} /tmp/all_java_unit_tests.txt > /tmp/java_tests_${CIRCLE_NODE_INDEX}.txt\n+          set -eo pipefail && cat /tmp/java_tests_${CIRCLE_NODE_INDEX}.txt | sed \"s;^/home/cassandra/cassandra/test/unit/;;g\" | grep \"Test\\.java$\"  > /tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt\n+          echo \"** /tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt\"\n+          cat /tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt\n+        no_output_timeout: 15m\n+    - run:\n+        name: Log Environment Information\n+        command: |\n+          echo '*** id ***'\n+          id\n+          echo '*** cat /proc/cpuinfo ***'\n+          cat /proc/cpuinfo\n+          echo '*** free -m ***'\n+          free -m\n+          echo '*** df -m ***'\n+          df -m\n+          echo '*** ifconfig -a ***'\n+          ifconfig -a\n+          echo '*** uname -a ***'\n+          uname -a\n+          echo '*** mount ***'\n+          mount\n+          echo '*** env ***'\n+          env\n+          echo '*** java ***'\n+          which java\n+          java -version\n+    - run:\n+        name: Run Unit Tests (testclasslist-system-keyspace-directory)\n+        command: |\n+          set -x\n+          export PATH=$JAVA_HOME/bin:$PATH\n+          time mv ~/cassandra /tmp\n+          cd /tmp/cassandra\n+          if [ -d ~/dtest_jars ]; then\n+            cp ~/dtest_jars/dtest* /tmp/cassandra/build/\n+          fi\n+          test_timeout=$(grep 'name=\"test.unit.timeout\"' build.xml | awk -F'\"' '{print $4}' || true)\n+          if [ -z \"$test_timeout\" ]; then\n+            test_timeout=$(grep 'name=\"test.timeout\"' build.xml | awk -F'\"' '{print $4}')\n+          fi\n+          ant testclasslist-system-keyspace-directory -Dtest.timeout=\"$test_timeout\" -Dtest.classlistfile=/tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt  -Dtest.classlistprefix=unit\n+        no_output_timeout: 15m\n+    - store_test_results:\n+        path: /tmp/cassandra/build/test/output/\n+    - store_artifacts:\n+        path: /tmp/cassandra/build/test/output\n+        destination: junitxml\n+    - store_artifacts:\n+        path: /tmp/cassandra/build/test/logs\n+        destination: logs\n+    environment:\n+    - ANT_HOME: /usr/share/ant\n+    - LANG: en_US.UTF-8\n+    - KEEP_TEST_DIR: true\n+    - DEFAULT_DIR: /home/cassandra/cassandra-dtest\n+    - PYTHONIOENCODING: utf-8\n+    - PYTHONUNBUFFERED: true\n+    - CASS_DRIVER_NO_EXTENSIONS: true\n+    - CASS_DRIVER_NO_CYTHON: true\n+    - CASSANDRA_SKIP_SYNC: true\n+    - DTEST_REPO: git://github.com/apache/cassandra-dtest.git\n+    - DTEST_BRANCH: trunk\n+    - CCM_MAX_HEAP_SIZE: 1024M\n+    - CCM_HEAP_NEWSIZE: 256M\n+    - JAVA_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n+    - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j8_cqlshlib_tests:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1968,7 +2059,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   utests_fqltool:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -2013,7 +2104,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j11_dtests-no-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -2094,7 +2185,7 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   utests_compression:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -2183,100 +2274,9 @@ jobs:\n     - CCM_HEAP_NEWSIZE: 256M\n     - JAVA_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n-  utests_system_keyspace_directory:\n-    docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n-    resource_class: medium\n-    working_directory: ~/\n-    shell: /bin/bash -eo pipefail -l\n-    parallelism: 25\n-    steps:\n-    - attach_workspace:\n-        at: /home/cassandra\n-    - run:\n-        name: Determine unit Tests to Run\n-        command: |\n-          # reminder: this code (along with all the steps) is independently executed on every circle container\n-          # so the goal here is to get the circleci script to return the tests *this* container will run\n-          # which we do via the `circleci` cli tool.\n-\n-          rm -fr ~/cassandra-dtest/upgrade_tests\n-          echo \"***java tests***\"\n-\n-          # get all of our unit test filenames\n-          set -eo pipefail && circleci tests glob \"$HOME/cassandra/test/unit/**/*.java\" > /tmp/all_java_unit_tests.txt\n-\n-          # split up the unit tests into groups based on the number of containers we have\n-          set -eo pipefail && circleci tests split --split-by=timings --timings-type=filename --index=${CIRCLE_NODE_INDEX} --total=${CIRCLE_NODE_TOTAL} /tmp/all_java_unit_tests.txt > /tmp/java_tests_${CIRCLE_NODE_INDEX}.txt\n-          set -eo pipefail && cat /tmp/java_tests_${CIRCLE_NODE_INDEX}.txt | sed \"s;^/home/cassandra/cassandra/test/unit/;;g\" | grep \"Test\\.java$\"  > /tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt\n-          echo \"** /tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt\"\n-          cat /tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt\n-        no_output_timeout: 15m\n-    - run:\n-        name: Log Environment Information\n-        command: |\n-          echo '*** id ***'\n-          id\n-          echo '*** cat /proc/cpuinfo ***'\n-          cat /proc/cpuinfo\n-          echo '*** free -m ***'\n-          free -m\n-          echo '*** df -m ***'\n-          df -m\n-          echo '*** ifconfig -a ***'\n-          ifconfig -a\n-          echo '*** uname -a ***'\n-          uname -a\n-          echo '*** mount ***'\n-          mount\n-          echo '*** env ***'\n-          env\n-          echo '*** java ***'\n-          which java\n-          java -version\n-    - run:\n-        name: Run Unit Tests (testclasslist-system-keyspace-directory)\n-        command: |\n-          set -x\n-          export PATH=$JAVA_HOME/bin:$PATH\n-          time mv ~/cassandra /tmp\n-          cd /tmp/cassandra\n-          if [ -d ~/dtest_jars ]; then\n-            cp ~/dtest_jars/dtest* /tmp/cassandra/build/\n-          fi\n-          test_timeout=$(grep 'name=\"test.unit.timeout\"' build.xml | awk -F'\"' '{print $4}' || true)\n-          if [ -z \"$test_timeout\" ]; then\n-            test_timeout=$(grep 'name=\"test.timeout\"' build.xml | awk -F'\"' '{print $4}')\n-          fi\n-          ant testclasslist-system-keyspace-directory -Dtest.timeout=\"$test_timeout\" -Dtest.classlistfile=/tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt  -Dtest.classlistprefix=unit\n-        no_output_timeout: 15m\n-    - store_test_results:\n-        path: /tmp/cassandra/build/test/output/\n-    - store_artifacts:\n-        path: /tmp/cassandra/build/test/output\n-        destination: junitxml\n-    - store_artifacts:\n-        path: /tmp/cassandra/build/test/logs\n-        destination: logs\n-    environment:\n-    - ANT_HOME: /usr/share/ant\n-    - LANG: en_US.UTF-8\n-    - KEEP_TEST_DIR: true\n-    - DEFAULT_DIR: /home/cassandra/cassandra-dtest\n-    - PYTHONIOENCODING: utf-8\n-    - PYTHONUNBUFFERED: true\n-    - CASS_DRIVER_NO_EXTENSIONS: true\n-    - CASS_DRIVER_NO_CYTHON: true\n-    - CASSANDRA_SKIP_SYNC: true\n-    - DTEST_REPO: git://github.com/apache/cassandra-dtest.git\n-    - DTEST_BRANCH: master\n-    - CCM_MAX_HEAP_SIZE: 1024M\n-    - CCM_HEAP_NEWSIZE: 256M\n-    - JAVA_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n-    - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j8_dtest_jars_build:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -2380,12 +2380,6 @@ workflows:\n         requires:\n         - start_utests_compression\n         - j8_build\n-    - start_utests_system_keyspace_directory:\n-        type: approval\n-    - utests_system_keyspace_directory:\n-        requires:\n-        - start_utests_system_keyspace_directory\n-        - j8_build\n     - start_utests_stress:\n         type: approval\n     - utests_stress:\n@@ -2398,6 +2392,12 @@ workflows:\n         requires:\n         - start_utests_fqltool\n         - j8_build\n+    - start_utests_system_keyspace_directory:\n+        type: approval\n+    - utests_system_keyspace_directory:\n+        requires:\n+        - start_utests_fqltool\n+        - j8_build\n     - start_jvm_upgrade_dtest:\n         type: approval\n     - j8_dtest_jars_build:"
  }
]
