[
  {
    "sha": "7808b604491aaa36cf5b97cce9e57c8fa668ca07",
    "filename": ".circleci/config-2_1.yml",
    "status": "modified",
    "additions": 17,
    "deletions": 0,
    "changes": 17,
    "blob_url": "https://github.com/ekaterinadimitrova2/cassandra/blob/ed6594fbc94263f1d77c228554f949a69ebc7eee/.circleci/config-2_1.yml",
    "raw_url": "https://github.com/ekaterinadimitrova2/cassandra/raw/ed6594fbc94263f1d77c228554f949a69ebc7eee/.circleci/config-2_1.yml",
    "contents_url": "https://api.github.com/repos/ekaterinadimitrova2/cassandra/contents/.circleci/config-2_1.yml?ref=ed6594fbc94263f1d77c228554f949a69ebc7eee",
    "patch": "@@ -1,6 +1,7 @@\n version: 2.1\n \n default_env_vars: &default_env_vars\n+    JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     ANT_HOME: /usr/share/ant\n     LANG: en_US.UTF-8\n     KEEP_TEST_DIR: true\n@@ -109,6 +110,12 @@ j8_with_dtests_jobs: &j8_with_dtests_jobs\n         requires:\n           - start_utests_fqltool\n           - j8_build\n+    - start_utests_system_keyspace_directory:\n+        type: approval\n+    - utests_system_keyspace_directory:\n+        requires:\n+          - start_utests_fqltool\n+          - j8_build\n     - start_jvm_upgrade_dtest:\n         type: approval\n     - j8_dtest_jars_build:\n@@ -455,6 +462,16 @@ jobs:\n       - run_junit_tests:\n           target: fqltool-test\n \n+  utests_system_keyspace_directory:\n+    <<: *j8_par_executor\n+    steps:\n+      - attach_workspace:\n+          at: /home/cassandra\n+      - create_junit_containers\n+      - log_environment\n+      - run_parallel_junit_tests:\n+          target: testclasslist-system-keyspace-directory\n+\n   j8_dtests-with-vnodes:\n     <<: *j8_par_executor\n     steps:"
  },
  {
    "sha": "c8d71d6dc73af2237371eab5a06e173cce5e5902",
    "filename": ".circleci/config.yml",
    "status": "modified",
    "additions": 160,
    "deletions": 128,
    "changes": 288,
    "blob_url": "https://github.com/ekaterinadimitrova2/cassandra/blob/ed6594fbc94263f1d77c228554f949a69ebc7eee/.circleci/config.yml",
    "raw_url": "https://github.com/ekaterinadimitrova2/cassandra/raw/ed6594fbc94263f1d77c228554f949a69ebc7eee/.circleci/config.yml",
    "contents_url": "https://api.github.com/repos/ekaterinadimitrova2/cassandra/contents/.circleci/config.yml?ref=ed6594fbc94263f1d77c228554f949a69ebc7eee",
    "patch": "@@ -2,7 +2,7 @@ version: 2\n jobs:\n   j8_jvm_upgrade_dtests:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -76,6 +76,7 @@ jobs:\n         path: /tmp/cassandra/build/test/logs\n         destination: logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -93,7 +94,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j8_cqlsh-dtests-py2-with-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -153,6 +154,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j8_with_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -170,7 +172,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j11_unit_tests:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -244,6 +246,7 @@ jobs:\n         path: /tmp/cassandra/build/test/logs\n         destination: logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -262,7 +265,7 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j8_cqlsh-dtests-py38-no-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -322,6 +325,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j8_without_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -339,7 +343,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j11_cqlsh-dtests-py3-with-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -399,6 +403,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j11_with_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -417,7 +422,7 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j11_cqlsh-dtests-py3-no-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -477,6 +482,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j11_without_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -495,7 +501,7 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j11_cqlsh-dtests-py38-with-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -555,6 +561,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j11_with_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -573,7 +580,7 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j8_cqlsh-dtests-py3-with-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -633,6 +640,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j8_with_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -650,7 +658,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j8_cqlsh-dtests-py2-no-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -710,6 +718,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j8_without_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -727,7 +736,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j11_cqlsh-dtests-py2-with-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -787,6 +796,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j11_with_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -805,7 +815,7 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j11_dtests-with-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -868,6 +878,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j11_with_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -886,7 +897,7 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j8_dtests-no-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -927,6 +938,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j8_without_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -944,7 +956,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j8_upgradetests-no-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -985,6 +997,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j8_upgradetests_without_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1002,7 +1015,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   utests_stress:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1030,6 +1043,7 @@ jobs:\n         path: /tmp/cassandra/build/test/logs\n         destination: logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1047,7 +1061,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j8_unit_tests:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1121,6 +1135,7 @@ jobs:\n         path: /tmp/cassandra/build/test/logs\n         destination: logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1138,7 +1153,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j11_jvm_dtests:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1212,6 +1227,7 @@ jobs:\n         path: /tmp/cassandra/build/test/logs\n         destination: logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1230,7 +1246,7 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j11_build:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1293,6 +1309,7 @@ jobs:\n         - cassandra\n         - .m2\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1311,7 +1328,7 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j11_cqlsh-dtests-py2-no-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1371,6 +1388,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j11_without_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1389,7 +1407,7 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j11_cqlshlib_tests:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1408,6 +1426,7 @@ jobs:\n     - store_test_results:\n         path: /tmp/cassandra/pylib\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1426,7 +1445,7 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j8_dtests-with-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1467,6 +1486,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j8_with_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1484,7 +1504,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j11_cqlsh-dtests-py38-no-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1544,6 +1564,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j11_without_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1562,7 +1583,7 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j8_jvm_dtests:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1636,6 +1657,7 @@ jobs:\n         path: /tmp/cassandra/build/test/logs\n         destination: logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1653,7 +1675,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j8_build:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1716,6 +1738,7 @@ jobs:\n         - cassandra\n         - .m2\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1733,7 +1756,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j8_cqlsh-dtests-py3-no-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1793,6 +1816,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j8_without_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1810,7 +1834,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j8_cqlsh-dtests-py38-with-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1870,6 +1894,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j8_with_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1887,7 +1912,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   utests_long:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1915,6 +1940,99 @@ jobs:\n         path: /tmp/cassandra/build/test/logs\n         destination: logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n+    - ANT_HOME: /usr/share/ant\n+    - LANG: en_US.UTF-8\n+    - KEEP_TEST_DIR: true\n+    - DEFAULT_DIR: /home/cassandra/cassandra-dtest\n+    - PYTHONIOENCODING: utf-8\n+    - PYTHONUNBUFFERED: true\n+    - CASS_DRIVER_NO_EXTENSIONS: true\n+    - CASS_DRIVER_NO_CYTHON: true\n+    - CASSANDRA_SKIP_SYNC: true\n+    - DTEST_REPO: git://github.com/apache/cassandra-dtest.git\n+    - DTEST_BRANCH: trunk\n+    - CCM_MAX_HEAP_SIZE: 1024M\n+    - CCM_HEAP_NEWSIZE: 256M\n+    - JAVA_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n+    - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n+  utests_system_keyspace_directory:\n+    docker:\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n+    resource_class: medium\n+    working_directory: ~/\n+    shell: /bin/bash -eo pipefail -l\n+    parallelism: 4\n+    steps:\n+    - attach_workspace:\n+        at: /home/cassandra\n+    - run:\n+        name: Determine unit Tests to Run\n+        command: |\n+          # reminder: this code (along with all the steps) is independently executed on every circle container\n+          # so the goal here is to get the circleci script to return the tests *this* container will run\n+          # which we do via the `circleci` cli tool.\n+\n+          rm -fr ~/cassandra-dtest/upgrade_tests\n+          echo \"***java tests***\"\n+\n+          # get all of our unit test filenames\n+          set -eo pipefail && circleci tests glob \"$HOME/cassandra/test/unit/**/*.java\" > /tmp/all_java_unit_tests.txt\n+\n+          # split up the unit tests into groups based on the number of containers we have\n+          set -eo pipefail && circleci tests split --split-by=timings --timings-type=filename --index=${CIRCLE_NODE_INDEX} --total=${CIRCLE_NODE_TOTAL} /tmp/all_java_unit_tests.txt > /tmp/java_tests_${CIRCLE_NODE_INDEX}.txt\n+          set -eo pipefail && cat /tmp/java_tests_${CIRCLE_NODE_INDEX}.txt | sed \"s;^/home/cassandra/cassandra/test/unit/;;g\" | grep \"Test\\.java$\"  > /tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt\n+          echo \"** /tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt\"\n+          cat /tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt\n+        no_output_timeout: 15m\n+    - run:\n+        name: Log Environment Information\n+        command: |\n+          echo '*** id ***'\n+          id\n+          echo '*** cat /proc/cpuinfo ***'\n+          cat /proc/cpuinfo\n+          echo '*** free -m ***'\n+          free -m\n+          echo '*** df -m ***'\n+          df -m\n+          echo '*** ifconfig -a ***'\n+          ifconfig -a\n+          echo '*** uname -a ***'\n+          uname -a\n+          echo '*** mount ***'\n+          mount\n+          echo '*** env ***'\n+          env\n+          echo '*** java ***'\n+          which java\n+          java -version\n+    - run:\n+        name: Run Unit Tests (testclasslist-system-keyspace-directory)\n+        command: |\n+          set -x\n+          export PATH=$JAVA_HOME/bin:$PATH\n+          time mv ~/cassandra /tmp\n+          cd /tmp/cassandra\n+          if [ -d ~/dtest_jars ]; then\n+            cp ~/dtest_jars/dtest* /tmp/cassandra/build/\n+          fi\n+          test_timeout=$(grep 'name=\"test.unit.timeout\"' build.xml | awk -F'\"' '{print $4}' || true)\n+          if [ -z \"$test_timeout\" ]; then\n+            test_timeout=$(grep 'name=\"test.timeout\"' build.xml | awk -F'\"' '{print $4}')\n+          fi\n+          ant testclasslist-system-keyspace-directory -Dtest.timeout=\"$test_timeout\" -Dtest.classlistfile=/tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt  -Dtest.classlistprefix=unit\n+        no_output_timeout: 15m\n+    - store_test_results:\n+        path: /tmp/cassandra/build/test/output/\n+    - store_artifacts:\n+        path: /tmp/cassandra/build/test/output\n+        destination: junitxml\n+    - store_artifacts:\n+        path: /tmp/cassandra/build/test/logs\n+        destination: logs\n+    environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1932,7 +2050,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j8_cqlshlib_tests:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1951,6 +2069,7 @@ jobs:\n     - store_test_results:\n         path: /tmp/cassandra/pylib\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1968,7 +2087,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   utests_fqltool:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1996,6 +2115,7 @@ jobs:\n         path: /tmp/cassandra/build/test/logs\n         destination: logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -2013,7 +2133,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j11_dtests-no-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -2076,6 +2196,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j11_without_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -2094,7 +2215,7 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   utests_compression:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -2168,6 +2289,7 @@ jobs:\n         path: /tmp/cassandra/build/test/logs\n         destination: logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -2183,100 +2305,9 @@ jobs:\n     - CCM_HEAP_NEWSIZE: 256M\n     - JAVA_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n-  utests_system_keyspace_directory:\n-    docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n-    resource_class: medium\n-    working_directory: ~/\n-    shell: /bin/bash -eo pipefail -l\n-    parallelism: 4\n-    steps:\n-    - attach_workspace:\n-        at: /home/cassandra\n-    - run:\n-        name: Determine unit Tests to Run\n-        command: |\n-          # reminder: this code (along with all the steps) is independently executed on every circle container\n-          # so the goal here is to get the circleci script to return the tests *this* container will run\n-          # which we do via the `circleci` cli tool.\n-\n-          rm -fr ~/cassandra-dtest/upgrade_tests\n-          echo \"***java tests***\"\n-\n-          # get all of our unit test filenames\n-          set -eo pipefail && circleci tests glob \"$HOME/cassandra/test/unit/**/*.java\" > /tmp/all_java_unit_tests.txt\n-\n-          # split up the unit tests into groups based on the number of containers we have\n-          set -eo pipefail && circleci tests split --split-by=timings --timings-type=filename --index=${CIRCLE_NODE_INDEX} --total=${CIRCLE_NODE_TOTAL} /tmp/all_java_unit_tests.txt > /tmp/java_tests_${CIRCLE_NODE_INDEX}.txt\n-          set -eo pipefail && cat /tmp/java_tests_${CIRCLE_NODE_INDEX}.txt | sed \"s;^/home/cassandra/cassandra/test/unit/;;g\" | grep \"Test\\.java$\"  > /tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt\n-          echo \"** /tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt\"\n-          cat /tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt\n-        no_output_timeout: 15m\n-    - run:\n-        name: Log Environment Information\n-        command: |\n-          echo '*** id ***'\n-          id\n-          echo '*** cat /proc/cpuinfo ***'\n-          cat /proc/cpuinfo\n-          echo '*** free -m ***'\n-          free -m\n-          echo '*** df -m ***'\n-          df -m\n-          echo '*** ifconfig -a ***'\n-          ifconfig -a\n-          echo '*** uname -a ***'\n-          uname -a\n-          echo '*** mount ***'\n-          mount\n-          echo '*** env ***'\n-          env\n-          echo '*** java ***'\n-          which java\n-          java -version\n-    - run:\n-        name: Run Unit Tests (testclasslist-system-keyspace-directory)\n-        command: |\n-          set -x\n-          export PATH=$JAVA_HOME/bin:$PATH\n-          time mv ~/cassandra /tmp\n-          cd /tmp/cassandra\n-          if [ -d ~/dtest_jars ]; then\n-            cp ~/dtest_jars/dtest* /tmp/cassandra/build/\n-          fi\n-          test_timeout=$(grep 'name=\"test.unit.timeout\"' build.xml | awk -F'\"' '{print $4}' || true)\n-          if [ -z \"$test_timeout\" ]; then\n-            test_timeout=$(grep 'name=\"test.timeout\"' build.xml | awk -F'\"' '{print $4}')\n-          fi\n-          ant testclasslist-system-keyspace-directory -Dtest.timeout=\"$test_timeout\" -Dtest.classlistfile=/tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt  -Dtest.classlistprefix=unit\n-        no_output_timeout: 15m\n-    - store_test_results:\n-        path: /tmp/cassandra/build/test/output/\n-    - store_artifacts:\n-        path: /tmp/cassandra/build/test/output\n-        destination: junitxml\n-    - store_artifacts:\n-        path: /tmp/cassandra/build/test/logs\n-        destination: logs\n-    environment:\n-    - ANT_HOME: /usr/share/ant\n-    - LANG: en_US.UTF-8\n-    - KEEP_TEST_DIR: true\n-    - DEFAULT_DIR: /home/cassandra/cassandra-dtest\n-    - PYTHONIOENCODING: utf-8\n-    - PYTHONUNBUFFERED: true\n-    - CASS_DRIVER_NO_EXTENSIONS: true\n-    - CASS_DRIVER_NO_CYTHON: true\n-    - CASSANDRA_SKIP_SYNC: true\n-    - DTEST_REPO: git://github.com/apache/cassandra-dtest.git\n-    - DTEST_BRANCH: master\n-    - CCM_MAX_HEAP_SIZE: 1024M\n-    - CCM_HEAP_NEWSIZE: 256M\n-    - JAVA_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n-    - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j8_dtest_jars_build:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -2333,6 +2364,7 @@ jobs:\n         paths:\n         - dtest_jars\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -2380,12 +2412,6 @@ workflows:\n         requires:\n         - start_utests_compression\n         - j8_build\n-    - start_utests_system_keyspace_directory:\n-        type: approval\n-    - utests_system_keyspace_directory:\n-        requires:\n-        - start_utests_system_keyspace_directory\n-        - j8_build\n     - start_utests_stress:\n         type: approval\n     - utests_stress:\n@@ -2398,6 +2424,12 @@ workflows:\n         requires:\n         - start_utests_fqltool\n         - j8_build\n+    - start_utests_system_keyspace_directory:\n+        type: approval\n+    - utests_system_keyspace_directory:\n+        requires:\n+        - start_utests_fqltool\n+        - j8_build\n     - start_jvm_upgrade_dtest:\n         type: approval\n     - j8_dtest_jars_build:"
  },
  {
    "sha": "0fc485c028efb15c97d37d4858ef45dc5cf2ed36",
    "filename": ".circleci/config.yml.HIGHRES",
    "status": "modified",
    "additions": 129,
    "deletions": 0,
    "changes": 129,
    "blob_url": "https://github.com/ekaterinadimitrova2/cassandra/blob/ed6594fbc94263f1d77c228554f949a69ebc7eee/.circleci/config.yml.HIGHRES",
    "raw_url": "https://github.com/ekaterinadimitrova2/cassandra/raw/ed6594fbc94263f1d77c228554f949a69ebc7eee/.circleci/config.yml.HIGHRES",
    "contents_url": "https://api.github.com/repos/ekaterinadimitrova2/cassandra/contents/.circleci/config.yml.HIGHRES?ref=ed6594fbc94263f1d77c228554f949a69ebc7eee",
    "patch": "@@ -76,6 +76,7 @@ jobs:\n         path: /tmp/cassandra/build/test/logs\n         destination: logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -153,6 +154,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j8_with_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -244,6 +246,7 @@ jobs:\n         path: /tmp/cassandra/build/test/logs\n         destination: logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -322,6 +325,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j8_without_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -399,6 +403,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j11_with_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -477,6 +482,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j11_without_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -555,6 +561,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j11_with_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -633,6 +640,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j8_with_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -710,6 +718,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j8_without_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -787,6 +796,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j11_with_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -868,6 +878,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j11_with_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -927,6 +938,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j8_without_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -985,6 +997,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j8_upgradetests_without_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1030,6 +1043,7 @@ jobs:\n         path: /tmp/cassandra/build/test/logs\n         destination: logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1121,6 +1135,7 @@ jobs:\n         path: /tmp/cassandra/build/test/logs\n         destination: logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1212,6 +1227,7 @@ jobs:\n         path: /tmp/cassandra/build/test/logs\n         destination: logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1293,6 +1309,7 @@ jobs:\n         - cassandra\n         - .m2\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1371,6 +1388,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j11_without_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1408,6 +1426,7 @@ jobs:\n     - store_test_results:\n         path: /tmp/cassandra/pylib\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1467,6 +1486,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j8_with_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1544,6 +1564,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j11_without_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1636,6 +1657,7 @@ jobs:\n         path: /tmp/cassandra/build/test/logs\n         destination: logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1716,6 +1738,7 @@ jobs:\n         - cassandra\n         - .m2\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1793,6 +1816,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j8_without_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1870,6 +1894,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j8_with_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1915,6 +1940,99 @@ jobs:\n         path: /tmp/cassandra/build/test/logs\n         destination: logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n+    - ANT_HOME: /usr/share/ant\n+    - LANG: en_US.UTF-8\n+    - KEEP_TEST_DIR: true\n+    - DEFAULT_DIR: /home/cassandra/cassandra-dtest\n+    - PYTHONIOENCODING: utf-8\n+    - PYTHONUNBUFFERED: true\n+    - CASS_DRIVER_NO_EXTENSIONS: true\n+    - CASS_DRIVER_NO_CYTHON: true\n+    - CASSANDRA_SKIP_SYNC: true\n+    - DTEST_REPO: git://github.com/apache/cassandra-dtest.git\n+    - DTEST_BRANCH: trunk\n+    - CCM_MAX_HEAP_SIZE: 1024M\n+    - CCM_HEAP_NEWSIZE: 256M\n+    - JAVA_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n+    - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n+  utests_system_keyspace_directory:\n+    docker:\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n+    resource_class: xlarge\n+    working_directory: ~/\n+    shell: /bin/bash -eo pipefail -l\n+    parallelism: 100\n+    steps:\n+    - attach_workspace:\n+        at: /home/cassandra\n+    - run:\n+        name: Determine unit Tests to Run\n+        command: |\n+          # reminder: this code (along with all the steps) is independently executed on every circle container\n+          # so the goal here is to get the circleci script to return the tests *this* container will run\n+          # which we do via the `circleci` cli tool.\n+\n+          rm -fr ~/cassandra-dtest/upgrade_tests\n+          echo \"***java tests***\"\n+\n+          # get all of our unit test filenames\n+          set -eo pipefail && circleci tests glob \"$HOME/cassandra/test/unit/**/*.java\" > /tmp/all_java_unit_tests.txt\n+\n+          # split up the unit tests into groups based on the number of containers we have\n+          set -eo pipefail && circleci tests split --split-by=timings --timings-type=filename --index=${CIRCLE_NODE_INDEX} --total=${CIRCLE_NODE_TOTAL} /tmp/all_java_unit_tests.txt > /tmp/java_tests_${CIRCLE_NODE_INDEX}.txt\n+          set -eo pipefail && cat /tmp/java_tests_${CIRCLE_NODE_INDEX}.txt | sed \"s;^/home/cassandra/cassandra/test/unit/;;g\" | grep \"Test\\.java$\"  > /tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt\n+          echo \"** /tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt\"\n+          cat /tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt\n+        no_output_timeout: 15m\n+    - run:\n+        name: Log Environment Information\n+        command: |\n+          echo '*** id ***'\n+          id\n+          echo '*** cat /proc/cpuinfo ***'\n+          cat /proc/cpuinfo\n+          echo '*** free -m ***'\n+          free -m\n+          echo '*** df -m ***'\n+          df -m\n+          echo '*** ifconfig -a ***'\n+          ifconfig -a\n+          echo '*** uname -a ***'\n+          uname -a\n+          echo '*** mount ***'\n+          mount\n+          echo '*** env ***'\n+          env\n+          echo '*** java ***'\n+          which java\n+          java -version\n+    - run:\n+        name: Run Unit Tests (testclasslist-system-keyspace-directory)\n+        command: |\n+          set -x\n+          export PATH=$JAVA_HOME/bin:$PATH\n+          time mv ~/cassandra /tmp\n+          cd /tmp/cassandra\n+          if [ -d ~/dtest_jars ]; then\n+            cp ~/dtest_jars/dtest* /tmp/cassandra/build/\n+          fi\n+          test_timeout=$(grep 'name=\"test.unit.timeout\"' build.xml | awk -F'\"' '{print $4}' || true)\n+          if [ -z \"$test_timeout\" ]; then\n+            test_timeout=$(grep 'name=\"test.timeout\"' build.xml | awk -F'\"' '{print $4}')\n+          fi\n+          ant testclasslist-system-keyspace-directory -Dtest.timeout=\"$test_timeout\" -Dtest.classlistfile=/tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt  -Dtest.classlistprefix=unit\n+        no_output_timeout: 15m\n+    - store_test_results:\n+        path: /tmp/cassandra/build/test/output/\n+    - store_artifacts:\n+        path: /tmp/cassandra/build/test/output\n+        destination: junitxml\n+    - store_artifacts:\n+        path: /tmp/cassandra/build/test/logs\n+        destination: logs\n+    environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1951,6 +2069,7 @@ jobs:\n     - store_test_results:\n         path: /tmp/cassandra/pylib\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1996,6 +2115,7 @@ jobs:\n         path: /tmp/cassandra/build/test/logs\n         destination: logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -2076,6 +2196,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j11_without_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -2168,6 +2289,7 @@ jobs:\n         path: /tmp/cassandra/build/test/logs\n         destination: logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -2242,6 +2364,7 @@ jobs:\n         paths:\n         - dtest_jars\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -2301,6 +2424,12 @@ workflows:\n         requires:\n         - start_utests_fqltool\n         - j8_build\n+    - start_utests_system_keyspace_directory:\n+        type: approval\n+    - utests_system_keyspace_directory:\n+        requires:\n+        - start_utests_fqltool\n+        - j8_build\n     - start_jvm_upgrade_dtest:\n         type: approval\n     - j8_dtest_jars_build:"
  },
  {
    "sha": "c8d71d6dc73af2237371eab5a06e173cce5e5902",
    "filename": ".circleci/config.yml.LOWRES",
    "status": "modified",
    "additions": 129,
    "deletions": 0,
    "changes": 129,
    "blob_url": "https://github.com/ekaterinadimitrova2/cassandra/blob/ed6594fbc94263f1d77c228554f949a69ebc7eee/.circleci/config.yml.LOWRES",
    "raw_url": "https://github.com/ekaterinadimitrova2/cassandra/raw/ed6594fbc94263f1d77c228554f949a69ebc7eee/.circleci/config.yml.LOWRES",
    "contents_url": "https://api.github.com/repos/ekaterinadimitrova2/cassandra/contents/.circleci/config.yml.LOWRES?ref=ed6594fbc94263f1d77c228554f949a69ebc7eee",
    "patch": "@@ -76,6 +76,7 @@ jobs:\n         path: /tmp/cassandra/build/test/logs\n         destination: logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -153,6 +154,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j8_with_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -244,6 +246,7 @@ jobs:\n         path: /tmp/cassandra/build/test/logs\n         destination: logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -322,6 +325,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j8_without_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -399,6 +403,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j11_with_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -477,6 +482,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j11_without_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -555,6 +561,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j11_with_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -633,6 +640,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j8_with_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -710,6 +718,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j8_without_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -787,6 +796,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j11_with_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -868,6 +878,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j11_with_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -927,6 +938,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j8_without_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -985,6 +997,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j8_upgradetests_without_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1030,6 +1043,7 @@ jobs:\n         path: /tmp/cassandra/build/test/logs\n         destination: logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1121,6 +1135,7 @@ jobs:\n         path: /tmp/cassandra/build/test/logs\n         destination: logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1212,6 +1227,7 @@ jobs:\n         path: /tmp/cassandra/build/test/logs\n         destination: logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1293,6 +1309,7 @@ jobs:\n         - cassandra\n         - .m2\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1371,6 +1388,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j11_without_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1408,6 +1426,7 @@ jobs:\n     - store_test_results:\n         path: /tmp/cassandra/pylib\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1467,6 +1486,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j8_with_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1544,6 +1564,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j11_without_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1636,6 +1657,7 @@ jobs:\n         path: /tmp/cassandra/build/test/logs\n         destination: logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1716,6 +1738,7 @@ jobs:\n         - cassandra\n         - .m2\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1793,6 +1816,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j8_without_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1870,6 +1894,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j8_with_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1915,6 +1940,99 @@ jobs:\n         path: /tmp/cassandra/build/test/logs\n         destination: logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n+    - ANT_HOME: /usr/share/ant\n+    - LANG: en_US.UTF-8\n+    - KEEP_TEST_DIR: true\n+    - DEFAULT_DIR: /home/cassandra/cassandra-dtest\n+    - PYTHONIOENCODING: utf-8\n+    - PYTHONUNBUFFERED: true\n+    - CASS_DRIVER_NO_EXTENSIONS: true\n+    - CASS_DRIVER_NO_CYTHON: true\n+    - CASSANDRA_SKIP_SYNC: true\n+    - DTEST_REPO: git://github.com/apache/cassandra-dtest.git\n+    - DTEST_BRANCH: trunk\n+    - CCM_MAX_HEAP_SIZE: 1024M\n+    - CCM_HEAP_NEWSIZE: 256M\n+    - JAVA_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n+    - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n+  utests_system_keyspace_directory:\n+    docker:\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n+    resource_class: medium\n+    working_directory: ~/\n+    shell: /bin/bash -eo pipefail -l\n+    parallelism: 4\n+    steps:\n+    - attach_workspace:\n+        at: /home/cassandra\n+    - run:\n+        name: Determine unit Tests to Run\n+        command: |\n+          # reminder: this code (along with all the steps) is independently executed on every circle container\n+          # so the goal here is to get the circleci script to return the tests *this* container will run\n+          # which we do via the `circleci` cli tool.\n+\n+          rm -fr ~/cassandra-dtest/upgrade_tests\n+          echo \"***java tests***\"\n+\n+          # get all of our unit test filenames\n+          set -eo pipefail && circleci tests glob \"$HOME/cassandra/test/unit/**/*.java\" > /tmp/all_java_unit_tests.txt\n+\n+          # split up the unit tests into groups based on the number of containers we have\n+          set -eo pipefail && circleci tests split --split-by=timings --timings-type=filename --index=${CIRCLE_NODE_INDEX} --total=${CIRCLE_NODE_TOTAL} /tmp/all_java_unit_tests.txt > /tmp/java_tests_${CIRCLE_NODE_INDEX}.txt\n+          set -eo pipefail && cat /tmp/java_tests_${CIRCLE_NODE_INDEX}.txt | sed \"s;^/home/cassandra/cassandra/test/unit/;;g\" | grep \"Test\\.java$\"  > /tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt\n+          echo \"** /tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt\"\n+          cat /tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt\n+        no_output_timeout: 15m\n+    - run:\n+        name: Log Environment Information\n+        command: |\n+          echo '*** id ***'\n+          id\n+          echo '*** cat /proc/cpuinfo ***'\n+          cat /proc/cpuinfo\n+          echo '*** free -m ***'\n+          free -m\n+          echo '*** df -m ***'\n+          df -m\n+          echo '*** ifconfig -a ***'\n+          ifconfig -a\n+          echo '*** uname -a ***'\n+          uname -a\n+          echo '*** mount ***'\n+          mount\n+          echo '*** env ***'\n+          env\n+          echo '*** java ***'\n+          which java\n+          java -version\n+    - run:\n+        name: Run Unit Tests (testclasslist-system-keyspace-directory)\n+        command: |\n+          set -x\n+          export PATH=$JAVA_HOME/bin:$PATH\n+          time mv ~/cassandra /tmp\n+          cd /tmp/cassandra\n+          if [ -d ~/dtest_jars ]; then\n+            cp ~/dtest_jars/dtest* /tmp/cassandra/build/\n+          fi\n+          test_timeout=$(grep 'name=\"test.unit.timeout\"' build.xml | awk -F'\"' '{print $4}' || true)\n+          if [ -z \"$test_timeout\" ]; then\n+            test_timeout=$(grep 'name=\"test.timeout\"' build.xml | awk -F'\"' '{print $4}')\n+          fi\n+          ant testclasslist-system-keyspace-directory -Dtest.timeout=\"$test_timeout\" -Dtest.classlistfile=/tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt  -Dtest.classlistprefix=unit\n+        no_output_timeout: 15m\n+    - store_test_results:\n+        path: /tmp/cassandra/build/test/output/\n+    - store_artifacts:\n+        path: /tmp/cassandra/build/test/output\n+        destination: junitxml\n+    - store_artifacts:\n+        path: /tmp/cassandra/build/test/logs\n+        destination: logs\n+    environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1951,6 +2069,7 @@ jobs:\n     - store_test_results:\n         path: /tmp/cassandra/pylib\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1996,6 +2115,7 @@ jobs:\n         path: /tmp/cassandra/build/test/logs\n         destination: logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -2076,6 +2196,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j11_without_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -2168,6 +2289,7 @@ jobs:\n         path: /tmp/cassandra/build/test/logs\n         destination: logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -2242,6 +2364,7 @@ jobs:\n         paths:\n         - dtest_jars\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -2301,6 +2424,12 @@ workflows:\n         requires:\n         - start_utests_fqltool\n         - j8_build\n+    - start_utests_system_keyspace_directory:\n+        type: approval\n+    - utests_system_keyspace_directory:\n+        requires:\n+        - start_utests_fqltool\n+        - j8_build\n     - start_jvm_upgrade_dtest:\n         type: approval\n     - j8_dtest_jars_build:"
  },
  {
    "sha": "9362ed711d1b3648c82e9d7f64efac5b28ad8ca8",
    "filename": ".circleci/config.yml.MIDRES",
    "status": "modified",
    "additions": 160,
    "deletions": 128,
    "changes": 288,
    "blob_url": "https://github.com/ekaterinadimitrova2/cassandra/blob/ed6594fbc94263f1d77c228554f949a69ebc7eee/.circleci/config.yml.MIDRES",
    "raw_url": "https://github.com/ekaterinadimitrova2/cassandra/raw/ed6594fbc94263f1d77c228554f949a69ebc7eee/.circleci/config.yml.MIDRES",
    "contents_url": "https://api.github.com/repos/ekaterinadimitrova2/cassandra/contents/.circleci/config.yml.MIDRES?ref=ed6594fbc94263f1d77c228554f949a69ebc7eee",
    "patch": "@@ -2,7 +2,7 @@ version: 2\n jobs:\n   j8_jvm_upgrade_dtests:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -76,6 +76,7 @@ jobs:\n         path: /tmp/cassandra/build/test/logs\n         destination: logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -93,7 +94,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j8_cqlsh-dtests-py2-with-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -153,6 +154,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j8_with_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -170,7 +172,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j11_unit_tests:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -244,6 +246,7 @@ jobs:\n         path: /tmp/cassandra/build/test/logs\n         destination: logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -262,7 +265,7 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j8_cqlsh-dtests-py38-no-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -322,6 +325,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j8_without_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -339,7 +343,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j11_cqlsh-dtests-py3-with-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -399,6 +403,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j11_with_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -417,7 +422,7 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j11_cqlsh-dtests-py3-no-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -477,6 +482,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j11_without_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -495,7 +501,7 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j11_cqlsh-dtests-py38-with-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -555,6 +561,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j11_with_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -573,7 +580,7 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j8_cqlsh-dtests-py3-with-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -633,6 +640,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j8_with_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -650,7 +658,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j8_cqlsh-dtests-py2-no-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -710,6 +718,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j8_without_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -727,7 +736,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j11_cqlsh-dtests-py2-with-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -787,6 +796,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j11_with_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -805,7 +815,7 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j11_dtests-with-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -868,6 +878,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j11_with_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -886,7 +897,7 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j8_dtests-no-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -927,6 +938,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j8_without_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -944,7 +956,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j8_upgradetests-no-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: xlarge\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -985,6 +997,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j8_upgradetests_without_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1002,7 +1015,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   utests_stress:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1030,6 +1043,7 @@ jobs:\n         path: /tmp/cassandra/build/test/logs\n         destination: logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1047,7 +1061,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j8_unit_tests:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1121,6 +1135,7 @@ jobs:\n         path: /tmp/cassandra/build/test/logs\n         destination: logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1138,7 +1153,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j11_jvm_dtests:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1212,6 +1227,7 @@ jobs:\n         path: /tmp/cassandra/build/test/logs\n         destination: logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1230,7 +1246,7 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j11_build:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1293,6 +1309,7 @@ jobs:\n         - cassandra\n         - .m2\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1311,7 +1328,7 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j11_cqlsh-dtests-py2-no-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1371,6 +1388,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j11_without_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1389,7 +1407,7 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j11_cqlshlib_tests:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1408,6 +1426,7 @@ jobs:\n     - store_test_results:\n         path: /tmp/cassandra/pylib\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1426,7 +1445,7 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j8_dtests-with-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1467,6 +1486,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j8_with_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1484,7 +1504,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j11_cqlsh-dtests-py38-no-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1544,6 +1564,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j11_without_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1562,7 +1583,7 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   j8_jvm_dtests:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1636,6 +1657,7 @@ jobs:\n         path: /tmp/cassandra/build/test/logs\n         destination: logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1653,7 +1675,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j8_build:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1716,6 +1738,7 @@ jobs:\n         - cassandra\n         - .m2\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1733,7 +1756,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j8_cqlsh-dtests-py3-no-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1793,6 +1816,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j8_without_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1810,7 +1834,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j8_cqlsh-dtests-py38-with-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1870,6 +1894,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j8_with_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1887,7 +1912,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   utests_long:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1915,6 +1940,99 @@ jobs:\n         path: /tmp/cassandra/build/test/logs\n         destination: logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n+    - ANT_HOME: /usr/share/ant\n+    - LANG: en_US.UTF-8\n+    - KEEP_TEST_DIR: true\n+    - DEFAULT_DIR: /home/cassandra/cassandra-dtest\n+    - PYTHONIOENCODING: utf-8\n+    - PYTHONUNBUFFERED: true\n+    - CASS_DRIVER_NO_EXTENSIONS: true\n+    - CASS_DRIVER_NO_CYTHON: true\n+    - CASSANDRA_SKIP_SYNC: true\n+    - DTEST_REPO: git://github.com/apache/cassandra-dtest.git\n+    - DTEST_BRANCH: trunk\n+    - CCM_MAX_HEAP_SIZE: 1024M\n+    - CCM_HEAP_NEWSIZE: 256M\n+    - JAVA_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n+    - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n+  utests_system_keyspace_directory:\n+    docker:\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n+    resource_class: medium\n+    working_directory: ~/\n+    shell: /bin/bash -eo pipefail -l\n+    parallelism: 25\n+    steps:\n+    - attach_workspace:\n+        at: /home/cassandra\n+    - run:\n+        name: Determine unit Tests to Run\n+        command: |\n+          # reminder: this code (along with all the steps) is independently executed on every circle container\n+          # so the goal here is to get the circleci script to return the tests *this* container will run\n+          # which we do via the `circleci` cli tool.\n+\n+          rm -fr ~/cassandra-dtest/upgrade_tests\n+          echo \"***java tests***\"\n+\n+          # get all of our unit test filenames\n+          set -eo pipefail && circleci tests glob \"$HOME/cassandra/test/unit/**/*.java\" > /tmp/all_java_unit_tests.txt\n+\n+          # split up the unit tests into groups based on the number of containers we have\n+          set -eo pipefail && circleci tests split --split-by=timings --timings-type=filename --index=${CIRCLE_NODE_INDEX} --total=${CIRCLE_NODE_TOTAL} /tmp/all_java_unit_tests.txt > /tmp/java_tests_${CIRCLE_NODE_INDEX}.txt\n+          set -eo pipefail && cat /tmp/java_tests_${CIRCLE_NODE_INDEX}.txt | sed \"s;^/home/cassandra/cassandra/test/unit/;;g\" | grep \"Test\\.java$\"  > /tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt\n+          echo \"** /tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt\"\n+          cat /tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt\n+        no_output_timeout: 15m\n+    - run:\n+        name: Log Environment Information\n+        command: |\n+          echo '*** id ***'\n+          id\n+          echo '*** cat /proc/cpuinfo ***'\n+          cat /proc/cpuinfo\n+          echo '*** free -m ***'\n+          free -m\n+          echo '*** df -m ***'\n+          df -m\n+          echo '*** ifconfig -a ***'\n+          ifconfig -a\n+          echo '*** uname -a ***'\n+          uname -a\n+          echo '*** mount ***'\n+          mount\n+          echo '*** env ***'\n+          env\n+          echo '*** java ***'\n+          which java\n+          java -version\n+    - run:\n+        name: Run Unit Tests (testclasslist-system-keyspace-directory)\n+        command: |\n+          set -x\n+          export PATH=$JAVA_HOME/bin:$PATH\n+          time mv ~/cassandra /tmp\n+          cd /tmp/cassandra\n+          if [ -d ~/dtest_jars ]; then\n+            cp ~/dtest_jars/dtest* /tmp/cassandra/build/\n+          fi\n+          test_timeout=$(grep 'name=\"test.unit.timeout\"' build.xml | awk -F'\"' '{print $4}' || true)\n+          if [ -z \"$test_timeout\" ]; then\n+            test_timeout=$(grep 'name=\"test.timeout\"' build.xml | awk -F'\"' '{print $4}')\n+          fi\n+          ant testclasslist-system-keyspace-directory -Dtest.timeout=\"$test_timeout\" -Dtest.classlistfile=/tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt  -Dtest.classlistprefix=unit\n+        no_output_timeout: 15m\n+    - store_test_results:\n+        path: /tmp/cassandra/build/test/output/\n+    - store_artifacts:\n+        path: /tmp/cassandra/build/test/output\n+        destination: junitxml\n+    - store_artifacts:\n+        path: /tmp/cassandra/build/test/logs\n+        destination: logs\n+    environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1932,7 +2050,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j8_cqlshlib_tests:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1951,6 +2069,7 @@ jobs:\n     - store_test_results:\n         path: /tmp/cassandra/pylib\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -1968,7 +2087,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   utests_fqltool:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -1996,6 +2115,7 @@ jobs:\n         path: /tmp/cassandra/build/test/logs\n         destination: logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -2013,7 +2133,7 @@ jobs:\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j11_dtests-no-vnodes:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11:20210304\n     resource_class: large\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -2076,6 +2196,7 @@ jobs:\n         path: ~/cassandra-dtest/logs\n         destination: dtest_j11_without_vnodes_logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -2094,7 +2215,7 @@ jobs:\n     - CASSANDRA_USE_JDK11: true\n   utests_compression:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -2168,6 +2289,7 @@ jobs:\n         path: /tmp/cassandra/build/test/logs\n         destination: logs\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -2183,100 +2305,9 @@ jobs:\n     - CCM_HEAP_NEWSIZE: 256M\n     - JAVA_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n-  utests_system_keyspace_directory:\n-    docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n-    resource_class: medium\n-    working_directory: ~/\n-    shell: /bin/bash -eo pipefail -l\n-    parallelism: 25\n-    steps:\n-    - attach_workspace:\n-        at: /home/cassandra\n-    - run:\n-        name: Determine unit Tests to Run\n-        command: |\n-          # reminder: this code (along with all the steps) is independently executed on every circle container\n-          # so the goal here is to get the circleci script to return the tests *this* container will run\n-          # which we do via the `circleci` cli tool.\n-\n-          rm -fr ~/cassandra-dtest/upgrade_tests\n-          echo \"***java tests***\"\n-\n-          # get all of our unit test filenames\n-          set -eo pipefail && circleci tests glob \"$HOME/cassandra/test/unit/**/*.java\" > /tmp/all_java_unit_tests.txt\n-\n-          # split up the unit tests into groups based on the number of containers we have\n-          set -eo pipefail && circleci tests split --split-by=timings --timings-type=filename --index=${CIRCLE_NODE_INDEX} --total=${CIRCLE_NODE_TOTAL} /tmp/all_java_unit_tests.txt > /tmp/java_tests_${CIRCLE_NODE_INDEX}.txt\n-          set -eo pipefail && cat /tmp/java_tests_${CIRCLE_NODE_INDEX}.txt | sed \"s;^/home/cassandra/cassandra/test/unit/;;g\" | grep \"Test\\.java$\"  > /tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt\n-          echo \"** /tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt\"\n-          cat /tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt\n-        no_output_timeout: 15m\n-    - run:\n-        name: Log Environment Information\n-        command: |\n-          echo '*** id ***'\n-          id\n-          echo '*** cat /proc/cpuinfo ***'\n-          cat /proc/cpuinfo\n-          echo '*** free -m ***'\n-          free -m\n-          echo '*** df -m ***'\n-          df -m\n-          echo '*** ifconfig -a ***'\n-          ifconfig -a\n-          echo '*** uname -a ***'\n-          uname -a\n-          echo '*** mount ***'\n-          mount\n-          echo '*** env ***'\n-          env\n-          echo '*** java ***'\n-          which java\n-          java -version\n-    - run:\n-        name: Run Unit Tests (testclasslist-system-keyspace-directory)\n-        command: |\n-          set -x\n-          export PATH=$JAVA_HOME/bin:$PATH\n-          time mv ~/cassandra /tmp\n-          cd /tmp/cassandra\n-          if [ -d ~/dtest_jars ]; then\n-            cp ~/dtest_jars/dtest* /tmp/cassandra/build/\n-          fi\n-          test_timeout=$(grep 'name=\"test.unit.timeout\"' build.xml | awk -F'\"' '{print $4}' || true)\n-          if [ -z \"$test_timeout\" ]; then\n-            test_timeout=$(grep 'name=\"test.timeout\"' build.xml | awk -F'\"' '{print $4}')\n-          fi\n-          ant testclasslist-system-keyspace-directory -Dtest.timeout=\"$test_timeout\" -Dtest.classlistfile=/tmp/java_tests_${CIRCLE_NODE_INDEX}_final.txt  -Dtest.classlistprefix=unit\n-        no_output_timeout: 15m\n-    - store_test_results:\n-        path: /tmp/cassandra/build/test/output/\n-    - store_artifacts:\n-        path: /tmp/cassandra/build/test/output\n-        destination: junitxml\n-    - store_artifacts:\n-        path: /tmp/cassandra/build/test/logs\n-        destination: logs\n-    environment:\n-    - ANT_HOME: /usr/share/ant\n-    - LANG: en_US.UTF-8\n-    - KEEP_TEST_DIR: true\n-    - DEFAULT_DIR: /home/cassandra/cassandra-dtest\n-    - PYTHONIOENCODING: utf-8\n-    - PYTHONUNBUFFERED: true\n-    - CASS_DRIVER_NO_EXTENSIONS: true\n-    - CASS_DRIVER_NO_CYTHON: true\n-    - CASSANDRA_SKIP_SYNC: true\n-    - DTEST_REPO: git://github.com/apache/cassandra-dtest.git\n-    - DTEST_BRANCH: master\n-    - CCM_MAX_HEAP_SIZE: 1024M\n-    - CCM_HEAP_NEWSIZE: 256M\n-    - JAVA_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n-    - JDK_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n   j8_dtest_jars_build:\n     docker:\n-    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210105\n+    - image: apache/cassandra-testing-ubuntu2004-java11-w-dependencies:20210304\n     resource_class: medium\n     working_directory: ~/\n     shell: /bin/bash -eo pipefail -l\n@@ -2333,6 +2364,7 @@ jobs:\n         paths:\n         - dtest_jars\n     environment:\n+    - JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64\n     - ANT_HOME: /usr/share/ant\n     - LANG: en_US.UTF-8\n     - KEEP_TEST_DIR: true\n@@ -2380,12 +2412,6 @@ workflows:\n         requires:\n         - start_utests_compression\n         - j8_build\n-    - start_utests_system_keyspace_directory:\n-        type: approval\n-    - utests_system_keyspace_directory:\n-        requires:\n-        - start_utests_system_keyspace_directory\n-        - j8_build\n     - start_utests_stress:\n         type: approval\n     - utests_stress:\n@@ -2398,6 +2424,12 @@ workflows:\n         requires:\n         - start_utests_fqltool\n         - j8_build\n+    - start_utests_system_keyspace_directory:\n+        type: approval\n+    - utests_system_keyspace_directory:\n+        requires:\n+        - start_utests_fqltool\n+        - j8_build\n     - start_jvm_upgrade_dtest:\n         type: approval\n     - j8_dtest_jars_build:"
  }
]
