[
  {
    "sha": "452f59e6f4d72aeaed360a675aa597163b79151c",
    "filename": "app/src/main/AndroidManifest.xml",
    "status": "modified",
    "additions": 11,
    "deletions": 0,
    "changes": 11,
    "blob_url": "https://github.com/OpenLauncherTeam/openlauncher/blob/32c6d7da42f96b456216c4d19510cc7c126051ce/app/src/main/AndroidManifest.xml",
    "raw_url": "https://github.com/OpenLauncherTeam/openlauncher/raw/32c6d7da42f96b456216c4d19510cc7c126051ce/app/src/main/AndroidManifest.xml",
    "contents_url": "https://api.github.com/repos/OpenLauncherTeam/openlauncher/contents/app/src/main/AndroidManifest.xml?ref=32c6d7da42f96b456216c4d19510cc7c126051ce",
    "patch": "@@ -12,6 +12,17 @@\n     <uses-permission android:name=\"android.permission.WRITE_SETTINGS\"\n         tools:ignore=\"ProtectedPermissions\" />\n \n+    <!-- for TV (start) -->\n+    <uses-feature android:name=\"android.hardware.touchscreen\" android:required=\"false\"/>\n+    <uses-feature android:name=\"android.hardware.faketouch\" android:required=\"false\"/>\n+    <uses-feature android:name=\"android.hardware.telephony\" android:required=\"false\"/>\n+    <uses-feature android:name=\"android.hardware.camera\" android:required=\"false\"/>\n+    <uses-feature android:name=\"android.hardware.nfc\" android:required=\"false\"/>\n+    <uses-feature android:name=\"android.hardware.location.gps\" android:required=\"false\"/>\n+    <uses-feature android:name=\"android.hardware.microphone\" android:required=\"false\"/>\n+    <uses-feature android:name=\"android.hardware.sensor\" android:required=\"false\"/>\n+    <!-- for TV (end) -->\n+\n     <application\n         android:resizeableActivity=\"false\"\n         android:name=\"com.benny.openlauncher.AppObject\""
  },
  {
    "sha": "fb9700a812dfeba2572b6e6abba9928521757a31",
    "filename": "app/src/main/java/com/benny/openlauncher/activity/HomeActivity.java",
    "status": "modified",
    "additions": 50,
    "deletions": 0,
    "changes": 50,
    "blob_url": "https://github.com/OpenLauncherTeam/openlauncher/blob/32c6d7da42f96b456216c4d19510cc7c126051ce/app/src/main/java/com/benny/openlauncher/activity/HomeActivity.java",
    "raw_url": "https://github.com/OpenLauncherTeam/openlauncher/raw/32c6d7da42f96b456216c4d19510cc7c126051ce/app/src/main/java/com/benny/openlauncher/activity/HomeActivity.java",
    "contents_url": "https://api.github.com/repos/OpenLauncherTeam/openlauncher/contents/app/src/main/java/com/benny/openlauncher/activity/HomeActivity.java?ref=32c6d7da42f96b456216c4d19510cc7c126051ce",
    "patch": "@@ -2,6 +2,7 @@\n \n import android.app.Activity;\n import android.app.ActivityOptions;\n+import android.app.UiModeManager;\n import android.appwidget.AppWidgetManager;\n import android.content.BroadcastReceiver;\n import android.content.Context;\n@@ -10,6 +11,8 @@\n import android.content.pm.ActivityInfo;\n import android.content.pm.LauncherActivityInfo;\n import android.content.pm.LauncherApps;\n+import android.content.res.Configuration;\n+import android.graphics.drawable.Drawable;\n import android.os.Build;\n import android.os.Build.VERSION;\n import android.os.Bundle;\n@@ -18,6 +21,7 @@\n import android.support.v4.app.NotificationManagerCompat;\n import android.support.v4.view.ViewPager;\n import android.support.v4.widget.DrawerLayout;\n+import android.util.Log;\n import android.view.View;\n import android.view.Window;\n import android.view.WindowManager;\n@@ -45,6 +49,7 @@\n import com.benny.openlauncher.util.AppManager;\n import com.benny.openlauncher.util.AppSettings;\n import com.benny.openlauncher.util.DatabaseHelper;\n+import com.benny.openlauncher.util.Definitions;\n import com.benny.openlauncher.util.Definitions.ItemPosition;\n import com.benny.openlauncher.util.LauncherAction;\n import com.benny.openlauncher.util.LauncherAction.Action;\n@@ -222,6 +227,16 @@ private void init() {\n     protected void initAppManager() {\n         if (Setup.appSettings().getAppFirstLaunch()) {\n             Setup.appSettings().setAppFirstLaunch(false);\n+\n+            // tonio-nucci - Check at first run if on android TV (go landscape)\n+            UiModeManager uiModeManager = (UiModeManager) getSystemService(UI_MODE_SERVICE);\n+            if (uiModeManager.getCurrentModeType() == Configuration.UI_MODE_TYPE_TELEVISION) {\n+                Log.i(this.getClass().getName(), \"First start - Running on a TV Device - Setting landscape\");\n+                Setup.appSettings().get().setString(R.string.pref_key__desktop_orientation, Definitions.DESKTOP_ORIENTATION_LANDSCAPE);\n+            } else {\n+                Log.i(this.getClass().getName(), \"First start - Running on a non-TV Device\");\n+            }\n+\n             Setup.appSettings().setAppShowIntro(false);\n             Item appDrawerBtnItem = Item.newActionItem(8);\n             appDrawerBtnItem._x = 2;\n@@ -594,6 +609,41 @@ private void handleLauncherResume() {\n                 AppSettings appSettings = Setup.appSettings();\n                 getDesktop().setCurrentItem(appSettings.getDesktopPageCurrent());\n             }\n+\n+            //tonio-nucci: set wallpaper from settings\n+            AppSettings appSettings = Setup.appSettings();\n+            if (appSettings.getAndroidTvOverrideSystemWallpaper()) {\n+                String wallpaperPath = appSettings.getAndroidTvWallpaper();\n+                Log.i(this.getClass().getName(), \"Wallpaper in settings: \" + wallpaperPath);\n+\n+                if (wallpaperPath!=null) {\n+                    getBackground().setBackground(Drawable.createFromPath(wallpaperPath));\n+                    getBackground().setVisibility(View.VISIBLE);\n+                }\n+            } else {\n+                //remove background\n+                getBackground().setBackgroundResource(0);\n+                getBackground().setVisibility(View.INVISIBLE);\n+                //getBackground().setBackgroundColor(Color.RED);\n+            }\n+\n+            // tonio-nucci (for DPAD/TV)\n+            getDesktop().addOnPageChangeListener(new ViewPager.OnPageChangeListener() {\n+                 @Override\n+                 public void onPageScrolled(int i, float v, int i1) { }\n+\n+                 @Override\n+                 public void onPageSelected(int i) {\n+                     Log.i(this.getClass().getName(), \"Page selected: \" + i);\n+                     List<View> pageCells = getDesktop().getCurrentPage().getAllCells();\n+                     if (pageCells.size()>0) {\n+                         pageCells.get(0).requestFocus();\n+                     }\n+                 }\n+\n+                 @Override\n+                 public void onPageScrollStateChanged(int i) { }\n+            });\n         }\n     }\n "
  },
  {
    "sha": "773a5d3c8fc4be9b154e250c9da7df0a08bfd818",
    "filename": "app/src/main/java/com/benny/openlauncher/activity/SettingsActivity.java",
    "status": "modified",
    "additions": 10,
    "deletions": 0,
    "changes": 10,
    "blob_url": "https://github.com/OpenLauncherTeam/openlauncher/blob/32c6d7da42f96b456216c4d19510cc7c126051ce/app/src/main/java/com/benny/openlauncher/activity/SettingsActivity.java",
    "raw_url": "https://github.com/OpenLauncherTeam/openlauncher/raw/32c6d7da42f96b456216c4d19510cc7c126051ce/app/src/main/java/com/benny/openlauncher/activity/SettingsActivity.java",
    "contents_url": "https://api.github.com/repos/OpenLauncherTeam/openlauncher/contents/app/src/main/java/com/benny/openlauncher/activity/SettingsActivity.java?ref=32c6d7da42f96b456216c4d19510cc7c126051ce",
    "patch": "@@ -8,6 +8,7 @@\n import android.support.v7.preference.Preference;\n import android.support.v7.preference.PreferenceFragmentCompat;\n import android.support.v7.widget.Toolbar;\n+import android.util.Log;\n \n import com.benny.openlauncher.R;\n import com.benny.openlauncher.fragment.SettingsBaseFragment;\n@@ -65,6 +66,7 @@ public boolean onPreferenceStartFragment(PreferenceFragmentCompat caller, Prefer\n     @Override\n     protected void onActivityResult(int requestCode, int resultCode, final Intent data) {\n         super.onActivityResult(requestCode, resultCode, data);\n+\n         if (resultCode == RESULT_OK) {\n             Setup.dataManager().close();\n             List<Uri> files = Utils.getSelectedFilesFromResult(data);\n@@ -77,7 +79,15 @@ protected void onActivityResult(int requestCode, int resultCode, final Intent da\n                     BackupHelper.restoreConfig(this, Utils.getFileForUri(files.get(0)).toString());\n                     System.exit(0);\n                     break;\n+                case Definitions.ANDROID_TV_PICK_WALLPAPER:\n+                    Log.i(this.getClass().getName(), \"Android Tv Picked Wallpaper\");\n+                    String imagePath = Utils.getFileForUri(files.get(0)).toString();\n+                    Log.i(this.getClass().getName(), \"Wallpaper Path: \" + imagePath);\n+                    Setup.dataManager().open(); // without this, you get sqlite db already closed error\n+                    _appSettings.setAndroidTvWallpaper(imagePath);\n+                    break;\n             }\n         }\n     }\n+\n }"
  },
  {
    "sha": "da8a2872c1640b53b35b543fc83425405eb708e3",
    "filename": "app/src/main/java/com/benny/openlauncher/fragment/SettingsAndroidTVFragment.java",
    "status": "added",
    "additions": 34,
    "deletions": 0,
    "changes": 34,
    "blob_url": "https://github.com/OpenLauncherTeam/openlauncher/blob/32c6d7da42f96b456216c4d19510cc7c126051ce/app/src/main/java/com/benny/openlauncher/fragment/SettingsAndroidTVFragment.java",
    "raw_url": "https://github.com/OpenLauncherTeam/openlauncher/raw/32c6d7da42f96b456216c4d19510cc7c126051ce/app/src/main/java/com/benny/openlauncher/fragment/SettingsAndroidTVFragment.java",
    "contents_url": "https://api.github.com/repos/OpenLauncherTeam/openlauncher/contents/app/src/main/java/com/benny/openlauncher/fragment/SettingsAndroidTVFragment.java?ref=32c6d7da42f96b456216c4d19510cc7c126051ce",
    "patch": "@@ -0,0 +1,34 @@\n+package com.benny.openlauncher.fragment;\n+\n+import android.content.Intent;\n+import android.os.Bundle;\n+import android.support.v7.preference.Preference;\n+\n+\n+import com.benny.openlauncher.R;\n+import com.benny.openlauncher.util.Definitions;\n+import com.nononsenseapps.filepicker.FilePickerActivity;\n+\n+public class SettingsAndroidTVFragment extends SettingsBaseFragment {\n+    @Override\n+    public void onCreatePreferences(Bundle savedInstanceState, String rootKey) {\n+        super.onCreatePreferences(savedInstanceState, rootKey);\n+        addPreferencesFromResource(R.xml.preferences_android_tv);\n+\n+        Preference preference = findPreference(getContext().getResources().getString(R.string.pref_key__android_tv_settings_choose_wallpaper));\n+        preference.setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() {\n+            @Override\n+            public boolean onPreferenceClick(Preference preference) {\n+\n+                Intent intent = new Intent(getActivity(), FilePickerActivity.class)\n+                        .putExtra(FilePickerActivity.EXTRA_ALLOW_CREATE_DIR, false)\n+                        .putExtra(FilePickerActivity.EXTRA_MODE, FilePickerActivity.MODE_FILE);\n+                intent.setAction(Intent.ACTION_GET_CONTENT);\n+                getActivity().startActivityForResult(intent, Definitions.ANDROID_TV_PICK_WALLPAPER);\n+                return true;\n+\n+            }\n+        });\n+    }\n+\n+}"
  },
  {
    "sha": "7852c39d2a395878f464850de599088d737d7d8c",
    "filename": "app/src/main/java/com/benny/openlauncher/util/AppSettings.java",
    "status": "modified",
    "additions": 9,
    "deletions": 0,
    "changes": 9,
    "blob_url": "https://github.com/OpenLauncherTeam/openlauncher/blob/32c6d7da42f96b456216c4d19510cc7c126051ce/app/src/main/java/com/benny/openlauncher/util/AppSettings.java",
    "raw_url": "https://github.com/OpenLauncherTeam/openlauncher/raw/32c6d7da42f96b456216c4d19510cc7c126051ce/app/src/main/java/com/benny/openlauncher/util/AppSettings.java",
    "contents_url": "https://api.github.com/repos/OpenLauncherTeam/openlauncher/contents/app/src/main/java/com/benny/openlauncher/util/AppSettings.java?ref=32c6d7da42f96b456216c4d19510cc7c126051ce",
    "patch": "@@ -339,6 +339,13 @@ public void setDesktopLock(boolean value) {\n         setBool(R.string.pref_key__desktop_lock, value);\n     }\n \n+    // Android TV\n+    public String getAndroidTvWallpaper() { return getString(R.string.pref_key__android_tv_settings_wallpaper, null); }\n+    public void setAndroidTvWallpaper(String value) { setString(R.string.pref_key__android_tv_settings_wallpaper, value); }\n+\n+    public boolean getAndroidTvOverrideSystemWallpaper() { return getBool(R.string.pref_key__android_tv_settings_override_system_wallpaper, false); }\n+    ///\n+\n     public boolean getAppRestartRequired() {\n         return getBool(R.string.pref_key__queue_restart, false);\n     }\n@@ -364,4 +371,6 @@ public void setAppFirstLaunch(boolean value) {\n         // MUST be committed\n         _prefApp.edit().putBoolean(_context.getString(R.string.pref_key__first_start), value).commit();\n     }\n+\n+\n }"
  },
  {
    "sha": "94461f5f70e9ddf382a26db5c41d57630a8c7166",
    "filename": "app/src/main/java/com/benny/openlauncher/util/Definitions.java",
    "status": "modified",
    "additions": 8,
    "deletions": 0,
    "changes": 8,
    "blob_url": "https://github.com/OpenLauncherTeam/openlauncher/blob/32c6d7da42f96b456216c4d19510cc7c126051ce/app/src/main/java/com/benny/openlauncher/util/Definitions.java",
    "raw_url": "https://github.com/OpenLauncherTeam/openlauncher/raw/32c6d7da42f96b456216c4d19510cc7c126051ce/app/src/main/java/com/benny/openlauncher/util/Definitions.java",
    "contents_url": "https://api.github.com/repos/OpenLauncherTeam/openlauncher/contents/app/src/main/java/com/benny/openlauncher/util/Definitions.java?ref=32c6d7da42f96b456216c4d19510cc7c126051ce",
    "patch": "@@ -1,11 +1,15 @@\n package com.benny.openlauncher.util;\n \n+import android.content.pm.ActivityInfo;\n+\n public class Definitions {\n     public static final int BUFFER_SIZE = 2048;\n     public static final int INTENT_BACKUP = 5;\n     public static final int INTENT_RESTORE = 3;\n     public static final int ACTION_LAUNCHER = 8;\n \n+    public static final int ANDROID_TV_PICK_WALLPAPER = 9;\n+\n     // separates a list of integers\n     public static final String DELIMITER = \"#\";\n \n@@ -27,4 +31,8 @@\n         Inverse,\n         Off\n     }\n+\n+    public static final String DESKTOP_ORIENTATION_PORTRAIT  = \"0\";\n+    public static final String DESKTOP_ORIENTATION_SENSOR    = \"1\";\n+    public static final String DESKTOP_ORIENTATION_LANDSCAPE = \"2\";\n }"
  },
  {
    "sha": "428d85eec13dfc326ef45afe48c819f9bc97be93",
    "filename": "app/src/main/java/com/benny/openlauncher/viewutil/IconLabelItem.java",
    "status": "modified",
    "additions": 8,
    "deletions": 0,
    "changes": 8,
    "blob_url": "https://github.com/OpenLauncherTeam/openlauncher/blob/32c6d7da42f96b456216c4d19510cc7c126051ce/app/src/main/java/com/benny/openlauncher/viewutil/IconLabelItem.java",
    "raw_url": "https://github.com/OpenLauncherTeam/openlauncher/raw/32c6d7da42f96b456216c4d19510cc7c126051ce/app/src/main/java/com/benny/openlauncher/viewutil/IconLabelItem.java",
    "contents_url": "https://api.github.com/repos/OpenLauncherTeam/openlauncher/contents/app/src/main/java/com/benny/openlauncher/viewutil/IconLabelItem.java?ref=32c6d7da42f96b456216c4d19510cc7c126051ce",
    "patch": "@@ -38,6 +38,7 @@\n     private boolean _onClickAnimate = true;\n     private View.OnClickListener _onClickListener;\n     private View.OnLongClickListener _onLongClickListener;\n+    private View.OnFocusChangeListener _onFocusChangeListener;\n \n     public IconLabelItem(Context context, int icon, int label) {\n         _label = context.getString(label);\n@@ -104,6 +105,11 @@ public IconLabelItem withOnLongClickListener(View.OnLongClickListener onLongClic\n         return this;\n     }\n \n+    public IconLabelItem withOnFocusChangeListener(View.OnFocusChangeListener listener) {\n+        _onFocusChangeListener = listener;\n+        return this;\n+    }\n+\n     @Override\n     public ViewHolder getViewHolder(@NonNull View view) {\n         return new ViewHolder(view, this);\n@@ -192,6 +198,8 @@ public void bindView(@NonNull ViewHolder holder, @NonNull List<Object> payloads)\n             holder.itemView.setOnClickListener(_onClickListener);\n         if (_onLongClickListener != null)\n             holder.itemView.setOnLongClickListener(_onLongClickListener);\n+        if (_onFocusChangeListener != null)\n+            holder.itemView.setOnFocusChangeListener(_onFocusChangeListener);\n \n         super.bindView(holder, payloads);\n     }"
  },
  {
    "sha": "d714c7a5d7600663d82c7277c06402468a09882f",
    "filename": "app/src/main/java/com/benny/openlauncher/widget/AppDrawerGrid.java",
    "status": "modified",
    "additions": 12,
    "deletions": 1,
    "changes": 13,
    "blob_url": "https://github.com/OpenLauncherTeam/openlauncher/blob/32c6d7da42f96b456216c4d19510cc7c126051ce/app/src/main/java/com/benny/openlauncher/widget/AppDrawerGrid.java",
    "raw_url": "https://github.com/OpenLauncherTeam/openlauncher/raw/32c6d7da42f96b456216c4d19510cc7c126051ce/app/src/main/java/com/benny/openlauncher/widget/AppDrawerGrid.java",
    "contents_url": "https://api.github.com/repos/OpenLauncherTeam/openlauncher/contents/app/src/main/java/com/benny/openlauncher/widget/AppDrawerGrid.java?ref=32c6d7da42f96b456216c4d19510cc7c126051ce",
    "patch": "@@ -109,7 +109,18 @@ public void onClick(View v) {\n                             Tool.startApp(v.getContext(), app, null);\n                         }\n                     })\n-                    .withOnLongClickListener(DragHandler.getLongClick(Item.newAppItem(app), DragAction.Action.DRAWER, null)));\n+                    .withOnLongClickListener(DragHandler.getLongClick(Item.newAppItem(app), DragAction.Action.DRAWER, null))\n+                    .withOnFocusChangeListener(new OnFocusChangeListener() { // tonio-nucci (for DPAD/TV)\n+                            @Override\n+                            public void onFocusChange(View v, boolean hasFocus) {\n+                                if (hasFocus) {\n+                                    v.setBackgroundColor(Color.argb(128, 255,255,255));\n+                                } else {\n+                                    v.setBackgroundColor(Color.TRANSPARENT);\n+                                }\n+                            }\n+                    })\n+            );\n         }\n         _gridDrawerAdapter.set(items);\n     }"
  },
  {
    "sha": "2dbb9f0a0e89e8c6c4fc5a267c73aff5bc3ca504",
    "filename": "app/src/main/java/com/benny/openlauncher/widget/AppItemView.java",
    "status": "modified",
    "additions": 27,
    "deletions": 0,
    "changes": 27,
    "blob_url": "https://github.com/OpenLauncherTeam/openlauncher/blob/32c6d7da42f96b456216c4d19510cc7c126051ce/app/src/main/java/com/benny/openlauncher/widget/AppItemView.java",
    "raw_url": "https://github.com/OpenLauncherTeam/openlauncher/raw/32c6d7da42f96b456216c4d19510cc7c126051ce/app/src/main/java/com/benny/openlauncher/widget/AppItemView.java",
    "contents_url": "https://api.github.com/repos/OpenLauncherTeam/openlauncher/contents/app/src/main/java/com/benny/openlauncher/widget/AppItemView.java?ref=32c6d7da42f96b456216c4d19510cc7c126051ce",
    "patch": "@@ -190,6 +190,9 @@ public AppItemView getView() {\n         }\n \n         public Builder setAppItem(final Item item) {\n+            //tonio-nucci (for DPAD/TV)\n+            this.setViewOnFocusChangeListener();\n+\n             _view.setLabel(item.getLabel());\n             _view.setIcon(item.getIcon());\n             _view.setOnClickListener(new OnClickListener() {\n@@ -207,6 +210,9 @@ public void run() {\n         }\n \n         public Builder setShortcutItem(final Item item) {\n+            //tonio-nucci (for DPAD/TV)\n+            this.setViewOnFocusChangeListener();\n+\n             _view.setLabel(item.getLabel());\n             _view.setIcon(item.getIcon());\n             _view.setOnClickListener(new OnClickListener() {\n@@ -224,6 +230,9 @@ public void run() {\n         }\n \n         public Builder setGroupItem(Context context, final DesktopCallback callback, final Item item) {\n+            //tonio-nucci (for DPAD/TV)\n+            this.setViewOnFocusChangeListener();\n+\n             _view.setLabel(item.getLabel());\n             _view.setIcon(new GroupDrawable(context, item, Setup.appSettings().getIconSize()));\n             _view.setOnClickListener(new View.OnClickListener() {\n@@ -238,6 +247,9 @@ public void onClick(View v) {\n         }\n \n         public Builder setActionItem(Item item) {\n+            //tonio-nucci (for DPAD/TV)\n+            this.setViewOnFocusChangeListener();\n+\n             _view.setLabel(item.getLabel());\n             _view.setIcon(ContextCompat.getDrawable(Setup.appContext(), R.drawable.item_drawer));\n             _view.setOnClickListener(new OnClickListener() {\n@@ -278,5 +290,20 @@ public Builder vibrateWhenLongPress(boolean vibrate) {\n             _view._vibrateWhenLongPress = vibrate;\n             return this;\n         }\n+\n+        //tonio-nucci (for DPAD/TV)\n+        public Builder setViewOnFocusChangeListener() {\n+            _view.setOnFocusChangeListener(new OnFocusChangeListener() {\n+            @Override\n+            public void onFocusChange(View v, boolean hasFocus) {\n+                    if (hasFocus) {\n+                        v.setBackgroundColor(Color.argb(128, 200, 200, 200));\n+                    } else {\n+                        v.setBackgroundColor(Color.TRANSPARENT);\n+                    }\n+                }\n+            });\n+            return this;\n+        }\n     }\n }"
  },
  {
    "sha": "7b6bfcf741386232239dbf93e54fc19ade4df2d4",
    "filename": "app/src/main/java/com/benny/openlauncher/widget/Desktop.java",
    "status": "modified",
    "additions": 13,
    "deletions": 2,
    "changes": 15,
    "blob_url": "https://github.com/OpenLauncherTeam/openlauncher/blob/32c6d7da42f96b456216c4d19510cc7c126051ce/app/src/main/java/com/benny/openlauncher/widget/Desktop.java",
    "raw_url": "https://github.com/OpenLauncherTeam/openlauncher/raw/32c6d7da42f96b456216c4d19510cc7c126051ce/app/src/main/java/com/benny/openlauncher/widget/Desktop.java",
    "contents_url": "https://api.github.com/repos/OpenLauncherTeam/openlauncher/contents/app/src/main/java/com/benny/openlauncher/widget/Desktop.java?ref=32c6d7da42f96b456216c4d19510cc7c126051ce",
    "patch": "@@ -8,6 +8,7 @@\n import android.support.v4.view.PagerAdapter;\n import android.support.v4.view.ViewPager;\n import android.util.AttributeSet;\n+import android.util.Log;\n import android.view.View;\n import android.view.ViewGroup;\n import android.view.ViewPropertyAnimator;\n@@ -493,8 +494,18 @@ protected void onPageScrolled(int position, float offset, int offsetPixels) {\n             xOffset = 0.5f;\n         }\n \n-        WallpaperManager wallpaperManager = WallpaperManager.getInstance(getContext());\n-        wallpaperManager.setWallpaperOffsets(getWindowToken(), xOffset, 0.0f);\n+        try {\n+            // On Android TV (not all) there is no WallpaperManager\n+            // these lines (the second one) generate an exception\n+            // java.lang.NullPointerException: Attempt to invoke virtual method\n+            // 'void android.app.WallpaperManager.setWallpaperOffsets(android.os.IBinder, float, float)'\n+            // on null object reference\n+            WallpaperManager wallpaperManager = WallpaperManager.getInstance(getContext());\n+            wallpaperManager.setWallpaperOffsets(getWindowToken(), xOffset, 0.0f);\n+        } catch (Exception e) {\n+            Log.i(this.getClass().getName(), \"Unexistent WallpaperManager, perhaps we are on an Android TV\");\n+        }\n+\n         super.onPageScrolled(position, offset, offsetPixels);\n     }\n "
  },
  {
    "sha": "43a626d459daffbd3084f34cb88dfb4b68cdf760",
    "filename": "app/src/main/java/com/benny/openlauncher/widget/GroupPopupView.java",
    "status": "modified",
    "additions": 10,
    "deletions": 0,
    "changes": 10,
    "blob_url": "https://github.com/OpenLauncherTeam/openlauncher/blob/32c6d7da42f96b456216c4d19510cc7c126051ce/app/src/main/java/com/benny/openlauncher/widget/GroupPopupView.java",
    "raw_url": "https://github.com/OpenLauncherTeam/openlauncher/raw/32c6d7da42f96b456216c4d19510cc7c126051ce/app/src/main/java/com/benny/openlauncher/widget/GroupPopupView.java",
    "contents_url": "https://api.github.com/repos/OpenLauncherTeam/openlauncher/contents/app/src/main/java/com/benny/openlauncher/widget/GroupPopupView.java?ref=32c6d7da42f96b456216c4d19510cc7c126051ce",
    "patch": "@@ -110,6 +110,9 @@ public boolean showPopup(final Item item, final View itemView, final DesktopCall\n \n         boolean appsChanged = false;\n \n+        //tonio-nucci (for DPAD/TV) - focus on the first item\n+        boolean focusSet = false;\n+\n         for (int x2 = 0; x2 < cellSize[0]; x2++) {\n             for (int y2 = 0; y2 < cellSize[1]; y2++) {\n                 if (y2 * cellSize[0] + x2 > item.getGroupItems().size() - 1) {\n@@ -126,6 +129,13 @@ public boolean showPopup(final Item item, final View itemView, final DesktopCall\n                     continue;\n                 } else {\n                     final View view = ItemViewFactory.getItemView(getContext(), callback, DragAction.Action.DESKTOP, groupItem);\n+\n+                    //tonio-nucci (for DPAD/TV) - focus on the first item\n+                    if (!focusSet) {\n+                        view.requestFocus();\n+                        focusSet = true;\n+                    }\n+\n                     view.setOnLongClickListener(new OnLongClickListener() {\n                         @Override\n                         public boolean onLongClick(View view2) {"
  },
  {
    "sha": "1a0483e715def35f54222d04cd6011bedd90a3ad",
    "filename": "app/src/main/res/values/strings.xml",
    "status": "modified",
    "additions": 8,
    "deletions": 0,
    "changes": 8,
    "blob_url": "https://github.com/OpenLauncherTeam/openlauncher/blob/32c6d7da42f96b456216c4d19510cc7c126051ce/app/src/main/res/values/strings.xml",
    "raw_url": "https://github.com/OpenLauncherTeam/openlauncher/raw/32c6d7da42f96b456216c4d19510cc7c126051ce/app/src/main/res/values/strings.xml",
    "contents_url": "https://api.github.com/repos/OpenLauncherTeam/openlauncher/contents/app/src/main/res/values/strings.xml?ref=32c6d7da42f96b456216c4d19510cc7c126051ce",
    "patch": "@@ -70,6 +70,8 @@\n     <string name=\"pref_title__dock\">Dock</string>\n     <string name=\"pref_title__app_drawer\">App Drawer</string>\n     <string name=\"pref_title__appearance\">Appearance</string>\n+    <string name=\"pref_title__android_tv\">Android TV</string>\n+    <string name=\"pref_title__android_tv_wallpaper\">Wallpaper</string>\n     <string name=\"pref_title__behavior\">Behavior</string>\n     <string name=\"pref_title__advanced\">Advanced</string>\n     <string name=\"pref_title__hide_apps\">Hide Apps</string>\n@@ -229,6 +231,12 @@\n     <string name=\"default_folder\">Unnamed</string>\n     <string name=\"default_icons\">Default</string>\n \n+    <!-- Android TV -->\n+    <string name=\"enable_override_system_wallpaper\">Override system wallpaper</string>\n+    <string name=\"pref_summary__android_tv\">Android TV related settings</string>\n+    <string name=\"pref_title__android_tv_choose_wallpaper\">Choose wallpaper</string>\n+    <string name=\"pref_summary__android_tv_choose_wallpaper\">Replace system wallpaper</string>\n+\n     <!-- Drag Option View -->\n     <string name=\"edit\">Edit</string>\n     <string name=\"info\">Info</string>"
  },
  {
    "sha": "0238ec8a502ac865388f4a5975ffc95095dc394c",
    "filename": "app/src/main/res/values/strings_not_translatable.xml",
    "status": "modified",
    "additions": 5,
    "deletions": 0,
    "changes": 5,
    "blob_url": "https://github.com/OpenLauncherTeam/openlauncher/blob/32c6d7da42f96b456216c4d19510cc7c126051ce/app/src/main/res/values/strings_not_translatable.xml",
    "raw_url": "https://github.com/OpenLauncherTeam/openlauncher/raw/32c6d7da42f96b456216c4d19510cc7c126051ce/app/src/main/res/values/strings_not_translatable.xml",
    "contents_url": "https://api.github.com/repos/OpenLauncherTeam/openlauncher/contents/app/src/main/res/values/strings_not_translatable.xml?ref=32c6d7da42f96b456216c4d19510cc7c126051ce",
    "patch": "@@ -48,6 +48,10 @@\n     <string name=\"pref_key__dock_show_label\" translatable=\"false\">pref_key__dock_show_label</string>\n     <string name=\"pref_key__dock_background_color\" translatable=\"false\">pref_key__dock_background_color</string>\n \n+    <string name=\"pref_key__android_tv_settings_override_system_wallpaper\" translatable=\"false\">pref_key__android_tv_settings_override_system_wallpaper</string>\n+    <string name=\"pref_key__android_tv_settings_choose_wallpaper\" translatable=\"false\">pref_key__android_tv_settings_choose_wallpaper</string>\n+    <string name=\"pref_key__android_tv_settings_wallpaper\" translatable=\"false\">pref_key__android_tv_settings_wallpaper</string>\n+\n     <string name=\"pref_key__drawer_columns\" translatable=\"false\">pref_key__drawer_columns</string>\n     <string name=\"pref_key__drawer_rows\" translatable=\"false\">pref_key__drawer_rows</string>\n     <string name=\"pref_key__drawer_style\" translatable=\"false\">pref_key__drawer_style</string>\n@@ -87,6 +91,7 @@\n     <string name=\"pref_key__cat_dock\" translatable=\"false\">pref_key__cat_dock</string>\n     <string name=\"pref_key__cat_app_drawer\" translatable=\"false\">pref_key__cat_app_drawer</string>\n     <string name=\"pref_key__cat_appearance\" translatable=\"false\">pref_key__cat_appearance</string>\n+    <string name=\"pref_key__cat_android_tv\" translatable=\"false\">pref_key__cat_android_tv</string>\n     <string name=\"pref_key__cat_behavior\" translatable=\"false\">pref_key__cat_behavior</string>\n     <string name=\"pref_key__cat_hide_apps\" translatable=\"false\">pref_key__cat_hide_apps</string>\n     <string name=\"pref_key__cat_advanced\" translatable=\"false\">pref_key__cat_advanced</string>"
  },
  {
    "sha": "4b4ec6cfa73da0eb4e534fdf166c98618177f6e5",
    "filename": "app/src/main/res/xml/preferences_android_tv.xml",
    "status": "added",
    "additions": 23,
    "deletions": 0,
    "changes": 23,
    "blob_url": "https://github.com/OpenLauncherTeam/openlauncher/blob/32c6d7da42f96b456216c4d19510cc7c126051ce/app/src/main/res/xml/preferences_android_tv.xml",
    "raw_url": "https://github.com/OpenLauncherTeam/openlauncher/raw/32c6d7da42f96b456216c4d19510cc7c126051ce/app/src/main/res/xml/preferences_android_tv.xml",
    "contents_url": "https://api.github.com/repos/OpenLauncherTeam/openlauncher/contents/app/src/main/res/xml/preferences_android_tv.xml?ref=32c6d7da42f96b456216c4d19510cc7c126051ce",
    "patch": "@@ -0,0 +1,23 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<PreferenceScreen xmlns:android=\"http://schemas.android.com/apk/res/android\"\n+    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n+    android:layout_width=\"match_parent\"\n+    android:layout_height=\"match_parent\"\n+    android:title=\"@string/pref_title__android_tv\">\n+\n+    <com.benny.openlauncher.widget.ColorPreferenceCategory android:title=\"@string/pref_title__android_tv_wallpaper\">\n+\n+        <SwitchPreference\n+            android:defaultValue=\"false\"\n+            android:key=\"@string/pref_key__android_tv_settings_override_system_wallpaper\"\n+            android:title=\"@string/enable_override_system_wallpaper\" />\n+\n+        <Preference\n+            android:key=\"@string/pref_key__android_tv_settings_choose_wallpaper\"\n+            android:summary=\"@string/pref_summary__android_tv_choose_wallpaper\"\n+            android:title=\"@string/pref_title__android_tv_choose_wallpaper\" />\n+\n+    </com.benny.openlauncher.widget.ColorPreferenceCategory>\n+\n+\n+</PreferenceScreen>"
  },
  {
    "sha": "ceab590192dce1a9dd5326c9e03aea8ab941a0be",
    "filename": "app/src/main/res/xml/preferences_master.xml",
    "status": "modified",
    "additions": 7,
    "deletions": 0,
    "changes": 7,
    "blob_url": "https://github.com/OpenLauncherTeam/openlauncher/blob/32c6d7da42f96b456216c4d19510cc7c126051ce/app/src/main/res/xml/preferences_master.xml",
    "raw_url": "https://github.com/OpenLauncherTeam/openlauncher/raw/32c6d7da42f96b456216c4d19510cc7c126051ce/app/src/main/res/xml/preferences_master.xml",
    "contents_url": "https://api.github.com/repos/OpenLauncherTeam/openlauncher/contents/app/src/main/res/xml/preferences_master.xml?ref=32c6d7da42f96b456216c4d19510cc7c126051ce",
    "patch": "@@ -30,6 +30,13 @@\n             android:key=\"@string/pref_key__cat_appearance\"\n             android:title=\"@string/pref_title__appearance\" />\n \n+        <PreferenceScreen\n+            android:fragment=\"com.benny.openlauncher.fragment.SettingsAndroidTVFragment\"\n+            android:icon=\"@drawable/ic_desktop\"\n+            android:key=\"@string/pref_key__cat_android_tv\"\n+            android:title=\"@string/pref_title__android_tv\"\n+            android:summary=\"@string/pref_summary__android_tv\"/>\n+\n     </com.benny.openlauncher.widget.ColorPreferenceCategory>\n \n     <com.benny.openlauncher.widget.ColorPreferenceCategory android:title=\"@string/pref_title__others\">"
  }
]
